{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/hasA11yProp.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/isEmptyString.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/mergeClasses.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toKebabCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toPascalCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toCamelCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/Icon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/lock.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/scroll.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/box.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/map.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/maximize.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book-open.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/file-text.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/send.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/activity.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/dices.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/coins.js","src://tavern_helper_template/src//bgm.ts","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//battle/cardRegistry.ts","src://tavern_helper_template/src//battle/effects.ts","src://tavern_helper_template/src//battle/enemyRegistry.ts","src://tavern_helper_template/src//battle/relicRegistry.ts","src://tavern_helper_template/src//floor.ts","src://tavern_helper_template/src//fullscreen.ts","src://tavern_helper_template/src//responseParser.ts","src://tavern_helper_template/src//gameStore.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/link-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/skull.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bug.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/droplet.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/flame.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/triangle-alert.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/heart.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/ban.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/zap.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/snowflake.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bone.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/layers.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/battery.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/waves.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye-off.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/brain.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/leaf.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/trash-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/x.js","src://tavern_helper_template/src//battle/algorithms.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/circle-question-mark.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sword.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/footprints.js","webpack://tavern_helper_template/./src//components/DungeonCard.vue?3014","webpack://tavern_helper_template/src//components/DungeonCard.vue?1f0e","src://tavern_helper_template/src//components/DungeonDice.vue","webpack://tavern_helper_template/src//components/DungeonDice.vue?e662","webpack://tavern_helper_template/./src//components/CombatView.vue?260e","webpack://tavern_helper_template/src//components/CombatView.vue?1ffc","src://tavern_helper_template/src//components/DungeonModal.vue","webpack://tavern_helper_template/src//components/DungeonModal.vue?eaca","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/pencil.js","src://tavern_helper_template/src//components/SaveLoadPanel.vue","webpack://tavern_helper_template/src//components/SaveLoadPanel.vue?22cd","webpack://tavern_helper_template/./src//components/GameView.vue?fd3b","webpack://tavern_helper_template/src//components/GameView.vue?bc10","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/play.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/star.js","src://tavern_helper_template/src//components/SplashScreen.vue","webpack://tavern_helper_template/src//components/SplashScreen.vue?b86f","webpack://tavern_helper_template/./src//App.vue?40f8","webpack://tavern_helper_template/src//App.vue?7770","src://tavern_helper_template/src//index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasA11yProp };\n//# sourceMappingURL=hasA11yProp.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString };\n//# sourceMappingURL=isEmptyString.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses };\n//# sourceMappingURL=mergeClasses.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { toKebabCase };\n//# sourceMappingURL=toKebabCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { toCamelCase } from './toCamelCase.js';\n\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\n\nexport { toPascalCase };\n//# sourceMappingURL=toPascalCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\n\nexport { toCamelCase };\n//# sourceMappingURL=toCamelCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { hasA11yProp } from './shared/src/utils/hasA11yProp.js';\nimport { isEmptyString } from './shared/src/utils/isEmptyString.js';\nimport { mergeClasses } from './shared/src/utils/mergeClasses.js';\nimport { toKebabCase } from './shared/src/utils/toKebabCase.js';\nimport { toPascalCase } from './shared/src/utils/toPascalCase.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      ),\n      ...!slots.default && !hasA11yProp(props) && { \"aria-hidden\": \"true\" }\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Book = createLucideIcon(\"book\", [\n  [\n    \"path\",\n    {\n      d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20\",\n      key: \"k3hazp\"\n    }\n  ]\n]);\n\nexport { Book as default };\n//# sourceMappingURL=book.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scroll = createLucideIcon(\"scroll\", [\n  [\"path\", { d: \"M19 17V5a2 2 0 0 0-2-2H4\", key: \"zz82l3\" }],\n  [\n    \"path\",\n    {\n      d: \"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3\",\n      key: \"1ph1d7\"\n    }\n  ]\n]);\n\nexport { Scroll as default };\n//# sourceMappingURL=scroll.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Box = createLucideIcon(\"box\", [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"book-open\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"file-text\", [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dices = createLucideIcon(\"dices\", [\n  [\"rect\", { width: \"12\", height: \"12\", x: \"2\", y: \"10\", rx: \"2\", ry: \"2\", key: \"6agr2n\" }],\n  [\n    \"path\",\n    { d: \"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6\", key: \"1o487t\" }\n  ],\n  [\"path\", { d: \"M6 18h.01\", key: \"uhywen\" }],\n  [\"path\", { d: \"M10 14h.01\", key: \"ssrbsk\" }],\n  [\"path\", { d: \"M15 6h.01\", key: \"cblpky\" }],\n  [\"path\", { d: \"M18 9h.01\", key: \"2061c0\" }]\n]);\n\nexport { Dices as default };\n//# sourceMappingURL=dices.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coins = createLucideIcon(\"coins\", [\n  [\"circle\", { cx: \"8\", cy: \"8\", r: \"6\", key: \"3yglwk\" }],\n  [\"path\", { d: \"M18.09 10.37A6 6 0 1 1 10.34 18\", key: \"t5s6rm\" }],\n  [\"path\", { d: \"M7 6h1v4\", key: \"1obek4\" }],\n  [\"path\", { d: \"m16.71 13.88.7.71-2.82 2.82\", key: \"1rbuyh\" }]\n]);\n\nexport { Coins as default };\n//# sourceMappingURL=coins.js.map\n","import { readonly, ref } from 'vue';\n\nexport interface BgmTrack {\n  id: string;\n  name: string;\n  url: string;\n}\n\nconst HF_DATASET_REPO = 'Vin05/AI-Gallery';\nconst HF_RESOLVE_BASE = `https://huggingface.co/datasets/${HF_DATASET_REPO}/resolve/main`;\nconst HF_API_TREE_BASE = `https://huggingface.co/api/datasets/${HF_DATASET_REPO}/tree/main`;\n\nconst ENCODED_DUNGEON = encodeURIComponent('');\nconst ENCODED_BGM_DIR = `${encodeURIComponent('')}/${encodeURIComponent('')}`;\nconst LOCAL_BGM_WINDOWS_DIR = 'D:/SillyTavern////';\n\nconst BGM_TRACK_KEY = 'dungeon.bgm.track';\nconst BGM_VOLUME_KEY = 'dungeon.bgm.volume';\nconst DEFAULT_BGM_FILE = 'brave-explorer.mp3';\nconst DEFAULT_BGM_ID = DEFAULT_BGM_FILE;\n\nconst bgmTracksState = ref<BgmTrack[]>([]);\nconst bgmVolumeState = ref(0.45);\nconst bgmTrackIdState = ref(DEFAULT_BGM_ID);\n\nlet initialized = false;\nlet audioEl: HTMLAudioElement | null = null;\nlet loadedTrackId: string | null = null;\nlet resumeListenerBound = false;\nlet currentTrackSources: string[] = [];\nlet currentTrackSourceIndex = 0;\n\nconst toWindowsFileUrl = (windowsPath: string) => {\n  const normalized = windowsPath.replace(/\\\\/g, '/');\n  const parts = normalized.split('/').filter(Boolean);\n  if (parts.length === 0) return '';\n  const [root, ...rest] = parts;\n  const encodedRest = rest.map((part) => encodeURIComponent(part)).join('/');\n  return `file:///${root}/${encodedRest}`;\n};\n\nconst buildHfTrackUrl = (fileName: string) => (\n  `${HF_RESOLVE_BASE}/${ENCODED_DUNGEON}/${ENCODED_BGM_DIR}/${encodeURIComponent(fileName)}`\n);\n\nconst buildLocalTrackUrl = (fileName: string) => (\n  toWindowsFileUrl(`${LOCAL_BGM_WINDOWS_DIR}/${fileName}`)\n);\n\nconst buildTrackSources = (fileName: string) => {\n  const sources = [buildLocalTrackUrl(fileName), buildHfTrackUrl(fileName)].filter(Boolean);\n  return [...new Set(sources)];\n};\n\nconst createTrack = (fileName: string): BgmTrack => {\n  const id = fileName;\n  const title = fileName.replace(/\\.[^.]+$/, '');\n  const sources = buildTrackSources(fileName);\n  const url = sources[0] ?? buildHfTrackUrl(fileName);\n  return { id, name: title, url };\n};\n\nconst DEFAULT_TRACKS: BgmTrack[] = [\n  createTrack('brave-explorer.mp3'),\n  createTrack('close-then-gone.mp3'),\n  createTrack('fantasy-galaxy.mp3'),\n  createTrack('mountain-piano-background.mp3'),\n  createTrack('over-nara.mp3'),\n  createTrack('soft-fly.mp3'),\n  createTrack('streetlamp-wind.mp3'),\n];\n\nconst clampVolume = (value: number) => {\n  if (!Number.isFinite(value)) return 0;\n  return Math.max(0, Math.min(1, value));\n};\n\nconst parsePersistedVolume = (raw: string | null) => {\n  const parsed = Number(raw);\n  if (!Number.isFinite(parsed)) return 0.45;\n  return clampVolume(parsed);\n};\n\nconst ensureAudio = () => {\n  if (audioEl) return audioEl;\n  audioEl = new Audio();\n  audioEl.preload = 'auto';\n  audioEl.loop = true;\n  audioEl.volume = bgmVolumeState.value;\n  audioEl.addEventListener('error', () => {\n    if (!audioEl) return;\n    const nextIndex = currentTrackSourceIndex + 1;\n    if (nextIndex >= currentTrackSources.length) return;\n    currentTrackSourceIndex = nextIndex;\n    audioEl.src = currentTrackSources[currentTrackSourceIndex]!;\n    audioEl.load();\n    audioEl.play().catch(() => {\n      bindResumeOnGesture();\n    });\n  });\n  return audioEl;\n};\n\nconst persistVolume = () => {\n  localStorage.setItem(BGM_VOLUME_KEY, String(bgmVolumeState.value));\n};\n\nconst persistTrackId = () => {\n  localStorage.setItem(BGM_TRACK_KEY, bgmTrackIdState.value);\n};\n\nconst getCurrentTrack = () => {\n  if (bgmTracksState.value.length === 0) return null;\n  return bgmTracksState.value.find((track) => track.id === bgmTrackIdState.value) ?? bgmTracksState.value[0]!;\n};\n\nconst sortTracks = (tracks: BgmTrack[]) => (\n  [...tracks].sort((a, b) => {\n    if (a.id === DEFAULT_BGM_ID) return -1;\n    if (b.id === DEFAULT_BGM_ID) return 1;\n    return a.name.localeCompare(b.name, 'en');\n  })\n);\n\nconst mergeTracks = (primary: BgmTrack[], secondary: BgmTrack[]) => {\n  const merged = new Map<string, BgmTrack>();\n  for (const track of secondary) merged.set(track.id, track);\n  for (const track of primary) merged.set(track.id, track);\n  return sortTracks([...merged.values()]);\n};\n\nconst applyCurrentTrackToAudio = () => {\n  const track = getCurrentTrack();\n  if (!track) return;\n  if (bgmTrackIdState.value !== track.id) {\n    bgmTrackIdState.value = track.id;\n    persistTrackId();\n  }\n  const audio = ensureAudio();\n  audio.volume = bgmVolumeState.value;\n  if (loadedTrackId !== track.id) {\n    currentTrackSources = buildTrackSources(track.id);\n    currentTrackSourceIndex = 0;\n    audio.src = currentTrackSources[0] ?? track.url;\n    audio.load();\n    loadedTrackId = track.id;\n  }\n};\n\nconst bindResumeOnGesture = () => {\n  if (resumeListenerBound) return;\n  resumeListenerBound = true;\n  const resume = () => {\n    resumeListenerBound = false;\n    if (!audioEl) return;\n    audioEl.play().catch(() => {\n      bindResumeOnGesture();\n    });\n  };\n  document.addEventListener('click', resume, { once: true, capture: true });\n  document.addEventListener('keydown', resume, { once: true, capture: true });\n  document.addEventListener('touchstart', resume, { once: true, capture: true });\n};\n\nconst tryPlay = () => {\n  const audio = ensureAudio();\n  audio.play().catch(() => {\n    bindResumeOnGesture();\n  });\n};\n\nconst parseTrackFromApiPath = (path: string): BgmTrack | null => {\n  const parts = path.split('/');\n  const fileName = parts[parts.length - 1];\n  if (!fileName || !/\\.mp3$/i.test(fileName)) return null;\n  return {\n    id: fileName,\n    name: fileName.replace(/\\.[^.]+$/, ''),\n    url: buildHfTrackUrl(fileName),\n  };\n};\n\nconst fetchDungeonBackgroundMusicTracks = async (): Promise<BgmTrack[]> => {\n  const url = `${HF_API_TREE_BASE}/${ENCODED_DUNGEON}/${ENCODED_BGM_DIR}`;\n  const response = await fetch(url);\n  if (!response.ok) return [];\n  const payload = await response.json() as Array<{ path?: string; type?: string }>;\n  const tracks: BgmTrack[] = [];\n  for (const item of payload) {\n    if (item.type !== 'file' || !item.path) continue;\n    const parsed = parseTrackFromApiPath(item.path);\n    if (parsed) tracks.push(parsed);\n  }\n  return tracks;\n};\n\nconst bootstrapTrackList = async () => {\n  bgmTracksState.value = sortTracks(DEFAULT_TRACKS);\n  try {\n    const remoteTracks = await fetchDungeonBackgroundMusicTracks();\n    if (remoteTracks.length > 0) {\n      bgmTracksState.value = mergeTracks(remoteTracks, DEFAULT_TRACKS);\n    }\n  } catch {\n    // Keep fallback list when remote directory is unavailable.\n  }\n};\n\nexport const initializeBgm = async () => {\n  if (initialized) return;\n  initialized = true;\n\n  bgmVolumeState.value = parsePersistedVolume(localStorage.getItem(BGM_VOLUME_KEY));\n  bgmTrackIdState.value = localStorage.getItem(BGM_TRACK_KEY) || DEFAULT_BGM_ID;\n\n  await bootstrapTrackList();\n  applyCurrentTrackToAudio();\n  tryPlay();\n};\n\nexport const disposeBgm = () => {\n  if (!audioEl) return;\n  audioEl.pause();\n  audioEl.src = '';\n  audioEl = null;\n  loadedTrackId = null;\n  initialized = false;\n};\n\nexport const setBgmVolume = (value: number) => {\n  bgmVolumeState.value = clampVolume(value);\n  persistVolume();\n  if (audioEl) {\n    audioEl.volume = bgmVolumeState.value;\n  }\n};\n\nexport const setBgmTrack = (trackId: string) => {\n  if (!trackId) return;\n  bgmTrackIdState.value = trackId;\n  persistTrackId();\n  applyCurrentTrackToAudio();\n  tryPlay();\n};\n\nexport const bgmTracks = readonly(bgmTracksState);\nexport const bgmVolume = readonly(bgmVolumeState);\nexport const bgmTrackId = readonly(bgmTrackIdState);\n","// \n//    \n// \n\n//   \nexport enum CardType {\n  PHYSICAL = '',\n  MAGIC = '',\n  FUNCTION = '',\n  DODGE = '',\n  CURSE = '',\n}\n\nexport type CardRarity = '' | '';\n\n//   \n/**  */\nexport type DamageMode = 'relative' | 'fixed' | 'mixed';\n\n/**\n * \n * - relative:  = FinalPoint * scale + scaleAddition\n * - fixed:     = value\n * - mixed:     = baseValue + FinalPoint * scale + scaleAddition\n */\nexport interface DamageLogic {\n  mode: DamageMode;\n  /** relative / mixed:  += FinalPoint * scale */\n  scale?: number;\n  /** relative / mixed:  += scaleAddition */\n  scaleAddition?: number;\n  /** fixed:  */\n  value?: number;\n  /** mixed:  */\n  baseValue?: number;\n}\n\n//   \nexport type RerollTarget = 'self' | 'enemy' | 'none';\n\nexport interface CardTraits {\n  /**  */\n  combo: boolean;\n  /**  */\n  reroll: RerollTarget;\n  /**  */\n  draw: boolean;\n  /**  */\n  unplayable?: boolean;\n  /**  */\n  destroyOnClashWin?: boolean;\n  /**  */\n  insertCardsToEnemyDeck?: string[];\n  /**  */\n  purgeOnUse?: boolean;\n}\n\n//   \nexport interface CardCalculation {\n  /**  1.0 */\n  multiplier: number;\n  /**  0 */\n  addition: number;\n}\n\n//   \n\n/**  */\nexport type EffectValueMode = 'fixed' | 'point_scale' | 'max_hp_percent';\n/**  */\nexport type CardEffectTrigger = 'on_use' | 'on_dodge_success' | 'on_opponent_skip';\n\n/**  */\nexport interface CardEffect {\n  /**  on_use */\n  triggers?: CardEffectTrigger[];\n\n  /**  */\n  kind:\n    | 'apply_buff'     //  Buff/Debuff\n    | 'heal'           // \n    | 'restore_mana'   // \n    | 'cleanse';       //  Debuff\n\n  //  apply_buff  \n  /** kind = apply_buff  */\n  effectType?: EffectType;\n  /** self = enemy =  */\n  target?: 'self' | 'enemy';\n  /**  */\n  restrictedTypes?: CardType[];\n\n  //   \n  /** fixed = point_scale = FinalPoint * scalemax_hp_percent =  * scale */\n  valueMode: EffectValueMode;\n  /** fixed  */\n  fixedValue?: number;\n  /** point_scale / max_hp_percent  */\n  scale?: number;\n\n  //  cleanse  \n  /**  Debuff kind = cleanse  */\n  cleanseTypes?: EffectType[];\n}\n\n//   \nexport interface CardData {\n  id: string;\n  name: string;\n  type: CardType;\n  /**  */\n  category: string;\n  /**  */\n  rarity: CardRarity;\n  /**  Type ==   0 */\n  manaCost: number;\n  /**  */\n  calculation: CardCalculation;\n  /**  */\n  damageLogic: DamageLogic;\n  /** 1 */\n  hitCount?: number;\n  /**  */\n  traits: CardTraits;\n  /**  */\n  cardEffects: CardEffect[];\n  /**  */\n  description: string;\n  /**  _ */\n  negativeEffect?: string;\n  /**  */\n  manaDrain?: number;\n  /**  */\n  ignoreDodge?: boolean;\n  /**\n   * \n   * - number\n   * - object/ + /\n   */\n  selfDamage?: number | CardSelfDamageConfig;\n  /**  */\n  image?: string;\n}\n\n/**  */\nexport interface CardSelfDamageConfig {\n  /** fixed=percent= 50  50% */\n  value: number;\n  /** fixed=percent= */\n  mode?: 'fixed' | 'percent';\n  /** hp=maxHp= */\n  target?: 'hp' | 'maxHp';\n}\n\n//  /Buff  \nexport enum EffectType {\n  /**    -1 */\n  BARRIER = '',\n  /**    */\n  ARMOR = '',\n  /**    */\n  BIND = '',\n  /**    3 / */\n  DEVOUR = '',\n  /**    */\n  POISON = '',\n  /**    */\n  POISON_AMOUNT = '\\u4e2d\\u6bd2\\u91cf',\n  /**   300 */\n  CORROSION = '',\n  /**    */\n  BURN = '',\n  /**    */\n  BLEED = '',\n  /**    */\n  VULNERABLE = '',\n  /**    */\n  REGEN = '',\n  /**    */\n  WHITE_TURBID = '',\n  /**    */\n  IGNITE_AURA = '',\n  /**    */\n  STUN = '',\n  /**    */\n  CHARGE = '',\n  /**    */\n  FATIGUE = '',\n  /**    */\n  COLD = '',\n  /**    */\n  NON_LIVING = '',\n  /**   50% */\n  NON_ENTITY = '',\n  /**    */\n  ILLUSORY_BODY = '',\n  /**    */\n  MAX_HP_REDUCTION = '',\n  /**  3+1 */\n  POINT_GROWTH_BIG = '',\n  /**  3+1 */\n  POINT_GROWTH_SMALL = '',\n  /**    */\n  MANA_DRAIN = '',\n  /**   + */\n  MANA_SPRING = '',\n  /**   1 */\n  SWARM = '',\n  /**   11 */\n  INDOMITABLE = '',\n  /**   UIdebuff */\n  PEEP_FORBIDDEN = '',\n  /**   UIdebuff */\n  BLIND_ASH = '',\n  /**   debuff */\n  COGNITIVE_INTERFERENCE = '',\n  /**   /debuff */\n  MEMORY_FOG = '',\n  /**   -1 */\n  SILENCE = '',\n  /**   1 */\n  STURDY = '',\n  /**   -1 */\n  SHOCK = '',\n  /**    */\n  FLAME_ATTACH = '',\n  /**    */\n  POISON_ATTACH = '',\n  /**    */\n  TOXIN_SPREAD = '',\n  /**   /1-1 */\n  AMBUSH = '',\n  /**    */\n  FROST_ATTACH = '',\n  /**    */\n  BLOODBLADE_ATTACH = '',\n  /**    */\n  LIGHTNING_ATTACH = '',\n  /**   50% */\n  THORNS = '',\n}\n\n/**  */\nexport type EffectPolarity = 'buff' | 'debuff' | 'mixed' | 'trait' | 'special';\n\n//   \nexport interface EffectInstance {\n  type: EffectType;\n  /**  /  */\n  stacks: number;\n  /**  */\n  polarity: EffectPolarity;\n  /**  */\n  lockDecayThisTurn?: boolean;\n  /**\n   * \n   *  ['', ''] \n   */\n  restrictedTypes?: CardType[];\n  /** / */\n  source?: string;\n}\n\n//   \nexport enum GamePhase {\n  EXPLORE = 'EXPLORE',\n  COMBAT = 'COMBAT',\n}\n\n//   \nexport enum CombatPhase {\n  /**  */\n  TURN_START = 'TURN_START',\n  /**  */\n  DRAW_PHASE = 'DRAW_PHASE',\n  /**  */\n  INTENT_PREVIEW = 'INTENT_PREVIEW',\n  /**  */\n  PLAYER_INPUT = 'PLAYER_INPUT',\n  /**  */\n  RESOLUTION = 'RESOLUTION',\n  /**  */\n  DISCARD_PHASE = 'DISCARD_PHASE',\n  /**  */\n  TURN_END = 'TURN_END',\n  /**  */\n  WIN = 'WIN',\n  /**  */\n  LOSE = 'LOSE',\n}\n\n//   \nexport interface EntityStats {\n  hp: number;\n  maxHp: number;\n  mp: number;\n  /**  */\n  minDice: number;\n  maxDice: number;\n  /**  */\n  effects: EffectInstance[];\n}\n\n//   \nexport type ClashOutcome = 'player_win' | 'enemy_win' | 'draw' | 'dodge_success' | 'no_clash';\n\nexport interface ClashResult {\n  outcome: ClashOutcome;\n  playerFinalPoint: number;\n  enemyFinalPoint: number;\n  message: string;\n}\n\n//   \nexport interface CombatState {\n  turn: number;\n  phase: CombatPhase;\n  /**  */\n  actionsRemaining: number;\n\n  // \n  playerBaseDice: number;\n  enemyBaseDice: number;\n\n  // \n  playerHand: CardData[];\n  playerDeck: CardData[];\n  discardPile: CardData[];\n\n  // \n  enemyDeck: CardData[];\n  enemyDiscard: CardData[];\n  enemyIntentCard: CardData | null;\n  enemyPredictedPoint: number;\n\n  // \n  playerSelectedCard: CardData | null;\n\n  // \"\"\n  lastPlayedCard: CardData | null;\n\n  // \n  logs: string[];\n}\n\n//   \nexport interface RelicModifiers {\n  /**  */\n  globalMultiplier: number;\n  /**  */\n  globalAddition: number;\n}\n\n//   \nexport interface PointCalculationContext {\n  baseDice: number;\n  card: CardData;\n  entityEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n}\n\n//   \nexport interface DamageCalculationContext {\n  finalPoint: number;\n  card: CardData;\n  attackerEffects: EffectInstance[];\n  defenderEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n  /**  */\n  isTrueDamage?: boolean;\n}\n\n//   AI  \n\n/**  AI    */\nexport interface EnemyAIContext {\n  /**  effects */\n  enemyStats: Readonly<EntityStats>;\n  /**  effects */\n  playerStats: Readonly<EntityStats>;\n  /**  */\n  deck: CardData[];\n  /**  */\n  turn: number;\n  /**\n   * \n   *  { hasUsedHeal: false } \n   */\n  flags: Record<string, any>;\n}\n\n/**\n * \n * \n * \n */\nexport type EnemyAISelectCard = (ctx: EnemyAIContext) => CardData;\n\n/**  */\nexport interface EnemyDefinition {\n  /**  */\n  name: string;\n  /**  */\n  stats: EntityStats;\n  /**  */\n  deck: CardData[];\n  /**  AI  */\n  selectCard: EnemyAISelectCard;\n}\n","// \n//    \n//  UI  MVU  _string[]\n//   getCardByName()  CardData\n// \n\nimport { CardType, EffectType, type CardData } from '../types';\n\n/**\n * =====================================================================\n * /\n * =====================================================================\n * 1) \n *    -  `CardType.MAGIC`  `manaCost`\n *    - PHYSICAL / FUNCTION / DODGE `manaCost: 0`\n *\n * 2) \n *    - `calculation = { multiplier, addition }`\n *      FinalPoint = floor(BaseDice * multiplier + addition + )\n *    - `damageLogic`\n *      relative: damage = floor(FinalPoint * scale + scaleAddition)\n *      fixed:    damage = floor(value)\n *      mixed:    damage = floor(baseValue + FinalPoint * scale + scaleAddition)\n *\n * 3) +N\n *    - +N `calculation.addition = N`\n *    - +N `damageLogic.scaleAddition = N`\n *       mixed/fixed\n *\n * 4) \n *    - floor\n *\n * 5) \n *    -  `hitCount` 1\n *    -  `hitCount`  UI \n *\n * 6) \n *    - description +N  +N\n * =====================================================================\n */\n\n//   \n\n/**  */\nconst : CardData = {\n  id: 'basic_physical',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +1 */\nconst 1: CardData = {\n  id: 'basic_physical_plus_1',\n  name: '+1',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +2 */\nconst 2: CardData = {\n  id: 'basic_physical_plus_2',\n  name: '+2',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** +4 */\nconst 4: CardData = {\n  id: 'basic_physical_plus_4',\n  name: '+4',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 4 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+41',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_magic',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'focus_magic_attack',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '3MP*1.51',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.ARMOR,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '+11',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/** 0.6 */\nconst : CardData = {\n  id: 'basic_rest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.6 },\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 0.6 },\n  ],\n  description: '0.60.6',\n};\n\n/** -1 */\nconst : CardData = {\n  id: 'basic_side_step_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '-1',\n};\n\n/** *0 */\nconst : CardData = {\n  id: 'basic_existence_erasure',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*0',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_breathing_technique',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_void_step',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'self', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/** +21 */\nconst : CardData = {\n  id: 'basic_mirror_phantom',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.BARRIER,\n      target: 'self',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+21',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_mana_shift',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'restore_mana',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n//   \n\n/** +1-2 */\nconst : CardData = {\n  id: 'burn_spark_mark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+1-2',\n};\n\n/** +1+2 */\nconst : CardData = {\n  id: 'burn_tar_splash',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+1+2',\n};\n\n/** 0.5+ */\nconst : CardData = {\n  id: 'burn_scorch_wind',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.5+',\n};\n\n/** -21+1 */\nconst : CardData = {\n  id: 'burn_scorch',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '-21+1',\n};\n\n/** 1+1 */\nconst : CardData = {\n  id: 'burn_flame_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'burn_soul_bolt',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '1+2',\n};\n\n/** *20.6+1 */\nconst : CardData = {\n  id: 'burn_body_lunge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '*20.6+1',\n};\n\n/** *0.81 */\nconst : CardData = {\n  id: 'burn_detonation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 0.8, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*0.81',\n};\n\n/** 2+11 */\nconst : CardData = {\n  id: 'burn_inferno_judgement',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2+11',\n};\n\n/** +2+1 */\nconst : CardData = {\n  id: 'burn_hell_waves',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BARRIER, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+2+1',\n};\n\n/**  CombatView  */\nconst : CardData = {\n  id: 'burn_char_convert',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** +211 */\nconst : CardData = {\n  id: 'enemy_mimic_slimy_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+211',\n};\n\n/** *1.31.5 */\nconst : CardData = {\n  id: 'enemy_mimic_agile_tongue',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.3, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.31.5',\n};\n\n/** 1+1+2 */\nconst : CardData = {\n  id: 'enemy_mimic_maw',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '112',\n};\n\n/** *30.5 */\nconst : CardData = {\n  id: 'enemy_mimic_crush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 3.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*30.5',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_mimic_digest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '+20.5',\n};\n\n/** 0.5+1 */\nconst : CardData = {\n  id: 'enemy_moth_aphro_powder',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.5+1',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_moth_sensitive_mark',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_moth_pheromone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CHARGE, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_moth_swarm_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '6MP11',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_blissbee_sensitive_scout',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.5 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.51',\n};\n\n/** 0.52 CombatView */\nconst : CardData = {\n  id: 'enemy_blissbee_aphro_stinger',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.52',\n};\n\n/** *1.50.50.5 CombatView */\nconst : CardData = {\n  id: 'enemy_blissbee_precise_harvest',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.50.5',\n};\n\n/** [] */\nconst : CardData = {\n  id: 'enemy_pollen_high_pressure_spray',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '[]',\n  negativeEffect: '[]',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_pollen_infiltration',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** +111 */\nconst : CardData = {\n  id: 'enemy_prim_embrace',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+111',\n};\n\n/** -1 */\nconst : CardData = {\n  id: 'enemy_prim_fluid_evasion',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.POISON,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '-11',\n};\n\n/** 4MP3 */\nconst : CardData = {\n  id: 'enemy_prim_digest_caress',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n  ],\n  description: '3',\n};\n\n/** 50%11 */\nconst : CardData = {\n  id: 'enemy_prim_entity_clone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'self',\n      valueMode: 'max_hp_percent',\n      scale: 0.5,\n    },\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SWARM, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '50%11',\n};\n\n/**  */\nconst : CardData = {\n  id: 'enemy_nymph_lust_hallucination',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, unplayable: true },\n  cardEffects: [],\n  description: '',\n};\n\n/** +12 */\nconst : CardData = {\n  id: 'enemy_nymph_misty_swirl',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+12',\n};\n\n/** 6MP+211 */\nconst : CardData = {\n  id: 'enemy_nymph_mental_shock',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+211',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_nymph_mischief',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.SHOCK,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** +2+4 CombatView */\nconst : CardData = {\n  id: 'enemy_nymph_giant_projection',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+2+4',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_root_tremor_sense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 2.0 },\n  ],\n  description: '2',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_root_lube_secretion',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '0.5',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_root_infiltrate_climb',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_charge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +10.51 */\nconst : CardData = {\n  id: 'enemy_swamp_numb_spread',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+10.51',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_swamp_fluid_wrap',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+20.5',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_swamp_corrode',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2',\n};\n\n/** *1.511 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_aphro_gas',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '*1.511',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_elastic_adsorb',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '11',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_iridescent_float',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '1',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_mist_sprite_illusion_lure',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 2,\n    },\n  ],\n  description: '2',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_vinewalker_lurk',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.AMBUSH, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1',\n};\n\n/** 1+4 CombatView */\nconst : CardData = {\n  id: 'enemy_vinewalker_lightning_ambush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1+4',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_vinewalker_paralytic_toxin',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SHOCK, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_vinewalker_lubricated_shrink',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.CHARGE,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** 31 */\nconst : CardData = {\n  id: 'enemy_springspirit_liquefied_infiltration',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '31',\n};\n\n/** 10 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_internal_manipulation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '10',\n};\n\n/** debuff1 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_undead_condense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'debuff1',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_springspirit_silent_infiltration',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.CORROSION,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 2,\n    },\n  ],\n  description: '2',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_undine_earth_essence',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: true, purgeOnUse: true },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2',\n};\n\n/** 0.53 */\nconst : CardData = {\n  id: 'enemy_undine_loving_whip',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n  ],\n  description: '0.53',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_undine_doting_embrace',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/** 1MP1 */\nconst : CardData = {\n  id: 'enemy_undine_essence_infusion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 5MP*21 */\nconst : CardData = {\n  id: 'enemy_undine_psychic_assimilation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 5,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*21',\n};\n\n/** 2debuff1 */\nconst : CardData = {\n  id: 'enemy_undine_earth_liquid',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 2.0 },\n    {\n      kind: 'cleanse',\n      target: 'self',\n      valueMode: 'fixed',\n      fixedValue: 0,\n      cleanseTypes: [EffectType.COLD, EffectType.BURN, EffectType.POISON, EffectType.BLEED, EffectType.SHOCK],\n    },\n    { kind: 'apply_buff', effectType: EffectType.REGEN, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.REGEN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '2debuff1',\n};\n\n/** 0.54 */\nconst : CardData = {\n  id: 'enemy_mata_matriarch_invitation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 4 },\n  ],\n  description: '0.54',\n};\n\n/** +20.411 */\nconst : CardData = {\n  id: 'enemy_mata_under_skirt_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.4, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '+20.411',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'enemy_mata_fungal_repair',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '221',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_mata_false_smile',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.CHARGE,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 2.0,\n    },\n  ],\n  description: '2',\n};\n\n/** 0.599 */\nconst : CardData = {\n  id: 'enemy_rose_plant_dominion',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 99,\n    },\n  ],\n  description: '0.599',\n};\n\n/** 1+2 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_wangzhi_whip',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1+2',\n};\n\n/** 11 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_life_drain',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n/** 11 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_nectar_discipline',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_slime_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_heal',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'curse_alchemy_waste',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: true },\n  cardEffects: [],\n  description: '-21',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_cunning',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_muxinlan_forced_acquisition',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false, destroyOnClashWin: true },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** *2debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquidation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*2debuff12',\n};\n\n/** *1.50.5debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_unstable_reagent',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.5debuff',\n};\n\n/** *1.51:1 CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquid_fire',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.51:1',\n};\n\n/** +3debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_activated_slime',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 3 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+3debuff',\n};\n\n/**  */\nconst : CardData = {\n  id: 'enemy_muxinlan_take_it',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'heal', valueMode: 'point_scale', scale: 2.0, target: 'self' },\n  ],\n  description: '2',\n};\n\n/** xxx CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_premium_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'xxx',\n};\n\n/** *0.5 */\nconst : CardData = {\n  id: 'enemy_muxinlan_set_ambush',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 0.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.MANA_DRAIN,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '*0.51',\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst CARD_REGISTRY: ReadonlyMap<string, CardData> = new Map<string, CardData>([\n  [.name, ],\n  [1.name, 1],\n  [2.name, 2],\n  [4.name, 4],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getCardByName(name: string): CardData | undefined {\n  return CARD_REGISTRY.get(name);\n}\n\n/**  CardData  */\nexport function resolveCardNames(names: string[]): CardData[] {\n  return names\n    .map((n) => CARD_REGISTRY.get(n))\n    .filter((c): c is CardData => c !== undefined);\n}\n\n/**  */\nexport function getAllCardNames(): string[] {\n  return [...CARD_REGISTRY.keys()];\n}\n\n/**  */\nexport function getAllCards(): CardData[] {\n  return [...CARD_REGISTRY.values()];\n}\n","// \n//  /Buff   \n// \n\nimport {\n  type CardData,\n  type CardType,\n  type EffectInstance,\n  type EffectPolarity,\n  type EntityStats,\n  EffectType,\n} from '../types';\n\n//   \n\n/**  */\nexport type EffectTiming =\n  | 'onTurnStart'    // \n  | 'onTurnEnd'      // \n  | 'onBeforeDamage'  // \n  | 'onAfterDamage'  // \n  | 'onBeforeAttack' // \n  | 'onAfterAttack'  // \n  | 'onClash'        // \n  | 'onDiceRoll'     // \n  | 'onCardPlay'     // \n  | 'passive';       // \n\n/**  */\nexport interface EffectDefinition {\n  type: EffectType;\n  name: string;\n  polarity: EffectPolarity;\n  /**  */\n  timings: EffectTiming[];\n  /**  */\n  stackable: boolean;\n  /** 0 =  */\n  maxStacks: number;\n  /**  */\n  description: string;\n}\n\n//   \n\nexport const EFFECT_REGISTRY: Record<EffectType, EffectDefinition> = {\n  [EffectType.BARRIER]: {\n    type: EffectType.BARRIER,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.ARMOR]: {\n    type: EffectType.ARMOR,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BIND]: {\n    type: EffectType.BIND,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.DEVOUR]: {\n    type: EffectType.DEVOUR,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay'],\n    stackable: false,\n    maxStacks: 1,\n    description: '3//',\n  },\n  [EffectType.POISON]: {\n    type: EffectType.POISON,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POISON_AMOUNT]: {\n    type: EffectType.POISON_AMOUNT,\n    name: '',\n    polarity: 'special',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.CORROSION]: {\n    type: EffectType.CORROSION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '30',\n  },\n  [EffectType.BURN]: {\n    type: EffectType.BURN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLEED]: {\n    type: EffectType.BLEED,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onClash', 'onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.VULNERABLE]: {\n    type: EffectType.VULNERABLE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.REGEN]: {\n    type: EffectType.REGEN,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.WHITE_TURBID]: {\n    type: EffectType.WHITE_TURBID,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.IGNITE_AURA]: {\n    type: EffectType.IGNITE_AURA,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.STUN]: {\n    type: EffectType.STUN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onTurnEnd'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.CHARGE]: {\n    type: EffectType.CHARGE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.FATIGUE]: {\n    type: EffectType.FATIGUE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.COLD]: {\n    type: EffectType.COLD,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeAttack', 'onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.NON_LIVING]: {\n    type: EffectType.NON_LIVING,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.NON_ENTITY]: {\n    type: EffectType.NON_ENTITY,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '50%50%',\n  },\n  [EffectType.ILLUSORY_BODY]: {\n    type: EffectType.ILLUSORY_BODY,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '50%',\n  },\n  [EffectType.MAX_HP_REDUCTION]: {\n    type: EffectType.MAX_HP_REDUCTION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POINT_GROWTH_BIG]: {\n    type: EffectType.POINT_GROWTH_BIG,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.POINT_GROWTH_SMALL]: {\n    type: EffectType.POINT_GROWTH_SMALL,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.MANA_DRAIN]: {\n    type: EffectType.MANA_DRAIN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.MANA_SPRING]: {\n    type: EffectType.MANA_SPRING,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.SWARM]: {\n    type: EffectType.SWARM,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '01',\n  },\n  [EffectType.INDOMITABLE]: {\n    type: EffectType.INDOMITABLE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '011',\n  },\n  [EffectType.PEEP_FORBIDDEN]: {\n    type: EffectType.PEEP_FORBIDDEN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.BLIND_ASH]: {\n    type: EffectType.BLIND_ASH,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.COGNITIVE_INTERFERENCE]: {\n    type: EffectType.COGNITIVE_INTERFERENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.MEMORY_FOG]: {\n    type: EffectType.MEMORY_FOG,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.SILENCE]: {\n    type: EffectType.SILENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.STURDY]: {\n    type: EffectType.STURDY,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '1',\n  },\n  [EffectType.SHOCK]: {\n    type: EffectType.SHOCK,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.FLAME_ATTACH]: {\n    type: EffectType.FLAME_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.POISON_ATTACH]: {\n    type: EffectType.POISON_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.TOXIN_SPREAD]: {\n    type: EffectType.TOXIN_SPREAD,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.AMBUSH]: {\n    type: EffectType.AMBUSH,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '11',\n  },\n  [EffectType.FROST_ATTACH]: {\n    type: EffectType.FROST_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLOODBLADE_ATTACH]: {\n    type: EffectType.BLOODBLADE_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.LIGHTNING_ATTACH]: {\n    type: EffectType.LIGHTNING_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.THORNS]: {\n    type: EffectType.THORNS,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '50%',\n  },\n};\n\n// debuff\nexport const ELEMENTAL_DEBUFF_TYPES: EffectType[] = [\n  EffectType.COLD,\n  EffectType.BURN,\n  EffectType.POISON,\n  EffectType.BLEED,\n  EffectType.SHOCK,\n];\n\n// \n//  \n// \n\n/**\n * \n */\nexport function findEffect(entity: EntityStats, type: EffectType): EffectInstance | undefined {\n  return entity.effects.find(e => e.type === type);\n}\n\n/**\n * \n */\nexport function hasEffect(entity: EntityStats, type: EffectType): boolean {\n  return entity.effects.some(e => e.type === type && e.stacks > 0);\n}\n\n/**\n *  0\n */\nexport function getEffectStacks(entity: EntityStats, type: EffectType): number {\n  const effect = findEffect(entity, type);\n  return effect ? effect.stacks : 0;\n}\n\n/**\n * \n * /\n */\nexport function applyEffect(\n  entity: EntityStats,\n  type: EffectType,\n  stacks: number = 1,\n  options?: { restrictedTypes?: CardType[]; source?: string; lockDecayThisTurn?: boolean },\n): boolean {\n  const normalizedStacks = Math.max(0, Math.floor(stacks));\n  if (normalizedStacks <= 0) return false;\n\n  // \n  if (hasEffect(entity, EffectType.NON_LIVING)) {\n    if (type === EffectType.POISON || type === EffectType.BLEED) {\n      return false; // \n    }\n  }\n\n  const def = EFFECT_REGISTRY[type];\n  const existing = findEffect(entity, type);\n  let nextStacks = normalizedStacks;\n\n  // 0\n  if (type === EffectType.MAX_HP_REDUCTION) {\n    const maxReducible = Math.max(0, entity.maxHp);\n    if (maxReducible <= 0) return false;\n    nextStacks = Math.min(nextStacks, maxReducible);\n    entity.maxHp -= nextStacks;\n    entity.hp = Math.min(entity.hp, entity.maxHp);\n  }\n\n  if (existing) {\n    if (def.stackable) {\n      existing.stacks += nextStacks;\n      if (def.maxStacks > 0) {\n        existing.stacks = Math.min(existing.stacks, def.maxStacks);\n      }\n    }\n    // \n    if (type === EffectType.BIND && options?.restrictedTypes) {\n      existing.restrictedTypes = options.restrictedTypes;\n    }\n    if (type === EffectType.BIND && options?.lockDecayThisTurn) {\n      existing.lockDecayThisTurn = true;\n    }\n    if (type === EffectType.CORROSION && existing.stacks >= 30) {\n      entity.maxHp = 0;\n      entity.hp = 0;\n    }\n    return true;\n  }\n\n  // \n  const instance: EffectInstance = {\n    type,\n    stacks: def.maxStacks > 0 ? Math.min(nextStacks, def.maxStacks) : nextStacks,\n    polarity: def.polarity,\n    lockDecayThisTurn: type === EffectType.BIND ? !!options?.lockDecayThisTurn : undefined,\n    restrictedTypes: options?.restrictedTypes,\n    source: options?.source,\n  };\n  entity.effects.push(instance);\n  if (type === EffectType.CORROSION && instance.stacks >= 30) {\n    entity.maxHp = 0;\n    entity.hp = 0;\n  }\n  return true;\n}\n\n/**\n * \n */\nexport function removeEffect(entity: EntityStats, type: EffectType): void {\n  entity.effects = entity.effects.filter(e => e.type !== type);\n}\n\n/**\n *  0 \n */\nexport function reduceEffectStacks(entity: EntityStats, type: EffectType, amount: number = 1): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  effect.stacks -= amount;\n  if (effect.stacks <= 0) {\n    removeEffect(entity, type);\n  }\n}\n\n// \n//  \n// \n\n/**  */\nexport interface TurnStartResult {\n  hpChange: number;\n  mpChange: number;\n  trueDamage: number;\n  opponentHpChange: number;\n  isStunned: boolean;\n  logs: string[];\n  /**  */\n  applyToOpponent: Array<{ type: EffectType; stacks: number }>;\n}\n\n/**\n * \n *       (-1)        \n */\nexport function processOnTurnStart(entity: EntityStats): TurnStartResult {\n  const result: TurnStartResult = {\n    hpChange: 0,\n    mpChange: 0,\n    trueDamage: 0,\n    opponentHpChange: 0,\n    isStunned: false,\n    logs: [],\n    applyToOpponent: [],\n  };\n\n  // \n  if (hasEffect(entity, EffectType.MANA_DRAIN)) {\n    result.mpChange = -entity.mp;\n    result.logs.push(`[] `);\n    reduceEffectStacks(entity, EffectType.MANA_DRAIN);\n  }\n\n  // \n  const poisonAmount = getEffectStacks(entity, EffectType.POISON_AMOUNT);\n  if (poisonAmount > 0) {\n    if (poisonAmount >= entity.hp) {\n      result.trueDamage += poisonAmount;\n      removeEffect(entity, EffectType.POISON_AMOUNT);\n      result.logs.push(`[] (${poisonAmount})  (${entity.hp}) ${poisonAmount} `);\n    }\n  }\n\n  // \n  const burnStacks = getEffectStacks(entity, EffectType.BURN);\n  if (burnStacks > 0) {\n    let burnDamage = burnStacks;\n    const vulnerableStacks = getEffectStacks(entity, EffectType.VULNERABLE);\n    if (vulnerableStacks > 0) {\n      burnDamage += vulnerableStacks;\n      result.logs.push(`[]  +${vulnerableStacks}`);\n    }\n    result.hpChange -= burnDamage;\n    result.logs.push(`[]  ${burnDamage} `);\n  }\n\n  //  -1\n  if (hasEffect(entity, EffectType.BLEED)) {\n    reduceEffectStacks(entity, EffectType.BLEED);\n    result.logs.push(`[] `);\n  }\n\n  // \n  const regenStacks = getEffectStacks(entity, EffectType.REGEN);\n  if (regenStacks > 0) {\n    result.hpChange += regenStacks;\n    result.logs.push(`[]  ${regenStacks} `);\n  }\n\n  // \n  const whiteTurbidStacks = getEffectStacks(entity, EffectType.WHITE_TURBID);\n  if (whiteTurbidStacks > 0) {\n    result.opponentHpChange += whiteTurbidStacks;\n    result.applyToOpponent.push({ type: EffectType.CORROSION, stacks: whiteTurbidStacks });\n    result.logs.push(`[]  ${whiteTurbidStacks}  ${whiteTurbidStacks} `);\n  }\n\n  //   \n  const igniteStacks = getEffectStacks(entity, EffectType.IGNITE_AURA);\n  if (igniteStacks > 0) {\n    applyEffect(entity, EffectType.BURN, 1);\n    result.applyToOpponent.push({ type: EffectType.BURN, stacks: 1 });\n    result.logs.push(`[]  1 `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    result.isStunned = true;\n    result.logs.push(`[] `);\n  }\n\n  // \n  const manaSpringStacks = getEffectStacks(entity, EffectType.MANA_SPRING);\n  if (manaSpringStacks > 0) {\n    result.mpChange += manaSpringStacks;\n    result.logs.push(`[]  +${manaSpringStacks}`);\n  }\n\n  // \n  const frostAttachStacks = getEffectStacks(entity, EffectType.FROST_ATTACH);\n  if (frostAttachStacks > 0) {\n    result.applyToOpponent.push({ type: EffectType.COLD, stacks: frostAttachStacks });\n    result.logs.push(`[]  ${frostAttachStacks} `);\n  }\n\n  return result;\n}\n\n/**\n * \n * (-1)  ()  ()\n */\nexport function processOnTurnEnd(entity: EntityStats): string[] {\n  const logs: string[] = [];\n\n  // -1\n  const poisonStacks = getEffectStacks(entity, EffectType.POISON);\n  if (poisonStacks > 0) {\n    applyEffect(entity, EffectType.POISON_AMOUNT, poisonStacks);\n    reduceEffectStacks(entity, EffectType.POISON, 1);\n    logs.push(`[]  +${poisonStacks} 1`);\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect && bindEffect.stacks > 0) {\n    if (bindEffect.lockDecayThisTurn) {\n      bindEffect.lockDecayThisTurn = false;\n      if (bindEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.BIND);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.BIND);\n      logs.push(`[] `);\n    }\n  }\n\n  // \n  const armorEffect = findEffect(entity, EffectType.ARMOR);\n  if (armorEffect && armorEffect.stacks > 0) {\n    armorEffect.stacks = Math.floor(armorEffect.stacks / 2);\n    if (armorEffect.stacks <= 0) {\n      removeEffect(entity, EffectType.ARMOR);\n    }\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.SILENCE)) {\n    reduceEffectStacks(entity, EffectType.SILENCE);\n    logs.push(`[] `);\n  }\n\n  // 1\n  if (hasEffect(entity, EffectType.STURDY)) {\n    removeEffect(entity, EffectType.STURDY);\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    removeEffect(entity, EffectType.STUN);\n    logs.push(`[] `);\n  }\n\n  return logs;\n}\n\n// \n//  \n// \n\n/**\n * \n */\nexport function canPlayCard(\n  entity: EntityStats,\n  card: CardData,\n  baseRawDice: number,\n): { allowed: boolean; reason?: string } {\n  // \n  if (card.traits.unplayable) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect) {\n    const restrictedTypes = bindEffect.restrictedTypes && bindEffect.restrictedTypes.length > 0\n      ? bindEffect.restrictedTypes\n      : (['', ''] as CardType[]);\n    if (restrictedTypes.includes(card.type)) {\n      return { allowed: false, reason: `${card.type}` };\n    }\n  }\n\n  // 3 //\n  if (hasEffect(entity, EffectType.DEVOUR) && baseRawDice <= 3) {\n    if (\n      card.type === '' as CardType\n      || card.type === '' as CardType\n      || card.type === '' as CardType\n    ) {\n      return { allowed: false, reason: `3${card.type}` };\n    }\n  }\n\n  // \n  if (card.type === ('' as CardType) && card.manaCost > entity.mp) {\n    return { allowed: false, reason: `${card.manaCost}${entity.mp}` };\n  }\n\n  // \n  if (card.type === ('' as CardType) && hasEffect(entity, EffectType.SILENCE)) {\n    return { allowed: false, reason: '' };\n  }\n\n  return { allowed: true };\n}\n","import { type CardData, EffectType, type EnemyAIContext, type EnemyDefinition } from '../types';\nimport { getAllCards } from './cardRegistry';\nimport { ELEMENTAL_DEBUFF_TYPES } from './effects';\n\nfunction pickCardById(ctx: EnemyAIContext, id: string): CardData {\n  return ctx.deck.find((c) => c.id === id) ?? ctx.deck[0]!;\n}\n\nfunction weightedRandom<T>(options: { value: T; weight: number }[]): T {\n  const total = options.reduce((s, o) => s + o.weight, 0);\n  let roll = Math.random() * total;\n  for (const opt of options) {\n    roll -= opt.weight;\n    if (roll <= 0) return opt.value;\n  }\n  return options[options.length - 1]!.value;\n}\n\nconst CARD_BY_ID = new Map<string, CardData>(getAllCards().map((card) => [card.id, card]));\nconst requireCardById = (id: string): CardData => {\n  const card = CARD_BY_ID.get(id);\n  if (!card) {\n    throw new Error(`[enemyRegistry] Missing card id: ${id}`);\n  }\n  return card;\n};\nconst buildDeckById = (ids: string[]) => ids.map((id) => requireCardById(id));\n\nconst  = '';\nconst  = '';\n\nconst MUXINLAN_CARD = {\n  CUNNING: 'enemy_muxinlan_cunning',\n  FORCED: 'enemy_muxinlan_forced_acquisition',\n  LIQUIDATION: 'enemy_muxinlan_liquidation',\n  REAGENT: 'enemy_muxinlan_unstable_reagent',\n  LIQUID_FIRE: 'enemy_muxinlan_liquid_fire',\n  SLIME: 'enemy_muxinlan_activated_slime',\n  TAKE_IT: 'enemy_muxinlan_take_it',\n  PREMIUM: 'enemy_muxinlan_premium_shield',\n  AMBUSH: 'enemy_muxinlan_set_ambush',\n} as const;\n\nconst MIMIC_CARD = {\n  TENTACLE: 'enemy_mimic_slimy_tentacle',\n  TONGUE: 'enemy_mimic_agile_tongue',\n  MAW: 'enemy_mimic_maw',\n  CRUSH: 'enemy_mimic_crush',\n  DIGEST: 'enemy_mimic_digest',\n} as const;\n\nconst SWAMP_LURKER_CARD = {\n  CHARGE: 'enemy_charge',\n  NUMB_SPREAD: 'enemy_swamp_numb_spread',\n  FLUID_WRAP: 'enemy_swamp_fluid_wrap',\n  CORRODE: 'enemy_swamp_corrode',\n} as const;\n\nconst MIMIC_BUBBLE_CARD = {\n  APHRO_GAS: 'enemy_mimicbubble_aphro_gas',\n  ELASTIC_ADSORB: 'enemy_mimicbubble_elastic_adsorb',\n  IRIDESCENT_FLOAT: 'enemy_mimicbubble_iridescent_float',\n} as const;\n\nconst MIST_SPRITE_CARD = {\n  ILLUSION_LURE: 'enemy_mist_sprite_illusion_lure',\n} as const;\n\nconst VINEWALKER_CARD = {\n  LURK: 'enemy_vinewalker_lurk',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n  PARALYTIC_TOXIN: 'enemy_vinewalker_paralytic_toxin',\n  LUBRICATED_SHRINK: 'enemy_vinewalker_lubricated_shrink',\n} as const;\n\nconst SPRING_SPIRIT_CARD = {\n  LIQUEFIED_INFILTRATION: 'enemy_springspirit_liquefied_infiltration',\n  INTERNAL_MANIPULATION: 'enemy_springspirit_internal_manipulation',\n  UNDEAD_CONDENSE: 'enemy_springspirit_undead_condense',\n  SILENT_INFILTRATION: 'enemy_springspirit_silent_infiltration',\n} as const;\n\nconst INFILTRATOR_TENTACLE_CARD = {\n  TREMOR_SENSE: 'enemy_root_tremor_sense',\n  INFILTRATE_CLIMB: 'enemy_root_infiltrate_climb',\n  LURK: 'enemy_vinewalker_lurk',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n} as const;\n\nconst CAVE_TENTACLE_CARD = {\n  INFILTRATE_CLIMB: 'enemy_root_infiltrate_climb',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n  SWARM_BURST: 'enemy_moth_swarm_burst',\n} as const;\n\nconst BLISS_BEE_CARD = {\n  SENSITIVE_SCOUT: 'enemy_blissbee_sensitive_scout',\n  APHRO_STINGER: 'enemy_blissbee_aphro_stinger',\n  PRECISE_HARVEST: 'enemy_blissbee_precise_harvest',\n  SWARM_BURST: 'enemy_moth_swarm_burst',\n} as const;\n\nconst POLLEN_SPRAYER_CARD = {\n  HIGH_PRESSURE_SPRAY: 'enemy_pollen_high_pressure_spray',\n  INFILTRATION: 'enemy_pollen_infiltration',\n} as const;\n\nconst PRIM_CARD = {\n  EMBRACE: 'enemy_prim_embrace',\n  FLUID_EVASION: 'enemy_prim_fluid_evasion',\n  DIGEST_CARESS: 'enemy_prim_digest_caress',\n  ENTITY_CLONE: 'enemy_prim_entity_clone',\n} as const;\n\nconst NYMPH_CARD = {\n  LUST_HALLUCINATION: 'enemy_nymph_lust_hallucination',\n  MISTY_SWIRL: 'enemy_nymph_misty_swirl',\n  MENTAL_SHOCK: 'enemy_nymph_mental_shock',\n  MISCHIEF: 'enemy_nymph_mischief',\n  GIANT_PROJECTION: 'enemy_nymph_giant_projection',\n  BASIC_PHYSICAL: 'basic_physical',\n} as const;\n\nconst UNDINE_CARD = {\n  EARTH_ESSENCE: 'enemy_undine_earth_essence',\n  LOVING_WHIP: 'enemy_undine_loving_whip',\n  DOTING_EMBRACE: 'enemy_undine_doting_embrace',\n  ESSENCE_INFUSION: 'enemy_undine_essence_infusion',\n  PSYCHIC_ASSIMILATION: 'enemy_undine_psychic_assimilation',\n  EARTH_LIQUID: 'enemy_undine_earth_liquid',\n} as const;\n\nconst MATA_CARD = {\n  MATRIARCH_INVITATION: 'enemy_mata_matriarch_invitation',\n  UNDER_SKIRT_TENTACLE: 'enemy_mata_under_skirt_tentacle',\n  FUNGAL_REPAIR: 'enemy_mata_fungal_repair',\n  FALSE_SMILE: 'enemy_mata_false_smile',\n} as const;\n\nconst ROSE_CARD = {\n  PLANT_DOMINION: 'enemy_rose_plant_dominion',\n  WANGZHI_WHIP: 'enemy_rose_wangzhi_whip',\n  LIFE_DRAIN: 'enemy_rose_life_drain',\n  NECTAR_DISCIPLINE: 'enemy_rose_nectar_discipline',\n} as const;\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 + 30 * floor,\n      maxHp: 20 + 30 * floor,\n      mp: 2 * floor,\n      minDice: 1 + floor,\n      maxDice: 6 + floor,\n      effects: [\n        { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FLAME_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.POISON_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FROST_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.BLOODBLADE_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.LIGHTNING_ATTACH, stacks: 1, polarity: 'buff' },\n      ],\n    },\n    deck: buildDeckById([\n      MUXINLAN_CARD.CUNNING,\n      MUXINLAN_CARD.FORCED,\n      MUXINLAN_CARD.LIQUIDATION,\n      MUXINLAN_CARD.REAGENT,\n      MUXINLAN_CARD.LIQUID_FIRE,\n      MUXINLAN_CARD.SLIME,\n      MUXINLAN_CARD.TAKE_IT,\n      MUXINLAN_CARD.PREMIUM,\n      MUXINLAN_CARD.AMBUSH,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      if (!ctx.flags.muxinlanOpenedWithCunning) {\n        ctx.flags.muxinlanOpenedWithCunning = true;\n        return pickCardById(ctx, MUXINLAN_CARD.CUNNING);\n      }\n\n      const getStacks = (t: EffectType) => ctx.playerStats.effects.find((e) => e.type === t)?.stacks ?? 0;\n      const elementalTotal = ELEMENTAL_DEBUFF_TYPES\n        .reduce((sum, type) => sum + getStacks(type), 0);\n      if (elementalTotal >= 12) {\n        return pickCardById(ctx, MUXINLAN_CARD.LIQUIDATION);\n      }\n\n      if (ctx.enemyStats.mp > 4) {\n        const highMpPool = [MUXINLAN_CARD.REAGENT, MUXINLAN_CARD.LIQUID_FIRE, MUXINLAN_CARD.SLIME] as const;\n        const chosen = highMpPool[Math.floor(Math.random() * highMpPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const lowMpPool = [MUXINLAN_CARD.FORCED, MUXINLAN_CARD.TAKE_IT, MUXINLAN_CARD.PREMIUM, MUXINLAN_CARD.AMBUSH] as const;\n      const chosen = lowMpPool[Math.floor(Math.random() * lowMpPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 * floor,\n      maxHp: 20 * floor,\n      mp: 0,\n      minDice: floor,\n      maxDice: 5 + 2 * floor,\n      effects: [],\n    },\n    deck: buildDeckById([\n      MIMIC_CARD.TENTACLE,\n      MIMIC_CARD.TONGUE,\n      MIMIC_CARD.MAW,\n      MIMIC_CARD.CRUSH,\n      MIMIC_CARD.DIGEST,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n      if (playerHasDevour) {\n        const devourPool = [MIMIC_CARD.CRUSH, MIMIC_CARD.DIGEST] as const;\n        const chosen = devourPool[Math.floor(Math.random() * devourPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const normalPool = [MIMIC_CARD.TENTACLE, MIMIC_CARD.TONGUE, MIMIC_CARD.MAW] as const;\n      const chosen = normalPool[Math.floor(Math.random() * normalPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 12,\n    maxHp: 12,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_charge', 'enemy_slime_dodge', 'enemy_heal']),\n  selectCard(ctx: EnemyAIContext) {\n    const hpRatio = ctx.enemyStats.hp / ctx.enemyStats.maxHp;\n    if (hpRatio <= 0.4 && !ctx.flags.hasUsedHeal) {\n      ctx.flags.hasUsedHeal = true;\n      return pickCardById(ctx, 'enemy_heal');\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: 'enemy_charge', weight: 70 },\n      { value: 'enemy_slime_dodge', weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 5,\n    maxHp: 5,\n    mp: 1,\n    minDice: 1,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    'enemy_moth_aphro_powder',\n    'enemy_moth_sensitive_mark',\n    'enemy_moth_pheromone',\n    'enemy_moth_swarm_burst',\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, 'enemy_moth_swarm_burst');\n    }\n\n    const normalCards = ['enemy_moth_aphro_powder', 'enemy_moth_sensitive_mark', 'enemy_moth_pheromone'] as const;\n    const chosen = normalCards[Math.floor(Math.random() * normalCards.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 8,\n    maxHp: 8,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.SWARM, stacks: 2, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb']),\n  selectCard(ctx: EnemyAIContext) {\n    const pool = ['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb'] as const;\n    const chosen = pool[Math.floor(Math.random() * pool.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    SWAMP_LURKER_CARD.CHARGE,\n    SWAMP_LURKER_CARD.NUMB_SPREAD,\n    SWAMP_LURKER_CARD.FLUID_WRAP,\n    SWAMP_LURKER_CARD.CORRODE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n    if (playerHasDevour) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.CORRODE);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.FLUID_WRAP);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SWAMP_LURKER_CARD.CHARGE, weight: 30 },\n      { value: SWAMP_LURKER_CARD.NUMB_SPREAD, weight: 70 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 2,\n    maxDice: 4,\n    effects: [{ type: EffectType.TOXIN_SPREAD, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    MIMIC_BUBBLE_CARD.APHRO_GAS,\n    MIMIC_BUBBLE_CARD.ELASTIC_ADSORB,\n    MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const chosen = weightedRandom<string>([\n      { value: MIMIC_BUBBLE_CARD.APHRO_GAS, weight: 50 },\n      { value: MIMIC_BUBBLE_CARD.ELASTIC_ADSORB, weight: 30 },\n      { value: MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 4,\n    maxHp: 4,\n    mp: 0,\n    minDice: 1,\n    maxDice: 1,\n    effects: [\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.SWARM, stacks: 2, polarity: 'buff' },\n      { type: EffectType.POINT_GROWTH_BIG, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([MIST_SPRITE_CARD.ILLUSION_LURE]),\n  selectCard(ctx: EnemyAIContext) {\n    return pickCardById(ctx, MIST_SPRITE_CARD.ILLUSION_LURE);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 16,\n    maxHp: 16,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [],\n  },\n  deck: buildDeckById([\n    VINEWALKER_CARD.LURK,\n    VINEWALKER_CARD.LIGHTNING_AMBUSH,\n    VINEWALKER_CARD.PARALYTIC_TOXIN,\n    VINEWALKER_CARD.LUBRICATED_SHRINK,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.vinewalkerOpenedWithLurk) {\n      ctx.flags.vinewalkerOpenedWithLurk = true;\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, VINEWALKER_CARD.PARALYTIC_TOXIN);\n    }\n\n    const selfHasAmbush = ctx.enemyStats.effects.some((e) => e.type === EffectType.AMBUSH && e.stacks > 0);\n    if (!selfHasAmbush) {\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: VINEWALKER_CARD.LIGHTNING_AMBUSH, weight: 75 },\n      { value: VINEWALKER_CARD.LUBRICATED_SHRINK, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n    ],\n  },\n  deck: buildDeckById([\n    SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION,\n    SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION,\n    SPRING_SPIRIT_CARD.UNDEAD_CONDENSE,\n    SPRING_SPIRIT_CARD.SILENT_INFILTRATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfHasElementalDebuff = ELEMENTAL_DEBUFF_TYPES\n      .some((type) => ctx.enemyStats.effects.some((e) => e.type === type && e.stacks > 0));\n\n    if (!selfHasElementalDebuff) {\n      const chosen = weightedRandom<string>([\n        { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 50 },\n        { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 30 },\n        { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 20 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 40 },\n      { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 25 },\n      { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 15 },\n      { value: SPRING_SPIRIT_CARD.UNDEAD_CONDENSE, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 3,\n    maxDice: 5,\n    effects: [],\n  },\n  deck: buildDeckById([\n    INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE,\n    INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB,\n    INFILTRATOR_TENTACLE_CARD.LURK,\n    INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.infiltratorTentacleOpenedWithLightningAmbush) {\n      ctx.flags.infiltratorTentacleOpenedWithLightningAmbush = true;\n      return pickCardById(ctx, INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH);\n    }\n\n    const selfHasAmbush = ctx.enemyStats.effects.some((e) => e.type === EffectType.AMBUSH && e.stacks > 0);\n    if (!selfHasAmbush) {\n      const chosen = weightedRandom<string>([\n        { value: INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE, weight: 20 },\n        { value: INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB, weight: 20 },\n        { value: INFILTRATOR_TENTACLE_CARD.LURK, weight: 40 },\n        { value: INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH, weight: 20 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE, weight: 35 },\n      { value: INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB, weight: 35 },\n      { value: INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH, weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 2,\n    maxHp: 2,\n    mp: 0,\n    minDice: 2,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 5, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    CAVE_TENTACLE_CARD.INFILTRATE_CLIMB,\n    CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH,\n    CAVE_TENTACLE_CARD.SWARM_BURST,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, CAVE_TENTACLE_CARD.SWARM_BURST);\n    }\n\n    if (!ctx.flags.caveTentacleOpenedWithLightningAmbush) {\n      ctx.flags.caveTentacleOpenedWithLightningAmbush = true;\n      return pickCardById(ctx, CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH);\n    }\n\n    const chosen = Math.random() < 0.5\n      ? CAVE_TENTACLE_CARD.INFILTRATE_CLIMB\n      : CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 4,\n    maxHp: 4,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    BLISS_BEE_CARD.SENSITIVE_SCOUT,\n    BLISS_BEE_CARD.APHRO_STINGER,\n    BLISS_BEE_CARD.PRECISE_HARVEST,\n    BLISS_BEE_CARD.SWARM_BURST,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, BLISS_BEE_CARD.SWARM_BURST);\n    }\n\n    const playerHasPoison = ctx.playerStats.effects.some((e) => e.type === EffectType.POISON && e.stacks > 0);\n    if (playerHasPoison) {\n      const chosen = weightedRandom<string>([\n        { value: BLISS_BEE_CARD.SENSITIVE_SCOUT, weight: 20 },\n        { value: BLISS_BEE_CARD.APHRO_STINGER, weight: 30 },\n        { value: BLISS_BEE_CARD.PRECISE_HARVEST, weight: 50 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const playerHasVulnerable = ctx.playerStats.effects.some((e) => e.type === EffectType.VULNERABLE && e.stacks > 0);\n    if (playerHasVulnerable) {\n      const chosen = weightedRandom<string>([\n        { value: BLISS_BEE_CARD.SENSITIVE_SCOUT, weight: 20 },\n        { value: BLISS_BEE_CARD.APHRO_STINGER, weight: 80 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    return pickCardById(ctx, BLISS_BEE_CARD.SENSITIVE_SCOUT);\n  },\n};\n\nconst POLLEN_SPRAYER_ENEMY: EnemyDefinition = {\n  name: '\\u82b1\\u7c89\\u55b7\\u5c04\\u8005',\n  stats: {\n    hp: 10,\n    maxHp: 10,\n    mp: 0,\n    minDice: 2,\n    maxDice: 3,\n    effects: [],\n  },\n  deck: buildDeckById([\n    POLLEN_SPRAYER_CARD.HIGH_PRESSURE_SPRAY,\n    POLLEN_SPRAYER_CARD.INFILTRATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.pollenSprayerOpenedWithHighPressureSpray) {\n      ctx.flags.pollenSprayerOpenedWithHighPressureSpray = true;\n      return pickCardById(ctx, POLLEN_SPRAYER_CARD.HIGH_PRESSURE_SPRAY);\n    }\n    return pickCardById(ctx, POLLEN_SPRAYER_CARD.INFILTRATION);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 25,\n    maxHp: 25,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.REGEN, stacks: 2, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    PRIM_CARD.EMBRACE,\n    PRIM_CARD.FLUID_EVASION,\n    PRIM_CARD.DIGEST_CARESS,\n    PRIM_CARD.ENTITY_CLONE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfHasSwarm = ctx.enemyStats.effects.some((e) => e.type === EffectType.SWARM && e.stacks > 0);\n    if (ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5 && !selfHasSwarm) {\n      return pickCardById(ctx, PRIM_CARD.ENTITY_CLONE);\n    }\n\n    if (ctx.enemyStats.mp >= 4) {\n      return pickCardById(ctx, PRIM_CARD.DIGEST_CARESS);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: PRIM_CARD.EMBRACE, weight: 65 },\n      { value: PRIM_CARD.FLUID_EVASION, weight: 35 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 40,\n    maxHp: 40,\n    mp: 0,\n    minDice: 1,\n    maxDice: 3,\n    effects: [\n      { type: EffectType.ILLUSORY_BODY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    NYMPH_CARD.MISTY_SWIRL,\n    NYMPH_CARD.MENTAL_SHOCK,\n    NYMPH_CARD.MISCHIEF,\n    NYMPH_CARD.GIANT_PROJECTION,\n    NYMPH_CARD.BASIC_PHYSICAL,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.nymphUsedGiantProjection && ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5) {\n      ctx.flags.nymphUsedGiantProjection = true;\n      return pickCardById(ctx, NYMPH_CARD.GIANT_PROJECTION);\n    }\n\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, NYMPH_CARD.MENTAL_SHOCK);\n    }\n\n    const selfHasIllusoryBody = ctx.enemyStats.effects.some((e) => e.type === EffectType.ILLUSORY_BODY && e.stacks > 0);\n    if (selfHasIllusoryBody) {\n      const chosen = weightedRandom<string>([\n        { value: NYMPH_CARD.MISTY_SWIRL, weight: 40 },\n        { value: NYMPH_CARD.MISCHIEF, weight: 60 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: NYMPH_CARD.MISTY_SWIRL, weight: 20 },\n      { value: NYMPH_CARD.BASIC_PHYSICAL, weight: 50 },\n      { value: NYMPH_CARD.MISCHIEF, weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 40,\n    maxHp: 40,\n    mp: 0,\n    minDice: 3,\n    maxDice: 8,\n    effects: [\n      { type: EffectType.WHITE_TURBID, stacks: 1, polarity: 'mixed' },\n      { type: EffectType.REGEN, stacks: 1, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    UNDINE_CARD.LOVING_WHIP,\n    UNDINE_CARD.DOTING_EMBRACE,\n    UNDINE_CARD.ESSENCE_INFUSION,\n    UNDINE_CARD.PSYCHIC_ASSIMILATION,\n    UNDINE_CARD.EARTH_LIQUID,\n    UNDINE_CARD.EARTH_ESSENCE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.undineUsedEarthLiquid && ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5) {\n      ctx.flags.undineUsedEarthLiquid = true;\n      return pickCardById(ctx, UNDINE_CARD.EARTH_LIQUID);\n    }\n\n    if (ctx.enemyStats.mp >= 5) {\n      return pickCardById(ctx, UNDINE_CARD.PSYCHIC_ASSIMILATION);\n    }\n\n    if (ctx.enemyStats.mp >= 1) {\n      const chosen = weightedRandom<string>([\n        { value: UNDINE_CARD.LOVING_WHIP, weight: 30 },\n        { value: UNDINE_CARD.DOTING_EMBRACE, weight: 30 },\n        { value: UNDINE_CARD.ESSENCE_INFUSION, weight: 40 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: UNDINE_CARD.LOVING_WHIP, weight: 50 },\n      { value: UNDINE_CARD.DOTING_EMBRACE, weight: 50 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.SWARM, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    MATA_CARD.MATRIARCH_INVITATION,\n    MATA_CARD.UNDER_SKIRT_TENTACLE,\n    MATA_CARD.FUNGAL_REPAIR,\n    MATA_CARD.FALSE_SMILE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerPoisonAmount = ctx.playerStats.effects\n      .find((e) => e.type === EffectType.POISON_AMOUNT)?.stacks ?? 0;\n    if (ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5 && playerPoisonAmount >= 5) {\n      return pickCardById(ctx, MATA_CARD.FUNGAL_REPAIR);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: MATA_CARD.MATRIARCH_INVITATION, weight: 30 },\n      { value: MATA_CARD.UNDER_SKIRT_TENTACLE, weight: 30 },\n      { value: MATA_CARD.FALSE_SMILE, weight: 40 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 40,\n    maxHp: 40,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.THORNS, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    ROSE_CARD.PLANT_DOMINION,\n    ROSE_CARD.WANGZHI_WHIP,\n    ROSE_CARD.LIFE_DRAIN,\n    ROSE_CARD.NECTAR_DISCIPLINE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.roseOpenedWithPlantDominion) {\n      ctx.flags.roseOpenedWithPlantDominion = true;\n      return pickCardById(ctx, ROSE_CARD.PLANT_DOMINION);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: ROSE_CARD.PLANT_DOMINION, weight: 25 },\n      { value: ROSE_CARD.WANGZHI_WHIP, weight: 25 },\n      { value: ROSE_CARD.LIFE_DRAIN, weight: 25 },\n      { value: ROSE_CARD.NECTAR_DISCIPLINE, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst STATIC_ENEMY_REGISTRY: ReadonlyMap<string, EnemyDefinition> = new Map<string, EnemyDefinition>([\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [POLLEN_SPRAYER_ENEMY.name, POLLEN_SPRAYER_ENEMY],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\nconst ENEMY_NAME_ORDER: readonly string[] = [\n  ,\n  ,\n  ...STATIC_ENEMY_REGISTRY.keys(),\n];\n\nexport function getEnemyByName(name: string, currentFloor: number = 1): EnemyDefinition | undefined {\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  return STATIC_ENEMY_REGISTRY.get(name);\n}\n\nexport function getAllEnemyNames(): string[] {\n  return [...ENEMY_NAME_ORDER];\n}\n","import { CardType, EffectType, type CardData, type EntityStats } from '../types';\n\nexport type RelicRarity = '' | '' | '';\nexport type RelicCategory = '' | '';\n\nexport type RelicSide = 'player' | 'enemy';\nexport type RelicFloatKind = 'shield' | 'mana' | 'heal';\n\nexport interface RelicApplyEffectOptions {\n  restrictedTypes?: CardType[];\n  source?: string;\n  lockDecayThisTurn?: boolean;\n}\n\ninterface RelicSharedHookContext {\n  count: number;\n  side: RelicSide;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n  addStatusEffect: (\n    side: RelicSide,\n    effectType: EffectType,\n    stacks: number,\n    options?: RelicApplyEffectOptions,\n  ) => boolean;\n  addArmor: (side: RelicSide, amount: number) => number;\n  restoreMana: (side: RelicSide, amount: number) => number;\n  heal: (\n    side: RelicSide,\n    amount: number,\n    options?: { overflowToArmor?: boolean },\n  ) => { healed: number; overflow: number };\n  addRerollCharges: (side: RelicSide, amount: number) => void;\n  getRerollCharges: (side: RelicSide) => number;\n}\n\nexport interface RelicLifecycleHookContext extends RelicSharedHookContext {}\n\nexport interface RelicPointHookContext {\n  count: number;\n  side: RelicSide;\n  card: CardData;\n  baseDice: number;\n  currentPoint: number;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  isPreview: boolean;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n}\n\nexport interface RelicDiceClickHookContext {\n  count: number;\n  side: RelicSide;\n  currentDice: number;\n  minDice: number;\n  maxDice: number;\n  state: Record<string, unknown>;\n  roll: (min: number, max: number) => number;\n  consumeRerollCharge: (side: RelicSide, amount?: number) => boolean;\n  getRerollCharges: (side: RelicSide) => number;\n  addLog: (message: string) => void;\n}\n\nexport interface RelicBeforeApplyEffectHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  effectType: EffectType;\n  stacks: number;\n  source?: string;\n  restrictedTypes?: CardType[];\n}\n\nexport interface RelicBurnDamageHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicAfterBurnDamageTakenHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicHitHookContext extends RelicSharedHookContext {\n  sourceSide: RelicSide;\n  targetSide: RelicSide;\n  source: EntityStats;\n  target: EntityStats;\n  card: CardData;\n  finalPoint: number;\n  hitIndex: number;\n  hitCount: number;\n  attemptedDamage: number;\n  actualDamage: number;\n}\n\nexport interface RelicHooks {\n  onBattleStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnEnd?: (ctx: RelicLifecycleHookContext) => void;\n  onDeckShuffle?: (ctx: RelicLifecycleHookContext) => void;\n  modifyFinalPoint?: (ctx: RelicPointHookContext) => number;\n  onDiceClick?: (ctx: RelicDiceClickHookContext) => number | null;\n  onBeforeApplyEffect?: (ctx: RelicBeforeApplyEffectHookContext) => boolean | void;\n  onBeforeBurnDamage?: (ctx: RelicBurnDamageHookContext) => void;\n  onAfterBurnDamageTaken?: (ctx: RelicAfterBurnDamageTakenHookContext) => void;\n  onAfterHitDealt?: (ctx: RelicHitHookContext) => void;\n  onAfterHitTaken?: (ctx: RelicHitHookContext) => void;\n}\n\nexport interface RelicData {\n  id: string;\n  name: string;\n  rarity: RelicRarity;\n  category: RelicCategory;\n  effect: string;\n  description: string;\n  hooks?: RelicHooks;\n}\n\nexport interface ResolvedRelicEntry {\n  relic: RelicData;\n  count: number;\n}\n\nconst getStacks = (entity: EntityStats, effectType: EffectType) => (\n  entity.effects.find((eff) => eff.type === effectType)?.stacks ?? 0\n);\n\nconst RELIC_LIST: readonly RelicData[] = [\n  {\n    id: 'lucky_coin_small',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.minDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'lucky_coin_large',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.maxDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'red_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.PHYSICAL) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'blue_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.MAGIC) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'yellow_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.FUNCTION) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'green_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' -1',\n    description: ' -1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.DODGE) return currentPoint;\n        return currentPoint - count;\n      },\n    },\n  },\n  {\n    id: 'mana_residue',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 0 +1',\n    description: ' 0 1 ',\n    hooks: {\n      onTurnEnd: ({ count, side, self, restoreMana, addLog }) => {\n        if (self.mp !== 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  0 ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sanctuary_amulet',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.INDOMITABLE, count, { source: 'relic:sanctuary_amulet' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onTurnStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'reset_button',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 6 ',\n    description: ' 6 ',\n    hooks: {\n      onBattleStart: ({ count, side, addRerollCharges, getRerollCharges, addLog }) => {\n        const gained = count * 6;\n        addRerollCharges(side, gained);\n        addLog(`[]  ${gained}  ${getRerollCharges(side)}`);\n      },\n      onDiceClick: ({ count, side, minDice, maxDice, roll, consumeRerollCharge, getRerollCharges, addLog }) => {\n        if (count <= 0) return null;\n        if (!consumeRerollCharge(side, 1)) return null;\n        const value = roll(minDice, maxDice);\n        addLog(`[]  ${getRerollCharges(side)} `);\n        return value;\n      },\n    },\n  },\n  {\n    id: 'energy_candy',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onDeckShuffle: ({ count, side, restoreMana, addLog }) => {\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_shield',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 10 ',\n    description: ' 10 ',\n    hooks: {\n      onBattleStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, 10 * count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'pure_water',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 8 ',\n    description: ' 8 ',\n    hooks: {\n      onBattleStart: ({ count, side, heal, addLog }) => {\n        const { healed, overflow } = heal(side, 8 * count, { overflowToArmor: true });\n        addLog(`[]  ${healed}  ${overflow} `);\n      },\n    },\n  },\n  {\n    id: 'oily_grease',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2 ',\n    description: ' 2 ',\n    hooks: {\n      onAfterHitDealt: ({ count, side, targetSide, actualDamage, state, addStatusEffect, addLog }) => {\n        if (targetSide === side) return;\n        if (actualDamage <= 0) return;\n        if (state['triggered'] === true) return;\n        state['triggered'] = true;\n        const stacks = 2 * count;\n        if (addStatusEffect(targetSide, EffectType.BURN, stacks, { source: 'relic:oily_grease' })) {\n          addLog(`[]  ${stacks} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sunglasses',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        if (addStatusEffect(targetSide, EffectType.STUN, Math.max(1, count), { source: 'relic:sunglasses' })) {\n          addLog('[] ');\n        }\n      },\n      onBeforeApplyEffect: ({ side, targetSide, effectType, addLog }) => {\n        if (targetSide !== side) return;\n        if (effectType !== EffectType.STUN) return;\n        addLog('[] ');\n        return false;\n      },\n    },\n  },\n  {\n    id: 'flame_ring',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterHitTaken: ({ count, side, sourceSide, targetSide, card, addStatusEffect, addLog }) => {\n        if (targetSide !== side) return;\n        if (sourceSide === side) return;\n        if (card.type !== CardType.PHYSICAL) return;\n        if (addStatusEffect(sourceSide, EffectType.BURN, count, { source: 'relic:flame_ring' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'fire_slime',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2',\n    description: ' 2',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide !== ctx.side) return;\n        if (ctx.damage === 2) return;\n        ctx.damage = 2;\n      },\n    },\n  },\n  {\n    id: 'ember_seed',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBattleStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n      onTurnStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'phoenix_feather',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, state, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const current = Number(state['nextCardPointBonus'] ?? 0);\n        const add = 1 * count;\n        state['nextCardPointBonus'] = current + add;\n        addLog(`[]  +${current + add}`);\n      },\n      modifyFinalPoint: ({ side, currentPoint, state, isPreview, addLog }) => {\n        if (side !== 'player') return currentPoint;\n        const bonus = Math.max(0, Math.floor(Number(state['nextCardPointBonus'] ?? 0)));\n        if (bonus <= 0) return currentPoint;\n        if (!isPreview) {\n          state['nextCardPointBonus'] = 0;\n          addLog(`[]  +${bonus}`);\n        }\n        return currentPoint + bonus;\n      },\n    },\n  },\n  {\n    id: 'rekindle_core',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, restoreMana, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'everlasting_fuel',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.damage <= 0) return;\n        ctx.isTrueDamage = true;\n      },\n    },\n  },\n  {\n    id: 'sun_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '*',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide === ctx.side && ctx.hasRelic('fire_slime')) {\n          return;\n        }\n        const minDamage = Math.max(1, ctx.turn * Math.max(1, ctx.count));\n        if (ctx.damage >= minDamage) return;\n        ctx.damage = minDamage;\n      },\n    },\n  },\n];\n\nconst RELIC_BY_ID = new Map(RELIC_LIST.map((relic) => [relic.id, relic]));\nconst RELIC_BY_NAME = new Map(RELIC_LIST.map((relic) => [relic.name, relic]));\n\nexport function getAllRelics(): readonly RelicData[] {\n  return RELIC_LIST;\n}\n\nexport function getRelicById(id: string): RelicData | undefined {\n  return RELIC_BY_ID.get(id);\n}\n\nexport function getRelicByName(name: string): RelicData | undefined {\n  return RELIC_BY_NAME.get(name);\n}\n\nexport function getRelicsByCategory(category: RelicCategory): readonly RelicData[] {\n  return RELIC_LIST.filter((relic) => relic.category === category);\n}\n\nexport function resolveRelicMap(raw: Record<string, number> | null | undefined): ResolvedRelicEntry[] {\n  if (!raw || typeof raw !== 'object') return [];\n\n  const aggregated = new Map<string, ResolvedRelicEntry>();\n\n  for (const [key, value] of Object.entries(raw)) {\n    const count = Math.max(0, Math.floor(Number(value ?? 0)));\n    if (!key || count <= 0) continue;\n\n    const relic = RELIC_BY_ID.get(key) ?? RELIC_BY_NAME.get(key);\n    if (!relic) continue;\n\n    const existing = aggregated.get(relic.id);\n    if (existing) {\n      existing.count += count;\n    } else {\n      aggregated.set(relic.id, { relic, count });\n    }\n  }\n\n  return Array.from(aggregated.values()).sort((a, b) => a.relic.name.localeCompare(b.relic.name, 'zh-Hans-CN'));\n}\n","export const FLOOR_MAP: Record<string, string[]> = {\n  : ['', '', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n};\n\nexport const FLOOR_ORDER = ['', '', '', '', ''] as const;\n\nconst FLOOR_NUMBER_MAP: Record<string, number> = {\n  : 1,\n  : 2,\n  : 3,\n  : 4,\n  : 5,\n};\n\nexport function getFloorForArea(area: string): string | null {\n  for (const [floorName, areas] of Object.entries(FLOOR_MAP)) {\n    if (areas.includes(area)) return floorName;\n  }\n  return null;\n}\n\nexport function getNextFloor(currentFloor: string): string | null {\n  const idx = FLOOR_ORDER.indexOf(currentFloor as (typeof FLOOR_ORDER)[number]);\n  if (idx < 0 || idx >= FLOOR_ORDER.length - 1) return null;\n  return FLOOR_ORDER[idx + 1];\n}\n\nexport function getFloorNumberForArea(area: string): number {\n  const floorName = getFloorForArea(area);\n  if (!floorName) return 1;\n  return FLOOR_NUMBER_MAP[floorName] ?? 1;\n}\n\n","/**  F11 */\nexport function toggleFullScreen(): void {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen().catch((err: Error) => {\n      console.warn(`Fullscreen error: ${err.message}`);\n    });\n  } else {\n    document.exitFullscreen();\n  }\n}\n","/**\n * LLM \n *  AI  XML \n */\n/**\n * Maintenance note:\n * - Keep this file UTF-8 (contains Chinese text).\n * - Avoid shell redirection full-file overwrite (>, >>, Out-File, Set-Content).\n * - Prefer apply_patch/IDE-safe edits to prevent mojibake.\n */\n\nexport interface ParsedResponse {\n  /**  <maintext>/<maintxt>/<content>/<> */\n  mainText: string;\n  /** <option>...</option> A-D E / [Leave] / [Rebirth] */\n  options: string[];\n  /** <sum>...</sum>  */\n  summary: string;\n  /** <UpdateVariable>/<update>  */\n  variableUpdate: string;\n  /** <UpdateVariable>  <JSONPatch>...</JSONPatch>  */\n  jsonPatch: string;\n  /**  */\n  rawText: string;\n  /**  E  */\n  hasOptionE: boolean;\n  /**  [Leave]  */\n  hasLeave: boolean;\n  /**  [Rebirth]  */\n  hasRebirth: boolean;\n}\n\nfunction isLeaveOptionLine(line: string): boolean {\n  return /\\bleave\\b/i.test(line);\n}\n\nfunction isRebirthOptionLine(line: string): boolean {\n  return /\\brebirth\\b/i.test(line);\n}\n\n/**\n *  XML \n */\nfunction extractTag(text: string, tagName: string): string {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  // \n  const regex = new RegExp(`(?:^|[\\\\r\\\\n]|>)\\\\s*<${escapedTagName}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)</${escapedTagName}>`, 'ig');\n  let match: RegExpExecArray | null;\n\n  while ((match = regex.exec(text)) !== null) {\n    const fullMatch = match[0];\n    const openTagEnd = fullMatch.indexOf('>');\n    if (openTagEnd >= 0) {\n      //  \"<maintext>, <option>\"\n      const afterOpen = fullMatch.slice(openTagEnd + 1).trimStart();\n      const firstChar = afterOpen[0];\n      if (firstChar === ',' || firstChar === '') continue;\n    }\n    return match[1].trim();\n  }\n\n  return '';\n}\n\n/**\n * \n */\nfunction extractTagByPriority(text: string, tagNames: string[]): string {\n  for (const tagName of tagNames) {\n    const content = extractTag(text, tagName);\n    if (content) return content;\n  }\n  return '';\n}\n\n/**\n * \n * <think>, <thinking>, <Think>, <Thinking> \n *  <thinking> ... </think>\n * \n */\nfunction removeThinkBlock(text: string): string {\n  const thinkTagRegex = /<\\s*(\\/?)\\s*(think|thinking)\\b[^>]*>/gi;\n\n  let result = '';\n  let depth = 0;\n  let lastIndex = 0;\n  let match: RegExpExecArray | null;\n\n  while ((match = thinkTagRegex.exec(text)) !== null) {\n    const isClosing = match[1] === '/';\n    const tagStart = match.index;\n    const tagEnd = thinkTagRegex.lastIndex;\n\n    // \n    //  </think>/< /thinking> \n    if (depth === 0 && !isClosing) {\n      result += text.slice(lastIndex, tagStart);\n    }\n\n    if (isClosing) {\n      //  think/thinking \n      if (depth > 0) depth -= 1;\n    } else {\n      depth += 1;\n    }\n\n    lastIndex = tagEnd;\n  }\n\n  // \n  if (depth === 0) {\n    result += text.slice(lastIndex);\n  }\n\n  return result.trim();\n}\n\n/**\n * \n *  </think> / </thinking> \n */\nexport function filterStreamingTextAfterThinkEnd(text: string): string {\n  if (!text) return '';\n\n  const closeThinkTagRegex = /<\\s*\\/\\s*(think|thinking)\\b[^>]*>/i;\n  const closeMatch = closeThinkTagRegex.exec(text);\n  if (!closeMatch) return text;\n\n  return text.slice(closeMatch.index + closeMatch[0].length).trimStart();\n}\n\n/**\n *  HTML \n */\nfunction removeHtmlComments(text: string): string {\n  return text.replace(/<!--[\\s\\S]*?(?:-->|$)/g, '').trim();\n}\n\nfunction normalizeTucaoMarkers(text: string): string {\n  return text\n    .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n    .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n    .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n    .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n    .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n    .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n}\n\nfunction extractTucaoBlocks(text: string): string[] {\n  const normalized = normalizeTucaoMarkers(text);\n  const result: string[] = [];\n  const openRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n  const closeRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n\n  let cursor = 0;\n  openRegex.lastIndex = 0;\n\n  while (openRegex.exec(normalized) !== null) {\n    const openEnd = openRegex.lastIndex;\n    closeRegex.lastIndex = openEnd;\n    const closeMatch = closeRegex.exec(normalized);\n    const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n    const content = normalized.slice(openEnd, contentEnd).trim();\n    if (content.length > 0) {\n      result.push(content);\n    }\n\n    cursor = closeMatch ? closeRegex.lastIndex : normalized.length;\n    openRegex.lastIndex = cursor;\n    if (!closeMatch) break;\n  }\n\n  return result;\n}\n\n/**\n * \n *  \"A. xxx\", \"B. xxx\" \n */\nfunction parseOptions(optionText: string): string[] {\n  if (!optionText) return [];\n  return optionText\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n *  LLM \n */\nexport function parseResponse(text: string): ParsedResponse {\n  // \n  const cleanText = removeThinkBlock(text);\n\n  // \n  const mainTextRaw = extractTagByPriority(cleanText, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(cleanText);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  const optionRaw = extractTag(cleanText, 'option');\n  const summary = extractTag(cleanText, 'sum');\n\n  //  UpdateVariable / update \n  const updateVarBlock = extractTagByPriority(cleanText, ['UpdateVariable', 'update']);\n  const jsonPatch = extractTag(updateVarBlock, 'JSONPatch');\n  const variableUpdate = updateVarBlock || jsonPatch;\n\n  // \n  const allOptions = parseOptions(optionRaw);\n\n  //  E  [Leave]\n  const hasOptionE = allOptions.some(line => /^E\\.\\s/i.test(line));\n  const hasLeave = allOptions.some(isLeaveOptionLine);\n  const hasRebirth = allOptions.some(isRebirthOptionLine);\n\n  //  E  [Leave] A-D \n  const normalOptions = allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n\n  return {\n    mainText,\n    options: normalOptions,\n    summary,\n    variableUpdate,\n    jsonPatch,\n    rawText: cleanText,\n    hasOptionE,\n    hasLeave,\n    hasRebirth,\n  };\n}\n\n/**\n *  <sum> \n * \n */\nexport function extractSummary(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTag(clean, 'sum');\n}\n\n/**\n *  <maintext> \n */\nexport function extractMainText(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  const mainTextRaw = extractTagByPriority(clean, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(clean);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  return mainText;\n}\n\n/**\n * <UpdateVariable> / <update>\n */\nexport function extractVariableUpdate(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTagByPriority(clean, ['UpdateVariable', 'update']);\n}\n\n/**\n *  <option>  A-D \n */\nexport function extractOptions(messageText: string): string[] {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n}\n\n/**\n *  E \n */\nexport function detectOptionE(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /^E\\.\\s/i.test(line));\n}\n\n/**\n *  [Leave]\n */\nexport function detectLeave(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isLeaveOptionLine);\n}\n\n/**\n *  [Rebirth]\n */\nexport function detectRebirth(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isRebirthOptionLine);\n}\n","// Schema import removed - using raw MVU data directly\nimport { detectLeave, detectOptionE, detectRebirth, extractMainText, extractOptions, extractSummary, extractVariableUpdate, filterStreamingTextAfterThinkEnd, parseResponse } from './responseParser';\n/**\n *  Store\n *    user   generate     assistant \n */\nexport const useGameStore = defineStore('game', () => {\n    const STREAMING_ENABLED_KEY = 'dungeon.streaming_enabled';\n    function readStreamingEnabledSetting() {\n        try {\n            const raw = localStorage.getItem(STREAMING_ENABLED_KEY);\n            if (raw === null)\n                return true;\n            return raw === 'true';\n        }\n        catch {\n            return true;\n        }\n    }\n    function persistStreamingEnabledSetting(enabled) {\n        try {\n            localStorage.setItem(STREAMING_ENABLED_KEY, String(enabled));\n        }\n        catch {\n            // Ignore persistence errors in restricted environments\n        }\n    }\n    //   \n    const mainText = ref('');\n    const options = ref([]);\n    const currentSummary = ref('');\n    const isGenerating = ref(false);\n    const streamingText = ref('');\n    const useStreaming = ref(readStreamingEnabledSetting());\n    const error = ref(null);\n    const isInitialized = ref(false);\n    //   \n    const hasOptionE = ref(false);\n    const hasLeave = ref(false);\n    const hasRebirth = ref(false);\n    const variableUpdateText = ref('');\n    //   \n    const isEditing = ref(false);\n    const editingText = ref('');\n    //  MVU  stat_data\n    const statData = ref({});\n    //   \n    const saveEntries = ref([]);\n    const isSaveLoadOpen = ref(false);\n    const pendingPortalChanges = ref(null);\n    const pendingCombatMvuChanges = ref(null);\n    const pendingStatDataChanges = ref(null);\n    function setPendingPortalChanges(changes) {\n        pendingPortalChanges.value = changes;\n    }\n    function setPendingCombatMvuChanges(changes) {\n        pendingCombatMvuChanges.value = changes ? _.cloneDeep(changes) : null;\n    }\n    function setPendingStatDataChanges(fields) {\n        pendingStatDataChanges.value = fields ? { fields: _.cloneDeep(fields) } : null;\n    }\n    function setUseStreaming(enabled) {\n        const nextEnabled = Boolean(enabled);\n        useStreaming.value = nextEnabled;\n        if (!nextEnabled) {\n            streamingText.value = '';\n        }\n        persistStreamingEnabledSetting(nextEnabled);\n    }\n    /**\n     *  MVU  user \n     */\n    function applyPendingPortalChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!changes)\n            return result;\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (changes.area !== undefined)\n            sd._ = changes.area;\n        sd._ = changes.roomType;\n        if (changes.enemyName !== undefined)\n            sd._ = changes.enemyName;\n        if (!sd.$ || typeof sd.$ !== 'object') {\n            sd.$ = {};\n        }\n        const stat = sd.$;\n        if (changes.resetRoomCounter) {\n            stat. = 0;\n        }\n        if (changes.incrementKeys) {\n            for (const key of changes.incrementKeys) {\n                stat[key] = (Number(stat[key]) || 0) + 1;\n            }\n        }\n        return result;\n    }\n    function applyPendingCombatChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes)\n            return result;\n        if (Number.isFinite(changes.hp)) {\n            sd._ = Math.max(0, Math.floor(Number(changes.hp)));\n        }\n        if (changes.addDefeatMark) {\n            const raw = sd._;\n            const base = Array.isArray(raw)\n                ? raw.filter((item) => typeof item === 'string')\n                : [];\n            if (!base.includes('[]')) {\n                base.push('[]');\n            }\n            sd._ = base;\n        }\n        if (Array.isArray(changes.negativeStatusesAdd) && changes.negativeStatusesAdd.length > 0) {\n            const raw = sd._;\n            const base = Array.isArray(raw)\n                ? raw.filter((item) => typeof item === 'string')\n                : [];\n            for (const status of changes.negativeStatusesAdd) {\n                if (typeof status !== 'string')\n                    continue;\n                const normalized = status.trim();\n                if (!normalized)\n                    continue;\n                if (!base.includes(normalized)) {\n                    base.push(normalized);\n                }\n            }\n            sd._ = base;\n        }\n        if (Number.isFinite(changes.goldDelta)) {\n            const currentGold = Math.max(0, Math.floor(Number(sd._ ?? 0)));\n            const delta = Math.floor(Number(changes.goldDelta));\n            sd._ = Math.max(0, currentGold + delta);\n        }\n        return result;\n    }\n    function applyPendingStatDataChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes || !changes.fields || typeof changes.fields !== 'object')\n            return result;\n        Object.assign(sd, _.cloneDeep(changes.fields));\n        return result;\n    }\n    /**\n     *  assistant \n     */\n    async function initialize() {\n        try {\n            await waitGlobalInitialized('Mvu');\n            console.info('[GameStore] MVU initialized');\n            //  assistant \n            const lastId = getLastMessageId();\n            if (lastId >= 0) {\n                loadLatestAssistantState();\n                loadStatData();\n            }\n            isInitialized.value = true;\n            console.info('[GameStore] Initialized successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Init error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     *  assistant \n     */\n    function loadLatestAssistantState() {\n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        if (messages.length > 0) {\n            const lastMsg = messages[messages.length - 1];\n            const text = lastMsg.message;\n            mainText.value = extractMainText(text);\n            options.value = extractOptions(text);\n            currentSummary.value = extractSummary(text);\n            hasOptionE.value = detectOptionE(text);\n            hasLeave.value = detectLeave(text);\n            hasRebirth.value = detectRebirth(text);\n            variableUpdateText.value = extractVariableUpdate(text);\n        }\n    }\n    /**\n     *  MVU stat_data\n     */\n    function loadStatData() {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const mvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema /\n                statData.value = raw;\n                console.info('[GameStore] stat_data loaded from message', lastId);\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] Failed to load stat_data:', err);\n        }\n    }\n    /**\n     * \n     * 1.  MVU \n     * 2.  user \n     * 3.  generate  LLM \n     * 4.  +  MVU \n     * 5.  assistant  MVU \n     * 6. \n     */\n    async function sendAction(userInput) {\n        if (isGenerating.value || !userInput.trim())\n            return;\n        error.value = null;\n        isGenerating.value = true;\n        streamingText.value = '';\n        try {\n            // 1.  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            const currentPendingPortalChanges = pendingPortalChanges.value;\n            const currentPendingCombatChanges = pendingCombatMvuChanges.value;\n            const currentPendingStatDataChanges = pendingStatDataChanges.value;\n            // 2.  user  MVU \n            const userMvuDataAfterPortal = applyPendingPortalChangesToMvu(oldMvuData, currentPendingPortalChanges);\n            const userMvuDataAfterCombat = applyPendingCombatChangesToMvu(userMvuDataAfterPortal, currentPendingCombatChanges);\n            const userMvuData = applyPendingStatDataChangesToMvu(userMvuDataAfterCombat, currentPendingStatDataChanges);\n            // 3.  user  MVU \n            console.info('[GameStore] Creating user message:', userInput);\n            await createChatMessages([{ role: 'user', message: userInput, data: userMvuData }], { refresh: 'none' });\n            // user \n            pendingPortalChanges.value = null;\n            pendingCombatMvuChanges.value = null;\n            pendingStatDataChanges.value = null;\n            // 4. \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, _generation_id) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // 5.  generate \n            console.info('[GameStore] Generating LLM response...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            console.info('[GameStore] LLM response received, length:', result.length);\n            // \n            streamListener.stop();\n            streamingText.value = '';\n            // 6. \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            // 7.  MVU  user \n            let newMvuData = await Mvu.parseMessage(result, _.cloneDeep(userMvuData));\n            if (!newMvuData) {\n                newMvuData = _.cloneDeep(userMvuData);\n            }\n            else if (!newMvuData.stat_data && userMvuData?.stat_data) {\n                newMvuData.stat_data = _.cloneDeep(userMvuData.stat_data);\n            }\n            // 8.  MVU \n            if (newMvuData) {\n                delete newMvuData.display_data;\n                delete newMvuData.delta_data;\n            }\n            // 9.  assistant  MVU \n            console.info('[GameStore] Creating assistant message with MVU data');\n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            // 10.  stat_data\n            refreshLocalStatData(newMvuData);\n            console.info('[GameStore] Action completed successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] sendAction error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function applyParsedResponse(parsed) {\n        mainText.value = parsed.mainText;\n        options.value = parsed.options;\n        currentSummary.value = parsed.summary;\n        hasOptionE.value = parsed.hasOptionE;\n        hasLeave.value = parsed.hasLeave;\n        hasRebirth.value = parsed.hasRebirth;\n        variableUpdateText.value = parsed.variableUpdate;\n    }\n    /**\n     *  MVU  stat_data \n     */\n    function refreshLocalStatData(mvuData) {\n        try {\n            if (!mvuData)\n                return;\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema.safeParse /\n                statData.value = raw;\n                console.info('[GameStore] Local stat_data refreshed:', JSON.stringify(raw.$));\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] refreshLocalStatData error:', err);\n        }\n    }\n    /**\n     *  <sum> \n     */\n    function loadSaveEntries() {\n        const entries = [];\n        const lastId = getLastMessageId();\n        if (lastId < 0) {\n            saveEntries.value = entries;\n            return;\n        }\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        for (const msg of messages) {\n            const summary = extractSummary(msg.message);\n            if (summary) {\n                entries.push({\n                    messageId: msg.message_id,\n                    summary,\n                });\n            }\n        }\n        saveEntries.value = entries;\n    }\n    /**\n     * \n     */\n    async function rollbackTo(targetMessageId) {\n        try {\n            const lastId = getLastMessageId();\n            if (targetMessageId >= lastId) {\n                console.warn('[GameStore] Cannot rollback: target is current or future');\n                return;\n            }\n            //  target \n            const idsToDelete = [];\n            for (let i = targetMessageId + 1; i <= lastId; i++) {\n                idsToDelete.push(i);\n            }\n            console.info(`[GameStore] Rolling back: deleting messages ${targetMessageId + 1} to ${lastId}`);\n            await deleteChatMessages(idsToDelete, { refresh: 'none' });\n            //  assistant \n            loadLatestAssistantState();\n            //  MVU  getLastMessageId\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: targetMessageId });\n                const raw = _.get(mvuData, 'stat_data');\n                if (raw && typeof raw === 'object') {\n                    statData.value = raw;\n                    console.info('[GameStore] Rollback: loaded stat_data from message', targetMessageId);\n                }\n            }\n            catch (e) {\n                console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back', e);\n                loadStatData();\n            }\n            // \n            isSaveLoadOpen.value = false;\n            toastr.success('');\n            console.info('[GameStore] Rollback completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Rollback error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * Roll assistant+user \n     */\n    async function rerollCurrent() {\n        if (isGenerating.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 1) {\n                console.warn('[GameStore] Cannot reroll: not enough messages');\n                return;\n            }\n            isGenerating.value = true;\n            error.value = null;\n            streamingText.value = '';\n            //  user  re-generate \n            const allMessages = getChatMessages(`0-${lastId}`);\n            const lastUserMsg = [...allMessages].reverse().find(m => m.role === 'user');\n            const userInput = lastUserMsg ? lastUserMsg.message : '';\n            //  assistant \n            console.info('[GameStore] Reroll: deleting message', lastId);\n            await deleteChatMessages([lastId], { refresh: 'none' });\n            //  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            // \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // \n            console.info('[GameStore] Reroll: regenerating...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            streamListener.stop();\n            streamingText.value = '';\n            // \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            //  MVU \n            const newMvuData = await Mvu.parseMessage(result, _.cloneDeep(oldMvuData));\n            //  assistant  MVU \n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            toastr.success('');\n            console.info('[GameStore] Reroll completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Reroll error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function startEdit() {\n        if (isEditing.value || isGenerating.value)\n            return;\n        //  SillyTavern  assistant \n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`${lastId}-${lastId}`);\n        if (messages.length === 0)\n            return;\n        editingText.value = messages[0].message;\n        isEditing.value = true;\n    }\n    /**\n     *  assistant \n     */\n    async function saveEdit() {\n        if (!isEditing.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            //  MVU \n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            //  MVU \n            const prevMvuData = lastId > 0\n                ? Mvu.getMvuData({ type: 'message', message_id: lastId - 1 })\n                : Mvu.getMvuData({ type: 'message', message_id: 0 });\n            //  MVU \n            let newMvuData = await Mvu.parseMessage(editingText.value, _.cloneDeep(prevMvuData));\n            //  stat_data / display_data\n            //  MVU \n            if (newMvuData && currentMvuData) {\n                if (!newMvuData.stat_data && currentMvuData.stat_data) {\n                    newMvuData.stat_data = currentMvuData.stat_data;\n                }\n                if (!newMvuData.display_data && currentMvuData.display_data) {\n                    newMvuData.display_data = currentMvuData.display_data;\n                }\n            }\n            else if (!newMvuData && currentMvuData) {\n                // parseMessage \n                newMvuData = currentMvuData;\n            }\n            // \n            await setChatMessages([{ message_id: lastId, message: editingText.value }], { refresh: 'none' });\n            //  MVU \n            if (newMvuData) {\n                await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id: lastId });\n            }\n            // \n            const parsed = parseResponse(editingText.value);\n            applyParsedResponse(parsed);\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            isEditing.value = false;\n            editingText.value = '';\n            toastr.success('');\n            console.info('[GameStore] Edit saved');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Save edit error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * \n     */\n    function cancelEdit() {\n        isEditing.value = false;\n        editingText.value = '';\n    }\n    /**\n     *  stat_data \n     */\n    async function updateStatDataFields(fields) {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0) {\n                error.value = '';\n                return false;\n            }\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const nextMvuData = _.cloneDeep(currentMvuData ?? {});\n            if (!nextMvuData.stat_data || typeof nextMvuData.stat_data !== 'object') {\n                nextMvuData.stat_data = {};\n            }\n            Object.assign(nextMvuData.stat_data, _.cloneDeep(fields));\n            await Mvu.replaceMvuData(nextMvuData, { type: 'message', message_id: lastId });\n            refreshLocalStatData(nextMvuData);\n            return true;\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] updateStatDataFields error:', msg);\n            error.value = `: ${msg}`;\n            return false;\n        }\n    }\n    return {\n        // State\n        mainText,\n        options,\n        currentSummary,\n        isGenerating,\n        useStreaming,\n        streamingText,\n        error,\n        isInitialized,\n        statData,\n        saveEntries,\n        isSaveLoadOpen,\n        isEditing,\n        editingText,\n        hasOptionE,\n        hasLeave,\n        hasRebirth,\n        variableUpdateText,\n        // Actions\n        initialize,\n        sendAction,\n        setUseStreaming,\n        setPendingPortalChanges,\n        setPendingCombatMvuChanges,\n        setPendingStatDataChanges,\n        loadStatData,\n        loadSaveEntries,\n        rollbackTo,\n        rerollCurrent,\n        startEdit,\n        saveEdit,\n        cancelEdit,\n        updateStatDataFields,\n    };\n});\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link2 = createLucideIcon(\"link-2\", [\n  [\"path\", { d: \"M9 17H7A5 5 0 0 1 7 7h2\", key: \"8i5ue5\" }],\n  [\"path\", { d: \"M15 7h2a5 5 0 1 1 0 10h-2\", key: \"1b9ql8\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"12\", y2: \"12\", key: \"1jonct\" }]\n]);\n\nexport { Link2 as default };\n//# sourceMappingURL=link-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Skull = createLucideIcon(\"skull\", [\n  [\"path\", { d: \"m12.5 17-.5-1-.5 1h1z\", key: \"3me087\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z\",\n      key: \"1o5pge\"\n    }\n  ],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }]\n]);\n\nexport { Skull as default };\n//# sourceMappingURL=skull.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"bug\", [\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z\", key: \"uouzyp\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M21 21a4 4 0 0 0-3.81-4\", key: \"1b0z45\" }],\n  [\"path\", { d: \"M21 5a4 4 0 0 1-3.55 3.97\", key: \"5cxbf6\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M3 21a4 4 0 0 1 3.81-4\", key: \"1fjd4g\" }],\n  [\"path\", { d: \"M3 5a4 4 0 0 0 3.55 3.97\", key: \"1d7oge\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M9 7.13V6a3 3 0 1 1 6 0v1.13\", key: \"1vgav8\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplet = createLucideIcon(\"droplet\", [\n  [\n    \"path\",\n    {\n      d: \"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z\",\n      key: \"c7niix\"\n    }\n  ]\n]);\n\nexport { Droplet as default };\n//# sourceMappingURL=droplet.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flame = createLucideIcon(\"flame\", [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n]);\n\nexport { Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"heart\", [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ban = createLucideIcon(\"ban\", [\n  [\"path\", { d: \"M4.929 4.929 19.07 19.071\", key: \"196cmz\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Ban as default };\n//# sourceMappingURL=ban.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"zap\", [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Snowflake = createLucideIcon(\"snowflake\", [\n  [\"path\", { d: \"m10 20-1.25-2.5L6 18\", key: \"18frcb\" }],\n  [\"path\", { d: \"M10 4 8.75 6.5 6 6\", key: \"7mghy3\" }],\n  [\"path\", { d: \"m14 20 1.25-2.5L18 18\", key: \"1chtki\" }],\n  [\"path\", { d: \"m14 4 1.25 2.5L18 6\", key: \"1b4wsy\" }],\n  [\"path\", { d: \"m17 21-3-6h-4\", key: \"15hhxa\" }],\n  [\"path\", { d: \"m17 3-3 6 1.5 3\", key: \"11697g\" }],\n  [\"path\", { d: \"M2 12h6.5L10 9\", key: \"kv9z4n\" }],\n  [\"path\", { d: \"m20 10-1.5 2 1.5 2\", key: \"1swlpi\" }],\n  [\"path\", { d: \"M22 12h-6.5L14 15\", key: \"1mxi28\" }],\n  [\"path\", { d: \"m4 10 1.5 2L4 14\", key: \"k9enpj\" }],\n  [\"path\", { d: \"m7 21 3-6-1.5-3\", key: \"j8hb9u\" }],\n  [\"path\", { d: \"m7 3 3 6h4\", key: \"1otusx\" }]\n]);\n\nexport { Snowflake as default };\n//# sourceMappingURL=snowflake.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bone = createLucideIcon(\"bone\", [\n  [\n    \"path\",\n    {\n      d: \"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z\",\n      key: \"w610uw\"\n    }\n  ]\n]);\n\nexport { Bone as default };\n//# sourceMappingURL=bone.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Battery = createLucideIcon(\"battery\", [\n  [\"path\", { d: \"M 22 14 L 22 10\", key: \"nqc4tb\" }],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"16\", height: \"12\", rx: \"2\", key: \"13zb55\" }]\n]);\n\nexport { Battery as default };\n//# sourceMappingURL=battery.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Waves = createLucideIcon(\"waves\", [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n]);\n\nexport { Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"eye\", [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"eye-off\", [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"brain\", [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Leaf = createLucideIcon(\"leaf\", [\n  [\n    \"path\",\n    {\n      d: \"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z\",\n      key: \"nnexq3\"\n    }\n  ],\n  [\"path\", { d: \"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12\", key: \"mt58a7\" }]\n]);\n\nexport { Leaf as default };\n//# sourceMappingURL=leaf.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"settings-2\", [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"trash-2\", [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"x\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","// \n//     &  & \n// \n\nimport {\n    type CardData,\n    CardType,\n    type ClashResult,\n    type DamageCalculationContext,\n    EffectType,\n    type EntityStats,\n    type PointCalculationContext,\n} from '../types';\nimport {\n    findEffect,\n    getEffectStacks,\n    hasEffect,\n    reduceEffectStacks,\n    removeEffect,\n} from './effects';\n\n// \n//  A. \n// \n\n/**\n * \n * FinalPoint = (BaseDice * Multiplier + Addition) * BuffMod * RelicMod + BuffAdd + RelicAdd\n */\nexport function calculateFinalPoint(ctx: PointCalculationContext): number {\n  const { baseDice, card, relicModifiers } = ctx;\n\n  // Step 1-2: \n  let point = baseDice * card.calculation.multiplier + card.calculation.addition;\n\n  // Step 3-4: \n  point *= relicModifiers.globalMultiplier;\n\n  // Step 5-6: \n  point += relicModifiers.globalAddition;\n\n  return Math.max(0, Math.floor(point));\n}\n\n// \n//  B. \n// \n\n/**\n * \n * 1.  vs   2.  vs   3.  vs (|)  4. \n */\nexport function shouldClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  forceClashFunction: boolean = false,\n): boolean {\n  const p = playerCard.type;\n  const e = enemyCard.type;\n\n  if (p === CardType.FUNCTION || e === CardType.FUNCTION) return forceClashFunction;\n  if (p === e) return true;\n  if (p === CardType.DODGE && (e === CardType.PHYSICAL || e === CardType.MAGIC)) return true;\n  if (e === CardType.DODGE && (p === CardType.PHYSICAL || p === CardType.MAGIC)) return true;\n\n  return false;\n}\n\n/**\n * \n *  <  = \n */\nexport function resolveClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  playerPoint: number,\n  enemyPoint: number,\n): ClashResult {\n  const isPlayerDodge = playerCard.type === CardType.DODGE;\n  const isEnemyDodge = enemyCard.type === CardType.DODGE;\n\n  // \n  if (isPlayerDodge && !isEnemyDodge) {\n    if (playerPoint < enemyPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n    }\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint}  ${enemyPoint})` };\n  }\n  // \n  if (isEnemyDodge && !isPlayerDodge) {\n    if (enemyPoint < playerPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint} < ${playerPoint})` };\n    }\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint}  ${playerPoint})` };\n  }\n  // \n  if (playerPoint > enemyPoint) {\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} > ${enemyPoint})` };\n  } else if (enemyPoint > playerPoint) {\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n  }\n  return { outcome: 'draw', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint})` };\n}\n\n// \n//  C. \n// \n\n/**\n * \n * relative: FinalPoint * scale + scaleAddition\n * fixed:    value\n * mixed:    baseValue + FinalPoint * scale + scaleAddition\n */\nexport function calculateRawDamage(finalPoint: number, card: CardData): number {\n  const dl = card.damageLogic;\n  switch (dl.mode) {\n    case 'relative': return finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    case 'fixed':    return dl.value ?? 0;\n    case 'mixed':    return (dl.baseValue ?? 0) + finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    default:         return 0;\n  }\n}\n\n/**\n * \n *           \n */\nexport function calculateFinalDamage(ctx: DamageCalculationContext): { damage: number; isTrueDamage: boolean; logs: string[] } {\n  const logs: string[] = [];\n  let damage = calculateRawDamage(ctx.finalPoint, ctx.card);\n  logs.push(`: ${Math.floor(damage)}`);\n\n  const isTrueDamage = ctx.isTrueDamage ?? false;\n\n  // \n  const cold = ctx.attackerEffects.find(e => e.type === EffectType.COLD)?.stacks ?? 0;\n  if (cold > 0) { damage -= cold; logs.push(`[] -${cold}`); }\n\n  // /\n  const defenderHasNonEntity = ctx.defenderEffects.some((e) => e.type === EffectType.NON_ENTITY && e.stacks > 0);\n  // \n  const defenderHasIllusoryBody = ctx.defenderEffects.some((e) => e.type === EffectType.ILLUSORY_BODY && e.stacks > 0);\n  if (defenderHasNonEntity) {\n    if (ctx.card.type === CardType.PHYSICAL) {\n      damage *= 0.5;\n      logs.push('[]  x0.5');\n    } else if (ctx.card.type === CardType.MAGIC) {\n      damage *= 1.5;\n      logs.push('[]  x1.5');\n    }\n  }\n  if (defenderHasIllusoryBody && ctx.card.type === CardType.PHYSICAL) {\n    damage *= 0.5;\n    logs.push('[]  x0.5');\n  }\n\n  if (isTrueDamage) {\n    logs.push(``);\n    return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: true, logs };\n  }\n\n  // \n  const vuln = ctx.defenderEffects.find(e => e.type === EffectType.VULNERABLE)?.stacks ?? 0;\n  if (vuln > 0) { damage += vuln; logs.push(`[] +${vuln}`); }\n\n  // \n  const sturdy = ctx.defenderEffects.find(e => e.type === EffectType.STURDY)?.stacks ?? 0;\n  if (sturdy > 0) { damage -= sturdy; logs.push(`[] -${sturdy}`); }\n\n  //  applyDamageToEntity \n  if (ctx.defenderEffects.some(e => e.type === EffectType.BARRIER && e.stacks > 0)) {\n    logs.push(`[] `);\n  }\n\n  //  applyDamageToEntity \n  const armor = ctx.defenderEffects.find(e => e.type === EffectType.ARMOR)?.stacks ?? 0;\n  if (armor > 0) { logs.push(`[]  ${armor} `); }\n\n  return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: false, logs };\n}\n\n/**\n * \n */\nexport function triggerSwarmReviveIfNeeded(target: EntityStats): { revived: boolean; logs: string[] } {\n  const logs: string[] = [];\n  if (target.hp > 0) return { revived: false, logs };\n  if (target.maxHp <= 0) return { revived: false, logs };\n\n  const swarmStacks = getEffectStacks(target, EffectType.SWARM);\n  if (swarmStacks > 0) {\n    reduceEffectStacks(target, EffectType.SWARM, 1);\n    target.hp = target.maxHp;\n    logs.push(`[] 1${target.maxHp}`);\n    return { revived: true, logs };\n  }\n\n  const indomitableStacks = getEffectStacks(target, EffectType.INDOMITABLE);\n  if (indomitableStacks > 0) {\n    reduceEffectStacks(target, EffectType.INDOMITABLE, 1);\n    target.hp = 1;\n    logs.push(`[] 11`);\n    return { revived: true, logs };\n  }\n\n  return { revived: false, logs };\n}\n\n/**\n * \n *  0 \n */\nexport function consumeColdAfterDealingDamage(attacker: EntityStats, actualDamage: number): string[] {\n  const logs: string[] = [];\n  void actualDamage;\n\n  const cold = findEffect(attacker, EffectType.COLD);\n  if (!cold || cold.stacks <= 0) return logs;\n\n  const before = cold.stacks;\n  cold.stacks = Math.floor(cold.stacks / 2);\n  if (cold.stacks <= 0) {\n    removeEffect(attacker, EffectType.COLD);\n    logs.push(`[] ${before} -> 0`);\n  } else {\n    logs.push(`[] ${before} -> ${cold.stacks}`);\n  }\n  return logs;\n}\n\n/**\n * ///\n */\nexport function applyDamageToEntity(target: EntityStats, damage: number, isTrueDamage: boolean): { actualDamage: number; logs: string[] } {\n  const logs: string[] = [];\n  if (!isTrueDamage) {\n    if (hasEffect(target, EffectType.BARRIER) && damage > 0) {\n      reduceEffectStacks(target, EffectType.BARRIER);\n      logs.push(`[] -1`);\n      return { actualDamage: 0, logs };\n    }\n    const ae = findEffect(target, EffectType.ARMOR);\n    if (ae && ae.stacks > 0 && damage > 0) {\n      const c = Math.min(ae.stacks, damage);\n      ae.stacks -= c; damage -= c;\n      if (ae.stacks <= 0) removeEffect(target, EffectType.ARMOR);\n      logs.push(`[] ${c}${damage}`);\n    }\n  }\n  const actual = Math.min(damage, target.hp);\n  target.hp -= actual;\n  logs.push(`${actual}(HP: ${target.hp}/${target.maxHp})`);\n  const reviveResult = triggerSwarmReviveIfNeeded(target);\n  logs.push(...reviveResult.logs);\n  return { actualDamage: actual, logs };\n}\n\n// \n//  D.  & \n// \n\n/** (), () */\nexport function processClashEffects(winner: EntityStats, loser: EntityStats): string[] {\n  const logs: string[] = [];\n  const bleed = getEffectStacks(loser, EffectType.BLEED);\n  if (bleed > 0) { loser.hp -= bleed; logs.push(`[] ${bleed}`); }\n  if (hasEffect(winner, EffectType.BURN)) { removeEffect(winner, EffectType.BURN); logs.push(`[] `); }\n  return logs;\n}\n\n/** ,  */\nexport function processPostAttackEffects(_attacker: EntityStats): string[] {\n  const logs: string[] = [];\n  // \n  return logs;\n}\n\n// \n//  E. \n// \n\nexport function rollDice(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sword = createLucideIcon(\"sword\", [\n  [\"path\", { d: \"m11 19-6-6\", key: \"s7kpr\" }],\n  [\"path\", { d: \"m5 21-2-2\", key: \"1kw20b\" }],\n  [\"path\", { d: \"m8 16-4 4\", key: \"1oqv8h\" }],\n  [\"path\", { d: \"M9.5 17.5 21 6V3h-3L6.5 14.5\", key: \"pkxemp\" }]\n]);\n\nexport { Sword as default };\n//# sourceMappingURL=sword.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"refresh-ccw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Footprints = createLucideIcon(\"footprints\", [\n  [\n    \"path\",\n    {\n      d: \"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z\",\n      key: \"1dudjm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z\",\n      key: \"l2t8xc\"\n    }\n  ],\n  [\"path\", { d: \"M16 17h4\", key: \"1dejxt\" }],\n  [\"path\", { d: \"M4 13h4\", key: \"1bwh8b\" }]\n]);\n\nexport { Footprints as default };\n//# sourceMappingURL=footprints.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_2 = { class: \"bg-black/60 p-1 rounded-full border border-white/10\" };\nconst _hoisted_3 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_4 = { class: \"absolute font-heading text-white/20 text-4xl select-none\" };\nconst _hoisted_5 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_6 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_7 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_8 = { class: \"mt-1 text-center text-white/50 font-bold text-[10px] font-ui tracking-wider\" };\nimport { CircleHelp, Footprints, RefreshCcw, Skull, Sparkles, Sword } from 'lucide-vue-next';\nimport { CardType } from '../types';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonCard',\n    props: {\n        card: {},\n        disabled: { type: Boolean, default: false },\n        selected: { type: Boolean, default: false },\n        faceDown: { type: Boolean, default: false },\n        isEnemy: { type: Boolean, default: false },\n        className: { default: '' },\n        maskLevel: { default: 'none' }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        const props = __props;\n        const typeColorClass = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'border-gray-600 bg-gray-900/40';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-900 bg-red-950/30';\n                case CardType.MAGIC:\n                    return 'border-purple-900 bg-purple-950/30';\n                case CardType.FUNCTION:\n                    return 'border-yellow-800 bg-yellow-950/30';\n                case CardType.DODGE:\n                    return 'border-emerald-900 bg-emerald-950/30';\n                case CardType.CURSE:\n                    return 'border-black bg-black/70';\n                default:\n                    return 'border-gray-700 bg-gray-800';\n            }\n        });\n        const typeIcon = computed(() => {\n            if (props.maskLevel === 'full') {\n                return CircleHelp;\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return Sword;\n                case CardType.MAGIC:\n                    return Sparkles;\n                case CardType.FUNCTION:\n                    return RefreshCcw;\n                case CardType.DODGE:\n                    return Footprints;\n                case CardType.CURSE:\n                    return Skull;\n                default:\n                    return Sword;\n            }\n        });\n        const typeIconColor = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'text-gray-400';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'text-red-400';\n                case CardType.MAGIC:\n                    return 'text-purple-400';\n                case CardType.FUNCTION:\n                    return 'text-yellow-400';\n                case CardType.DODGE:\n                    return 'text-emerald-400';\n                case CardType.CURSE:\n                    return 'text-zinc-300';\n                default:\n                    return 'text-gray-400';\n            }\n        });\n        const cardStrengthLabel = computed(() => {\n            const dl = props.card.damageLogic;\n            switch (dl.mode) {\n                case 'relative': return ` ${dl.scale ?? 1}x`;\n                case 'fixed': return dl.value ? ` ${dl.value}` : '';\n                case 'mixed': return `${dl.baseValue ?? 0}+${dl.scale ?? 1}x`;\n                default: return '';\n            }\n        });\n        const typeGradient = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'bg-gradient-to-tr from-gray-700 to-black';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'bg-gradient-to-tr from-red-900 to-black';\n                case CardType.MAGIC:\n                    return 'bg-gradient-to-tr from-purple-900 to-black';\n                case CardType.FUNCTION:\n                    return 'bg-gradient-to-tr from-yellow-900 to-black';\n                case CardType.DODGE:\n                    return 'bg-gradient-to-tr from-emerald-900 to-black';\n                case CardType.CURSE:\n                    return 'bg-gradient-to-tr from-zinc-900 to-black';\n                default:\n                    return 'bg-gradient-to-tr from-gray-800 to-black';\n            }\n        });\n        const displayName = computed(() => (props.maskLevel === 'none' ? props.card.name : '???'));\n        const displayDescription = computed(() => (props.maskLevel === 'none' ? props.card.description : '???'));\n        const displayTypeText = computed(() => (props.maskLevel === 'full' ? '?' : props.card.type));\n        const displayInitial = computed(() => (displayName.value[0] ?? '?'));\n        const showManaBadge = computed(() => (props.maskLevel !== 'full'\n            && props.card.type === CardType.MAGIC\n            && props.card.manaCost > 0));\n        const isRareCard = computed(() => props.card.rarity === '');\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" Face Down Card \"),\n                (__props.faceDown)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"w-40 h-60 rounded-xl bg-[#252030] border-2 border-[#3a3040] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2\", __props.className])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"div\", { class: \"absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50\" }, [\n                                _createElementVNode(\"div\", { class: \"size-16 rounded-full border-2 border-[#5c3a21] opacity-30\" })\n                            ], -1 /* CACHED */)\n                        ]))], 2 /* CLASS */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Face Up Card \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"relative w-40 h-60 rounded-xl shadow-2xl transition-all duration-300 transform bg-[#16121e] border-2 cursor-pointer\", [\n                                    _unref(typeColorClass),\n                                    _unref(isRareCard) ? 'rare-card-glow' : '',\n                                    __props.selected ? 'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20' : 'hover:-translate-y-2 hover:z-10',\n                                    __props.disabled ? 'opacity-80 !cursor-default' : '',\n                                    __props.className,\n                                ]]),\n                            onClick: _cache[0] || (_cache[0] = ($event) => (!__props.disabled && _ctx.$emit('click')))\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-400/40 shadow-md\", !_unref(showManaBadge) ? 'opacity-0' : ''])\n                                }, _toDisplayString(__props.card.manaCost), 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(typeIcon)), {\n                                        class: _normalizeClass([\"size-5\", _unref(typeIconColor)])\n                                    }, null, 8 /* PROPS */, [\"class\"]))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Image Placeholder \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"size-full opacity-60\", _unref(typeGradient)])\n                                }, null, 2 /* CLASS */),\n                                _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_unref(displayInitial)), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"h3\", _hoisted_6, _toDisplayString(_unref(displayName)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_unref(displayDescription)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_unref(displayTypeText)), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */)\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DungeonCard.vue?vue&type=style&index=0&id=4f2e90e4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4f2e90e4\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\n\nimport { ref, computed, watch, onUnmounted } from 'vue';\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    class: \"absolute inset-0 size-full\",\n    style: { \"filter\": \"drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))\" }\n};\nconst _hoisted_2 = [\"fill\", \"stroke\"];\nconst _hoisted_3 = [\"stroke\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonDice',\n    props: {\n        value: {},\n        rolling: { type: Boolean },\n        color: { default: 'gold' },\n        size: { default: 'md' },\n        className: { default: '' },\n        rollingMin: { default: 1 },\n        rollingMax: { default: 6 },\n        numberClass: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayValue = ref(1);\n        let interval = null;\n        const gradientId = `grad-${props.color}-${Math.random().toString(36).substr(2, 9)}`;\n        const sizeClass = computed(() => {\n            const map = { sm: 'w-12 h-12', md: 'w-20 h-20', lg: 'w-32 h-32' };\n            return map[props.size];\n        });\n        const numberSizeClass = computed(() => {\n            const map = { sm: 'text-xl', md: 'text-3xl', lg: 'text-6xl' };\n            return map[props.size];\n        });\n        const borderColor = computed(() => (props.color === 'gold' ? '#4d331f' : '#2a0505'));\n        const textColor = computed(() => (props.color === 'gold' ? 'text-[#2c1a0e]' : 'text-[#2c0e0e]'));\n        const numberTextClass = computed(() => props.numberClass || textColor.value);\n        const getRollingRange = () => {\n            const min = Math.floor(Math.min(props.rollingMin, props.rollingMax));\n            const max = Math.floor(Math.max(props.rollingMin, props.rollingMax));\n            return {\n                min: Number.isFinite(min) ? min : 1,\n                max: Number.isFinite(max) ? max : 6,\n            };\n        };\n        const rollRandomInRange = () => {\n            const { min, max } = getRollingRange();\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        watch(() => [props.rolling, props.value, props.rollingMin, props.rollingMax], ([rolling]) => {\n            if (interval) {\n                clearInterval(interval);\n                interval = null;\n            }\n            if (rolling) {\n                interval = setInterval(() => {\n                    displayValue.value = rollRandomInRange();\n                }, 80);\n            }\n            else {\n                displayValue.value = props.value;\n            }\n        }, { immediate: true });\n        onUnmounted(() => {\n            if (interval)\n                clearInterval(interval);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative flex items-center justify-center drop-shadow-xl transition-all duration-300\", [__props.rolling ? 'animate-bounce' : '', __props.className]])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"relative flex items-center justify-center\", _unref(sizeClass)])\n                }, [\n                    (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [\n                        _createElementVNode(\"defs\", null, [\n                            _createElementVNode(\"linearGradient\", {\n                                id: gradientId,\n                                x1: \"0%\",\n                                y1: \"0%\",\n                                x2: \"100%\",\n                                y2: \"100%\"\n                            }, [\n                                (__props.color === 'gold')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[0] || (_cache[0] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#f9e6a0\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#d4af37\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#8a7122\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#fca5a5\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#ef4444\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#7f1d1d\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ]),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 2, 93 25, 93 75, 50 98, 7 75, 7 25\",\n                            fill: `url(#${gradientId})`,\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"3\"\n                        }, null, 8 /* PROPS */, _hoisted_2),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 8, 87 29, 87 71, 50 92, 13 71, 13 29\",\n                            fill: \"none\",\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"1\",\n                            opacity: \"0.4\"\n                        }, null, 8 /* PROPS */, _hoisted_3)\n                    ])),\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"relative z-10 font-heading font-bold drop-shadow-sm\", [_unref(numberTextClass), _unref(numberSizeClass)]])\n                    }, _toDisplayString(_unref(displayValue)), 3 /* TEXT, CLASS */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createVNode as _createVNode, isRef as _isRef, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, createBlock as _createBlock, Fragment as _Fragment, renderList as _renderList, normalizeClass as _normalizeClass, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = { class: \"absolute top-4 left-4 z-50 pointer-events-auto flex flex-col gap-2 scale-[1.1] origin-top-left\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"mt-1 w-52 bg-[#1a1520]/95 border border-white/10 rounded-xl p-3 text-xs text-dungeon-paper shadow-xl backdrop-blur-md\"\n};\nconst _hoisted_5 = { class: \"flex flex-col gap-3\" };\nconst _hoisted_6 = { class: \"flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_7 = { class: \"absolute top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-none scale-[1.1] origin-top\" };\nconst _hoisted_8 = { class: \"flex flex-col items-center\" };\nconst _hoisted_9 = { class: \"text-lg font-heading font-bold text-white/90\" };\nconst _hoisted_10 = { class: \"h-1.5 rounded-full border border-amber-400/35 bg-black/45 overflow-hidden\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"absolute left-1/2 top-full mt-1.5 -translate-x-1/2 w-64 rounded-md border border-amber-300/35 bg-black/80 px-2 py-1 text-[10px] leading-relaxed text-amber-100 text-left shadow-lg\"\n};\nconst _hoisted_12 = { class: \"absolute inset-0 z-10 pointer-events-none\" };\nconst _hoisted_13 = { class: \"absolute top-[3%] right-[2%] md:top-[5%] md:right-[3%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000 scale-[1.1] origin-top-right\" };\nconst _hoisted_14 = {\n    key: 0,\n    class: \"absolute -left-48 top-8\"\n};\nconst _hoisted_15 = { class: \"relative\" };\nconst _hoisted_16 = { class: \"rotate-[-3deg] shadow-[0_0_20px_rgba(200,120,0,0.15)]\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_18 = { class: \"text-white/70\" };\nconst _hoisted_19 = { class: \"font-bold text-[#b08a2e]\" };\nconst _hoisted_20 = { class: \"relative w-full h-full\" };\nconst _hoisted_21 = { class: \"absolute bottom-0 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_22 = [\"src\"];\nconst _hoisted_23 = { class: \"relative overflow-visible mt-0 w-72 scale-[1.2] origin-top bg-[#18141e]/90 border border-white/8 p-3 rounded-xl shadow-lg backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_24 = { class: \"flex justify-between text-sm text-white/90 font-bold mb-1.5\" };\nconst _hoisted_25 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_26 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_27 = [\"aria-label\"];\nconst _hoisted_28 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_29 = [\"aria-label\"];\nconst _hoisted_30 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_31 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_32 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_33 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_34 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_35 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_36 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_37 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_38 = { class: \"text-[10px] text-red-300\" };\nconst _hoisted_39 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_40 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_41 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_42 = { class: \"absolute bottom-[18%] left-[3%] md:bottom-[22%] md:left-[6%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32 scale-[1.1] origin-bottom-left\" };\nconst _hoisted_43 = [\"title\"];\nconst _hoisted_44 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_45 = { class: \"text-white/70\" };\nconst _hoisted_46 = { class: \"font-bold text-red-800\" };\nconst _hoisted_47 = { class: \"relative w-full h-full\" };\nconst _hoisted_48 = { class: \"absolute bottom-4 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_49 = {\n    key: 0,\n    class: \"size-20 bg-dungeon-gold/15 blur-2xl rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n};\nconst _hoisted_50 = [\"src\"];\nconst _hoisted_51 = { class: \"relative overflow-visible mt-2 w-60 scale-[1.2] origin-bottom bg-[#18141e]/90 border border-white/8 p-2.5 rounded-xl shadow-xl backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_52 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_53 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_54 = [\"aria-label\"];\nconst _hoisted_55 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_56 = [\"aria-label\"];\nconst _hoisted_57 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_58 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_59 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_60 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_61 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_62 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_63 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_64 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_65 = { class: \"text-[10px] text-dungeon-gold\" };\nconst _hoisted_66 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_67 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_68 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_69 = { class: \"absolute inset-0 z-[45] pointer-events-none overflow-hidden\" };\nconst _hoisted_70 = { class: \"absolute inset-0 z-30 flex flex-col pointer-events-none\" };\nconst _hoisted_71 = { class: \"flex-1 flex items-center justify-center relative\" };\nconst _hoisted_72 = {\n    key: 0,\n    class: \"relative w-full h-64 flex items-center justify-center z-50\"\n};\nconst _hoisted_73 = { class: \"pointer-events-none min-h-[200px] w-full flex items-end justify-center pb-6 px-4 space-x-4 relative\" };\nconst _hoisted_74 = { class: \"flex space-x-4 items-end mb-2 z-40 scale-[1.1] origin-bottom pointer-events-auto\" };\nconst _hoisted_75 = [\"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_76 = { class: \"absolute right-6 bottom-6 flex flex-col items-end gap-2.5 z-50 scale-[1.1] origin-bottom-right pointer-events-auto\" };\nconst _hoisted_77 = [\"disabled\"];\nconst _hoisted_78 = { class: \"flex space-x-3\" };\nconst _hoisted_79 = { class: \"relative group\" };\nconst _hoisted_80 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_81 = { class: \"relative group\" };\nconst _hoisted_82 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_83 = { class: \"absolute right-0 top-14 z-40 pointer-events-auto select-none scale-[1.1] origin-top-right\" };\nconst _hoisted_84 = { class: \"flex items-start\" };\nconst _hoisted_85 = [\"title\"];\nconst _hoisted_86 = {\n    key: 0,\n    class: \"w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-1 text-[10px] font-mono text-gray-300\"\n};\nconst _hoisted_87 = [\"innerHTML\"];\nconst _hoisted_88 = {\n    key: 0,\n    class: \"absolute inset-0 z-[70] flex items-center justify-center pointer-events-none\"\n};\nconst _hoisted_89 = { class: \"effect-tooltip-name\" };\nconst _hoisted_90 = { class: \"effect-tooltip-desc\" };\nconst _hoisted_91 = {\n    key: 0,\n    class: \"effect-tooltip-stacks\"\n};\nconst _hoisted_92 = { class: \"flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2\" };\nconst _hoisted_93 = { class: \"font-heading text-xl text-dungeon-gold\" };\nconst _hoisted_94 = { class: \"overflow-y-auto grid grid-cols-4 gap-4 p-2\" };\nimport { Ban, Battery, Bone, Box, Brain, Bug, Droplet, Eye, EyeOff, Flame, Heart, Layers, Leaf, Link2, Scroll, Settings2, Shield, ShieldCheck, Skull, Snowflake, Sparkles, Trash2, TriangleAlert, Waves, X as XIcon, Zap, } from 'lucide-vue-next';\nimport { applyDamageToEntity, calculateFinalDamage, calculateFinalPoint, consumeColdAfterDealingDamage, triggerSwarmReviveIfNeeded } from '../battle/algorithms';\nimport { getCardByName } from '../battle/cardRegistry';\nimport { EFFECT_REGISTRY, ELEMENTAL_DEBUFF_TYPES, applyEffect, canPlayCard, getEffectStacks, processOnTurnEnd, processOnTurnStart, reduceEffectStacks, removeEffect } from '../battle/effects';\nimport { getEnemyByName } from '../battle/enemyRegistry';\nimport { resolveRelicMap, } from '../battle/relicRegistry';\nimport { getFloorNumberForArea } from '../floor';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { CardType, CombatPhase, EffectType as ET } from '../types';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\n\nimport { ref, computed, reactive, onMounted, onUnmounted, watch } from 'vue';\nconst HF_DATASET_REPO = 'Vin05/AI-Gallery';\nconst HF_USER_DIR = '/user';\nconst HF_MONSTER_DIR = '/';\nconst HF_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst SPEED_SETTING_KEY = 'dungeon.combat.speed_up';\nconst FATIGUE_DEGREE_KEY = 'dungeon.combat.fatigue_degree';\nconst FATIGUE_DEGREE_MAX = 300;\nconst HP_BAR_ANIMATION_MS = 500;\nconst RESULT_DELAY_MS = 500;\nconst RESULT_BANNER_STAY_MS = 1500;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatView',\n    props: {\n        initialPlayerStats: {},\n        enemyName: {},\n        playerDeck: {},\n        playerRelics: { default: () => ({}) },\n        testStartAt999: { type: Boolean, default: false }\n    },\n    emits: [\"endCombat\", \"openDeck\", \"openRelics\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const resolveCurrentFloorNumber = () => {\n            const area = gameStore.statData._ || '';\n            const floorFromArea = getFloorNumberForArea(area);\n            const fallback = Math.max(1, Math.floor(Number(gameStore.statData._ ?? 1)));\n            const floor = area ? floorFromArea : fallback;\n            gameStore.statData._ = floor;\n            return floor;\n        };\n        const currentFloorNumber = resolveCurrentFloorNumber();\n        // --- Enemy Loading ---\n        const enemyDef = getEnemyByName(props.enemyName, currentFloorNumber);\n        const enemyDisplayName = enemyDef?.name ?? props.enemyName;\n        // --- Portrait URLs ---\n        const HF_RESOLVE_ROOT = `https://huggingface.co/datasets/${HF_DATASET_REPO}/resolve/main`;\n        const HF_TREE_API_ROOT = `https://huggingface.co/api/datasets/${HF_DATASET_REPO}/tree/main`;\n        const IMAGE_EXT_RE = /\\.(png|jpe?g|webp|gif|avif|bmp|svg)$/i;\n        const BOSS_FOLDER_NAMES = new Set([\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ]);\n        const folderImageCache = new Map();\n        const folderImagePromiseCache = new Map();\n        const normalizeRepoPath = (path) => path.replace(/\\\\/g, '/').replace(/^\\/+|\\/+$/g, '');\n        const encodeRepoPath = (path) => normalizeRepoPath(path).split('/').map((seg) => encodeURIComponent(seg)).join('/');\n        const toResolveUrl = (repoPath) => `${HF_RESOLVE_ROOT}/${encodeRepoPath(repoPath)}`;\n        const pickRandom = (items) => (items.length > 0 ? items[Math.floor(Math.random() * items.length)] : null);\n        const parseNextLink = (linkHeader) => {\n            if (!linkHeader)\n                return null;\n            const match = linkHeader.match(/<([^>]+)>\\s*;\\s*rel=\"next\"/i);\n            return match?.[1] ?? null;\n        };\n        const fetchFolderImages = async (repoFolderPath) => {\n            const folder = normalizeRepoPath(repoFolderPath);\n            const cached = folderImageCache.get(folder);\n            if (cached)\n                return cached;\n            const pending = folderImagePromiseCache.get(folder);\n            if (pending)\n                return pending;\n            const task = (async () => {\n                const images = [];\n                let nextUrl = `${HF_TREE_API_ROOT}/${encodeRepoPath(folder)}?recursive=true&limit=1000`;\n                while (nextUrl) {\n                    let response;\n                    try {\n                        response = await fetch(nextUrl);\n                    }\n                    catch {\n                        break;\n                    }\n                    if (!response.ok)\n                        break;\n                    let entries = [];\n                    try {\n                        entries = await response.json();\n                    }\n                    catch {\n                        break;\n                    }\n                    for (const entry of entries) {\n                        if (entry.type !== 'file' || !entry.path)\n                            continue;\n                        if (!IMAGE_EXT_RE.test(entry.path))\n                            continue;\n                        images.push(entry.path);\n                    }\n                    nextUrl = parseNextLink(response.headers.get('link'));\n                }\n                folderImageCache.set(folder, images);\n                return images;\n            })();\n            folderImagePromiseCache.set(folder, task);\n            try {\n                return await task;\n            }\n            finally {\n                folderImagePromiseCache.delete(folder);\n            }\n        };\n        const playerPortraitUrl = ref(toResolveUrl(`${HF_USER_DIR}/.png`));\n        const enemyPortraitUrl = ref(toResolveUrl(`${HF_MONSTER_DIR}/${enemyDisplayName}.png`));\n        const playerPortraitError = ref(false);\n        const enemyPortraitError = ref(false);\n        let portraitLoaderDisposed = false;\n        const resolveRandomPortrait = async (folderPath, fallbackFilePath) => {\n            const images = await fetchFolderImages(folderPath);\n            const randomPath = pickRandom(images);\n            return randomPath ? toResolveUrl(randomPath) : toResolveUrl(fallbackFilePath);\n        };\n        const initPortraitUrls = async () => {\n            const playerUrl = await resolveRandomPortrait(HF_USER_DIR, `${HF_USER_DIR}/.png`);\n            if (!portraitLoaderDisposed) {\n                playerPortraitError.value = false;\n                playerPortraitUrl.value = playerUrl;\n            }\n            const enemyFolderPath = `${HF_MONSTER_DIR}/${enemyDisplayName}`;\n            const enemyFallback = `${HF_MONSTER_DIR}/${enemyDisplayName}.png`;\n            const shouldPreferFolder = BOSS_FOLDER_NAMES.has(enemyDisplayName);\n            let enemyUrl = toResolveUrl(enemyFallback);\n            if (shouldPreferFolder) {\n                enemyUrl = await resolveRandomPortrait(enemyFolderPath, enemyFallback);\n            }\n            else {\n                const folderImages = await fetchFolderImages(enemyFolderPath);\n                const randomEnemy = pickRandom(folderImages);\n                if (randomEnemy) {\n                    enemyUrl = toResolveUrl(randomEnemy);\n                }\n            }\n            if (!portraitLoaderDisposed) {\n                enemyPortraitError.value = false;\n                enemyPortraitUrl.value = enemyUrl;\n            }\n        };\n        // --- Dynamic Background ---\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const currentArea = computed(() => gameStore.statData._ || '');\n        const currentRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!currentArea.value || bgImageError.value)\n                return '';\n            const isLord = currentRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${currentArea.value}_` : currentArea.value;\n            return `${HF_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (currentRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true; // fallback to normal area bg\n            }\n            else {\n                bgImageError.value = true; // give up, show gradient\n            }\n        }\n        // AI flags - mutable state for enemy AI decisions (e.g. hasUsedHeal)\n        const aiFlags = reactive({});\n        // --- State ---\n        const cloneEntityStats = (stats) => ({\n            ...stats,\n            effects: stats.effects.map((eff) => ({\n                ...eff,\n                restrictedTypes: eff.restrictedTypes ? [...eff.restrictedTypes] : undefined,\n            })),\n        });\n        const normalizeTestStartStats = (stats) => {\n            const cloned = cloneEntityStats(stats);\n            if (!props.testStartAt999)\n                return cloned;\n            return { ...cloned, hp: 999, maxHp: 999, mp: 999 };\n        };\n        const playerStats = ref(normalizeTestStartStats(props.initialPlayerStats));\n        const enemyStats = ref(normalizeTestStartStats(enemyDef\n            ? enemyDef.stats\n            : { hp: 1, maxHp: 1, mp: 0, minDice: 1, maxDice: 1, effects: [] }));\n        // --- Effect display helpers ---\n        const getEffectName = (type) => {\n            return EFFECT_REGISTRY[type]?.name ?? String(type);\n        };\n        const getEffectDescription = (type) => {\n            return EFFECT_REGISTRY[type]?.description ?? '';\n        };\n        const createStatusEffectPreview = (type, stacks) => ({\n            type,\n            stacks: Math.max(1, Math.floor(stacks)),\n            polarity: EFFECT_REGISTRY[type]?.polarity ?? 'special',\n        });\n        const EFFECT_ICON_COMPONENTS = {\n            [ET.BARRIER]: ShieldCheck,\n            [ET.ARMOR]: Shield,\n            [ET.BIND]: Link2,\n            [ET.DEVOUR]: Skull,\n            [ET.POISON]: Bug,\n            [ET.POISON_AMOUNT]: Droplet,\n            [ET.CORROSION]: Droplet,\n            [ET.BURN]: Flame,\n            [ET.BLEED]: Droplet,\n            [ET.VULNERABLE]: TriangleAlert,\n            [ET.REGEN]: Heart,\n            [ET.WHITE_TURBID]: Droplet,\n            [ET.IGNITE_AURA]: Sparkles,\n            [ET.STUN]: Ban,\n            [ET.CHARGE]: Zap,\n            [ET.FATIGUE]: TriangleAlert,\n            [ET.COLD]: Snowflake,\n            [ET.NON_LIVING]: Bone,\n            [ET.NON_ENTITY]: Sparkles,\n            [ET.ILLUSORY_BODY]: Sparkles,\n            [ET.MAX_HP_REDUCTION]: Heart,\n            [ET.POINT_GROWTH_BIG]: Layers,\n            [ET.POINT_GROWTH_SMALL]: Layers,\n            [ET.MANA_DRAIN]: Battery,\n            [ET.MANA_SPRING]: Waves,\n            [ET.SWARM]: Bug,\n            [ET.INDOMITABLE]: Heart,\n            [ET.PEEP_FORBIDDEN]: Eye,\n            [ET.BLIND_ASH]: EyeOff,\n            [ET.COGNITIVE_INTERFERENCE]: Brain,\n            [ET.MEMORY_FOG]: EyeOff,\n            [ET.SILENCE]: Ban,\n            [ET.STURDY]: Shield,\n            [ET.SHOCK]: Zap,\n            [ET.FLAME_ATTACH]: Flame,\n            [ET.POISON_ATTACH]: Bug,\n            [ET.TOXIN_SPREAD]: Bug,\n            [ET.AMBUSH]: Link2,\n            [ET.FROST_ATTACH]: Snowflake,\n            [ET.BLOODBLADE_ATTACH]: Droplet,\n            [ET.LIGHTNING_ATTACH]: Zap,\n            [ET.THORNS]: Leaf,\n        };\n        const getEffectIconComponent = (type) => {\n            return EFFECT_ICON_COMPONENTS[type] ?? Sparkles;\n        };\n        const effectIconBoxClass = (polarity) => {\n            switch (polarity) {\n                case 'buff': return 'bg-emerald-900/65 border-emerald-400/50 text-emerald-200';\n                case 'debuff': return 'bg-red-900/65 border-red-400/55 text-red-200';\n                case 'trait': return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n                case 'mixed': return 'bg-indigo-900/70 border-indigo-400/55 text-indigo-200';\n                case 'special': return 'bg-amber-900/70 border-amber-400/55 text-amber-200';\n                default: return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n            }\n        };\n        // --- Armor computed ---\n        const playerArmor = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyArmor = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmount = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const enemyPoisonAmount = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmountPercent = computed(() => {\n            if (playerStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((playerPoisonAmount.value / playerStats.value.maxHp) * 100, 100));\n        });\n        const enemyPoisonAmountPercent = computed(() => {\n            if (enemyStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((enemyPoisonAmount.value / enemyStats.value.maxHp) * 100, 100));\n        });\n        const playerVisibleEffects = computed(() => playerStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const enemyVisibleEffects = computed(() => enemyStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const cloneCardForBattle = (card) => ({\n            ...card,\n            calculation: { ...card.calculation },\n            damageLogic: { ...card.damageLogic },\n            traits: { ...card.traits },\n            selfDamage: typeof card.selfDamage === 'object' && card.selfDamage !== null\n                ? { ...card.selfDamage }\n                : card.selfDamage,\n            cardEffects: card.cardEffects.map((ce) => ({\n                ...ce,\n                triggers: ce.triggers ? [...ce.triggers] : undefined,\n                restrictedTypes: ce.restrictedTypes ? [...ce.restrictedTypes] : undefined,\n                cleanseTypes: ce.cleanseTypes ? [...ce.cleanseTypes] : undefined,\n            })),\n        });\n        const toBattleDeck = (cards) => cards.map(cloneCardForBattle);\n        const enemyDeck = enemyDef ? toBattleDeck(enemyDef.deck) : [];\n        // dummy card to prevent crash if enemy has no cards\n        const PASS_CARD = {\n            id: 'pass', name: '', type: CardType.FUNCTION, category: '', rarity: '', manaCost: 0,\n            calculation: { multiplier: 0, addition: 0 }, damageLogic: { mode: 'fixed', value: 0 },\n            traits: { combo: false, reroll: 'none', draw: false }, cardEffects: [], description: '',\n        };\n        const combatState = ref({\n            turn: 1,\n            phase: CombatPhase.TURN_START,\n            actionsRemaining: 1,\n            playerBaseDice: 1,\n            enemyBaseDice: 1,\n            playerHand: [],\n            playerDeck: toBattleDeck(props.playerDeck).sort(() => Math.random() - 0.5),\n            discardPile: [],\n            enemyDeck: [...enemyDeck],\n            enemyDiscard: [],\n            enemyIntentCard: null,\n            enemyPredictedPoint: 0,\n            playerSelectedCard: null,\n            lastPlayedCard: null,\n            logs: [` <span class=\"text-red-500 font-bold\">${enemyDisplayName}</span>`],\n        });\n        // //\n        const playerTurnRawDice = ref(1);\n        const enemyTurnRawDice = ref(1);\n        const isRolling = ref(false);\n        const showClashAnimation = ref(false);\n        const shatteringTarget = ref(null);\n        const screenShake = ref(false);\n        const impactShake = ref(false);\n        const overlayOpen = ref(null);\n        const settingsOpen = ref(false);\n        const battleSpeedUp = ref(false);\n        const logsCollapsed = ref(true);\n        const battleResultBanner = ref(null);\n        const endCombatPending = ref(false);\n        const enemyIntentConsumedThisTurn = ref(false);\n        const enemyIntentManaSpentThisTurn = ref(false);\n        const combatRootEl = ref(null);\n        const effectTooltip = ref(null);\n        const speedMultiplier = computed(() => (battleSpeedUp.value ? 2 : 1));\n        const combatRootStyle = computed(() => ({ '--combat-speed-multiplier': String(speedMultiplier.value) }));\n        const floatingNumbers = ref([]);\n        const pendingCardNegativeEffects = ref([]);\n        const fatigueDegree = ref(0);\n        const fatigueHelpVisible = ref(false);\n        const fatigueDegreeRatio = computed(() => (Math.max(0, Math.min(fatigueDegree.value / FATIGUE_DEGREE_MAX, 1))));\n        const fatigueDegreePercent = computed(() => fatigueDegreeRatio.value * 100);\n        const fatigueBarOpacityRatio = computed(() => {\n            if (fatigueDegree.value <= 50)\n                return 0;\n            return Math.max(0, Math.min((fatigueDegree.value - 50) / (FATIGUE_DEGREE_MAX - 50), 1));\n        });\n        const fatigueBarStyle = computed(() => ({ opacity: String(fatigueBarOpacityRatio.value) }));\n        const showFatigueHelp = () => {\n            fatigueHelpVisible.value = fatigueDegree.value > 50;\n        };\n        const hideFatigueHelp = () => {\n            fatigueHelpVisible.value = false;\n        };\n        const lightningAmbushFirstUseConsumed = ref({\n            player: false,\n            enemy: false,\n        });\n        const previewPlayerDice = ref(null);\n        const previewEnemyDice = ref(null);\n        const playerDiceUiNoise = ref(0);\n        const enemyDiceUiNoise = ref(0);\n        const comboUiMaskBridge = ref(false);\n        const isUiMaskingActive = computed(() => (combatState.value.phase === CombatPhase.PLAYER_INPUT || comboUiMaskBridge.value));\n        const isPlayerDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.BLIND_ASH) > 0));\n        const isEnemyDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.PEEP_FORBIDDEN) > 0));\n        const rerollUiNoise = () => Math.floor(Math.random() * 3) - 1;\n        const displayPlayerDice = computed(() => {\n            const base = previewPlayerDice.value ?? combatState.value.playerBaseDice;\n            if (!isPlayerDiceObscured.value)\n                return base;\n            return Math.max(0, base + playerDiceUiNoise.value);\n        });\n        const displayEnemyDice = computed(() => {\n            const base = previewEnemyDice.value ?? combatState.value.enemyBaseDice;\n            if (!isEnemyDiceObscured.value)\n                return base;\n            return Math.max(0, base + enemyDiceUiNoise.value);\n        });\n        const canPlayerRerollDice = computed(() => (playerDiceRerollCharges.value > 0\n            && combatState.value.phase === CombatPhase.PLAYER_INPUT\n            && !isRolling.value\n            && !showClashAnimation.value\n            && !endCombatPending.value));\n        const playerDiceRerollHint = computed(() => {\n            if (playerDiceRerollCharges.value <= 0)\n                return '';\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return '';\n            if (isRolling.value || showClashAnimation.value)\n                return '';\n            if (endCombatPending.value)\n                return '';\n            return `${playerDiceRerollCharges.value}`;\n        });\n        const playerDicePreviewChanged = computed(() => (previewPlayerDice.value !== null && previewPlayerDice.value !== combatState.value.playerBaseDice));\n        const enemyDicePreviewChanged = computed(() => (previewEnemyDice.value !== null && previewEnemyDice.value !== combatState.value.enemyBaseDice));\n        const playerDiceNumberClass = computed(() => {\n            if (isPlayerDiceObscured.value)\n                return 'text-violet-400';\n            return playerDicePreviewChanged.value ? 'text-red-800' : '';\n        });\n        const enemyDiceNumberClass = computed(() => {\n            if (isEnemyDiceObscured.value)\n                return 'text-violet-400';\n            return enemyDicePreviewChanged.value ? 'text-[#b08a2e]' : '';\n        });\n        const enemyIntentMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.COGNITIVE_INTERFERENCE) > 0\n            ? 'full'\n            : 'none'));\n        const playerHandMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.MEMORY_FOG) > 0\n            ? 'partial'\n            : 'none'));\n        const playerPlayedCardVisual = ref(null);\n        const resolvedPlayerCardVisual = ref(null);\n        const resolvedEnemyCardVisual = ref(null);\n        const resolvedCardVisualEntries = computed(() => ([resolvedPlayerCardVisual.value, resolvedEnemyCardVisual.value]\n            .filter((visual) => !!visual)));\n        let hoverPreviewTimer = null;\n        let enemyDicePreviewTimer = null;\n        let effectTooltipLongPressTimer = null;\n        let effectTooltipAutoHideTimer = null;\n        let floatingNumberId = 0;\n        let handCardKeySeed = 0;\n        let playerPlayedCardVisualId = 0;\n        let resolvedCardVisualId = 0;\n        let animationStopToken = 0;\n        let endCombatSequenceToken = 0;\n        let enemyManaLackHintTurn = -1;\n        const handCardKeys = new WeakMap();\n        const invalidCardShakeKeys = ref(new Set());\n        const normalizePersistedInt = (value) => {\n            const parsed = Number(value);\n            if (!Number.isFinite(parsed))\n                return 0;\n            return Math.max(0, Math.floor(parsed));\n        };\n        const setFatigueDegree = (next) => {\n            const normalized = normalizePersistedInt(next);\n            fatigueDegree.value = normalized;\n            localStorage.setItem(FATIGUE_DEGREE_KEY, String(normalized));\n        };\n        const loadFatigueDegree = () => {\n            const stored = localStorage.getItem(FATIGUE_DEGREE_KEY);\n            setFatigueDegree(normalizePersistedInt(stored ?? 0));\n        };\n        const addFatigueDegree = (delta) => {\n            const amount = Math.max(0, Math.floor(delta));\n            if (amount <= 0)\n                return;\n            setFatigueDegree(fatigueDegree.value + amount);\n        };\n        // Default relic modifiers (no relics yet)\n        const NO_RELIC_MOD = { globalMultiplier: 1, globalAddition: 0 };\n        const activePlayerRelics = resolveRelicMap(props.playerRelics);\n        const playerDiceRerollCharges = ref(0);\n        const relicRuntimeState = reactive({});\n        const getEntityBySide = (side) => (side === 'player' ? playerStats.value : enemyStats.value);\n        const getRelicRuntimeState = (relicId) => {\n            if (!relicRuntimeState[relicId]) {\n                relicRuntimeState[relicId] = {};\n            }\n            return relicRuntimeState[relicId];\n        };\n        const hasActiveRelic = (id) => activePlayerRelics.some((entry) => entry.relic.id === id && entry.count > 0);\n        const getActiveRelicCount = (id) => (activePlayerRelics.find((entry) => entry.relic.id === id)?.count ?? 0);\n        const changeRerollCharges = (side, delta) => {\n            if (side !== 'player')\n                return;\n            playerDiceRerollCharges.value = Math.max(0, playerDiceRerollCharges.value + Math.floor(delta));\n        };\n        const consumeRerollCharge = (side, amount = 1) => {\n            if (side !== 'player')\n                return false;\n            const need = Math.max(1, Math.floor(amount));\n            if (playerDiceRerollCharges.value < need)\n                return false;\n            playerDiceRerollCharges.value -= need;\n            return true;\n        };\n        const getRerollCharges = (side) => {\n            if (side !== 'player')\n                return 0;\n            return playerDiceRerollCharges.value;\n        };\n        const forEachPlayerRelic = (callback) => {\n            for (const entry of activePlayerRelics) {\n                callback(entry, entry.relic, getRelicRuntimeState(entry.relic.id));\n            }\n        };\n        const logRelicMessage = (message) => {\n            log(`<span class=\"text-amber-300 text-[9px]\">[] ${message}</span>`);\n        };\n        const addArmorForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const added = applyEffect(target, ET.ARMOR, value, { source: 'relic' }) ? value : 0;\n            if (added > 0) {\n                pushFloatingNumber(side, added, 'shield', '+');\n            }\n            return added;\n        };\n        const restoreManaForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const before = target.mp;\n            target.mp = Math.max(0, target.mp + value);\n            const delta = target.mp - before;\n            if (delta > 0) {\n                pushFloatingNumber(side, delta, 'mana', '+');\n            }\n            return delta;\n        };\n        const healForSide = (side, amount, options) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return { healed: 0, overflow: 0 };\n            const target = getEntityBySide(side);\n            const before = target.hp;\n            target.hp = Math.max(0, Math.min(target.maxHp, target.hp + value));\n            const healed = target.hp - before;\n            const overflowRaw = Math.max(0, value - healed);\n            if (healed > 0) {\n                pushFloatingNumber(side, healed, 'heal', '+');\n            }\n            if (options?.overflowToArmor && overflowRaw > 0) {\n                addArmorForSide(side, overflowRaw);\n            }\n            return { healed, overflow: overflowRaw };\n        };\n        const shouldAllowStatusEffectWithRelics = (targetSide, effectType, stacks, options) => {\n            let allowed = true;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                if (!allowed)\n                    return;\n                const hook = relic.hooks?.onBeforeApplyEffect;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    self: playerStats.value,\n                    opponent: enemyStats.value,\n                    state,\n                    addLog: logRelicMessage,\n                    hasRelic: hasActiveRelic,\n                    getRelicCount: getActiveRelicCount,\n                    addStatusEffect: (side, targetEffectType, targetStacks, applyOptions) => (applyStatusEffectWithRelics(side, targetEffectType, targetStacks, applyOptions)),\n                    addArmor: addArmorForSide,\n                    restoreMana: restoreManaForSide,\n                    heal: healForSide,\n                    addRerollCharges: changeRerollCharges,\n                    getRerollCharges,\n                    targetSide,\n                    target,\n                    effectType,\n                    stacks,\n                    source: options?.source,\n                    restrictedTypes: options?.restrictedTypes,\n                };\n                const result = hook(ctx);\n                if (result === false) {\n                    allowed = false;\n                }\n            });\n            return allowed;\n        };\n        const applyStatusEffectWithRelics = (side, effectType, stacks, options) => {\n            const value = Math.max(0, Math.floor(stacks));\n            if (value <= 0)\n                return false;\n            if (!shouldAllowStatusEffectWithRelics(side, effectType, value, options))\n                return false;\n            const target = getEntityBySide(side);\n            return applyEffect(target, effectType, value, {\n                restrictedTypes: options?.restrictedTypes,\n                source: options?.source,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            });\n        };\n        const createPlayerLifecycleContext = (relic, count, state) => ({\n            count,\n            side: 'player',\n            self: playerStats.value,\n            opponent: enemyStats.value,\n            state,\n            addLog: logRelicMessage,\n            hasRelic: hasActiveRelic,\n            getRelicCount: getActiveRelicCount,\n            addStatusEffect: (side, effectType, stacks, options) => (applyStatusEffectWithRelics(side, effectType, stacks, {\n                source: options?.source ?? `relic:${relic.id}`,\n                restrictedTypes: options?.restrictedTypes,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            })),\n            addArmor: addArmorForSide,\n            restoreMana: restoreManaForSide,\n            heal: healForSide,\n            addRerollCharges: changeRerollCharges,\n            getRerollCharges,\n        });\n        const triggerPlayerRelicLifecycleHooks = (hookName) => {\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.[hookName];\n                if (!hook)\n                    return;\n                hook(createPlayerLifecycleContext(relic, entry.count, state));\n            });\n        };\n        const triggerPlayerRelicBeforeBurnDamageHooks = (targetSide, burnStacks, damage, turn) => {\n            let currentDamage = Math.max(0, Math.floor(damage));\n            let isTrueDamage = false;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onBeforeBurnDamage;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: currentDamage,\n                    isTrueDamage,\n                };\n                hook(ctx);\n                currentDamage = Math.max(0, Math.floor(ctx.damage));\n                isTrueDamage = !!ctx.isTrueDamage;\n            });\n            return { damage: currentDamage, isTrueDamage };\n        };\n        const triggerPlayerRelicAfterBurnDamageTakenHooks = (targetSide, burnStacks, damage, isTrueDamage, turn) => {\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onAfterBurnDamageTaken;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: Math.max(0, Math.floor(damage)),\n                    isTrueDamage,\n                };\n                hook(ctx);\n            });\n        };\n        const triggerPlayerRelicHitHooks = (sourceSide, targetSide, card, finalPoint, hitIndex, hitCount, attemptedDamage, actualDamage) => {\n            const source = getEntityBySide(sourceSide);\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    sourceSide,\n                    targetSide,\n                    source,\n                    target,\n                    card,\n                    finalPoint,\n                    hitIndex,\n                    hitCount,\n                    attemptedDamage: Math.max(0, Math.floor(attemptedDamage)),\n                    actualDamage: Math.max(0, Math.floor(actualDamage)),\n                };\n                relic.hooks?.onAfterHitDealt?.(ctx);\n                relic.hooks?.onAfterHitTaken?.(ctx);\n            });\n        };\n        // --- Helpers ---\n        const scaleDuration = (ms) => Math.max(60, Math.floor(ms / speedMultiplier.value));\n        const wait = (ms) => new Promise((resolve) => setTimeout(resolve, scaleDuration(ms)));\n        const transitionStyle = (ms) => ({ transitionDuration: `${scaleDuration(ms)}ms` });\n        const withTransition = (style, ms) => ({\n            ...style,\n            transitionDuration: `${scaleDuration(ms)}ms`,\n        });\n        const playerPlayedCardStyle = computed(() => {\n            const visual = playerPlayedCardVisual.value;\n            const entered = !!visual?.entered;\n            return {\n                left: entered ? '29%' : '50%',\n                top: entered ? '23%' : '84%',\n                transform: `translate(-50%, -50%) scale(${entered ? 1 : 0.96})`,\n                opacity: entered ? '1' : '0',\n                transitionProperty: 'left, top, transform, opacity',\n                transitionDuration: `${scaleDuration(540)}ms`,\n                transitionTimingFunction: 'cubic-bezier(0.22, 0.9, 0.2, 1)',\n            };\n        });\n        const resolvedCardVisualInnerClass = (visual) => {\n            const sideClass = visual.source === 'player'\n                ? 'resolved-card-visual-inner--player'\n                : 'resolved-card-visual-inner--enemy';\n            const variantClass = visual.variant === 'attack'\n                ? 'resolved-card-visual-inner--attack'\n                : (visual.variant === 'self'\n                    ? 'resolved-card-visual-inner--self'\n                    : 'resolved-card-visual-inner--fade');\n            return `${sideClass} ${variantClass}`;\n        };\n        const showEnemyIntentCard = computed(() => {\n            if (!combatState.value.enemyIntentCard)\n                return false;\n            if (enemyIntentConsumedThisTurn.value)\n                return false;\n            return !resolvedEnemyCardVisual.value;\n        });\n        const floatingColors = {\n            physical: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            magic: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            shield: 'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',\n            heal: 'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',\n            mana: 'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',\n            true: 'text-zinc-500 drop-shadow-[0_0_8px_rgba(39,39,42,0.9)]',\n        };\n        const floatingNumbersFor = (side) => floatingNumbers.value.filter((entry) => entry.side === side);\n        const handCardKey = (card) => {\n            let key = handCardKeys.get(card);\n            if (!key) {\n                handCardKeySeed += 1;\n                key = `hand-${handCardKeySeed}`;\n                handCardKeys.set(card, key);\n            }\n            return key;\n        };\n        const isCardShaking = (card) => invalidCardShakeKeys.value.has(handCardKey(card));\n        const triggerInvalidCardShake = (card) => {\n            const key = handCardKey(card);\n            const withoutKey = new Set(invalidCardShakeKeys.value);\n            withoutKey.delete(key);\n            invalidCardShakeKeys.value = withoutKey;\n            requestAnimationFrame(() => {\n                const next = new Set(invalidCardShakeKeys.value);\n                next.add(key);\n                invalidCardShakeKeys.value = next;\n                setTimeout(() => {\n                    const removed = new Set(invalidCardShakeKeys.value);\n                    removed.delete(key);\n                    invalidCardShakeKeys.value = removed;\n                }, scaleDuration(360));\n            });\n        };\n        const resolveTargetSide = (source, target) => {\n            if (target === 'self')\n                return source;\n            return source === 'player' ? 'enemy' : 'player';\n        };\n        const removeCardsById = (cards, cardId) => (cards.filter((card) => card.id !== cardId));\n        const removeSingleCardById = (cards, cardId) => {\n            let removed = false;\n            return cards.filter((card) => {\n                if (!removed && card.id === cardId) {\n                    removed = true;\n                    return false;\n                }\n                return true;\n            });\n        };\n        const insertCardIntoDeckRandomly = (deck, card) => {\n            const index = Math.floor(Math.random() * (deck.length + 1));\n            return [...deck.slice(0, index), card, ...deck.slice(index)];\n        };\n        const applyPurgeTraitAfterUse = (source, card) => {\n            if (!card.traits.purgeOnUse)\n                return;\n            if (source === 'player') {\n                combatState.value.discardPile = removeSingleCardById(combatState.value.discardPile, card.id);\n            }\n            else {\n                combatState.value.enemyDeck = removeSingleCardById(combatState.value.enemyDeck, card.id);\n                combatState.value.enemyDiscard = removeSingleCardById(combatState.value.enemyDiscard, card.id);\n            }\n            log(`<span class=\"text-zinc-300\">${card.name}</span>`);\n        };\n        const applyInsertTrait = (source, card) => {\n            const toInsert = card.traits.insertCardsToEnemyDeck ?? [];\n            if (toInsert.length <= 0)\n                return;\n            const sourceLabel = source === 'player' ? '' : '';\n            const targetSide = source === 'player' ? 'enemy' : 'player';\n            for (const cardName of toInsert) {\n                const inserted = getCardByName(cardName);\n                if (!inserted)\n                    continue;\n                const battleCard = cloneCardForBattle(inserted);\n                if (targetSide === 'player') {\n                    combatState.value.playerDeck = insertCardIntoDeckRandomly(combatState.value.playerDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.playerDeck.length} / ${combatState.value.discardPile.length}</span>`);\n                }\n                else {\n                    combatState.value.enemyDeck = insertCardIntoDeckRandomly(combatState.value.enemyDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.enemyDeck.length} / ${combatState.value.enemyDiscard.length}</span>`);\n                }\n            }\n        };\n        const destroyOpponentCardByTrait = (winnerSide, loserCard) => {\n            if (loserCard.id === PASS_CARD.id)\n                return;\n            if (winnerSide === 'player') {\n                combatState.value.enemyDeck = removeCardsById(combatState.value.enemyDeck, loserCard.id);\n                combatState.value.enemyDiscard = removeCardsById(combatState.value.enemyDiscard, loserCard.id);\n            }\n            else {\n                combatState.value.playerDeck = removeCardsById(combatState.value.playerDeck, loserCard.id);\n                combatState.value.playerHand = removeCardsById(combatState.value.playerHand, loserCard.id);\n                combatState.value.discardPile = removeCardsById(combatState.value.discardPile, loserCard.id);\n                if (combatState.value.playerSelectedCard?.id === loserCard.id) {\n                    combatState.value.playerSelectedCard = null;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${loserCard.name}</span>`);\n        };\n        const applyShockOnManaLoss = (side, lostMp, reason) => {\n            const loss = Math.max(0, Math.floor(lostMp));\n            if (loss <= 0)\n                return;\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const label = side === 'player' ? '' : '';\n            const shockStacks = getEffectStacks(target, ET.SHOCK);\n            if (shockStacks <= 0)\n                return;\n            const { actualDamage, logs: shockDamageLogs } = applyDamageToEntity(target, shockStacks, false);\n            if (actualDamage > 0) {\n                pushFloatingNumber(side, actualDamage, 'magic', '-');\n            }\n            const nextStacks = Math.max(0, shockStacks - 1);\n            if (nextStacks <= 0) {\n                removeEffect(target, ET.SHOCK);\n            }\n            else {\n                const shockEffect = target.effects.find((effect) => effect.type === ET.SHOCK);\n                if (shockEffect) {\n                    shockEffect.stacks = nextStacks;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${label}${reason} ${actualDamage}  ${shockStacks}${nextStacks}</span>`);\n            for (const dl of shockDamageLogs) {\n                const normalized = dl.startsWith('') ? `${label}${dl}` : dl;\n                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n            }\n        };\n        const changeManaWithShock = (side, delta, reason, options) => {\n            const value = Math.floor(delta);\n            if (value === 0)\n                return { ok: true, actualDelta: 0 };\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const before = target.mp;\n            if (value < 0 && options?.requireEnoughForDecrease && before < -value) {\n                return { ok: false, actualDelta: 0 };\n            }\n            target.mp = Math.max(0, before + value);\n            const actualDelta = target.mp - before;\n            if (actualDelta > 0 && options?.showPositiveFloating !== false) {\n                pushFloatingNumber(side, actualDelta, 'mana', '+');\n            }\n            if (actualDelta < 0) {\n                applyShockOnManaLoss(side, -actualDelta, reason);\n            }\n            return { ok: true, actualDelta };\n        };\n        const spendManaWithShock = (side, amount, reason) => {\n            const cost = Math.max(0, Math.floor(amount));\n            if (cost <= 0)\n                return true;\n            return changeManaWithShock(side, -cost, reason, { requireEnoughForDecrease: true }).ok;\n        };\n        const resolveCardSelfDamage = (card) => {\n            const raw = card.selfDamage;\n            if (raw === undefined || raw === null)\n                return null;\n            if (typeof raw === 'number') {\n                const amount = Math.max(0, Math.floor(raw));\n                if (amount <= 0)\n                    return null;\n                return { value: amount, mode: 'fixed', target: 'hp' };\n            }\n            const mode = raw.mode ?? 'fixed';\n            const target = raw.target ?? 'hp';\n            const baseAmount = Number.isFinite(raw.value) ? raw.value : 0;\n            if (baseAmount <= 0)\n                return null;\n            if (mode === 'percent') {\n                return { value: baseAmount, mode: 'percent', target };\n            }\n            return { value: Math.max(0, Math.floor(baseAmount)), mode: 'fixed', target };\n        };\n        const applyBloodbladeAttachOnClash = (sourceSide, targetSide) => {\n            const sourceStats = sourceSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.BLOODBLADE_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.BLEED, stacks, { source: 'effect:bloodblade_attach' });\n            const sourceLabel = sourceSide === 'player' ? '' : '';\n            log(`<span class=\"text-rose-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const applyLightningAttachOnDodge = (dodgerSide, targetSide) => {\n            const sourceStats = dodgerSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.LIGHTNING_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.SHOCK, stacks, { source: 'effect:lightning_attach' });\n            const sourceLabel = dodgerSide === 'player' ? '' : '';\n            log(`<span class=\"text-indigo-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const cardEffectMatchesTrigger = (effectTrigger, trigger) => {\n            if (!effectTrigger || effectTrigger.length === 0)\n                return trigger === 'on_use';\n            return effectTrigger.includes(trigger);\n        };\n        const applyCardEffectsByTrigger = (source, card, finalPoint, trigger = 'on_use') => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            const label = source === 'player' ? '' : '';\n            let hasEffect = false;\n            for (const ce of card.cardEffects) {\n                if (!cardEffectMatchesTrigger(ce.triggers, trigger))\n                    continue;\n                const targetKey = ce.target ?? 'self';\n                const targetEntity = targetKey === 'self' ? attacker : defender;\n                const targetSide = resolveTargetSide(source, targetKey);\n                if (ce.kind === 'heal') {\n                    const healAmount = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : Math.floor(ce.fixedValue ?? 0);\n                    const beforeHp = targetEntity.hp;\n                    targetEntity.hp = Math.min(targetEntity.maxHp, targetEntity.hp + healAmount);\n                    const actualHeal = targetEntity.hp - beforeHp;\n                    if (actualHeal > 0) {\n                        pushFloatingNumber(targetSide, actualHeal, 'heal', '+');\n                    }\n                    log(`<span class=\"text-green-400\">${label}${card.name} ${healAmount} </span>`);\n                    hasEffect = true;\n                }\n                else if (ce.kind === 'apply_buff') {\n                    const beforeMaxHp = targetEntity.maxHp;\n                    const beforeHp = targetEntity.hp;\n                    const stacks = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : ce.valueMode === 'max_hp_percent'\n                            ? Math.floor(targetEntity.maxHp * (ce.scale ?? 0))\n                            : Math.floor(ce.fixedValue ?? 1);\n                    const applied = applyStatusEffectWithRelics(targetSide, ce.effectType, stacks, {\n                        restrictedTypes: ce.restrictedTypes,\n                        source: card.id,\n                        lockDecayThisTurn: ce.effectType === ET.BIND,\n                    });\n                    if (!applied) {\n                        continue;\n                    }\n                    if (ce.effectType === ET.ARMOR) {\n                        pushFloatingNumber(targetSide, stacks, 'shield', '+');\n                    }\n                    if (ce.effectType === ET.MAX_HP_REDUCTION) {\n                        const actualMaxHpLoss = Math.max(0, beforeMaxHp - targetEntity.maxHp);\n                        const hpLossByCap = Math.max(0, beforeHp - targetEntity.hp);\n                        if (hpLossByCap > 0) {\n                            pushFloatingNumber(targetSide, hpLossByCap, 'true', '-');\n                        }\n                        log(`<span class=\"text-fuchsia-300\">${label}${card.name} -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                    }\n                    else {\n                        log(`<span class=\"text-yellow-400\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[ce.effectType]?.name ?? ce.effectType}</span>`);\n                    }\n                    hasEffect = true;\n                }\n                else if (ce.kind === 'restore_mana') {\n                    const restoreAmount = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : Math.floor(ce.fixedValue ?? 0);\n                    const manaResult = changeManaWithShock(targetSide, restoreAmount, `${label}${card.name}`, { showPositiveFloating: true });\n                    const actualRestore = Math.max(0, manaResult.actualDelta);\n                    if (actualRestore > 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name} ${actualRestore} </span>`);\n                        hasEffect = true;\n                    }\n                    else if (manaResult.actualDelta < 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name} ${Math.abs(manaResult.actualDelta)} </span>`);\n                        hasEffect = true;\n                    }\n                    else if (restoreAmount !== 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name}</span>`);\n                        hasEffect = true;\n                    }\n                }\n                else if (ce.kind === 'cleanse') {\n                    const cleanseTargets = ce.cleanseTypes && ce.cleanseTypes.length > 0\n                        ? ce.cleanseTypes\n                        : targetEntity.effects.map((eff) => eff.type);\n                    for (const et of cleanseTargets) {\n                        removeEffect(targetEntity, et);\n                    }\n                    log(`<span class=\"text-cyan-300\">${label}${card.name}</span>`);\n                    hasEffect = true;\n                }\n            }\n            return hasEffect;\n        };\n        const applyToxinSpreadOnPhysicalPlay = (source, card) => {\n            if (card.id === PASS_CARD.id || card.type !== CardType.PHYSICAL)\n                return;\n            const spreadOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const spreadOwner = spreadOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const spreadStacks = getEffectStacks(spreadOwner, ET.TOXIN_SPREAD);\n            if (spreadStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.POISON, spreadStacks, { source: 'effect:toxin_spread' });\n            const sourceLabel = source === 'player' ? '' : '';\n            const spreadOwnerLabel = spreadOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-emerald-300\">${spreadOwnerLabel}[] ${sourceLabel} ${spreadStacks} </span>`);\n        };\n        const applyAmbushOnCardPlay = (source, card) => {\n            if (card.id === PASS_CARD.id)\n                return;\n            if (card.type !== CardType.PHYSICAL && card.type !== CardType.DODGE)\n                return;\n            const ambushOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const ambushOwner = ambushOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const ambushStacks = getEffectStacks(ambushOwner, ET.AMBUSH);\n            if (ambushStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.BIND, 1, {\n                source: 'effect:ambush',\n                restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n                lockDecayThisTurn: true,\n            });\n            reduceEffectStacks(ambushOwner, ET.AMBUSH, 1);\n            const sourceLabel = source === 'player' ? '' : '';\n            const ambushOwnerLabel = ambushOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-violet-300\">${ambushOwnerLabel}[] ${sourceLabel} 1 </span>`);\n        };\n        const withFirstUseLightningAmbushBonus = (source, card, options) => {\n            if (card.id !== 'enemy_vinewalker_lightning_ambush')\n                return card;\n            if (lightningAmbushFirstUseConsumed.value[source])\n                return card;\n            const shouldConsume = options?.consume ?? true;\n            const shouldAnnounce = options?.announce ?? shouldConsume;\n            if (shouldConsume) {\n                lightningAmbushFirstUseConsumed.value[source] = true;\n            }\n            const boosted = cloneCardForBattle(card);\n            boosted.calculation.addition += 4;\n            if (shouldAnnounce) {\n                const sourceLabel = source === 'player' ? '' : '';\n                log(`<span class=\"text-indigo-300\">${sourceLabel}${card.name} +4</span>`);\n            }\n            return boosted;\n        };\n        let poisonAmountImmediateCheckRunning = false;\n        const applyImmediatePoisonAmountLethalCheck = (side) => {\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            if (target.hp <= 0)\n                return;\n            const poisonAmount = getEffectStacks(target, ET.POISON_AMOUNT);\n            if (poisonAmount <= 0 || poisonAmount < target.hp)\n                return;\n            removeEffect(target, ET.POISON_AMOUNT);\n            const { actualDamage, logs: poisonLogs } = applyDamageToEntity(target, poisonAmount, true);\n            if (actualDamage > 0) {\n                pushFloatingNumber(side, actualDamage, 'true', '-');\n            }\n            const label = side === 'player' ? '' : '';\n            log(`<span class=\"text-zinc-300\">${label}[]  ${actualDamage} </span>`);\n            for (const poisonLog of poisonLogs) {\n                const normalized = poisonLog.startsWith('') ? `${label}${poisonLog}` : poisonLog;\n                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n            }\n        };\n        const rollIntInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const applyFatigueDegreePenaltyOnTurnStart = () => {\n            const current = fatigueDegree.value;\n            if (current < 100)\n                return false;\n            if (current >= 300) {\n                playerStats.value.maxHp = 0;\n                playerStats.value.hp = 0;\n                log('<span class=\"text-red-400\">[]  300</span>');\n                return true;\n            }\n            const fatigueStacks = rollIntInRange(1, 3);\n            applyStatusEffectWithRelics('player', ET.FATIGUE, fatigueStacks, { source: 'system:fatigue_degree' });\n            log(`<span class=\"text-amber-300\">[]  ${fatigueStacks} </span>`);\n            if (current >= 200) {\n                const poisonStacks = rollIntInRange(1, 2);\n                applyStatusEffectWithRelics('player', ET.POISON, poisonStacks, { source: 'system:fatigue_degree' });\n                log(`<span class=\"text-emerald-300\">[]  ${poisonStacks} </span>`);\n            }\n            return false;\n        };\n        const queueCardNegativeEffectForPlayer = (source, card) => {\n            if (source !== 'enemy')\n                return;\n            const negativeEffect = (card.negativeEffect ?? '').trim();\n            if (!negativeEffect)\n                return;\n            pendingCardNegativeEffects.value.push(negativeEffect);\n            log(`<span class=\"text-fuchsia-300\">${negativeEffect}</span>`);\n        };\n        const applyHitAttachEffects = (source, card, attacker, defenderSide) => {\n            const flameStacks = getEffectStacks(attacker, ET.FLAME_ATTACH);\n            if (flameStacks > 0 && (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)) {\n                applyStatusEffectWithRelics(defenderSide, ET.BURN, flameStacks, { source: 'effect:flame_attach' });\n            }\n            const poisonStacks = getEffectStacks(attacker, ET.POISON_ATTACH);\n            if (poisonStacks > 0 && card.type === CardType.MAGIC) {\n                applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: 'effect:poison_attach' });\n            }\n            const totalApplied = flameStacks + (card.type === CardType.MAGIC ? poisonStacks : 0);\n            if (totalApplied > 0) {\n                const label = source === 'player' ? '' : '';\n                log(`<span class=\"text-orange-300\">${label}[] </span>`);\n            }\n        };\n        const consumeChargeOnRoll = (stats, label, rolled) => {\n            let next = rolled;\n            const chargeStacks = getEffectStacks(stats, ET.CHARGE);\n            if (chargeStacks > 0) {\n                removeEffect(stats, ET.CHARGE);\n                next = Math.max(0, Math.floor(next + chargeStacks));\n                log(`<span class=\"text-cyan-300\">${label}[] +${chargeStacks} ${rolled}  ${next}</span>`);\n            }\n            const fatigueStacks = getEffectStacks(stats, ET.FATIGUE);\n            if (fatigueStacks > 0) {\n                removeEffect(stats, ET.FATIGUE);\n                const reduced = Math.max(0, Math.floor(next - fatigueStacks));\n                log(`<span class=\"text-amber-300\">${label}[] -${fatigueStacks} ${next}  ${reduced}</span>`);\n                next = reduced;\n            }\n            return next;\n        };\n        const clearDicePreview = () => {\n            previewPlayerDice.value = null;\n            previewEnemyDice.value = null;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n        };\n        const clearPlayerPlayedCard = () => {\n            playerPlayedCardVisual.value = null;\n        };\n        const clearResolvedCardVisual = () => {\n            resolvedPlayerCardVisual.value = null;\n            resolvedEnemyCardVisual.value = null;\n        };\n        const stopAllCardAnimations = () => {\n            animationStopToken += 1;\n            clearPlayerPlayedCard();\n            clearResolvedCardVisual();\n            impactShake.value = false;\n            showClashAnimation.value = false;\n            shatteringTarget.value = null;\n        };\n        const showPlayerPlayedCard = (card) => {\n            if (endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const id = ++playerPlayedCardVisualId;\n            playerPlayedCardVisual.value = { id, card, entered: false };\n            requestAnimationFrame(() => {\n                if (token !== animationStopToken || endCombatPending.value)\n                    return;\n                if (playerPlayedCardVisual.value?.id === id) {\n                    playerPlayedCardVisual.value.entered = true;\n                }\n            });\n        };\n        const playResolvedCardAnimation = async (source, card) => {\n            if (card.id === PASS_CARD.id || endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const variant = (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)\n                ? 'attack'\n                : (card.type === CardType.DODGE ? 'fade' : 'self');\n            const id = ++resolvedCardVisualId;\n            const slot = source === 'player' ? resolvedPlayerCardVisual : resolvedEnemyCardVisual;\n            slot.value = { id, source, card, variant };\n            if (variant === 'attack') {\n                const impactDelay = scaleDuration(720);\n                setTimeout(() => {\n                    if (token !== animationStopToken || endCombatPending.value)\n                        return;\n                    impactShake.value = true;\n                    setTimeout(() => {\n                        if (token !== animationStopToken)\n                            return;\n                        impactShake.value = false;\n                    }, scaleDuration(220));\n                }, impactDelay);\n            }\n            const animDuration = variant === 'attack' ? 930 : 570;\n            await wait(animDuration);\n            if (token !== animationStopToken || endCombatPending.value)\n                return;\n            if (slot.value?.id === id) {\n                slot.value = null;\n            }\n        };\n        const getCardFinalPoint = (source, card, baseDice, isPreview = false) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            // 2+1\n            if (card.id === 'burn_inferno_judgement') {\n                finalPoint += Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n            }\n            if (source === 'player') {\n                forEachPlayerRelic((entry, relic, state) => {\n                    const hook = relic.hooks?.modifyFinalPoint;\n                    if (!hook)\n                        return;\n                    const ctx = {\n                        count: entry.count,\n                        side: 'player',\n                        card,\n                        baseDice,\n                        currentPoint: finalPoint,\n                        self: attacker,\n                        opponent: defender,\n                        state,\n                        isPreview,\n                        addLog: logRelicMessage,\n                        hasRelic: hasActiveRelic,\n                        getRelicCount: getActiveRelicCount,\n                    };\n                    finalPoint = hook(ctx);\n                });\n            }\n            return Math.max(0, Math.floor(finalPoint));\n        };\n        const getCardPreviewPoint = (source, card, baseDice) => {\n            return getCardFinalPoint(source, card, baseDice, true);\n        };\n        const handlePlayerCardHoverStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n        };\n        const handlePlayerCardHoverEnd = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = null;\n        };\n        const handlePlayerCardTouchStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (hoverPreviewTimer)\n                clearTimeout(hoverPreviewTimer);\n            hoverPreviewTimer = setTimeout(() => {\n                if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                    return;\n                previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n            }, 260);\n        };\n        const handlePlayerCardTouchEnd = () => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = null;\n        };\n        const rollDiceInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const handlePlayerDiceClick = () => {\n            if (!canPlayerRerollDice.value)\n                return;\n            const chargesBeforeHooks = getRerollCharges('player');\n            let rerolled = null;\n            forEachPlayerRelic((entry, relic, state) => {\n                if (rerolled !== null)\n                    return;\n                const hook = relic.hooks?.onDiceClick;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    currentDice: combatState.value.playerBaseDice,\n                    minDice: playerStats.value.minDice,\n                    maxDice: playerStats.value.maxDice,\n                    state,\n                    roll: rollDiceInRange,\n                    consumeRerollCharge,\n                    getRerollCharges,\n                    addLog: logRelicMessage,\n                };\n                rerolled = hook(ctx);\n            });\n            if (rerolled === null) {\n                if (getRerollCharges('player') < chargesBeforeHooks)\n                    return;\n                if (!consumeRerollCharge('player', 1))\n                    return;\n                rerolled = rollDiceInRange(playerStats.value.minDice, playerStats.value.maxDice);\n                log(`<span class=\"text-amber-300\">[] 1 ${getRerollCharges('player')} </span>`);\n            }\n            const before = combatState.value.playerBaseDice;\n            const after = consumeChargeOnRoll(playerStats.value, '', Math.max(0, Math.floor(rerolled)));\n            combatState.value.playerBaseDice = after;\n            previewPlayerDice.value = null;\n            log(`<span class=\"text-amber-200\">${before}  ${after}</span>`);\n        };\n        const canPreviewEnemyDice = () => {\n            return (combatState.value.phase === CombatPhase.PLAYER_INPUT &&\n                !isRolling.value &&\n                !showClashAnimation.value &&\n                !!combatState.value.enemyIntentCard);\n        };\n        const getEnemyIntentFinalPoint = () => {\n            const card = combatState.value.enemyIntentCard;\n            if (!card)\n                return null;\n            const previewCard = withFirstUseLightningAmbushBonus('enemy', card, {\n                consume: false,\n                announce: false,\n            });\n            return getCardPreviewPoint('enemy', previewCard, combatState.value.enemyBaseDice);\n        };\n        const showEnemyDicePreview = () => {\n            if (!canPreviewEnemyDice())\n                return;\n            const preview = getEnemyIntentFinalPoint();\n            if (preview === null)\n                return;\n            previewEnemyDice.value = preview;\n        };\n        const hideEnemyDicePreview = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (showClashAnimation.value)\n                return;\n            previewEnemyDice.value = null;\n        };\n        const handleEnemyDiceHoverStart = () => {\n            showEnemyDicePreview();\n        };\n        const handleEnemyDiceHoverEnd = () => {\n            hideEnemyDicePreview();\n        };\n        const handleEnemyDiceTouchStart = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            enemyDicePreviewTimer = setTimeout(() => {\n                showEnemyDicePreview();\n            }, 260);\n        };\n        const handleEnemyDiceTouchEnd = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            hideEnemyDicePreview();\n        };\n        const clearEffectTooltipTimers = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n            if (effectTooltipAutoHideTimer) {\n                clearTimeout(effectTooltipAutoHideTimer);\n                effectTooltipAutoHideTimer = null;\n            }\n        };\n        const showEffectTooltipForTarget = (target, effect, align = 'center') => {\n            const rootRect = combatRootEl.value?.getBoundingClientRect();\n            if (!rootRect)\n                return;\n            const rect = target.getBoundingClientRect();\n            const top = Math.max(8, rect.top - rootRect.top - 8);\n            const tooltipMaxWidth = 256;\n            const x = align === 'right'\n                ? Math.max(8, Math.min(rect.right - rootRect.left + 10, rootRect.width - tooltipMaxWidth - 8))\n                : Math.max(100, Math.min(rect.left + rect.width / 2 - rootRect.left, rootRect.width - 100));\n            effectTooltip.value = {\n                x,\n                y: top,\n                name: getEffectName(effect.type),\n                description: getEffectDescription(effect.type),\n                stacks: effect.stacks,\n                align,\n            };\n        };\n        const showEffectTooltip = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            showEffectTooltipForTarget(target, effect, align);\n        };\n        const hideEffectTooltip = () => {\n            clearEffectTooltipTimers();\n            effectTooltip.value = null;\n        };\n        const handleEffectTouchStart = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            effectTooltipLongPressTimer = setTimeout(() => {\n                showEffectTooltipForTarget(target, effect, align);\n                effectTooltipAutoHideTimer = setTimeout(() => {\n                    effectTooltip.value = null;\n                    effectTooltipAutoHideTimer = null;\n                }, scaleDuration(1800));\n            }, scaleDuration(320));\n        };\n        const handleEffectTouchEnd = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n        };\n        const pushFloatingNumber = (side, value, kind, sign = '+') => {\n            const amount = Math.max(0, Math.floor(value));\n            if (amount <= 0)\n                return;\n            const id = ++floatingNumberId;\n            const duration = kind === 'heal' ? scaleDuration(1800) : scaleDuration(1350);\n            floatingNumbers.value.push({\n                id,\n                side,\n                kind,\n                text: `${sign}${amount}`,\n                colorClass: floatingColors[kind],\n                leftOffset: Math.floor((Math.random() - 0.5) * 120),\n                topOffset: 24 + Math.floor(Math.random() * 20),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const pushFloatingText = (side, text, colorClass = 'text-sky-300', duration = scaleDuration(1050)) => {\n            const id = ++floatingNumberId;\n            floatingNumbers.value.push({\n                id,\n                side,\n                text,\n                colorClass,\n                leftOffset: Math.floor((Math.random() - 0.5) * 90),\n                topOffset: 18 + Math.floor(Math.random() * 18),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const notifyEnemyManaInsufficient = () => {\n            if (enemyManaLackHintTurn === combatState.value.turn)\n                return;\n            enemyManaLackHintTurn = combatState.value.turn;\n            pushFloatingText('enemy', '', 'text-blue-300');\n            log('<span class=\"text-blue-300\"></span>');\n        };\n        const log = (msg) => {\n            combatState.value.logs = [msg, ...combatState.value.logs].slice(0, 240);\n        };\n        if (activePlayerRelics.length > 0) {\n            const relicSummary = activePlayerRelics\n                .map((entry) => (entry.count > 1 ? `${entry.relic.name}x${entry.count}` : entry.relic.name))\n                .join('');\n            log(`<span class=\"text-amber-300\">${relicSummary}</span>`);\n        }\n        triggerPlayerRelicLifecycleHooks('onBattleStart');\n        onMounted(() => {\n            battleSpeedUp.value = localStorage.getItem(SPEED_SETTING_KEY) === '1';\n            loadFatigueDegree();\n            addFatigueDegree(10);\n            void initPortraitUrls();\n        });\n        onUnmounted(() => {\n            portraitLoaderDisposed = true;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            clearEffectTooltipTimers();\n        });\n        watch(battleSpeedUp, (enabled) => {\n            localStorage.setItem(SPEED_SETTING_KEY, enabled ? '1' : '0');\n        });\n        watch([\n            () => combatState.value.phase,\n            () => combatState.value.turn,\n            () => combatState.value.playerBaseDice,\n            () => combatState.value.enemyBaseDice,\n            isPlayerDiceObscured,\n            isEnemyDiceObscured,\n        ], () => {\n            playerDiceUiNoise.value = isPlayerDiceObscured.value ? rerollUiNoise() : 0;\n            enemyDiceUiNoise.value = isEnemyDiceObscured.value ? rerollUiNoise() : 0;\n        }, { immediate: true });\n        const drawCards = (count, currentDeck, currentDiscard) => {\n            let deck = [...currentDeck];\n            let discard = [...currentDiscard];\n            const drawn = [];\n            for (let i = 0; i < count; i++) {\n                if (deck.length === 0) {\n                    if (discard.length === 0)\n                        break;\n                    deck = [...discard].sort(() => Math.random() - 0.5);\n                    discard = [];\n                    triggerPlayerRelicLifecycleHooks('onDeckShuffle');\n                }\n                const card = deck.pop();\n                if (card)\n                    drawn.push(card);\n            }\n            return { drawn, newDeck: deck, newDiscard: discard };\n        };\n        const handCardClass = (card) => {\n            const selected = combatState.value.playerSelectedCard;\n            const isSelected = selected === card;\n            const isNotSelected = selected && !isSelected;\n            const isActionPhase = combatState.value.phase === CombatPhase.PLAYER_INPUT;\n            return [\n                isSelected ? '-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]' : '',\n                isNotSelected ? 'opacity-30 scale-90 translate-y-8 grayscale' : 'hover:scale-110 hover:-translate-y-4 hover:z-50',\n                !isActionPhase && !isSelected ? 'opacity-50 grayscale cursor-not-allowed' : 'cursor-pointer',\n            ];\n        };\n        // --- Enemy AI Card Selection ---\n        function selectEnemyCard() {\n            // \n            if (getEffectStacks(enemyStats.value, ET.STUN) > 0) {\n                log('<span class=\"text-gray-400\"></span>');\n                return PASS_CARD;\n            }\n            if (combatState.value.enemyDeck.length === 0) {\n                if (combatState.value.enemyDiscard.length === 0)\n                    return PASS_CARD; // Fallback\n                combatState.value.enemyDeck = [...combatState.value.enemyDiscard].sort(() => Math.random() - 0.5);\n                combatState.value.enemyDiscard = [];\n            }\n            let selectedCard;\n            if (enemyDef) {\n                // Use the enemy's custom AI logic\n                const ctx = {\n                    enemyStats: enemyStats.value,\n                    playerStats: playerStats.value,\n                    deck: combatState.value.enemyDeck,\n                    turn: combatState.value.turn,\n                    flags: aiFlags,\n                };\n                selectedCard = enemyDef.selectCard(ctx);\n            }\n            else {\n                // Fallback: random selection (should never happen with proper registry)\n                const idx = Math.floor(Math.random() * combatState.value.enemyDeck.length);\n                selectedCard = combatState.value.enemyDeck[idx];\n            }\n            const check = canPlayCard(enemyStats.value, selectedCard, enemyTurnRawDice.value);\n            if (!check.allowed) {\n                log(`<span class=\"text-gray-400\">${check.reason ?? ''}</span>`);\n                return PASS_CARD;\n            }\n            return selectedCard;\n        }\n        // --- Phase Management ---\n        const startTurn = () => {\n            if (endCombatPending.value)\n                return;\n            log(`<span class=\"text-slate-300\">${combatState.value.turn}</span>`);\n            enemyManaLackHintTurn = -1;\n            clearDicePreview();\n            stopAllCardAnimations();\n            combatState.value.phase = CombatPhase.DRAW_PHASE;\n            combatState.value.playerSelectedCard = null;\n            combatState.value.enemyIntentCard = null;\n            enemyIntentConsumedThisTurn.value = false;\n            enemyIntentManaSpentThisTurn.value = false;\n            isRolling.value = true;\n            shatteringTarget.value = null;\n            showClashAnimation.value = false;\n            triggerPlayerRelicLifecycleHooks('onTurnStart');\n            setTimeout(() => {\n                if (endCombatPending.value)\n                    return;\n                const pRawRoll = Math.floor(Math.random() * (playerStats.value.maxDice - playerStats.value.minDice + 1)) + playerStats.value.minDice;\n                const eRawRoll = Math.floor(Math.random() * (enemyStats.value.maxDice - enemyStats.value.minDice + 1)) + enemyStats.value.minDice;\n                const pRoll = consumeChargeOnRoll(playerStats.value, '', pRawRoll);\n                const eRoll = consumeChargeOnRoll(enemyStats.value, '', eRawRoll);\n                playerTurnRawDice.value = pRawRoll;\n                enemyTurnRawDice.value = eRawRoll;\n                isRolling.value = false;\n                combatState.value.playerBaseDice = pRoll;\n                combatState.value.enemyBaseDice = eRoll;\n                combatState.value.phase = CombatPhase.DRAW_PHASE;\n                log(` [${pRoll}] vs  [${eRoll}]`);\n            }, scaleDuration(1500));\n        };\n        // Watch for INIT phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.TURN_START) {\n                const defeatedByFatigueDegree = applyFatigueDegreePenaltyOnTurnStart();\n                if (defeatedByFatigueDegree) {\n                    return;\n                }\n                // Process turn-start effects (poison, burn, mana spring, etc.)\n                if (combatState.value.turn > 1) {\n                    for (const [side, label, stats] of [['player', '', playerStats], ['enemy', '', enemyStats]]) {\n                        const targetSide = side;\n                        const opponentSide = side === 'player' ? 'enemy' : 'player';\n                        const opponentStats = side === 'player' ? enemyStats : playerStats;\n                        const result = processOnTurnStart(stats.value);\n                        let turnStartLogs = [...result.logs];\n                        let burnDamageTaken = 0;\n                        let shownTrueDamage = 0;\n                        let burnIsTrueDamage = false;\n                        let pendingBurnDamageNonTrue = 0;\n                        let pendingRegenHeal = 0;\n                        const regenLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (regenLog) {\n                            const regenMatch = regenLog.match(/\\s+(\\d+)\\s+/);\n                            pendingRegenHeal = regenMatch ? Math.max(0, Number(regenMatch[1])) : 0;\n                        }\n                        if (combatState.value.turn % 3 === 0) {\n                            const growthBigStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_BIG);\n                            if (growthBigStacks > 0) {\n                                stats.value.maxDice += growthBigStacks;\n                                turnStartLogs.push(`[]  +${growthBigStacks} ${stats.value.maxDice}`);\n                            }\n                            const growthSmallStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_SMALL);\n                            if (growthSmallStacks > 0) {\n                                stats.value.minDice += growthSmallStacks;\n                                if (stats.value.minDice > stats.value.maxDice) {\n                                    stats.value.maxDice = stats.value.minDice;\n                                }\n                                turnStartLogs.push(`[]  +${growthSmallStacks} ${stats.value.minDice}`);\n                            }\n                        }\n                        for (const pending of result.applyToOpponent) {\n                            applyStatusEffectWithRelics(opponentSide, pending.type, pending.stacks, { source: `effect:${pending.type}` });\n                        }\n                        if (result.opponentHpChange !== 0) {\n                            const hpBeforeOpponent = opponentStats.value.hp;\n                            opponentStats.value.hp = Math.max(0, Math.min(opponentStats.value.maxHp, opponentStats.value.hp + result.opponentHpChange));\n                            const actualOpponentHpDelta = opponentStats.value.hp - hpBeforeOpponent;\n                            if (actualOpponentHpDelta > 0) {\n                                pushFloatingNumber(opponentSide, actualOpponentHpDelta, 'heal', '+');\n                            }\n                            else if (actualOpponentHpDelta < 0) {\n                                pushFloatingNumber(opponentSide, Math.abs(actualOpponentHpDelta), 'magic', '-');\n                            }\n                        }\n                        // \n                        const burnLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (burnLog) {\n                            const burnMatch = burnLog.match(/\\s+(\\d+)\\s+/);\n                            const rawBurnDamage = burnMatch ? Number(burnMatch[1]) : 0;\n                            const burnStacks = getEffectStacks(stats.value, ET.BURN);\n                            turnStartLogs = turnStartLogs.filter((entry) => entry !== burnLog);\n                            if (rawBurnDamage > 0) {\n                                const burnResult = triggerPlayerRelicBeforeBurnDamageHooks(targetSide, burnStacks, rawBurnDamage, combatState.value.turn);\n                                result.hpChange += rawBurnDamage; //  processOnTurnStart \n                                if (burnResult.damage > 0) {\n                                    if (burnResult.isTrueDamage) {\n                                        pushFloatingNumber(side, burnResult.damage, 'true', '-');\n                                        burnDamageTaken = burnResult.damage;\n                                        shownTrueDamage += burnResult.damage;\n                                        burnIsTrueDamage = true;\n                                        result.trueDamage += burnResult.damage;\n                                        turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                    }\n                                    else {\n                                        let pendingBurnDamage = burnResult.damage;\n                                        if (getEffectStacks(stats.value, ET.BARRIER) > 0) {\n                                            reduceEffectStacks(stats.value, ET.BARRIER, 1);\n                                            pendingBurnDamage = 0;\n                                            turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                        }\n                                        if (pendingBurnDamage > 0) {\n                                            const armorStacks = getEffectStacks(stats.value, ET.ARMOR);\n                                            if (armorStacks > 0) {\n                                                const absorbed = Math.min(armorStacks, pendingBurnDamage);\n                                                if (absorbed > 0) {\n                                                    reduceEffectStacks(stats.value, ET.ARMOR, absorbed);\n                                                    pendingBurnDamage -= absorbed;\n                                                    turnStartLogs.push(`[]  ${absorbed} `);\n                                                }\n                                            }\n                                        }\n                                        if (pendingBurnDamage > 0) {\n                                            burnDamageTaken = pendingBurnDamage;\n                                            pendingBurnDamageNonTrue = pendingBurnDamage;\n                                            result.hpChange -= pendingBurnDamage;\n                                            pushFloatingNumber(side, pendingBurnDamage, 'magic', '-');\n                                            turnStartLogs.push(`[]  ${pendingBurnDamage} `);\n                                        }\n                                        else {\n                                            turnStartLogs.push('[] ');\n                                        }\n                                    }\n                                }\n                                else {\n                                    turnStartLogs.push('[]  0');\n                                }\n                            }\n                        }\n                        if (pendingBurnDamageNonTrue > 0) {\n                            stats.value.hp = Math.max(0, stats.value.hp - pendingBurnDamageNonTrue);\n                        }\n                        if (pendingRegenHeal > 0) {\n                            const hpBeforeRegen = stats.value.hp;\n                            stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + pendingRegenHeal));\n                            const actualRegen = Math.max(0, stats.value.hp - hpBeforeRegen);\n                            if (actualRegen > 0) {\n                                pushFloatingNumber(side, actualRegen, 'heal', '+');\n                            }\n                        }\n                        const residualHpChange = result.hpChange + pendingBurnDamageNonTrue - pendingRegenHeal;\n                        if (residualHpChange !== 0) {\n                            const hpBeforeResidual = stats.value.hp;\n                            stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + residualHpChange));\n                            const hpDeltaResidual = stats.value.hp - hpBeforeResidual;\n                            if (hpDeltaResidual > 0) {\n                                pushFloatingNumber(side, hpDeltaResidual, 'heal', '+');\n                            }\n                        }\n                        if (result.mpChange !== 0) {\n                            changeManaWithShock(side, result.mpChange, '', { showPositiveFloating: true });\n                        }\n                        if (result.trueDamage > 0) {\n                            stats.value.hp = Math.max(0, stats.value.hp - result.trueDamage);\n                            const pendingTrueDamage = Math.max(0, result.trueDamage - shownTrueDamage);\n                            if (pendingTrueDamage > 0) {\n                                pushFloatingNumber(side, pendingTrueDamage, 'true', '-');\n                            }\n                        }\n                        if (burnDamageTaken > 0) {\n                            triggerPlayerRelicAfterBurnDamageTakenHooks(targetSide, getEffectStacks(stats.value, ET.BURN), burnDamageTaken, burnIsTrueDamage, combatState.value.turn);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(stats.value);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${label}: ${reviveLog}</span>`);\n                        }\n                        for (const l of turnStartLogs) {\n                            log(`<span class=\"text-gray-400 text-[9px]\">${label}: ${l}</span>`);\n                        }\n                    }\n                }\n                setTimeout(() => {\n                    if (endCombatPending.value)\n                        return;\n                    startTurn();\n                }, scaleDuration(1000));\n            }\n        }, { immediate: true });\n        // Watch for DRAW_PHASE\n        watch([() => combatState.value.phase, isRolling], ([phase, rolling]) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.DRAW_PHASE && !rolling) {\n                // Use enemy AI to select card\n                const eCard = selectEnemyCard();\n                const { drawn, newDeck, newDiscard } = drawCards(3, combatState.value.playerDeck, combatState.value.discardPile);\n                combatState.value.enemyIntentCard = eCard;\n                enemyIntentConsumedThisTurn.value = false;\n                enemyIntentManaSpentThisTurn.value = false;\n                combatState.value.playerHand = drawn;\n                combatState.value.playerDeck = newDeck;\n                combatState.value.discardPile = newDiscard;\n                combatState.value.phase = CombatPhase.PLAYER_INPUT;\n            }\n        });\n        // Handle Card Select\n        const handleCardSelect = (card, handIdx) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (handIdx < 0 || handIdx >= combatState.value.playerHand.length)\n                return;\n            if (combatState.value.playerHand[handIdx] !== card)\n                return;\n            const check = canPlayCard(playerStats.value, card, playerTurnRawDice.value);\n            if (!check.allowed) {\n                triggerInvalidCardShake(card);\n                log(`<span class=\"text-red-400\">${check.reason ?? ''}</span>`);\n                return;\n            }\n            if (card.type === CardType.MAGIC) {\n                const canSpend = spendManaWithShock('player', card.manaCost, `${card.name}`);\n                if (!canSpend) {\n                    triggerInvalidCardShake(card);\n                    log('<span class=\"text-red-400\"></span>');\n                    return;\n                }\n            }\n            // \n            const [played] = combatState.value.playerHand.splice(handIdx, 1);\n            if (!played)\n                return;\n            clearDicePreview();\n            showPlayerPlayedCard(played);\n            addFatigueDegree(1);\n            combatState.value.discardPile.push(played);\n            combatState.value.playerSelectedCard = played;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n        };\n        const handleSkipTurn = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (!combatState.value.enemyIntentCard)\n                return;\n            clearDicePreview();\n            clearPlayerPlayedCard();\n            combatState.value.playerSelectedCard = PASS_CARD;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n            log('<span class=\"text-gray-400\"></span>');\n        };\n        // Clashable check\n        const isClashable = (card1, card2) => {\n            const t1 = card1.type;\n            const t2 = card2.type;\n            const bypassDodge = (card1.ignoreDodge && t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                || (card2.ignoreDodge && t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC));\n            if (bypassDodge)\n                return false;\n            if (t1 === CardType.PHYSICAL && t2 === CardType.PHYSICAL)\n                return true;\n            if (t1 === CardType.MAGIC && t2 === CardType.MAGIC)\n                return true;\n            if (t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC))\n                return true;\n            if (t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                return true;\n            return false;\n        };\n        // Resolution\n        const resolveCombat = async (pCard, eCard, pDice, eDice) => {\n            if (endCombatPending.value)\n                return;\n            try {\n                let resolvedPlayerCard = pCard;\n                let resolvedEnemyCard = eCard;\n                if (resolvedEnemyCard.type === CardType.MAGIC\n                    && resolvedEnemyCard.id !== PASS_CARD.id\n                    && !enemyIntentManaSpentThisTurn.value) {\n                    enemyIntentManaSpentThisTurn.value = true;\n                    const canSpend = spendManaWithShock('enemy', resolvedEnemyCard.manaCost, `${resolvedEnemyCard.name}`);\n                    if (!canSpend) {\n                        resolvedEnemyCard = PASS_CARD;\n                        combatState.value.enemyIntentCard = PASS_CARD;\n                        notifyEnemyManaInsufficient();\n                    }\n                }\n                resolvedPlayerCard = withFirstUseLightningAmbushBonus('player', resolvedPlayerCard);\n                resolvedEnemyCard = withFirstUseLightningAmbushBonus('enemy', resolvedEnemyCard);\n                if (resolvedPlayerCard.traits.combo) {\n                    comboUiMaskBridge.value = true;\n                }\n                const shouldClash = isClashable(resolvedPlayerCard, resolvedEnemyCard);\n                const clashBypassedByIgnoreDodge = (resolvedPlayerCard.ignoreDodge\n                    && resolvedEnemyCard.type === CardType.DODGE\n                    && (resolvedPlayerCard.type === CardType.PHYSICAL || resolvedPlayerCard.type === CardType.MAGIC))\n                    || (resolvedEnemyCard.ignoreDodge\n                        && resolvedPlayerCard.type === CardType.DODGE\n                        && (resolvedEnemyCard.type === CardType.PHYSICAL || resolvedEnemyCard.type === CardType.MAGIC));\n                if (!shouldClash && clashBypassedByIgnoreDodge) {\n                    log('<span class=\"text-indigo-300\">[] </span>');\n                }\n                const playerSkippedTurn = resolvedPlayerCard.id === PASS_CARD.id;\n                const enemySkippedTurn = resolvedEnemyCard.id === PASS_CARD.id;\n                let resolvedPlayerDice = pDice;\n                let resolvedEnemyDice = eDice;\n                const rerollByTrait = (source, card) => {\n                    if (card.id === PASS_CARD.id || card.traits.reroll === 'none')\n                        return;\n                    const sourceLabel = source === 'player' ? '' : '';\n                    let target = source;\n                    if (card.traits.reroll === 'enemy') {\n                        target = source === 'player' ? 'enemy' : 'player';\n                    }\n                    const targetLabel = target === 'player' ? '' : '';\n                    const targetStats = target === 'player' ? playerStats.value : enemyStats.value;\n                    const rerolled = rollDiceInRange(targetStats.minDice, targetStats.maxDice);\n                    const before = target === 'player' ? resolvedPlayerDice : resolvedEnemyDice;\n                    if (target === 'player') {\n                        resolvedPlayerDice = rerolled;\n                        combatState.value.playerBaseDice = rerolled;\n                    }\n                    else {\n                        resolvedEnemyDice = rerolled;\n                        combatState.value.enemyBaseDice = rerolled;\n                    }\n                    log(`<span class=\"text-amber-300\">${sourceLabel}${card.name}${targetLabel} ${before}  ${rerolled}</span>`);\n                };\n                rerollByTrait('player', resolvedPlayerCard);\n                rerollByTrait('enemy', resolvedEnemyCard);\n                const pClashPoint = getCardPreviewPoint('player', resolvedPlayerCard, resolvedPlayerDice);\n                const eClashPoint = getCardPreviewPoint('enemy', resolvedEnemyCard, resolvedEnemyDice);\n                const clearBurnForSide = (side, reason) => {\n                    const target = side === 'player' ? playerStats.value : enemyStats.value;\n                    const label = side === 'player' ? '' : '';\n                    const burnStacks = getEffectStacks(target, ET.BURN);\n                    if (burnStacks <= 0)\n                        return;\n                    removeEffect(target, ET.BURN);\n                    log(`<span class=\"text-orange-300\">${reason} ${label}${burnStacks}</span>`);\n                };\n                if (enemySkippedTurn) {\n                    clearBurnForSide('player', '');\n                }\n                if (playerSkippedTurn) {\n                    clearBurnForSide('enemy', '');\n                }\n                applyToxinSpreadOnPhysicalPlay('player', resolvedPlayerCard);\n                applyToxinSpreadOnPhysicalPlay('enemy', resolvedEnemyCard);\n                applyAmbushOnCardPlay('player', resolvedPlayerCard);\n                applyAmbushOnCardPlay('enemy', resolvedEnemyCard);\n                let pSuccess = true;\n                let eSuccess = true;\n                let resultMsg = '';\n                let clashWinner = null;\n                if (shouldClash) {\n                    previewPlayerDice.value = pClashPoint;\n                    previewEnemyDice.value = eClashPoint;\n                    showClashAnimation.value = true;\n                    await wait(600);\n                    screenShake.value = true;\n                    setTimeout(() => (screenShake.value = false), scaleDuration(500));\n                    // \n                    applyBloodbladeAttachOnClash('player', 'enemy');\n                    applyBloodbladeAttachOnClash('enemy', 'player');\n                    let successfulDodger = null;\n                    if (resolvedPlayerCard.type === resolvedEnemyCard.type) {\n                        if (pClashPoint > eClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                        else if (eClashPoint > pClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                        else {\n                            pSuccess = false;\n                            eSuccess = false;\n                            clashWinner = 'tie';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedPlayerCard.type === CardType.DODGE) {\n                        if (eClashPoint > pClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                            successfulDodger = 'player';\n                        }\n                        else {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedEnemyCard.type === CardType.DODGE) {\n                        if (pClashPoint > eClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                            successfulDodger = 'enemy';\n                        }\n                        else {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                    }\n                    if (clashWinner === 'player')\n                        shatteringTarget.value = 'enemy';\n                    else if (clashWinner === 'enemy')\n                        shatteringTarget.value = 'player';\n                    else if (clashWinner === 'tie') {\n                        shatteringTarget.value = 'both';\n                    }\n                    if (resultMsg) {\n                        log(`<span class=\"text-gray-300\">${resultMsg}</span>`);\n                    }\n                    if (clashWinner === 'enemy') {\n                        changeRerollCharges('player', 1);\n                        log('<span class=\"text-amber-300\"> +1</span>');\n                    }\n                    if (clashWinner === 'player') {\n                        clearBurnForSide('player', '');\n                    }\n                    else if (clashWinner === 'enemy') {\n                        clearBurnForSide('enemy', '');\n                    }\n                    if (successfulDodger === 'player') {\n                        applyLightningAttachOnDodge('player', 'enemy');\n                        applyCardEffectsByTrigger('player', resolvedPlayerCard, pClashPoint, 'on_dodge_success');\n                    }\n                    else if (successfulDodger === 'enemy') {\n                        applyLightningAttachOnDodge('enemy', 'player');\n                        applyCardEffectsByTrigger('enemy', resolvedEnemyCard, eClashPoint, 'on_dodge_success');\n                    }\n                    if (clashWinner === 'player' && resolvedPlayerCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('player', resolvedEnemyCard);\n                    }\n                    else if (clashWinner === 'enemy' && resolvedEnemyCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('enemy', resolvedPlayerCard);\n                    }\n                    await wait(650);\n                    showClashAnimation.value = false;\n                    clearDicePreview();\n                }\n                else {\n                    await wait(500);\n                    pSuccess = true;\n                    eSuccess = true;\n                }\n                // \n                if (!pSuccess && resolvedPlayerCard.traits.purgeOnUse && resolvedPlayerCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('player', resolvedPlayerCard);\n                }\n                if (!eSuccess && resolvedEnemyCard.traits.purgeOnUse && resolvedEnemyCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('enemy', resolvedEnemyCard);\n                }\n                // Execution Phase - use algorithms.ts for proper damage calculation\n                const executeCard = async (source, card, baseDice) => {\n                    if (endCombatPending.value)\n                        return;\n                    const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n                    const defender = source === 'player' ? enemyStats.value : playerStats.value;\n                    const label = source === 'player' ? '' : '';\n                    const defenderSide = source === 'player' ? 'enemy' : 'player';\n                    const defenderLabel = defenderSide === 'player' ? '' : '';\n                    const opponentSkippedTurn = source === 'player' ? enemySkippedTurn : playerSkippedTurn;\n                    if (source === 'enemy' && card.id !== PASS_CARD.id) {\n                        enemyIntentConsumedThisTurn.value = true;\n                    }\n                    if (source === 'player') {\n                        clearPlayerPlayedCard();\n                    }\n                    if (card.id !== PASS_CARD.id) {\n                        log(`${label}${card.name}`);\n                    }\n                    await playResolvedCardAnimation(source, card);\n                    if (endCombatPending.value)\n                        return;\n                    // Calculate final point for this card\n                    const finalPoint = getCardFinalPoint(source, card, baseDice);\n                    const applyCardExtraAttributes = () => {\n                        const selfDamage = resolveCardSelfDamage(card);\n                        if (selfDamage) {\n                            const rawAmount = selfDamage.mode === 'percent'\n                                ? Math.floor(attacker.maxHp * (selfDamage.value / 100))\n                                : Math.floor(selfDamage.value);\n                            const amount = Math.max(0, rawAmount);\n                            if (amount > 0) {\n                                if (selfDamage.target === 'maxHp') {\n                                    const beforeMaxHp = attacker.maxHp;\n                                    const beforeHp = attacker.hp;\n                                    attacker.maxHp = Math.max(0, attacker.maxHp - amount);\n                                    if (attacker.hp > attacker.maxHp) {\n                                        attacker.hp = attacker.maxHp;\n                                    }\n                                    const actualMaxHpLoss = Math.max(0, beforeMaxHp - attacker.maxHp);\n                                    const hpLossByCap = Math.max(0, beforeHp - attacker.hp);\n                                    if (hpLossByCap > 0) {\n                                        pushFloatingNumber(source, hpLossByCap, 'true', '-');\n                                    }\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                                }\n                                else {\n                                    const beforeHp = attacker.hp;\n                                    attacker.hp = Math.max(0, attacker.hp - amount);\n                                    const actualSelfDamage = Math.max(0, beforeHp - attacker.hp);\n                                    if (actualSelfDamage > 0) {\n                                        pushFloatingNumber(source, actualSelfDamage, 'true', '-');\n                                    }\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} ${actualSelfDamage} </span>`);\n                                }\n                                const reviveResult = triggerSwarmReviveIfNeeded(attacker);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                        }\n                        const manaDrain = Math.max(0, Math.floor(card.manaDrain ?? 0));\n                        if (manaDrain > 0) {\n                            const drainResult = changeManaWithShock(defenderSide, -manaDrain, `${label}${card.name}`);\n                            const drainedMana = Math.max(0, -drainResult.actualDelta);\n                            const overflowHpDamage = Math.max(0, manaDrain - drainedMana);\n                            if (overflowHpDamage > 0) {\n                                defender.hp = Math.max(0, defender.hp - overflowHpDamage);\n                                pushFloatingNumber(defenderSide, overflowHpDamage, 'true', '-');\n                            }\n                            const gainResult = changeManaWithShock(source, manaDrain, `${label}${card.name}`, { showPositiveFloating: true });\n                            const gainedMana = Math.max(0, gainResult.actualDelta);\n                            log(`<span class=\"text-blue-300\">${label}${card.name} ${drainedMana}  ${gainedMana} ${overflowHpDamage > 0 ? ` ${overflowHpDamage} ` : ''}</span>`);\n                            if (overflowHpDamage > 0) {\n                                const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                        }\n                    };\n                    const finalizeCardExecution = () => {\n                        applyCardExtraAttributes();\n                        queueCardNegativeEffectForPlayer(source, card);\n                        applyInsertTrait(source, card);\n                        applyPurgeTraitAfterUse(source, card);\n                    };\n                    const syncCurrentPointForUi = () => {\n                        if (card.type !== CardType.FUNCTION || card.id === PASS_CARD.id)\n                            return;\n                        const nextPoint = Math.max(0, Math.floor(finalPoint));\n                        if (source === 'player') {\n                            if (combatState.value.playerBaseDice !== nextPoint) {\n                                combatState.value.playerBaseDice = nextPoint;\n                                log(`<span class=\"text-dungeon-gold/80\"> ${nextPoint}</span>`);\n                            }\n                        }\n                        else if (combatState.value.enemyBaseDice !== nextPoint) {\n                            combatState.value.enemyBaseDice = nextPoint;\n                        }\n                    };\n                    const applyCardEffects = (trigger = 'on_use') => (applyCardEffectsByTrigger(source, card, finalPoint, trigger));\n                    if (opponentSkippedTurn) {\n                        applyCardEffects('on_opponent_skip');\n                    }\n                    if (card.id === 'enemy_muxinlan_liquidation') {\n                        const cleanseTargets = [...ELEMENTAL_DEBUFF_TYPES];\n                        let removedStacks = 0;\n                        for (const et of cleanseTargets) {\n                            const stacks = getEffectStacks(defender, et);\n                            if (stacks > 0) {\n                                removedStacks += stacks;\n                                removeEffect(defender, et);\n                            }\n                        }\n                        const trueDamage = removedStacks * 2;\n                        if (trueDamage > 0) {\n                            defender.hp = Math.max(0, defender.hp - trueDamage);\n                            pushFloatingNumber(defenderSide, trueDamage, 'true', '-');\n                            log(`<span class=\"text-zinc-300\">${label}${card.name} ${removedStacks}  ${trueDamage} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_liquid_fire') {\n                        const coldStacks = getEffectStacks(defender, ET.COLD);\n                        if (coldStacks > 0) {\n                            removeEffect(defender, ET.COLD);\n                            applyStatusEffectWithRelics(defenderSide, ET.BURN, coldStacks, { source: card.id });\n                            log(`<span class=\"text-orange-300\">${label}${card.name} ${coldStacks} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_activated_slime') {\n                        const currentElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((et) => ({ type: et, stacks: getEffectStacks(defender, et) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (currentElementals.length > 0) {\n                            const picked = currentElementals[Math.floor(Math.random() * currentElementals.length)];\n                            applyStatusEffectWithRelics(defenderSide, picked.type, picked.stacks, { source: card.id });\n                            log(`<span class=\"text-teal-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_premium_shield') {\n                        const x = Math.max(0, Math.floor(defender.mp));\n                        if (x > 0) {\n                            applyStatusEffectWithRelics(source, ET.STURDY, x, { source: card.id });\n                            attacker.mp += x;\n                            pushFloatingNumber(source, x, 'shield', '+');\n                            pushFloatingNumber(source, x, 'mana', '+');\n                        }\n                        log(`<span class=\"text-cyan-300\">${label}${card.name} ${x}  ${x} </span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_cunning') {\n                        applyStatusEffectWithRelics(defenderSide, ET.PEEP_FORBIDDEN, 1, { source: card.id });\n                        applyStatusEffectWithRelics(defenderSide, ET.COGNITIVE_INTERFERENCE, 1, { source: card.id });\n                        log(`<span class=\"text-violet-300\">${label}${card.name}</span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_internal_manipulation') {\n                        const currentCorrosion = Math.max(0, getEffectStacks(defender, ET.CORROSION));\n                        const addStacks = Math.min(10, currentCorrosion);\n                        if (addStacks > 0) {\n                            applyStatusEffectWithRelics(defenderSide, ET.CORROSION, addStacks, { source: card.id });\n                            log(`<span class=\"text-emerald-300\">${label}${card.name} +${addStacks}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_undead_condense') {\n                        const selfElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((type) => ({ type, stacks: getEffectStacks(attacker, type) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (selfElementals.length > 0) {\n                            const picked = selfElementals[Math.floor(Math.random() * selfElementals.length)];\n                            removeEffect(attacker, picked.type);\n                            log(`<span class=\"text-cyan-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        const healAmount = Math.max(0, Math.floor(finalPoint));\n                        const { healed } = healForSide(source, healAmount);\n                        log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_nymph_giant_projection') {\n                        const hadIllusoryBody = getEffectStacks(attacker, ET.ILLUSORY_BODY) > 0;\n                        if (hadIllusoryBody) {\n                            removeEffect(attacker, ET.ILLUSORY_BODY);\n                        }\n                        attacker.minDice += 2;\n                        attacker.maxDice += 4;\n                        if (attacker.minDice > attacker.maxDice) {\n                            attacker.maxDice = attacker.minDice;\n                        }\n                        syncCurrentPointForUi();\n                        log(`<span class=\"text-violet-300\">${label}${card.name}${hadIllusoryBody ? '' : ''} +2 +4 ${attacker.minDice}~${attacker.maxDice}</span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_mata_fungal_repair') {\n                        const poisonAmount = Math.max(0, getEffectStacks(defender, ET.POISON_AMOUNT));\n                        if (poisonAmount > 0) {\n                            removeEffect(defender, ET.POISON_AMOUNT);\n                            log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonAmount} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const triggerCount = Math.floor(poisonAmount / 2);\n                        if (triggerCount > 0) {\n                            const healAmount = triggerCount * 2;\n                            const { healed } = healForSide(source, healAmount);\n                            const beforeMaxHp = defender.maxHp;\n                            const beforeHp = defender.hp;\n                            applyStatusEffectWithRelics(defenderSide, ET.MAX_HP_REDUCTION, triggerCount, { source: card.id });\n                            const actualMaxHpLoss = Math.max(0, beforeMaxHp - defender.maxHp);\n                            const hpLossByCap = Math.max(0, beforeHp - defender.hp);\n                            if (hpLossByCap > 0) {\n                                pushFloatingNumber(defenderSide, hpLossByCap, 'true', '-');\n                            }\n                            log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${triggerCount}  ${healed}  -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                        }\n                        else if (poisonAmount > 0) {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}2</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.type === CardType.FUNCTION) {\n                        if (card.id === 'burn_char_convert') {\n                            const burned = getEffectStacks(attacker, ET.BURN);\n                            syncCurrentPointForUi();\n                            if (burned > 0) {\n                                removeEffect(attacker, ET.BURN);\n                                attacker.mp += burned;\n                                pushFloatingNumber(source, burned, 'mana', '+');\n                                log(`<span class=\"text-blue-400\">${label}${card.name} ${burned}  ${burned} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                            finalizeCardExecution();\n                            return;\n                        }\n                        // Process card effects (heal, apply_buff, restore_mana, cleanse)\n                        syncCurrentPointForUi();\n                        const hasEffect = applyCardEffects();\n                        if (card.id === 'enemy_rose_nectar_discipline') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                const poisonStacks = Math.max(0, Math.floor(finalPoint));\n                                if (poisonStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: card.id });\n                                    log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonStacks} </span>`);\n                                }\n                            }\n                        }\n                        if (!hasEffect) {\n                            // Fallback for special function cards (e.g. MP recovery)\n                            if (card.id === 'c5') {\n                                attacker.mp += 5;\n                                pushFloatingNumber(source, 5, 'mana', '+');\n                            }\n                        }\n                        finalizeCardExecution();\n                    }\n                    else if (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC) {\n                        const burnStacksOnDefender = getEffectStacks(defender, ET.BURN);\n                        const baseHitCount = Math.max(1, Math.floor(card.hitCount ?? 1));\n                        const extraHitCount = card.id === 'enemy_moth_swarm_burst'\n                            ? Math.max(0, getEffectStacks(attacker, ET.SWARM))\n                            : 0;\n                        const totalHitCount = baseHitCount + extraHitCount;\n                        if (totalHitCount > 1) {\n                            log(`<span class=\"text-violet-300\">${label}${card.name} ${totalHitCount} </span>`);\n                        }\n                        for (let hit = 0; hit < totalHitCount; hit++) {\n                            // Attack card: calculate damage through the full pipeline\n                            let cardForCalculation = card;\n                            const customDamage = card.id === 'burn_scorch_wind'\n                                ? Math.floor(finalPoint * 0.5) + burnStacksOnDefender\n                                : card.id === 'burn_detonation'\n                                    ? Math.floor(burnStacksOnDefender)\n                                    : card.id === 'enemy_rose_wangzhi_whip' && getEffectStacks(defender, ET.BIND) > 0\n                                        ? Math.floor(finalPoint) + 2\n                                        : null;\n                            if (customDamage !== null) {\n                                cardForCalculation = {\n                                    ...card,\n                                    damageLogic: { mode: 'fixed', value: Math.floor(customDamage) },\n                                };\n                            }\n                            const { damage, isTrueDamage, logs: dmgLogs } = calculateFinalDamage({\n                                finalPoint,\n                                card: cardForCalculation,\n                                attackerEffects: attacker.effects,\n                                defenderEffects: defender.effects,\n                                relicModifiers: NO_RELIC_MOD,\n                            });\n                            const { actualDamage, logs: applyLogs } = applyDamageToEntity(defender, damage, isTrueDamage);\n                            const hitPrefix = totalHitCount > 1 ? `${hit + 1}` : '';\n                            const damageLogColorClass = isTrueDamage ? 'text-zinc-500' : 'text-red-400';\n                            log(`${label}${card.name}${hitPrefix}${finalPoint} <span class=\"${damageLogColorClass} font-bold\">${actualDamage}</span> `);\n                            if (actualDamage > 0) {\n                                const damageKind = isTrueDamage\n                                    ? 'true'\n                                    : (card.type === CardType.MAGIC ? 'magic' : 'physical');\n                                pushFloatingNumber(defenderSide, actualDamage, damageKind, '-');\n                            }\n                            if (card.type === CardType.PHYSICAL && !isTrueDamage && actualDamage > 0) {\n                                const thornStacks = getEffectStacks(defender, ET.THORNS);\n                                if (thornStacks > 0) {\n                                    const reflectedDamage = Math.max(0, Math.floor(actualDamage * 0.5));\n                                    if (reflectedDamage > 0) {\n                                        const { actualDamage: actualReflectedDamage, logs: reflectedLogs } = applyDamageToEntity(attacker, reflectedDamage, false);\n                                        if (actualReflectedDamage > 0) {\n                                            pushFloatingNumber(source, actualReflectedDamage, 'physical', '-');\n                                        }\n                                        log(`<span class=\"text-lime-300\">${defenderLabel}[]  ${actualReflectedDamage} ${label}</span>`);\n                                        for (const reflectedLog of reflectedLogs) {\n                                            const normalized = reflectedLog.startsWith('') ? `${label}${reflectedLog}` : reflectedLog;\n                                            log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                                        }\n                                        const reviveResult = triggerSwarmReviveIfNeeded(attacker);\n                                        for (const reviveLog of reviveResult.logs) {\n                                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                        }\n                                    }\n                                }\n                            }\n                            const coldLogs = consumeColdAfterDealingDamage(attacker, actualDamage);\n                            for (const coldLog of coldLogs) {\n                                log(`<span class=\"text-sky-300 text-[9px]\">${label}: ${coldLog}</span>`);\n                            }\n                            for (const dl of dmgLogs) {\n                                if (dl.startsWith(':'))\n                                    continue;\n                                log(`<span class=\"text-gray-500 text-[9px]\">${dl}</span>`);\n                            }\n                            for (const dl of applyLogs) {\n                                const normalized = dl.startsWith('') ? `${defenderLabel}${dl}` : dl;\n                                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                            }\n                            triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, hit + 1, totalHitCount, damage, actualDamage);\n                            applyHitAttachEffects(source, card, attacker, defenderSide);\n                            if (defender.hp <= 0)\n                                break;\n                        }\n                        // \n                        applyCardEffects();\n                        if (card.id === 'enemy_blissbee_aphro_stinger') {\n                            const targetHasVulnerable = getEffectStacks(defender, ET.VULNERABLE) > 0;\n                            if (targetHasVulnerable) {\n                                const poisonStacks = 2;\n                                if (poisonStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: card.id });\n                                }\n                                log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonStacks} </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_blissbee_precise_harvest') {\n                            const targetHasPoison = getEffectStacks(defender, ET.POISON) > 0;\n                            if (targetHasPoison) {\n                                const shockStacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                                if (shockStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.SHOCK, shockStacks, { source: card.id });\n                                }\n                                log(`<span class=\"text-indigo-300\">${label}${card.name} ${shockStacks} </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_rose_life_drain') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                const healAmount = Math.max(0, Math.floor(finalPoint));\n                                const { healed } = healForSide(source, healAmount);\n                                if (healed > 0) {\n                                    log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                                }\n                            }\n                        }\n                        if (card.id === 'enemy_muxinlan_unstable_reagent') {\n                            const stacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                            if (stacks > 0) {\n                                const picked = ELEMENTAL_DEBUFF_TYPES[Math.floor(Math.random() * ELEMENTAL_DEBUFF_TYPES.length)];\n                                applyStatusEffectWithRelics(defenderSide, picked, stacks, { source: card.id });\n                                log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[picked]?.name ?? picked}</span>`);\n                            }\n                        }\n                        finalizeCardExecution();\n                    }\n                    else {\n                        finalizeCardExecution();\n                    }\n                };\n                const queue = [];\n                let deferredEnemyAction = null;\n                if (pSuccess)\n                    queue.push({ source: 'player', card: resolvedPlayerCard, type: resolvedPlayerCard.type, baseDice: resolvedPlayerDice });\n                if (eSuccess) {\n                    const enemyAction = { source: 'enemy', card: resolvedEnemyCard, type: resolvedEnemyCard.type, baseDice: resolvedEnemyDice };\n                    if (resolvedPlayerCard.traits.combo) {\n                        // \n                        deferredEnemyAction = enemyAction;\n                    }\n                    else {\n                        queue.push(enemyAction);\n                    }\n                }\n                const typePriority = (t) => {\n                    if (t === CardType.FUNCTION)\n                        return 3;\n                    if (t === CardType.MAGIC)\n                        return 2;\n                    if (t === CardType.PHYSICAL)\n                        return 1;\n                    return 0;\n                };\n                queue.sort((a, b) => typePriority(b.type) - typePriority(a.type));\n                const shouldRunSimultaneousVisuals = (queue.length === 2\n                    && queue.every((action) => action.type === CardType.DODGE || action.type === CardType.FUNCTION));\n                if (shouldRunSimultaneousVisuals) {\n                    await Promise.all(queue.map((action) => executeCard(action.source, action.card, action.baseDice)));\n                    if (endCombatPending.value)\n                        return;\n                    await wait(630);\n                }\n                else {\n                    for (const action of queue) {\n                        if (endCombatPending.value)\n                            break;\n                        await executeCard(action.source, action.card, action.baseDice);\n                        if (endCombatPending.value)\n                            break;\n                        await wait(630);\n                    }\n                }\n                stopAllCardAnimations();\n                if (endCombatPending.value)\n                    return;\n                //  draw  1 \n                if (resolvedPlayerCard.traits.combo) {\n                    if (resolvedPlayerCard.traits.draw) {\n                        const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                        combatState.value.playerDeck = newDeck;\n                        combatState.value.discardPile = newDiscard;\n                        combatState.value.playerHand = [...combatState.value.playerHand, ...drawn];\n                    }\n                    if (combatState.value.playerHand.length > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        combatState.value.playerSelectedCard = null;\n                        combatState.value.phase = CombatPhase.PLAYER_INPUT;\n                        return;\n                    }\n                    // \n                    if (deferredEnemyAction && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        if (endCombatPending.value)\n                            return;\n                        await executeCard(deferredEnemyAction.source, deferredEnemyAction.card, deferredEnemyAction.baseDice);\n                        if (endCombatPending.value)\n                            return;\n                        await wait(630);\n                    }\n                }\n                if (playerStats.value.hp <= 0 || enemyStats.value.hp <= 0)\n                    return;\n                // End-of-turn effect processing (armor halving, stun clear, etc.)\n                const pEndLogs = processOnTurnEnd(playerStats.value);\n                const eEndLogs = processOnTurnEnd(enemyStats.value);\n                for (const l of [...pEndLogs, ...eEndLogs]) {\n                    log(`<span class=\"text-gray-500 text-[9px]\">${l}</span>`);\n                }\n                triggerPlayerRelicLifecycleHooks('onTurnEnd');\n                // Cleanup\n                combatState.value.discardPile = [...combatState.value.discardPile, ...combatState.value.playerHand];\n                combatState.value.playerHand = [];\n                combatState.value.turn += 1;\n                combatState.value.phase = CombatPhase.TURN_START;\n            }\n            finally {\n                comboUiMaskBridge.value = false;\n            }\n        };\n        // Watch for RESOLUTION phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.RESOLUTION &&\n                combatState.value.playerSelectedCard &&\n                combatState.value.enemyIntentCard &&\n                !showClashAnimation.value) {\n                resolveCombat(combatState.value.playerSelectedCard, combatState.value.enemyIntentCard, combatState.value.playerBaseDice, combatState.value.enemyBaseDice);\n            }\n        });\n        const runEndCombatSequence = async (win) => {\n            const token = ++endCombatSequenceToken;\n            await wait(HP_BAR_ANIMATION_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            await wait(RESULT_DELAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            stopAllCardAnimations();\n            battleResultBanner.value = win ? 'win' : 'lose';\n            combatState.value.phase = win ? CombatPhase.WIN : CombatPhase.LOSE;\n            await wait(RESULT_BANNER_STAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            setFatigueDegree(0);\n            emit('endCombat', win, playerStats.value, [...combatState.value.logs], [...pendingCardNegativeEffects.value]);\n        };\n        // /\n        watch([\n            () => playerStats.value.hp,\n            () => enemyStats.value.hp,\n            () => getEffectStacks(playerStats.value, ET.POISON_AMOUNT),\n            () => getEffectStacks(enemyStats.value, ET.POISON_AMOUNT),\n        ], () => {\n            if (endCombatPending.value || poisonAmountImmediateCheckRunning)\n                return;\n            poisonAmountImmediateCheckRunning = true;\n            try {\n                applyImmediatePoisonAmountLethalCheck('player');\n                applyImmediatePoisonAmountLethalCheck('enemy');\n            }\n            finally {\n                poisonAmountImmediateCheckRunning = false;\n            }\n        });\n        // Win/Lose check\n        watch([() => playerStats.value.hp, () => enemyStats.value.hp], ([pHp, eHp]) => {\n            if (endCombatPending.value)\n                return;\n            let win = null;\n            if (pHp <= 0)\n                win = false;\n            else if (eHp <= 0)\n                win = true;\n            if (win === null)\n                return;\n            endCombatPending.value = true;\n            void runEndCombatSequence(win);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"combatRootEl\",\n                ref: combatRootEl,\n                class: _normalizeClass([\"combat-root w-full h-full bg-[#1a1a22] text-dungeon-paper font-ui relative overflow-hidden select-none\", [_unref(screenShake) ? 'animate-shake' : '', _unref(impactShake) ? 'animate-impact-shake' : '']]),\n                style: _normalizeStyle(_unref(combatRootStyle))\n            }, [\n                _createCommentVNode(\" Background \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Dynamic background image \"),\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Fallback gradient \"),\n                    _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(40,35,50,0.5),_#0e0e14_90%)]\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\" Darken overlay for readability \"),\n                    _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/40\" }, null, -1 /* CACHED */))\n                ]),\n                _cache[48] || (_cache[48] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-20 z-0 mix-blend-overlay bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Top Left: Settings \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (settingsOpen.value = !_unref(settingsOpen)))\n                    }, [\n                        _createVNode(_unref(Settings2), { class: \"size-5\" }),\n                        _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (emit('openDeck')))\n                    }, [\n                        _createVNode(_unref(Scroll), { class: \"size-5\" }),\n                        _cache[28] || (_cache[28] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (emit('openRelics')))\n                    }, [\n                        _createVNode(_unref(Box), { class: \"size-5\" }),\n                        _cache[29] || (_cache[29] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    (_unref(settingsOpen))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => (_isRef(battleSpeedUp) ? (battleSpeedUp).value = $event : null)),\n                                        type: \"checkbox\",\n                                        class: \"accent-dungeon-gold\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(battleSpeedUp)]\n                                    ]),\n                                    _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, \"2x\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"h-8 rounded-lg border border-white/20 bg-[#252030]/80 px-2 text-xs text-dungeon-gold hover:border-dungeon-gold/60 hover:bg-[#352a40] transition-colors\",\n                                    onClick: _cache[4] || (_cache[4] =\n                                        //@ts-ignore\n                                        (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                }, \"  \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" Top Center: Turn Counter \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"text-xs text-white/60 tracking-widest\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(combatState).turn), 1 /* TEXT */),\n                        _createElementVNode(\"div\", {\n                            class: \"mt-1.5 w-44 relative pointer-events-auto\",\n                            style: _normalizeStyle(_unref(fatigueBarStyle)),\n                            onMouseenter: showFatigueHelp,\n                            onMouseleave: hideFatigueHelp\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", {\n                                    class: \"h-full bg-gradient-to-r from-amber-400 via-orange-400 to-red-500 transition-all duration-500\",\n                                    style: _normalizeStyle(withTransition({ width: `${_unref(fatigueDegreePercent)}%` }, 500))\n                                }, null, 4 /* STYLE */)\n                            ]),\n                            (_unref(fatigueHelpVisible) && _unref(fatigueDegree) > 50)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, \" \" + _toDisplayString(_unref(fatigueDegree)) + \"/300 +10 +1100200300 \", 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 36 /* STYLE, NEED_HYDRATION */)\n                    ])\n                ]),\n                _createCommentVNode(\" Battlefield Layer \"),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _createCommentVNode(\" Enemy Position: Top Right \"),\n                    _createElementVNode(\"div\", _hoisted_13, [\n                        _createCommentVNode(\" Enemy Intent Card \"),\n                        (_unref(showEnemyIntentCard) && _unref(combatState).enemyIntentCard)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"absolute -top-5 left-0 text-amber-200/80 text-[10px] px-2 py-0.5 rounded\" }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _createVNode(DungeonCard, {\n                                            card: _unref(combatState).enemyIntentCard,\n                                            \"mask-level\": _unref(enemyIntentMaskLevel),\n                                            \"is-enemy\": \"\",\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\", \"mask-level\"])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 1,\n                                class: \"absolute -left-24 bottom-20 z-20 animate-float pointer-events-auto\",\n                                onMouseenter: handleEnemyDiceHoverStart,\n                                onMouseleave: handleEnemyDiceHoverEnd,\n                                onTouchstartPassive: handleEnemyDiceTouchStart,\n                                onTouchend: handleEnemyDiceTouchEnd,\n                                onTouchcancel: handleEnemyDiceTouchEnd\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayEnemyDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(enemyStats).minDice,\n                                    \"rolling-max\": _unref(enemyStats).maxDice,\n                                    \"number-class\": _unref(enemyDiceNumberClass),\n                                    color: \"red\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(enemyDicePreviewChanged) && !_unref(isEnemyDiceObscured))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                        _createElementVNode(\"span\", _hoisted_18, \" \" + _toDisplayString(_unref(enemyTurnRawDice)), 1 /* TEXT */),\n                                        _cache[33] || (_cache[33] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_19, \" \" + _toDisplayString(_unref(displayEnemyDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _createCommentVNode(\" Placeholder icon (shown when portrait fails to load) \"),\n                                (_unref(enemyPortraitError))\n                                    ? (_openBlock(), _createBlock(_unref(Skull), {\n                                        key: 0,\n                                        class: \"w-48 h-48 text-red-900/20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n                                    }))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Enemy portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(enemyPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"enemy portrait\",\n                                            onError: _cache[5] || (_cache[5] = ($event) => (enemyPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_22)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Enemy Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_23, [\n                            _createElementVNode(\"div\", _hoisted_24, [\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(enemyDisplayName)), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('enemy'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", [popup.colorClass, popup.kind === 'heal' ? 'combat-float-number--heal' : '']]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(enemyArmor) > 0 || _unref(enemyPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                    (_unref(enemyArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[6] || (_cache[6] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[7] || (_cache[7] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[8] || (_cache[8] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[34] || (_cache[34] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(enemyArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_27))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(enemyPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[10] || (_cache[10] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[11] || (_cache[11] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_30, _toDisplayString(_unref(enemyPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_29))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _cache[36] || (_cache[36] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyStats).maxHp > 0 ? (_unref(enemyStats).hp / _unref(enemyStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_33, _toDisplayString(_unref(enemyStats).hp) + \"/\" + _toDisplayString(_unref(enemyStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _cache[37] || (_cache[37] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(enemyStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_unref(enemyStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_37, [\n                                _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(_unref(enemyStats).minDice) + \" ~ \" + _toDisplayString(_unref(enemyStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(enemyVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_39, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(enemyVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `enemy-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff)),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff)),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff)),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_41, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_40));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Player Position: Bottom Left \"),\n                    _createElementVNode(\"div\", _hoisted_42, [\n                        _createCommentVNode(\" Player Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: _normalizeClass([\"absolute -top-[1rem] left-[140%] -translate-x-1/2 z-20 animate-float pointer-events-auto\", _unref(canPlayerRerollDice) ? 'cursor-pointer' : 'cursor-default']),\n                                title: _unref(playerDiceRerollHint),\n                                style: { \"animation-delay\": \"1s\" },\n                                onClick: handlePlayerDiceClick\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayPlayerDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(playerStats).minDice,\n                                    \"rolling-max\": _unref(playerStats).maxDice,\n                                    \"number-class\": _unref(playerDiceNumberClass),\n                                    color: \"gold\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(playerDicePreviewChanged) && !_unref(isPlayerDiceObscured))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_44, [\n                                        _createElementVNode(\"span\", _hoisted_45, \" \" + _toDisplayString(_unref(playerTurnRawDice)), 1 /* TEXT */),\n                                        _cache[39] || (_cache[39] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_46, \" \" + _toDisplayString(_unref(displayPlayerDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(playerDiceRerollCharges) > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 1,\n                                        class: _normalizeClass([\"absolute left-1/2 top-[5.9rem] -translate-x-1/2 rounded-md border border-amber-300/35 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap\", _unref(canPlayerRerollDice) ? 'text-amber-200' : 'text-amber-200/70'])\n                                    }, \" \" + _toDisplayString(_unref(playerDiceRerollCharges)), 3 /* TEXT, CLASS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 10 /* CLASS, PROPS */, _hoisted_43))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Player Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_47, [\n                            _createElementVNode(\"div\", _hoisted_48, [\n                                _createCommentVNode(\" Placeholder glow (shown when portrait fails to load) \"),\n                                (_unref(playerPortraitError))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_49))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Player portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(playerPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"player portrait\",\n                                            onError: _cache[12] || (_cache[12] = ($event) => (playerPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_50)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Player Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_51, [\n                            _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"flex justify-between text-xs text-white/80 font-bold mb-1.5\" }, [\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_52, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('player'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", [popup.colorClass, popup.kind === 'heal' ? 'combat-float-number--heal' : '']]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(playerArmor) > 0 || _unref(playerPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                    (_unref(playerArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[13] || (_cache[13] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[14] || (_cache[14] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[15] || (_cache[15] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[40] || (_cache[40] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(playerArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_54))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(playerPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[16] || (_cache[16] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[17] || (_cache[17] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[18] || (_cache[18] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[41] || (_cache[41] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_57, _toDisplayString(_unref(playerPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_56))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_58, [\n                                _cache[42] || (_cache[42] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_59, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerStats).maxHp > 0 ? (_unref(playerStats).hp / _unref(playerStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_60, _toDisplayString(_unref(playerStats).hp) + \"/\" + _toDisplayString(_unref(playerStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_61, [\n                                _cache[43] || (_cache[43] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_62, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(playerStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_63, _toDisplayString(_unref(playerStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_64, [\n                                _cache[44] || (_cache[44] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_65, _toDisplayString(_unref(playerStats).minDice) + \" ~ \" + _toDisplayString(_unref(playerStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(playerVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_66, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `player-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff, 'right')),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_68, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_67));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Card Animation Layer \"),\n                _createElementVNode(\"div\", _hoisted_69, [\n                    (_unref(playerPlayedCardVisual))\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"absolute player-played-card\",\n                            style: _normalizeStyle(_unref(playerPlayedCardStyle))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass(_unref(playerPlayedCardVisual).entered ? 'player-played-card-bob' : '')\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: _unref(playerPlayedCardVisual).card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 4 /* STYLE */))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedCardVisualEntries), (visual) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: visual.id,\n                            class: _normalizeClass([\"resolved-card-visual\", visual.source === 'player' ? 'resolved-card-visual--player' : 'resolved-card-visual--enemy'])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"resolved-card-visual-inner\", resolvedCardVisualInnerClass(visual)])\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: visual.card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" UI Layer (HUD) \"),\n                _createElementVNode(\"div\", _hoisted_70, [\n                    _createCommentVNode(\" Center: Clash Zone \"),\n                    _createElementVNode(\"div\", _hoisted_71, [\n                        _createCommentVNode(\" Clash Animation Stage \"),\n                        (_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_72, [\n                                _createCommentVNode(\" Player Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute right-1/2 mr-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'player' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-left']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayPlayerDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(playerStats).minDice,\n                                        \"rolling-max\": _unref(playerStats).maxDice,\n                                        color: \"gold\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */),\n                                _createCommentVNode(\" Enemy Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute left-1/2 ml-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'enemy' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-right']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayEnemyDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(enemyStats).minDice,\n                                        \"rolling-max\": _unref(enemyStats).maxDice,\n                                        color: \"red\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" Bottom Bar: Hand & Piles \"),\n                    _createElementVNode(\"div\", _hoisted_73, [\n                        _createCommentVNode(\" Center: Hand Cards \"),\n                        _createElementVNode(\"div\", _hoisted_74, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).playerHand, (card, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: handCardKey(card),\n                                    class: _normalizeClass([\"transition-all duration-500 origin-bottom\", [handCardClass(card), isCardShaking(card) ? 'invalid-card-shake' : '']]),\n                                    style: _normalizeStyle(transitionStyle(500)),\n                                    onMouseenter: ($event) => (handlePlayerCardHoverStart(card)),\n                                    onMouseleave: handlePlayerCardHoverEnd,\n                                    onTouchstartPassive: ($event) => (handlePlayerCardTouchStart(card)),\n                                    onTouchend: handlePlayerCardTouchEnd,\n                                    onTouchcancel: handlePlayerCardTouchEnd\n                                }, [\n                                    _createVNode(DungeonCard, {\n                                        card: card,\n                                        \"mask-level\": _unref(playerHandMaskLevel),\n                                        disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT && _unref(combatState).playerSelectedCard !== card,\n                                        onClick: ($event) => (handleCardSelect(card, idx))\n                                    }, null, 8 /* PROPS */, [\"card\", \"mask-level\", \"disabled\", \"onClick\"])\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_75));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Right Corner: Skip + Deck/Discard \"),\n                        _createElementVNode(\"div\", _hoisted_76, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-5 bg-[#252030]/90 border border-white/15 rounded-lg text-xs text-white/80 hover:border-amber-400 hover:text-amber-200 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed\",\n                                disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT,\n                                onClick: handleSkipTurn\n                            }, \"  \", 8 /* PROPS */, _hoisted_77),\n                            _createElementVNode(\"div\", _hoisted_78, [\n                                _createElementVNode(\"div\", _hoisted_79, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-dungeon-gold active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[19] || (_cache[19] = ($event) => (overlayOpen.value = 'deck'))\n                                    }, [\n                                        _createVNode(_unref(Layers), { class: \"size-5 text-dungeon-gold\" }),\n                                        _createElementVNode(\"span\", _hoisted_80, _toDisplayString(_unref(combatState).playerDeck.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_81, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[20] || (_cache[20] = ($event) => (overlayOpen.value = 'discard'))\n                                    }, [\n                                        _createVNode(_unref(Trash2), { class: \"size-5 text-gray-400\" }),\n                                        _createElementVNode(\"span\", _hoisted_82, _toDisplayString(_unref(combatState).discardPile.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" Log Feed Overlay: top-right, below parent \\\"\\\" button \"),\n                    _createElementVNode(\"div\", _hoisted_83, [\n                        _createElementVNode(\"div\", _hoisted_84, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors\",\n                                title: _unref(logsCollapsed) ? '' : '',\n                                onClick: _cache[21] || (_cache[21] = ($event) => (logsCollapsed.value = !_unref(logsCollapsed)))\n                            }, _toDisplayString(_unref(logsCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_85),\n                            (!_unref(logsCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_86, [\n                                    _createCommentVNode(\" eslint-disable-next-line vue/no-v-html \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).logs, (l, i) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: i,\n                                            class: \"bg-black/60 p-1 rounded border-l-2 border-gray-700\",\n                                            innerHTML: l\n                                        }, null, 8 /* PROPS */, _hoisted_87));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                (_unref(battleResultBanner))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_88, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"px-12 py-5 rounded-2xl border-2 text-5xl md:text-6xl font-heading tracking-[0.2em] drop-shadow-[0_0_30px_rgba(0,0,0,0.9)] animate-pulse backdrop-blur-md\", _unref(battleResultBanner) === 'win'\n                                    ? 'bg-emerald-950/70 border-emerald-400/60 text-emerald-300'\n                                    : 'bg-red-950/70 border-red-500/60 text-red-300'])\n                        }, _toDisplayString(_unref(battleResultBanner) === 'win' ? '' : ''), 3 /* TEXT, CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(effectTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"effect-tooltip absolute z-[72] pointer-events-none\", _unref(effectTooltip).align === 'right' ? 'effect-tooltip--right text-right' : 'effect-tooltip--center']),\n                        style: _normalizeStyle({ left: `${_unref(effectTooltip).x}px`, top: `${_unref(effectTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_89, _toDisplayString(_unref(effectTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_90, _toDisplayString(_unref(effectTooltip).description), 1 /* TEXT */),\n                        (_unref(effectTooltip).stacks > 1)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_91, \": \" + _toDisplayString(_unref(effectTooltip).stacks), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Deck/Discard Overlay \"),\n                (_unref(overlayOpen))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8\",\n                        onClick: _cache[24] || (_cache[24] = ($event) => (overlayOpen.value = null))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"bg-[#18141e] border border-white/10 p-6 rounded-2xl max-w-2xl w-full max-h-[80%] flex flex-col relative shadow-2xl\",\n                            onClick: _cache[23] || (_cache[23] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_92, [\n                                _createElementVNode(\"h3\", _hoisted_93, _toDisplayString(_unref(overlayOpen) === 'deck' ? '' : ''), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    onClick: _cache[22] || (_cache[22] = ($event) => (overlayOpen.value = null))\n                                }, [\n                                    _createVNode(_unref(XIcon), { class: \"size-6 hover:text-red-500\" })\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_94, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overlayOpen) === 'deck' ? _unref(combatState).playerDeck : _unref(combatState).discardPile, (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"scale-75 origin-top-left\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatView.vue?vue&type=style&index=0&id=5281b291&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5281b291\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, renderSlot as _renderSlot, normalizeClass as _normalizeClass, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex items-center justify-between px-6 py-4 border-b border-dungeon-gold/20 bg-[#1a0f08] rounded-t-lg shrink-0\" };\nconst _hoisted_2 = { class: \"text-xl font-heading text-dungeon-gold tracking-widest\" };\nconst _hoisted_3 = { class: \"p-8 flex-1 overflow-y-auto custom-scrollbar text-dungeon-paper/60 bg-dungeon-brown\" };\nimport { X } from 'lucide-vue-next';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonModal',\n    props: {\n        title: {},\n        isOpen: { type: Boolean },\n        panelClass: {}\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                (__props.isOpen)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm\",\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\n                                'relative w-full max-w-3xl p-1 bg-dungeon-brown rounded-lg shadow-2xl border border-dungeon-gold/40 mx-4 flex flex-col max-h-[90%]',\n                                __props.panelClass,\n                            ])\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"h2\", _hoisted_2, _toDisplayString(__props.title), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    class: \"text-dungeon-gold-dim hover:text-dungeon-gold transition-colors\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                                }, [\n                                    _createVNode(_unref(X), { class: \"size-6\" })\n                                ])\n                            ]),\n                            _createCommentVNode(\" Body \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"text-center py-12\" }, [\n                                        _createElementVNode(\"div\", { class: \"mb-4 text-4xl opacity-20 animate-pulse\" }, \"\"),\n                                        _createElementVNode(\"p\", { class: \"font-ui text-sm uppercase tracking-widest\" }, \" // \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Ornamental Corners \"),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-dungeon-gold -mt-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-dungeon-gold -mt-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-dungeon-gold -mb-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-dungeon-gold -mb-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */))\n                        ], 2 /* CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"text-center py-8\"\n};\nconst _hoisted_2 = {\n    key: 1,\n    class: \"flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"flex items-start gap-3\" };\nconst _hoisted_5 = { class: \"shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors\" };\nconst _hoisted_6 = { class: \"text-dungeon-gold font-heading text-sm\" };\nconst _hoisted_7 = { class: \"text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors\" };\nconst _hoisted_8 = { class: \"mt-4 pt-4 border-t border-dungeon-gold/15\" };\nconst _hoisted_9 = { class: \"flex gap-3\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 2,\n    class: \"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n};\nconst _hoisted_13 = { class: \"glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30\" };\nconst _hoisted_14 = { class: \"text-dungeon-paper/70 font-ui text-sm mb-6\" };\nconst _hoisted_15 = { class: \"text-dungeon-gold font-bold\" };\nconst _hoisted_16 = { class: \"flex gap-3 justify-end\" };\nimport { BookOpen, Pencil, RefreshCw, RotateCcw } from 'lucide-vue-next';\nimport { useGameStore } from '../gameStore';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SaveLoadPanel',\n    props: {\n        isOpen: { type: Boolean },\n        entries: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const confirmTarget = ref(null);\n        function handleRollback(messageId) {\n            confirmTarget.value = messageId;\n        }\n        async function doRollback() {\n            if (confirmTarget.value !== null) {\n                await gameStore.rollbackTo(confirmTarget.value);\n                confirmTarget.value = null;\n            }\n        }\n        function handleReroll() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.rerollCurrent();\n        }\n        function handleEdit() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.startEdit();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                onClose: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    (__props.entries.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _createVNode(_unref(BookOpen), { class: \"size-12 mx-auto text-dungeon-gold/30 mb-4\" }),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"text-gray-500 font-ui\" }, \"\", -1 /* CACHED */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.entries, (entry) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: entry.messageId,\n                                    class: \"group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]\",\n                                    onClick: ($event) => (handleRollback(entry.messageId))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\" Floor Number Badge \"),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createElementVNode(\"span\", _hoisted_6, \"#\" + _toDisplayString(entry.messageId), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" Summary Text \"),\n                                        _createElementVNode(\"p\", _hoisted_7, _toDisplayString(entry.summary), 1 /* TEXT */),\n                                        _createCommentVNode(\" Arrow Icon \"),\n                                        _createVNode(_unref(RotateCcw), { class: \"size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors\" })\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])),\n                    _createCommentVNode(\" Bottom Action Buttons: Reroll & Edit \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleReroll\n                            }, [\n                                _createVNode(_unref(RefreshCw), { class: \"size-4\" }),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"Roll\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_10),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\", _unref(gameStore).isEditing ? 'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20' : '']),\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleEdit\n                            }, [\n                                _createVNode(_unref(Pencil), { class: \"size-4\" }),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"\", -1 /* CACHED */))\n                            ], 10 /* CLASS, PROPS */, _hoisted_11)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Confirm Dialog \"),\n                    (_unref(confirmTarget) !== null)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-lg mb-3\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_14, [\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(confirmTarget)), 1 /* TEXT */),\n                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"text-red-400/80 text-xs\" }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (confirmTarget.value = null))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors\",\n                                        onClick: doRollback\n                                    }, \"  \")\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, Transition as _Transition, withCtx as _withCtx, createTextVNode as _createTextVNode, isRef as _isRef, withKeys as _withKeys, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative\" };\nconst _hoisted_2 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = { class: \"absolute top-6 left-6 z-50 flex flex-col space-y-4\" };\nconst _hoisted_5 = { class: \"absolute top-6 right-4 z-50 flex flex-col space-y-4\" };\nconst _hoisted_6 = { class: \"h-full w-full flex flex-col items-center\" };\nconst _hoisted_7 = { class: \"flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"flex flex-col h-full\"\n};\nconst _hoisted_10 = { class: \"flex justify-end gap-3 mt-4\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"whitespace-pre-wrap text-dungeon-paper/60\"\n};\nconst _hoisted_12 = { class: \"story-rich-text\" };\nconst _hoisted_13 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_14 = {\n    key: 0,\n    class: \"story-tucao-section-list\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    key: 0,\n    class: \"story-tucao-panel\"\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_18 = {\n    key: 0,\n    class: \"mt-8 flex flex-col space-y-3\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"text-xl mr-2\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"mt-4\"\n};\nconst _hoisted_22 = { class: \"flex justify-center gap-4\" };\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_25 = {\n    key: 2,\n    class: \"mt-4\"\n};\nconst _hoisted_26 = { class: \"flex justify-center\" };\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n    key: 2,\n    class: \"mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm\"\n};\nconst _hoisted_29 = { class: \"bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 shrink-0\" };\nconst _hoisted_30 = { class: \"relative w-full\" };\nconst _hoisted_31 = [\"disabled\", \"placeholder\"];\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = { class: \"absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none\" };\nconst _hoisted_34 = [\"title\"];\nconst _hoisted_35 = {\n    key: 0,\n    class: \"relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]\"\n};\nconst _hoisted_36 = { class: \"flex items-end gap-4 mb-3\" };\nconst _hoisted_37 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_38 = [\"title\"];\nconst _hoisted_39 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_40 = { \"clip-path\": \"url(#heartClip)\" };\nconst _hoisted_41 = [\"y\", \"height\"];\nconst _hoisted_42 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_43 = { class: \"text-[#cc3333] font-bold\" };\nconst _hoisted_44 = { class: \"text-gray-600\" };\nconst _hoisted_45 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_46 = [\"title\"];\nconst _hoisted_47 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_48 = { \"clip-path\": \"url(#manaClip)\" };\nconst _hoisted_49 = [\"y\", \"height\"];\nconst _hoisted_50 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_51 = { class: \"text-blue-400 font-bold\" };\nconst _hoisted_52 = { class: \"flex items-center justify-between px-1 mb-2\" };\nconst _hoisted_53 = { class: \"flex items-center gap-2 text-dungeon-paper/70\" };\nconst _hoisted_54 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_55 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_56 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_57 = { class: \"flex items-center justify-between px-1\" };\nconst _hoisted_58 = { class: \"flex items-center gap-2 text-dungeon-gold\" };\nconst _hoisted_59 = { class: \"font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm\" };\nconst _hoisted_60 = {\n    key: 0,\n    class: \"grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4\"\n};\nconst _hoisted_61 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_62 = { class: \"w-full max-w-[90rem] mx-auto flex flex-col gap-4\" };\nconst _hoisted_63 = {\n    key: 0,\n    class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-h-[72vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_64 = [\"disabled\", \"onClick\"];\nconst _hoisted_65 = [\"src\", \"alt\"];\nconst _hoisted_66 = { class: \"absolute inset-x-2 top-2 z-10\" };\nconst _hoisted_67 = { class: \"magic-book-title text-center truncate text-[22px]\" };\nconst _hoisted_68 = {\n    key: 1,\n    class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 py-8 text-center text-sm text-dungeon-paper/50\"\n};\nconst _hoisted_69 = {\n    key: 0,\n    class: \"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-6 gap-y-6 p-4 overflow-y-auto max-h-[60%]\"\n};\nconst _hoisted_70 = [\"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_71 = { class: \"relative\" };\nconst _hoisted_72 = { class: \"absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight\" };\nconst _hoisted_73 = { class: \"font-heading text-dungeon-gold text-[11px] text-center mt-1 leading-relaxed truncate w-full\" };\nconst _hoisted_74 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_75 = { class: \"relic-tooltip-name\" };\nconst _hoisted_76 = { class: \"relic-tooltip-desc\" };\nconst _hoisted_77 = { class: \"flex flex-col space-y-6 w-full max-w-lg mx-auto\" };\nconst _hoisted_78 = { class: \"space-y-4\" };\nconst _hoisted_79 = { class: \"flex items-center justify-between\" };\nconst _hoisted_80 = { class: \"flex items-center gap-2\" };\nconst _hoisted_81 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_82 = { class: \"flex items-center justify-between\" };\nconst _hoisted_83 = { class: \"flex items-center gap-2\" };\nconst _hoisted_84 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_85 = { class: \"flex items-center justify-between\" };\nconst _hoisted_86 = { class: \"flex items-center justify-between\" };\nconst _hoisted_87 = { class: \"flex items-center gap-2\" };\nconst _hoisted_88 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_89 = { class: \"flex items-center justify-between\" };\nconst _hoisted_90 = { class: \"flex items-center gap-2\" };\nconst _hoisted_91 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_92 = { class: \"flex items-center justify-between\" };\nconst _hoisted_93 = [\"disabled\"];\nconst _hoisted_94 = {\n    key: 0,\n    value: \"\"\n};\nconst _hoisted_95 = [\"value\"];\nconst _hoisted_96 = { class: \"flex items-center justify-between\" };\nconst _hoisted_97 = { class: \"flex items-center gap-2\" };\nconst _hoisted_98 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_99 = { class: \"flex items-center justify-between\" };\nconst _hoisted_100 = { class: \"inline-flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_101 = { class: \"text-dungeon-paper text-sm font-ui\" };\nconst _hoisted_102 = { class: \"grid grid-cols-2 gap-4\" };\nconst _hoisted_103 = { class: \"flex flex-col gap-4 w-full max-w-4xl\" };\nconst _hoisted_104 = { class: \"flex items-center justify-between\" };\nconst _hoisted_105 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_106 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/50 p-3\" };\nconst _hoisted_107 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_108 = { class: \"text-[11px] text-dungeon-gold/80\" };\nconst _hoisted_109 = { class: \"max-h-52 overflow-y-auto custom-scrollbar pr-1 space-y-1.5\" };\nconst _hoisted_110 = [\"onClick\"];\nconst _hoisted_111 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_112 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_113 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_114 = { class: \"text-[10px] px-1 rounded border border-white/15 text-dungeon-paper/60\" };\nconst _hoisted_115 = [\"title\"];\nconst _hoisted_116 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_117 = { class: \"mt-2 grid grid-cols-9 gap-1\" };\nconst _hoisted_118 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar\" };\nconst _hoisted_119 = { class: \"space-y-3\" };\nconst _hoisted_120 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_121 = [\"onClick\"];\nconst _hoisted_122 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_123 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_124 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_125 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4\" };\nconst _hoisted_126 = [\"disabled\", \"onClick\"];\nconst _hoisted_127 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_128 = { class: \"flex justify-end gap-3\" };\nconst _hoisted_129 = [\"disabled\"];\nconst _hoisted_130 = { class: \"flex items-center justify-between\" };\nconst _hoisted_131 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_132 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar\" };\nconst _hoisted_133 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-2\" };\nconst _hoisted_134 = [\"onClick\"];\nconst _hoisted_135 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3\" };\nconst _hoisted_136 = { class: \"max-h-[28vh] overflow-y-auto custom-scrollbar pr-1\" };\nconst _hoisted_137 = { class: \"space-y-2\" };\nconst _hoisted_138 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_139 = [\"onClick\"];\nconst _hoisted_140 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_141 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_142 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_143 = { class: \"grid grid-cols-1 md:grid-cols-2 gap-2\" };\nconst _hoisted_144 = { class: \"flex items-start justify-between gap-2\" };\nconst _hoisted_145 = { class: \"min-w-0\" };\nconst _hoisted_146 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_147 = { class: \"text-[10px] text-dungeon-paper/60\" };\nconst _hoisted_148 = { class: \"flex items-center gap-1 shrink-0\" };\nconst _hoisted_149 = [\"onClick\"];\nconst _hoisted_150 = { class: \"w-6 text-center text-xs text-dungeon-gold\" };\nconst _hoisted_151 = [\"onClick\"];\nconst _hoisted_152 = { class: \"mt-1 text-[10px] text-dungeon-paper/70 leading-relaxed\" };\nconst _hoisted_153 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_154 = { class: \"flex items-center gap-2 px-3 py-2 rounded border border-dungeon-brown/60 bg-dungeon-dark/40 text-sm text-dungeon-paper/80\" };\nconst _hoisted_155 = { class: \"flex justify-between gap-3\" };\nconst _hoisted_156 = [\"disabled\"];\nconst _hoisted_157 = {\n    key: 0,\n    class: \"custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4\"\n};\nconst _hoisted_158 = { class: \"text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap\" };\nconst _hoisted_159 = {\n    key: 1,\n    class: \"text-dungeon-paper/60 font-ui py-8 text-center text-sm\"\n};\nconst _hoisted_160 = {\n    key: 0,\n    class: \"absolute inset-0 z-[94] bg-black\"\n};\nconst _hoisted_161 = [\"src\"];\nconst _hoisted_162 = [\"src\"];\nconst _hoisted_163 = { class: \"shop-layout absolute inset-y-0 right-0 z-[96] flex items-center px-4 md:px-7\" };\nconst _hoisted_164 = { class: \"shop-panel ml-auto w-full max-w-[48rem] h-[84vh] max-h-[860px]\" };\nconst _hoisted_165 = { class: \"shop-goods-grid custom-scrollbar\" };\nconst _hoisted_166 = [\"disabled\", \"onClick\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_167 = { class: \"shop-item-icon-wrap\" };\nconst _hoisted_168 = { class: \"shop-item-price\" };\nconst _hoisted_169 = {\n    key: 0,\n    class: \"rounded border border-amber-200/15 bg-black/25 py-10 text-center text-sm text-amber-100/65\"\n};\nconst _hoisted_170 = { class: \"shop-panel-foot\" };\nconst _hoisted_171 = [\"disabled\"];\nconst _hoisted_172 = [\"disabled\"];\nconst _hoisted_173 = {\n    key: 0,\n    class: \"absolute inset-0 z-[95] bg-black\"\n};\nconst _hoisted_174 = [\"src\"];\nconst _hoisted_175 = {\n    key: 0,\n    class: \"pointer-events-none absolute inset-0\"\n};\nconst _hoisted_176 = { class: \"chest-reward-anchor\" };\nconst _hoisted_177 = [\"disabled\"];\nconst _hoisted_178 = { class: \"pointer-events-auto chest-portals-anchor w-full\" };\nconst _hoisted_179 = { class: \"flex justify-center gap-4 flex-wrap\" };\nconst _hoisted_180 = [\"disabled\", \"onClick\"];\nconst _hoisted_181 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_182 = [\"disabled\"];\nconst _hoisted_183 = [\"src\"];\nconst _hoisted_184 = { class: \"idol-layout absolute inset-0 z-[97]\" };\nconst _hoisted_185 = { class: \"idol-slots-row\" };\nconst _hoisted_186 = { class: \"idol-slot-wrap\" };\nconst _hoisted_187 = { class: \"idol-slot-wrap\" };\nconst _hoisted_188 = { class: \"idol-slot-wrap\" };\nconst _hoisted_189 = [\"disabled\"];\nconst _hoisted_190 = {\n    key: 0,\n    class: \"absolute inset-0 z-[102] bg-black/90\"\n};\nconst _hoisted_191 = { class: \"absolute inset-0 p-6 md:p-10 flex items-center justify-center\" };\nconst _hoisted_192 = { class: \"w-full max-w-6xl rounded-xl border border-dungeon-gold/35 bg-[#0f0906]/95 p-5 md:p-7 shadow-[0_0_28px_rgba(212,175,55,0.2)]\" };\nconst _hoisted_193 = { class: \"mb-4 flex items-center justify-between gap-3\" };\nconst _hoisted_194 = { class: \"text-xs text-dungeon-paper/65 mt-1\" };\nconst _hoisted_195 = [\"disabled\"];\nconst _hoisted_196 = {\n    key: 0,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-5\"\n};\nconst _hoisted_197 = [\"onClick\"];\nconst _hoisted_198 = { class: \"flex justify-center\" };\nconst _hoisted_199 = { class: \"mb-4 rounded border border-dungeon-gold/25 bg-black/20 p-3\" };\nconst _hoisted_200 = { class: \"flex justify-center\" };\nconst _hoisted_201 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/50 bg-black/20 p-4 text-center\"\n};\nconst _hoisted_202 = [\"disabled\"];\nconst _hoisted_203 = {\n    key: 1,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-[52vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_204 = [\"disabled\", \"onClick\"];\nconst _hoisted_205 = { class: \"text-[11px] text-dungeon-paper/65 mb-2\" };\nconst _hoisted_206 = { class: \"flex justify-center\" };\nconst _hoisted_207 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55\"\n};\nconst _hoisted_208 = {\n    key: 0,\n    class: \"absolute inset-0 z-[100] bg-black\"\n};\nimport { Activity, Book, BookOpen, Box, ChevronDown, Coins, Dices, FileText, Lock, Map as MapIcon, Maximize, Scroll, Send, Settings as SettingsIcon, } from 'lucide-vue-next';\nimport { bgmTrackId, bgmTracks, bgmVolume, setBgmTrack, setBgmVolume } from '../bgm';\nimport { getAllCards, resolveCardNames } from '../battle/cardRegistry';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { getAllRelics, getRelicByName } from '../battle/relicRegistry';\nimport { FLOOR_MAP, getFloorForArea, getNextFloor } from '../floor';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { CardType, EffectType } from '../types';\nimport CombatView from './CombatView.vue';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\nimport DungeonModal from './DungeonModal.vue';\nimport SaveLoadPanel from './SaveLoadPanel.vue';\n\nimport { defineComponent, h, ref, computed, watch, reactive, onUnmounted, onBeforeUnmount } from 'vue';\n// --- Dynamic Background ---\nconst HF_BG_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst BG_OPACITY_KEY = 'dungeon.bg_overlay_opacity';\nconst CHEST_BG_CLOSED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B11.png';\nconst CHEST_BG_OPENED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B12.png';\nconst CHEST_BG_MIMIC = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B13.png';\nconst SHOP_BG_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%95%86%E5%BA%97.png';\nconst SHOP_MERCHANT_PORTRAIT_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/%E6%B2%90%E8%8A%AF%E5%85%B0/%E6%B2%90%E8%8A%AF%E5%85%B04.png';\nconst IDOL_BG_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E7%A5%9E%E5%83%8F.png';\nconst IDOL_SNAP_DISTANCE = 112;\nconst MAGIC_BOOK_COVER_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E6%B3%95%E4%B9%A6%E5%B0%81%E9%9D%A2';\nconst HOT_SPRING_CLEANSE_ACTION_TEXT = '<user>';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameView',\n    emits: [\"backToSplash\"],\n    setup(__props) {\n        const SidebarIcon = defineComponent({\n            props: {\n                icon: { type: Object, required: true },\n                active: { type: Boolean, default: false },\n                label: { type: String, default: '' },\n                tooltipSide: { type: String, default: 'right' },\n                disabled: { type: Boolean, default: false },\n            },\n            emits: ['click'],\n            setup(props, { emit }) {\n                return () => h('button', {\n                    disabled: props.disabled,\n                    class: [\n                        'w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group disabled:cursor-not-allowed',\n                        props.disabled\n                            ? 'bg-[#120d0a] text-dungeon-paper/35 border-dungeon-brown/70'\n                            : props.active\n                                ? 'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]'\n                                : 'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50',\n                    ],\n                    onClick: () => {\n                        if (!props.disabled) {\n                            emit('click');\n                        }\n                    },\n                }, [\n                    h(props.icon, { class: 'size-6' }),\n                    props.label\n                        ? h('div', {\n                            class: [\n                                'absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none',\n                                props.tooltipSide === 'left' ? 'right-14' : 'left-14',\n                            ],\n                        }, props.label)\n                        : null,\n                ]);\n            },\n        });\n        const gameStore = useGameStore();\n        const activeModal = ref(null);\n        const inputText = ref('');\n        const isVariableUpdateOpen = ref(false);\n        const isStatusOpen = ref(true);\n        const showCombat = ref(false);\n        const combatEnemyName = ref('');\n        const showShopView = ref(false);\n        const showIdolView = ref(false);\n        const shopProducts = ref([]);\n        const shopBuying = ref(false);\n        const shopSpentGold = ref(0);\n        const shopPurchasedItems = ref([]);\n        const shopRobClickCount = ref(0);\n        const shopRobbing = ref(false);\n        const showChestView = ref(false);\n        const chestStage = ref('closed');\n        const chestRolling = ref(false);\n        const chestRewardRelic = ref(null);\n        const chestRewardCollected = ref(false);\n        const chestCollecting = ref(false);\n        const chestRewardVisible = ref(false);\n        const chestOpenedBgReady = ref(false);\n        const chestPortalChoices = ref([]);\n        const hotSpringCleanseMessage = ref(null);\n        const idolDiceValue = ref(1);\n        const idolDiceRolling = ref(false);\n        const idolAssignedTarget = ref(null);\n        const idolSnapPreviewTarget = ref(null);\n        const idolDicePosition = ref({ x: 0, y: 0 });\n        const idolDiceStageRef = ref(null);\n        const idolDiceRef = ref(null);\n        const idolSlotMaxHpRef = ref(null);\n        const idolSlotMpRef = ref(null);\n        const idolSlotGoldRef = ref(null);\n        const idolDragPointerId = ref(null);\n        const idolDragStart = ref({ x: 0, y: 0 });\n        const idolDragStartPos = ref({ x: 0, y: 0 });\n        const combatTestStep = ref('deck');\n        const selectedTestDeck = ref([]);\n        const selectedTestEnemy = ref('');\n        const selectedTestRelicCounts = ref({});\n        const selectedCardCategoryTab = ref('');\n        const selectedRelicCategoryTab = ref('');\n        const activeCombatContext = ref('normal');\n        const pendingCombatNarrative = ref(null);\n        const dispatchedCombatNarrativeIds = new Set();\n        const showVictoryRewardView = ref(false);\n        const victoryRewardStage = ref('pick');\n        const victoryRewardOptions = ref([]);\n        const selectedVictoryRewardCard = ref(null);\n        const rewardApplying = ref(false);\n        const relicTooltip = ref(null);\n        const combatTestStartAt999 = ref(false);\n        const combatTestStartAt999CurrentBattle = ref(false);\n        let chestMimicTimer = null;\n        let chestRewardFadeTimer = null;\n        let shopRobTimer = null;\n        let hotSpringCleanseTimer = null;\n        let idolRollTimer = null;\n        let relicTooltipLongPressTimer = null;\n        let relicTooltipAutoHideTimer = null;\n        let hotSpringCleanseMessageId = 0;\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const bgArea = computed(() => gameStore.statData._ || '');\n        const bgRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!bgArea.value || bgImageError.value)\n                return '';\n            const isLord = bgRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${bgArea.value}_` : bgArea.value;\n            return `${HF_BG_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (bgRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true;\n            }\n            else {\n                bgImageError.value = true;\n            }\n        }\n        const bgOverlayOpacity = ref(parseFloat(localStorage.getItem(BG_OPACITY_KEY) ?? '0.5'));\n        watch(bgOverlayOpacity, (v) => localStorage.setItem(BG_OPACITY_KEY, String(v)));\n        const idolBackgroundUrl = IDOL_BG_URL;\n        const shopBackgroundUrl = SHOP_BG_URL;\n        const shopMerchantPortraitUrl = SHOP_MERCHANT_PORTRAIT_URL;\n        const chestBackgroundUrl = computed(() => {\n            if (chestStage.value === 'opened')\n                return CHEST_BG_OPENED;\n            if (chestStage.value === 'mimic')\n                return CHEST_BG_MIMIC;\n            return CHEST_BG_CLOSED;\n        });\n        const IDOL_BLESSING_CONFIG = {\n            maxHp: {\n                target: 'maxHp',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice}`,\n            },\n            mp: {\n                target: 'mp',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice}`,\n            },\n            gold: {\n                target: 'gold',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice * 2}`,\n            },\n        };\n        const allCardsForTest = computed(() => getAllCards().filter(card => card.category !== ''));\n        const CATEGORY_ORDER = {\n            : 0,\n            : 1,\n        };\n        const compareCategory = (a, b) => {\n            const orderA = CATEGORY_ORDER[a] ?? 999;\n            const orderB = CATEGORY_ORDER[b] ?? 999;\n            if (orderA !== orderB)\n                return orderA - orderB;\n            return a.localeCompare(b, 'zh-Hans-CN');\n        };\n        const cardCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const card of allCardsForTest.value) {\n                if (!grouped.has(card.category)) {\n                    grouped.set(card.category, []);\n                }\n                grouped.get(card.category).push(card);\n            }\n            return Array.from(grouped.entries())\n                .sort(([a], [b]) => compareCategory(a, b))\n                .map(([category, cards]) => ({\n                category,\n                cards: [...cards].sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN')),\n            }));\n        });\n        const cardCategoryTabsForTest = computed(() => [\n            '',\n            ...cardCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredCardCategoryGroupsForTest = computed(() => {\n            if (selectedCardCategoryTab.value === '')\n                return cardCategoryGroupsForTest.value;\n            return cardCategoryGroupsForTest.value.filter((group) => group.category === selectedCardCategoryTab.value);\n        });\n        const getMagicBookCoverUrl = (bookName) => `${MAGIC_BOOK_COVER_BASE}/${encodeURIComponent(bookName)}.png`;\n        const carryableMagicBookNames = computed(() => (cardCategoryGroupsForTest.value\n            .map((group) => group.category)\n            .filter((category) => category !== '')));\n        const rawCarriedMagicBooks = computed(() => {\n            const raw = gameStore.statData._;\n            if (!Array.isArray(raw))\n                return [];\n            return raw.filter((name) => typeof name === 'string' && name.trim().length > 0);\n        });\n        const carriedMagicBooks = computed(() => {\n            const available = new Set(carryableMagicBookNames.value);\n            return rawCarriedMagicBooks.value.filter((name) => available.has(name));\n        });\n        const carriedMagicBookSet = computed(() => new Set(carriedMagicBooks.value));\n        const selectableRelicPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            let pool = getAllRelics().filter((relic) => categorySet.has(relic.category));\n            if (pool.length === 0) {\n                pool = getAllRelics().filter((relic) => relic.category === '');\n            }\n            return [...pool];\n        });\n        const muxinlanFavor = computed(() => {\n            const roles = (gameStore.statData. ?? {});\n            const raw = Number(roles?.['']?.[''] ?? 0);\n            const safe = Number.isFinite(raw) ? raw : 0;\n            return Math.max(-1000, Math.min(1000, safe));\n        });\n        const shopDiscountRate = computed(() => Math.max(0, Math.min(1000, muxinlanFavor.value)) * 0.0002);\n        const shopRobBtnOpacity = computed(() => {\n            const revealed = Math.min(5, shopRobClickCount.value);\n            return (0.32 + revealed * 0.13).toFixed(2);\n        });\n        const parseMerchantDefeatedValue = (value) => {\n            if (value === true || value === 1)\n                return true;\n            if (typeof value === 'string') {\n                const normalized = value.trim().toLowerCase();\n                return normalized === 'true' || normalized === '1';\n            }\n            return false;\n        };\n        const isMerchantDefeated = computed(() => parseMerchantDefeatedValue(gameStore.statData._));\n        const canEditMagicBooks = computed(() => ((gameStore.statData._ || '') === ''));\n        const magicBookSidebarIcon = computed(() => (canEditMagicBooks.value ? Book : Lock));\n        const isUpdatingMagicBooks = ref(false);\n        const openMagicBookModal = () => {\n            if (!canEditMagicBooks.value)\n                return;\n            activeModal.value = 'magicBooks';\n        };\n        const toggleMagicBook = async (bookName) => {\n            if (isUpdatingMagicBooks.value)\n                return;\n            const current = rawCarriedMagicBooks.value;\n            const nextBooks = current.includes(bookName)\n                ? current.filter((name) => name !== bookName)\n                : [...current, bookName];\n            isUpdatingMagicBooks.value = true;\n            await gameStore.updateStatDataFields({\n                _: Array.from(new Set(nextBooks)),\n            });\n            isUpdatingMagicBooks.value = false;\n        };\n        const cardByNameForTest = computed(() => {\n            const map = new Map();\n            for (const card of allCardsForTest.value) {\n                map.set(card.name, card);\n            }\n            return map;\n        });\n        const rewardCardPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            const filtered = allCardsForTest.value.filter((card) => categorySet.has(card.category));\n            if (filtered.length > 0)\n                return filtered;\n            return [...allCardsForTest.value];\n        });\n        const rewardReplaceEntries = computed(() => {\n            const raw = Array.isArray(gameStore.statData._) ? gameStore.statData._ : [];\n            return raw.slice(0, 9).map((name, idx) => ({\n                idx,\n                name,\n                card: cardByNameForTest.value.get(name) ?? null,\n            }));\n        });\n        const selectedTestDeckCards = computed(() => selectedTestDeck.value\n            .map((cardName, idx) => ({ idx, card: cardByNameForTest.value.get(cardName) }))\n            .filter((entry) => entry.card !== undefined));\n        const allEnemyNamesForTest = computed(() => getAllEnemyNames());\n        const baseRelicsForTest = computed(() => ([...getAllRelics()].sort((a, b) => {\n            const categoryDiff = compareCategory(a.category, b.category);\n            if (categoryDiff !== 0)\n                return categoryDiff;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const relicCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const relic of baseRelicsForTest.value) {\n                if (!grouped.has(relic.category)) {\n                    grouped.set(relic.category, []);\n                }\n                grouped.get(relic.category).push(relic);\n            }\n            return Array.from(grouped.entries()).map(([category, relics]) => ({\n                category,\n                relics,\n            }));\n        });\n        const relicCategoryTabsForTest = computed(() => [\n            '',\n            ...relicCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredRelicCategoryGroupsForTest = computed(() => {\n            if (selectedRelicCategoryTab.value === '')\n                return relicCategoryGroupsForTest.value;\n            return relicCategoryGroupsForTest.value.filter((group) => group.category === selectedRelicCategoryTab.value);\n        });\n        watch(cardCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedCardCategoryTab.value)) {\n                selectedCardCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        watch(relicCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedRelicCategoryTab.value)) {\n                selectedRelicCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        const getCardTypeBadgeClass = (type) => {\n            switch (type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-500/50 text-red-300 bg-red-900/20';\n                case CardType.MAGIC:\n                    return 'border-blue-500/50 text-blue-300 bg-blue-900/20';\n                case CardType.FUNCTION:\n                    return 'border-yellow-500/50 text-yellow-300 bg-yellow-900/20';\n                case CardType.DODGE:\n                    return 'border-emerald-500/50 text-emerald-300 bg-emerald-900/20';\n                case CardType.CURSE:\n                    return 'border-violet-500/50 text-violet-300 bg-violet-900/20';\n                default:\n                    return 'border-white/30 text-dungeon-paper/80 bg-white/5';\n            }\n        };\n        const getCardCategoryStripClass = (category) => {\n            switch (category) {\n                case '':\n                    return 'bg-dungeon-gold/80';\n                case '':\n                    return 'bg-orange-500/85';\n                default:\n                    return 'bg-indigo-400/80';\n            }\n        };\n        //  Resolved deck from MVU _ via card registry \n        const resolvedDeck = computed(() => {\n            const skills = gameStore.statData._ ?? [];\n            return resolveCardNames(skills.filter((s) => s !== ''));\n        });\n        //  Resolved relics from MVU _ \n        // Format: { relicName: count } e.g. { \"\": 2, \"\": 3 }\n        const relicEntries = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            return Object.entries(raw)\n                .filter(([name, count]) => name && count > 0)\n                .map(([name, count]) => {\n                const relic = getRelicByName(name);\n                return {\n                    name,\n                    count,\n                    rarity: relic?.rarity ?? '',\n                    category: relic?.category ?? '',\n                    effect: relic?.effect ?? '',\n                    description: relic?.description ?? relic?.effect ?? '',\n                };\n            })\n                .sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN'));\n        });\n        const chestRewardEntry = computed(() => {\n            const relic = chestRewardRelic.value;\n            if (!relic)\n                return null;\n            return {\n                name: relic.name,\n                count: 1,\n                rarity: relic.rarity,\n                category: relic.category,\n                effect: relic.effect,\n                description: relic.description ?? relic.effect ?? '',\n            };\n        });\n        const clearRelicTooltipTimers = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n            if (relicTooltipAutoHideTimer) {\n                clearTimeout(relicTooltipAutoHideTimer);\n                relicTooltipAutoHideTimer = null;\n            }\n        };\n        const showRelicTooltipForTarget = (target, relic) => {\n            const rect = target.getBoundingClientRect();\n            const tooltipWidth = 240;\n            const margin = 8;\n            const x = Math.max(margin, Math.min(rect.left + rect.width / 2, window.innerWidth - tooltipWidth - margin));\n            const y = Math.max(margin, rect.top - margin);\n            relicTooltip.value = {\n                x,\n                y,\n                name: relic.name,\n                rarity: relic.rarity,\n                category: relic.category,\n                count: relic.count,\n                effect: relic.effect,\n                description: relic.description,\n            };\n        };\n        const showRelicTooltip = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            showRelicTooltipForTarget(target, relic);\n        };\n        const hideRelicTooltip = () => {\n            clearRelicTooltipTimers();\n            relicTooltip.value = null;\n        };\n        const handleRelicTouchStart = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            relicTooltipLongPressTimer = setTimeout(() => {\n                showRelicTooltipForTarget(target, relic);\n                relicTooltipAutoHideTimer = setTimeout(() => {\n                    relicTooltip.value = null;\n                    relicTooltipAutoHideTimer = null;\n                }, 1800);\n            }, 320);\n        };\n        const handleRelicTouchEnd = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n        };\n        const showChestRewardTooltip = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            showRelicTooltip(event, chestRewardEntry.value);\n        };\n        const handleChestRewardTouchStart = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            handleRelicTouchStart(event, chestRewardEntry.value);\n        };\n        const combatRelicMap = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            const normalized = {};\n            for (const [name, value] of Object.entries(raw)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                normalized[name] = count;\n            }\n            return normalized;\n        });\n        watch(activeModal, (modal) => {\n            if (modal === 'magicBooks') {\n                gameStore.loadStatData();\n            }\n            if (modal !== 'relics') {\n                hideRelicTooltip();\n            }\n        });\n        watch(canEditMagicBooks, (editable) => {\n            if (!editable && activeModal.value === 'magicBooks') {\n                activeModal.value = null;\n            }\n        });\n        const selectedRelicTotalCount = computed(() => (Object.values(selectedTestRelicCounts.value).reduce((sum, value) => sum + Math.max(0, Math.floor(value)), 0)));\n        //  Text display settings (reactive, persisted) \n        const textSettings = reactive({\n            fontSize: 21,\n            lineHeight: 2.0,\n            fontFamily: \"'Cinzel', serif\",\n            containerWidth: 1300,\n        });\n        const isStreamingEnabled = computed({\n            get: () => gameStore.useStreaming,\n            set: (value) => gameStore.setUseStreaming(value),\n        });\n        const selectedBgmTrackId = computed({\n            get: () => bgmTrackId.value,\n            set: (value) => setBgmTrack(value),\n        });\n        const bgmVolumePercent = computed({\n            get: () => Math.round(bgmVolume.value * 100),\n            set: (value) => setBgmVolume(value / 100),\n        });\n        //  Computed display values from MVU stat_data \n        const displayText = computed(() => gameStore.mainText || '/');\n        const inlineMarkRegex = /(\\*[^*\\r\\n]+\\*|[^\\r\\n]+|[^\\r\\n]+|\"[^\"\\r\\n]+\"|'[^'\\r\\n]+')/g;\n        const headerMarkRegex = /^(#{1,4})\\s*(.*)$/;\n        const tucaoOpenTagRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n        const tucaoCloseTagRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n        const tucaoExpandedState = ref({});\n        function isQuotedText(text) {\n            const value = text.trim();\n            if (value.length < 2)\n                return false;\n            return (/^[^\\r\\n]+$/.test(value)\n                || /^[^\\r\\n]+$/.test(value)\n                || /^\"[^\"\\r\\n]+\"$/.test(value)\n                || /^'[^'\\r\\n]+'$/.test(value));\n        }\n        function normalizeTucaoMarkers(text) {\n            return text\n                // HTML entity forms: &lt;tucao&gt;...&lt;/tucao&gt;\n                .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n                .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n                // Alternate bracket forms: [tucao]...[/tucao]\n                .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n                .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n                // Chinese tag alias: <>...</>\n                .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n                .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n        }\n        function parseInlineSegments(line, keyPrefix) {\n            if (!line)\n                return [];\n            const segments = [];\n            let lastIndex = 0;\n            let segmentIndex = 0;\n            let match;\n            inlineMarkRegex.lastIndex = 0;\n            while ((match = inlineMarkRegex.exec(line)) !== null) {\n                if (match.index > lastIndex) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'text',\n                        text: line.slice(lastIndex, match.index),\n                    });\n                    segmentIndex += 1;\n                }\n                const markedText = match[0];\n                if (markedText.startsWith('*') && markedText.endsWith('*')) {\n                    const innerText = markedText.slice(1, -1);\n                    if (isQuotedText(innerText)) {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'quote',\n                            text: innerText,\n                        });\n                    }\n                    else {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'muted',\n                            text: innerText,\n                        });\n                    }\n                }\n                else if (isQuotedText(markedText)) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                else {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                segmentIndex += 1;\n                lastIndex = inlineMarkRegex.lastIndex;\n            }\n            if (lastIndex < line.length) {\n                segments.push({\n                    key: `${keyPrefix}-seg-${segmentIndex}`,\n                    type: 'text',\n                    text: line.slice(lastIndex),\n                });\n            }\n            return segments;\n        }\n        function parseStoryLine(line, key) {\n            const match = headerMarkRegex.exec(line);\n            let level = 0;\n            let content = line;\n            if (match) {\n                level = match[1].length;\n                content = match[2];\n            }\n            return {\n                type: 'line',\n                key,\n                level,\n                segments: parseInlineSegments(content, key),\n            };\n        }\n        function parseTextLines(text, keyPrefix) {\n            if (text.length === 0)\n                return [];\n            return text.split('\\n').map((line, index) => parseStoryLine(line, `${keyPrefix}-line-${index}`));\n        }\n        function parseStoryContent(text) {\n            const normalized = normalizeTucaoMarkers(text).replace(/\\r\\n/g, '\\n');\n            const lines = [];\n            const tucaoSections = [];\n            let cursor = 0;\n            let sectionIndex = 0;\n            let openMatch;\n            tucaoOpenTagRegex.lastIndex = 0;\n            while ((openMatch = tucaoOpenTagRegex.exec(normalized)) !== null) {\n                const openStart = openMatch.index;\n                const openEnd = tucaoOpenTagRegex.lastIndex;\n                const plainPart = normalized.slice(cursor, openStart);\n                lines.push(...parseTextLines(plainPart, `story-${sectionIndex}-plain-${cursor}`));\n                tucaoCloseTagRegex.lastIndex = openEnd;\n                const closeMatch = tucaoCloseTagRegex.exec(normalized);\n                const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n                const nextCursor = closeMatch ? tucaoCloseTagRegex.lastIndex : normalized.length;\n                const tucaoContent = normalized.slice(openEnd, contentEnd).replace(/^\\n+/, '').replace(/\\n+$/, '');\n                const tucaoKey = `story-tucao-${sectionIndex}-${openStart}`;\n                const parsedTucaoLines = parseTextLines(tucaoContent, tucaoKey);\n                if (parsedTucaoLines.length > 0) {\n                    tucaoSections.push({\n                        key: tucaoKey,\n                        lines: parsedTucaoLines,\n                    });\n                }\n                cursor = nextCursor;\n                tucaoOpenTagRegex.lastIndex = cursor;\n                sectionIndex += 1;\n                // Missing closing tag: consume to end once.\n                if (!closeMatch) {\n                    break;\n                }\n            }\n            const tail = normalized.slice(cursor);\n            lines.push(...parseTextLines(tail, `story-tail-${cursor}`));\n            return {\n                lines,\n                tucaoSections,\n            };\n        }\n        const storyContentState = computed(() => parseStoryContent(displayText.value));\n        const storyMainLines = computed(() => storyContentState.value.lines);\n        const storyTucaoSections = computed(() => storyContentState.value.tucaoSections);\n        watch(storyTucaoSections, (sections) => {\n            const validKeys = new Set(sections.map(section => section.key));\n            const nextState = {};\n            for (const [key, value] of Object.entries(tucaoExpandedState.value)) {\n                if (validKeys.has(key)) {\n                    nextState[key] = value;\n                }\n            }\n            tucaoExpandedState.value = nextState;\n        }, { immediate: true });\n        const isTucaoExpanded = (key) => Boolean(tucaoExpandedState.value[key]);\n        const toggleTucao = (key) => {\n            tucaoExpandedState.value[key] = !isTucaoExpanded(key);\n        };\n        // HP: _ / _, HP \n        const displayHp = computed(() => {\n            const hp = gameStore.statData._ ?? 10;\n            const maxHp = gameStore.statData._ ?? 10;\n            return Math.min(hp, maxHp);\n        });\n        const displayMaxHp = computed(() => gameStore.statData._ ?? 10);\n        // MP: _ only, no max variable. Visual cap at 20.\n        const displayMp = computed(() => gameStore.statData._ ?? 1);\n        // Gold\n        const displayGold = computed(() => gameStore.statData._ ?? 0);\n        // Dice range\n        const displayMinDice = computed(() => gameStore.statData.$ ?? 0);\n        const displayMaxDice = computed(() => gameStore.statData.$ ?? 0);\n        const idolDiceMin = computed(() => Math.max(1, toNonNegativeInt(displayMinDice.value, 1)));\n        const idolDiceMax = computed(() => Math.max(idolDiceMin.value, toNonNegativeInt(displayMaxDice.value, 6)));\n        const hpPercent = computed(() => {\n            const max = displayMaxHp.value;\n            return max > 0 ? Math.min((displayHp.value / max) * 100, 100) : 100;\n        });\n        // MP visual fill: cap at 20 for display\n        const mpPercent = computed(() => {\n            const mp = displayMp.value;\n            const visualMax = 20;\n            return Math.min((mp / visualMax) * 100, 100);\n        });\n        const idolRewardSummary = computed(() => {\n            const target = idolAssignedTarget.value;\n            if (!target)\n                return null;\n            const config = IDOL_BLESSING_CONFIG[target];\n            const dice = idolDiceValue.value;\n            const amount = target === 'gold' ? dice * 2 : dice;\n            return {\n                target,\n                statueName: config.statueName,\n                amount,\n                rewardText: config.rewardText(dice),\n            };\n        });\n        //  Actions \n        const handleSendInput = () => {\n            if (!inputText.value.trim() || gameStore.isGenerating)\n                return;\n            gameStore.sendAction(inputText.value);\n            inputText.value = '';\n        };\n        const handleOptionClick = (option) => {\n            if (gameStore.isGenerating)\n                return;\n            // Strip the \"A. \" / \"B. \" / etc. prefix, paste content into input box\n            const stripped = option.replace(/^[A-D]\\.\\s*/i, '');\n            inputText.value = stripped;\n        };\n        const REBIRTH_STARTER_DECK = [\n            '', '', '',\n            '', '',\n            '', '',\n            '', '',\n        ];\n        const HOT_SPRING_CLEANSE_LINES = [\n            '',\n            '',\n            '',\n            '',\n        ];\n        const toNonNegativeInt = (value, fallback) => {\n            const n = Number(value);\n            if (!Number.isFinite(n))\n                return fallback;\n            return Math.max(0, Math.floor(n));\n        };\n        const buildRebirthResetFields = () => {\n            const initialMaxHp = Math.max(1, toNonNegativeInt(gameStore.statData.$, 10));\n            const initialMp = toNonNegativeInt(gameStore.statData.$, 1);\n            const initialGold = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentSkillPoints = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentFloor = Math.max(1, toNonNegativeInt(gameStore.statData._, 1));\n            const rebirthSkillPointGain = Math.floor((currentFloor * (currentFloor + 1)) / 2);\n            return {\n                _: initialMaxHp,\n                _: initialMaxHp,\n                _: initialMp,\n                _: initialGold,\n                $: currentSkillPoints + rebirthSkillPointGain,\n                _: [...REBIRTH_STARTER_DECK],\n                _: [],\n                $: '',\n                $: ['', ''],\n                _: {},\n                $: 6,\n                $: 1,\n                _: 1,\n                _: '',\n                _: '',\n                _: '',\n                _: '',\n                _: false,\n                $: {\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                },\n            };\n        };\n        const handleRebirthClick = () => {\n            if (gameStore.isGenerating)\n                return;\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            closeShopView();\n            closeChestView();\n            closeIdolView();\n            pendingCombatNarrative.value = null;\n            gameStore.setPendingCombatMvuChanges(null);\n            gameStore.setPendingStatDataChanges(buildRebirthResetFields());\n            gameStore.sendAction('<user>');\n        };\n        //  Room type config for E option \n        const ROOM_TYPE_CONFIG = {\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.25)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#dc262680' },\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.3)', borderColor: '#ef4444', textColor: '#fca5a5', glowColor: '#ef444480' },\n            '': { label: '', icon: '', bgColor: 'rgba(161,98,7,0.25)', borderColor: '#eab308', textColor: '#fde68a', glowColor: '#eab30880' },\n            '': { label: '', icon: '', bgColor: 'rgba(21,128,61,0.25)', borderColor: '#22c55e', textColor: '#bbf7d0', glowColor: '#22c55e80' },\n            '': { label: '', icon: '', bgColor: 'rgba(8,145,178,0.25)', borderColor: '#06b6d4', textColor: '#a5f3fc', glowColor: '#06b6d480' },\n            '': { label: '', icon: '', bgColor: 'rgba(126,34,206,0.25)', borderColor: '#a855f7', textColor: '#e9d5ff', glowColor: '#a855f780' },\n        };\n        // E option: no button for  / \n        const specialOptionConfig = computed(() => {\n            if (!gameStore.hasOptionE)\n                return null;\n            if (isTreasureRoomContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            if (isShopContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            const roomType = gameStore.statData._;\n            if (!roomType)\n                return null;\n            if (roomType === '' || roomType === '')\n                return null;\n            return ROOM_TYPE_CONFIG[roomType] ?? null;\n        });\n        const isTreasureRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '' || area === '';\n        });\n        const isShopContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '';\n        });\n        const isHotSpringRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '';\n        });\n        const isIdolRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '';\n        });\n        const isCombatRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '' || roomType === '';\n        });\n        const sanitizeCombatLogLine = (line) => {\n            return line\n                .replace(/<[^>]*>/g, '')\n                .replace(/&nbsp;/g, ' ')\n                .replace(/\\s+/g, ' ')\n                .trim();\n        };\n        const formatCombatLogs = (logs) => {\n            const ordered = [...logs]\n                .reverse()\n                .map(sanitizeCombatLogLine)\n                .filter((line) => line.length > 0);\n            if (ordered.length === 0)\n                return '';\n            return ordered.join('\\n');\n        };\n        const buildCombatNarrative = (win, enemyName, context, logs) => {\n            const outcomeLine = win\n                ? `<user>[]<user>${enemyName}`\n                : `<user>[]<user>${enemyName}`;\n            const contextLine = context === 'shopRobbery'\n                ? '<user>'\n                : context === 'chestMimic'\n                    ? '<user>'\n                    : context === 'combatTest'\n                        ? '<user>'\n                        : '<user>';\n            const followupLine = win\n                ? '<user>'\n                : '<user>';\n            return `${outcomeLine}\\n${contextLine}\\n${followupLine}\\n<user>\\n${formatCombatLogs(logs)}`;\n        };\n        const sendCombatNarrativeOnce = (narrative, text) => {\n            if (dispatchedCombatNarrativeIds.has(narrative.id))\n                return;\n            if (gameStore.isGenerating)\n                return;\n            dispatchedCombatNarrativeIds.add(narrative.id);\n            gameStore.sendAction(text);\n        };\n        const queueCombatMvuSync = (win, finalStats, negativeEffects) => {\n            const hpRaw = Number(finalStats?.hp);\n            const hasHp = Number.isFinite(hpRaw);\n            const floorRaw = Number(gameStore.statData._ ?? 1);\n            const floor = Number.isFinite(floorRaw) ? Math.max(1, Math.floor(floorRaw)) : 1;\n            const goldReward = 3 + (2 * floor);\n            const normalizedNegativeEffects = negativeEffects\n                .filter((item) => typeof item === 'string')\n                .map((item) => item.trim())\n                .filter((item) => item.length > 0);\n            gameStore.setPendingCombatMvuChanges({\n                hp: hasHp ? Math.max(0, Math.floor(hpRaw)) : undefined,\n                addDefeatMark: !win,\n                goldDelta: win ? goldReward : undefined,\n                negativeStatusesAdd: normalizedNegativeEffects,\n            });\n        };\n        const applyMerchantDefeatedShopState = () => {\n            for (const item of shopProducts.value) {\n                item.finalPrice = 0;\n            }\n        };\n        const pickUniqueRewardCard = (pool, usedIds) => {\n            const candidates = pool.filter((card) => !usedIds.has(card.id));\n            if (candidates.length === 0)\n                return null;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? null;\n        };\n        const startVictoryRewardFlow = () => {\n            const pool = rewardCardPool.value;\n            const roomType = (gameStore.statData._ || '').trim();\n            const isLordRoom = roomType === '';\n            const normalPool = pool.filter((card) => card.rarity === '');\n            const rarePool = pool.filter((card) => card.rarity === '');\n            const options = [];\n            const usedIds = new Set();\n            for (let i = 0; i < 3; i++) {\n                const pickRare = isLordRoom || Math.random() < 0.1;\n                const targetPool = pickRare ? rarePool : normalPool;\n                const picked = pickUniqueRewardCard(targetPool, usedIds);\n                if (!picked)\n                    continue;\n                options.push(picked);\n                usedIds.add(picked.id);\n            }\n            if (options.length === 0)\n                return false;\n            victoryRewardOptions.value = options;\n            selectedVictoryRewardCard.value = null;\n            victoryRewardStage.value = 'pick';\n            showVictoryRewardView.value = true;\n            return true;\n        };\n        const finalizeVictoryRewardFlow = () => {\n            showVictoryRewardView.value = false;\n            victoryRewardStage.value = 'pick';\n            victoryRewardOptions.value = [];\n            selectedVictoryRewardCard.value = null;\n            rewardApplying.value = false;\n            const narrative = pendingCombatNarrative.value;\n            if (!narrative)\n                return;\n            if (narrative.context === 'shopRobbery')\n                return;\n            pendingCombatNarrative.value = null;\n            sendCombatNarrativeOnce(narrative, narrative.text);\n        };\n        const exitVictoryRewardFlow = () => {\n            finalizeVictoryRewardFlow();\n        };\n        const pickVictoryRewardCard = (card) => {\n            selectedVictoryRewardCard.value = card;\n            victoryRewardStage.value = 'replace';\n        };\n        const replaceDeckCardWithReward = async (idx) => {\n            if (!selectedVictoryRewardCard.value || rewardApplying.value)\n                return;\n            const raw = Array.isArray(gameStore.statData._)\n                ? [...gameStore.statData._].slice(0, 9)\n                : [];\n            if (raw.length === 0) {\n                raw.push(selectedVictoryRewardCard.value.name);\n            }\n            else if (idx >= 0 && idx < raw.length) {\n                raw[idx] = selectedVictoryRewardCard.value.name;\n            }\n            else {\n                return;\n            }\n            rewardApplying.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: raw });\n            rewardApplying.value = false;\n            if (!ok)\n                return;\n            finalizeVictoryRewardFlow();\n        };\n        const getRarityBasePrice = (rarity) => {\n            if (rarity === '')\n                return 15;\n            if (rarity === '')\n                return 10;\n            return 5;\n        };\n        const formatRarityLabel = (rarity) => (rarity === '' ? '' : rarity);\n        const rollShopRarity = () => {\n            const r = Math.random();\n            if (r < 0.8)\n                return '';\n            if (r < 0.95)\n                return '';\n            return '';\n        };\n        const toRelicTooltipEntry = (relic) => ({\n            name: relic.name,\n            count: 1,\n            rarity: relic.rarity,\n            category: relic.category,\n            effect: relic.effect,\n            description: relic.description ?? relic.effect ?? '',\n        });\n        const showShopProductTooltip = (event, item) => {\n            showRelicTooltip(event, toRelicTooltipEntry(item.relic));\n        };\n        const handleShopProductTouchStart = (event, item) => {\n            handleRelicTouchStart(event, toRelicTooltipEntry(item.relic));\n        };\n        const generateShopProducts = () => {\n            const pool = [...selectableRelicPool.value];\n            const favorForCount = Math.max(0, muxinlanFavor.value);\n            const targetCount = Math.max(0, 3 + Math.floor(favorForCount / 200));\n            const count = Math.min(targetCount, pool.length);\n            const usedNames = new Set();\n            const discountRate = shopDiscountRate.value;\n            const next = [];\n            for (let i = 0; i < count; i++) {\n                const targetRarity = rollShopRarity();\n                let candidates = pool.filter((relic) => !usedNames.has(relic.name) && relic.rarity === targetRarity);\n                if (candidates.length === 0) {\n                    candidates = pool.filter((relic) => !usedNames.has(relic.name));\n                }\n                if (candidates.length === 0)\n                    break;\n                const relic = pickOne(candidates);\n                if (!relic)\n                    break;\n                usedNames.add(relic.name);\n                const basePrice = getRarityBasePrice(relic.rarity);\n                const finalPrice = isMerchantDefeated.value ? 0 : Math.max(1, Math.ceil(basePrice * (1 - discountRate)));\n                next.push({\n                    key: `${relic.id}-${i}`,\n                    relic,\n                    basePrice,\n                    finalPrice,\n                    sold: false,\n                });\n            }\n            shopProducts.value = next;\n        };\n        const openShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopSpentGold.value = 0;\n            shopPurchasedItems.value = [];\n            shopRobClickCount.value = 0;\n            shopRobbing.value = false;\n            generateShopProducts();\n            if (isMerchantDefeated.value) {\n                applyMerchantDefeatedShopState();\n            }\n            showShopView.value = true;\n        };\n        const closeShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopRobbing.value = false;\n            showShopView.value = false;\n        };\n        const buildNextRelicInventory = (pickedRelic) => {\n            const rawRelics = gameStore.statData._ ?? {};\n            const nextRelics = {};\n            for (const [name, value] of Object.entries(rawRelics)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                nextRelics[name] = count;\n            }\n            nextRelics[pickedRelic.name] = (nextRelics[pickedRelic.name] ?? 0) + 1;\n            return nextRelics;\n        };\n        const buyShopProduct = async (item) => {\n            if (shopBuying.value || item.sold)\n                return;\n            const currentGold = Math.max(0, Math.floor(Number(gameStore.statData._ ?? 0)));\n            if (currentGold < item.finalPrice) {\n                return;\n            }\n            shopBuying.value = true;\n            const nextGold = currentGold - item.finalPrice;\n            const nextRelics = buildNextRelicInventory(item.relic);\n            const ok = await gameStore.updateStatDataFields({\n                _: nextGold,\n                _: nextRelics,\n            });\n            shopBuying.value = false;\n            if (!ok)\n                return;\n            item.sold = true;\n            shopSpentGold.value += item.finalPrice;\n            shopPurchasedItems.value.push({\n                name: item.relic.name,\n                rarity: formatRarityLabel(item.relic.rarity),\n                price: item.finalPrice,\n            });\n            hideRelicTooltip();\n        };\n        const exitShop = () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value)\n                return;\n            const purchased = [...shopPurchasedItems.value];\n            const total = shopSpentGold.value;\n            const narrative = pendingCombatNarrative.value;\n            closeShopView();\n            if (narrative && narrative.context === 'shopRobbery' && narrative.win) {\n                const lootedText = purchased.length > 0\n                    ? `<user>${purchased.map((item) => `${item.name}${item.rarity}`).join('')}`\n                    : '<user>';\n                const report = `${narrative.text}\\n${lootedText}\\n<user>`;\n                pendingCombatNarrative.value = null;\n                sendCombatNarrativeOnce(narrative, report);\n                return;\n            }\n            if (purchased.length === 0)\n                return;\n            const purchasedText = purchased.map((item) => `${item.name}${item.rarity}`).join('');\n            gameStore.sendAction(`<user>${purchasedText}${total}`);\n        };\n        const handleShopRobClick = async () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value || isMerchantDefeated.value)\n                return;\n            if (shopRobClickCount.value < 5) {\n                shopRobClickCount.value += 1;\n                return;\n            }\n            shopRobbing.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: '' });\n            if (!ok) {\n                shopRobbing.value = false;\n                return;\n            }\n            clearShopRobTimer();\n            shopRobTimer = setTimeout(() => {\n                closeShopView();\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'shopRobbery';\n                showCombat.value = true;\n                shopRobTimer = null;\n            }, 1000);\n        };\n        const clearShopRobTimer = () => {\n            if (!shopRobTimer)\n                return;\n            clearTimeout(shopRobTimer);\n            shopRobTimer = null;\n        };\n        const clearChestMimicTimer = () => {\n            if (!chestMimicTimer)\n                return;\n            clearTimeout(chestMimicTimer);\n            chestMimicTimer = null;\n        };\n        const clearChestRewardFadeTimer = () => {\n            if (!chestRewardFadeTimer)\n                return;\n            clearTimeout(chestRewardFadeTimer);\n            chestRewardFadeTimer = null;\n        };\n        const clearHotSpringCleanseTimer = () => {\n            if (!hotSpringCleanseTimer)\n                return;\n            clearTimeout(hotSpringCleanseTimer);\n            hotSpringCleanseTimer = null;\n        };\n        const showHotSpringCleanseText = () => {\n            const text = pickOne(HOT_SPRING_CLEANSE_LINES) ?? HOT_SPRING_CLEANSE_LINES[0];\n            const messageId = ++hotSpringCleanseMessageId;\n            hotSpringCleanseMessage.value = { id: messageId, text };\n            clearHotSpringCleanseTimer();\n            hotSpringCleanseTimer = setTimeout(() => {\n                if (hotSpringCleanseMessage.value?.id === messageId) {\n                    hotSpringCleanseMessage.value = null;\n                }\n                hotSpringCleanseTimer = null;\n            }, 2600);\n        };\n        const useHotSpringCleanse = () => {\n            showHotSpringCleanseText();\n            gameStore.setPendingStatDataChanges({ _: [] });\n            gameStore.sendAction(HOT_SPRING_CLEANSE_ACTION_TEXT);\n        };\n        onUnmounted(() => {\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearHotSpringCleanseTimer();\n            clearIdolRollTimer();\n        });\n        const handleChestBgLoaded = () => {\n            if (!showChestView.value)\n                return;\n            if (chestStage.value !== 'opened')\n                return;\n            if (chestBackgroundUrl.value !== CHEST_BG_OPENED)\n                return;\n            chestOpenedBgReady.value = true;\n            if (chestRewardRelic.value && !chestRewardCollected.value) {\n                chestRewardVisible.value = true;\n            }\n        };\n        const openChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            chestStage.value = 'closed';\n            chestRolling.value = false;\n            chestRewardRelic.value = null;\n            chestRewardCollected.value = false;\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n            chestPortalChoices.value = [];\n            showChestView.value = true;\n        };\n        const closeChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            hideRelicTooltip();\n            showChestView.value = false;\n            chestRolling.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n        };\n        const clearIdolRollTimer = () => {\n            if (!idolRollTimer)\n                return;\n            clearTimeout(idolRollTimer);\n            idolRollTimer = null;\n        };\n        const clampNumber = (value, min, max) => {\n            if (max <= min)\n                return min;\n            return Math.max(min, Math.min(max, value));\n        };\n        const rollIdolDiceValue = () => {\n            const min = idolDiceMin.value;\n            const max = idolDiceMax.value;\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        const getIdolSlotElement = (target) => {\n            if (target === 'maxHp')\n                return idolSlotMaxHpRef.value;\n            if (target === 'mp')\n                return idolSlotMpRef.value;\n            return idolSlotGoldRef.value;\n        };\n        const getIdolSnapCandidate = (x, y) => {\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return null;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const diceCenterX = x + (diceRect.width / 2);\n            const diceCenterY = y + (diceRect.height / 2);\n            let best = null;\n            const targets = ['maxHp', 'mp', 'gold'];\n            for (const target of targets) {\n                const slotEl = getIdolSlotElement(target);\n                if (!slotEl)\n                    continue;\n                const slotRect = slotEl.getBoundingClientRect();\n                const slotCenterX = (slotRect.left - stageRect.left) + (slotRect.width / 2);\n                const slotCenterY = (slotRect.top - stageRect.top) + (slotRect.height / 2);\n                const distance = Math.hypot(slotCenterX - diceCenterX, slotCenterY - diceCenterY);\n                const snapX = clampNumber(slotCenterX - (diceRect.width / 2), 0, maxX);\n                const snapY = clampNumber(slotCenterY - (diceRect.height / 2), 0, maxY);\n                if (!best || distance < best.distance) {\n                    best = { target, distance, snapX, snapY };\n                }\n            }\n            if (!best || best.distance > IDOL_SNAP_DISTANCE)\n                return null;\n            return best;\n        };\n        const placeIdolDiceAtStart = () => {\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const x = Math.max(0, (stageRect.width - diceRect.width) / 2);\n            const y = clampNumber(stageRect.height * 0.72, 0, maxY);\n            idolDicePosition.value = { x: clampNumber(x, 0, maxX), y };\n            idolSnapPreviewTarget.value = null;\n        };\n        const openIdolView = () => {\n            if (gameStore.isGenerating)\n                return;\n            clearIdolRollTimer();\n            idolAssignedTarget.value = null;\n            idolSnapPreviewTarget.value = null;\n            idolDragPointerId.value = null;\n            idolDiceValue.value = idolDiceMin.value;\n            idolDiceRolling.value = true;\n            showIdolView.value = true;\n            idolRollTimer = setTimeout(() => {\n                idolDiceValue.value = rollIdolDiceValue();\n                idolDiceRolling.value = false;\n                idolRollTimer = null;\n                requestAnimationFrame(() => {\n                    placeIdolDiceAtStart();\n                });\n            }, 520);\n        };\n        const closeIdolView = () => {\n            clearIdolRollTimer();\n            idolDragPointerId.value = null;\n            showIdolView.value = false;\n        };\n        const handleIdolDicePointerDown = (event) => {\n            if (!showIdolView.value || idolDiceRolling.value)\n                return;\n            const diceEl = idolDiceRef.value;\n            if (!diceEl)\n                return;\n            idolAssignedTarget.value = null;\n            idolDragPointerId.value = event.pointerId;\n            idolDragStart.value = { x: event.clientX, y: event.clientY };\n            idolDragStartPos.value = { ...idolDicePosition.value };\n            diceEl.setPointerCapture(event.pointerId);\n        };\n        const handleIdolDicePointerMove = (event) => {\n            if (!showIdolView.value)\n                return;\n            if (idolDragPointerId.value !== event.pointerId)\n                return;\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const dx = event.clientX - idolDragStart.value.x;\n            const dy = event.clientY - idolDragStart.value.y;\n            const nextX = clampNumber(idolDragStartPos.value.x + dx, 0, maxX);\n            const nextY = clampNumber(idolDragStartPos.value.y + dy, 0, maxY);\n            idolDicePosition.value = { x: nextX, y: nextY };\n            const candidate = getIdolSnapCandidate(nextX, nextY);\n            idolSnapPreviewTarget.value = candidate?.target ?? null;\n        };\n        const handleIdolDicePointerUp = (event) => {\n            if (!showIdolView.value)\n                return;\n            if (idolDragPointerId.value !== event.pointerId)\n                return;\n            const diceEl = idolDiceRef.value;\n            if (diceEl) {\n                diceEl.releasePointerCapture(event.pointerId);\n            }\n            const candidate = getIdolSnapCandidate(idolDicePosition.value.x, idolDicePosition.value.y);\n            if (candidate) {\n                idolAssignedTarget.value = candidate.target;\n                idolSnapPreviewTarget.value = candidate.target;\n                idolDicePosition.value = { x: candidate.snapX, y: candidate.snapY };\n            }\n            else {\n                idolAssignedTarget.value = null;\n                idolSnapPreviewTarget.value = null;\n            }\n            idolDragPointerId.value = null;\n        };\n        const buildIdolPendingFields = () => {\n            const reward = idolRewardSummary.value;\n            if (!reward)\n                return null;\n            const currentMaxHp = toNonNegativeInt(gameStore.statData._, 10);\n            const currentMp = toNonNegativeInt(gameStore.statData._, 1);\n            const currentGold = toNonNegativeInt(gameStore.statData._, 0);\n            if (reward.target === 'maxHp') {\n                return { _: currentMaxHp + reward.amount };\n            }\n            if (reward.target === 'mp') {\n                return { _: currentMp + reward.amount };\n            }\n            return { _: currentGold + reward.amount };\n        };\n        const exitIdolView = () => {\n            if (gameStore.isGenerating)\n                return;\n            const reward = idolRewardSummary.value;\n            closeIdolView();\n            if (!reward) {\n                gameStore.sendAction('<user>');\n                return;\n            }\n            const fields = buildIdolPendingFields();\n            if (fields) {\n                gameStore.setPendingStatDataChanges(fields);\n            }\n            gameStore.sendAction(`<user>${reward.statueName}${reward.rewardText}`);\n        };\n        const pickChestRewardRelic = () => {\n            const candidatePool = [...selectableRelicPool.value];\n            if (candidatePool.length === 0)\n                return null;\n            const rarityRoll = Math.random();\n            const targetRarity = rarityRoll < 0.6 ? '' : rarityRoll < 0.9 ? '' : '';\n            let rarityPool = candidatePool.filter((relic) => relic.rarity === targetRarity);\n            if (rarityPool.length === 0) {\n                rarityPool = candidatePool;\n            }\n            return pickOne(rarityPool);\n        };\n        const collectChestReward = () => {\n            if (!chestRewardRelic.value || chestRewardCollected.value || chestCollecting.value)\n                return;\n            chestCollecting.value = true;\n            //  MVU user \n            chestRewardCollected.value = true;\n            chestCollecting.value = false;\n            clearChestRewardFadeTimer();\n            chestRewardFadeTimer = setTimeout(() => {\n                chestRewardVisible.value = false;\n                hideRelicTooltip();\n                chestRewardFadeTimer = null;\n            }, 260);\n        };\n        const handleChestCenterClick = async () => {\n            if (chestRolling.value || chestStage.value !== 'closed')\n                return;\n            chestRolling.value = true;\n            const openSuccess = Math.random() < 0.9;\n            if (openSuccess) {\n                chestStage.value = 'opened';\n                chestOpenedBgReady.value = false;\n                chestRewardVisible.value = false;\n                const reward = pickChestRewardRelic();\n                if (!reward) {\n                    chestRolling.value = false;\n                    return;\n                }\n                chestRewardRelic.value = reward;\n                chestRewardCollected.value = false;\n                chestCollecting.value = false;\n                chestPortalChoices.value = generateChestLeavePortals();\n                if (chestOpenedBgReady.value) {\n                    chestRewardVisible.value = true;\n                }\n                chestRolling.value = false;\n                return;\n            }\n            chestStage.value = 'mimic';\n            await gameStore.updateStatDataFields({ _: '' });\n            clearChestMimicTimer();\n            chestMimicTimer = setTimeout(() => {\n                showChestView.value = false;\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'chestMimic';\n                showCombat.value = true;\n                chestMimicTimer = null;\n            }, 1000);\n        };\n        const startCombatFromSpecialOption = async () => {\n            let enemyName = (gameStore.statData._ || '').trim();\n            if (!enemyName) {\n                const roomType = (gameStore.statData._ || '').trim();\n                const area = (gameStore.statData._ || '').trim();\n                enemyName = roomType === ''\n                    ? (pickLordMonsterByArea(area) ?? '')\n                    : (pickBattleMonsterByArea(area) ?? '');\n                if (!enemyName) {\n                    toastr.warning('');\n                    return;\n                }\n                const ok = await gameStore.updateStatDataFields({ _: enemyName });\n                if (!ok)\n                    return;\n            }\n            combatEnemyName.value = enemyName;\n            activeCombatContext.value = 'normal';\n            showCombat.value = true;\n        };\n        const handleSpecialOption = async () => {\n            if (isTreasureRoomContext.value) {\n                openChestView();\n                return;\n            }\n            if (isShopContext.value) {\n                openShopView();\n                return;\n            }\n            if (isHotSpringRoomContext.value) {\n                useHotSpringCleanse();\n                return;\n            }\n            if (isIdolRoomContext.value) {\n                openIdolView();\n                return;\n            }\n            if (isCombatRoomContext.value) {\n                await startCombatFromSpecialOption();\n                return;\n            }\n            toastr.info('...');\n        };\n        // \n        //  [Leave] Portal System  Floor/Area Logic\n        // \n        const FLOOR_MONSTER_CONFIG = {\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', '', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': [''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': [''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n        };\n        //  FLOOR_MONSTER_CONFIG \n        const LORD_MONSTER_ORDER = [\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ];\n        const LORD_MONSTER_BY_AREA = (() => {\n            const areaOrder = [];\n            for (const floorConfig of Object.values(FLOOR_MONSTER_CONFIG)) {\n                areaOrder.push(...Object.keys(floorConfig.uniqueByArea));\n            }\n            const mapping = {};\n            for (let i = 0; i < areaOrder.length; i += 1) {\n                const area = areaOrder[i];\n                const lordName = LORD_MONSTER_ORDER[i];\n                if (lordName) {\n                    mapping[area] = lordName;\n                }\n            }\n            return mapping;\n        })();\n        // 70% 30% \n        const COMMON_MONSTER_RATE_BY_FLOOR = {\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n        };\n        function pickOne(arr) {\n            if (!arr.length)\n                return null;\n            return arr[Math.floor(Math.random() * arr.length)];\n        }\n        function pickBattleMonsterByArea(area) {\n            const floor = getFloorForArea(area) ?? '';\n            const config = FLOOR_MONSTER_CONFIG[floor];\n            if (!config)\n                return null;\n            const commonPool = config.common;\n            const uniquePool = config.uniqueByArea[area] ?? [];\n            const commonRate = COMMON_MONSTER_RATE_BY_FLOOR[floor] ?? 0.7;\n            let pool = [];\n            if (commonPool.length === 0 && uniquePool.length === 0)\n                return null;\n            if (commonPool.length === 0) {\n                pool = uniquePool;\n            }\n            else if (uniquePool.length === 0) {\n                pool = commonPool;\n            }\n            else {\n                pool = Math.random() < commonRate ? commonPool : uniquePool;\n            }\n            return pickOne(pool);\n        }\n        function pickLordMonsterByArea(area) {\n            const lordName = LORD_MONSTER_BY_AREA[area];\n            if (!lordName)\n                return null;\n            return lordName;\n        }\n        //  Portal visuals \n        const PORTAL_ROOM_TYPES = ['', '', '', '', '', '', ''];\n        const PORTAL_ROOM_WEIGHTS = {\n            '': 50,\n            '': 20,\n            '': 5,\n            '': 10,\n            '': 10,\n            '': 0,\n            '': 5,\n        };\n        const TRAP_POOL_BY_AREA = {\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            // \n            '': ['', '', ''],\n            '': [''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n        };\n        const ALL_TRAPS = Object.values(TRAP_POOL_BY_AREA).flat();\n        const pickTrapByArea = (area) => {\n            const pool = TRAP_POOL_BY_AREA[area] ?? [];\n            if (pool.length > 0)\n                return pickOne(pool);\n            if (ALL_TRAPS.length > 0)\n                return pickOne(ALL_TRAPS);\n            return null;\n        };\n        const getAvailablePortalRoomTypes = (currentArea) => {\n            if (parseMerchantDefeatedValue(gameStore.statData._)) {\n                const withoutShop = PORTAL_ROOM_TYPES.filter((type) => type !== '');\n                if (currentArea === '') {\n                    return withoutShop.filter((type) => type !== '');\n                }\n                return withoutShop;\n            }\n            if (currentArea === '') {\n                return PORTAL_ROOM_TYPES.filter((type) => type !== '');\n            }\n            return [...PORTAL_ROOM_TYPES];\n        };\n        const PORTAL_ROOM_VISUALS = {\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.5)', borderColor: '#991b1b', textColor: '#fca5a5', glowColor: '#dc2626' },\n            '': { icon: '', bgColor: 'rgba(113,63,18,0.5)', borderColor: '#a16207', textColor: '#fde68a', glowColor: '#eab308' },\n            '': { icon: '', bgColor: 'rgba(20,83,45,0.5)', borderColor: '#166534', textColor: '#bbf7d0', glowColor: '#22c55e' },\n            '': { icon: '', bgColor: 'rgba(22,78,99,0.5)', borderColor: '#155e75', textColor: '#a5f3fc', glowColor: '#06b6d4' },\n            '': { icon: '', bgColor: 'rgba(88,28,135,0.5)', borderColor: '#7e22ce', textColor: '#e9d5ff', glowColor: '#a855f7' },\n            '': { icon: '', bgColor: 'rgba(63,63,70,0.5)', borderColor: '#52525b', textColor: '#d4d4d8', glowColor: '#71717a' },\n            '': { icon: '', bgColor: 'rgba(124,45,18,0.5)', borderColor: '#9a3412', textColor: '#fed7aa', glowColor: '#ea580c' },\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.6)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#ef4444' },\n        };\n        const AREA_PORTAL_VISUAL = {\n            icon: '', bgColor: 'rgba(79,70,229,0.5)', borderColor: '#6366f1', textColor: '#c7d2fe', glowColor: '#818cf8',\n        };\n        let cachedPortals = [];\n        let cachedPortalFingerprint = '';\n        function shuffle(arr) {\n            const a = [...arr];\n            for (let i = a.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                [a[i], a[j]] = [a[j], a[i]];\n            }\n            return a;\n        }\n        function rollPortalCount() {\n            const roll = Math.random();\n            // 1/2/3 = 30% / 50% / 20%\n            return roll < 0.3 ? 1 : roll < 0.8 ? 2 : 3;\n        }\n        function pickWeightedRoomTypes(roomTypes, count) {\n            const picked = [];\n            if (roomTypes.length === 0 || count <= 0)\n                return picked;\n            // \n            const weightedPool = roomTypes.map((type) => ({\n                type,\n                weight: Math.max(0, PORTAL_ROOM_WEIGHTS[type] ?? 0),\n            }));\n            const totalWeight = weightedPool.reduce((sum, item) => sum + item.weight, 0);\n            while (picked.length < count) {\n                let selected;\n                if (totalWeight <= 0) {\n                    selected = pickOne(roomTypes) ?? roomTypes[0];\n                }\n                else {\n                    let roll = Math.random() * totalWeight;\n                    selected = weightedPool[weightedPool.length - 1].type;\n                    for (const item of weightedPool) {\n                        roll -= item.weight;\n                        if (roll <= 0) {\n                            selected = item.type;\n                            break;\n                        }\n                    }\n                }\n                picked.push(selected);\n            }\n            return picked;\n        }\n        function generatePortals() {\n            const currentArea = gameStore.statData._ || '';\n            const currentRoomType = gameStore.statData._ || '';\n            const stats = gameStore.statData.$ || {};\n            const roomsPassed = stats. ?? 0;\n            const isStartArea = currentArea === '';\n            const isBossRoom = currentRoomType === '';\n            //  Special:  or   next floor area portals \n            if (isStartArea || isBossRoom) {\n                let targetFloor = null;\n                if (isStartArea) {\n                    targetFloor = '';\n                }\n                else {\n                    const currentFloor = getFloorForArea(currentArea);\n                    if (currentFloor)\n                        targetFloor = getNextFloor(currentFloor);\n                }\n                if (targetFloor && FLOOR_MAP[targetFloor]) {\n                    const candidates = FLOOR_MAP[targetFloor].filter(a => a !== currentArea);\n                    const picked = shuffle(candidates).slice(0, 3);\n                    return picked.map(areaName => ({\n                        label: areaName,\n                        roomType: '',\n                        areaName,\n                        floorName: targetFloor,\n                        isFloorTransition: true,\n                        ...AREA_PORTAL_VISUAL,\n                    }));\n                }\n            }\n            //  Boss room probability: rooms >= 8  (rooms - 7) * 20% \n            if (roomsPassed >= 8) {\n                const bossChance = (roomsPassed - 7) * 0.2;\n                if (Math.random() < bossChance) {\n                    const vis = PORTAL_ROOM_VISUALS[''];\n                    return [{ label: '', roomType: '', isFloorTransition: false, ...vis }];\n                }\n            }\n            //  Normal: 1-3 weighted room portals (30%/50%/20%, with replacement) \n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const count = rollPortalCount();\n            const picked = pickWeightedRoomTypes(availableRoomTypes, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        // //hasLeave \n        const portalChoices = computed(() => {\n            if (!gameStore.hasLeave) {\n                cachedPortals = [];\n                cachedPortalFingerprint = '';\n                return [];\n            }\n            //  +  + \n            const area = gameStore.statData._ || '';\n            const roomType = gameStore.statData._ || '';\n            const rooms = (gameStore.statData.$?. ?? 0);\n            const merchantDefeated = parseMerchantDefeatedValue(gameStore.statData._);\n            const fingerprint = `${area}|${roomType}|${rooms}|${merchantDefeated ? 1 : 0}`;\n            if (fingerprint !== cachedPortalFingerprint) {\n                cachedPortalFingerprint = fingerprint;\n                cachedPortals = generatePortals();\n            }\n            return cachedPortals;\n        });\n        //  Room type  $ field mapping \n        const ROOM_STAT_KEY = {\n            '': '', '': '', '': '',\n            '': '', '': '', '': '', '': '',\n        };\n        const buildQueuedPortalAction = (portal) => {\n            if (portal.isFloorTransition) {\n                // \n                gameStore.setPendingPortalChanges({\n                    area: portal.areaName,\n                    roomType: '',\n                    resetRoomCounter: true,\n                    //  +1 +1 +1\n                    incrementKeys: ['', '', ''],\n                    enemyName: '',\n                });\n                console.info(`[Portal] Floor transition queued  area: ${portal.areaName}, first room: `);\n                const enterText = `${portal.areaName}`;\n                return {\n                    enterText,\n                    actionText: `<user>${enterText}`,\n                };\n            }\n            // \n            const incrementKeys = ['', ''];\n            const statKey = ROOM_STAT_KEY[portal.roomType];\n            if (statKey)\n                incrementKeys.push(statKey);\n            const currentArea = gameStore.statData._ || '';\n            const encounterMonster = portal.roomType === ''\n                ? pickLordMonsterByArea(currentArea)\n                : portal.roomType === ''\n                    ? pickBattleMonsterByArea(currentArea)\n                    : null;\n            const trapName = portal.roomType === ''\n                ? pickTrapByArea(currentArea)\n                : null;\n            const trapHpAfterDamage = portal.roomType === ''\n                ? Math.max(1, toNonNegativeInt(gameStore.statData._, 1) - 5)\n                : undefined;\n            let pendingStatDataFields;\n            if (portal.roomType === '') {\n                pendingStatDataFields = {\n                    _: trapName ?? '',\n                    _: trapHpAfterDamage,\n                };\n            }\n            else if (portal.roomType === '') {\n                const maxHp = Math.max(1, toNonNegativeInt(gameStore.statData._, toNonNegativeInt(gameStore.statData._, 1)));\n                pendingStatDataFields = {\n                    _: maxHp,\n                };\n            }\n            gameStore.setPendingPortalChanges({\n                roomType: portal.roomType,\n                incrementKeys,\n                enemyName: encounterMonster ?? '',\n            });\n            console.info(`[Portal] Room transition queued  type: ${portal.roomType}`);\n            const enterText = (portal.roomType === '' || portal.roomType === '') && encounterMonster\n                ? `${portal.roomType}${encounterMonster}`\n                : portal.roomType === '' && trapName\n                    ? `${portal.roomType}${trapName}`\n                    : `${portal.roomType}`;\n            return {\n                enterText,\n                actionText: `<user>${enterText}`,\n                pendingStatDataFields,\n            };\n        };\n        function generateChestLeavePortals() {\n            const generated = generatePortals();\n            if (generated.length > 0)\n                return generated;\n            const currentArea = gameStore.statData._ || '';\n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const count = rollPortalCount();\n            const picked = pickWeightedRoomTypes(availableRoomTypes, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        const handlePortalClick = async (portal) => {\n            if (gameStore.isGenerating)\n                return;\n            const { actionText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            gameStore.setPendingStatDataChanges(pendingStatDataFields ?? null);\n            gameStore.sendAction(actionText);\n        };\n        const handleChestPortalClick = async (portal) => {\n            if (gameStore.isGenerating || chestCollecting.value || chestStage.value !== 'opened')\n                return;\n            const { actionText, enterText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            const collectedRelic = chestRewardCollected.value ? chestRewardRelic.value : null;\n            const mergedPendingStatDataFields = {\n                ...(pendingStatDataFields ?? {}),\n            };\n            if (collectedRelic) {\n                //  user \n                const nextRelics = buildNextRelicInventory(collectedRelic);\n                mergedPendingStatDataFields._ = nextRelics;\n            }\n            gameStore.setPendingStatDataChanges(Object.keys(mergedPendingStatDataFields).length > 0 ? mergedPendingStatDataFields : null);\n            const relicName = collectedRelic?.name ?? '';\n            closeChestView();\n            if (relicName) {\n                gameStore.sendAction(`<user>${relicName}${enterText}`);\n                return;\n            }\n            gameStore.sendAction(actionText);\n        };\n        const openSaveLoad = () => {\n            gameStore.loadSaveEntries();\n            gameStore.isSaveLoadOpen = !gameStore.isSaveLoadOpen;\n        };\n        const openVariableUpdate = () => {\n            isVariableUpdateOpen.value = !isVariableUpdateOpen.value;\n        };\n        // toggleFullScreen imported from '../fullscreen'\n        //  Combat Test \n        const getSelectedTestRelicCount = (name) => {\n            return Math.max(0, Math.floor(selectedTestRelicCounts.value[name] ?? 0));\n        };\n        const setSelectedTestRelicCount = (name, next) => {\n            const value = Math.max(0, Math.floor(next));\n            if (value <= 0) {\n                delete selectedTestRelicCounts.value[name];\n                return;\n            }\n            selectedTestRelicCounts.value[name] = value;\n        };\n        const increaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) + 1);\n        };\n        const decreaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) - 1);\n        };\n        const buildSelectedRelicPayload = () => {\n            const next = {};\n            for (const relic of baseRelicsForTest.value) {\n                const count = getSelectedTestRelicCount(relic.name);\n                if (count > 0) {\n                    next[relic.name] = count;\n                }\n            }\n            return next;\n        };\n        const openCombatTestBuilder = () => {\n            gameStore.loadStatData();\n            const availableCardNames = new Set(allCardsForTest.value.map(c => c.name));\n            const availableRelicNames = new Set(baseRelicsForTest.value.map((relic) => relic.name));\n            const presetDeck = Array.isArray(gameStore.statData._)\n                ? gameStore.statData._.filter((name) => availableCardNames.has(name)).slice(0, 9)\n                : [];\n            const presetRelicsRaw = gameStore.statData._ ?? {};\n            const presetRelics = {};\n            for (const [name, value] of Object.entries(presetRelicsRaw)) {\n                if (!availableRelicNames.has(name))\n                    continue;\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (count <= 0)\n                    continue;\n                presetRelics[name] = count;\n            }\n            selectedTestDeck.value = [...presetDeck];\n            selectedTestEnemy.value = '';\n            selectedTestRelicCounts.value = presetRelics;\n            selectedCardCategoryTab.value = '';\n            selectedRelicCategoryTab.value = '';\n            combatTestStartAt999.value = false;\n            combatTestStep.value = 'deck';\n            activeModal.value = 'combatTestBuilder';\n        };\n        const addCardToTestDeck = (cardName) => {\n            if (selectedTestDeck.value.length >= 9)\n                return;\n            selectedTestDeck.value.push(cardName);\n        };\n        const removeCardFromTestDeck = (index) => {\n            if (index < 0 || index >= selectedTestDeck.value.length)\n                return;\n            selectedTestDeck.value.splice(index, 1);\n        };\n        const confirmCombatTestDeck = async () => {\n            if (selectedTestDeck.value.length !== 9) {\n                gameStore.error = '9';\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: [...selectedTestDeck.value],\n            });\n            if (!ok)\n                return;\n            if (allEnemyNamesForTest.value.length === 0) {\n                gameStore.error = ' enemyRegistry ';\n                return;\n            }\n            combatTestStep.value = 'enemy';\n        };\n        const confirmCombatTestEnemyAndStart = async () => {\n            if (!selectedTestEnemy.value) {\n                gameStore.error = '';\n                return;\n            }\n            const enemyDef = getEnemyByName(selectedTestEnemy.value);\n            if (!enemyDef) {\n                gameStore.error = `${selectedTestEnemy.value}`;\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: selectedTestEnemy.value,\n                _: buildSelectedRelicPayload(),\n            });\n            if (!ok)\n                return;\n            activeModal.value = null;\n            combatEnemyName.value = selectedTestEnemy.value;\n            activeCombatContext.value = 'combatTest';\n            combatTestStartAt999CurrentBattle.value = combatTestStartAt999.value;\n            showCombat.value = true;\n        };\n        const handleCombatEnd = async (win, finalStats, logs, negativeEffects) => {\n            const context = activeCombatContext.value;\n            const enemyName = combatEnemyName.value || (gameStore.statData._ || '');\n            pendingCombatNarrative.value = {\n                id: `${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n                context,\n                win,\n                enemyName,\n                text: buildCombatNarrative(win, enemyName, context, logs ?? []),\n            };\n            queueCombatMvuSync(win, finalStats, negativeEffects ?? []);\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            combatTestStartAt999CurrentBattle.value = false;\n            activeCombatContext.value = 'normal';\n            if (!win) {\n                closeShopView();\n                const narrative = pendingCombatNarrative.value;\n                pendingCombatNarrative.value = null;\n                if (narrative) {\n                    sendCombatNarrativeOnce(narrative, narrative.text);\n                }\n                console.log('[Combat] Result:', 'LOSE');\n                return;\n            }\n            if (context === 'shopRobbery' && enemyName === '') {\n                const ok = await gameStore.updateStatDataFields({ _: true });\n                if (ok) {\n                    shopRobbing.value = false;\n                    showShopView.value = true;\n                    applyMerchantDefeatedShopState();\n                }\n                else if (pendingCombatNarrative.value) {\n                    pendingCombatNarrative.value.context = 'normal';\n                }\n            }\n            const hasRewardOptions = startVictoryRewardFlow();\n            if (!hasRewardOptions) {\n                finalizeVictoryRewardFlow();\n            }\n            console.log('[Combat] Result:', 'WIN');\n        };\n        onBeforeUnmount(() => {\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearHotSpringCleanseTimer();\n            clearIdolRollTimer();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Dynamic Background \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_3))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createElementVNode(\"div\", {\n                        class: \"absolute inset-0\",\n                        style: _normalizeStyle({ backgroundColor: `rgba(0,0,0,${_unref(bgOverlayOpacity)})` })\n                    }, null, 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Sidebar: Individual Icons Top-Left (no back button, settings already has exit) \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(SettingsIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'settings',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeModal.value = 'settings'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Scroll),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'deck',\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeModal.value = 'deck'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Box),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'relics',\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeModal.value = 'relics'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(MapIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'map',\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeModal.value = 'map'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(magicBookSidebarIcon),\n                        label: _unref(canEditMagicBooks) ? '' : '',\n                        \"tooltip-side\": \"right\",\n                        active: _unref(canEditMagicBooks) && _unref(activeModal) === 'magicBooks',\n                        disabled: !_unref(canEditMagicBooks),\n                        onClick: openMagicBookModal\n                    }, null, 8 /* PROPS */, [\"icon\", \"label\", \"active\", \"disabled\"])\n                ]),\n                _createCommentVNode(\" Right sidebar: save/load only (reroll & edit moved into panel) \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Maximize),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        onClick: _unref(toggleFullScreen)\n                    }, null, 8 /* PROPS */, [\"icon\", \"onClick\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(BookOpen),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(gameStore).isSaveLoadOpen,\n                        onClick: openSaveLoad\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(FileText),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(isVariableUpdateOpen),\n                        onClick: openVariableUpdate\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"div\", {\n                        class: \"w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full\",\n                        style: _normalizeStyle({ maxWidth: _unref(textSettings).containerWidth + 'px' })\n                    }, [\n                        _createCommentVNode(\" Story Text Area \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createCommentVNode(\" Decorative Corners \"),\n                            _cache[41] || (_cache[41] = _createElementVNode(\"div\", { class: \"absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _cache[42] || (_cache[42] = _createElementVNode(\"div\", { class: \"absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Loading Indicator \"),\n                            (_unref(gameStore).isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[36] || (_cache[36] = [\n                                        _createStaticVNode(\"<div class=\\\"flex gap-1\\\" data-v-310d1a62><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0s;\\\" data-v-310d1a62></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.2s;\\\" data-v-310d1a62></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.4s;\\\" data-v-310d1a62></span></div><span class=\\\"text-dungeon-gold/60 font-ui text-sm\\\" data-v-310d1a62>...</span>\", 2)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Edit Mode \"),\n                            (_unref(gameStore).isEditing)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(gameStore).editingText) = $event)),\n                                        class: \"flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, null, 4 /* STYLE */), [\n                                        [_vModelText, _unref(gameStore).editingText]\n                                    ]),\n                                    _createCommentVNode(\" Edit Actions \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                            onClick: _cache[5] || (_cache[5] = ($event) => (_unref(gameStore).cancelEdit()))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(gameStore).saveEdit()))\n                                        }, \"  \")\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" Normal View (not editing) \"),\n                                    _createCommentVNode(\" Story Content \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, [\n                                        _createCommentVNode(\" Streaming text (during generation) \"),\n                                        (_unref(isStreamingEnabled) && _unref(gameStore).isGenerating && _unref(gameStore).streamingText)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString(_unref(gameStore).streamingText), 1 /* TEXT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" Final main text \"),\n                                                _createElementVNode(\"div\", _hoisted_12, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyMainLines), (line) => {\n                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                            key: line.key,\n                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                        }, [\n                                                            (line.segments.length > 0)\n                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                        key: segment.key,\n                                                                        class: _normalizeClass({\n                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                        })\n                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"\"))\n                                                        ], 2 /* CLASS */));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    (_unref(storyTucaoSections).length > 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyTucaoSections), (section, sectionIndex) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: section.key,\n                                                                    class: \"story-tucao-wrap\"\n                                                                }, [\n                                                                    _createElementVNode(\"button\", {\n                                                                        class: \"story-tucao-toggle\",\n                                                                        type: \"button\",\n                                                                        onClick: ($event) => (toggleTucao(section.key))\n                                                                    }, _toDisplayString(isTucaoExpanded(section.key)\n                                                                        ? ` ${sectionIndex + 1}`\n                                                                        : `  ${sectionIndex + 1}`), 9 /* TEXT, PROPS */, _hoisted_15),\n                                                                    _createVNode(_Transition, { name: \"tucao-expand\" }, {\n                                                                        default: _withCtx(() => [\n                                                                            (isTucaoExpanded(section.key))\n                                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(section.lines, (line) => {\n                                                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                                                            key: line.key,\n                                                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                                                        }, [\n                                                                                            (line.segments.length > 0)\n                                                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                                        key: segment.key,\n                                                                                                        class: _normalizeClass({\n                                                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                                                        })\n                                                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \"\"))\n                                                                                        ], 2 /* CLASS */));\n                                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                                ]))\n                                                                                : _createCommentVNode(\"v-if\", true)\n                                                                        ]),\n                                                                        _: 2 /* DYNAMIC */\n                                                                    }, 1024 /* DYNAMIC_SLOTS */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ], 4 /* STYLE */),\n                                    _createCommentVNode(\" Options Section \"),\n                                    (!_unref(gameStore).isGenerating && (_unref(gameStore).options.length > 0 || _unref(gameStore).hasOptionE || _unref(gameStore).hasLeave || _unref(gameStore).hasRebirth))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                            _cache[40] || (_cache[40] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2\" }, null, -1 /* CACHED */)),\n                                            _createCommentVNode(\" A-D Normal Options \"),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameStore).options, (option, i) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 'opt-' + i,\n                                                    class: \"w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1\",\n                                                    onClick: ($event) => (handleOptionClick(option))\n                                                }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_19));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createCommentVNode(\" E Option: Special Room Action Button \"),\n                                            (_unref(gameStore).hasOptionE && _unref(specialOptionConfig))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]\",\n                                                    style: _normalizeStyle({\n                                                        backgroundColor: _unref(specialOptionConfig).bgColor,\n                                                        borderColor: _unref(specialOptionConfig).borderColor,\n                                                        color: _unref(specialOptionConfig).textColor,\n                                                        boxShadow: `0 0 20px ${_unref(specialOptionConfig).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`,\n                                                    }),\n                                                    onClick: handleSpecialOption\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_unref(specialOptionConfig).icon), 1 /* TEXT */),\n                                                    _createTextVNode(\" \" + _toDisplayString(_unref(specialOptionConfig).label), 1 /* TEXT */)\n                                                ], 4 /* STYLE */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Leave] Portal System \"),\n                                            (_unref(gameStore).hasLeave && _unref(portalChoices).length > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                                    _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_22, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(portalChoices), (portal, i) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 'portal-' + i,\n                                                                class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95\",\n                                                                style: _normalizeStyle({\n                                                                    backgroundColor: portal.bgColor,\n                                                                    borderColor: portal.borderColor,\n                                                                    boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                                }),\n                                                                onClick: ($event) => (handlePortalClick(portal))\n                                                            }, [\n                                                                _createCommentVNode(\" Portal glow ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                                    style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                                }, null, 4 /* STYLE */),\n                                                                _createCommentVNode(\" Portal icon \"),\n                                                                _createElementVNode(\"span\", _hoisted_24, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                                _createCommentVNode(\" Portal label \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                                    style: _normalizeStyle({ color: portal.textColor })\n                                                                }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                                _createCommentVNode(\" Animated ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                                    style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                                }, null, 4 /* STYLE */)\n                                                            ], 12 /* STYLE, PROPS */, _hoisted_23));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Rebirth] Reset Button \"),\n                                            (_unref(gameStore).hasRebirth)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                                    _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"text-center text-red-300/70 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_26, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"group relative px-7 py-3 rounded-lg border-2 font-heading text-sm tracking-wider transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] bg-red-950/45 border-red-500/60 text-red-100 shadow-[0_0_14px_rgba(239,68,68,0.35)] hover:shadow-[0_0_20px_rgba(248,113,113,0.5)]\",\n                                                            disabled: _unref(gameStore).isGenerating,\n                                                            onClick: handleRebirthClick\n                                                        }, [...(_cache[38] || (_cache[38] = [\n                                                                _createElementVNode(\"span\", { class: \"text-base mr-2\" }, \"\", -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_27)\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(hotSpringCleanseMessage))\n                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                            key: `spring-cleanse-${_unref(hotSpringCleanseMessage).id}`,\n                                            class: \"spring-cleanse-float\"\n                                        }, _toDisplayString(_unref(hotSpringCleanseMessage).text), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" Error Display \"),\n                                    (_unref(gameStore).error)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(_unref(gameStore).error), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Input Area \"),\n                        _createElementVNode(\"div\", _hoisted_29, [\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => (_isRef(inputText) ? (inputText).value = $event : null)),\n                                    type: \"text\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    placeholder: _unref(gameStore).isGenerating ? '...' : '...',\n                                    class: \"w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 pr-14 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    onKeydown: _withKeys(handleSendInput, [\"enter\"])\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_31), [\n                                    [_vModelText, _unref(inputText)]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: handleSendInput\n                                }, [\n                                    _createVNode(_unref(Send), { class: \"size-5\" })\n                                ], 8 /* PROPS */, _hoisted_32)\n                            ])\n                        ])\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Player Status HUD (Bottom Left) - Collapsible \"),\n                _createElementVNode(\"div\", _hoisted_33, [\n                    _createCommentVNode(\" Toggle Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md\",\n                        title: _unref(isStatusOpen) ? '' : '',\n                        onClick: _cache[8] || (_cache[8] = ($event) => (isStatusOpen.value = !_unref(isStatusOpen)))\n                    }, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(isStatusOpen) ? _unref(ChevronDown) : _unref(Activity)), { class: \"size-5\" }))\n                    ], 8 /* PROPS */, _hoisted_34),\n                    _createCommentVNode(\" Expandable Status Panel \"),\n                    _createVNode(_Transition, { name: \"status-slide\" }, {\n                        default: _withCtx(() => [\n                            (_unref(isStatusOpen))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                    _createCommentVNode(\" Decorative Elements \"),\n                                    _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[53] || (_cache[53] = _createElementVNode(\"div\", { class: \"absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[54] || (_cache[54] = _createElementVNode(\"div\", { class: \"absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" HP & MP: Container-fill style \"),\n                                    _createElementVNode(\"div\", _hoisted_36, [\n                                        _createCommentVNode(\" HP Heart Container \"),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-heart\",\n                                                title: `HP: ${_unref(displayHp)}/${_unref(displayMaxHp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_39, [\n                                                    _cache[43] || (_cache[43] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"heartClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"hpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"hpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#8a0e0e\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#cc2222\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#ee4444\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Heart outline (dark) \"),\n                                                    _cache[44] || (_cache[44] = _createElementVNode(\"path\", {\n                                                        d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\",\n                                                        fill: \"#1a0808\",\n                                                        stroke: \"#5c1a1a\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level (clipped to heart) \"),\n                                                    _createElementVNode(\"g\", _hoisted_40, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(hpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(hpPercent) / 100) * 60,\n                                                            fill: \"url(#hpGradient)\",\n                                                            filter: \"url(#hpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_41)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[45] || (_cache[45] = _createElementVNode(\"ellipse\", {\n                                                        cx: \"22\",\n                                                        cy: \"18\",\n                                                        rx: \"5\",\n                                                        ry: \"4\",\n                                                        fill: \"rgba(255,255,255,0.12)\",\n                                                        transform: \"rotate(-20,22,18)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_38),\n                                            _createElementVNode(\"span\", _hoisted_42, [\n                                                _createElementVNode(\"span\", _hoisted_43, _toDisplayString(_unref(displayHp)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_44, \"/\" + _toDisplayString(_unref(displayMaxHp)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\" MP Crystal Container \"),\n                                        _createElementVNode(\"div\", _hoisted_45, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-mana\",\n                                                title: `MP: ${_unref(displayMp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_47, [\n                                                    _cache[46] || (_cache[46] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"manaClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 4 L54 24 L32 60 L10 24 Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"mpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"mpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#1a1a8a\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#3344cc\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#5566ee\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Crystal outline \"),\n                                                    _cache[47] || (_cache[47] = _createElementVNode(\"path\", {\n                                                        d: \"M32 4 L54 24 L32 60 L10 24 Z\",\n                                                        fill: \"#080818\",\n                                                        stroke: \"#1a1a5c\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level \"),\n                                                    _createElementVNode(\"g\", _hoisted_48, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(mpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(mpPercent) / 100) * 60,\n                                                            fill: \"url(#mpGradient)\",\n                                                            filter: \"url(#mpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_49)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[48] || (_cache[48] = _createElementVNode(\"polygon\", {\n                                                        points: \"26,14 32,8 38,14 32,20\",\n                                                        fill: \"rgba(255,255,255,0.1)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_46),\n                                            _createElementVNode(\"span\", _hoisted_50, [\n                                                _createElementVNode(\"span\", _hoisted_51, _toDisplayString(_unref(displayMp)), 1 /* TEXT */)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Divider \"),\n                                    _cache[55] || (_cache[55] = _createElementVNode(\"div\", { class: \"my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" Dice Range Row \"),\n                                    _createElementVNode(\"div\", _hoisted_52, [\n                                        _createElementVNode(\"div\", _hoisted_53, [\n                                            _createVNode(_unref(Dices), { class: \"size-4 text-dungeon-gold-dim drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_54, [\n                                                _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(displayMinDice)), 1 /* TEXT */),\n                                                _cache[49] || (_cache[49] = _createElementVNode(\"span\", { class: \"text-gray-500\" }, \"~\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_56, _toDisplayString(_unref(displayMaxDice)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _cache[50] || (_cache[50] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Dice\", -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\" Gold Row \"),\n                                    _createElementVNode(\"div\", _hoisted_57, [\n                                        _createElementVNode(\"div\", _hoisted_58, [\n                                            _createVNode(_unref(Coins), { class: \"size-4 drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_59, _toDisplayString(_unref(displayGold)), 1 /* TEXT */)\n                                        ]),\n                                        _cache[51] || (_cache[51] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Gold\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\" Modals \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'map',\n                    onClose: _cache[9] || (_cache[9] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [...(_cache[56] || (_cache[56] = [\n                            _createElementVNode(\"div\", { class: \"w-full h-64 bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center rounded\" }, [\n                                _createElementVNode(\"span\", { class: \"font-heading text-dungeon-gold/30 text-2xl\" }, \"MAP_RENDER_TARGET\")\n                            ], -1 /* CACHED */)\n                        ]))]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'deck',\n                    onClose: _cache[10] || (_cache[10] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(resolvedDeck).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_60, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedDeck), (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"hover:scale-105 transition-transform flex justify-center\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_61, [\n                                _createVNode(_unref(Scroll), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[57] || (_cache[57] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"  \", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'magicBooks',\n                    \"panel-class\": \"max-w-[92rem] max-h-[94%]\",\n                    onClose: _cache[11] || (_cache[11] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_62, [\n                            (_unref(carryableMagicBookNames).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_63, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(carryableMagicBookNames), (bookName) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `magic-book-${bookName}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"relative rounded-lg border p-3 text-left transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[#130c08]/80\", _unref(carriedMagicBookSet).has(bookName)\n                                                    ? 'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.45)] ring-1 ring-dungeon-gold/70'\n                                                    : 'border-dungeon-brown/70 hover:border-dungeon-gold/45']),\n                                            disabled: _unref(isUpdatingMagicBooks),\n                                            onClick: ($event) => (toggleMagicBook(bookName))\n                                        }, [\n                                            _createElementVNode(\"div\", {\n                                                class: _normalizeClass([\"relative w-full overflow-hidden rounded-md border\", _unref(carriedMagicBookSet).has(bookName) ? 'border-dungeon-gold/60' : 'border-dungeon-brown/60'])\n                                            }, [\n                                                _createElementVNode(\"img\", {\n                                                    src: getMagicBookCoverUrl(bookName),\n                                                    alt: `${bookName} `,\n                                                    class: _normalizeClass([\"w-full [aspect-ratio:832/1216] object-cover transition-all duration-300\", _unref(carriedMagicBookSet).has(bookName)\n                                                            ? 'brightness-100 saturate-110'\n                                                            : 'brightness-50 saturate-60']),\n                                                    loading: \"lazy\"\n                                                }, null, 10 /* CLASS, PROPS */, _hoisted_65),\n                                                _cache[58] || (_cache[58] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-black/55 via-black/10 to-black/38\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_66, [\n                                                    _createElementVNode(\"div\", _hoisted_67, _toDisplayString(bookName) + \"\", 1 /* TEXT */)\n                                                ])\n                                            ], 2 /* CLASS */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_64));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_68, \"  \"))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'relics',\n                    onClose: _cache[12] || (_cache[12] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(relicEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_69, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicEntries), (relic) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: relic.name,\n                                        type: \"button\",\n                                        class: \"relative flex flex-col items-center p-1.5 rounded border border-dungeon-brown/30 bg-[#1a0f08]/35 hover:border-dungeon-gold/40 transition-colors focus:outline-none focus:border-dungeon-gold/60\",\n                                        onMouseenter: ($event) => (showRelicTooltip($event, relic)),\n                                        onMouseleave: hideRelicTooltip,\n                                        onFocus: ($event) => (showRelicTooltip($event, relic)),\n                                        onBlur: hideRelicTooltip,\n                                        onTouchstartPassive: ($event) => (handleRelicTouchStart($event, relic)),\n                                        onTouchend: handleRelicTouchEnd,\n                                        onTouchcancel: handleRelicTouchEnd\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_71, [\n                                            _createVNode(_unref(Box), { class: \"size-9 text-dungeon-gold/75\" }),\n                                            _createElementVNode(\"span\", _hoisted_72, \"x\" + _toDisplayString(relic.count), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_73, _toDisplayString(relic.name), 1 /* TEXT */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_70));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_74, [\n                                _createVNode(_unref(Box), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[59] || (_cache[59] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                (_unref(relicTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed z-[220] pointer-events-none relic-tooltip\",\n                        style: _normalizeStyle({ left: `${_unref(relicTooltip).x}px`, top: `${_unref(relicTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_75, _toDisplayString(_unref(relicTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_76, _toDisplayString(_unref(relicTooltip).description), 1 /* TEXT */)\n                    ], 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Settings Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'settings',\n                    onClose: _cache[25] || (_cache[25] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_77, [\n                            _createCommentVNode(\" Text Display Settings Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[69] || (_cache[69] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_78, [\n                                    _createCommentVNode(\" Font Size \"),\n                                    _createElementVNode(\"div\", _hoisted_79, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_80, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[13] || (_cache[13] = ($event) => (_unref(textSettings).fontSize = Math.max(12, _unref(textSettings).fontSize - 1)))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_81, _toDisplayString(_unref(textSettings).fontSize) + \"px\", 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[14] || (_cache[14] = ($event) => (_unref(textSettings).fontSize = Math.min(28, _unref(textSettings).fontSize + 1)))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Line Height \"),\n                                    _createElementVNode(\"div\", _hoisted_82, [\n                                        _cache[61] || (_cache[61] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_83, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[15] || (_cache[15] = ($event) => (_unref(textSettings).lineHeight = Math.max(1.2, +(_unref(textSettings).lineHeight - 0.1).toFixed(1))))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_84, _toDisplayString(_unref(textSettings).lineHeight), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[16] || (_cache[16] = ($event) => (_unref(textSettings).lineHeight = Math.min(3.0, +(_unref(textSettings).lineHeight + 0.1).toFixed(1))))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Font Family \"),\n                                    _createElementVNode(\"div\", _hoisted_85, [\n                                        _cache[63] || (_cache[63] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(textSettings).fontFamily) = $event)),\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui\"\n                                        }, [...(_cache[62] || (_cache[62] = [\n                                                _createElementVNode(\"option\", { value: \"'Cinzel', serif\" }, \"Cinzel ()\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Inter', sans-serif\" }, \"Inter\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MedievalSharp', cursive\" }, \"MedievalSharp\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MaShanZheng', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MagicBookTitle', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"serif\" }, \"Serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"sans-serif\" }, \"Sans-serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Microsoft YaHei', sans-serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'SimSun', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'KaiTi', serif\" }, \"\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(textSettings).fontFamily]\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Container Width \"),\n                                    _createElementVNode(\"div\", _hoisted_86, [\n                                        _cache[64] || (_cache[64] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_87, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event) => ((_unref(textSettings).containerWidth) = $event)),\n                                                type: \"range\",\n                                                min: \"600\",\n                                                max: \"1600\",\n                                                step: \"50\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(textSettings).containerWidth,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_88, _toDisplayString(_unref(textSettings).containerWidth) + \"px\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Background Clarity \"),\n                                    _createElementVNode(\"div\", _hoisted_89, [\n                                        _cache[65] || (_cache[65] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_90, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => (_isRef(bgOverlayOpacity) ? (bgOverlayOpacity).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"0.8\",\n                                                step: \"0.05\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgOverlayOpacity),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_91, _toDisplayString(Math.round((1 - _unref(bgOverlayOpacity)) * 100)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_92, [\n                                        _cache[66] || (_cache[66] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event) => (_isRef(selectedBgmTrackId) ? (selectedBgmTrackId).value = $event : null)),\n                                            disabled: _unref(bgmTracks).length === 0,\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui disabled:opacity-50 disabled:cursor-not-allowed\"\n                                        }, [\n                                            (_unref(bgmTracks).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"option\", _hoisted_94, \"\"))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(bgmTracks), (track) => {\n                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                    key: track.id,\n                                                    value: track.id\n                                                }, _toDisplayString(track.name), 9 /* TEXT, PROPS */, _hoisted_95));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ], 8 /* PROPS */, _hoisted_93), [\n                                            [_vModelSelect, _unref(selectedBgmTrackId)]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_96, [\n                                        _cache[67] || (_cache[67] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_97, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event) => (_isRef(bgmVolumePercent) ? (bgmVolumePercent).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"100\",\n                                                step: \"1\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgmVolumePercent),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_98, _toDisplayString(_unref(bgmVolumePercent)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_99, [\n                                        _cache[68] || (_cache[68] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"label\", _hoisted_100, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event) => (_isRef(isStreamingEnabled) ? (isStreamingEnabled).value = $event : null)),\n                                                type: \"checkbox\",\n                                                class: \"h-4 w-4 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelCheckbox, _unref(isStreamingEnabled)]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_101, _toDisplayString(_unref(isStreamingEnabled) ? '' : ''), 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _cache[71] || (_cache[71] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-dungeon-gold/20\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" System Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[70] || (_cache[70] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_102, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded\",\n                                        onClick: _cache[23] || (_cache[23] =\n                                            //@ts-ignore\n                                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded\",\n                                        onClick: _cache[24] || (_cache[24] = ($event) => (_ctx.$emit('backToSplash')))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2\",\n                                        onClick: openCombatTestBuilder\n                                    }, \"   \")\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Test Builder Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'combatTestBuilder',\n                    onClose: _cache[29] || (_cache[29] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_103, [\n                            (_unref(combatTestStep) === 'deck')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_104, [\n                                        _cache[72] || (_cache[72] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"19\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_105, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_106, [\n                                        _createElementVNode(\"div\", _hoisted_107, [\n                                            _cache[73] || (_cache[73] = _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_108, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_109, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(selectedTestDeckCards), (entry) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `selected-card-${entry.idx}`,\n                                                    class: \"w-full text-left flex items-stretch gap-2 rounded border border-dungeon-gold/20 bg-[#1a0f08]/70 px-2 py-2 hover:border-dungeon-gold/50 transition-colors\",\n                                                    onClick: ($event) => (removeCardFromTestDeck(entry.idx))\n                                                }, [\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"w-1.5 rounded\", getCardCategoryStripClass(entry.card.category)])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createElementVNode(\"div\", _hoisted_111, [\n                                                        _createElementVNode(\"div\", _hoisted_112, [\n                                                            _createElementVNode(\"span\", _hoisted_113, _toDisplayString(entry.card.name), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: _normalizeClass([\"text-[10px] px-1 rounded border\", getCardTypeBadgeClass(entry.card.type)])\n                                                            }, _toDisplayString(entry.card.type), 3 /* TEXT, CLASS */),\n                                                            _createElementVNode(\"span\", _hoisted_114, _toDisplayString(entry.card.category), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"mt-1 text-[10px] text-dungeon-paper/70 truncate\",\n                                                            title: entry.card.description\n                                                        }, _toDisplayString(entry.card.description), 9 /* TEXT, PROPS */, _hoisted_115)\n                                                    ]),\n                                                    _cache[74] || (_cache[74] = _createElementVNode(\"span\", { class: \"text-[10px] text-red-300/85 shrink-0 self-center\" }, \"\", -1 /* CACHED */))\n                                                ], 8 /* PROPS */, _hoisted_110));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(selectedTestDeckCards).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_116, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_117, [\n                                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(9, (idx) => {\n                                                return _createElementVNode(\"div\", {\n                                                    key: `deck-slot-${idx}`,\n                                                    class: _normalizeClass([\"h-2 rounded border\", idx <= _unref(selectedTestDeck).length\n                                                            ? 'bg-dungeon-gold/70 border-dungeon-gold/60'\n                                                            : 'bg-black/20 border-dungeon-brown/40'])\n                                                }, null, 2 /* CLASS */);\n                                            }), 64 /* STABLE_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_118, [\n                                        _createElementVNode(\"div\", _hoisted_119, [\n                                            _createElementVNode(\"div\", _hoisted_120, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(cardCategoryTabsForTest), (category) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `card-tab-${category}`,\n                                                        class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedCardCategoryTab) === category\n                                                                ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                        onClick: ($event) => (selectedCardCategoryTab.value = category)\n                                                    }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_121));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredCardCategoryGroupsForTest), (group) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: `card-category-${group.category}`,\n                                                    class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_122, [\n                                                        _createElementVNode(\"h4\", _hoisted_123, _toDisplayString(group.category), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_124, _toDisplayString(group.cards.length) + \" \", 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_125, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.cards, (card) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `all-card-${group.category}-${card.id}`,\n                                                                class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(selectedTestDeck).length >= 9,\n                                                                onClick: ($event) => (addCardToTestDeck(card.name))\n                                                            }, [\n                                                                _createVNode(DungeonCard, {\n                                                                    card: card,\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]),\n                                                                _cache[75] || (_cache[75] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-dungeon-gold/80\" }, \"\", -1 /* CACHED */))\n                                                            ], 8 /* PROPS */, _hoisted_126));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(filteredCardCategoryGroupsForTest).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_127, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_128, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[26] || (_cache[26] = ($event) => (activeModal.value = null))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: _unref(selectedTestDeck).length !== 9,\n                                            onClick: confirmCombatTestDeck\n                                        }, \"  \", 8 /* PROPS */, _hoisted_129)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createElementVNode(\"div\", _hoisted_130, [\n                                        _cache[76] || (_cache[76] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"2\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_131, \": 9: \" + _toDisplayString(_unref(selectedRelicTotalCount)) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_132, [\n                                        _createElementVNode(\"div\", _hoisted_133, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allEnemyNamesForTest), (enemyName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `enemy-${enemyName}`,\n                                                    class: _normalizeClass([\"text-left px-3 py-2 rounded border text-xs transition-colors\", _unref(selectedTestEnemy) === enemyName\n                                                            ? 'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold'\n                                                            : 'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),\n                                                    onClick: ($event) => (selectedTestEnemy.value = enemyName)\n                                                }, _toDisplayString(enemyName), 11 /* TEXT, CLASS, PROPS */, _hoisted_134));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_135, [\n                                        _cache[77] || (_cache[77] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center justify-between\" }, [\n                                            _createElementVNode(\"h4\", { class: \"font-heading text-dungeon-gold text-xs tracking-wider uppercase\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/60\" }, \" MVU `_`\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_136, [\n                                            _createElementVNode(\"div\", _hoisted_137, [\n                                                _createElementVNode(\"div\", _hoisted_138, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicCategoryTabsForTest), (category) => {\n                                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: `relic-tab-${category}`,\n                                                            class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedRelicCategoryTab) === category\n                                                                    ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                    : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                            onClick: ($event) => (selectedRelicCategoryTab.value = category)\n                                                        }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_139));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredRelicCategoryGroupsForTest), (group) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: `relic-category-${group.category}`,\n                                                        class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_140, [\n                                                            _createElementVNode(\"h5\", _hoisted_141, _toDisplayString(group.category), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_142, _toDisplayString(group.relics.length) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_143, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.relics, (relic) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: `test-relic-${group.category}-${relic.id}`,\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#1a0f08]/70 p-2\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_144, [\n                                                                        _createElementVNode(\"div\", _hoisted_145, [\n                                                                            _createElementVNode(\"div\", _hoisted_146, _toDisplayString(relic.name), 1 /* TEXT */),\n                                                                            _createElementVNode(\"div\", _hoisted_147, _toDisplayString(relic.rarity), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_148, [\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold\",\n                                                                                onClick: ($event) => (decreaseSelectedRelic(relic.name))\n                                                                            }, \" - \", 8 /* PROPS */, _hoisted_149),\n                                                                            _createElementVNode(\"span\", _hoisted_150, _toDisplayString(getSelectedTestRelicCount(relic.name)), 1 /* TEXT */),\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown\",\n                                                                                onClick: ($event) => (increaseSelectedRelic(relic.name))\n                                                                            }, \" + \", 8 /* PROPS */, _hoisted_151)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_152, _toDisplayString(relic.effect), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (_unref(filteredRelicCategoryGroupsForTest).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_153, \"  \"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"label\", _hoisted_154, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => (_isRef(combatTestStartAt999) ? (combatTestStartAt999).value = $event : null)),\n                                            type: \"checkbox\",\n                                            class: \"accent-amber-500\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelCheckbox, _unref(combatTestStartAt999)]\n                                        ]),\n                                        _cache[78] || (_cache[78] = _createElementVNode(\"span\", null, \" 999  HP/MP=999\", -1 /* CACHED */))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_155, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[28] || (_cache[28] = ($event) => (combatTestStep.value = 'deck'))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: !_unref(selectedTestEnemy),\n                                            onClick: confirmCombatTestEnemyAndStart\n                                        }, \"  \", 8 /* PROPS */, _hoisted_156)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Save/Load Panel \"),\n                _createVNode(SaveLoadPanel, {\n                    \"is-open\": _unref(gameStore).isSaveLoadOpen,\n                    entries: _unref(gameStore).saveEntries,\n                    onClose: _cache[30] || (_cache[30] = ($event) => (_unref(gameStore).isSaveLoadOpen = false))\n                }, null, 8 /* PROPS */, [\"is-open\", \"entries\"]),\n                _createCommentVNode(\" Variable Update Viewer \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(isVariableUpdateOpen),\n                    onClose: _cache[31] || (_cache[31] = ($event) => (isVariableUpdateOpen.value = false))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(gameStore).variableUpdateText)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_157, [\n                                _createElementVNode(\"pre\", _hoisted_158, _toDisplayString(_unref(gameStore).variableUpdateText), 1 /* TEXT */)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_159, \" <UpdateVariable>  <update> \"))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Shop Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showShopView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_160, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(shopBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_161),\n                                _cache[80] || (_cache[80] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/22\" }, null, -1 /* CACHED */)),\n                                (!_unref(isMerchantDefeated))\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 0,\n                                        src: _unref(shopMerchantPortraitUrl),\n                                        class: \"pointer-events-none absolute left-0 bottom-0 z-[99] h-[92vh] max-h-[1216px] w-auto object-contain\",\n                                        alt: \"\"\n                                    }, null, 8 /* PROPS */, _hoisted_162))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"div\", _hoisted_163, [\n                                    _createElementVNode(\"div\", _hoisted_164, [\n                                        _cache[79] || (_cache[79] = _createElementVNode(\"div\", { class: \"shop-panel-head\" }, [\n                                            _createElementVNode(\"div\", { class: \"font-heading text-xl text-amber-100\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_165, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(shopProducts), (item) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: item.key,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"shop-item-card\", { 'is-sold': item.sold }]),\n                                                    disabled: item.sold || _unref(shopBuying),\n                                                    onClick: ($event) => (buyShopProduct(item)),\n                                                    onMouseenter: ($event) => (showShopProductTooltip($event, item)),\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: ($event) => (showShopProductTooltip($event, item)),\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: ($event) => (handleShopProductTouchStart($event, item)),\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_167, [\n                                                        _createVNode(_unref(Box), { class: \"shop-item-icon\" })\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_168, [\n                                                        _createVNode(_unref(Coins), { class: \"size-3.5\" }),\n                                                        _createElementVNode(\"span\", null, _toDisplayString(item.finalPrice), 1 /* TEXT */)\n                                                    ])\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_166));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(shopProducts).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_169, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_170, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-rob-btn px-5 py-2 font-ui text-xs tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing) || _unref(isMerchantDefeated),\n                                                style: _normalizeStyle({ opacity: _unref(shopRobBtnOpacity) }),\n                                                onClick: handleShopRobClick\n                                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_171),\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-exit-btn px-7 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing),\n                                                onClick: exitShop\n                                            }, \"  \", 8 /* PROPS */, _hoisted_172)\n                                        ])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Treasure Chest Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showChestView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_173, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(chestBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\",\n                                    onLoad: handleChestBgLoaded\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_174),\n                                (_unref(chestStage) === 'opened')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_175, [\n                                        _createElementVNode(\"div\", _hoisted_176, [\n                                            (_unref(chestRewardRelic) && _unref(chestRewardVisible))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"pointer-events-auto chest-reward-btn\", { 'is-collected': _unref(chestRewardCollected) }]),\n                                                    disabled: _unref(chestCollecting) || _unref(chestRewardCollected),\n                                                    onClick: collectChestReward,\n                                                    onMouseenter: showChestRewardTooltip,\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: showChestRewardTooltip,\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: handleChestRewardTouchStart,\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createVNode(_unref(Box), { class: \"chest-reward-icon\" })\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_177))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_178, [\n                                            _createElementVNode(\"div\", _hoisted_179, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(chestPortalChoices), (portal, i) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `chest-portal-${i}`,\n                                                        class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                        style: _normalizeStyle({\n                                                            backgroundColor: portal.bgColor,\n                                                            borderColor: portal.borderColor,\n                                                            boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                        }),\n                                                        disabled: _unref(chestCollecting),\n                                                        onClick: ($event) => (handleChestPortalClick(portal))\n                                                    }, [\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                            style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                        }, null, 4 /* STYLE */),\n                                                        _createElementVNode(\"span\", _hoisted_181, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                            style: _normalizeStyle({ color: portal.textColor })\n                                                        }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                            style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                        }, null, 4 /* STYLE */)\n                                                    ], 12 /* STYLE, PROPS */, _hoisted_180));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(chestStage) === 'closed')\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 1,\n                                        type: \"button\",\n                                        \"aria-label\": \"\",\n                                        class: \"absolute left-1/2 top-1/2 h-[42vh] max-h-[360px] min-h-[220px] w-[36vw] max-w-[540px] min-w-[260px] -translate-x-1/2 -translate-y-1/2 cursor-pointer rounded-2xl border-0 bg-transparent p-0 opacity-0\",\n                                        disabled: _unref(chestRolling),\n                                        onClick: handleChestCenterClick\n                                    }, null, 8 /* PROPS */, _hoisted_182))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Idol Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showIdolView))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"absolute inset-0 z-[96] bg-black overflow-hidden\",\n                                onPointermove: handleIdolDicePointerMove,\n                                onPointerup: handleIdolDicePointerUp,\n                                onPointercancel: handleIdolDicePointerUp\n                            }, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(idolBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_183),\n                                _createElementVNode(\"div\", _hoisted_184, [\n                                    _createElementVNode(\"div\", _hoisted_185, [\n                                        _createElementVNode(\"div\", _hoisted_186, [\n                                            _cache[81] || (_cache[81] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"1\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotMaxHpRef\",\n                                                ref: idolSlotMaxHpRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'maxHp',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'maxHp',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_187, [\n                                            _cache[82] || (_cache[82] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"1\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotMpRef\",\n                                                ref: idolSlotMpRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'mp',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'mp',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_188, [\n                                            _cache[83] || (_cache[83] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"2\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotGoldRef\",\n                                                ref: idolSlotGoldRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'gold',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'gold',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", {\n                                        ref_key: \"idolDiceStageRef\",\n                                        ref: idolDiceStageRef,\n                                        class: \"idol-dice-stage\"\n                                    }, [\n                                        _createElementVNode(\"div\", {\n                                            ref_key: \"idolDiceRef\",\n                                            ref: idolDiceRef,\n                                            class: _normalizeClass([\"idol-dice-draggable\", { 'is-locked': _unref(idolDiceRolling) }]),\n                                            style: _normalizeStyle({ transform: `translate(${_unref(idolDicePosition).x}px, ${_unref(idolDicePosition).y}px)` }),\n                                            onPointerdown: handleIdolDicePointerDown\n                                        }, [\n                                            _createVNode(DungeonDice, {\n                                                value: _unref(idolDiceValue),\n                                                rolling: _unref(idolDiceRolling),\n                                                color: \"gold\",\n                                                size: \"lg\",\n                                                \"rolling-min\": _unref(idolDiceMin),\n                                                \"rolling-max\": _unref(idolDiceMax)\n                                            }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\"])\n                                        ], 38 /* CLASS, STYLE, NEED_HYDRATION */)\n                                    ], 512 /* NEED_PATCH */)\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"idol-exit-btn absolute right-5 bottom-5 z-[98] px-6 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: exitIdolView\n                                }, \"  \", 8 /* PROPS */, _hoisted_189)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Victory Card Reward Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showVictoryRewardView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_190, [\n                                _createElementVNode(\"div\", _hoisted_191, [\n                                    _createElementVNode(\"div\", _hoisted_192, [\n                                        _createElementVNode(\"div\", _hoisted_193, [\n                                            _createElementVNode(\"div\", null, [\n                                                _cache[84] || (_cache[84] = _createElementVNode(\"div\", { class: \"font-heading text-xl text-dungeon-gold\" }, \"\", -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_194, _toDisplayString(_unref(victoryRewardStage) === 'pick' ? ' 1 ' : '9'), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/75 hover:border-dungeon-gold/50\",\n                                                disabled: _unref(rewardApplying),\n                                                onClick: exitVictoryRewardFlow\n                                            }, \"  \", 8 /* PROPS */, _hoisted_195)\n                                        ]),\n                                        (_unref(victoryRewardStage) === 'pick')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_196, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(victoryRewardOptions), (card) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `reward-option-${card.id}`,\n                                                        type: \"button\",\n                                                        class: \"rounded-lg border border-dungeon-brown/50 bg-[#160d08]/75 p-3 transition-all hover:border-dungeon-gold/60 hover:scale-[1.01]\",\n                                                        onClick: ($event) => (pickVictoryRewardCard(card))\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_198, [\n                                                            _createVNode(DungeonCard, {\n                                                                card: card,\n                                                                disabled: \"\"\n                                                            }, null, 8 /* PROPS */, [\"card\"])\n                                                        ]),\n                                                        _cache[85] || (_cache[85] = _createElementVNode(\"div\", { class: \"mt-2 text-center text-xs text-dungeon-gold/90\" }, \"\", -1 /* CACHED */))\n                                                    ], 8 /* PROPS */, _hoisted_197));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createElementVNode(\"div\", _hoisted_199, [\n                                                    _cache[86] || (_cache[86] = _createElementVNode(\"div\", { class: \"text-xs text-dungeon-paper/70 mb-2\" }, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_200, [\n                                                        (_unref(selectedVictoryRewardCard))\n                                                            ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                key: 0,\n                                                                card: _unref(selectedVictoryRewardCard),\n                                                                disabled: \"\"\n                                                            }, null, 8 /* PROPS */, [\"card\"]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                (_unref(rewardReplaceEntries).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_201, [\n                                                        _cache[87] || (_cache[87] = _createElementVNode(\"div\", { class: \"text-sm text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"button\", {\n                                                            type: \"button\",\n                                                            class: \"mt-3 px-4 py-2 rounded border border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10 disabled:opacity-50\",\n                                                            disabled: _unref(rewardApplying),\n                                                            onClick: _cache[32] || (_cache[32] = ($event) => (replaceDeckCardWithReward(0)))\n                                                        }, \"  \", 8 /* PROPS */, _hoisted_202)\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                (_unref(rewardReplaceEntries).length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_203, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(rewardReplaceEntries), (entry) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `reward-replace-${entry.idx}`,\n                                                                type: \"button\",\n                                                                class: \"rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(rewardApplying),\n                                                                onClick: ($event) => (replaceDeckCardWithReward(entry.idx))\n                                                            }, [\n                                                                _createElementVNode(\"div\", _hoisted_205, \" \" + _toDisplayString(entry.idx + 1), 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", _hoisted_206, [\n                                                                    (entry.card)\n                                                                        ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                            key: 0,\n                                                                            card: entry.card,\n                                                                            disabled: \"\"\n                                                                        }, null, 8 /* PROPS */, [\"card\"]))\n                                                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_207, _toDisplayString(entry.name || ''), 1 /* TEXT */))\n                                                                ])\n                                                            ], 8 /* PROPS */, _hoisted_204));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Combat Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showCombat))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_208, [\n                                _createVNode(CombatView, {\n                                    class: \"w-full h-full\",\n                                    \"enemy-name\": _unref(combatEnemyName),\n                                    \"player-deck\": _unref(resolvedDeck),\n                                    \"player-relics\": _unref(combatRelicMap),\n                                    \"test-start-at-999\": _unref(combatTestStartAt999CurrentBattle),\n                                    \"initial-player-stats\": {\n                                        hp: _unref(displayHp),\n                                        maxHp: _unref(displayMaxHp),\n                                        mp: _unref(displayMp),\n                                        minDice: _unref(displayMinDice) || 1,\n                                        maxDice: _unref(displayMaxDice) || 6,\n                                        effects: [{ type: _unref(EffectType).MANA_SPRING, stacks: 1, polarity: 'buff' }],\n                                    },\n                                    onEndCombat: handleCombatEnd,\n                                    onOpenDeck: _cache[33] || (_cache[33] = ($event) => (activeModal.value = 'deck')),\n                                    onOpenRelics: _cache[34] || (_cache[34] = ($event) => (activeModal.value = 'relics'))\n                                }, null, 8 /* PROPS */, [\"enemy-name\", \"player-deck\", \"player-relics\", \"test-start-at-999\", \"initial-player-stats\"]),\n                                _createCommentVNode(\" Exit combat button \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm\",\n                                    onClick: _cache[35] || (_cache[35] = ($event) => (showCombat.value = false))\n                                }, \"   \")\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameView.vue?vue&type=style&index=0&id=310d1a62&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-310d1a62\"]])\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"play\", [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"z-10 flex flex-col items-center space-y-12\" };\nconst _hoisted_2 = { class: \"flex flex-col space-y-4 w-64\" };\nconst _hoisted_3 = {\n    disabled: \"\",\n    class: \"group px-8 py-3 bg-black/50 border border-dungeon-brown text-gray-600 font-heading tracking-widest cursor-not-allowed flex items-center justify-center space-x-2\"\n};\nimport { Maximize, Play, Star } from 'lucide-vue-next';\n\nimport { ref, nextTick, onMounted, onBeforeUnmount } from 'vue';\nconst BACKGROUND_FADE_MS = 700;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    emits: [\"start\", \"toggleFullscreen\"],\n    setup(__props) {\n        const isVisible = ref(false);\n        const splashBackgrounds = [\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF1.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF2.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF3.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF4.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF5.png',\n        ];\n        const currentBackgroundUrl = ref(splashBackgrounds[0]);\n        const incomingBackgroundUrl = ref(null);\n        const outgoingBackgroundUrl = ref(null);\n        const isIncomingVisible = ref(false);\n        const isOutgoingVisible = ref(true);\n        const isBackgroundTransitioning = ref(false);\n        let backgroundFadeTimer = null;\n        let backgroundTransitionToken = 0;\n        const pickRandomBackground = (exclude) => {\n            const candidates = exclude\n                ? splashBackgrounds.filter((url) => url !== exclude)\n                : splashBackgrounds;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? splashBackgrounds[0];\n        };\n        const preloadImage = (url) => new Promise((resolve) => {\n            let settled = false;\n            const finish = () => {\n                if (settled)\n                    return;\n                settled = true;\n                resolve();\n            };\n            const img = new Image();\n            img.onload = finish;\n            img.onerror = finish;\n            img.src = url;\n            setTimeout(finish, 1200);\n        });\n        const switchBackground = async () => {\n            if (isBackgroundTransitioning.value)\n                return;\n            const nextUrl = pickRandomBackground(currentBackgroundUrl.value);\n            if (nextUrl === currentBackgroundUrl.value)\n                return;\n            const token = ++backgroundTransitionToken;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n            await preloadImage(nextUrl);\n            if (token !== backgroundTransitionToken)\n                return;\n            isBackgroundTransitioning.value = true;\n            outgoingBackgroundUrl.value = currentBackgroundUrl.value;\n            incomingBackgroundUrl.value = nextUrl;\n            isOutgoingVisible.value = true;\n            isIncomingVisible.value = false;\n            await nextTick();\n            await new Promise((resolve) => requestAnimationFrame(() => requestAnimationFrame(() => resolve())));\n            if (token !== backgroundTransitionToken)\n                return;\n            isIncomingVisible.value = true;\n            isOutgoingVisible.value = false;\n            backgroundFadeTimer = setTimeout(() => {\n                if (token !== backgroundTransitionToken)\n                    return;\n                currentBackgroundUrl.value = nextUrl;\n                incomingBackgroundUrl.value = null;\n                outgoingBackgroundUrl.value = null;\n                isBackgroundTransitioning.value = false;\n                backgroundFadeTimer = null;\n            }, BACKGROUND_FADE_MS);\n        };\n        onMounted(() => {\n            currentBackgroundUrl.value = pickRandomBackground();\n            isVisible.value = true;\n        });\n        onBeforeUnmount(() => {\n            backgroundTransitionToken += 1;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000\", _unref(isVisible) ? 'opacity-100' : 'opacity-0']),\n                style: { aspectRatio: '16/9' }\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat\",\n                    style: _normalizeStyle({ backgroundImage: `url('${_unref(currentBackgroundUrl)}')` })\n                }, null, 4 /* STYLE */),\n                (_unref(incomingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isIncomingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(incomingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(outgoingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isOutgoingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(outgoingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"button\", {\n                    type: \"button\",\n                    class: \"absolute inset-0 z-[1] bg-transparent cursor-pointer focus:outline-none\",\n                    \"aria-label\": \"\",\n                    onClick: switchBackground\n                }),\n                _createCommentVNode(\" Dynamic Background \"),\n                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Ornamental Frame \"),\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Fullscreen Button (Top Right, Small) \"),\n                _createElementVNode(\"button\", {\n                    class: \"absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggleFullscreen')))\n                }, [\n                    _createVNode(_unref(Maximize), { class: \"size-4\" })\n                ]),\n                _createCommentVNode(\" Main Content \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Title Section \"),\n                    _cache[5] || (_cache[5] = _createStaticVNode(\"<div class=\\\"text-center space-y-4 relative\\\"><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50\\\"></div><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50\\\"></div><h1 class=\\\"text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide\\\">  </h1><h2 class=\\\"text-xl md:text-2xl font-body text-[#f9e6a0] tracking-[0.35em] uppercase border-t border-dungeon-brown pt-4 mt-2\\\"> Created by Vin </h2></div>\", 1)),\n                    _createCommentVNode(\" Menu Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('start')))\n                        }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full\" }, null, -1 /* CACHED */)),\n                            _createVNode(_unref(Play), { class: \"size-5 text-dungeon-gold group-hover:scale-110 transition-transform\" }),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold\" }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"button\", _hoisted_3, [\n                            _createVNode(_unref(Star), { class: \"size-4\" }),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"w-full relative\" };\nimport GameView from './components/GameView.vue';\nimport SplashScreen from './components/SplashScreen.vue';\nimport { disposeBgm, initializeBgm } from './bgm';\nimport { toggleFullScreen } from './fullscreen';\nimport { useGameStore } from './gameStore';\n\nimport { ref, onMounted, onUnmounted, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const appState = ref('SPLASH');\n        const gameStore = useGameStore();\n        onMounted(() => {\n            void initializeBgm();\n        });\n        onUnmounted(() => {\n            disposeBgm();\n        });\n        /**\n         *  gameStoreMVU\n         */\n        async function startGame() {\n            appState.value = 'GAME';\n            await nextTick();\n            await gameStore.initialize();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Splash Screen \"),\n                _createVNode(_Transition, {\n                    name: \"scene-fade\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(appState) === 'SPLASH')\n                            ? (_openBlock(), _createBlock(SplashScreen, {\n                                key: \"splash\",\n                                onStart: startGame,\n                                onToggleFullscreen: _unref(toggleFullScreen)\n                            }, null, 8 /* PROPS */, [\"onToggleFullscreen\"]))\n                            : (_openBlock(), _createBlock(GameView, {\n                                key: \"game\",\n                                onBackToSplash: _cache[0] || (_cache[0] = ($event) => (appState.value = 'SPLASH'))\n                            }))\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=225dac7c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-225dac7c\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './styles.css';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","hasA11yProp","prop","startsWith","isEmptyString","value","mergeClasses","classes","filter","className","index","array","Boolean","trim","indexOf","join","toKebabCase","string","replace","toLowerCase","toPascalCase","camelCase","match","p1","p2","toUpperCase","toCamelCase","charAt","slice","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","slots","h","Number","class","default","map","child","createLucideIcon","iconName","attrs","Book","d","Lock","x","y","rx","ry","Settings","cx","cy","r","Scroll","Box","Maximize","BookOpen","FileText","Send","ChevronDown","Activity","Dices","Coins","HF_DATASET_REPO","HF_RESOLVE_BASE","HF_API_TREE_BASE","ENCODED_DUNGEON","encodeURIComponent","ENCODED_BGM_DIR","BGM_TRACK_KEY","BGM_VOLUME_KEY","DEFAULT_BGM_ID","bgmTracksState","ref","bgmVolumeState","bgmTrackIdState","initialized","audioEl","loadedTrackId","resumeListenerBound","currentTrackSources","currentTrackSourceIndex","buildHfTrackUrl","fileName","buildLocalTrackUrl","windowsPath","parts","split","length","root","rest","part","buildTrackSources","sources","Set","createTrack","id","url","DEFAULT_TRACKS","clampVolume","isFinite","Math","max","min","ensureAudio","Audio","preload","loop","volume","addEventListener","nextIndex","src","load","play","catch","bindResumeOnGesture","persistTrackId","localStorage","setItem","sortTracks","tracks","sort","a","b","localeCompare","applyCurrentTrackToAudio","track","find","audio","resume","document","once","capture","tryPlay","parseTrackFromApiPath","path","test","bootstrapTrackList","async","remoteTracks","response","fetch","ok","payload","json","item","type","parsed","push","fetchDungeonBackgroundMusicTracks","primary","secondary","merged","Map","set","values","mergeTracks","initializeBgm","raw","parsePersistedVolume","getItem","setBgmVolume","String","bgmTracks","readonly","bgmVolume","bgmTrackId","CardType","EffectType","GamePhase","CombatPhase","PHYSICAL","category","rarity","manaCost","calculation","multiplier","addition","damageLogic","mode","scale","scaleAddition","hitCount","traits","combo","reroll","draw","cardEffects","description","MAGIC","FUNCTION","kind","effectType","ARMOR","valueMode","DODGE","triggers","BARRIER","fixedValue","BURN","VULNERABLE","BIND","restrictedTypes","DEVOUR","POISON","COLD","CHARGE","negativeEffect","CORROSION","MAX_HP_REDUCTION","SWARM","CURSE","unplayable","insertCardsToEnemyDeck","SHOCK","AMBUSH","purgeOnUse","cleanseTypes","BLEED","REGEN","destroyOnClashWin","MANA_DRAIN","CARD_REGISTRY","getCardByName","get","getAllCards","EFFECT_REGISTRY","polarity","timings","stackable","maxStacks","POISON_AMOUNT","WHITE_TURBID","IGNITE_AURA","STUN","FATIGUE","NON_LIVING","NON_ENTITY","ILLUSORY_BODY","POINT_GROWTH_BIG","POINT_GROWTH_SMALL","MANA_SPRING","INDOMITABLE","PEEP_FORBIDDEN","BLIND_ASH","COGNITIVE_INTERFERENCE","MEMORY_FOG","SILENCE","STURDY","FLAME_ATTACH","POISON_ATTACH","TOXIN_SPREAD","FROST_ATTACH","BLOODBLADE_ATTACH","LIGHTNING_ATTACH","THORNS","ELEMENTAL_DEBUFF_TYPES","findEffect","entity","effects","e","hasEffect","some","stacks","getEffectStacks","effect","applyEffect","options","normalizedStacks","floor","def","existing","nextStacks","maxReducible","maxHp","hp","lockDecayThisTurn","instance","undefined","source","removeEffect","reduceEffectStacks","amount","processOnTurnStart","result","hpChange","mpChange","trueDamage","opponentHpChange","isStunned","logs","applyToOpponent","mp","poisonAmount","burnStacks","burnDamage","vulnerableStacks","regenStacks","whiteTurbidStacks","manaSpringStacks","frostAttachStacks","processOnTurnEnd","poisonStacks","bindEffect","armorEffect","canPlayCard","card","baseRawDice","allowed","reason","includes","pickCardById","ctx","deck","c","weightedRandom","total","reduce","s","o","weight","roll","random","opt","CARD_BY_ID","buildDeckById","ids","Error","requireCardById","MUXINLAN_CARD","MIMIC_CARD","SWAMP_LURKER_CARD","MIMIC_BUBBLE_CARD","MIST_SPRITE_CARD","VINEWALKER_CARD","SPRING_SPIRIT_CARD","INFILTRATOR_TENTACLE_CARD","CAVE_TENTACLE_CARD","BLISS_BEE_CARD","POLLEN_SPRAYER_CARD","PRIM_CARD","NYMPH_CARD","UNDINE_CARD","MATA_CARD","ROSE_CARD","currentFloor","stats","minDice","maxDice","selectCard","flags","muxinlanOpenedWithCunning","sum","t","playerStats","enemyStats","highMpPool","chosen","lowMpPool","hasUsedHeal","normalCards","pool","vinewalkerOpenedWithLurk","infiltratorTentacleOpenedWithLightningAmbush","caveTentacleOpenedWithLightningAmbush","POLLEN_SPRAYER_ENEMY","pollenSprayerOpenedWithHighPressureSpray","selfHasSwarm","nymphUsedGiantProjection","undineUsedEarthLiquid","playerPoisonAmount","roseOpenedWithPlantDominion","STATIC_ENEMY_REGISTRY","ENEMY_NAME_ORDER","keys","getEnemyByName","devourPool","normalPool","getStacks","eff","RELIC_LIST","hooks","onBattleStart","count","self","addLog","modifyFinalPoint","currentPoint","onTurnEnd","side","restoreMana","restored","addStatusEffect","onTurnStart","addArmor","gained","addRerollCharges","getRerollCharges","onDiceClick","consumeRerollCharge","onDeckShuffle","heal","healed","overflow","overflowToArmor","onAfterHitDealt","targetSide","actualDamage","state","onBeforeApplyEffect","onAfterHitTaken","sourceSide","onBeforeBurnDamage","damage","opponent","current","minimum","need","onAfterBurnDamageTaken","add","isPreview","bonus","isTrueDamage","hasRelic","minDamage","turn","RELIC_BY_ID","relic","RELIC_BY_NAME","getAllRelics","FLOOR_MAP","FLOOR_ORDER","FLOOR_NUMBER_MAP","getFloorForArea","area","floorName","areas","Object","entries","toggleFullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","err","console","warn","message","isLeaveOptionLine","line","isRebirthOptionLine","extractTag","text","tagName","escapedTagName","regex","RegExp","exec","fullMatch","openTagEnd","firstChar","trimStart","extractTagByPriority","tagNames","content","removeThinkBlock","thinkTagRegex","depth","lastIndex","isClosing","tagStart","tagEnd","filterStreamingTextAfterThinkEnd","closeMatch","removeHtmlComments","extractTucaoBlocks","normalized","normalizeTucaoMarkers","openRegex","closeRegex","cursor","openEnd","contentEnd","parseOptions","optionText","parseResponse","cleanText","mainTextRaw","mainText","fallbackTucao","block","optionRaw","summary","updateVarBlock","jsonPatch","variableUpdate","allOptions","hasOptionE","hasLeave","hasRebirth","rawText","extractSummary","messageText","useGameStore","STREAMING_ENABLED_KEY","currentSummary","isGenerating","streamingText","useStreaming","readStreamingEnabledSetting","error","isInitialized","variableUpdateText","isEditing","editingText","statData","saveEntries","isSaveLoadOpen","pendingPortalChanges","pendingCombatMvuChanges","pendingStatDataChanges","loadLatestAssistantState","lastId","getLastMessageId","messages","getChatMessages","role","clean","extractMainText","detectOptionE","detectLeave","detectRebirth","extractVariableUpdate","loadStatData","mvuData","Mvu","getMvuData","message_id","_","info","applyParsedResponse","refreshLocalStatData","JSON","stringify","initialize","waitGlobalInitialized","msg","sendAction","userInput","oldMvuData","currentPendingPortalChanges","currentPendingCombatChanges","currentPendingStatDataChanges","userMvuDataAfterPortal","baseMvuData","changes","cloneDeep","stat_data","sd","roomType","enemyName","stat","resetRoomCounter","incrementKeys","applyPendingPortalChangesToMvu","userMvuDataAfterCombat","addDefeatMark","base","Array","isArray","negativeStatusesAdd","status","goldDelta","currentGold","delta","applyPendingCombatChangesToMvu","userMvuData","fields","assign","applyPendingStatDataChangesToMvu","createChatMessages","data","refresh","streamListener","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_generation_id","generate","user_input","should_stream","stop","newMvuData","parseMessage","display_data","delta_data","setUseStreaming","enabled","nextEnabled","persistStreamingEnabledSetting","setPendingPortalChanges","setPendingCombatMvuChanges","setPendingStatDataChanges","loadSaveEntries","messageId","rollbackTo","targetMessageId","idsToDelete","i","deleteChatMessages","toastr","success","rerollCurrent","lastUserMsg","reverse","m","startEdit","saveEdit","currentMvuData","prevMvuData","setChatMessages","replaceMvuData","cancelEdit","updateStatDataFields","nextMvuData","ShieldCheck","Shield","Link2","x1","x2","y1","y2","Skull","Bug","Droplet","Flame","TriangleAlert","Heart","Sparkles","Ban","Zap","Snowflake","Bone","Layers","Battery","Waves","Eye","EyeOff","Brain","Leaf","Settings2","Trash2","X","calculateFinalDamage","finalPoint","dl","baseValue","calculateRawDamage","cold","attackerEffects","defenderHasNonEntity","defenderEffects","defenderHasIllusoryBody","vuln","sturdy","armor","triggerSwarmReviveIfNeeded","revived","consumeColdAfterDealingDamage","attacker","before","applyDamageToEntity","ae","actual","reviveResult","CircleQuestionMark","Sword","RefreshCcw","Footprints","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","disabled","selected","faceDown","isEnemy","maskLevel","emits","setup","__props","typeColorClass","computed","typeIcon","typeIconColor","typeGradient","displayName","displayDescription","displayTypeText","displayInitial","showManaBadge","isRareCard","_ctx","_cache","onClick","$event","$emit","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","__exports__","style","rolling","rollingMin","rollingMax","numberClass","displayValue","interval","gradientId","toString","substr","sizeClass","sm","md","lg","numberSizeClass","borderColor","textColor","numberTextClass","rollRandomInRange","getRollingRange","watch","clearInterval","setInterval","immediate","onUnmounted","offset","points","opacity","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","HF_USER_DIR","HF_MONSTER_DIR","SPEED_SETTING_KEY","FATIGUE_DEGREE_KEY","initialPlayerStats","playerDeck","playerRelics","testStartAt999","emit","__emit","gameStore","currentFloorNumber","floorFromArea","getFloorNumberForArea","fallback","resolveCurrentFloorNumber","enemyDef","enemyDisplayName","HF_RESOLVE_ROOT","HF_TREE_API_ROOT","IMAGE_EXT_RE","BOSS_FOLDER_NAMES","folderImageCache","folderImagePromiseCache","normalizeRepoPath","encodeRepoPath","seg","toResolveUrl","repoPath","pickRandom","items","parseNextLink","linkHeader","fetchFolderImages","repoFolderPath","folder","cached","pending","task","images","nextUrl","entry","headers","delete","playerPortraitUrl","enemyPortraitUrl","playerPortraitError","enemyPortraitError","portraitLoaderDisposed","resolveRandomPortrait","folderPath","fallbackFilePath","randomPath","bgIsLordFallback","bgImageError","currentArea","currentRoomType","bgImageUrl","suffix","onBgError","aiFlags","reactive","normalizeTestStartStats","cloned","cloneEntityStats","getEffectName","getEffectDescription","createStatusEffectPreview","EFFECT_ICON_COMPONENTS","getEffectIconComponent","effectIconBoxClass","playerArmor","enemyArmor","enemyPoisonAmount","playerPoisonAmountPercent","enemyPoisonAmountPercent","playerVisibleEffects","enemyVisibleEffects","cloneCardForBattle","selfDamage","ce","toBattleDeck","cards","enemyDeck","PASS_CARD","combatState","phase","TURN_START","actionsRemaining","playerBaseDice","enemyBaseDice","playerHand","discardPile","enemyDiscard","enemyIntentCard","enemyPredictedPoint","playerSelectedCard","lastPlayedCard","playerTurnRawDice","enemyTurnRawDice","isRolling","showClashAnimation","shatteringTarget","screenShake","impactShake","overlayOpen","settingsOpen","battleSpeedUp","logsCollapsed","battleResultBanner","endCombatPending","enemyIntentConsumedThisTurn","enemyIntentManaSpentThisTurn","combatRootEl","effectTooltip","speedMultiplier","combatRootStyle","floatingNumbers","pendingCardNegativeEffects","fatigueDegree","fatigueHelpVisible","fatigueDegreeRatio","fatigueDegreePercent","fatigueBarOpacityRatio","fatigueBarStyle","showFatigueHelp","hideFatigueHelp","lightningAmbushFirstUseConsumed","player","enemy","previewPlayerDice","previewEnemyDice","playerDiceUiNoise","enemyDiceUiNoise","comboUiMaskBridge","isUiMaskingActive","PLAYER_INPUT","isPlayerDiceObscured","isEnemyDiceObscured","rerollUiNoise","displayPlayerDice","displayEnemyDice","canPlayerRerollDice","playerDiceRerollCharges","playerDiceRerollHint","playerDicePreviewChanged","enemyDicePreviewChanged","playerDiceNumberClass","enemyDiceNumberClass","enemyIntentMaskLevel","playerHandMaskLevel","playerPlayedCardVisual","resolvedPlayerCardVisual","resolvedEnemyCardVisual","resolvedCardVisualEntries","visual","hoverPreviewTimer","enemyDicePreviewTimer","effectTooltipLongPressTimer","effectTooltipAutoHideTimer","floatingNumberId","handCardKeySeed","playerPlayedCardVisualId","resolvedCardVisualId","animationStopToken","endCombatSequenceToken","enemyManaLackHintTurn","handCardKeys","WeakMap","invalidCardShakeKeys","normalizePersistedInt","setFatigueDegree","next","addFatigueDegree","NO_RELIC_MOD","globalMultiplier","globalAddition","activePlayerRelics","aggregated","from","resolveRelicMap","relicRuntimeState","getEntityBySide","getRelicRuntimeState","relicId","hasActiveRelic","getActiveRelicCount","changeRerollCharges","forEachPlayerRelic","callback","logRelicMessage","log","addArmorForSide","added","pushFloatingNumber","restoreManaForSide","healForSide","overflowRaw","applyStatusEffectWithRelics","hook","getRelicCount","targetEffectType","targetStacks","applyOptions","shouldAllowStatusEffectWithRelics","createPlayerLifecycleContext","triggerPlayerRelicLifecycleHooks","hookName","triggerPlayerRelicBeforeBurnDamageHooks","currentDamage","triggerPlayerRelicAfterBurnDamageTakenHooks","triggerPlayerRelicHitHooks","hitIndex","attemptedDamage","scaleDuration","ms","wait","Promise","resolve","setTimeout","transitionStyle","transitionDuration","withTransition","playerPlayedCardStyle","entered","left","top","transform","transitionProperty","transitionTimingFunction","resolvedCardVisualInnerClass","variant","showEnemyIntentCard","floatingColors","physical","magic","shield","mana","true","floatingNumbersFor","handCardKey","isCardShaking","has","triggerInvalidCardShake","withoutKey","requestAnimationFrame","removed","resolveTargetSide","removeCardsById","cardId","removeSingleCardById","insertCardIntoDeckRandomly","applyPurgeTraitAfterUse","destroyOpponentCardByTrait","winnerSide","loserCard","changeManaWithShock","actualDelta","requireEnoughForDecrease","showPositiveFloating","lostMp","label","shockStacks","shockDamageLogs","shockEffect","applyShockOnManaLoss","spendManaWithShock","cost","applyBloodbladeAttachOnClash","applyLightningAttachOnDodge","dodgerSide","cardEffectMatchesTrigger","effectTrigger","trigger","applyCardEffectsByTrigger","defender","targetKey","targetEntity","healAmount","beforeHp","actualHeal","beforeMaxHp","actualMaxHpLoss","hpLossByCap","restoreAmount","manaResult","actualRestore","abs","cleanseTargets","et","applyToxinSpreadOnPhysicalPlay","spreadOwnerSide","spreadStacks","applyAmbushOnCardPlay","ambushOwnerSide","ambushOwner","withFirstUseLightningAmbushBonus","shouldConsume","consume","shouldAnnounce","announce","boosted","poisonAmountImmediateCheckRunning","applyImmediatePoisonAmountLethalCheck","poisonLogs","poisonLog","rollIntInRange","low","high","applyHitAttachEffects","defenderSide","flameStacks","consumeChargeOnRoll","rolled","chargeStacks","fatigueStacks","reduced","clearDicePreview","clearTimeout","clearPlayerPlayedCard","stopAllCardAnimations","getCardFinalPoint","baseDice","relicModifiers","point","calculateFinalPoint","entityEffects","getCardPreviewPoint","handlePlayerCardHoverEnd","handlePlayerCardTouchEnd","rollDiceInRange","handlePlayerDiceClick","chargesBeforeHooks","rerolled","currentDice","after","showEnemyDicePreview","preview","previewCard","getEnemyIntentFinalPoint","hideEnemyDicePreview","handleEnemyDiceHoverStart","handleEnemyDiceHoverEnd","handleEnemyDiceTouchStart","handleEnemyDiceTouchEnd","clearEffectTooltipTimers","showEffectTooltipForTarget","align","rootRect","getBoundingClientRect","rect","right","showEffectTooltip","event","currentTarget","hideEffectTooltip","handleEffectTouchStart","handleEffectTouchEnd","sign","duration","colorClass","leftOffset","topOffset","notifyEnemyManaInsufficient","pushFloatingText","relicSummary","onMounted","stored","loadFatigueDegree","playerUrl","enemyFolderPath","enemyFallback","shouldPreferFolder","enemyUrl","folderImages","randomEnemy","initPortraitUrls","drawCards","currentDeck","currentDiscard","discard","drawn","pop","newDeck","newDiscard","handCardClass","isSelected","applyFatigueDegreePenaltyOnTurnStart","opponentSide","opponentStats","turnStartLogs","burnDamageTaken","shownTrueDamage","burnIsTrueDamage","pendingBurnDamageNonTrue","pendingRegenHeal","regenLog","regenMatch","growthBigStacks","growthSmallStacks","hpBeforeOpponent","actualOpponentHpDelta","burnLog","burnMatch","rawBurnDamage","burnResult","pendingBurnDamage","armorStacks","absorbed","hpBeforeRegen","actualRegen","residualHpChange","hpBeforeResidual","hpDeltaResidual","pendingTrueDamage","reviveLog","l","DRAW_PHASE","pRawRoll","eRawRoll","pRoll","eRoll","eCard","selectedCard","idx","check","selectEnemyCard","handleCardSelect","handIdx","played","splice","token","showPlayerPlayedCard","RESOLUTION","handleSkipTurn","resolveCombat","pCard","pDice","eDice","resolvedPlayerCard","resolvedEnemyCard","shouldClash","card1","card2","t1","t2","ignoreDodge","isClashable","clashBypassedByIgnoreDodge","playerSkippedTurn","enemySkippedTurn","resolvedPlayerDice","resolvedEnemyDice","rerollByTrait","sourceLabel","targetLabel","targetStats","pClashPoint","eClashPoint","clearBurnForSide","pSuccess","eSuccess","resultMsg","clashWinner","successfulDodger","executeCard","defenderLabel","opponentSkippedTurn","slot","impactDelay","animDuration","playResolvedCardAnimation","applyCardExtraAttributes","baseAmount","resolveCardSelfDamage","rawAmount","actualSelfDamage","manaDrain","drainResult","drainedMana","overflowHpDamage","gainResult","gainedMana","finalizeCardExecution","queueCardNegativeEffectForPlayer","toInsert","cardName","inserted","battleCard","applyInsertTrait","syncCurrentPointForUi","nextPoint","applyCardEffects","removedStacks","coldStacks","currentElementals","picked","currentCorrosion","addStacks","selfElementals","hadIllusoryBody","triggerCount","burned","burnStacksOnDefender","totalHitCount","hit","cardForCalculation","customDamage","dmgLogs","applyLogs","hitPrefix","damageLogColorClass","damageKind","reflectedDamage","actualReflectedDamage","reflectedLogs","reflectedLog","coldLogs","coldLog","queue","deferredEnemyAction","enemyAction","typePriority","every","action","all","pEndLogs","eEndLogs","pHp","eHp","win","WIN","LOSE","runEndCombatSequence","ref_key","alt","onError","args","onMouseenter","onMouseleave","DungeonCard","onTouchstartPassive","onTouchend","onTouchcancel","DungeonDice","popup","animationDuration","onFocus","onBlur","title","innerHTML","isOpen","panelClass","to","$slots","RotateCcw","RefreshCw","Pencil","confirmTarget","doRollback","handleReroll","handleEdit","DungeonModal","onClose","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137","_hoisted_138","_hoisted_139","_hoisted_140","_hoisted_141","_hoisted_142","_hoisted_143","_hoisted_144","_hoisted_145","_hoisted_146","_hoisted_147","_hoisted_148","_hoisted_149","_hoisted_150","_hoisted_151","_hoisted_152","_hoisted_153","_hoisted_154","_hoisted_155","_hoisted_156","_hoisted_157","_hoisted_158","_hoisted_159","_hoisted_160","_hoisted_161","_hoisted_162","_hoisted_163","_hoisted_164","_hoisted_165","_hoisted_166","_hoisted_167","_hoisted_168","_hoisted_169","_hoisted_170","_hoisted_171","_hoisted_172","_hoisted_173","_hoisted_174","_hoisted_175","_hoisted_176","_hoisted_177","_hoisted_178","_hoisted_179","_hoisted_180","_hoisted_181","_hoisted_182","_hoisted_183","_hoisted_184","_hoisted_185","_hoisted_186","_hoisted_187","_hoisted_188","_hoisted_189","_hoisted_190","_hoisted_191","_hoisted_192","_hoisted_193","_hoisted_194","_hoisted_195","_hoisted_196","_hoisted_197","_hoisted_198","_hoisted_199","_hoisted_200","_hoisted_201","_hoisted_202","_hoisted_203","_hoisted_204","_hoisted_205","_hoisted_206","_hoisted_207","_hoisted_208","BG_OPACITY_KEY","CHEST_BG_OPENED","SidebarIcon","defineComponent","icon","required","active","tooltipSide","activeModal","inputText","isVariableUpdateOpen","isStatusOpen","showCombat","combatEnemyName","showShopView","showIdolView","shopProducts","shopBuying","shopSpentGold","shopPurchasedItems","shopRobClickCount","shopRobbing","showChestView","chestStage","chestRolling","chestRewardRelic","chestRewardCollected","chestCollecting","chestRewardVisible","chestOpenedBgReady","chestPortalChoices","hotSpringCleanseMessage","idolDiceValue","idolDiceRolling","idolAssignedTarget","idolSnapPreviewTarget","idolDicePosition","idolDiceStageRef","idolDiceRef","idolSlotMaxHpRef","idolSlotMpRef","idolSlotGoldRef","idolDragPointerId","idolDragStart","idolDragStartPos","combatTestStep","selectedTestDeck","selectedTestEnemy","selectedTestRelicCounts","selectedCardCategoryTab","selectedRelicCategoryTab","activeCombatContext","pendingCombatNarrative","dispatchedCombatNarrativeIds","showVictoryRewardView","victoryRewardStage","victoryRewardOptions","selectedVictoryRewardCard","rewardApplying","relicTooltip","combatTestStartAt999","combatTestStartAt999CurrentBattle","chestMimicTimer","chestRewardFadeTimer","shopRobTimer","hotSpringCleanseTimer","idolRollTimer","relicTooltipLongPressTimer","relicTooltipAutoHideTimer","hotSpringCleanseMessageId","bgArea","bgRoomType","bgOverlayOpacity","parseFloat","v","chestBackgroundUrl","IDOL_BLESSING_CONFIG","slotLabel","statueName","rewardText","dice","gold","allCardsForTest","CATEGORY_ORDER","compareCategory","orderA","orderB","cardCategoryGroupsForTest","grouped","cardCategoryTabsForTest","group","filteredCardCategoryGroupsForTest","getMagicBookCoverUrl","bookName","carryableMagicBookNames","rawCarriedMagicBooks","carriedMagicBooks","available","carriedMagicBookSet","selectableRelicPool","categorySet","muxinlanFavor","roles","safe","shopDiscountRate","shopRobBtnOpacity","toFixed","parseMerchantDefeatedValue","isMerchantDefeated","canEditMagicBooks","magicBookSidebarIcon","isUpdatingMagicBooks","openMagicBookModal","cardByNameForTest","rewardCardPool","filtered","rewardReplaceEntries","selectedTestDeckCards","allEnemyNamesForTest","baseRelicsForTest","categoryDiff","relicCategoryGroupsForTest","relics","relicCategoryTabsForTest","filteredRelicCategoryGroupsForTest","tabs","getCardTypeBadgeClass","getCardCategoryStripClass","resolvedDeck","skills","n","relicEntries","getRelicByName","chestRewardEntry","clearRelicTooltipTimers","showRelicTooltipForTarget","window","innerWidth","showRelicTooltip","hideRelicTooltip","handleRelicTouchStart","handleRelicTouchEnd","showChestRewardTooltip","handleChestRewardTouchStart","combatRelicMap","modal","editable","selectedRelicTotalCount","textSettings","fontSize","lineHeight","fontFamily","containerWidth","isStreamingEnabled","selectedBgmTrackId","trackId","bgmVolumePercent","round","displayText","inlineMarkRegex","headerMarkRegex","tucaoOpenTagRegex","tucaoCloseTagRegex","tucaoExpandedState","isQuotedText","parseInlineSegments","keyPrefix","segments","segmentIndex","markedText","endsWith","innerText","parseTextLines","level","parseStoryLine","storyContentState","lines","tucaoSections","openMatch","sectionIndex","openStart","plainPart","nextCursor","tucaoKey","parsedTucaoLines","tail","parseStoryContent","storyMainLines","storyTucaoSections","sections","validKeys","section","nextState","isTucaoExpanded","displayHp","displayMaxHp","displayMp","displayGold","displayMinDice","displayMaxDice","idolDiceMin","toNonNegativeInt","idolDiceMax","hpPercent","mpPercent","idolRewardSummary","config","handleSendInput","REBIRTH_STARTER_DECK","HOT_SPRING_CLEANSE_LINES","handleRebirthClick","closeShopView","closeChestView","closeIdolView","initialMaxHp","initialMp","initialGold","currentSkillPoints","buildRebirthResetFields","ROOM_TYPE_CONFIG","bgColor","glowColor","specialOptionConfig","isTreasureRoomContext","isShopContext","isHotSpringRoomContext","isIdolRoomContext","isCombatRoomContext","sanitizeCombatLogLine","buildCombatNarrative","context","ordered","formatCombatLogs","sendCombatNarrativeOnce","narrative","applyMerchantDefeatedShopState","finalPrice","pickUniqueRewardCard","usedIds","candidates","finalizeVictoryRewardFlow","exitVictoryRewardFlow","replaceDeckCardWithReward","getRarityBasePrice","rollShopRarity","toRelicTooltipEntry","showShopProductTooltip","openShopView","clearShopRobTimer","favorForCount","targetCount","usedNames","discountRate","targetRarity","pickOne","basePrice","ceil","sold","generateShopProducts","buildNextRelicInventory","pickedRelic","rawRelics","nextRelics","exitShop","purchased","lootedText","report","purchasedText","handleShopRobClick","clearChestMimicTimer","clearChestRewardFadeTimer","clearHotSpringCleanseTimer","useHotSpringCleanse","showHotSpringCleanseText","clearIdolRollTimer","handleChestBgLoaded","clampNumber","getIdolSlotElement","getIdolSnapCandidate","stageEl","diceEl","stageRect","diceRect","maxX","maxY","diceCenterX","diceCenterY","best","targets","slotEl","slotRect","slotCenterX","slotCenterY","distance","hypot","snapX","snapY","openIdolView","rollIdolDiceValue","placeIdolDiceAtStart","handleIdolDicePointerDown","pointerId","clientX","clientY","setPointerCapture","handleIdolDicePointerMove","dx","dy","nextX","nextY","candidate","handleIdolDicePointerUp","releasePointerCapture","exitIdolView","reward","currentMaxHp","currentMp","buildIdolPendingFields","collectChestReward","handleChestCenterClick","candidatePool","rarityRoll","rarityPool","pickChestRewardRelic","generated","generatePortals","availableRoomTypes","getAvailablePortalRoomTypes","rollPortalCount","pickWeightedRoomTypes","rt","isFloorTransition","PORTAL_ROOM_VISUALS","generateChestLeavePortals","handleSpecialOption","pickLordMonsterByArea","pickBattleMonsterByArea","warning","startCombatFromSpecialOption","FLOOR_MONSTER_CONFIG","common","uniqueByArea","LORD_MONSTER_ORDER","LORD_MONSTER_BY_AREA","areaOrder","floorConfig","mapping","lordName","COMMON_MONSTER_RATE_BY_FLOOR","arr","commonPool","uniquePool","commonRate","PORTAL_ROOM_TYPES","PORTAL_ROOM_WEIGHTS","TRAP_POOL_BY_AREA","ALL_TRAPS","flat","withoutShop","AREA_PORTAL_VISUAL","cachedPortals","cachedPortalFingerprint","roomTypes","weightedPool","totalWeight","roomsPassed","isStartArea","targetFloor","getNextFloor","j","shuffle","areaName","bossChance","portalChoices","fingerprint","ROOM_STAT_KEY","buildQueuedPortalAction","portal","enterText","actionText","statKey","encounterMonster","trapName","pickTrapByArea","trapHpAfterDamage","pendingStatDataFields","openSaveLoad","openVariableUpdate","getSelectedTestRelicCount","setSelectedTestRelicCount","buildSelectedRelicPayload","openCombatTestBuilder","availableCardNames","availableRelicNames","presetDeck","presetRelicsRaw","presetRelics","confirmCombatTestDeck","confirmCombatTestEnemyAndStart","handleCombatEnd","finalStats","negativeEffects","Date","now","hpRaw","hasHp","floorRaw","goldReward","normalizedNegativeEffects","queueCombatMvuSync","isLordRoom","rarePool","pickRare","startVictoryRewardFlow","onBeforeUnmount","backgroundColor","maxWidth","segment","option","stripped","boxShadow","placeholder","onKeydown","stdDeviation","in","nextBooks","loading","step","number","SaveLoadPanel","nextGold","price","onLoad","collectedRelic","mergedPendingStatDataFields","relicName","onPointermove","onPointerup","onPointercancel","onPointerdown","CombatView","onEndCombat","onOpenDeck","onOpenRelics","Play","Star","isVisible","splashBackgrounds","currentBackgroundUrl","incomingBackgroundUrl","outgoingBackgroundUrl","isIncomingVisible","isOutgoingVisible","isBackgroundTransitioning","backgroundFadeTimer","backgroundTransitionToken","pickRandomBackground","exclude","switchBackground","settled","finish","img","Image","onload","onerror","nextTick","aspectRatio","backgroundImage","appState","startGame","pause","SplashScreen","onStart","onToggleFullscreen","GameView","onBackToSplash","$","app","createApp","App","use","mount","on","unmount"],"sourceRoot":""}