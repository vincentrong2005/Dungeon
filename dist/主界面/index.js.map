{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/hasA11yProp.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/isEmptyString.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/mergeClasses.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toKebabCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toPascalCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toCamelCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/Icon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/lock.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/scroll.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/box.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/users.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/map.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/maximize.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book-open.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/file-text.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/send.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/activity.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/dices.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/coins.js","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//battle/activeSkillRegistry.ts","src://tavern_helper_template/src//battle/cardRegistry.ts","src://tavern_helper_template/src//battle/effects.ts","src://tavern_helper_template/src//battle/enemyRegistry.ts","src://tavern_helper_template/src//battle/relicRegistry.ts","src://tavern_helper_template/src//localAssetManifest.ts","src://tavern_helper_template/src//bgm.ts","src://tavern_helper_template/src//codexStore.ts","src://tavern_helper_template/src//floor.ts","src://tavern_helper_template/src//fullscreen.ts","src://tavern_helper_template/src//responseParser.ts","src://tavern_helper_template/src//gameStore.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/link-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/skull.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bug.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/droplet.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/flame.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/triangle-alert.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sword.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/heart.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/ban.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/zap.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/snowflake.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/waves.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bone.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/layers.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/battery.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye-off.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/brain.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/leaf.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/trash-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/x.js","src://tavern_helper_template/src//battle/algorithms.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/circle-question-mark.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/footprints.js","webpack://tavern_helper_template/./src//components/DungeonCard.vue?3014","webpack://tavern_helper_template/src//components/DungeonCard.vue?726d","src://tavern_helper_template/src//components/DungeonDice.vue","webpack://tavern_helper_template/src//components/DungeonDice.vue?919a","webpack://tavern_helper_template/./src//components/CombatView.vue?260e","webpack://tavern_helper_template/src//components/CombatView.vue?14a6","src://tavern_helper_template/src//components/DungeonModal.vue","webpack://tavern_helper_template/src//components/DungeonModal.vue?7185","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/pencil.js","src://tavern_helper_template/src//components/SaveLoadPanel.vue","webpack://tavern_helper_template/src//components/SaveLoadPanel.vue?5541","webpack://tavern_helper_template/./src//components/GameView.vue?fd3b","webpack://tavern_helper_template/src//components/GameView.vue?30f3","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/play.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.29_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/star.js","src://tavern_helper_template/src//components/SplashScreen.vue","webpack://tavern_helper_template/src//components/SplashScreen.vue?f61c","webpack://tavern_helper_template/./src//components/WitchCollectionModal.vue?0a56","webpack://tavern_helper_template/src//components/WitchCollectionModal.vue?e161","webpack://tavern_helper_template/./src//App.vue?40f8","webpack://tavern_helper_template/src//App.vue?c7b6","src://tavern_helper_template/src//index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasA11yProp };\n//# sourceMappingURL=hasA11yProp.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString };\n//# sourceMappingURL=isEmptyString.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses };\n//# sourceMappingURL=mergeClasses.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { toKebabCase };\n//# sourceMappingURL=toKebabCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { toCamelCase } from './toCamelCase.js';\n\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\n\nexport { toPascalCase };\n//# sourceMappingURL=toPascalCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\n\nexport { toCamelCase };\n//# sourceMappingURL=toCamelCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { hasA11yProp } from './shared/src/utils/hasA11yProp.js';\nimport { isEmptyString } from './shared/src/utils/isEmptyString.js';\nimport { mergeClasses } from './shared/src/utils/mergeClasses.js';\nimport { toKebabCase } from './shared/src/utils/toKebabCase.js';\nimport { toPascalCase } from './shared/src/utils/toPascalCase.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      ),\n      ...!slots.default && !hasA11yProp(props) && { \"aria-hidden\": \"true\" }\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Book = createLucideIcon(\"book\", [\n  [\n    \"path\",\n    {\n      d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20\",\n      key: \"k3hazp\"\n    }\n  ]\n]);\n\nexport { Book as default };\n//# sourceMappingURL=book.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scroll = createLucideIcon(\"scroll\", [\n  [\"path\", { d: \"M19 17V5a2 2 0 0 0-2-2H4\", key: \"zz82l3\" }],\n  [\n    \"path\",\n    {\n      d: \"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3\",\n      key: \"1ph1d7\"\n    }\n  ]\n]);\n\nexport { Scroll as default };\n//# sourceMappingURL=scroll.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Box = createLucideIcon(\"box\", [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Users = createLucideIcon(\"users\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n]);\n\nexport { Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"book-open\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"file-text\", [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dices = createLucideIcon(\"dices\", [\n  [\"rect\", { width: \"12\", height: \"12\", x: \"2\", y: \"10\", rx: \"2\", ry: \"2\", key: \"6agr2n\" }],\n  [\n    \"path\",\n    { d: \"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6\", key: \"1o487t\" }\n  ],\n  [\"path\", { d: \"M6 18h.01\", key: \"uhywen\" }],\n  [\"path\", { d: \"M10 14h.01\", key: \"ssrbsk\" }],\n  [\"path\", { d: \"M15 6h.01\", key: \"cblpky\" }],\n  [\"path\", { d: \"M18 9h.01\", key: \"2061c0\" }]\n]);\n\nexport { Dices as default };\n//# sourceMappingURL=dices.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coins = createLucideIcon(\"coins\", [\n  [\"circle\", { cx: \"8\", cy: \"8\", r: \"6\", key: \"3yglwk\" }],\n  [\"path\", { d: \"M18.09 10.37A6 6 0 1 1 10.34 18\", key: \"t5s6rm\" }],\n  [\"path\", { d: \"M7 6h1v4\", key: \"1obek4\" }],\n  [\"path\", { d: \"m16.71 13.88.7.71-2.82 2.82\", key: \"1rbuyh\" }]\n]);\n\nexport { Coins as default };\n//# sourceMappingURL=coins.js.map\n","// \n//    \n// \n\n//   \nexport enum CardType {\n  PHYSICAL = '',\n  MAGIC = '',\n  FUNCTION = '',\n  DODGE = '',\n  ACTIVE = '',\n  CURSE = '',\n}\n\nexport type CardRarity = '' | '';\n\n//   \n/**  */\nexport type DamageMode = 'relative' | 'fixed' | 'mixed';\n\n/**\n * \n * - relative:  = FinalPoint * scale + scaleAddition\n * - fixed:     = value\n * - mixed:     = baseValue + FinalPoint * scale + scaleAddition\n */\nexport interface DamageLogic {\n  mode: DamageMode;\n  /** relative / mixed:  += FinalPoint * scale */\n  scale?: number;\n  /** relative / mixed:  += scaleAddition */\n  scaleAddition?: number;\n  /** fixed:  */\n  value?: number;\n  /** mixed:  */\n  baseValue?: number;\n}\n\n//   \nexport type RerollTarget = 'self' | 'enemy' | 'none';\n\nexport interface CardTraits {\n  /**  */\n  combo: boolean;\n  /**  */\n  reroll: RerollTarget;\n  /**  */\n  draw: boolean;\n  /**  */\n  unplayable?: boolean;\n  /**  */\n  destroyOnClashWin?: boolean;\n  /**  */\n  insertCardsToEnemyDeck?: string[];\n  /**  */\n  purgeOnUse?: boolean;\n}\n\n//   \nexport interface CardCalculation {\n  /**  1.0 */\n  multiplier: number;\n  /**  0 */\n  addition: number;\n}\n\n//   \n\n/**  */\nexport type EffectValueMode = 'fixed' | 'point_scale' | 'max_hp_percent';\n/**  */\nexport type CardEffectTrigger = 'on_use' | 'on_clash' | 'on_dodge_success' | 'on_opponent_skip';\n\n/**  */\nexport interface CardEffect {\n  /**  on_use */\n  triggers?: CardEffectTrigger[];\n\n  /**  */\n  kind:\n    | 'apply_buff'     //  Buff/Debuff\n    | 'heal'           // \n    | 'restore_mana'   // \n    | 'cleanse';       //  Debuff\n\n  //  apply_buff  \n  /** kind = apply_buff  */\n  effectType?: EffectType;\n  /** self = enemy =  */\n  target?: 'self' | 'enemy';\n  /**  */\n  restrictedTypes?: CardType[];\n\n  //   \n  /** fixed = point_scale = FinalPoint * scalemax_hp_percent =  * scale */\n  valueMode: EffectValueMode;\n  /** fixed  */\n  fixedValue?: number;\n  /** point_scale / max_hp_percent  */\n  scale?: number;\n\n  //  cleanse  \n  /**  Debuff kind = cleanse  */\n  cleanseTypes?: EffectType[];\n}\n\n//   \nexport interface CardData {\n  id: string;\n  name: string;\n  type: CardType;\n  /**  */\n  category: string;\n  /**  */\n  rarity: CardRarity;\n  /**  Type ==   0 */\n  manaCost: number;\n  /**  */\n  calculation: CardCalculation;\n  /**  */\n  damageLogic: DamageLogic;\n  /** 1 */\n  hitCount?: number;\n  /**  */\n  traits: CardTraits;\n  /**  */\n  cardEffects: CardEffect[];\n  /**  */\n  description: string;\n  /**  _ */\n  negativeEffect?: string;\n  /**  */\n  manaDrain?: number;\n  /**  */\n  ignoreDodge?: boolean;\n  /**\n   * \n   * - number\n   * - object/ + /\n   */\n  selfDamage?: number | CardSelfDamageConfig;\n  /**  */\n  image?: string;\n}\n\n//   \nexport interface ActiveSkillData {\n  id: string;\n  name: string;\n  type: CardType.ACTIVE;\n  /**  */\n  category: string;\n  /**  */\n  rarity: CardRarity;\n  /**  */\n  manaCost: number;\n  /**  */\n  Cooldown: number;\n  /**  */\n  description: string;\n  /**  */\n  useCondition?: string;\n  /**  */\n  maxUses?: number;\n}\n\n/**  */\nexport interface CardSelfDamageConfig {\n  /** fixed=percent= 50  50% */\n  value: number;\n  /** fixed=percent= */\n  mode?: 'fixed' | 'percent';\n  /** hp=maxHp= */\n  target?: 'hp' | 'maxHp';\n}\n\n//  /Buff  \nexport enum EffectType {\n  /**    -1 */\n  BARRIER = '',\n  /**    */\n  ARMOR = '',\n  /**    */\n  BIND = '',\n  /**    3 / */\n  DEVOUR = '',\n  /**    */\n  POISON = '',\n  /**    */\n  POISON_AMOUNT = '\\u4e2d\\u6bd2\\u91cf',\n  /**   300 */\n  CORROSION = '',\n  /**    */\n  BURN = '',\n  /**    */\n  BLEED = '',\n  /**    */\n  VULNERABLE = '',\n  /**    */\n  DAMAGE_BOOST = '',\n  /**    */\n  REGEN = '',\n  /**    */\n  WHITE_TURBID = '',\n  /**    */\n  IGNITE_AURA = '',\n  /**    */\n  STUN = '',\n  /**    */\n  CHARGE = '',\n  /**    */\n  FATIGUE = '',\n  /**    */\n  COLD = '',\n  /**    */\n  TEMPERATURE_DIFF = '',\n  /**    */\n  NON_LIVING = '',\n  /**   50% */\n  NON_ENTITY = '',\n  /**    */\n  ILLUSORY_BODY = '',\n  /**    */\n  TEMP_MAX_HP = '',\n  /**    */\n  MAX_HP_REDUCTION = '',\n  /**  3+1 */\n  POINT_GROWTH_BIG = '',\n  /**  3+1 */\n  POINT_GROWTH_SMALL = '',\n  /**    */\n  MANA_DRAIN = '',\n  /**   + */\n  MANA_SPRING = '',\n  /**   1 */\n  SWARM = '',\n  /**   150% */\n  BLOOD_COCOON = '',\n  /**   11 */\n  INDOMITABLE = '',\n  /**   UIdebuff */\n  PEEP_FORBIDDEN = '',\n  /**   UIdebuff */\n  BLIND_ASH = '',\n  /**   debuff */\n  COGNITIVE_INTERFERENCE = '',\n  /**   /debuff */\n  MEMORY_FOG = '',\n  /**   -1 */\n  SILENCE = '',\n  /**   1 */\n  STURDY = '',\n  /**   -1 */\n  SHOCK = '',\n  /**    */\n  FLAME_ATTACH = '',\n  /**    */\n  POISON_ATTACH = '',\n  /**    */\n  TOXIN_SPREAD = '',\n  /**   /1-1 */\n  AMBUSH = '',\n  /**    */\n  FROST_ATTACH = '',\n  /**    */\n  BLOODBLADE_ATTACH = '',\n  /**    */\n  LIGHTNING_ATTACH = '',\n  /**   50% */\n  THORNS = '',\n  /**    */\n  INK_CREATION = '',\n}\n\n/**  */\nexport type EffectPolarity = 'buff' | 'debuff' | 'mixed' | 'trait' | 'special';\n\n//   \nexport interface EffectInstance {\n  type: EffectType;\n  /**  /  */\n  stacks: number;\n  /**  */\n  polarity: EffectPolarity;\n  /** / */\n  lockDecayThisTurn?: boolean;\n  /**\n   * \n   *  ['', ''] \n   */\n  restrictedTypes?: CardType[];\n  /** / */\n  source?: string;\n}\n\n//   \nexport enum GamePhase {\n  EXPLORE = 'EXPLORE',\n  COMBAT = 'COMBAT',\n}\n\n//   \nexport enum CombatPhase {\n  /**  */\n  TURN_START = 'TURN_START',\n  /**  */\n  DRAW_PHASE = 'DRAW_PHASE',\n  /**  */\n  INTENT_PREVIEW = 'INTENT_PREVIEW',\n  /**  */\n  PLAYER_INPUT = 'PLAYER_INPUT',\n  /**  */\n  RESOLUTION = 'RESOLUTION',\n  /**  */\n  DISCARD_PHASE = 'DISCARD_PHASE',\n  /**  */\n  TURN_END = 'TURN_END',\n  /**  */\n  WIN = 'WIN',\n  /**  */\n  LOSE = 'LOSE',\n}\n\n//   \nexport interface EntityStats {\n  hp: number;\n  maxHp: number;\n  mp: number;\n  /**  */\n  minDice: number;\n  maxDice: number;\n  /**  */\n  effects: EffectInstance[];\n}\n\n//   \nexport type ClashOutcome = 'player_win' | 'enemy_win' | 'draw' | 'dodge_success' | 'no_clash';\n\nexport interface ClashResult {\n  outcome: ClashOutcome;\n  playerFinalPoint: number;\n  enemyFinalPoint: number;\n  message: string;\n}\n\n//   \nexport interface CombatState {\n  turn: number;\n  phase: CombatPhase;\n  /**  */\n  actionsRemaining: number;\n\n  // \n  playerBaseDice: number;\n  enemyBaseDice: number;\n\n  // \n  playerHand: CardData[];\n  playerDeck: CardData[];\n  discardPile: CardData[];\n\n  // \n  enemyDeck: CardData[];\n  enemyDiscard: CardData[];\n  enemyIntentCard: CardData | null;\n  enemyPredictedPoint: number;\n\n  // \n  playerSelectedCard: CardData | null;\n\n  // \"\"\n  lastPlayedCard: CardData | null;\n\n  // \n  logs: string[];\n}\n\n//   \nexport interface RelicModifiers {\n  /**  */\n  globalMultiplier: number;\n  /**  */\n  globalAddition: number;\n}\n\n//   \nexport interface PointCalculationContext {\n  baseDice: number;\n  card: CardData;\n  entityEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n}\n\n//   \nexport interface DamageCalculationContext {\n  finalPoint: number;\n  card: CardData;\n  attackerEffects: EffectInstance[];\n  defenderEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n  /**  */\n  isTrueDamage?: boolean;\n}\n\n//   AI  \n\n/**  AI    */\nexport interface EnemyAIContext {\n  /**  effects */\n  enemyStats: Readonly<EntityStats>;\n  /**  effects */\n  playerStats: Readonly<EntityStats>;\n  /**  */\n  deck: CardData[];\n  /**  */\n  turn: number;\n  /**\n   * \n   *  { hasUsedHeal: false } \n   */\n  flags: Record<string, any>;\n}\n\n/**\n * \n * \n * \n */\nexport type EnemyAISelectCard = (ctx: EnemyAIContext) => CardData;\n\n/**  */\nexport interface EnemyDefinition {\n  /**  */\n  name: string;\n  /**  */\n  stats: EntityStats;\n  /**  */\n  deck: CardData[];\n  /**  AI  */\n  selectCard: EnemyAISelectCard;\n}\n","import { CardType, type ActiveSkillData } from '../types';\n\nconst : ActiveSkillData = {\n  id: 'active_basic_reroll_self',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  Cooldown: 1,\n  description: '',\n};\n\nconst : ActiveSkillData = {\n  id: 'active_basic_reroll_enemy',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  Cooldown: 1,\n  description: '',\n};\n\nconst : ActiveSkillData = {\n  id: 'active_basic_draw',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  Cooldown: 1,\n  description: '',\n};\n\nconst : ActiveSkillData = {\n  id: 'active_basic_guard',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  Cooldown: 2,\n  description: '2',\n};\n\nconst : ActiveSkillData = {\n  id: 'active_basic_boost',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  Cooldown: 1,\n  description: '+1',\n};\n\nconst : ActiveSkillData = {\n  id: 'active_basic_weaken',\n  name: '',\n  type: CardType.ACTIVE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  Cooldown: 2,\n  description: '-1',\n};\n\nconst ACTIVE_SKILL_REGISTRY: readonly ActiveSkillData[] = [\n  ,\n  ,\n  ,\n  ,\n  ,\n  ,\n];\n\nconst ACTIVE_SKILL_BY_NAME = new Map<string, ActiveSkillData>(\n  ACTIVE_SKILL_REGISTRY.map((skill) => [skill.name, skill]),\n);\n\nconst ACTIVE_SKILL_BY_ID = new Map<string, ActiveSkillData>(\n  ACTIVE_SKILL_REGISTRY.map((skill) => [skill.id, skill]),\n);\n\nexport const getAllActiveSkills = (): ActiveSkillData[] => ACTIVE_SKILL_REGISTRY.map((skill) => ({ ...skill }));\n\nexport const getActiveSkillByName = (name: string): ActiveSkillData | null => {\n  const skill = ACTIVE_SKILL_BY_NAME.get(name);\n  return skill ? { ...skill } : null;\n};\n\nexport const getActiveSkillById = (id: string): ActiveSkillData | null => {\n  const skill = ACTIVE_SKILL_BY_ID.get(id);\n  return skill ? { ...skill } : null;\n};\n\nexport const resolveActiveSkillNames = (names: string[]): ActiveSkillData[] => names\n  .map((name) => getActiveSkillByName(name))\n  .filter((skill): skill is ActiveSkillData => Boolean(skill));\n","// \n//    \n//  UI  MVU  _string[]\n//   getCardByName()  CardData\n// \n\nimport { CardType, EffectType, type CardData } from '../types';\n\n/**\n * =====================================================================\n * /\n * =====================================================================\n * 1) \n *    -  `CardType.MAGIC`  `manaCost`\n *    - PHYSICAL / FUNCTION / DODGE `manaCost: 0`\n *\n * 2) \n *    - `calculation = { multiplier, addition }`\n *      FinalPoint = floor(BaseDice * multiplier + addition + )\n *    - `damageLogic`\n *      relative: damage = floor(FinalPoint * scale + scaleAddition)\n *      fixed:    damage = floor(value)\n *      mixed:    damage = floor(baseValue + FinalPoint * scale + scaleAddition)\n *\n * 3) +N\n *    - +N `calculation.addition = N`\n *    - +N `damageLogic.scaleAddition = N`\n *       mixed/fixed\n *\n * 4) \n *    - floor\n *\n * 5) \n *    -  `hitCount` 1\n *    -  `hitCount`  UI \n *\n * 6) \n *    - description +N  +N\n * =====================================================================\n */\n\n//   \n\n/**  */\nconst : CardData = {\n  id: 'basic_physical',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +1 */\nconst 1: CardData = {\n  id: 'basic_physical_plus_1',\n  name: '+1',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +2 */\nconst 2: CardData = {\n  id: 'basic_physical_plus_2',\n  name: '+2',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** +4 */\nconst 4: CardData = {\n  id: 'basic_physical_plus_4',\n  name: '+4',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 4 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+41',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_magic',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'focus_magic_attack',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '3MP*1.51',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.ARMOR,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '+11',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_point_suppress',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/** 0.6 */\nconst : CardData = {\n  id: 'basic_rest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.6 },\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 0.6 },\n  ],\n  description: '0.60.6',\n};\n\n/** -1 */\nconst : CardData = {\n  id: 'basic_side_step_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '-1',\n};\n\n/** *0 */\nconst : CardData = {\n  id: 'basic_existence_erasure',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*0',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_breathing_technique',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_void_step',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'self', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** +21 */\nconst : CardData = {\n  id: 'basic_mirror_phantom',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.BARRIER,\n      target: 'self',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+21',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_mana_shift',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'restore_mana',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** 0 CombatView */\nconst : CardData = {\n  id: 'modao_zero_domain_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'modao_magic_sword',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +10.52 */\nconst : CardData = {\n  id: 'modao_double_blade',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 2,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+10.52',\n};\n\n/** 1.5 */\nconst : CardData = {\n  id: 'modao_route_sampling',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'restore_mana', target: 'self', valueMode: 'point_scale', scale: 1.5 },\n  ],\n  description: '1.5',\n};\n\n/** 1MP1-1 CombatView */\nconst : CardData = {\n  id: 'modao_weave_backup',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1MP1-1',\n};\n\n/** MP+20 CombatView */\nconst : CardData = {\n  id: 'modao_mana_purify',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '20',\n};\n\n/** (12-) CombatView */\nconst : CardData = {\n  id: 'modao_mana_hurricane',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '(12-)9MP3MP1',\n};\n\n/** 111 CombatView */\nconst : CardData = {\n  id: 'modao_echo_feedback',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '111',\n};\n\n/** 0.71 */\nconst : CardData = {\n  id: 'modao_inverse_chant',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.7, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.SILENCE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.71',\n};\n\n/** *1.51MP84MP1.5 CombatView */\nconst : CardData = {\n  id: 'modao_arcane_lance',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.51MP84MP1.5',\n};\n\n/** 1.520MP4MP1 CombatView */\nconst : CardData = {\n  id: 'modao_ring_collapse',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1.520MP4MP1',\n};\n\n/** 0.9MP CombatView */\nconst : CardData = {\n  id: 'modao_prism_flow',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.9, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.92MP+0.3+2.1',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'modao_energy_barrier',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '5MP1MP+2',\n};\n\n/** 8MP*213 */\nconst : CardData = {\n  id: 'modao_mana_bombard',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 8,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 3,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '8MP*213',\n};\n\n/**  */\nconst : CardData = {\n  id: 'modao_flow',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'restore_mana', target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '21',\n};\n\n/**  */\nconst : CardData = {\n  id: 'modao_overdraw',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'restore_mana', target: 'self', valueMode: 'fixed', fixedValue: 10 },\n    { kind: 'apply_buff', effectType: EffectType.MANA_DRAIN, target: 'self', valueMode: 'fixed', fixedValue: 3 },\n  ],\n  description: '103',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'modao_mana_armor',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'modao_wager',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n//   \n\n/** +1-3 */\nconst : CardData = {\n  id: 'burn_spark_mark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -3 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+1-3',\n};\n\n/** +1+2 */\nconst : CardData = {\n  id: 'burn_tar_splash',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+1+2',\n};\n\n/** 0.5+ */\nconst : CardData = {\n  id: 'burn_scorch_wind',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.5+',\n};\n\n/** -21+1 */\nconst : CardData = {\n  id: 'burn_scorch',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '-21+1',\n};\n\n/** 0.5+1 */\nconst : CardData = {\n  id: 'burn_flame_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.5+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'burn_soul_bolt',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '1+2',\n};\n\n/** *20.6+1 */\nconst : CardData = {\n  id: 'burn_body_lunge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '*20.6+1',\n};\n\n/** *0.81 */\nconst : CardData = {\n  id: 'burn_detonation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 0.8, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*0.81',\n};\n\n/** 2+11 */\nconst : CardData = {\n  id: 'burn_inferno_judgement',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2+11',\n};\n\n/** +2+1 */\nconst : CardData = {\n  id: 'burn_hell_waves',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BARRIER, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+2+1',\n};\n\n/** 2:1/ CombatView  */\nconst : CardData = {\n  id: 'burn_critical_boil',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2:1/4',\n};\n\n/**  CombatView  */\nconst : CardData = {\n  id: 'burn_char_convert',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'burn_kindle',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 8,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '8MP0.5',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'burn_fire_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.BURN,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n//   \n\n/** 0.61 */\nconst : CardData = {\n  id: 'yanhan_frostmark_slash',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.61',\n};\n\n/**  */\nconst : CardData = {\n  id: 'yanhan_coldfield_calibration',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.8 },\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '0.82',\n};\n\n/**  */\nconst : CardData = {\n  id: 'yanhan_refraction_evade',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.COLD,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_feedback_freeze_wheel',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '0.50.5floor(/2)',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'yanhan_cold_chamber_duplicate',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'yanhan_temperature_effect',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.TEMPERATURE_DIFF, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.51',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_pressure_cycle',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '102+11MP',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_cold_source_rectifier',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '4',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_zero_boundary_verdict',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '101011',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_frost_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'yanhan_spell_echo',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** 0.6+1 */\nconst : CardData = {\n  id: 'bloodpool_venesection',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BLEED, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.6+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'bloodpool_crimson_suppress',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BLEED, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2MP1+2',\n};\n\n/** 10.5 */\nconst : CardData = {\n  id: 'bloodpool_siphon_slash',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '10.5',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'bloodpool_vital_reservoir',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1',\n};\n\n/** 0.60.6 */\nconst : CardData = {\n  id: 'bloodpool_active_reservoir',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 0.6 },\n    { kind: 'apply_buff', effectType: EffectType.TEMP_MAX_HP, target: 'self', valueMode: 'point_scale', scale: 0.6 },\n  ],\n  description: '0.60.6',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'bloodpool_life_wall',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.TEMP_MAX_HP, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 313+13 */\nconst : CardData = {\n  id: 'bloodpool_blood_debt_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  selfDamage: 3,\n  description: '313+13',\n};\n\n/** *2210.5+2 */\nconst : CardData = {\n  id: 'bloodpool_scar_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 2, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BLEED, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '6MP*2210.5+2',\n};\n\n/**  */\nconst : CardData = {\n  id: 'bloodpool_ratio_inversion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 9,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '9MP',\n};\n\n/** 3 */\nconst : CardData = {\n  id: 'bloodpool_bleed_transfusion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '6MP3',\n};\n\n/** +10.41 */\nconst : CardData = {\n  id: 'bloodpool_blood_shadow_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 0.4,\n    },\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.BLEED,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+10.41',\n};\n\n/** 3 */\nconst : CardData = {\n  id: 'bloodpool_blood_curtain_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.BLEED,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 3,\n    },\n  ],\n  description: '3',\n};\n\n/** 3 */\nconst : CardData = {\n  id: 'bloodpool_blood_pact_bulwark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.5 },\n  ],\n  selfDamage: 3,\n  description: '31.5',\n};\n\n//   \n\n/** +211 */\nconst : CardData = {\n  id: 'enemy_mimic_slimy_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+211',\n};\n\n/** *1.31.5 */\nconst : CardData = {\n  id: 'enemy_mimic_agile_tongue',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.3, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.31.5',\n};\n\n/** 1+1+2 */\nconst : CardData = {\n  id: 'enemy_mimic_maw',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '112',\n};\n\n/** *30.5 */\nconst : CardData = {\n  id: 'enemy_mimic_crush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 3.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*30.5',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_mimic_digest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '+20.5',\n};\n\n/** 0.5+1 */\nconst : CardData = {\n  id: 'enemy_moth_aphro_powder',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.5+1',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_moth_sensitive_mark',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_moth_pheromone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CHARGE, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_moth_swarm_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '6MP11',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_blissbee_sensitive_scout',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.5 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.51',\n};\n\n/** 0.52 CombatView */\nconst : CardData = {\n  id: 'enemy_blissbee_aphro_stinger',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.52',\n};\n\n/** *1.50.50.5 CombatView */\nconst : CardData = {\n  id: 'enemy_blissbee_precise_harvest',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.50.5',\n};\n\n/** [] */\nconst : CardData = {\n  id: 'enemy_pollen_high_pressure_spray',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '[]',\n  negativeEffect: '[]',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_pollen_infiltration',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_ink_slime_invasion',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_ink_slime_condense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SWARM, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '11',\n};\n\n/** +111 */\nconst : CardData = {\n  id: 'enemy_prim_embrace',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+111',\n};\n\n/** -1 */\nconst : CardData = {\n  id: 'enemy_prim_fluid_evasion',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.POISON,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '-11',\n};\n\n/** 4MP3 */\nconst : CardData = {\n  id: 'enemy_prim_digest_caress',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n  ],\n  description: '3',\n};\n\n/** 50%11 */\nconst : CardData = {\n  id: 'enemy_prim_entity_clone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'self',\n      valueMode: 'max_hp_percent',\n      scale: 0.5,\n    },\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SWARM, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '50%11',\n};\n\n/**  */\nconst : CardData = {\n  id: 'enemy_nymph_lust_hallucination',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, unplayable: true },\n  cardEffects: [],\n  description: '',\n};\n\n/** +12 */\nconst : CardData = {\n  id: 'enemy_nymph_misty_swirl',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+12',\n};\n\n/** 6MP+211 */\nconst : CardData = {\n  id: 'enemy_nymph_mental_shock',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+211',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_nymph_mischief',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.SHOCK,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** 1+2+4 CombatView */\nconst : CardData = {\n  id: 'enemy_nymph_giant_projection',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1+2+4',\n};\n\n/** 1.5 */\nconst : CardData = {\n  id: 'enemy_root_tremor_sense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.5 },\n  ],\n  description: '1.5',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_root_lube_secretion',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '0.5',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_root_infiltrate_climb',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_charge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +10.51 */\nconst : CardData = {\n  id: 'enemy_swamp_numb_spread',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+10.51',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_swamp_fluid_wrap',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+20.5',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_swamp_corrode',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2',\n};\n\n/** *1.511 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_aphro_gas',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '*1.511',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_elastic_adsorb',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '11',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_iridescent_float',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '1',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_mist_sprite_illusion_lure',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 2,\n    },\n  ],\n  description: '2',\n};\n\n/** 5 */\nconst : CardData = {\n  id: 'enemy_whisper_ghost_phantom',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 5,\n    },\n  ],\n  description: '5',\n};\n\n/** 2MP1 */\nconst : CardData = {\n  id: 'enemy_whisper_ghost_knowledge_whisper',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.MAX_HP_REDUCTION,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** 10MP*31 */\nconst : CardData = {\n  id: 'enemy_whisper_ghost_forbidden_knowledge',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 10,\n  calculation: { multiplier: 3.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.CORROSION,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '*31',\n};\n\n/** 6 */\nconst : CardData = {\n  id: 'enemy_whisper_ghost_passive_sensitization',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  manaDrain: 6,\n  description: '6',\n};\n\n/** 4MP+20.41 */\nconst : CardData = {\n  id: 'enemy_book_demon_between_lines_temptation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.4, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.CORROSION,\n      target: 'enemy',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '+20.41',\n};\n\n/** +111 */\nconst : CardData = {\n  id: 'enemy_book_demon_ink_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+111',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_book_demon_whisper_incitement',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.STUN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1',\n};\n\n/** -11 */\nconst : CardData = {\n  id: 'enemy_book_demon_knowledge_thirst',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.SILENCE,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '-11',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_vinewalker_lurk',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.AMBUSH, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1',\n};\n\n/** 1+4 CombatView */\nconst : CardData = {\n  id: 'enemy_vinewalker_lightning_ambush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1+4',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_vinewalker_paralytic_toxin',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SHOCK, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_vinewalker_lubricated_shrink',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.CHARGE,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/** 31 */\nconst : CardData = {\n  id: 'enemy_springspirit_liquefied_infiltration',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '31',\n};\n\n/** 10 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_internal_manipulation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '10',\n};\n\n/** debuff1 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_undead_condense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'debuff1',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_springspirit_silent_infiltration',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'apply_buff',\n      effectType: EffectType.CORROSION,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 2,\n    },\n  ],\n  description: '2',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_undine_earth_essence',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: true, purgeOnUse: true },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2',\n};\n\n/** 0.53 */\nconst : CardData = {\n  id: 'enemy_undine_loving_whip',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n  ],\n  description: '0.53',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_undine_doting_embrace',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/** 1MP1 */\nconst : CardData = {\n  id: 'enemy_undine_essence_infusion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 5MP*21 */\nconst : CardData = {\n  id: 'enemy_undine_psychic_assimilation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 5,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*21',\n};\n\n/** 2debuff1 */\nconst : CardData = {\n  id: 'enemy_undine_earth_liquid',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 2.0 },\n    {\n      kind: 'cleanse',\n      target: 'self',\n      valueMode: 'fixed',\n      fixedValue: 0,\n      cleanseTypes: [EffectType.COLD, EffectType.BURN, EffectType.POISON, EffectType.BLEED, EffectType.SHOCK],\n    },\n    { kind: 'apply_buff', effectType: EffectType.REGEN, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.REGEN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '2debuff1',\n};\n\n/** 0.54 */\nconst : CardData = {\n  id: 'enemy_mata_matriarch_invitation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 4 },\n  ],\n  description: '0.54',\n};\n\n/** +20.411 */\nconst : CardData = {\n  id: 'enemy_mata_under_skirt_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.4, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '+20.411',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'enemy_mata_fungal_repair',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '221',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_mata_false_smile',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success', 'on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.CHARGE,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 2.0,\n    },\n  ],\n  description: '2',\n};\n\n/** 0.599 */\nconst : CardData = {\n  id: 'enemy_rose_plant_dominion',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 99,\n    },\n  ],\n  description: '0.599',\n};\n\n/** 1+2 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_wangzhi_whip',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1+2',\n};\n\n/** 11 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_life_drain',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n/** 11 CombatView */\nconst : CardData = {\n  id: 'enemy_rose_nectar_discipline',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '11',\n};\n\n/** 1MP0.51 */\nconst : CardData = {\n  id: 'enemy_ursula_silence_spell',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 1,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.SILENCE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.51',\n};\n\n/** 6MP*1.50.250.5 */\nconst : CardData = {\n  id: 'enemy_ursula_lust_imprint',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.2, scaleAddition: 0 },\n  hitCount: 5,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '*1.50.250.5',\n};\n\n/** 0.83 */\nconst : CardData = {\n  id: 'enemy_ursula_binding_law',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.8, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 3,\n    },\n  ],\n  description: '0.83',\n};\n\n/** +210.5 CombatView */\nconst : CardData = {\n  id: 'enemy_ursula_whip_punish',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+210.5',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_ursula_commandment',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.SHOCK, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n    { kind: 'apply_buff', effectType: EffectType.SILENCE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.51',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_floating_page_attach',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/** 4MP*1.50.5 CombatView */\nconst : CardData = {\n  id: 'enemy_floating_page_sensory_infusion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.5',\n};\n\n/** 2MP+11.51 CombatView */\nconst : CardData = {\n  id: 'enemy_floating_page_forced_immersion',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11.51',\n};\n\n/** -11 CombatView */\nconst : CardData = {\n  id: 'enemy_inkmouse_cowardice',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '-11',\n};\n\n/** 2MP33 CombatView */\nconst : CardData = {\n  id: 'enemy_inkmouse_ink_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 3 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_clash'],\n      kind: 'apply_buff',\n      effectType: EffectType.POISON,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 3,\n    },\n  ],\n  description: '33',\n};\n\n/** 10.5 */\nconst : CardData = {\n  id: 'enemy_inkmouse_liquefy_regen',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.MAX_HP_REDUCTION, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.SWARM, target: 'self', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '10.5',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_slime_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_dodge_success'],\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,\n    },\n  ],\n  description: '1',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_heal',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'curse_alchemy_waste',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: true },\n  cardEffects: [],\n  description: '-21',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_cunning',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_muxinlan_forced_acquisition',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false, destroyOnClashWin: true },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** *2debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquidation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*2debuff12',\n};\n\n/** *1.50.5debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_unstable_reagent',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.5debuff',\n};\n\n/** *1.51:1 CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquid_fire',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.51:1',\n};\n\n/** +3debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_activated_slime',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 3 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+3debuff',\n};\n\n/**  */\nconst : CardData = {\n  id: 'enemy_muxinlan_take_it',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'heal', valueMode: 'point_scale', scale: 2.0, target: 'self' },\n  ],\n  description: '2',\n};\n\n/** xxx CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_premium_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'xxx',\n};\n\n/** *0.5 */\nconst : CardData = {\n  id: 'enemy_muxinlan_set_ambush',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 0.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      triggers: ['on_opponent_skip'],\n      kind: 'apply_buff',\n      effectType: EffectType.MANA_DRAIN,\n      target: 'enemy',\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '*0.51',\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst CARD_REGISTRY: ReadonlyMap<string, CardData> = new Map<string, CardData>([\n  [.name, ],\n  [1.name, 1],\n  [2.name, 2],\n  [4.name, 4],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getCardByName(name: string): CardData | undefined {\n  return CARD_REGISTRY.get(name);\n}\n\n/**  CardData  */\nexport function resolveCardNames(names: string[]): CardData[] {\n  return names\n    .map((n) => CARD_REGISTRY.get(n))\n    .filter((c): c is CardData => c !== undefined);\n}\n\n/**  */\nexport function getAllCardNames(): string[] {\n  return [...CARD_REGISTRY.keys()];\n}\n\n/**  */\nexport function getAllCards(): CardData[] {\n  return [...CARD_REGISTRY.values()];\n}\n","// \n//  /Buff   \n// \n\nimport {\n  type CardData,\n  type CardType,\n  type EffectInstance,\n  type EffectPolarity,\n  type EntityStats,\n  EffectType,\n} from '../types';\n\n//   \n\n/**  */\nexport type EffectTiming =\n  | 'onTurnStart'    // \n  | 'onTurnEnd'      // \n  | 'onBeforeDamage'  // \n  | 'onAfterDamage'  // \n  | 'onBeforeAttack' // \n  | 'onAfterAttack'  // \n  | 'onClash'        // \n  | 'onDiceRoll'     // \n  | 'onCardPlay'     // \n  | 'passive';       // \n\n/**  */\nexport interface EffectDefinition {\n  type: EffectType;\n  name: string;\n  polarity: EffectPolarity;\n  /**  */\n  timings: EffectTiming[];\n  /**  */\n  stackable: boolean;\n  /** 0 =  */\n  maxStacks: number;\n  /**  */\n  description: string;\n}\n\n//   \n\nexport const EFFECT_REGISTRY: Record<EffectType, EffectDefinition> = {\n  [EffectType.BARRIER]: {\n    type: EffectType.BARRIER,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.ARMOR]: {\n    type: EffectType.ARMOR,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BIND]: {\n    type: EffectType.BIND,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.DEVOUR]: {\n    type: EffectType.DEVOUR,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay'],\n    stackable: false,\n    maxStacks: 1,\n    description: '3//',\n  },\n  [EffectType.POISON]: {\n    type: EffectType.POISON,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POISON_AMOUNT]: {\n    type: EffectType.POISON_AMOUNT,\n    name: '',\n    polarity: 'special',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.CORROSION]: {\n    type: EffectType.CORROSION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '30',\n  },\n  [EffectType.BURN]: {\n    type: EffectType.BURN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLEED]: {\n    type: EffectType.BLEED,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onClash', 'onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.VULNERABLE]: {\n    type: EffectType.VULNERABLE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.DAMAGE_BOOST]: {\n    type: EffectType.DAMAGE_BOOST,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.REGEN]: {\n    type: EffectType.REGEN,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.WHITE_TURBID]: {\n    type: EffectType.WHITE_TURBID,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.IGNITE_AURA]: {\n    type: EffectType.IGNITE_AURA,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.STUN]: {\n    type: EffectType.STUN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onTurnEnd'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.CHARGE]: {\n    type: EffectType.CHARGE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.FATIGUE]: {\n    type: EffectType.FATIGUE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.COLD]: {\n    type: EffectType.COLD,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeAttack', 'onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.TEMPERATURE_DIFF]: {\n    type: EffectType.TEMPERATURE_DIFF,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.NON_LIVING]: {\n    type: EffectType.NON_LIVING,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.NON_ENTITY]: {\n    type: EffectType.NON_ENTITY,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '50%50%',\n  },\n  [EffectType.ILLUSORY_BODY]: {\n    type: EffectType.ILLUSORY_BODY,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '50%',\n  },\n  [EffectType.TEMP_MAX_HP]: {\n    type: EffectType.TEMP_MAX_HP,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '1',\n  },\n  [EffectType.MAX_HP_REDUCTION]: {\n    type: EffectType.MAX_HP_REDUCTION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POINT_GROWTH_BIG]: {\n    type: EffectType.POINT_GROWTH_BIG,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.POINT_GROWTH_SMALL]: {\n    type: EffectType.POINT_GROWTH_SMALL,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.MANA_DRAIN]: {\n    type: EffectType.MANA_DRAIN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.MANA_SPRING]: {\n    type: EffectType.MANA_SPRING,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.SWARM]: {\n    type: EffectType.SWARM,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '01',\n  },\n  [EffectType.BLOOD_COCOON]: {\n    type: EffectType.BLOOD_COCOON,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '0150%',\n  },\n  [EffectType.INDOMITABLE]: {\n    type: EffectType.INDOMITABLE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '011',\n  },\n  [EffectType.PEEP_FORBIDDEN]: {\n    type: EffectType.PEEP_FORBIDDEN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.BLIND_ASH]: {\n    type: EffectType.BLIND_ASH,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.COGNITIVE_INTERFERENCE]: {\n    type: EffectType.COGNITIVE_INTERFERENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.MEMORY_FOG]: {\n    type: EffectType.MEMORY_FOG,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.SILENCE]: {\n    type: EffectType.SILENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.STURDY]: {\n    type: EffectType.STURDY,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '1',\n  },\n  [EffectType.SHOCK]: {\n    type: EffectType.SHOCK,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.FLAME_ATTACH]: {\n    type: EffectType.FLAME_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.POISON_ATTACH]: {\n    type: EffectType.POISON_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.TOXIN_SPREAD]: {\n    type: EffectType.TOXIN_SPREAD,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.AMBUSH]: {\n    type: EffectType.AMBUSH,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '11',\n  },\n  [EffectType.FROST_ATTACH]: {\n    type: EffectType.FROST_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLOODBLADE_ATTACH]: {\n    type: EffectType.BLOODBLADE_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.LIGHTNING_ATTACH]: {\n    type: EffectType.LIGHTNING_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.THORNS]: {\n    type: EffectType.THORNS,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '50%',\n  },\n  [EffectType.INK_CREATION]: {\n    type: EffectType.INK_CREATION,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '1',\n  },\n};\n\n// debuff\nexport const ELEMENTAL_DEBUFF_TYPES: EffectType[] = [\n  EffectType.COLD,\n  EffectType.BURN,\n  EffectType.POISON,\n  EffectType.BLEED,\n  EffectType.SHOCK,\n];\n\n// \n//  \n// \n\n/**\n * \n */\nexport function findEffect(entity: EntityStats, type: EffectType): EffectInstance | undefined {\n  return entity.effects.find(e => e.type === type);\n}\n\n/**\n * \n */\nexport function hasEffect(entity: EntityStats, type: EffectType): boolean {\n  return entity.effects.some(e => e.type === type && e.stacks > 0);\n}\n\n/**\n *  0\n */\nexport function getEffectStacks(entity: EntityStats, type: EffectType): number {\n  const effect = findEffect(entity, type);\n  return effect ? effect.stacks : 0;\n}\n\n/**\n * \n * /\n */\nexport function applyEffect(\n  entity: EntityStats,\n  type: EffectType,\n  stacks: number = 1,\n  options?: { restrictedTypes?: CardType[]; source?: string; lockDecayThisTurn?: boolean },\n): boolean {\n  const normalizedStacks = Math.max(0, Math.floor(stacks));\n  if (normalizedStacks <= 0) return false;\n\n  // \n  if (hasEffect(entity, EffectType.NON_LIVING)) {\n    if (type === EffectType.POISON || type === EffectType.BLEED) {\n      return false; // \n    }\n  }\n\n  const def = EFFECT_REGISTRY[type];\n  const existing = findEffect(entity, type);\n  let nextStacks = normalizedStacks;\n\n  if (type === EffectType.COLD) {\n    const temperatureDiffStacks = getEffectStacks(entity, EffectType.TEMPERATURE_DIFF);\n    if (temperatureDiffStacks > 0) {\n      nextStacks += temperatureDiffStacks;\n    }\n  }\n\n  // 0\n  if (type === EffectType.MAX_HP_REDUCTION) {\n    const maxReducible = Math.max(0, entity.maxHp);\n    if (maxReducible <= 0) return false;\n    nextStacks = Math.min(nextStacks, maxReducible);\n    entity.maxHp -= nextStacks;\n    entity.hp = Math.min(entity.hp, entity.maxHp);\n  }\n\n  if (existing) {\n    if (def.stackable) {\n      const prevStacks = existing.stacks;\n      existing.stacks += nextStacks;\n      if (def.maxStacks > 0) {\n        existing.stacks = Math.min(existing.stacks, def.maxStacks);\n      }\n      if (type === EffectType.TEMP_MAX_HP) {\n        const actualAdded = Math.max(0, existing.stacks - prevStacks);\n        if (actualAdded > 0) {\n          entity.maxHp += actualAdded;\n        }\n      }\n    }\n    // \n    if (type === EffectType.BIND && options?.restrictedTypes) {\n      existing.restrictedTypes = options.restrictedTypes;\n    }\n    if ((type === EffectType.BIND || type === EffectType.SILENCE || type === EffectType.STUN) && options?.lockDecayThisTurn) {\n      existing.lockDecayThisTurn = true;\n    }\n    if (type === EffectType.CORROSION && existing.stacks >= 30) {\n      entity.maxHp = 0;\n      entity.hp = 0;\n    }\n    return true;\n  }\n\n  // \n  const instanceStacks = def.maxStacks > 0 ? Math.min(nextStacks, def.maxStacks) : nextStacks;\n  if (type === EffectType.TEMP_MAX_HP && instanceStacks > 0) {\n    entity.maxHp += instanceStacks;\n  }\n  const instance: EffectInstance = {\n    type,\n    stacks: instanceStacks,\n    polarity: def.polarity,\n    lockDecayThisTurn: (type === EffectType.BIND || type === EffectType.SILENCE || type === EffectType.STUN)\n      ? !!options?.lockDecayThisTurn\n      : undefined,\n    restrictedTypes: options?.restrictedTypes,\n    source: options?.source,\n  };\n  entity.effects.push(instance);\n  if (type === EffectType.CORROSION && instance.stacks >= 30) {\n    entity.maxHp = 0;\n    entity.hp = 0;\n  }\n  return true;\n}\n\n/**\n * \n */\nexport function removeEffect(entity: EntityStats, type: EffectType): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  if (type === EffectType.TEMP_MAX_HP && effect.stacks > 0) {\n    entity.maxHp = Math.max(0, entity.maxHp - effect.stacks);\n    entity.hp = Math.min(entity.hp, entity.maxHp);\n  }\n  entity.effects = entity.effects.filter(e => e.type !== type);\n}\n\n/**\n *  0 \n */\nexport function reduceEffectStacks(entity: EntityStats, type: EffectType, amount: number = 1): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  if (type === EffectType.TEMP_MAX_HP) {\n    const removed = Math.min(effect.stacks, Math.max(0, Math.floor(amount)));\n    if (removed <= 0) return;\n    effect.stacks -= removed;\n    entity.maxHp = Math.max(0, entity.maxHp - removed);\n    entity.hp = Math.min(entity.hp, entity.maxHp);\n    if (effect.stacks <= 0) {\n      entity.effects = entity.effects.filter(e => e.type !== type);\n    }\n    return;\n  }\n  effect.stacks -= amount;\n  if (effect.stacks <= 0) {\n    removeEffect(entity, type);\n  }\n}\n\n// \n//  \n// \n\n/**  */\nexport interface TurnStartResult {\n  hpChange: number;\n  mpChange: number;\n  trueDamage: number;\n  opponentHpChange: number;\n  isStunned: boolean;\n  logs: string[];\n  /**  */\n  applyToOpponent: Array<{ type: EffectType; stacks: number }>;\n}\n\n/**\n * \n *     (-1)            ()\n */\nexport function processOnTurnStart(entity: EntityStats): TurnStartResult {\n  const result: TurnStartResult = {\n    hpChange: 0,\n    mpChange: 0,\n    trueDamage: 0,\n    opponentHpChange: 0,\n    isStunned: false,\n    logs: [],\n    applyToOpponent: [],\n  };\n\n  // \n  const poisonAmount = getEffectStacks(entity, EffectType.POISON_AMOUNT);\n  if (poisonAmount > 0) {\n    if (poisonAmount >= entity.hp) {\n      result.trueDamage += poisonAmount;\n      removeEffect(entity, EffectType.POISON_AMOUNT);\n      result.logs.push(`[] (${poisonAmount})  (${entity.hp}) ${poisonAmount} `);\n    }\n  }\n\n  // \n  const burnStacks = getEffectStacks(entity, EffectType.BURN);\n  if (burnStacks > 0) {\n    let burnDamage = burnStacks;\n    const vulnerableStacks = getEffectStacks(entity, EffectType.VULNERABLE);\n    if (vulnerableStacks > 0) {\n      burnDamage += vulnerableStacks;\n      result.logs.push(`[]  +${vulnerableStacks}`);\n    }\n    const temperatureDiffStacks = getEffectStacks(entity, EffectType.TEMPERATURE_DIFF);\n    if (temperatureDiffStacks > 0) {\n      burnDamage += temperatureDiffStacks;\n      result.logs.push(`[]  +${temperatureDiffStacks}`);\n    }\n    result.hpChange -= burnDamage;\n    result.logs.push(`[]  ${burnDamage} `);\n  }\n\n  //  -1\n  if (hasEffect(entity, EffectType.BLEED)) {\n    reduceEffectStacks(entity, EffectType.BLEED);\n    result.logs.push(`[] `);\n  }\n\n  // \n  const regenStacks = getEffectStacks(entity, EffectType.REGEN);\n  if (regenStacks > 0) {\n    result.hpChange += regenStacks;\n    result.logs.push(`[]  ${regenStacks} `);\n  }\n\n  // \n  const whiteTurbidStacks = getEffectStacks(entity, EffectType.WHITE_TURBID);\n  if (whiteTurbidStacks > 0) {\n    result.opponentHpChange += whiteTurbidStacks;\n    result.applyToOpponent.push({ type: EffectType.CORROSION, stacks: whiteTurbidStacks });\n    result.logs.push(`[]  ${whiteTurbidStacks}  ${whiteTurbidStacks} `);\n  }\n\n  //   \n  const igniteStacks = getEffectStacks(entity, EffectType.IGNITE_AURA);\n  if (igniteStacks > 0) {\n    applyEffect(entity, EffectType.BURN, 1);\n    result.applyToOpponent.push({ type: EffectType.BURN, stacks: 1 });\n    result.logs.push(`[]  1 `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    result.isStunned = true;\n    result.logs.push(`[] `);\n  }\n\n  // \n  const manaSpringStacks = getEffectStacks(entity, EffectType.MANA_SPRING);\n  if (manaSpringStacks > 0) {\n    result.mpChange += manaSpringStacks;\n    result.logs.push(`[]  +${manaSpringStacks}`);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.MANA_DRAIN)) {\n    const projectedMp = Math.max(0, entity.mp + result.mpChange);\n    if (projectedMp > 0) {\n      result.mpChange -= projectedMp;\n    }\n    result.logs.push(`[] `);\n    reduceEffectStacks(entity, EffectType.MANA_DRAIN);\n  }\n\n  // \n  const frostAttachStacks = getEffectStacks(entity, EffectType.FROST_ATTACH);\n  if (frostAttachStacks > 0) {\n    result.applyToOpponent.push({ type: EffectType.COLD, stacks: frostAttachStacks });\n    result.logs.push(`[]  ${frostAttachStacks} `);\n  }\n\n  return result;\n}\n\n/**\n * \n * (-1)  ()  (-1)  (-1)\n */\nexport function processOnTurnEnd(entity: EntityStats): string[] {\n  const logs: string[] = [];\n\n  // -1\n  const poisonStacks = getEffectStacks(entity, EffectType.POISON);\n  if (poisonStacks > 0) {\n    applyEffect(entity, EffectType.POISON_AMOUNT, poisonStacks);\n    reduceEffectStacks(entity, EffectType.POISON, 1);\n    logs.push(`[]  +${poisonStacks} 1`);\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect && bindEffect.stacks > 0) {\n    if (bindEffect.lockDecayThisTurn) {\n      bindEffect.lockDecayThisTurn = false;\n      if (bindEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.BIND);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.BIND);\n      logs.push(`[] `);\n    }\n  }\n\n  // \n  const armorEffect = findEffect(entity, EffectType.ARMOR);\n  if (armorEffect && armorEffect.stacks > 0) {\n    armorEffect.stacks = Math.floor(armorEffect.stacks / 2);\n    if (armorEffect.stacks <= 0) {\n      removeEffect(entity, EffectType.ARMOR);\n    }\n    logs.push(`[] `);\n  }\n\n  // \n  const silenceEffect = findEffect(entity, EffectType.SILENCE);\n  if (silenceEffect && silenceEffect.stacks > 0) {\n    if (silenceEffect.lockDecayThisTurn) {\n      silenceEffect.lockDecayThisTurn = false;\n      if (silenceEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.SILENCE);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.SILENCE);\n      logs.push(`[] `);\n    }\n  }\n\n  // 1\n  if (hasEffect(entity, EffectType.STURDY)) {\n    removeEffect(entity, EffectType.STURDY);\n    logs.push(`[] `);\n  }\n\n  // \n  const stunEffect = findEffect(entity, EffectType.STUN);\n  if (stunEffect && stunEffect.stacks > 0) {\n    if (stunEffect.lockDecayThisTurn) {\n      stunEffect.lockDecayThisTurn = false;\n      if (stunEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.STUN);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.STUN);\n      logs.push(`[] `);\n    }\n  }\n\n  return logs;\n}\n\n// \n//  \n// \n\n/**\n * \n */\nexport function canPlayCard(\n  entity: EntityStats,\n  card: CardData,\n  baseRawDice: number,\n): { allowed: boolean; reason?: string } {\n  // \n  if (card.traits.unplayable) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect) {\n    const restrictedTypes = bindEffect.restrictedTypes && bindEffect.restrictedTypes.length > 0\n      ? bindEffect.restrictedTypes\n      : (['', ''] as CardType[]);\n    if (restrictedTypes.includes(card.type)) {\n      return { allowed: false, reason: `${card.type}` };\n    }\n  }\n\n  // 3 //\n  if (hasEffect(entity, EffectType.DEVOUR) && baseRawDice <= 3) {\n    if (\n      card.type === '' as CardType\n      || card.type === '' as CardType\n      || card.type === '' as CardType\n    ) {\n      return { allowed: false, reason: `3${card.type}` };\n    }\n  }\n\n  // \n  if (card.type === ('' as CardType) && card.manaCost > entity.mp) {\n    return { allowed: false, reason: `${card.manaCost}${entity.mp}` };\n  }\n\n  // \n  if (card.type === ('' as CardType) && hasEffect(entity, EffectType.SILENCE)) {\n    return { allowed: false, reason: '' };\n  }\n\n  return { allowed: true };\n}\n","import { type CardData, EffectType, type EnemyAIContext, type EnemyDefinition } from '../types';\nimport { getAllCards } from './cardRegistry';\nimport { ELEMENTAL_DEBUFF_TYPES } from './effects';\n\nfunction pickCardById(ctx: EnemyAIContext, id: string): CardData {\n  return ctx.deck.find((c) => c.id === id) ?? ctx.deck[0]!;\n}\n\nfunction weightedRandom<T>(options: { value: T; weight: number }[]): T {\n  const total = options.reduce((s, o) => s + o.weight, 0);\n  let roll = Math.random() * total;\n  for (const opt of options) {\n    roll -= opt.weight;\n    if (roll <= 0) return opt.value;\n  }\n  return options[options.length - 1]!.value;\n}\n\nconst CARD_BY_ID = new Map<string, CardData>(getAllCards().map((card) => [card.id, card]));\nconst requireCardById = (id: string): CardData => {\n  const card = CARD_BY_ID.get(id);\n  if (!card) {\n    throw new Error(`[enemyRegistry] Missing card id: ${id}`);\n  }\n  return card;\n};\nconst buildDeckById = (ids: string[]) => ids.map((id) => requireCardById(id));\n\nconst  = '';\nconst  = '';\n\nconst MUXINLAN_CARD = {\n  CUNNING: 'enemy_muxinlan_cunning',\n  FORCED: 'enemy_muxinlan_forced_acquisition',\n  LIQUIDATION: 'enemy_muxinlan_liquidation',\n  REAGENT: 'enemy_muxinlan_unstable_reagent',\n  LIQUID_FIRE: 'enemy_muxinlan_liquid_fire',\n  SLIME: 'enemy_muxinlan_activated_slime',\n  TAKE_IT: 'enemy_muxinlan_take_it',\n  PREMIUM: 'enemy_muxinlan_premium_shield',\n  AMBUSH: 'enemy_muxinlan_set_ambush',\n} as const;\n\nconst MIMIC_CARD = {\n  TENTACLE: 'enemy_mimic_slimy_tentacle',\n  TONGUE: 'enemy_mimic_agile_tongue',\n  MAW: 'enemy_mimic_maw',\n  CRUSH: 'enemy_mimic_crush',\n  DIGEST: 'enemy_mimic_digest',\n} as const;\n\nconst SWAMP_LURKER_CARD = {\n  CHARGE: 'enemy_charge',\n  NUMB_SPREAD: 'enemy_swamp_numb_spread',\n  FLUID_WRAP: 'enemy_swamp_fluid_wrap',\n  CORRODE: 'enemy_swamp_corrode',\n} as const;\n\nconst MIMIC_BUBBLE_CARD = {\n  APHRO_GAS: 'enemy_mimicbubble_aphro_gas',\n  ELASTIC_ADSORB: 'enemy_mimicbubble_elastic_adsorb',\n  IRIDESCENT_FLOAT: 'enemy_mimicbubble_iridescent_float',\n} as const;\n\nconst MIST_SPRITE_CARD = {\n  ILLUSION_LURE: 'enemy_mist_sprite_illusion_lure',\n} as const;\n\nconst VINEWALKER_CARD = {\n  LURK: 'enemy_vinewalker_lurk',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n  PARALYTIC_TOXIN: 'enemy_vinewalker_paralytic_toxin',\n  LUBRICATED_SHRINK: 'enemy_vinewalker_lubricated_shrink',\n} as const;\n\nconst SPRING_SPIRIT_CARD = {\n  LIQUEFIED_INFILTRATION: 'enemy_springspirit_liquefied_infiltration',\n  INTERNAL_MANIPULATION: 'enemy_springspirit_internal_manipulation',\n  UNDEAD_CONDENSE: 'enemy_springspirit_undead_condense',\n  SILENT_INFILTRATION: 'enemy_springspirit_silent_infiltration',\n} as const;\n\nconst INFILTRATOR_TENTACLE_CARD = {\n  TREMOR_SENSE: 'enemy_root_tremor_sense',\n  INFILTRATE_CLIMB: 'enemy_root_infiltrate_climb',\n  LURK: 'enemy_vinewalker_lurk',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n} as const;\n\nconst CAVE_TENTACLE_CARD = {\n  INFILTRATE_CLIMB: 'enemy_root_infiltrate_climb',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n  SWARM_BURST: 'enemy_moth_swarm_burst',\n} as const;\n\nconst BLISS_BEE_CARD = {\n  SENSITIVE_SCOUT: 'enemy_blissbee_sensitive_scout',\n  APHRO_STINGER: 'enemy_blissbee_aphro_stinger',\n  PRECISE_HARVEST: 'enemy_blissbee_precise_harvest',\n  SWARM_BURST: 'enemy_moth_swarm_burst',\n} as const;\n\nconst POLLEN_SPRAYER_CARD = {\n  HIGH_PRESSURE_SPRAY: 'enemy_pollen_high_pressure_spray',\n  INFILTRATION: 'enemy_pollen_infiltration',\n} as const;\n\nconst PRIM_CARD = {\n  EMBRACE: 'enemy_prim_embrace',\n  FLUID_EVASION: 'enemy_prim_fluid_evasion',\n  DIGEST_CARESS: 'enemy_prim_digest_caress',\n  ENTITY_CLONE: 'enemy_prim_entity_clone',\n} as const;\n\nconst NYMPH_CARD = {\n  LUST_HALLUCINATION: 'enemy_nymph_lust_hallucination',\n  MISTY_SWIRL: 'enemy_nymph_misty_swirl',\n  MENTAL_SHOCK: 'enemy_nymph_mental_shock',\n  MISCHIEF: 'enemy_nymph_mischief',\n  GIANT_PROJECTION: 'enemy_nymph_giant_projection',\n  BASIC_PHYSICAL: 'basic_physical',\n} as const;\n\nconst UNDINE_CARD = {\n  EARTH_ESSENCE: 'enemy_undine_earth_essence',\n  LOVING_WHIP: 'enemy_undine_loving_whip',\n  DOTING_EMBRACE: 'enemy_undine_doting_embrace',\n  ESSENCE_INFUSION: 'enemy_undine_essence_infusion',\n  PSYCHIC_ASSIMILATION: 'enemy_undine_psychic_assimilation',\n  EARTH_LIQUID: 'enemy_undine_earth_liquid',\n} as const;\n\nconst MATA_CARD = {\n  MATRIARCH_INVITATION: 'enemy_mata_matriarch_invitation',\n  UNDER_SKIRT_TENTACLE: 'enemy_mata_under_skirt_tentacle',\n  FUNGAL_REPAIR: 'enemy_mata_fungal_repair',\n  FALSE_SMILE: 'enemy_mata_false_smile',\n} as const;\n\nconst ROSE_CARD = {\n  PLANT_DOMINION: 'enemy_rose_plant_dominion',\n  WANGZHI_WHIP: 'enemy_rose_wangzhi_whip',\n  LIFE_DRAIN: 'enemy_rose_life_drain',\n  NECTAR_DISCIPLINE: 'enemy_rose_nectar_discipline',\n} as const;\n\nconst URSULA_CARD = {\n  SILENCE_SPELL: 'enemy_ursula_silence_spell',\n  LUST_IMPRINT: 'enemy_ursula_lust_imprint',\n  BINDING_LAW: 'enemy_ursula_binding_law',\n  WHIP_PUNISH: 'enemy_ursula_whip_punish',\n  COMMANDMENT: 'enemy_ursula_commandment',\n} as const;\n\nconst FLOATING_PAGE_CARD = {\n  ATTACH: 'enemy_floating_page_attach',\n  SENSORY_INFUSION: 'enemy_floating_page_sensory_infusion',\n  FORCED_IMMERSION: 'enemy_floating_page_forced_immersion',\n} as const;\n\nconst INK_MOUSE_CARD = {\n  CHARGE: 'enemy_charge',\n  COWARDICE: 'enemy_inkmouse_cowardice',\n  INK_BURST: 'enemy_inkmouse_ink_burst',\n  LIQUEFY_REGEN: 'enemy_inkmouse_liquefy_regen',\n} as const;\n\nconst INK_SLIME_CARD = {\n  CHARGE: 'enemy_charge',\n  INFILTRATION: 'enemy_ink_slime_invasion',\n  CONDENSE: 'enemy_ink_slime_condense',\n  SLIME_DODGE: 'enemy_slime_dodge',\n} as const;\n\nconst WHISPER_GHOST_CARD = {\n  PHANTOM: 'enemy_whisper_ghost_phantom',\n  KNOWLEDGE_WHISPER: 'enemy_whisper_ghost_knowledge_whisper',\n  FORBIDDEN_KNOWLEDGE: 'enemy_whisper_ghost_forbidden_knowledge',\n  PASSIVE_SENSITIZATION: 'enemy_whisper_ghost_passive_sensitization',\n} as const;\n\nconst BOOK_DEMON_CARD = {\n  BETWEEN_LINES_TEMPTATION: 'enemy_book_demon_between_lines_temptation',\n  INK_TENTACLE: 'enemy_book_demon_ink_tentacle',\n  WHISPER_INCITEMENT: 'enemy_book_demon_whisper_incitement',\n  KNOWLEDGE_THIRST: 'enemy_book_demon_knowledge_thirst',\n} as const;\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 + 30 * floor,\n      maxHp: 20 + 30 * floor,\n      mp: 2 * floor,\n      minDice: 1 + floor,\n      maxDice: 6 + floor,\n      effects: [\n        { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FLAME_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.POISON_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FROST_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.BLOODBLADE_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.LIGHTNING_ATTACH, stacks: 1, polarity: 'buff' },\n      ],\n    },\n    deck: buildDeckById([\n      MUXINLAN_CARD.CUNNING,\n      MUXINLAN_CARD.FORCED,\n      MUXINLAN_CARD.LIQUIDATION,\n      MUXINLAN_CARD.REAGENT,\n      MUXINLAN_CARD.LIQUID_FIRE,\n      MUXINLAN_CARD.SLIME,\n      MUXINLAN_CARD.TAKE_IT,\n      MUXINLAN_CARD.PREMIUM,\n      MUXINLAN_CARD.AMBUSH,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      if (!ctx.flags.muxinlanOpenedWithCunning) {\n        ctx.flags.muxinlanOpenedWithCunning = true;\n        return pickCardById(ctx, MUXINLAN_CARD.CUNNING);\n      }\n\n      const getStacks = (t: EffectType) => ctx.playerStats.effects.find((e) => e.type === t)?.stacks ?? 0;\n      const elementalTotal = ELEMENTAL_DEBUFF_TYPES\n        .reduce((sum, type) => sum + getStacks(type), 0);\n      if (elementalTotal >= 12) {\n        return pickCardById(ctx, MUXINLAN_CARD.LIQUIDATION);\n      }\n\n      if (ctx.enemyStats.mp > 4) {\n        const highMpPool = [MUXINLAN_CARD.REAGENT, MUXINLAN_CARD.LIQUID_FIRE, MUXINLAN_CARD.SLIME] as const;\n        const chosen = highMpPool[Math.floor(Math.random() * highMpPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const lowMpPool = [MUXINLAN_CARD.FORCED, MUXINLAN_CARD.TAKE_IT, MUXINLAN_CARD.PREMIUM, MUXINLAN_CARD.AMBUSH] as const;\n      const chosen = lowMpPool[Math.floor(Math.random() * lowMpPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 * floor,\n      maxHp: 20 * floor,\n      mp: 0,\n      minDice: floor,\n      maxDice: 5 + 2 * floor,\n      effects: [],\n    },\n    deck: buildDeckById([\n      MIMIC_CARD.TENTACLE,\n      MIMIC_CARD.TONGUE,\n      MIMIC_CARD.MAW,\n      MIMIC_CARD.CRUSH,\n      MIMIC_CARD.DIGEST,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n      if (playerHasDevour) {\n        const devourPool = [MIMIC_CARD.CRUSH, MIMIC_CARD.DIGEST] as const;\n        const chosen = devourPool[Math.floor(Math.random() * devourPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const normalPool = [MIMIC_CARD.TENTACLE, MIMIC_CARD.TONGUE, MIMIC_CARD.MAW] as const;\n      const chosen = normalPool[Math.floor(Math.random() * normalPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 12,\n    maxHp: 12,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_charge', 'enemy_slime_dodge', 'enemy_heal']),\n  selectCard(ctx: EnemyAIContext) {\n    const hpRatio = ctx.enemyStats.hp / ctx.enemyStats.maxHp;\n    if (hpRatio <= 0.4 && !ctx.flags.hasUsedHeal) {\n      ctx.flags.hasUsedHeal = true;\n      return pickCardById(ctx, 'enemy_heal');\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: 'enemy_charge', weight: 70 },\n      { value: 'enemy_slime_dodge', weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 5,\n    maxHp: 5,\n    mp: 1,\n    minDice: 1,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    'enemy_moth_aphro_powder',\n    'enemy_moth_sensitive_mark',\n    'enemy_moth_pheromone',\n    'enemy_moth_swarm_burst',\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, 'enemy_moth_swarm_burst');\n    }\n\n    const normalCards = ['enemy_moth_aphro_powder', 'enemy_moth_sensitive_mark', 'enemy_moth_pheromone'] as const;\n    const chosen = normalCards[Math.floor(Math.random() * normalCards.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 8,\n    maxHp: 8,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.SWARM, stacks: 2, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb']),\n  selectCard(ctx: EnemyAIContext) {\n    const pool = ['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb'] as const;\n    const chosen = pool[Math.floor(Math.random() * pool.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    SWAMP_LURKER_CARD.CHARGE,\n    SWAMP_LURKER_CARD.NUMB_SPREAD,\n    SWAMP_LURKER_CARD.FLUID_WRAP,\n    SWAMP_LURKER_CARD.CORRODE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n    if (playerHasDevour) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.CORRODE);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.FLUID_WRAP);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SWAMP_LURKER_CARD.CHARGE, weight: 30 },\n      { value: SWAMP_LURKER_CARD.NUMB_SPREAD, weight: 70 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 2,\n    maxDice: 4,\n    effects: [{ type: EffectType.TOXIN_SPREAD, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    MIMIC_BUBBLE_CARD.APHRO_GAS,\n    MIMIC_BUBBLE_CARD.ELASTIC_ADSORB,\n    MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const chosen = weightedRandom<string>([\n      { value: MIMIC_BUBBLE_CARD.APHRO_GAS, weight: 50 },\n      { value: MIMIC_BUBBLE_CARD.ELASTIC_ADSORB, weight: 30 },\n      { value: MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 4,\n    maxHp: 4,\n    mp: 0,\n    minDice: 1,\n    maxDice: 1,\n    effects: [\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.SWARM, stacks: 2, polarity: 'buff' },\n      { type: EffectType.POINT_GROWTH_BIG, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([MIST_SPRITE_CARD.ILLUSION_LURE]),\n  selectCard(ctx: EnemyAIContext) {\n    return pickCardById(ctx, MIST_SPRITE_CARD.ILLUSION_LURE);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 16,\n    maxHp: 16,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [],\n  },\n  deck: buildDeckById([\n    VINEWALKER_CARD.LURK,\n    VINEWALKER_CARD.LIGHTNING_AMBUSH,\n    VINEWALKER_CARD.PARALYTIC_TOXIN,\n    VINEWALKER_CARD.LUBRICATED_SHRINK,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.vinewalkerOpenedWithLurk) {\n      ctx.flags.vinewalkerOpenedWithLurk = true;\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, VINEWALKER_CARD.PARALYTIC_TOXIN);\n    }\n\n    const selfHasAmbush = ctx.enemyStats.effects.some((e) => e.type === EffectType.AMBUSH && e.stacks > 0);\n    if (!selfHasAmbush) {\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: VINEWALKER_CARD.LIGHTNING_AMBUSH, weight: 75 },\n      { value: VINEWALKER_CARD.LUBRICATED_SHRINK, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n    ],\n  },\n  deck: buildDeckById([\n    SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION,\n    SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION,\n    SPRING_SPIRIT_CARD.UNDEAD_CONDENSE,\n    SPRING_SPIRIT_CARD.SILENT_INFILTRATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfHasElementalDebuff = ELEMENTAL_DEBUFF_TYPES\n      .some((type) => ctx.enemyStats.effects.some((e) => e.type === type && e.stacks > 0));\n\n    if (!selfHasElementalDebuff) {\n      const chosen = weightedRandom<string>([\n        { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 50 },\n        { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 30 },\n        { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 20 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 40 },\n      { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 25 },\n      { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 15 },\n      { value: SPRING_SPIRIT_CARD.UNDEAD_CONDENSE, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 3,\n    maxDice: 5,\n    effects: [],\n  },\n  deck: buildDeckById([\n    INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE,\n    INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB,\n    INFILTRATOR_TENTACLE_CARD.LURK,\n    INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.infiltratorTentacleOpenedWithLightningAmbush) {\n      ctx.flags.infiltratorTentacleOpenedWithLightningAmbush = true;\n      return pickCardById(ctx, INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH);\n    }\n\n    const selfHasAmbush = ctx.enemyStats.effects.some((e) => e.type === EffectType.AMBUSH && e.stacks > 0);\n    if (!selfHasAmbush) {\n      const chosen = weightedRandom<string>([\n        { value: INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE, weight: 20 },\n        { value: INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB, weight: 20 },\n        { value: INFILTRATOR_TENTACLE_CARD.LURK, weight: 40 },\n        { value: INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH, weight: 20 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: INFILTRATOR_TENTACLE_CARD.TREMOR_SENSE, weight: 35 },\n      { value: INFILTRATOR_TENTACLE_CARD.INFILTRATE_CLIMB, weight: 35 },\n      { value: INFILTRATOR_TENTACLE_CARD.LIGHTNING_AMBUSH, weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 2,\n    maxHp: 2,\n    mp: 0,\n    minDice: 2,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 5, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    CAVE_TENTACLE_CARD.INFILTRATE_CLIMB,\n    CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH,\n    CAVE_TENTACLE_CARD.SWARM_BURST,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, CAVE_TENTACLE_CARD.SWARM_BURST);\n    }\n\n    if (!ctx.flags.caveTentacleOpenedWithLightningAmbush) {\n      ctx.flags.caveTentacleOpenedWithLightningAmbush = true;\n      return pickCardById(ctx, CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH);\n    }\n\n    const chosen = Math.random() < 0.5\n      ? CAVE_TENTACLE_CARD.INFILTRATE_CLIMB\n      : CAVE_TENTACLE_CARD.LIGHTNING_AMBUSH;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 4,\n    maxHp: 4,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    BLISS_BEE_CARD.SENSITIVE_SCOUT,\n    BLISS_BEE_CARD.APHRO_STINGER,\n    BLISS_BEE_CARD.PRECISE_HARVEST,\n    BLISS_BEE_CARD.SWARM_BURST,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, BLISS_BEE_CARD.SWARM_BURST);\n    }\n\n    const playerHasPoison = ctx.playerStats.effects.some((e) => e.type === EffectType.POISON && e.stacks > 0);\n    if (playerHasPoison) {\n      const chosen = weightedRandom<string>([\n        { value: BLISS_BEE_CARD.SENSITIVE_SCOUT, weight: 20 },\n        { value: BLISS_BEE_CARD.APHRO_STINGER, weight: 30 },\n        { value: BLISS_BEE_CARD.PRECISE_HARVEST, weight: 50 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const playerHasVulnerable = ctx.playerStats.effects.some((e) => e.type === EffectType.VULNERABLE && e.stacks > 0);\n    if (playerHasVulnerable) {\n      const chosen = weightedRandom<string>([\n        { value: BLISS_BEE_CARD.SENSITIVE_SCOUT, weight: 20 },\n        { value: BLISS_BEE_CARD.APHRO_STINGER, weight: 80 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    return pickCardById(ctx, BLISS_BEE_CARD.SENSITIVE_SCOUT);\n  },\n};\n\nconst POLLEN_SPRAYER_ENEMY: EnemyDefinition = {\n  name: '\\u82b1\\u7c89\\u55b7\\u5c04\\u8005',\n  stats: {\n    hp: 10,\n    maxHp: 10,\n    mp: 0,\n    minDice: 2,\n    maxDice: 3,\n    effects: [],\n  },\n  deck: buildDeckById([\n    POLLEN_SPRAYER_CARD.HIGH_PRESSURE_SPRAY,\n    POLLEN_SPRAYER_CARD.INFILTRATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.pollenSprayerOpenedWithHighPressureSpray) {\n      ctx.flags.pollenSprayerOpenedWithHighPressureSpray = true;\n      return pickCardById(ctx, POLLEN_SPRAYER_CARD.HIGH_PRESSURE_SPRAY);\n    }\n    return pickCardById(ctx, POLLEN_SPRAYER_CARD.INFILTRATION);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 25,\n    maxHp: 25,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.REGEN, stacks: 2, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    PRIM_CARD.EMBRACE,\n    PRIM_CARD.FLUID_EVASION,\n    PRIM_CARD.DIGEST_CARESS,\n    PRIM_CARD.ENTITY_CLONE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfHasSwarm = ctx.enemyStats.effects.some((e) => e.type === EffectType.SWARM && e.stacks > 0);\n    if (ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5 && !selfHasSwarm) {\n      return pickCardById(ctx, PRIM_CARD.ENTITY_CLONE);\n    }\n\n    if (ctx.enemyStats.mp >= 4) {\n      return pickCardById(ctx, PRIM_CARD.DIGEST_CARESS);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: PRIM_CARD.EMBRACE, weight: 65 },\n      { value: PRIM_CARD.FLUID_EVASION, weight: 35 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 45,\n    maxHp: 45,\n    mp: 0,\n    minDice: 1,\n    maxDice: 3,\n    effects: [\n      { type: EffectType.ILLUSORY_BODY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    NYMPH_CARD.MISTY_SWIRL,\n    NYMPH_CARD.MENTAL_SHOCK,\n    NYMPH_CARD.MISCHIEF,\n    NYMPH_CARD.GIANT_PROJECTION,\n    NYMPH_CARD.BASIC_PHYSICAL,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.nymphUsedGiantProjection && ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5) {\n      ctx.flags.nymphUsedGiantProjection = true;\n      return pickCardById(ctx, NYMPH_CARD.GIANT_PROJECTION);\n    }\n\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, NYMPH_CARD.MENTAL_SHOCK);\n    }\n\n    const selfHasIllusoryBody = ctx.enemyStats.effects.some((e) => e.type === EffectType.ILLUSORY_BODY && e.stacks > 0);\n    if (selfHasIllusoryBody) {\n      const chosen = weightedRandom<string>([\n        { value: NYMPH_CARD.MISTY_SWIRL, weight: 40 },\n        { value: NYMPH_CARD.MISCHIEF, weight: 60 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: NYMPH_CARD.MISTY_SWIRL, weight: 50 },\n      { value: NYMPH_CARD.BASIC_PHYSICAL, weight: 50 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 40,\n    maxHp: 40,\n    mp: 0,\n    minDice: 3,\n    maxDice: 8,\n    effects: [\n      { type: EffectType.WHITE_TURBID, stacks: 1, polarity: 'mixed' },\n      { type: EffectType.REGEN, stacks: 1, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    UNDINE_CARD.LOVING_WHIP,\n    UNDINE_CARD.DOTING_EMBRACE,\n    UNDINE_CARD.ESSENCE_INFUSION,\n    UNDINE_CARD.PSYCHIC_ASSIMILATION,\n    UNDINE_CARD.EARTH_LIQUID,\n    UNDINE_CARD.EARTH_ESSENCE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.undineUsedEarthLiquid && ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5) {\n      ctx.flags.undineUsedEarthLiquid = true;\n      return pickCardById(ctx, UNDINE_CARD.EARTH_LIQUID);\n    }\n\n    if (ctx.enemyStats.mp >= 5) {\n      return pickCardById(ctx, UNDINE_CARD.PSYCHIC_ASSIMILATION);\n    }\n\n    if (ctx.enemyStats.mp >= 1) {\n      const chosen = weightedRandom<string>([\n        { value: UNDINE_CARD.LOVING_WHIP, weight: 30 },\n        { value: UNDINE_CARD.DOTING_EMBRACE, weight: 30 },\n        { value: UNDINE_CARD.ESSENCE_INFUSION, weight: 40 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: UNDINE_CARD.LOVING_WHIP, weight: 50 },\n      { value: UNDINE_CARD.DOTING_EMBRACE, weight: 50 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.SWARM, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    MATA_CARD.MATRIARCH_INVITATION,\n    MATA_CARD.UNDER_SKIRT_TENTACLE,\n    MATA_CARD.FUNGAL_REPAIR,\n    MATA_CARD.FALSE_SMILE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerPoisonAmount = ctx.playerStats.effects\n      .find((e) => e.type === EffectType.POISON_AMOUNT)?.stacks ?? 0;\n    if (ctx.enemyStats.hp < ctx.enemyStats.maxHp * 0.5 && playerPoisonAmount >= 5) {\n      return pickCardById(ctx, MATA_CARD.FUNGAL_REPAIR);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: MATA_CARD.MATRIARCH_INVITATION, weight: 30 },\n      { value: MATA_CARD.UNDER_SKIRT_TENTACLE, weight: 30 },\n      { value: MATA_CARD.FALSE_SMILE, weight: 40 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 40,\n    maxHp: 40,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.THORNS, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    ROSE_CARD.PLANT_DOMINION,\n    ROSE_CARD.WANGZHI_WHIP,\n    ROSE_CARD.LIFE_DRAIN,\n    ROSE_CARD.NECTAR_DISCIPLINE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.roseOpenedWithPlantDominion) {\n      ctx.flags.roseOpenedWithPlantDominion = true;\n      return pickCardById(ctx, ROSE_CARD.PLANT_DOMINION);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: ROSE_CARD.PLANT_DOMINION, weight: 25 },\n      { value: ROSE_CARD.WANGZHI_WHIP, weight: 25 },\n      { value: ROSE_CARD.LIFE_DRAIN, weight: 25 },\n      { value: ROSE_CARD.NECTAR_DISCIPLINE, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 80,\n    maxHp: 80,\n    mp: 3,\n    minDice: 3,\n    maxDice: 8,\n    effects: [\n      { type: EffectType.INK_CREATION, stacks: 1, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    URSULA_CARD.SILENCE_SPELL,\n    URSULA_CARD.LUST_IMPRINT,\n    URSULA_CARD.BINDING_LAW,\n    URSULA_CARD.WHIP_PUNISH,\n    URSULA_CARD.COMMANDMENT,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerHasSilence = ctx.playerStats.effects.some((e) => e.type === EffectType.SILENCE && e.stacks > 0);\n    if (ctx.enemyStats.mp >= 6 && playerHasSilence) {\n      return pickCardById(ctx, URSULA_CARD.LUST_IMPRINT);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      const chosen = weightedRandom<string>([\n        { value: URSULA_CARD.SILENCE_SPELL, weight: 20 },\n        { value: URSULA_CARD.BINDING_LAW, weight: 20 },\n        { value: URSULA_CARD.WHIP_PUNISH, weight: 50 },\n        { value: URSULA_CARD.COMMANDMENT, weight: 10 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: URSULA_CARD.SILENCE_SPELL, weight: 40 },\n      { value: URSULA_CARD.BINDING_LAW, weight: 30 },\n      { value: URSULA_CARD.COMMANDMENT, weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 2,\n    maxHp: 2,\n    mp: 0,\n    minDice: 1,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.SWARM, stacks: 8, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n      { type: EffectType.INK_CREATION, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    FLOATING_PAGE_CARD.ATTACH,\n    FLOATING_PAGE_CARD.SENSORY_INFUSION,\n    FLOATING_PAGE_CARD.FORCED_IMMERSION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerCorrosion = ctx.playerStats.effects.find((e) => e.type === EffectType.CORROSION)?.stacks ?? 0;\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (ctx.enemyStats.mp >= 4 && playerCorrosion >= 3) {\n      return pickCardById(ctx, FLOATING_PAGE_CARD.SENSORY_INFUSION);\n    }\n    if (ctx.enemyStats.mp >= 2 && playerHasBind) {\n      return pickCardById(ctx, FLOATING_PAGE_CARD.FORCED_IMMERSION);\n    }\n    return pickCardById(ctx, FLOATING_PAGE_CARD.ATTACH);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 6,\n    maxHp: 6,\n    mp: 0,\n    minDice: 2,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.SWARM, stacks: 4, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n      { type: EffectType.INK_CREATION, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    INK_MOUSE_CARD.CHARGE,\n    INK_MOUSE_CARD.COWARDICE,\n    INK_MOUSE_CARD.INK_BURST,\n    INK_MOUSE_CARD.LIQUEFY_REGEN,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfSwarm = ctx.enemyStats.effects.find((e) => e.type === EffectType.SWARM)?.stacks ?? 0;\n    if (selfSwarm <= 1 && ctx.enemyStats.maxHp > 1) {\n      return pickCardById(ctx, INK_MOUSE_CARD.LIQUEFY_REGEN);\n    }\n    if (ctx.enemyStats.mp >= 2) {\n      return pickCardById(ctx, INK_MOUSE_CARD.INK_BURST);\n    }\n    const chosen = weightedRandom<string>([\n      { value: INK_MOUSE_CARD.CHARGE, weight: 75 },\n      { value: INK_MOUSE_CARD.COWARDICE, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 30,\n    maxHp: 30,\n    mp: 0,\n    minDice: 3,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    WHISPER_GHOST_CARD.PHANTOM,\n    WHISPER_GHOST_CARD.KNOWLEDGE_WHISPER,\n    WHISPER_GHOST_CARD.FORBIDDEN_KNOWLEDGE,\n    WHISPER_GHOST_CARD.PASSIVE_SENSITIZATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 10) {\n      return pickCardById(ctx, WHISPER_GHOST_CARD.FORBIDDEN_KNOWLEDGE);\n    }\n\n    if (ctx.turn % 4 === 0) {\n      return pickCardById(ctx, WHISPER_GHOST_CARD.PASSIVE_SENSITIZATION);\n    }\n\n    if (ctx.enemyStats.mp >= 2) {\n      const chosen = weightedRandom<string>([\n        { value: WHISPER_GHOST_CARD.KNOWLEDGE_WHISPER, weight: 70 },\n        { value: WHISPER_GHOST_CARD.PHANTOM, weight: 30 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    return pickCardById(ctx, WHISPER_GHOST_CARD.PHANTOM);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 10,\n    maxHp: 10,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n      { type: EffectType.INK_CREATION, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    INK_SLIME_CARD.CHARGE,\n    INK_SLIME_CARD.INFILTRATION,\n    INK_SLIME_CARD.CONDENSE,\n    INK_SLIME_CARD.SLIME_DODGE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfSwarm = ctx.enemyStats.effects.find((e) => e.type === EffectType.SWARM)?.stacks ?? 0;\n    if (selfSwarm <= 1) {\n      const chosen = weightedRandom<string>([\n        { value: INK_SLIME_CARD.CHARGE, weight: 20 },\n        { value: INK_SLIME_CARD.INFILTRATION, weight: 20 },\n        { value: INK_SLIME_CARD.CONDENSE, weight: 30 },\n        { value: INK_SLIME_CARD.SLIME_DODGE, weight: 30 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: INK_SLIME_CARD.CHARGE, weight: 30 },\n      { value: INK_SLIME_CARD.INFILTRATION, weight: 30 },\n      { value: INK_SLIME_CARD.SLIME_DODGE, weight: 40 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 30,\n    maxHp: 30,\n    mp: 20,\n    minDice: 3,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.INK_CREATION, stacks: 1, polarity: 'buff' },\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    BOOK_DEMON_CARD.BETWEEN_LINES_TEMPTATION,\n    BOOK_DEMON_CARD.INK_TENTACLE,\n    BOOK_DEMON_CARD.WHISPER_INCITEMENT,\n    BOOK_DEMON_CARD.KNOWLEDGE_THIRST,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const chosen = weightedRandom<string>([\n      { value: BOOK_DEMON_CARD.BETWEEN_LINES_TEMPTATION, weight: 35 },\n      { value: BOOK_DEMON_CARD.INK_TENTACLE, weight: 35 },\n      { value: BOOK_DEMON_CARD.WHISPER_INCITEMENT, weight: 10 },\n      { value: BOOK_DEMON_CARD.KNOWLEDGE_THIRST, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst STATIC_ENEMY_REGISTRY: ReadonlyMap<string, EnemyDefinition> = new Map<string, EnemyDefinition>([\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [POLLEN_SPRAYER_ENEMY.name, POLLEN_SPRAYER_ENEMY],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\nconst ENEMY_NAME_ORDER: readonly string[] = [\n  ,\n  ,\n  ...STATIC_ENEMY_REGISTRY.keys(),\n];\n\nexport function getEnemyByName(name: string, currentFloor: number = 1): EnemyDefinition | undefined {\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  return STATIC_ENEMY_REGISTRY.get(name);\n}\n\nexport function getAllEnemyNames(): string[] {\n  return [...ENEMY_NAME_ORDER];\n}\n","import { CardType, EffectType, type CardData, type EntityStats } from '../types';\n\nexport type RelicRarity = '' | '' | '';\nexport type RelicCategory = '' | '' | '' | '' | '';\n\nexport type RelicSide = 'player' | 'enemy';\nexport type RelicFloatKind = 'shield' | 'mana' | 'heal';\n\nexport interface RelicApplyEffectOptions {\n  restrictedTypes?: CardType[];\n  source?: string;\n  lockDecayThisTurn?: boolean;\n}\n\ninterface RelicSharedHookContext {\n  count: number;\n  side: RelicSide;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n  addStatusEffect: (\n    side: RelicSide,\n    effectType: EffectType,\n    stacks: number,\n    options?: RelicApplyEffectOptions,\n  ) => boolean;\n  addArmor: (side: RelicSide, amount: number) => number;\n  restoreMana: (side: RelicSide, amount: number) => number;\n  heal: (\n    side: RelicSide,\n    amount: number,\n    options?: { overflowToArmor?: boolean },\n  ) => { healed: number; overflow: number };\n  addRerollCharges: (side: RelicSide, amount: number) => void;\n  getRerollCharges: (side: RelicSide) => number;\n}\n\nexport interface RelicLifecycleHookContext extends RelicSharedHookContext {}\n\nexport interface RelicPointHookContext {\n  count: number;\n  side: RelicSide;\n  card: CardData;\n  baseDice: number;\n  currentPoint: number;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  isPreview: boolean;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n}\n\nexport interface RelicDiceClickHookContext {\n  count: number;\n  side: RelicSide;\n  currentDice: number;\n  minDice: number;\n  maxDice: number;\n  state: Record<string, unknown>;\n  roll: (min: number, max: number) => number;\n  consumeRerollCharge: (side: RelicSide, amount?: number) => boolean;\n  getRerollCharges: (side: RelicSide) => number;\n  addLog: (message: string) => void;\n}\n\nexport interface RelicBeforeApplyEffectHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  effectType: EffectType;\n  stacks: number;\n  source?: string;\n  restrictedTypes?: CardType[];\n}\n\nexport interface RelicBurnDamageHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicAfterBurnDamageTakenHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicHitHookContext extends RelicSharedHookContext {\n  sourceSide: RelicSide;\n  targetSide: RelicSide;\n  source: EntityStats;\n  target: EntityStats;\n  card: CardData;\n  finalPoint: number;\n  hitIndex: number;\n  hitCount: number;\n  attemptedDamage: number;\n  actualDamage: number;\n}\n\nexport interface RelicHooks {\n  onBattleStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnEnd?: (ctx: RelicLifecycleHookContext) => void;\n  onDeckShuffle?: (ctx: RelicLifecycleHookContext) => void;\n  modifyFinalPoint?: (ctx: RelicPointHookContext) => number;\n  onDiceClick?: (ctx: RelicDiceClickHookContext) => number | null;\n  onBeforeApplyEffect?: (ctx: RelicBeforeApplyEffectHookContext) => boolean | void;\n  onBeforeBurnDamage?: (ctx: RelicBurnDamageHookContext) => void;\n  onAfterBurnDamageTaken?: (ctx: RelicAfterBurnDamageTakenHookContext) => void;\n  onAfterHitDealt?: (ctx: RelicHitHookContext) => void;\n  onAfterHitTaken?: (ctx: RelicHitHookContext) => void;\n}\n\nexport interface RelicData {\n  id: string;\n  name: string;\n  rarity: RelicRarity;\n  category: RelicCategory;\n  effect: string;\n  description: string;\n  hooks?: RelicHooks;\n}\n\nexport interface ResolvedRelicEntry {\n  relic: RelicData;\n  count: number;\n}\n\nconst getStacks = (entity: EntityStats, effectType: EffectType) => (\n  entity.effects.find((eff) => eff.type === effectType)?.stacks ?? 0\n);\n\nconst RELIC_LIST: readonly RelicData[] = [\n  {\n    id: 'lucky_coin_small',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.minDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'lucky_coin_large',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.maxDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'red_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.PHYSICAL) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'blue_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.MAGIC) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'yellow_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.FUNCTION) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'green_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' -1',\n    description: ' -1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.DODGE) return currentPoint;\n        return currentPoint - count;\n      },\n    },\n  },\n  {\n    id: 'mana_residue',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 0 +1',\n    description: ' 0 1 ',\n    hooks: {\n      onTurnEnd: ({ count, side, self, restoreMana, addLog }) => {\n        if (self.mp !== 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  0 ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sanctuary_amulet',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.INDOMITABLE, count, { source: 'relic:sanctuary_amulet' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onTurnStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'reset_button',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 6 ',\n    description: ' 6 ',\n    hooks: {\n      onBattleStart: ({ count, side, addRerollCharges, getRerollCharges, addLog }) => {\n        const gained = count * 6;\n        addRerollCharges(side, gained);\n        addLog(`[]  ${gained}  ${getRerollCharges(side)}`);\n      },\n      onDiceClick: ({ count, side, minDice, maxDice, roll, consumeRerollCharge, getRerollCharges, addLog }) => {\n        if (count <= 0) return null;\n        if (!consumeRerollCharge(side, 1)) return null;\n        const value = roll(minDice, maxDice);\n        addLog(`[]  ${getRerollCharges(side)} `);\n        return value;\n      },\n    },\n  },\n  {\n    id: 'energy_candy',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onDeckShuffle: ({ count, side, restoreMana, addLog }) => {\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_shield',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 10 ',\n    description: ' 10 ',\n    hooks: {\n      onBattleStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, 10 * count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'pure_water',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 8 ',\n    description: ' 8 ',\n    hooks: {\n      onBattleStart: ({ count, side, heal, addLog }) => {\n        const { healed, overflow } = heal(side, 8 * count, { overflowToArmor: true });\n        addLog(`[]  ${healed}  ${overflow} `);\n      },\n    },\n  },\n  {\n    id: 'base_rainbow_card',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '+1',\n  },\n  {\n    id: 'base_silver_card',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '',\n  },\n  {\n    id: 'base_golden_card',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '10%',\n    description: '10%',\n  },\n  {\n    id: 'oily_grease',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2 ',\n    description: ' 2 ',\n    hooks: {\n      onAfterHitDealt: ({ count, side, targetSide, actualDamage, state, addStatusEffect, addLog }) => {\n        if (targetSide === side) return;\n        if (actualDamage <= 0) return;\n        if (state['triggered'] === true) return;\n        state['triggered'] = true;\n        const stacks = 2 * count;\n        if (addStatusEffect(targetSide, EffectType.BURN, stacks, { source: 'relic:oily_grease' })) {\n          addLog(`[]  ${stacks} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sunglasses',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        if (addStatusEffect(targetSide, EffectType.STUN, Math.max(1, count), { source: 'relic:sunglasses' })) {\n          addLog('[] ');\n        }\n      },\n      onBeforeApplyEffect: ({ side, targetSide, effectType, addLog }) => {\n        if (targetSide !== side) return;\n        if (effectType !== EffectType.STUN) return;\n        addLog('[] ');\n        return false;\n      },\n    },\n  },\n  {\n    id: 'flame_ring',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterHitTaken: ({ count, side, sourceSide, targetSide, card, addStatusEffect, addLog }) => {\n        if (targetSide !== side) return;\n        if (sourceSide === side) return;\n        if (card.type !== CardType.PHYSICAL) return;\n        if (addStatusEffect(sourceSide, EffectType.BURN, count, { source: 'relic:flame_ring' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'fire_slime',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2',\n    description: ' 2',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide !== ctx.side) return;\n        if (ctx.damage === 2) return;\n        ctx.damage = 2;\n      },\n    },\n  },\n  {\n    id: 'ember_seed',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBattleStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n      onTurnStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'phoenix_feather',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, state, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const current = Number(state['nextCardPointBonus'] ?? 0);\n        const add = 1 * count;\n        state['nextCardPointBonus'] = current + add;\n        addLog(`[]  +${current + add}`);\n      },\n      modifyFinalPoint: ({ side, currentPoint, state, isPreview, addLog }) => {\n        if (side !== 'player') return currentPoint;\n        const bonus = Math.max(0, Math.floor(Number(state['nextCardPointBonus'] ?? 0)));\n        if (bonus <= 0) return currentPoint;\n        if (!isPreview) {\n          state['nextCardPointBonus'] = 0;\n          addLog(`[]  +${bonus}`);\n        }\n        return currentPoint + bonus;\n      },\n    },\n  },\n  {\n    id: 'rekindle_core',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, restoreMana, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'burn_heat_exchange_fin',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '5',\n    description: '5',\n  },\n  {\n    id: 'burn_reverse_circuit',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '11MP1',\n    description: '11',\n  },\n  {\n    id: 'everlasting_fuel',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.damage <= 0) return;\n        ctx.isTrueDamage = true;\n      },\n    },\n  },\n  {\n    id: 'sun_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '*',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide === ctx.side && ctx.hasRelic('fire_slime')) {\n          return;\n        }\n        const minDamage = Math.max(1, ctx.turn * Math.max(1, ctx.count));\n        if (ctx.damage >= minDamage) return;\n        ctx.damage = minDamage;\n      },\n    },\n  },\n  {\n    id: 'modao_light_shield',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '1',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.BARRIER, count, { source: 'relic:modao_light_shield' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'modao_dagger_pendant',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '1',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.DAMAGE_BOOST, count, { source: 'relic:modao_dagger_pendant' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'modao_magic_lens',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '1',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        if (addStatusEffect(targetSide, EffectType.VULNERABLE, count, { source: 'relic:modao_magic_lens' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'modao_rune_capacitor',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+1',\n    description: '1',\n    hooks: {\n      onBattleStart: ({ count, side, restoreMana, addLog }) => {\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'modao_stabilizer_pin',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '312',\n    description: '312',\n  },\n  {\n    id: 'modao_scale_ring',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '31MP',\n    description: '3/6/9...1',\n  },\n  {\n    id: 'modao_inverse_codex',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: 'MP<=5+2',\n    description: 'MP5+2',\n    hooks: {\n      onTurnStart: ({ count, self, state, addLog }) => {\n        const active = self.mp <= 5 && count > 0;\n        state['enabledThisTurn'] = active;\n        if (active) {\n          addLog(`[]  +${count * 2}`);\n        }\n      },\n      modifyFinalPoint: ({ card, currentPoint, state, count }) => {\n        if (card.type !== CardType.MAGIC) return currentPoint;\n        if (!state['enabledThisTurn']) return currentPoint;\n        return currentPoint + (2 * count);\n      },\n    },\n  },\n  {\n    id: 'modao_arcane_host',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '2-20',\n    description: '2-20',\n  },\n  {\n    id: 'modao_magic_doll',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1MP2',\n    description: '12',\n  },\n  {\n    id: 'modao_witch_hat',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: 'x1.5x0.5',\n    description: '1.50.5',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type === CardType.MAGIC) {\n          return currentPoint * (1.5 ** Math.max(1, count));\n        }\n        if (card.type === CardType.PHYSICAL) {\n          return currentPoint * (0.5 ** Math.max(1, count));\n        }\n        return currentPoint;\n      },\n    },\n  },\n  {\n    id: 'yanhan_low_temp_engraver',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+1',\n    description: '1',\n  },\n  {\n    id: 'yanhan_reverse_phase_shell',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '10+2',\n    description: '102',\n  },\n  {\n    id: 'yanhan_frost_storage_plate',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+1',\n    description: '1',\n  },\n  {\n    id: 'yanhan_cold_abyss_rift',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '2',\n    description: '2',\n  },\n  {\n    id: 'yanhan_freeze_pump',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '12',\n    description: '12',\n  },\n  {\n    id: 'yanhan_seal_circuit',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1/3MP',\n    description: '1/3',\n  },\n  {\n    id: 'yanhan_freeze_flow_core',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '5+11',\n    description: '511',\n  },\n  {\n    id: 'bloodpool_blood_pool',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '50%12',\n    description: '50%12',\n  },\n  {\n    id: 'bloodpool_heart_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '12',\n    description: '12',\n    hooks: {\n      onTurnStart: ({ state }) => {\n        state['triggeredThisTurn'] = 0;\n      },\n      onAfterHitTaken: ({ count, side, targetSide, actualDamage, state, heal, addLog }) => {\n        if (targetSide !== side) return;\n        if (actualDamage <= 0) return;\n        const triggered = Math.max(0, Math.floor(Number(state['triggeredThisTurn'] ?? 0)));\n        if (triggered >= 2) return;\n        state['triggeredThisTurn'] = triggered + 1;\n        const { healed } = heal(side, count);\n        addLog(`[]  ${healed}  ${triggered + 1}/2`);\n      },\n    },\n  },\n  {\n    id: 'bloodpool_skin_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '12',\n    description: '12',\n  },\n  {\n    id: 'bloodpool_pulse_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '22',\n    description: '22',\n    hooks: {\n      onTurnEnd: ({ count, side, heal, addLog }) => {\n        const { healed } = heal(side, 2 * count);\n        if (healed > 0) {\n          addLog(`[]  ${healed} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'bloodpool_stomach_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+2',\n    description: '+2',\n  },\n  {\n    id: 'bloodpool_strawberry',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+5',\n    description: '5',\n  },\n  {\n    id: 'bloodpool_pear',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+10',\n    description: '10',\n  },\n  {\n    id: 'bloodpool_mango',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+15',\n    description: '15',\n  },\n  {\n    id: 'bloodpool_crimson_plasma',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '25%',\n    description: '25%',\n  },\n  {\n    id: 'bloodpool_crimson_membrane',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '21',\n    description: '21',\n    hooks: {\n      onBattleStart: ({ state }) => {\n        state['turnCounter'] = 0;\n      },\n      onTurnStart: ({ count, side, state, addStatusEffect, addLog }) => {\n        const turnCounter = Math.max(0, Math.floor(Number(state['turnCounter'] ?? 0))) + 1;\n        state['turnCounter'] = turnCounter;\n        if (turnCounter % 2 !== 0) return;\n        const gain = Math.max(1, Math.floor(count));\n        if (addStatusEffect(side, EffectType.TEMP_MAX_HP, gain, { source: 'relic:bloodpool_crimson_membrane' })) {\n          addLog(`[]  ${turnCounter}  +${gain}`);\n        }\n      },\n    },\n  },\n  {\n    id: 'bloodpool_hemostatic_valve',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '10',\n    description: '10',\n  },\n  {\n    id: 'bloodpool_reflow_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '+12',\n    description: '+12',\n    hooks: {\n      onTurnStart: ({ state }) => {\n        state['healTriggersThisTurn'] = 0;\n      },\n      modifyFinalPoint: ({ currentPoint, state, isPreview, addLog }) => {\n        const bonus = Math.max(0, Math.floor(Number(state['healTriggersThisTurn'] ?? 0)));\n        if (bonus <= 0) return currentPoint;\n        if (!isPreview) {\n          addLog(`[]  +${bonus}`);\n        }\n        return currentPoint + bonus;\n      },\n    },\n  },\n  {\n    id: 'bloodpool_clash_point_mark',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '1',\n    description: '1',\n  },\n  {\n    id: 'bloodpool_first_bleed_feast',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n  },\n  {\n    id: 'bloodpool_halfline_resonance',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '50%',\n    description: '50%',\n  },\n  {\n    id: 'bloodpool_fetal_cocoon',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '50%1',\n    description: '50%1',\n    hooks: {\n      onBattleStart: ({ count, side, self, addStatusEffect, addLog }) => {\n        const currentHp = Math.max(0, Math.floor(self.hp));\n        const trueDamage = currentHp > 0 ? Math.max(1, Math.floor(currentHp * 0.5)) : 0;\n        if (trueDamage > 0) {\n          self.hp = Math.max(0, self.hp - trueDamage);\n          addLog(`[]  ${trueDamage} `);\n        }\n        const cocoonStacks = Math.max(1, Math.floor(count));\n        if (addStatusEffect(side, EffectType.BLOOD_COCOON, cocoonStacks, { source: 'relic:bloodpool_fetal_cocoon' })) {\n          addLog(`[]  ${cocoonStacks} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'bloodpool_critical_rebound',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '5',\n    description: '50%5',\n  },\n];\n\nconst RELIC_BY_ID = new Map(RELIC_LIST.map((relic) => [relic.id, relic]));\nconst RELIC_BY_NAME = new Map(RELIC_LIST.map((relic) => [relic.name, relic]));\n\nexport function getAllRelics(): readonly RelicData[] {\n  return RELIC_LIST;\n}\n\nexport function getRelicById(id: string): RelicData | undefined {\n  return RELIC_BY_ID.get(id);\n}\n\nexport function getRelicByName(name: string): RelicData | undefined {\n  return RELIC_BY_NAME.get(name);\n}\n\nexport function getRelicsByCategory(category: RelicCategory): readonly RelicData[] {\n  return RELIC_LIST.filter((relic) => relic.category === category);\n}\n\nexport function resolveRelicMap(raw: Record<string, number> | null | undefined): ResolvedRelicEntry[] {\n  if (!raw || typeof raw !== 'object') return [];\n\n  const aggregated = new Map<string, ResolvedRelicEntry>();\n\n  for (const [key, value] of Object.entries(raw)) {\n    const count = Math.max(0, Math.floor(Number(value ?? 0)));\n    if (!key || count <= 0) continue;\n\n    const relic = RELIC_BY_ID.get(key) ?? RELIC_BY_NAME.get(key);\n    if (!relic) continue;\n\n    const existing = aggregated.get(relic.id);\n    if (existing) {\n      existing.count += count;\n    } else {\n      aggregated.set(relic.id, { relic, count });\n    }\n  }\n\n  return Array.from(aggregated.values()).sort((a, b) => a.relic.name.localeCompare(b.relic.name, 'zh-Hans-CN'));\n}\n","const LOCAL_FOLDER_IMAGE_FILE_NAMES: Record<string, readonly string[]> = {\n  '/user': [\n    '1.png',\n    '10.png',\n    '11.png',\n    '2.png',\n    '3.png',\n    '4.png',\n    '5.png',\n    '6.png',\n    '7.png',\n    '8.png',\n    '9.png',\n  ],\n  '//': [\n    '1.png', '10.png', '11.png', '12.png', '13.png', '14.png',\n    '15.png', '16.png', '17.png', '18.png', '2.png', '3.png',\n    '4.png', '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '10.png', '11.png', '12.png', '13.png', '14.png',\n    '15.png', '16.png', '17.png', '18.png', '19.png', '2.png',\n    '20.png', '21.png', '22.png', '23.png', '3.png', '4.png',\n    '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '10.png', '11.png', '12.png', '13.png', '14.png',\n    '15.png', '16.png', '17.png', '18.png', '19.png', '2.png',\n    '20.png', '21.png', '22.png', '23.png', '24.png', '25.png',\n    '26.png', '27.png', '28.png', '29.png', '3.png', '30.png',\n    '31.png', '4.png', '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '2.png', '3.png', '4.png', '5.png', '6.png',\n  ],\n  '//': [\n    '1.png', '10.png', '2.png', '3.png', '4.png',\n    '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '2.png', '3.png', '4.png', '5.png', '6.png',\n  ],\n  '//': [\n    '1.png', '10.png', '2.png', '3.png', '4.png',\n    '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '10.png', '11.png', '12.png', '13.png', '14.png',\n    '2.png', '3.png', '4.png', '5.png', '6.png', '7.png', '8.png', '9.png',\n  ],\n  '//': [\n    '1.png', '2.png', '3.png', '4.png', '5.png',\n    '6.png', '7.png', '8.png', '9.png',\n  ],\n};\n\nconst normalizeRepoPath = (path: string) => path.replace(/\\\\/g, '/').replace(/^\\/+|\\/+$/g, '');\n\nexport const getLocalFolderImagePaths = (folderPath: string): string[] => {\n  const normalizedFolderPath = normalizeRepoPath(folderPath);\n  const fileNames = LOCAL_FOLDER_IMAGE_FILE_NAMES[normalizedFolderPath];\n  if (!fileNames) return [];\n  return fileNames.map((fileName) => `${normalizedFolderPath}/${fileName}`);\n};\n\nexport const LOCAL_BGM_FILE_NAMES: string[] = [\n  'brave-explorer.mp3',\n  'close-then-gone.mp3',\n  'fantasy-galaxy.mp3',\n  'mountain-piano-background.mp3',\n  'over-nara.mp3',\n  'soft-fly.mp3',\n  'streetlamp-wind.mp3',\n];\n","import { readonly, ref } from 'vue';\nimport { LOCAL_BGM_FILE_NAMES } from './localAssetManifest';\n\nexport interface BgmTrack {\n  id: string;\n  name: string;\n  url: string;\n}\n\nconst IMAGE_CDN_ROOT = 'https://img.vinsimage.org';\n\nconst ENCODED_DUNGEON = encodeURIComponent('');\nconst ENCODED_BGM_DIR = `${encodeURIComponent('')}/${encodeURIComponent('')}`;\nconst LOCAL_BGM_WINDOWS_DIR = 'D:/SillyTavern////';\n\nconst BGM_TRACK_KEY = 'dungeon.bgm.track';\nconst BGM_VOLUME_KEY = 'dungeon.bgm.volume';\nconst DEFAULT_BGM_FILE = 'brave-explorer.mp3';\nconst DEFAULT_BGM_ID = DEFAULT_BGM_FILE;\n\nconst bgmTracksState = ref<BgmTrack[]>([]);\nconst bgmVolumeState = ref(0.45);\nconst bgmTrackIdState = ref(DEFAULT_BGM_ID);\n\nlet initialized = false;\nlet audioEl: HTMLAudioElement | null = null;\nlet loadedTrackId: string | null = null;\nlet resumeListenerBound = false;\nlet currentTrackSources: string[] = [];\nlet currentTrackSourceIndex = 0;\n\nconst toWindowsFileUrl = (windowsPath: string) => {\n  const normalized = windowsPath.replace(/\\\\/g, '/');\n  const parts = normalized.split('/').filter(Boolean);\n  if (parts.length === 0) return '';\n  const [root, ...rest] = parts;\n  const encodedRest = rest.map((part) => encodeURIComponent(part)).join('/');\n  return `file:///${root}/${encodedRest}`;\n};\n\nconst buildHfTrackUrl = (fileName: string) => (\n  `${IMAGE_CDN_ROOT}/${ENCODED_DUNGEON}/${ENCODED_BGM_DIR}/${encodeURIComponent(fileName)}`\n);\n\nconst buildLocalTrackUrl = (fileName: string) => (\n  toWindowsFileUrl(`${LOCAL_BGM_WINDOWS_DIR}/${fileName}`)\n);\n\nconst buildTrackSources = (fileName: string) => {\n  const sources = [buildLocalTrackUrl(fileName), buildHfTrackUrl(fileName)].filter(Boolean);\n  return [...new Set(sources)];\n};\n\nconst createTrack = (fileName: string): BgmTrack => {\n  const id = fileName;\n  const title = fileName.replace(/\\.[^.]+$/, '');\n  const sources = buildTrackSources(fileName);\n  const url = sources[0] ?? buildHfTrackUrl(fileName);\n  return { id, name: title, url };\n};\n\nconst DEFAULT_TRACKS: BgmTrack[] = [\n  createTrack('brave-explorer.mp3'),\n  createTrack('close-then-gone.mp3'),\n  createTrack('fantasy-galaxy.mp3'),\n  createTrack('mountain-piano-background.mp3'),\n  createTrack('over-nara.mp3'),\n  createTrack('soft-fly.mp3'),\n  createTrack('streetlamp-wind.mp3'),\n];\n\nconst clampVolume = (value: number) => {\n  if (!Number.isFinite(value)) return 0;\n  return Math.max(0, Math.min(1, value));\n};\n\nconst parsePersistedVolume = (raw: string | null) => {\n  const parsed = Number(raw);\n  if (!Number.isFinite(parsed)) return 0.45;\n  return clampVolume(parsed);\n};\n\nconst ensureAudio = () => {\n  if (audioEl) return audioEl;\n  audioEl = new Audio();\n  audioEl.preload = 'auto';\n  audioEl.loop = true;\n  audioEl.volume = bgmVolumeState.value;\n  audioEl.addEventListener('error', () => {\n    if (!audioEl) return;\n    const nextIndex = currentTrackSourceIndex + 1;\n    if (nextIndex >= currentTrackSources.length) return;\n    currentTrackSourceIndex = nextIndex;\n    audioEl.src = currentTrackSources[currentTrackSourceIndex]!;\n    audioEl.load();\n    audioEl.play().catch(() => {\n      bindResumeOnGesture();\n    });\n  });\n  return audioEl;\n};\n\nconst persistVolume = () => {\n  localStorage.setItem(BGM_VOLUME_KEY, String(bgmVolumeState.value));\n};\n\nconst persistTrackId = () => {\n  localStorage.setItem(BGM_TRACK_KEY, bgmTrackIdState.value);\n};\n\nconst getCurrentTrack = () => {\n  if (bgmTracksState.value.length === 0) return null;\n  return bgmTracksState.value.find((track) => track.id === bgmTrackIdState.value) ?? bgmTracksState.value[0]!;\n};\n\nconst sortTracks = (tracks: BgmTrack[]) => (\n  [...tracks].sort((a, b) => {\n    if (a.id === DEFAULT_BGM_ID) return -1;\n    if (b.id === DEFAULT_BGM_ID) return 1;\n    return a.name.localeCompare(b.name, 'en');\n  })\n);\n\nconst applyCurrentTrackToAudio = () => {\n  const track = getCurrentTrack();\n  if (!track) return;\n  if (bgmTrackIdState.value !== track.id) {\n    bgmTrackIdState.value = track.id;\n    persistTrackId();\n  }\n  const audio = ensureAudio();\n  audio.volume = bgmVolumeState.value;\n  if (loadedTrackId !== track.id) {\n    currentTrackSources = buildTrackSources(track.id);\n    currentTrackSourceIndex = 0;\n    audio.src = currentTrackSources[0] ?? track.url;\n    audio.load();\n    loadedTrackId = track.id;\n  }\n};\n\nconst bindResumeOnGesture = () => {\n  if (resumeListenerBound) return;\n  resumeListenerBound = true;\n  const resume = () => {\n    resumeListenerBound = false;\n    if (!audioEl) return;\n    audioEl.play().catch(() => {\n      bindResumeOnGesture();\n    });\n  };\n  document.addEventListener('click', resume, { once: true, capture: true });\n  document.addEventListener('keydown', resume, { once: true, capture: true });\n  document.addEventListener('touchstart', resume, { once: true, capture: true });\n};\n\nconst tryPlay = () => {\n  const audio = ensureAudio();\n  audio.play().catch(() => {\n    bindResumeOnGesture();\n  });\n};\n\nconst fetchDungeonBackgroundMusicTracks = async (): Promise<BgmTrack[]> => (\n  LOCAL_BGM_FILE_NAMES.map((fileName) => createTrack(fileName))\n);\n\nconst bootstrapTrackList = async () => {\n  const localTracks = await fetchDungeonBackgroundMusicTracks();\n  bgmTracksState.value = sortTracks(localTracks.length > 0 ? localTracks : DEFAULT_TRACKS);\n};\n\nexport const initializeBgm = async () => {\n  if (initialized) return;\n  initialized = true;\n\n  bgmVolumeState.value = parsePersistedVolume(localStorage.getItem(BGM_VOLUME_KEY));\n  bgmTrackIdState.value = localStorage.getItem(BGM_TRACK_KEY) || DEFAULT_BGM_ID;\n\n  await bootstrapTrackList();\n  applyCurrentTrackToAudio();\n  tryPlay();\n};\n\nexport const disposeBgm = () => {\n  if (!audioEl) return;\n  audioEl.pause();\n  audioEl.src = '';\n  audioEl = null;\n  loadedTrackId = null;\n  initialized = false;\n};\n\nexport const setBgmVolume = (value: number) => {\n  bgmVolumeState.value = clampVolume(value);\n  persistVolume();\n  if (audioEl) {\n    audioEl.volume = bgmVolumeState.value;\n  }\n};\n\nexport const setBgmTrack = (trackId: string) => {\n  if (!trackId) return;\n  bgmTrackIdState.value = trackId;\n  persistTrackId();\n  applyCurrentTrackToAudio();\n  tryPlay();\n};\n\nexport const bgmTracks = readonly(bgmTracksState);\nexport const bgmVolume = readonly(bgmVolumeState);\nexport const bgmTrackId = readonly(bgmTrackIdState);\n","import type { CardData, EffectType } from './types';\n\nexport interface CodexEnemyEncounter {\n  name: string;\n  floor: number;\n  area: string;\n  firstSeenAt: number;\n  lastSeenAt: number;\n  times: number;\n}\n\nexport interface CodexState {\n  version: 1;\n  cards: string[];\n  relics: string[];\n  effects: string[];\n  enemies: CodexEnemyEncounter[];\n}\n\nconst CODEX_STORAGE_KEY = 'dungeon.codex.v1';\n\nconst createDefaultCodexState = (): CodexState => ({\n  version: 1,\n  cards: [],\n  relics: [],\n  effects: [],\n  enemies: [],\n});\n\nconst hasBrowserStorage = () => typeof window !== 'undefined' && typeof localStorage !== 'undefined';\n\nconst toUniqueStringArray = (value: unknown): string[] => {\n  if (!Array.isArray(value)) return [];\n  const seen = new Set<string>();\n  const result: string[] = [];\n  for (const item of value) {\n    if (typeof item !== 'string') continue;\n    const normalized = item.trim();\n    if (!normalized || seen.has(normalized)) continue;\n    seen.add(normalized);\n    result.push(normalized);\n  }\n  return result;\n};\n\nconst sanitizeEnemyEncounters = (value: unknown): CodexEnemyEncounter[] => {\n  if (!Array.isArray(value)) return [];\n  const dedup = new Map<string, CodexEnemyEncounter>();\n\n  for (const item of value) {\n    if (!item || typeof item !== 'object') continue;\n    const raw = item as Partial<CodexEnemyEncounter>;\n    const name = typeof raw.name === 'string' ? raw.name.trim() : '';\n    if (!name) continue;\n    const area = typeof raw.area === 'string' && raw.area.trim() ? raw.area.trim() : '';\n    const floorNum = Math.max(1, Math.floor(Number(raw.floor ?? 1)));\n    const firstSeenAt = Math.max(0, Math.floor(Number(raw.firstSeenAt ?? Date.now())));\n    const lastSeenAt = Math.max(firstSeenAt, Math.floor(Number(raw.lastSeenAt ?? firstSeenAt)));\n    const times = Math.max(1, Math.floor(Number(raw.times ?? 1)));\n    const key = `${name}@@${floorNum}@@${area}`;\n\n    const existing = dedup.get(key);\n    if (!existing) {\n      dedup.set(key, {\n        name,\n        floor: floorNum,\n        area,\n        firstSeenAt,\n        lastSeenAt,\n        times,\n      });\n      continue;\n    }\n\n    existing.firstSeenAt = Math.min(existing.firstSeenAt, firstSeenAt);\n    existing.lastSeenAt = Math.max(existing.lastSeenAt, lastSeenAt);\n    existing.times = Math.max(1, existing.times + times);\n  }\n\n  return Array.from(dedup.values());\n};\n\nconst parseCodexState = (raw: unknown): CodexState => {\n  if (!raw || typeof raw !== 'object') return createDefaultCodexState();\n  const data = raw as Partial<CodexState>;\n  return {\n    version: 1,\n    cards: toUniqueStringArray(data.cards),\n    relics: toUniqueStringArray(data.relics),\n    effects: toUniqueStringArray(data.effects),\n    enemies: sanitizeEnemyEncounters(data.enemies),\n  };\n};\n\nexport function loadCodexState(): CodexState {\n  if (!hasBrowserStorage()) return createDefaultCodexState();\n  try {\n    const raw = localStorage.getItem(CODEX_STORAGE_KEY);\n    if (!raw) return createDefaultCodexState();\n    return parseCodexState(JSON.parse(raw));\n  } catch {\n    return createDefaultCodexState();\n  }\n}\n\nfunction saveCodexState(next: CodexState) {\n  if (!hasBrowserStorage()) return;\n  try {\n    localStorage.setItem(CODEX_STORAGE_KEY, JSON.stringify(next));\n  } catch {\n    // ignore quota/storage errors\n  }\n}\n\nconst normalizeCardId = (input: string | Pick<CardData, 'id'> | null | undefined): string => {\n  if (!input) return '';\n  if (typeof input === 'string') return input.trim();\n  return typeof input.id === 'string' ? input.id.trim() : '';\n};\n\nconst normalizeEffectType = (input: string | EffectType | null | undefined): string => {\n  if (!input) return '';\n  return String(input).trim();\n};\n\nexport function recordEncounteredCards(cards: Array<string | Pick<CardData, 'id'> | null | undefined>) {\n  const normalized = cards\n    .map((item) => normalizeCardId(item))\n    .filter((item) => item.length > 0);\n  if (normalized.length === 0) return;\n\n  const state = loadCodexState();\n  const before = state.cards.length;\n  const set = new Set(state.cards);\n  for (const id of normalized) set.add(id);\n  if (set.size === before) return;\n  state.cards = Array.from(set);\n  saveCodexState(state);\n}\n\ntype RelicIdentity = { id: string };\n\nconst normalizeRelicId = (input: string | RelicIdentity | null | undefined): string => {\n  if (!input) return '';\n  if (typeof input === 'string') return input.trim();\n  return typeof input.id === 'string' ? input.id.trim() : '';\n};\n\nexport function recordEncounteredRelics(relics: Array<string | RelicIdentity | null | undefined>) {\n  const normalized = relics\n    .map((item) => normalizeRelicId(item))\n    .filter((item) => item.length > 0);\n  if (normalized.length === 0) return;\n\n  const state = loadCodexState();\n  const before = state.relics.length;\n  const set = new Set(state.relics);\n  for (const id of normalized) set.add(id);\n  if (set.size === before) return;\n  state.relics = Array.from(set);\n  saveCodexState(state);\n}\n\nexport function recordEncounteredEffects(effectTypes: Array<string | EffectType | null | undefined>) {\n  const normalized = effectTypes\n    .map((item) => normalizeEffectType(item))\n    .filter((item) => item.length > 0);\n  if (normalized.length === 0) return;\n\n  const state = loadCodexState();\n  const before = state.effects.length;\n  const set = new Set(state.effects);\n  for (const type of normalized) set.add(type);\n  if (set.size === before) return;\n  state.effects = Array.from(set);\n  saveCodexState(state);\n}\n\nexport function recordEncounteredEnemy(payload: { name: string; floor?: number; area?: string }) {\n  const name = typeof payload.name === 'string' ? payload.name.trim() : '';\n  if (!name) return;\n  const floor = Math.max(1, Math.floor(Number(payload.floor ?? 1)));\n  const area = typeof payload.area === 'string' && payload.area.trim() ? payload.area.trim() : '';\n  const now = Date.now();\n  const key = `${name}@@${floor}@@${area}`;\n\n  const state = loadCodexState();\n  const index = state.enemies.findIndex((entry) => `${entry.name}@@${entry.floor}@@${entry.area}` === key);\n  if (index >= 0) {\n    const found = state.enemies[index]!;\n    found.lastSeenAt = now;\n    found.times = Math.max(1, Math.floor(Number(found.times ?? 1))) + 1;\n    saveCodexState(state);\n    return;\n  }\n\n  state.enemies.push({\n    name,\n    floor,\n    area,\n    firstSeenAt: now,\n    lastSeenAt: now,\n    times: 1,\n  });\n  saveCodexState(state);\n}\n","export const FLOOR_MAP: Record<string, string[]> = {\n  : ['', '', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n};\n\nexport const FLOOR_ORDER = ['', '', '', '', ''] as const;\n\nconst FLOOR_NUMBER_MAP: Record<string, number> = {\n  : 1,\n  : 2,\n  : 3,\n  : 4,\n  : 5,\n};\n\nexport function getFloorForArea(area: string): string | null {\n  for (const [floorName, areas] of Object.entries(FLOOR_MAP)) {\n    if (areas.includes(area)) return floorName;\n  }\n  return null;\n}\n\nexport function getNextFloor(currentFloor: string): string | null {\n  const idx = FLOOR_ORDER.indexOf(currentFloor as (typeof FLOOR_ORDER)[number]);\n  if (idx < 0 || idx >= FLOOR_ORDER.length - 1) return null;\n  return FLOOR_ORDER[idx + 1];\n}\n\nexport function getFloorNumberForArea(area: string): number {\n  const floorName = getFloorForArea(area);\n  if (!floorName) return 1;\n  return FLOOR_NUMBER_MAP[floorName] ?? 1;\n}\n\n","/**  F11 */\nexport function toggleFullScreen(): void {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen().catch((err: Error) => {\n      console.warn(`Fullscreen error: ${err.message}`);\n    });\n  } else {\n    document.exitFullscreen();\n  }\n}\n","/**\n * LLM \n *  AI  XML \n */\n/**\n * Maintenance note:\n * - Keep this file UTF-8 (contains Chinese text).\n * - Avoid shell redirection full-file overwrite (>, >>, Out-File, Set-Content).\n * - Prefer apply_patch/IDE-safe edits to prevent mojibake.\n */\n\nexport interface ParsedResponse {\n  /**  <maintext>/<maintxt>/<content>/<> */\n  mainText: string;\n  /** <option>...</option> A-D E / [Leave] / [Rebirth] */\n  options: string[];\n  /** <sum>...</sum>  */\n  summary: string;\n  /** <UpdateVariable>/<update>  */\n  variableUpdate: string;\n  /** <UpdateVariable>  <JSONPatch>...</JSONPatch>  */\n  jsonPatch: string;\n  /**  */\n  rawText: string;\n  /**  E  */\n  hasOptionE: boolean;\n  /**  [Leave]  */\n  hasLeave: boolean;\n  /**  [Rebirth]  */\n  hasRebirth: boolean;\n}\n\nfunction isLeaveOptionLine(line: string): boolean {\n  return /\\bleave\\b/i.test(line);\n}\n\nfunction isRebirthOptionLine(line: string): boolean {\n  return /\\brebirth\\b/i.test(line);\n}\n\n/**\n *  XML \n */\nfunction extractTag(text: string, tagName: string): string {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  // \n  const regex = new RegExp(`(?:^|[\\\\r\\\\n]|>)\\\\s*<${escapedTagName}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)</${escapedTagName}>`, 'ig');\n  let match: RegExpExecArray | null;\n\n  while ((match = regex.exec(text)) !== null) {\n    const fullMatch = match[0];\n    const openTagEnd = fullMatch.indexOf('>');\n    if (openTagEnd >= 0) {\n      //  \"<maintext>, <option>\"\n      const afterOpen = fullMatch.slice(openTagEnd + 1).trimStart();\n      const firstChar = afterOpen[0];\n      if (firstChar === ',' || firstChar === '') continue;\n    }\n    return match[1].trim();\n  }\n\n  return '';\n}\n\n/**\n * \n */\nfunction extractTagByPriority(text: string, tagNames: string[]): string {\n  for (const tagName of tagNames) {\n    const content = extractTag(text, tagName);\n    if (content) return content;\n  }\n  return '';\n}\n\n/**\n * \n * <think>, <thinking>, <Think>, <Thinking> \n *  <thinking> ... </think>\n * \n */\nfunction removeThinkBlock(text: string): string {\n  const thinkTagRegex = /<\\s*(\\/?)\\s*(think|thinking)\\b[^>]*>/gi;\n\n  let result = '';\n  let depth = 0;\n  let lastIndex = 0;\n  let match: RegExpExecArray | null;\n\n  while ((match = thinkTagRegex.exec(text)) !== null) {\n    const isClosing = match[1] === '/';\n    const tagStart = match.index;\n    const tagEnd = thinkTagRegex.lastIndex;\n\n    // \n    //  </think>/< /thinking> \n    if (depth === 0 && !isClosing) {\n      result += text.slice(lastIndex, tagStart);\n    }\n\n    if (isClosing) {\n      //  think/thinking \n      if (depth > 0) depth -= 1;\n    } else {\n      depth += 1;\n    }\n\n    lastIndex = tagEnd;\n  }\n\n  // \n  if (depth === 0) {\n    result += text.slice(lastIndex);\n  }\n\n  return result.trim();\n}\n\n/**\n * \n *  </think> / </thinking> \n */\nexport function filterStreamingTextAfterThinkEnd(text: string): string {\n  if (!text) return '';\n\n  const closeThinkTagRegex = /<\\s*\\/\\s*(think|thinking)\\b[^>]*>/i;\n  const closeMatch = closeThinkTagRegex.exec(text);\n  if (!closeMatch) return text;\n\n  return text.slice(closeMatch.index + closeMatch[0].length).trimStart();\n}\n\n/**\n *  HTML \n */\nfunction removeHtmlComments(text: string): string {\n  return text.replace(/<!--[\\s\\S]*?(?:-->|$)/g, '').trim();\n}\n\nfunction normalizeTucaoMarkers(text: string): string {\n  return text\n    .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n    .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n    .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n    .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n    .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n    .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n}\n\nfunction extractTucaoBlocks(text: string): string[] {\n  const normalized = normalizeTucaoMarkers(text);\n  const result: string[] = [];\n  const openRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n  const closeRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n\n  let cursor = 0;\n  openRegex.lastIndex = 0;\n\n  while (openRegex.exec(normalized) !== null) {\n    const openEnd = openRegex.lastIndex;\n    closeRegex.lastIndex = openEnd;\n    const closeMatch = closeRegex.exec(normalized);\n    const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n    const content = normalized.slice(openEnd, contentEnd).trim();\n    if (content.length > 0) {\n      result.push(content);\n    }\n\n    cursor = closeMatch ? closeRegex.lastIndex : normalized.length;\n    openRegex.lastIndex = cursor;\n    if (!closeMatch) break;\n  }\n\n  return result;\n}\n\n/**\n * \n *  \"A. xxx\", \"B. xxx\" \n */\nfunction parseOptions(optionText: string): string[] {\n  if (!optionText) return [];\n  return optionText\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n *  LLM \n */\nexport function parseResponse(text: string): ParsedResponse {\n  // \n  const cleanText = removeThinkBlock(text);\n\n  // \n  const mainTextRaw = extractTagByPriority(cleanText, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(cleanText);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  const optionRaw = extractTag(cleanText, 'option');\n  const summary = extractTag(cleanText, 'sum');\n\n  //  UpdateVariable / update \n  const updateVarBlock = extractTagByPriority(cleanText, ['UpdateVariable', 'update']);\n  const jsonPatch = extractTag(updateVarBlock, 'JSONPatch');\n  const variableUpdate = updateVarBlock || jsonPatch;\n\n  // \n  const allOptions = parseOptions(optionRaw);\n\n  //  E  [Leave]\n  const hasOptionE = allOptions.some(line => /^E\\.\\s/i.test(line));\n  const hasLeave = allOptions.some(isLeaveOptionLine);\n  const hasRebirth = allOptions.some(isRebirthOptionLine);\n\n  //  E  [Leave] A-D \n  const normalOptions = allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n\n  return {\n    mainText,\n    options: normalOptions,\n    summary,\n    variableUpdate,\n    jsonPatch,\n    rawText: cleanText,\n    hasOptionE,\n    hasLeave,\n    hasRebirth,\n  };\n}\n\n/**\n *  <sum> \n * \n */\nexport function extractSummary(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTag(clean, 'sum');\n}\n\n/**\n *  <maintext> \n */\nexport function extractMainText(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  const mainTextRaw = extractTagByPriority(clean, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(clean);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  return mainText;\n}\n\n/**\n * <UpdateVariable> / <update>\n */\nexport function extractVariableUpdate(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTagByPriority(clean, ['UpdateVariable', 'update']);\n}\n\n/**\n *  <option>  A-D \n */\nexport function extractOptions(messageText: string): string[] {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n}\n\n/**\n *  E \n */\nexport function detectOptionE(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /^E\\.\\s/i.test(line));\n}\n\n/**\n *  [Leave]\n */\nexport function detectLeave(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isLeaveOptionLine);\n}\n\n/**\n *  [Rebirth]\n */\nexport function detectRebirth(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isRebirthOptionLine);\n}\n","// Schema import removed - using raw MVU data directly\nimport { detectLeave, detectOptionE, detectRebirth, extractMainText, extractOptions, extractSummary, extractVariableUpdate, filterStreamingTextAfterThinkEnd, parseResponse } from './responseParser';\nimport { getFloorNumberForArea } from './floor';\n/**\n *  Store\n *    user   generate     assistant \n */\nexport const useGameStore = defineStore('game', () => {\n    const STREAMING_ENABLED_KEY = 'dungeon.streaming_enabled';\n    function readStreamingEnabledSetting() {\n        try {\n            const raw = localStorage.getItem(STREAMING_ENABLED_KEY);\n            if (raw === null)\n                return true;\n            return raw === 'true';\n        }\n        catch {\n            return true;\n        }\n    }\n    function persistStreamingEnabledSetting(enabled) {\n        try {\n            localStorage.setItem(STREAMING_ENABLED_KEY, String(enabled));\n        }\n        catch {\n            // Ignore persistence errors in restricted environments\n        }\n    }\n    //   \n    const mainText = ref('');\n    const options = ref([]);\n    const currentSummary = ref('');\n    const isGenerating = ref(false);\n    const streamingText = ref('');\n    const useStreaming = ref(readStreamingEnabledSetting());\n    const error = ref(null);\n    const isInitialized = ref(false);\n    //   \n    const hasOptionE = ref(false);\n    const hasLeave = ref(false);\n    const hasRebirth = ref(false);\n    const variableUpdateText = ref('');\n    //   \n    const isEditing = ref(false);\n    const editingText = ref('');\n    //  MVU  stat_data\n    const statData = ref({});\n    //   \n    const saveEntries = ref([]);\n    const isSaveLoadOpen = ref(false);\n    const pendingPortalChanges = ref(null);\n    const pendingCombatMvuChanges = ref(null);\n    const pendingStatDataChanges = ref(null);\n    function setPendingPortalChanges(changes) {\n        pendingPortalChanges.value = changes;\n    }\n    function setPendingCombatMvuChanges(changes) {\n        pendingCombatMvuChanges.value = changes ? _.cloneDeep(changes) : null;\n    }\n    function setPendingStatDataChanges(fields) {\n        pendingStatDataChanges.value = fields ? { fields: _.cloneDeep(fields) } : null;\n    }\n    function mergePendingStatDataChanges(fields) {\n        if (!fields || typeof fields !== 'object')\n            return;\n        const base = pendingStatDataChanges.value?.fields ?? {};\n        pendingStatDataChanges.value = {\n            fields: {\n                ..._.cloneDeep(base),\n                ..._.cloneDeep(fields),\n            },\n        };\n    }\n    const AUTO_SUMMARY_ENTRY_NAME = '';\n    const AUTO_SUMMARY_ENTRY_UID = 0;\n    const AUTO_SUMMARY_TITLE = '';\n    const AUTO_VISIBLE_MESSAGE_WINDOW = 15;\n    const normalizeSummaryText = (text) => (text\n        .replace(/\\r?\\n+/g, ' ')\n        .replace(/\\s+/g, ' ')\n        .trim());\n    const parseChronicleContent = (content) => {\n        const map = new Map();\n        for (const line of content.split(/\\r?\\n/)) {\n            const trimmed = line.trim();\n            if (!trimmed)\n                continue;\n            if (trimmed === AUTO_SUMMARY_TITLE)\n                continue;\n            const legacyMatch = /^\\[\\s*(\\d+)\\]\\s*(.+)$/u.exec(trimmed);\n            const orderedMatch = /^(\\d+)\\.\\s*(.+)$/u.exec(trimmed);\n            const match = legacyMatch ?? orderedMatch;\n            if (!match)\n                continue;\n            const index = Number(match[1]);\n            const summary = normalizeSummaryText(match[2] ?? '');\n            if (!Number.isFinite(index) || index < 0 || !summary)\n                continue;\n            if (!map.has(index)) {\n                map.set(index, summary);\n            }\n        }\n        return Array.from(map.entries())\n            .map(([index, summary]) => ({ index, summary }))\n            .sort((a, b) => a.index - b.index);\n    };\n    const formatChronicleContent = (entries) => {\n        if (entries.length === 0)\n            return AUTO_SUMMARY_TITLE;\n        const lines = [...entries]\n            .sort((a, b) => a.index - b.index)\n            .map((entry) => `${entry.index}. ${entry.summary}`);\n        return `${AUTO_SUMMARY_TITLE}\\n${lines.join('\\n')}`;\n    };\n    const upsertChronicleEntry = (entries, index, summary) => {\n        const map = new Map();\n        for (const entry of entries) {\n            if (!map.has(entry.index)) {\n                map.set(entry.index, entry.summary);\n            }\n        }\n        if (map.has(index)) {\n            map.set(index, summary);\n            for (const key of Array.from(map.keys())) {\n                if (key > index) {\n                    map.delete(key);\n                }\n            }\n        }\n        else {\n            map.set(index, summary);\n        }\n        return Array.from(map.entries())\n            .map(([idx, sum]) => ({ index: idx, summary: sum }))\n            .sort((a, b) => a.index - b.index);\n    };\n    const getBoundWorldbookNames = () => {\n        const names = new Set();\n        try {\n            const charWorldbooks = getCharWorldbookNames('current');\n            if (charWorldbooks.primary) {\n                names.add(charWorldbooks.primary);\n            }\n            for (const name of charWorldbooks.additional ?? []) {\n                if (name)\n                    names.add(name);\n            }\n        }\n        catch {\n            // noop\n        }\n        try {\n            const chatWorldbook = getChatWorldbookName('current');\n            if (chatWorldbook) {\n                names.add(chatWorldbook);\n            }\n        }\n        catch {\n            // noop\n        }\n        return Array.from(names);\n    };\n    const resolveAutoSummaryEntryTarget = async () => {\n        const worldbookNames = getBoundWorldbookNames();\n        for (const worldbookName of worldbookNames) {\n            try {\n                const worldbook = await getWorldbook(worldbookName);\n                const entry = worldbook.find((item) => item.name?.trim() === AUTO_SUMMARY_ENTRY_NAME)\n                    ?? worldbook.find((item) => item.uid === AUTO_SUMMARY_ENTRY_UID);\n                if (entry) {\n                    return { worldbookName, uid: entry.uid };\n                }\n            }\n            catch {\n                // noop\n            }\n        }\n        return null;\n    };\n    const updateAutoSummaryChronicle = async (assistantMessageId, summaryText) => {\n        const normalizedSummary = normalizeSummaryText(summaryText);\n        if (!normalizedSummary)\n            return;\n        const target = await resolveAutoSummaryEntryTarget();\n        if (!target)\n            return;\n        const chronicleIndex = Math.floor(assistantMessageId / 2);\n        if (!Number.isFinite(chronicleIndex) || chronicleIndex < 0)\n            return;\n        try {\n            await updateWorldbookWith(target.worldbookName, (worldbook) => {\n                return worldbook.map((entry) => {\n                    if (entry.uid !== target.uid)\n                        return entry;\n                    const parsedEntries = parseChronicleContent(entry.content ?? '');\n                    const nextEntries = upsertChronicleEntry(parsedEntries, chronicleIndex, normalizedSummary);\n                    return {\n                        ...entry,\n                        content: formatChronicleContent(nextEntries),\n                    };\n                });\n            }, { render: 'debounced' });\n        }\n        catch (err) {\n            console.warn('[GameStore] updateAutoSummaryChronicle failed:', err);\n        }\n    };\n    const rebuildAutoSummaryChronicleFromMessages = async () => {\n        const target = await resolveAutoSummaryEntryTarget();\n        if (!target)\n            return 0;\n        const lastId = getLastMessageId();\n        const messages = lastId >= 0\n            ? getChatMessages(`0-${lastId}`, { role: 'assistant', hide_state: 'all' })\n            : [];\n        const map = new Map();\n        for (const msg of messages) {\n            const summary = normalizeSummaryText(extractSummary(msg.message ?? ''));\n            if (!summary)\n                continue;\n            const chronicleIndex = Math.floor(msg.message_id / 2);\n            if (!Number.isFinite(chronicleIndex) || chronicleIndex < 0)\n                continue;\n            // \n            map.set(chronicleIndex, summary);\n        }\n        const entries = Array.from(map.entries())\n            .map(([index, summary]) => ({ index, summary }))\n            .sort((a, b) => a.index - b.index);\n        try {\n            await updateWorldbookWith(target.worldbookName, (worldbook) => worldbook.map((entry) => (entry.uid !== target.uid\n                ? entry\n                : {\n                    ...entry,\n                    content: formatChronicleContent(entries),\n                })), { render: 'debounced' });\n            return entries.length;\n        }\n        catch (err) {\n            console.warn('[GameStore] rebuildAutoSummaryChronicleFromMessages failed:', err);\n            return -1;\n        }\n    };\n    const ensureLatestMessageWindow = async (maxVisible = AUTO_VISIBLE_MESSAGE_WINDOW) => {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const visibleWindow = Math.max(1, Math.floor(maxVisible));\n            const firstVisibleMessageId = Math.max(0, lastId - visibleWindow + 1);\n            const messages = getChatMessages(`0-${lastId}`, { hide_state: 'all' });\n            const updates = [];\n            for (const message of messages) {\n                const shouldHide = message.message_id < firstVisibleMessageId;\n                if (Boolean(message.is_hidden) === shouldHide)\n                    continue;\n                updates.push({\n                    message_id: message.message_id,\n                    is_hidden: shouldHide,\n                });\n            }\n            if (updates.length === 0)\n                return;\n            await setChatMessages(updates, { refresh: 'none' });\n        }\n        catch (err) {\n            console.warn('[GameStore] ensureLatestMessageWindow failed:', err);\n        }\n    };\n    function setUseStreaming(enabled) {\n        const nextEnabled = Boolean(enabled);\n        useStreaming.value = nextEnabled;\n        if (!nextEnabled) {\n            streamingText.value = '';\n        }\n        persistStreamingEnabledSetting(nextEnabled);\n    }\n    function syncFloorNumberByArea(mvuData) {\n        if (!mvuData || typeof mvuData !== 'object')\n            return mvuData;\n        const stat = _.get(mvuData, 'stat_data');\n        if (!stat || typeof stat !== 'object')\n            return mvuData;\n        const area = typeof stat._ === 'string' ? stat._.trim() : '';\n        if (!area)\n            return mvuData;\n        stat._ = getFloorNumberForArea(area);\n        return mvuData;\n    }\n    /**\n     *  MVU  user \n     */\n    function applyPendingPortalChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!changes)\n            return result;\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (changes.area !== undefined)\n            sd._ = changes.area;\n        sd._ = changes.roomType;\n        if (changes.enemyName !== undefined)\n            sd._ = changes.enemyName;\n        if (!sd.$ || typeof sd.$ !== 'object') {\n            sd.$ = {};\n        }\n        const stat = sd.$;\n        if (changes.resetRoomCounter) {\n            stat. = 0;\n        }\n        if (changes.incrementKeys) {\n            for (const key of changes.incrementKeys) {\n                stat[key] = (Number(stat[key]) || 0) + 1;\n            }\n        }\n        const currentPath = Array.isArray(sd.$)\n            ? sd.$.filter((item) => typeof item === 'string')\n            : Array.isArray(stat.$)\n                ? stat.$.filter((item) => typeof item === 'string')\n                : [];\n        const nextPath = [...currentPath];\n        if (changes.resetPath) {\n            nextPath.length = 0;\n        }\n        if (typeof changes.appendPathLabel === 'string') {\n            const normalizedLabel = changes.appendPathLabel.trim();\n            if (normalizedLabel) {\n                nextPath.push(normalizedLabel);\n            }\n        }\n        sd.$ = nextPath;\n        if (Object.prototype.hasOwnProperty.call(stat, '$')) {\n            delete stat.$;\n        }\n        return syncFloorNumberByArea(result);\n    }\n    function applyPendingCombatChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes)\n            return result;\n        if (Number.isFinite(changes.hp)) {\n            sd._ = Math.max(0, Math.floor(Number(changes.hp)));\n        }\n        if (changes.addDefeatMark) {\n            const raw = sd._;\n            const base = Array.isArray(raw)\n                ? raw.filter((item) => typeof item === 'string')\n                : [];\n            if (!base.includes('[]')) {\n                base.push('[]');\n            }\n            sd._ = base;\n        }\n        if (Array.isArray(changes.negativeStatusesAdd) && changes.negativeStatusesAdd.length > 0) {\n            const raw = sd._;\n            const base = Array.isArray(raw)\n                ? raw.filter((item) => typeof item === 'string')\n                : [];\n            for (const status of changes.negativeStatusesAdd) {\n                if (typeof status !== 'string')\n                    continue;\n                const normalized = status.trim();\n                if (!normalized)\n                    continue;\n                if (!base.includes(normalized)) {\n                    base.push(normalized);\n                }\n            }\n            sd._ = base;\n        }\n        if (Number.isFinite(changes.goldDelta)) {\n            const currentGold = Math.max(0, Math.floor(Number(sd._ ?? 0)));\n            const delta = Math.floor(Number(changes.goldDelta));\n            sd._ = Math.max(0, currentGold + delta);\n        }\n        return result;\n    }\n    function applyPendingStatDataChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes || !changes.fields || typeof changes.fields !== 'object')\n            return result;\n        Object.assign(sd, _.cloneDeep(changes.fields));\n        return syncFloorNumberByArea(result);\n    }\n    /**\n     *  assistant \n     */\n    async function initialize() {\n        try {\n            await waitGlobalInitialized('Mvu');\n            console.info('[GameStore] MVU initialized');\n            //  assistant \n            const lastId = getLastMessageId();\n            if (lastId >= 0) {\n                loadLatestAssistantState();\n                loadStatData();\n                await ensureLatestMessageWindow();\n            }\n            isInitialized.value = true;\n            console.info('[GameStore] Initialized successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Init error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     *  assistant \n     */\n    function loadLatestAssistantState() {\n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        if (messages.length > 0) {\n            const lastMsg = messages[messages.length - 1];\n            const text = lastMsg.message;\n            mainText.value = extractMainText(text);\n            options.value = extractOptions(text);\n            currentSummary.value = extractSummary(text);\n            hasOptionE.value = detectOptionE(text);\n            hasLeave.value = detectLeave(text);\n            hasRebirth.value = detectRebirth(text);\n            variableUpdateText.value = extractVariableUpdate(text);\n        }\n    }\n    /**\n     *  MVU stat_data\n     */\n    function loadStatData() {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const mvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                syncFloorNumberByArea(mvuData);\n                //  Schema /\n                statData.value = _.get(mvuData, 'stat_data');\n                console.info('[GameStore] stat_data loaded from message', lastId);\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] Failed to load stat_data:', err);\n        }\n    }\n    /**\n     * \n     * 1.  MVU \n     * 2.  user \n     * 3.  generate  LLM \n     * 4.  +  MVU \n     * 5.  assistant  MVU \n     * 6. \n     */\n    async function sendAction(userInput) {\n        if (isGenerating.value || !userInput.trim())\n            return;\n        error.value = null;\n        isGenerating.value = true;\n        streamingText.value = '';\n        try {\n            // 1.  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            const currentPendingPortalChanges = pendingPortalChanges.value;\n            const currentPendingCombatChanges = pendingCombatMvuChanges.value;\n            const currentPendingStatDataChanges = pendingStatDataChanges.value;\n            // 2.  user  MVU \n            const userMvuDataAfterPortal = applyPendingPortalChangesToMvu(oldMvuData, currentPendingPortalChanges);\n            const userMvuDataAfterCombat = applyPendingCombatChangesToMvu(userMvuDataAfterPortal, currentPendingCombatChanges);\n            const userMvuData = applyPendingStatDataChangesToMvu(userMvuDataAfterCombat, currentPendingStatDataChanges);\n            syncFloorNumberByArea(userMvuData);\n            // 3.  user  MVU \n            console.info('[GameStore] Creating user message:', userInput);\n            await createChatMessages([{ role: 'user', message: userInput, data: userMvuData }], { refresh: 'none' });\n            // user \n            pendingPortalChanges.value = null;\n            pendingCombatMvuChanges.value = null;\n            pendingStatDataChanges.value = null;\n            // 4. \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, _generation_id) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // 5.  generate \n            console.info('[GameStore] Generating LLM response...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            console.info('[GameStore] LLM response received, length:', result.length);\n            // \n            streamListener.stop();\n            streamingText.value = '';\n            // 6. \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            // 7.  MVU  user \n            let newMvuData = await Mvu.parseMessage(result, _.cloneDeep(userMvuData));\n            if (!newMvuData) {\n                newMvuData = _.cloneDeep(userMvuData);\n            }\n            else if (!newMvuData.stat_data && userMvuData?.stat_data) {\n                newMvuData.stat_data = _.cloneDeep(userMvuData.stat_data);\n            }\n            syncFloorNumberByArea(newMvuData);\n            // 8.  MVU \n            if (newMvuData) {\n                delete newMvuData.display_data;\n                delete newMvuData.delta_data;\n            }\n            // 9.  assistant  MVU \n            console.info('[GameStore] Creating assistant message with MVU data');\n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            // 10.  stat_data\n            refreshLocalStatData(newMvuData);\n            const newAssistantMessageId = getLastMessageId();\n            await updateAutoSummaryChronicle(newAssistantMessageId, parsed.summary);\n            await ensureLatestMessageWindow();\n            console.info('[GameStore] Action completed successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] sendAction error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function applyParsedResponse(parsed) {\n        mainText.value = parsed.mainText;\n        options.value = parsed.options;\n        currentSummary.value = parsed.summary;\n        hasOptionE.value = parsed.hasOptionE;\n        hasLeave.value = parsed.hasLeave;\n        hasRebirth.value = parsed.hasRebirth;\n        variableUpdateText.value = parsed.variableUpdate;\n    }\n    /**\n     *  MVU  stat_data \n     */\n    function refreshLocalStatData(mvuData) {\n        try {\n            if (!mvuData)\n                return;\n            syncFloorNumberByArea(mvuData);\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema.safeParse /\n                statData.value = raw;\n                console.info('[GameStore] Local stat_data refreshed:', JSON.stringify(raw.$));\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] refreshLocalStatData error:', err);\n        }\n    }\n    /**\n     *  <sum> \n     */\n    function loadSaveEntries() {\n        const entries = [];\n        const lastId = getLastMessageId();\n        if (lastId < 0) {\n            saveEntries.value = entries;\n            return;\n        }\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        for (const msg of messages) {\n            const summary = extractSummary(msg.message);\n            if (summary) {\n                entries.push({\n                    messageId: msg.message_id,\n                    summary,\n                });\n            }\n        }\n        saveEntries.value = entries;\n    }\n    /**\n     * \n     */\n    async function rollbackTo(targetMessageId) {\n        try {\n            const lastId = getLastMessageId();\n            if (targetMessageId >= lastId) {\n                console.warn('[GameStore] Cannot rollback: target is current or future');\n                return;\n            }\n            //  target \n            const idsToDelete = [];\n            for (let i = targetMessageId + 1; i <= lastId; i++) {\n                idsToDelete.push(i);\n            }\n            console.info(`[GameStore] Rolling back: deleting messages ${targetMessageId + 1} to ${lastId}`);\n            await deleteChatMessages(idsToDelete, { refresh: 'none' });\n            //  assistant \n            loadLatestAssistantState();\n            //  MVU  getLastMessageId\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: targetMessageId });\n                const raw = _.get(mvuData, 'stat_data');\n                if (raw && typeof raw === 'object') {\n                    statData.value = raw;\n                    console.info('[GameStore] Rollback: loaded stat_data from message', targetMessageId);\n                }\n            }\n            catch (e) {\n                console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back', e);\n                loadStatData();\n            }\n            // \n            await ensureLatestMessageWindow();\n            isSaveLoadOpen.value = false;\n            toastr.success('');\n            console.info('[GameStore] Rollback completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Rollback error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * Roll user  assistant \n     * -  assistant assistant \n     * -  user user assistant\n     */\n    async function rerollCurrent() {\n        if (isGenerating.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 1) {\n                console.warn('[GameStore] Cannot reroll: not enough messages');\n                return;\n            }\n            isGenerating.value = true;\n            error.value = null;\n            streamingText.value = '';\n            //  user  re-generate \n            const allMessages = getChatMessages(`0-${lastId}`);\n            const latestMsg = allMessages[allMessages.length - 1];\n            const lastUserMsg = [...allMessages].reverse().find(m => m.role === 'user');\n            if (!lastUserMsg) {\n                console.warn('[GameStore] Cannot reroll: no user message found');\n                return;\n            }\n            const userInput = lastUserMsg.message ?? '';\n            //  assistant  user \n            if (latestMsg?.role === 'assistant') {\n                console.info('[GameStore] Reroll: deleting assistant message', lastId);\n                await deleteChatMessages([lastId], { refresh: 'none' });\n            }\n            else if (latestMsg?.role === 'user') {\n                console.info('[GameStore] Reroll: latest message is user, keep it and regenerate assistant');\n            }\n            else {\n                console.warn('[GameStore] Cannot reroll: latest message is neither user nor assistant');\n                return;\n            }\n            //  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            // \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // \n            console.info('[GameStore] Reroll: regenerating...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            streamListener.stop();\n            streamingText.value = '';\n            // \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            //  MVU \n            const newMvuData = await Mvu.parseMessage(result, _.cloneDeep(oldMvuData));\n            syncFloorNumberByArea(newMvuData);\n            //  assistant  MVU \n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            toastr.success('');\n            const newAssistantMessageId = getLastMessageId();\n            await updateAutoSummaryChronicle(newAssistantMessageId, parsed.summary);\n            await ensureLatestMessageWindow();\n            console.info('[GameStore] Reroll completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Reroll error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function startEdit() {\n        if (isEditing.value || isGenerating.value)\n            return;\n        //  SillyTavern  assistant \n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`${lastId}-${lastId}`);\n        if (messages.length === 0)\n            return;\n        editingText.value = messages[0].message;\n        isEditing.value = true;\n    }\n    /**\n     *  assistant \n     */\n    async function saveEdit() {\n        if (!isEditing.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            //  MVU \n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            //  MVU \n            const prevMvuData = lastId > 0\n                ? Mvu.getMvuData({ type: 'message', message_id: lastId - 1 })\n                : Mvu.getMvuData({ type: 'message', message_id: 0 });\n            //  MVU \n            let newMvuData = await Mvu.parseMessage(editingText.value, _.cloneDeep(prevMvuData));\n            //  stat_data / display_data\n            //  MVU \n            if (newMvuData && currentMvuData) {\n                if (!newMvuData.stat_data && currentMvuData.stat_data) {\n                    newMvuData.stat_data = currentMvuData.stat_data;\n                }\n                if (!newMvuData.display_data && currentMvuData.display_data) {\n                    newMvuData.display_data = currentMvuData.display_data;\n                }\n            }\n            else if (!newMvuData && currentMvuData) {\n                // parseMessage \n                newMvuData = currentMvuData;\n            }\n            syncFloorNumberByArea(newMvuData);\n            // \n            await setChatMessages([{ message_id: lastId, message: editingText.value }], { refresh: 'none' });\n            //  MVU \n            if (newMvuData) {\n                await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id: lastId });\n            }\n            // \n            const parsed = parseResponse(editingText.value);\n            applyParsedResponse(parsed);\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            isEditing.value = false;\n            editingText.value = '';\n            toastr.success('');\n            console.info('[GameStore] Edit saved');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Save edit error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * \n     */\n    function cancelEdit() {\n        isEditing.value = false;\n        editingText.value = '';\n    }\n    /**\n     *  stat_data \n     */\n    async function updateStatDataFields(fields) {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0) {\n                error.value = '';\n                return false;\n            }\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const nextMvuData = _.cloneDeep(currentMvuData ?? {});\n            if (!nextMvuData.stat_data || typeof nextMvuData.stat_data !== 'object') {\n                nextMvuData.stat_data = {};\n            }\n            Object.assign(nextMvuData.stat_data, _.cloneDeep(fields));\n            syncFloorNumberByArea(nextMvuData);\n            await Mvu.replaceMvuData(nextMvuData, { type: 'message', message_id: lastId });\n            refreshLocalStatData(nextMvuData);\n            return true;\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] updateStatDataFields error:', msg);\n            error.value = `: ${msg}`;\n            return false;\n        }\n    }\n    return {\n        // State\n        mainText,\n        options,\n        currentSummary,\n        isGenerating,\n        useStreaming,\n        streamingText,\n        error,\n        isInitialized,\n        statData,\n        saveEntries,\n        isSaveLoadOpen,\n        isEditing,\n        editingText,\n        hasOptionE,\n        hasLeave,\n        hasRebirth,\n        variableUpdateText,\n        // Actions\n        initialize,\n        sendAction,\n        setUseStreaming,\n        setPendingPortalChanges,\n        setPendingCombatMvuChanges,\n        setPendingStatDataChanges,\n        mergePendingStatDataChanges,\n        loadStatData,\n        loadSaveEntries,\n        rebuildAutoSummaryChronicleFromMessages,\n        rollbackTo,\n        rerollCurrent,\n        startEdit,\n        saveEdit,\n        cancelEdit,\n        updateStatDataFields,\n    };\n});\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link2 = createLucideIcon(\"link-2\", [\n  [\"path\", { d: \"M9 17H7A5 5 0 0 1 7 7h2\", key: \"8i5ue5\" }],\n  [\"path\", { d: \"M15 7h2a5 5 0 1 1 0 10h-2\", key: \"1b9ql8\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"12\", y2: \"12\", key: \"1jonct\" }]\n]);\n\nexport { Link2 as default };\n//# sourceMappingURL=link-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Skull = createLucideIcon(\"skull\", [\n  [\"path\", { d: \"m12.5 17-.5-1-.5 1h1z\", key: \"3me087\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z\",\n      key: \"1o5pge\"\n    }\n  ],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }]\n]);\n\nexport { Skull as default };\n//# sourceMappingURL=skull.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"bug\", [\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z\", key: \"uouzyp\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M21 21a4 4 0 0 0-3.81-4\", key: \"1b0z45\" }],\n  [\"path\", { d: \"M21 5a4 4 0 0 1-3.55 3.97\", key: \"5cxbf6\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M3 21a4 4 0 0 1 3.81-4\", key: \"1fjd4g\" }],\n  [\"path\", { d: \"M3 5a4 4 0 0 0 3.55 3.97\", key: \"1d7oge\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M9 7.13V6a3 3 0 1 1 6 0v1.13\", key: \"1vgav8\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplet = createLucideIcon(\"droplet\", [\n  [\n    \"path\",\n    {\n      d: \"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z\",\n      key: \"c7niix\"\n    }\n  ]\n]);\n\nexport { Droplet as default };\n//# sourceMappingURL=droplet.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flame = createLucideIcon(\"flame\", [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n]);\n\nexport { Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sword = createLucideIcon(\"sword\", [\n  [\"path\", { d: \"m11 19-6-6\", key: \"s7kpr\" }],\n  [\"path\", { d: \"m5 21-2-2\", key: \"1kw20b\" }],\n  [\"path\", { d: \"m8 16-4 4\", key: \"1oqv8h\" }],\n  [\"path\", { d: \"M9.5 17.5 21 6V3h-3L6.5 14.5\", key: \"pkxemp\" }]\n]);\n\nexport { Sword as default };\n//# sourceMappingURL=sword.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"heart\", [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ban = createLucideIcon(\"ban\", [\n  [\"path\", { d: \"M4.929 4.929 19.07 19.071\", key: \"196cmz\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Ban as default };\n//# sourceMappingURL=ban.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"zap\", [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Snowflake = createLucideIcon(\"snowflake\", [\n  [\"path\", { d: \"m10 20-1.25-2.5L6 18\", key: \"18frcb\" }],\n  [\"path\", { d: \"M10 4 8.75 6.5 6 6\", key: \"7mghy3\" }],\n  [\"path\", { d: \"m14 20 1.25-2.5L18 18\", key: \"1chtki\" }],\n  [\"path\", { d: \"m14 4 1.25 2.5L18 6\", key: \"1b4wsy\" }],\n  [\"path\", { d: \"m17 21-3-6h-4\", key: \"15hhxa\" }],\n  [\"path\", { d: \"m17 3-3 6 1.5 3\", key: \"11697g\" }],\n  [\"path\", { d: \"M2 12h6.5L10 9\", key: \"kv9z4n\" }],\n  [\"path\", { d: \"m20 10-1.5 2 1.5 2\", key: \"1swlpi\" }],\n  [\"path\", { d: \"M22 12h-6.5L14 15\", key: \"1mxi28\" }],\n  [\"path\", { d: \"m4 10 1.5 2L4 14\", key: \"k9enpj\" }],\n  [\"path\", { d: \"m7 21 3-6-1.5-3\", key: \"j8hb9u\" }],\n  [\"path\", { d: \"m7 3 3 6h4\", key: \"1otusx\" }]\n]);\n\nexport { Snowflake as default };\n//# sourceMappingURL=snowflake.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Waves = createLucideIcon(\"waves\", [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n]);\n\nexport { Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bone = createLucideIcon(\"bone\", [\n  [\n    \"path\",\n    {\n      d: \"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z\",\n      key: \"w610uw\"\n    }\n  ]\n]);\n\nexport { Bone as default };\n//# sourceMappingURL=bone.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Battery = createLucideIcon(\"battery\", [\n  [\"path\", { d: \"M 22 14 L 22 10\", key: \"nqc4tb\" }],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"16\", height: \"12\", rx: \"2\", key: \"13zb55\" }]\n]);\n\nexport { Battery as default };\n//# sourceMappingURL=battery.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"eye\", [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"eye-off\", [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"brain\", [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Leaf = createLucideIcon(\"leaf\", [\n  [\n    \"path\",\n    {\n      d: \"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z\",\n      key: \"nnexq3\"\n    }\n  ],\n  [\"path\", { d: \"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12\", key: \"mt58a7\" }]\n]);\n\nexport { Leaf as default };\n//# sourceMappingURL=leaf.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"settings-2\", [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"trash-2\", [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"x\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","// \n//     &  & \n// \n\nimport {\n    type CardData,\n    CardType,\n    type ClashResult,\n    type DamageCalculationContext,\n    EffectType,\n    type EntityStats,\n    type PointCalculationContext,\n} from '../types';\nimport {\n    findEffect,\n    getEffectStacks,\n    hasEffect,\n    reduceEffectStacks,\n    removeEffect,\n} from './effects';\n\n// \n//  A. \n// \n\n/**\n * \n * FinalPoint = (BaseDice * Multiplier + Addition) * BuffMod * RelicMod + BuffAdd + RelicAdd\n */\nexport function calculateFinalPoint(ctx: PointCalculationContext): number {\n  const { baseDice, card, relicModifiers } = ctx;\n\n  // Step 1-2: \n  let point = baseDice * card.calculation.multiplier + card.calculation.addition;\n\n  // Step 3-4: \n  point *= relicModifiers.globalMultiplier;\n\n  // Step 5-6: \n  point += relicModifiers.globalAddition;\n\n  return Math.max(0, Math.floor(point));\n}\n\n// \n//  B. \n// \n\n/**\n * \n * 1.  vs   2.  vs   3.  vs (|)  4. \n */\nexport function shouldClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  forceClashFunction: boolean = false,\n): boolean {\n  const p = playerCard.type;\n  const e = enemyCard.type;\n\n  if (p === CardType.FUNCTION || e === CardType.FUNCTION) return forceClashFunction;\n  if (p === e) return true;\n  if (p === CardType.DODGE && (e === CardType.PHYSICAL || e === CardType.MAGIC)) return true;\n  if (e === CardType.DODGE && (p === CardType.PHYSICAL || p === CardType.MAGIC)) return true;\n\n  return false;\n}\n\n/**\n * \n *  <  = \n */\nexport function resolveClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  playerPoint: number,\n  enemyPoint: number,\n): ClashResult {\n  const isPlayerDodge = playerCard.type === CardType.DODGE;\n  const isEnemyDodge = enemyCard.type === CardType.DODGE;\n\n  // \n  if (isPlayerDodge && !isEnemyDodge) {\n    if (playerPoint < enemyPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n    }\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint}  ${enemyPoint})` };\n  }\n  // \n  if (isEnemyDodge && !isPlayerDodge) {\n    if (enemyPoint < playerPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint} < ${playerPoint})` };\n    }\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint}  ${playerPoint})` };\n  }\n  // \n  if (playerPoint > enemyPoint) {\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} > ${enemyPoint})` };\n  } else if (enemyPoint > playerPoint) {\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n  }\n  return { outcome: 'draw', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint})` };\n}\n\n// \n//  C. \n// \n\n/**\n * \n * relative: FinalPoint * scale + scaleAddition\n * fixed:    value\n * mixed:    baseValue + FinalPoint * scale + scaleAddition\n */\nexport function calculateRawDamage(finalPoint: number, card: CardData): number {\n  const dl = card.damageLogic;\n  switch (dl.mode) {\n    case 'relative': return finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    case 'fixed':    return dl.value ?? 0;\n    case 'mixed':    return (dl.baseValue ?? 0) + finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    default:         return 0;\n  }\n}\n\n/**\n * \n *           \n */\nexport function calculateFinalDamage(ctx: DamageCalculationContext): { damage: number; isTrueDamage: boolean; logs: string[] } {\n  const logs: string[] = [];\n  let damage = calculateRawDamage(ctx.finalPoint, ctx.card);\n  logs.push(`: ${Math.floor(damage)}`);\n\n  const isTrueDamage = ctx.isTrueDamage ?? false;\n\n  // \n  const cold = ctx.attackerEffects.find(e => e.type === EffectType.COLD)?.stacks ?? 0;\n  if (cold > 0) { damage -= cold; logs.push(`[] -${cold}`); }\n\n  // \n  const damageBoost = ctx.attackerEffects.find(e => e.type === EffectType.DAMAGE_BOOST)?.stacks ?? 0;\n  if (damageBoost > 0) { damage += damageBoost; logs.push(`[] +${damageBoost}`); }\n\n  // /\n  const defenderHasNonEntity = ctx.defenderEffects.some((e) => e.type === EffectType.NON_ENTITY && e.stacks > 0);\n  // \n  const defenderHasIllusoryBody = ctx.defenderEffects.some((e) => e.type === EffectType.ILLUSORY_BODY && e.stacks > 0);\n  if (defenderHasNonEntity) {\n    if (ctx.card.type === CardType.PHYSICAL) {\n      damage *= 0.5;\n      logs.push('[]  x0.5');\n    } else if (ctx.card.type === CardType.MAGIC) {\n      damage *= 1.5;\n      logs.push('[]  x1.5');\n    }\n  }\n  if (defenderHasIllusoryBody && ctx.card.type === CardType.PHYSICAL) {\n    damage *= 0.5;\n    logs.push('[]  x0.5');\n  }\n\n  if (isTrueDamage) {\n    logs.push(``);\n    return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: true, logs };\n  }\n\n  // \n  const vuln = ctx.defenderEffects.find(e => e.type === EffectType.VULNERABLE)?.stacks ?? 0;\n  if (vuln > 0) { damage += vuln; logs.push(`[] +${vuln}`); }\n\n  // \n  const sturdy = ctx.defenderEffects.find(e => e.type === EffectType.STURDY)?.stacks ?? 0;\n  if (sturdy > 0) { damage -= sturdy; logs.push(`[] -${sturdy}`); }\n\n  //  applyDamageToEntity \n  if (ctx.defenderEffects.some(e => e.type === EffectType.BARRIER && e.stacks > 0)) {\n    logs.push(`[] `);\n  }\n\n  //  applyDamageToEntity \n  const armor = ctx.defenderEffects.find(e => e.type === EffectType.ARMOR)?.stacks ?? 0;\n  if (armor > 0) { logs.push(`[]  ${armor} `); }\n\n  return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: false, logs };\n}\n\n/**\n * \n */\nexport function triggerSwarmReviveIfNeeded(target: EntityStats): { revived: boolean; logs: string[] } {\n  const logs: string[] = [];\n  if (target.hp > 0) return { revived: false, logs };\n  if (target.maxHp <= 0) return { revived: false, logs };\n\n  const swarmStacks = getEffectStacks(target, EffectType.SWARM);\n  if (swarmStacks > 0) {\n    reduceEffectStacks(target, EffectType.SWARM, 1);\n    target.hp = target.maxHp;\n    logs.push(`[] 1${target.maxHp}`);\n    return { revived: true, logs };\n  }\n\n  const bloodCocoonStacks = getEffectStacks(target, EffectType.BLOOD_COCOON);\n  if (bloodCocoonStacks > 0) {\n    reduceEffectStacks(target, EffectType.BLOOD_COCOON, 1);\n    const recoverHp = Math.max(1, Math.floor(target.maxHp * 0.5));\n    target.hp = recoverHp;\n    logs.push(`[] 1${recoverHp}`);\n    return { revived: true, logs };\n  }\n\n  const indomitableStacks = getEffectStacks(target, EffectType.INDOMITABLE);\n  if (indomitableStacks > 0) {\n    reduceEffectStacks(target, EffectType.INDOMITABLE, 1);\n    target.hp = 1;\n    logs.push(`[] 11`);\n    return { revived: true, logs };\n  }\n\n  return { revived: false, logs };\n}\n\n/**\n * \n *  0 \n */\nexport function consumeColdAfterDealingDamage(attacker: EntityStats, actualDamage: number): string[] {\n  const logs: string[] = [];\n  void actualDamage;\n\n  const cold = findEffect(attacker, EffectType.COLD);\n  if (!cold || cold.stacks <= 0) return logs;\n\n  const before = cold.stacks;\n  cold.stacks = Math.floor(cold.stacks / 2);\n  if (cold.stacks <= 0) {\n    removeEffect(attacker, EffectType.COLD);\n    logs.push(`[] ${before} -> 0`);\n  } else {\n    logs.push(`[] ${before} -> ${cold.stacks}`);\n  }\n  return logs;\n}\n\n/**\n * ///\n */\nexport function applyDamageToEntity(target: EntityStats, damage: number, isTrueDamage: boolean): { actualDamage: number; logs: string[] } {\n  const logs: string[] = [];\n  if (!isTrueDamage) {\n    if (hasEffect(target, EffectType.BARRIER) && damage > 0) {\n      reduceEffectStacks(target, EffectType.BARRIER);\n      logs.push(`[] -1`);\n      return { actualDamage: 0, logs };\n    }\n    const ae = findEffect(target, EffectType.ARMOR);\n    if (ae && ae.stacks > 0 && damage > 0) {\n      const c = Math.min(ae.stacks, damage);\n      ae.stacks -= c; damage -= c;\n      if (ae.stacks <= 0) removeEffect(target, EffectType.ARMOR);\n      logs.push(`[] ${c}${damage}`);\n    }\n  }\n  const actual = Math.min(damage, target.hp);\n  target.hp -= actual;\n  logs.push(`${actual}(HP: ${target.hp}/${target.maxHp})`);\n  const reviveResult = triggerSwarmReviveIfNeeded(target);\n  logs.push(...reviveResult.logs);\n  return { actualDamage: actual, logs };\n}\n\n// \n//  D.  & \n// \n\n/** (), () */\nexport function processClashEffects(winner: EntityStats, loser: EntityStats): string[] {\n  const logs: string[] = [];\n  const bleed = getEffectStacks(loser, EffectType.BLEED);\n  if (bleed > 0) { loser.hp -= bleed; logs.push(`[] ${bleed}`); }\n  if (hasEffect(winner, EffectType.BURN)) { removeEffect(winner, EffectType.BURN); logs.push(`[] `); }\n  return logs;\n}\n\n/** ,  */\nexport function processPostAttackEffects(_attacker: EntityStats): string[] {\n  const logs: string[] = [];\n  // \n  return logs;\n}\n\n// \n//  E. \n// \n\nexport function rollDice(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"refresh-ccw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Footprints = createLucideIcon(\"footprints\", [\n  [\n    \"path\",\n    {\n      d: \"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z\",\n      key: \"1dudjm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z\",\n      key: \"l2t8xc\"\n    }\n  ],\n  [\"path\", { d: \"M16 17h4\", key: \"1dejxt\" }],\n  [\"path\", { d: \"M4 13h4\", key: \"1bwh8b\" }]\n]);\n\nexport { Footprints as default };\n//# sourceMappingURL=footprints.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_2 = { class: \"bg-black/60 p-1 rounded-full border border-white/10\" };\nconst _hoisted_3 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_4 = { class: \"absolute font-heading text-white/20 text-4xl select-none\" };\nconst _hoisted_5 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_6 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_7 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_8 = { class: \"mt-1 text-center text-white/50 font-bold text-[10px] font-ui tracking-wider\" };\nimport { CircleHelp, Footprints, RefreshCcw, Skull, Sparkles, Sword, Zap } from 'lucide-vue-next';\nimport { CardType } from '../types';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonCard',\n    props: {\n        card: {},\n        disabled: { type: Boolean, default: false },\n        selected: { type: Boolean, default: false },\n        faceDown: { type: Boolean, default: false },\n        isEnemy: { type: Boolean, default: false },\n        className: { default: '' },\n        maskLevel: { default: 'none' }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        const props = __props;\n        const typeColorClass = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'border-gray-600 bg-gray-900/40';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-900 bg-red-950/30';\n                case CardType.MAGIC:\n                    return 'border-purple-900 bg-purple-950/30';\n                case CardType.FUNCTION:\n                    return 'border-yellow-800 bg-yellow-950/30';\n                case CardType.DODGE:\n                    return 'border-emerald-900 bg-emerald-950/30';\n                case CardType.ACTIVE:\n                    return 'border-zinc-200/80 bg-zinc-100/15';\n                case CardType.CURSE:\n                    return 'border-black bg-black/70';\n                default:\n                    return 'border-gray-700 bg-gray-800';\n            }\n        });\n        const typeIcon = computed(() => {\n            if (props.maskLevel === 'full') {\n                return CircleHelp;\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return Sword;\n                case CardType.MAGIC:\n                    return Sparkles;\n                case CardType.FUNCTION:\n                    return RefreshCcw;\n                case CardType.DODGE:\n                    return Footprints;\n                case CardType.ACTIVE:\n                    return Zap;\n                case CardType.CURSE:\n                    return Skull;\n                default:\n                    return Sword;\n            }\n        });\n        const typeIconColor = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'text-gray-400';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'text-red-400';\n                case CardType.MAGIC:\n                    return 'text-purple-400';\n                case CardType.FUNCTION:\n                    return 'text-yellow-400';\n                case CardType.DODGE:\n                    return 'text-emerald-400';\n                case CardType.ACTIVE:\n                    return 'text-zinc-200';\n                case CardType.CURSE:\n                    return 'text-zinc-300';\n                default:\n                    return 'text-gray-400';\n            }\n        });\n        const cardStrengthLabel = computed(() => {\n            const dl = props.card.damageLogic;\n            switch (dl.mode) {\n                case 'relative': return ` ${dl.scale ?? 1}x`;\n                case 'fixed': return dl.value ? ` ${dl.value}` : '';\n                case 'mixed': return `${dl.baseValue ?? 0}+${dl.scale ?? 1}x`;\n                default: return '';\n            }\n        });\n        const typeGradient = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'bg-gradient-to-tr from-gray-700 to-black';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'bg-gradient-to-tr from-red-900 to-black';\n                case CardType.MAGIC:\n                    return 'bg-gradient-to-tr from-purple-900 to-black';\n                case CardType.FUNCTION:\n                    return 'bg-gradient-to-tr from-yellow-900 to-black';\n                case CardType.DODGE:\n                    return 'bg-gradient-to-tr from-emerald-900 to-black';\n                case CardType.ACTIVE:\n                    return 'bg-gradient-to-tr from-zinc-300/70 to-zinc-900';\n                case CardType.CURSE:\n                    return 'bg-gradient-to-tr from-zinc-900 to-black';\n                default:\n                    return 'bg-gradient-to-tr from-gray-800 to-black';\n            }\n        });\n        const displayName = computed(() => (props.maskLevel === 'none' ? props.card.name : '???'));\n        const displayDescription = computed(() => (props.maskLevel === 'none' ? props.card.description : '???'));\n        const displayTypeText = computed(() => (props.maskLevel === 'full' ? '?' : props.card.type));\n        const displayInitial = computed(() => (displayName.value[0] ?? '?'));\n        const showManaBadge = computed(() => (props.maskLevel !== 'full'\n            && (props.card.type === CardType.MAGIC || props.card.type === CardType.ACTIVE)\n            && props.card.manaCost > 0));\n        const isRareCard = computed(() => props.card.rarity === '');\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" Face Down Card \"),\n                (__props.faceDown)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"w-40 h-60 rounded-xl bg-[#252030] border-2 border-[#3a3040] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2\", __props.className])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"div\", { class: \"absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50\" }, [\n                                _createElementVNode(\"div\", { class: \"size-16 rounded-full border-2 border-[#5c3a21] opacity-30\" })\n                            ], -1 /* CACHED */)\n                        ]))], 2 /* CLASS */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Face Up Card \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"relative w-40 h-60 rounded-xl shadow-2xl transition-all duration-300 transform bg-[#16121e] border-2 cursor-pointer\", [\n                                    _unref(typeColorClass),\n                                    _unref(isRareCard) ? 'rare-card-glow' : '',\n                                    __props.selected ? 'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20' : 'hover:-translate-y-2 hover:z-10',\n                                    __props.disabled ? 'opacity-80 !cursor-default' : '',\n                                    __props.className,\n                                ]]),\n                            onClick: _cache[0] || (_cache[0] = ($event) => (!__props.disabled && _ctx.$emit('click')))\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-400/40 shadow-md\", !_unref(showManaBadge) ? 'opacity-0' : ''])\n                                }, _toDisplayString(__props.card.manaCost), 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(typeIcon)), {\n                                        class: _normalizeClass([\"size-5\", _unref(typeIconColor)])\n                                    }, null, 8 /* PROPS */, [\"class\"]))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Image Placeholder \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"size-full opacity-60\", _unref(typeGradient)])\n                                }, null, 2 /* CLASS */),\n                                _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_unref(displayInitial)), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"h3\", _hoisted_6, _toDisplayString(_unref(displayName)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_unref(displayDescription)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_unref(displayTypeText)), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */)\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DungeonCard.vue?vue&type=style&index=0&id=0b124fb2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0b124fb2\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\n\nimport { ref, computed, watch, onUnmounted } from 'vue';\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    class: \"absolute inset-0 size-full\",\n    style: { \"filter\": \"drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))\" }\n};\nconst _hoisted_2 = [\"fill\", \"stroke\"];\nconst _hoisted_3 = [\"stroke\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonDice',\n    props: {\n        value: {},\n        rolling: { type: Boolean },\n        color: { default: 'gold' },\n        size: { default: 'md' },\n        className: { default: '' },\n        rollingMin: { default: 1 },\n        rollingMax: { default: 6 },\n        numberClass: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayValue = ref(1);\n        let interval = null;\n        const gradientId = `grad-${props.color}-${Math.random().toString(36).substr(2, 9)}`;\n        const sizeClass = computed(() => {\n            const map = { sm: 'w-12 h-12', md: 'w-20 h-20', lg: 'w-32 h-32' };\n            return map[props.size];\n        });\n        const numberSizeClass = computed(() => {\n            const map = { sm: 'text-xl', md: 'text-3xl', lg: 'text-6xl' };\n            return map[props.size];\n        });\n        const borderColor = computed(() => (props.color === 'gold' ? '#4d331f' : '#2a0505'));\n        const textColor = computed(() => (props.color === 'gold' ? 'text-[#2c1a0e]' : 'text-[#2c0e0e]'));\n        const numberTextClass = computed(() => props.numberClass || textColor.value);\n        const getRollingRange = () => {\n            const min = Math.floor(Math.min(props.rollingMin, props.rollingMax));\n            const max = Math.floor(Math.max(props.rollingMin, props.rollingMax));\n            return {\n                min: Number.isFinite(min) ? min : 1,\n                max: Number.isFinite(max) ? max : 6,\n            };\n        };\n        const rollRandomInRange = () => {\n            const { min, max } = getRollingRange();\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        watch(() => [props.rolling, props.value, props.rollingMin, props.rollingMax], ([rolling]) => {\n            if (interval) {\n                clearInterval(interval);\n                interval = null;\n            }\n            if (rolling) {\n                interval = setInterval(() => {\n                    displayValue.value = rollRandomInRange();\n                }, 80);\n            }\n            else {\n                displayValue.value = props.value;\n            }\n        }, { immediate: true });\n        onUnmounted(() => {\n            if (interval)\n                clearInterval(interval);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative flex items-center justify-center drop-shadow-xl transition-all duration-300\", [__props.rolling ? 'animate-bounce' : '', __props.className]])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"relative flex items-center justify-center\", _unref(sizeClass)])\n                }, [\n                    (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [\n                        _createElementVNode(\"defs\", null, [\n                            _createElementVNode(\"linearGradient\", {\n                                id: gradientId,\n                                x1: \"0%\",\n                                y1: \"0%\",\n                                x2: \"100%\",\n                                y2: \"100%\"\n                            }, [\n                                (__props.color === 'gold')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[0] || (_cache[0] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#f9e6a0\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#d4af37\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#8a7122\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#fca5a5\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#ef4444\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#7f1d1d\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ]),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 2, 93 25, 93 75, 50 98, 7 75, 7 25\",\n                            fill: `url(#${gradientId})`,\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"3\"\n                        }, null, 8 /* PROPS */, _hoisted_2),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 8, 87 29, 87 71, 50 92, 13 71, 13 29\",\n                            fill: \"none\",\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"1\",\n                            opacity: \"0.4\"\n                        }, null, 8 /* PROPS */, _hoisted_3)\n                    ])),\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"relative z-10 font-heading font-bold drop-shadow-sm\", [_unref(numberTextClass), _unref(numberSizeClass)]])\n                    }, _toDisplayString(_unref(displayValue)), 3 /* TEXT, CLASS */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createVNode as _createVNode, isRef as _isRef, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, normalizeClass as _normalizeClass, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = { class: \"absolute top-4 left-4 z-50 pointer-events-auto flex flex-col gap-2 scale-[1.1] origin-top-left\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"mt-1 w-52 bg-[#1a1520]/95 border border-white/10 rounded-xl p-3 text-xs text-dungeon-paper shadow-xl backdrop-blur-md\"\n};\nconst _hoisted_5 = { class: \"flex flex-col gap-3\" };\nconst _hoisted_6 = { class: \"flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_7 = { class: \"absolute top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-none scale-[1.1] origin-top\" };\nconst _hoisted_8 = { class: \"flex flex-col items-center\" };\nconst _hoisted_9 = { class: \"text-lg font-heading font-bold text-white/90\" };\nconst _hoisted_10 = { class: \"h-1.5 rounded-full border border-amber-400/35 bg-black/45 overflow-hidden\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"absolute left-1/2 top-full mt-1.5 -translate-x-1/2 w-64 rounded-md border border-amber-300/35 bg-black/80 px-2 py-1 text-[10px] leading-relaxed text-amber-100 text-left shadow-lg\"\n};\nconst _hoisted_12 = {\n    key: 0,\n    class: \"mt-2 w-80 space-y-1\"\n};\nconst _hoisted_13 = { class: \"text-sm text-white/80 [text-shadow:0_1px_2px_rgba(0,0,0,0.9)]\" };\nconst _hoisted_14 = { class: \"mt-0.5 space-y-0.5\" };\nconst _hoisted_15 = { class: \"absolute inset-0 z-10 pointer-events-none\" };\nconst _hoisted_16 = { class: \"absolute top-[3%] right-[2%] md:top-[5%] md:right-[3%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000 scale-[1.1] origin-top-right\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"absolute -left-48 top-8\"\n};\nconst _hoisted_18 = { class: \"relative\" };\nconst _hoisted_19 = { class: \"rotate-[-3deg] shadow-[0_0_20px_rgba(200,120,0,0.15)]\" };\nconst _hoisted_20 = { class: \"relative w-full h-full\" };\nconst _hoisted_21 = { class: \"absolute bottom-0 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_22 = [\"src\"];\nconst _hoisted_23 = { class: \"relative overflow-visible mt-0 w-72 scale-[1.2] origin-top bg-[#18141e]/90 border border-white/8 p-3 rounded-xl shadow-lg backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_24 = { class: \"flex justify-between text-sm text-white/90 font-bold mb-1.5\" };\nconst _hoisted_25 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_26 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_27 = [\"aria-label\"];\nconst _hoisted_28 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_29 = [\"aria-label\"];\nconst _hoisted_30 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_31 = [\"aria-label\"];\nconst _hoisted_32 = { class: \"text-[10px] text-rose-300 font-bold\" };\nconst _hoisted_33 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_34 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_35 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_36 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_37 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_38 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_39 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_40 = { class: \"text-[10px] text-red-300\" };\nconst _hoisted_41 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_42 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_43 = {\n    key: 2,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_44 = { class: \"absolute bottom-[18%] left-[3%] md:bottom-[22%] md:left-[6%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32 scale-[1.1] origin-bottom-left\" };\nconst _hoisted_45 = [\"title\"];\nconst _hoisted_46 = { class: \"relative w-full h-full\" };\nconst _hoisted_47 = { class: \"absolute bottom-4 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_48 = {\n    key: 0,\n    class: \"size-20 bg-dungeon-gold/15 blur-2xl rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n};\nconst _hoisted_49 = [\"src\"];\nconst _hoisted_50 = { class: \"relative overflow-visible mt-2 w-60 scale-[1.2] origin-bottom bg-[#18141e]/90 border border-white/8 p-2.5 rounded-xl shadow-xl backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_51 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_52 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_53 = [\"aria-label\"];\nconst _hoisted_54 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_55 = [\"aria-label\"];\nconst _hoisted_56 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_57 = [\"aria-label\"];\nconst _hoisted_58 = { class: \"text-[10px] text-rose-300 font-bold\" };\nconst _hoisted_59 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_60 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_61 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_62 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_63 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_64 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_65 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_66 = { class: \"text-[10px] text-dungeon-gold\" };\nconst _hoisted_67 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_68 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_69 = {\n    key: 2,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_70 = { class: \"absolute inset-0 z-[45] pointer-events-none overflow-hidden\" };\nconst _hoisted_71 = { class: \"absolute inset-0 z-30 flex flex-col pointer-events-none\" };\nconst _hoisted_72 = { class: \"flex-1 flex items-center justify-center relative\" };\nconst _hoisted_73 = {\n    key: 0,\n    class: \"relative w-full h-64 flex items-center justify-center z-50\"\n};\nconst _hoisted_74 = { class: \"pointer-events-none min-h-[200px] w-full flex items-end justify-center pb-6 px-4 space-x-4 relative\" };\nconst _hoisted_75 = { class: \"flex space-x-4 items-end mb-2 z-40 scale-[1.1] origin-bottom pointer-events-auto\" };\nconst _hoisted_76 = [\"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_77 = { class: \"absolute right-3 bottom-2 flex flex-col items-end gap-2 z-50 origin-bottom-right pointer-events-auto\" };\nconst _hoisted_78 = [\"disabled\"];\nconst _hoisted_79 = { class: \"flex gap-1.5\" };\nconst _hoisted_80 = [\"disabled\", \"onClick\"];\nconst _hoisted_81 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_82 = { class: \"absolute top-8 left-2 right-2 h-16 rounded-lg border border-white/10 bg-black/45 overflow-hidden flex items-center justify-center\" };\nconst _hoisted_83 = { class: \"relative font-heading text-2xl text-white/25 select-none\" };\nconst _hoisted_84 = { class: \"absolute bottom-0 left-0 w-full p-1.5 z-10\" };\nconst _hoisted_85 = { class: \"text-dungeon-paper font-heading font-bold text-[11px] tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_86 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-1.5 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[34px] flex items-center justify-center text-center\" };\nconst _hoisted_87 = { class: \"mt-1 flex items-center justify-between text-[10px]\" };\nconst _hoisted_88 = { class: \"text-zinc-200/85\" };\nconst _hoisted_89 = {\n    key: 1,\n    class: \"absolute inset-0 flex items-center justify-center text-xs tracking-wider\"\n};\nconst _hoisted_90 = { class: \"absolute right-0 top-14 z-40 pointer-events-auto select-none scale-[1.1] origin-top-right flex flex-col items-end gap-2\" };\nconst _hoisted_91 = { class: \"flex items-start\" };\nconst _hoisted_92 = [\"title\"];\nconst _hoisted_93 = {\n    key: 0,\n    class: \"w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-1 text-[10px] font-mono text-gray-300\"\n};\nconst _hoisted_94 = [\"innerHTML\"];\nconst _hoisted_95 = { class: \"flex items-start\" };\nconst _hoisted_96 = [\"title\"];\nconst _hoisted_97 = {\n    key: 0,\n    class: \"w-44 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-2\"\n};\nconst _hoisted_98 = { class: \"flex items-center justify-center gap-2\" };\nconst _hoisted_99 = { class: \"relative group\" };\nconst _hoisted_100 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_101 = { class: \"relative group\" };\nconst _hoisted_102 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_103 = {\n    key: 0,\n    class: \"absolute inset-0 z-[70] flex items-center justify-center pointer-events-none\"\n};\nconst _hoisted_104 = { class: \"effect-tooltip-name\" };\nconst _hoisted_105 = { class: \"effect-tooltip-desc\" };\nconst _hoisted_106 = {\n    key: 0,\n    class: \"effect-tooltip-stacks\"\n};\nconst _hoisted_107 = { class: \"flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2\" };\nconst _hoisted_108 = { class: \"font-heading text-xl text-dungeon-gold\" };\nconst _hoisted_109 = { class: \"overflow-y-auto grid grid-cols-4 gap-4 p-2\" };\nimport { Ban, Battery, Bone, Box, Brain, Bug, Droplet, Eye, EyeOff, Flame, Heart, Layers, Leaf, Link2, Scroll, Settings2, Shield, ShieldCheck, Skull, Snowflake, Sparkles, Sword, Trash2, TriangleAlert, Waves, X as XIcon, Zap, } from 'lucide-vue-next';\nimport { applyDamageToEntity, calculateFinalDamage, calculateFinalPoint, consumeColdAfterDealingDamage, triggerSwarmReviveIfNeeded } from '../battle/algorithms';\nimport { getCardByName } from '../battle/cardRegistry';\nimport { EFFECT_REGISTRY, ELEMENTAL_DEBUFF_TYPES, applyEffect, canPlayCard, getEffectStacks, processOnTurnEnd, processOnTurnStart, reduceEffectStacks, removeEffect } from '../battle/effects';\nimport { getEnemyByName } from '../battle/enemyRegistry';\nimport { resolveRelicMap, } from '../battle/relicRegistry';\nimport { getFloorNumberForArea } from '../floor';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { getLocalFolderImagePaths } from '../localAssetManifest';\nimport { CardType, CombatPhase, EffectType as ET } from '../types';\nimport { recordEncounteredCards, recordEncounteredEffects, recordEncounteredEnemy } from '../codexStore';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\n\nimport { ref, computed, reactive, onMounted, watch, onUnmounted } from 'vue';\nconst IMAGE_CDN_ROOT = 'https://img.vinsimage.org';\nconst HF_USER_DIR = '/user';\nconst HF_MONSTER_DIR = '/';\nconst SPEED_SETTING_KEY = 'dungeon.combat.speed_up';\nconst FATIGUE_DEGREE_KEY = 'dungeon.combat.fatigue_degree';\nconst FATIGUE_DEGREE_MAX = 300;\nconst DEFAULT_COMBAT_FONT_FAMILY = \"'Inter', sans-serif\";\nconst PLAYER_POISON_LETHAL_NEGATIVE_STATUS = '[]';\nconst PLAYER_SHOCK_LETHAL_NEGATIVE_STATUS = '[]';\nconst PLAYER_CORROSION_LETHAL_NEGATIVE_STATUS = '[]';\nconst HP_BAR_ANIMATION_MS = 500;\nconst RESULT_DELAY_MS = 500;\nconst RESULT_BANNER_STAY_MS = 1500;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatView',\n    props: {\n        initialPlayerStats: {},\n        enemyName: {},\n        playerDeck: {},\n        playerActiveSkills: { default: () => [] },\n        playerRelics: { default: () => ({}) },\n        testStartAt999: { type: Boolean, default: false },\n        uiFontFamily: { default: '' },\n        trackDiscovery: { type: Boolean, default: true }\n    },\n    emits: [\"endCombat\", \"openDeck\", \"openRelics\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const resolveCurrentFloorNumber = () => {\n            const area = gameStore.statData._ || '';\n            const floorFromArea = getFloorNumberForArea(area);\n            const fallback = Math.max(1, Math.floor(Number(gameStore.statData._ ?? 1)));\n            const floor = area ? floorFromArea : fallback;\n            gameStore.statData._ = floor;\n            return floor;\n        };\n        const currentFloorNumber = resolveCurrentFloorNumber();\n        // --- Enemy Loading ---\n        const enemyDef = getEnemyByName(props.enemyName, currentFloorNumber);\n        const enemyDisplayName = enemyDef?.name ?? props.enemyName;\n        // --- Portrait URLs ---\n        const BOSS_FOLDER_NAMES = new Set([\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ]);\n        const folderImageCache = new Map();\n        const folderImagePromiseCache = new Map();\n        const normalizeRepoPath = (path) => path.replace(/\\\\/g, '/').replace(/^\\/+|\\/+$/g, '');\n        const encodeRepoPath = (path) => normalizeRepoPath(path).split('/').map((seg) => encodeURIComponent(seg)).join('/');\n        const toResolveUrl = (repoPath) => `${IMAGE_CDN_ROOT}/${encodeRepoPath(repoPath)}`;\n        const pickRandom = (items) => (items.length > 0 ? items[Math.floor(Math.random() * items.length)] : null);\n        const fetchFolderImages = async (repoFolderPath) => {\n            const folder = normalizeRepoPath(repoFolderPath);\n            const cached = folderImageCache.get(folder);\n            if (cached)\n                return cached;\n            const pending = folderImagePromiseCache.get(folder);\n            if (pending)\n                return pending;\n            const task = (async () => {\n                const images = getLocalFolderImagePaths(folder);\n                folderImageCache.set(folder, images);\n                return images;\n            })();\n            folderImagePromiseCache.set(folder, task);\n            try {\n                return await task;\n            }\n            finally {\n                folderImagePromiseCache.delete(folder);\n            }\n        };\n        const playerPortraitUrl = ref(toResolveUrl(`${HF_USER_DIR}/.png`));\n        const enemyPortraitUrl = ref(toResolveUrl(`${HF_MONSTER_DIR}/${enemyDisplayName}.png`));\n        const playerPortraitError = ref(false);\n        const enemyPortraitError = ref(false);\n        let portraitLoaderDisposed = false;\n        const resolveRandomPortrait = async (folderPath, fallbackFilePath) => {\n            const images = await fetchFolderImages(folderPath);\n            const randomPath = pickRandom(images);\n            return randomPath ? toResolveUrl(randomPath) : toResolveUrl(fallbackFilePath);\n        };\n        const initPortraitUrls = async () => {\n            const playerUrl = await resolveRandomPortrait(HF_USER_DIR, `${HF_USER_DIR}/.png`);\n            if (!portraitLoaderDisposed) {\n                playerPortraitError.value = false;\n                playerPortraitUrl.value = playerUrl;\n            }\n            const enemyFolderPath = `${HF_MONSTER_DIR}/${enemyDisplayName}`;\n            const enemyFallback = `${HF_MONSTER_DIR}/${enemyDisplayName}.png`;\n            const shouldPreferFolder = BOSS_FOLDER_NAMES.has(enemyDisplayName);\n            let enemyUrl = toResolveUrl(enemyFallback);\n            if (shouldPreferFolder) {\n                enemyUrl = await resolveRandomPortrait(enemyFolderPath, enemyFallback);\n            }\n            else {\n                const folderImages = await fetchFolderImages(enemyFolderPath);\n                const randomEnemy = pickRandom(folderImages);\n                if (randomEnemy) {\n                    enemyUrl = toResolveUrl(randomEnemy);\n                }\n            }\n            if (!portraitLoaderDisposed) {\n                enemyPortraitError.value = false;\n                enemyPortraitUrl.value = enemyUrl;\n            }\n        };\n        // --- Dynamic Background ---\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const HF_BASE = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF`;\n        const currentArea = computed(() => gameStore.statData._ || '');\n        const currentRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!currentArea.value || bgImageError.value)\n                return '';\n            const isLord = currentRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${currentArea.value}_` : currentArea.value;\n            return `${HF_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (currentRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true; // fallback to normal area bg\n            }\n            else {\n                bgImageError.value = true; // give up, show gradient\n            }\n        }\n        // AI flags - mutable state for enemy AI decisions (e.g. hasUsedHeal)\n        const aiFlags = reactive({});\n        // --- State ---\n        const cloneEntityStats = (stats) => ({\n            ...stats,\n            effects: stats.effects.map((eff) => ({\n                ...eff,\n                restrictedTypes: eff.restrictedTypes ? [...eff.restrictedTypes] : undefined,\n            })),\n        });\n        const normalizeTestStartStats = (stats) => {\n            const cloned = cloneEntityStats(stats);\n            if (!props.testStartAt999)\n                return cloned;\n            return { ...cloned, hp: 999, maxHp: 999, mp: 999 };\n        };\n        const playerStats = ref(normalizeTestStartStats(props.initialPlayerStats));\n        const enemyStats = ref(normalizeTestStartStats(enemyDef\n            ? enemyDef.stats\n            : { hp: 1, maxHp: 1, mp: 0, minDice: 1, maxDice: 1, effects: [] }));\n        // --- Effect display helpers ---\n        const getEffectName = (type) => {\n            return EFFECT_REGISTRY[type]?.name ?? String(type);\n        };\n        const getEffectDescription = (type) => {\n            return EFFECT_REGISTRY[type]?.description ?? '';\n        };\n        const createStatusEffectPreview = (type, stacks) => ({\n            type,\n            stacks: Math.max(1, Math.floor(stacks)),\n            polarity: EFFECT_REGISTRY[type]?.polarity ?? 'special',\n        });\n        const EFFECT_FA_ICON_CLASS = {\n            [ET.BARRIER]: 'fa-brands fa-fediverse',\n            [ET.ARMOR]: 'fa-solid fa-shield-halved',\n            [ET.BIND]: 'fa-solid fa-link',\n            [ET.DEVOUR]: 'fa-brands fa-optin-monster',\n            [ET.POISON]: 'fa-solid fa-virus',\n            [ET.POISON_AMOUNT]: 'fa-solid fa-bacterium',\n            [ET.CORROSION]: 'fa-brands fa-cloudscale',\n            [ET.BURN]: 'fa-solid fa-fire',\n            [ET.BLEED]: 'fa-solid fa-droplet',\n            [ET.VULNERABLE]: 'fa-brands fa-linode',\n            [ET.DAMAGE_BOOST]: 'fa-brands fa-superpowers',\n            [ET.REGEN]: 'fa-brands fa-medrt',\n            [ET.WHITE_TURBID]: 'fa-solid fa-droplet',\n            [ET.IGNITE_AURA]: 'fa-solid fa-fire-flame-simple',\n            [ET.STUN]: 'fa-solid fa-ban',\n            [ET.CHARGE]: 'fa-solid fa-exclamation',\n            [ET.FATIGUE]: 'fa-solid fa-bed',\n            [ET.COLD]: 'fa-regular fa-snowflake',\n            [ET.TEMPERATURE_DIFF]: 'fa-brands fa-empire',\n            [ET.NON_LIVING]: 'fa-solid fa-skull',\n            [ET.NON_ENTITY]: 'fa-solid fa-ghost',\n            [ET.ILLUSORY_BODY]: 'fa-solid fa-ghost',\n            [ET.TEMP_MAX_HP]: 'fa-solid fa-heart',\n            [ET.MAX_HP_REDUCTION]: 'fa-solid fa-heart-pulse',\n            [ET.POINT_GROWTH_BIG]: 'fa-solid fa-dice fa-lg',\n            [ET.POINT_GROWTH_SMALL]: 'fa-solid fa-dice fa-sm',\n            [ET.MANA_DRAIN]: 'fa-solid fa-battery-empty',\n            [ET.MANA_SPRING]: 'fa-brands fa-drupal',\n            [ET.SWARM]: 'fa-solid fa-bugs',\n            [ET.BLOOD_COCOON]: 'fa-brands fa-battle-net',\n            [ET.INDOMITABLE]: 'fa-solid fa-shield',\n            [ET.PEEP_FORBIDDEN]: 'fa-solid fa-eye',\n            [ET.BLIND_ASH]: 'fa-regular fa-eye-slash',\n            [ET.COGNITIVE_INTERFERENCE]: 'fa-solid fa-hamsa',\n            [ET.MEMORY_FOG]: 'fa-brands fa-phabricator',\n            [ET.SILENCE]: 'fa-solid fa-circle-xmark',\n            [ET.STURDY]: 'fa-solid fa-user-shield',\n            [ET.SHOCK]: 'fa-solid fa-bolt',\n            [ET.FLAME_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.POISON_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.TOXIN_SPREAD]: 'fa-brands fa-hornbill',\n            [ET.AMBUSH]: 'fa-solid fa-user-secret',\n            [ET.FROST_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.BLOODBLADE_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.LIGHTNING_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.THORNS]: 'fa-solid fa-leaf',\n            [ET.INK_CREATION]: 'fa-solid fa-feather-pointed',\n        };\n        const EFFECT_FA_ICON_STYLE = {\n            [ET.FLAME_ATTACH]: { color: 'rgb(255, 64, 64)' },\n            [ET.POISON_ATTACH]: { color: 'rgb(81, 255, 116)' },\n            [ET.FROST_ATTACH]: { color: 'rgb(108, 230, 255)' },\n            [ET.BLOODBLADE_ATTACH]: { color: 'rgb(176, 0, 0)' },\n            [ET.LIGHTNING_ATTACH]: { color: 'rgb(201, 69, 255)' },\n            [ET.TEMP_MAX_HP]: { color: 'rgb(255, 120, 150)' },\n            [ET.ILLUSORY_BODY]: {\n                '--fa-primary-color': 'rgb(255, 255, 255)',\n                '--fa-secondary-color': 'rgb(255, 255, 255)',\n            },\n        };\n        const getEffectFontAwesomeClass = (type) => EFFECT_FA_ICON_CLASS[type] ?? null;\n        const getEffectFontAwesomeStyle = (type) => EFFECT_FA_ICON_STYLE[type];\n        const EFFECT_ICON_COMPONENTS = {\n            [ET.BARRIER]: ShieldCheck,\n            [ET.ARMOR]: Shield,\n            [ET.BIND]: Link2,\n            [ET.DEVOUR]: Skull,\n            [ET.POISON]: Bug,\n            [ET.POISON_AMOUNT]: Droplet,\n            [ET.CORROSION]: Droplet,\n            [ET.BURN]: Flame,\n            [ET.BLEED]: Droplet,\n            [ET.VULNERABLE]: TriangleAlert,\n            [ET.DAMAGE_BOOST]: Sword,\n            [ET.REGEN]: Heart,\n            [ET.WHITE_TURBID]: Droplet,\n            [ET.IGNITE_AURA]: Sparkles,\n            [ET.STUN]: Ban,\n            [ET.CHARGE]: Zap,\n            [ET.FATIGUE]: TriangleAlert,\n            [ET.COLD]: Snowflake,\n            [ET.TEMPERATURE_DIFF]: Waves,\n            [ET.NON_LIVING]: Bone,\n            [ET.NON_ENTITY]: Sparkles,\n            [ET.ILLUSORY_BODY]: Sparkles,\n            [ET.TEMP_MAX_HP]: Heart,\n            [ET.MAX_HP_REDUCTION]: Heart,\n            [ET.POINT_GROWTH_BIG]: Layers,\n            [ET.POINT_GROWTH_SMALL]: Layers,\n            [ET.MANA_DRAIN]: Battery,\n            [ET.MANA_SPRING]: Waves,\n            [ET.SWARM]: Bug,\n            [ET.BLOOD_COCOON]: Heart,\n            [ET.INDOMITABLE]: Heart,\n            [ET.PEEP_FORBIDDEN]: Eye,\n            [ET.BLIND_ASH]: EyeOff,\n            [ET.COGNITIVE_INTERFERENCE]: Brain,\n            [ET.MEMORY_FOG]: EyeOff,\n            [ET.SILENCE]: Ban,\n            [ET.STURDY]: Shield,\n            [ET.SHOCK]: Zap,\n            [ET.FLAME_ATTACH]: Flame,\n            [ET.POISON_ATTACH]: Bug,\n            [ET.TOXIN_SPREAD]: Bug,\n            [ET.AMBUSH]: Link2,\n            [ET.FROST_ATTACH]: Snowflake,\n            [ET.BLOODBLADE_ATTACH]: Droplet,\n            [ET.LIGHTNING_ATTACH]: Zap,\n            [ET.THORNS]: Leaf,\n            [ET.INK_CREATION]: Scroll,\n        };\n        const getEffectIconComponent = (type) => {\n            return EFFECT_ICON_COMPONENTS[type] ?? Sparkles;\n        };\n        const effectIconBoxClass = (polarity) => {\n            switch (polarity) {\n                case 'buff': return 'bg-emerald-900/65 border-emerald-400/50 text-emerald-200';\n                case 'debuff': return 'bg-red-900/65 border-red-400/55 text-red-200';\n                case 'trait': return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n                case 'mixed': return 'bg-indigo-900/70 border-indigo-400/55 text-indigo-200';\n                case 'special': return 'bg-amber-900/70 border-amber-400/55 text-amber-200';\n                default: return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n            }\n        };\n        // --- Armor computed ---\n        const playerArmor = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyArmor = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmount = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const enemyPoisonAmount = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const playerTempMaxHp = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.TEMP_MAX_HP);\n            return eff?.stacks ?? 0;\n        });\n        const enemyTempMaxHp = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.TEMP_MAX_HP);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmountPercent = computed(() => {\n            if (playerStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((playerPoisonAmount.value / playerStats.value.maxHp) * 100, 100));\n        });\n        const enemyPoisonAmountPercent = computed(() => {\n            if (enemyStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((enemyPoisonAmount.value / enemyStats.value.maxHp) * 100, 100));\n        });\n        const playerVisibleEffects = computed(() => playerStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT && e.type !== ET.TEMP_MAX_HP));\n        const enemyVisibleEffects = computed(() => enemyStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT && e.type !== ET.TEMP_MAX_HP));\n        const cloneCardForBattle = (card) => ({\n            ...card,\n            calculation: { ...card.calculation },\n            damageLogic: { ...card.damageLogic },\n            traits: { ...card.traits },\n            selfDamage: typeof card.selfDamage === 'object' && card.selfDamage !== null\n                ? { ...card.selfDamage }\n                : card.selfDamage,\n            cardEffects: card.cardEffects.map((ce) => ({\n                ...ce,\n                triggers: ce.triggers ? [...ce.triggers] : undefined,\n                restrictedTypes: ce.restrictedTypes ? [...ce.restrictedTypes] : undefined,\n                cleanseTypes: ce.cleanseTypes ? [...ce.cleanseTypes] : undefined,\n            })),\n        });\n        const toBattleDeck = (cards) => cards.map(cloneCardForBattle);\n        const enemyDeck = enemyDef ? toBattleDeck(enemyDef.deck) : [];\n        // dummy card to prevent crash if enemy has no cards\n        const PASS_CARD = {\n            id: 'pass', name: '', type: CardType.FUNCTION, category: '', rarity: '', manaCost: 0,\n            calculation: { multiplier: 0, addition: 0 }, damageLogic: { mode: 'fixed', value: 0 },\n            traits: { combo: false, reroll: 'none', draw: false }, cardEffects: [], description: '',\n        };\n        const combatState = ref({\n            turn: 1,\n            phase: CombatPhase.TURN_START,\n            actionsRemaining: 1,\n            playerBaseDice: 1,\n            enemyBaseDice: 1,\n            playerHand: [],\n            playerDeck: toBattleDeck(props.playerDeck).sort(() => Math.random() - 0.5),\n            discardPile: [],\n            enemyDeck: [...enemyDeck],\n            enemyDiscard: [],\n            enemyIntentCard: null,\n            enemyPredictedPoint: 0,\n            playerSelectedCard: null,\n            lastPlayedCard: null,\n            logs: [` <span class=\"text-red-500 font-bold\">${enemyDisplayName}</span>`],\n        });\n        const recordCombatDiscoveryAtStart = () => {\n            if (!props.trackDiscovery)\n                return;\n            recordEncounteredEnemy({\n                name: enemyDisplayName || props.enemyName,\n                floor: currentFloorNumber,\n                area: currentArea.value || '',\n            });\n            recordEncounteredCards([\n                ...combatState.value.playerDeck.map((card) => card.id),\n                ...combatState.value.enemyDeck.map((card) => card.id),\n            ]);\n        };\n        const recordCombatEffectDiscovery = () => {\n            if (!props.trackDiscovery)\n                return;\n            recordEncounteredEffects([\n                ...playerStats.value.effects.map((effect) => effect.type),\n                ...enemyStats.value.effects.map((effect) => effect.type),\n            ]);\n        };\n        onMounted(() => {\n            recordCombatDiscoveryAtStart();\n            recordCombatEffectDiscovery();\n        });\n        watch(() => [playerStats.value.effects, enemyStats.value.effects], () => {\n            recordCombatEffectDiscovery();\n        }, { deep: true });\n        // \n        const playerTurnRawDice = ref(1);\n        const enemyTurnRawDice = ref(1);\n        const isRolling = ref(false);\n        const showClashAnimation = ref(false);\n        const shatteringTarget = ref(null);\n        const screenShake = ref(false);\n        const impactShake = ref(false);\n        const overlayOpen = ref(null);\n        const settingsOpen = ref(false);\n        const battleSpeedUp = ref(false);\n        const logsCollapsed = ref(true);\n        const pilesCollapsed = ref(true);\n        const battleResultBanner = ref(null);\n        const endCombatPending = ref(false);\n        const enemyIntentConsumedThisTurn = ref(false);\n        const enemyIntentManaSpentThisTurn = ref(false);\n        const combatRootEl = ref(null);\n        const effectTooltip = ref(null);\n        const speedMultiplier = computed(() => (battleSpeedUp.value ? 2 : 1));\n        const combatFontFamily = computed(() => {\n            const value = props.uiFontFamily?.trim();\n            return value && value.length > 0 ? value : DEFAULT_COMBAT_FONT_FAMILY;\n        });\n        const combatRootStyle = computed(() => ({\n            '--combat-speed-multiplier': String(speedMultiplier.value),\n            '--font-ui': combatFontFamily.value,\n            '--font-heading': combatFontFamily.value,\n            fontFamily: combatFontFamily.value,\n        }));\n        const floatingNumbers = ref([]);\n        const pendingCardNegativeEffects = ref([]);\n        const fatigueDegree = ref(0);\n        const fatigueHelpVisible = ref(false);\n        const fatigueDegreeRatio = computed(() => (Math.max(0, Math.min(fatigueDegree.value / FATIGUE_DEGREE_MAX, 1))));\n        const fatigueDegreePercent = computed(() => fatigueDegreeRatio.value * 100);\n        const fatigueBarOpacityRatio = computed(() => {\n            if (fatigueDegree.value <= 50)\n                return 0;\n            return Math.max(0, Math.min((fatigueDegree.value - 50) / (FATIGUE_DEGREE_MAX - 50), 1));\n        });\n        const fatigueBarStyle = computed(() => ({ opacity: String(fatigueBarOpacityRatio.value) }));\n        const showFatigueHelp = () => {\n            fatigueHelpVisible.value = fatigueDegree.value > 50;\n        };\n        const hideFatigueHelp = () => {\n            fatigueHelpVisible.value = false;\n        };\n        const queuePlayerLethalNegativeStatus = (negativeStatus, reason) => {\n            const normalized = negativeStatus.trim();\n            if (!normalized)\n                return;\n            if (pendingCardNegativeEffects.value.includes(normalized))\n                return;\n            pendingCardNegativeEffects.value.push(normalized);\n            log(`<span class=\"text-fuchsia-300\">${reason}${normalized}</span>`);\n        };\n        const lightningAmbushFirstUseConsumed = ref({\n            player: false,\n            enemy: false,\n        });\n        const previewPlayerDice = ref(null);\n        const previewEnemyDice = ref(null);\n        const playerDicePreviewLines = ref([]);\n        const enemyDicePreviewLines = ref([]);\n        const playerDicePreviewCardName = ref('');\n        const enemyDicePreviewCardName = ref('');\n        const playerDiceUiNoise = ref(0);\n        const enemyDiceUiNoise = ref(0);\n        const comboUiMaskBridge = ref(false);\n        const isUiMaskingActive = computed(() => (combatState.value.phase === CombatPhase.PLAYER_INPUT || comboUiMaskBridge.value));\n        const isPlayerDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.BLIND_ASH) > 0));\n        const isEnemyDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.PEEP_FORBIDDEN) > 0));\n        const rerollUiNoise = () => Math.floor(Math.random() * 3) - 1;\n        const displayPlayerDice = computed(() => {\n            const base = previewPlayerDice.value ?? combatState.value.playerBaseDice;\n            if (!isPlayerDiceObscured.value)\n                return base;\n            return Math.max(0, base + playerDiceUiNoise.value);\n        });\n        const displayEnemyDice = computed(() => {\n            const base = previewEnemyDice.value ?? combatState.value.enemyBaseDice;\n            if (!isEnemyDiceObscured.value)\n                return base;\n            return Math.max(0, base + enemyDiceUiNoise.value);\n        });\n        const canPlayerRerollDice = computed(() => (playerDiceRerollCharges.value > 0\n            && combatState.value.phase === CombatPhase.PLAYER_INPUT\n            && !isRolling.value\n            && !showClashAnimation.value\n            && !endCombatPending.value));\n        const playerDiceRerollHint = computed(() => {\n            if (playerDiceRerollCharges.value <= 0)\n                return '';\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return '';\n            if (isRolling.value || showClashAnimation.value)\n                return '';\n            if (endCombatPending.value)\n                return '';\n            return `${playerDiceRerollCharges.value}`;\n        });\n        const playerDicePreviewChanged = computed(() => (previewPlayerDice.value !== null && previewPlayerDice.value !== combatState.value.playerBaseDice));\n        const enemyDicePreviewChanged = computed(() => (previewEnemyDice.value !== null && previewEnemyDice.value !== combatState.value.enemyBaseDice));\n        const playerDiceNumberClass = computed(() => {\n            if (isPlayerDiceObscured.value)\n                return 'text-violet-400';\n            return playerDicePreviewChanged.value ? 'text-red-800' : '';\n        });\n        const enemyDiceNumberClass = computed(() => {\n            if (isEnemyDiceObscured.value)\n                return 'text-violet-400';\n            return enemyDicePreviewChanged.value ? 'text-[#b08a2e]' : '';\n        });\n        const dicePreviewPanels = computed(() => {\n            const panels = [];\n            if (previewPlayerDice.value !== null && !isPlayerDiceObscured.value && playerDicePreviewLines.value.length > 0) {\n                panels.push({\n                    key: 'player',\n                    title: `  ${playerDicePreviewCardName.value || ''}`,\n                    finalPoint: previewPlayerDice.value,\n                    lines: playerDicePreviewLines.value,\n                });\n            }\n            if (previewEnemyDice.value !== null && !isEnemyDiceObscured.value && enemyDicePreviewLines.value.length > 0) {\n                panels.push({\n                    key: 'enemy',\n                    title: `  ${enemyDicePreviewCardName.value || ''}`,\n                    finalPoint: previewEnemyDice.value,\n                    lines: enemyDicePreviewLines.value,\n                });\n            }\n            return panels;\n        });\n        const enemyIntentMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.COGNITIVE_INTERFERENCE) > 0\n            ? 'full'\n            : 'none'));\n        const playerHandMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.MEMORY_FOG) > 0\n            ? 'partial'\n            : 'none'));\n        const playerPlayedCardVisual = ref(null);\n        const resolvedPlayerCardVisual = ref(null);\n        const resolvedEnemyCardVisual = ref(null);\n        const resolvedCardVisualEntries = computed(() => ([resolvedPlayerCardVisual.value, resolvedEnemyCardVisual.value]\n            .filter((visual) => !!visual)));\n        let hoverPreviewTimer = null;\n        let enemyDicePreviewTimer = null;\n        let effectTooltipLongPressTimer = null;\n        let effectTooltipAutoHideTimer = null;\n        let floatingNumberId = 0;\n        let handCardKeySeed = 0;\n        let playerPlayedCardVisualId = 0;\n        let resolvedCardVisualId = 0;\n        let animationStopToken = 0;\n        let endCombatSequenceToken = 0;\n        let enemyManaLackHintTurn = -1;\n        const handCardKeys = new WeakMap();\n        const invalidCardShakeKeys = ref(new Set());\n        const normalizePersistedInt = (value) => {\n            const parsed = Number(value);\n            if (!Number.isFinite(parsed))\n                return 0;\n            return Math.max(0, Math.floor(parsed));\n        };\n        const setFatigueDegree = (next) => {\n            const normalized = normalizePersistedInt(next);\n            fatigueDegree.value = normalized;\n            localStorage.setItem(FATIGUE_DEGREE_KEY, String(normalized));\n        };\n        const loadFatigueDegree = () => {\n            const stored = localStorage.getItem(FATIGUE_DEGREE_KEY);\n            setFatigueDegree(normalizePersistedInt(stored ?? 0));\n        };\n        const addFatigueDegree = (delta) => {\n            const amount = Math.max(0, Math.floor(delta));\n            if (amount <= 0)\n                return;\n            setFatigueDegree(fatigueDegree.value + amount);\n        };\n        // Default relic modifiers (no relics yet)\n        const NO_RELIC_MOD = { globalMultiplier: 1, globalAddition: 0 };\n        const activePlayerRelics = resolveRelicMap(props.playerRelics);\n        const playerDiceRerollCharges = ref(0);\n        const relicRuntimeState = reactive({});\n        const playerDamageTakenThisTurn = ref(0);\n        const freezePumpTriggersThisTurn = ref(0);\n        const freezeFlowCoreTriggeredThisTurn = ref(false);\n        const sealCircuitPendingMana = ref(0);\n        const modaoStabilizerTriggersThisTurn = ref(0);\n        const bloodpoolSkinMarkTriggersThisTurn = ref(0);\n        const bloodpoolFirstBleedFeastTriggered = ref(false);\n        const bloodpoolCriticalReboundTriggered = ref(false);\n        const nextMagicDoubleCast = ref({\n            player: 0,\n            enemy: 0,\n        });\n        const nextTurnMagicCostFree = ref({\n            player: 0,\n            enemy: 0,\n        });\n        const getEntityBySide = (side) => (side === 'player' ? playerStats.value : enemyStats.value);\n        const getRelicRuntimeState = (relicId) => {\n            if (!relicRuntimeState[relicId]) {\n                relicRuntimeState[relicId] = {};\n            }\n            return relicRuntimeState[relicId];\n        };\n        const hasActiveRelic = (id) => activePlayerRelics.some((entry) => entry.relic.id === id && entry.count > 0);\n        const getActiveRelicCount = (id) => (activePlayerRelics.find((entry) => entry.relic.id === id)?.count ?? 0);\n        const changeRerollCharges = (side, delta) => {\n            if (side !== 'player')\n                return;\n            playerDiceRerollCharges.value = Math.max(0, playerDiceRerollCharges.value + Math.floor(delta));\n        };\n        const consumeRerollCharge = (side, amount = 1) => {\n            if (side !== 'player')\n                return false;\n            const need = Math.max(1, Math.floor(amount));\n            if (playerDiceRerollCharges.value < need)\n                return false;\n            playerDiceRerollCharges.value -= need;\n            return true;\n        };\n        const getRerollCharges = (side) => {\n            if (side !== 'player')\n                return 0;\n            return playerDiceRerollCharges.value;\n        };\n        const forEachPlayerRelic = (callback) => {\n            for (const entry of activePlayerRelics) {\n                callback(entry, entry.relic, getRelicRuntimeState(entry.relic.id));\n            }\n        };\n        const logRelicMessage = (message) => {\n            log(`<span class=\"text-amber-300 text-[9px]\">[] ${message}</span>`);\n        };\n        const addPlayerDamageTakenThisTurn = (amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return;\n            playerDamageTakenThisTurn.value += value;\n        };\n        const applyPlayerSkinMarkDamageReduction = (rawDamage, reason) => {\n            const damage = Math.max(0, Math.floor(rawDamage));\n            if (damage <= 0)\n                return 0;\n            const markCount = getActiveRelicCount('bloodpool_skin_mark');\n            if (markCount <= 0)\n                return damage;\n            if (bloodpoolSkinMarkTriggersThisTurn.value >= 2)\n                return damage;\n            const reduced = Math.min(damage, markCount);\n            if (reduced <= 0)\n                return damage;\n            bloodpoolSkinMarkTriggersThisTurn.value += 1;\n            logRelicMessage(`[] ${reason} -${reduced} ${bloodpoolSkinMarkTriggersThisTurn.value}/2`);\n            return damage - reduced;\n        };\n        const applyPlayerHemostaticValveDamageCap = (rawDamage, reason) => {\n            const damage = Math.max(0, Math.floor(rawDamage));\n            if (damage <= 0)\n                return 0;\n            if (getActiveRelicCount('bloodpool_hemostatic_valve') <= 0)\n                return damage;\n            const capped = Math.min(10, damage);\n            if (capped < damage) {\n                logRelicMessage(`[] ${reason} ${damage}  ${capped}`);\n            }\n            return capped;\n        };\n        const applyDamageToSideWithRelics = (side, target, damage, isTrueDamage, reason) => {\n            const incoming = Math.max(0, Math.floor(damage));\n            const adjusted = side === 'player'\n                ? applyPlayerHemostaticValveDamageCap(incoming, reason)\n                : incoming;\n            return applyDamageToEntity(target, adjusted, isTrueDamage);\n        };\n        const applyDirectHpLossWithRelics = (side, target, damage, reason) => {\n            const incoming = Math.max(0, Math.floor(damage));\n            if (incoming <= 0)\n                return 0;\n            const adjusted = side === 'player'\n                ? applyPlayerHemostaticValveDamageCap(incoming, reason)\n                : incoming;\n            const before = target.hp;\n            target.hp = Math.max(0, target.hp - adjusted);\n            return Math.max(0, before - target.hp);\n        };\n        const handlePlayerArmorGainFromSingleEvent = (amount, source) => {\n            const gained = Math.max(0, Math.floor(amount));\n            if (gained <= 0)\n                return;\n            const relicCount = getActiveRelicCount('yanhan_freeze_flow_core');\n            if (relicCount <= 0)\n                return;\n            if (freezeFlowCoreTriggeredThisTurn.value)\n                return;\n            if (gained < 5)\n                return;\n            const restored = restoreManaForSide('player', relicCount);\n            if (restored <= 0)\n                return;\n            freezeFlowCoreTriggeredThisTurn.value = true;\n            logRelicMessage(`[] ${source}5 ${restored} `);\n        };\n        const addArmorForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const added = applyEffect(target, ET.ARMOR, value, { source: 'relic' }) ? value : 0;\n            if (added > 0) {\n                pushFloatingNumber(side, added, 'shield', '+');\n                if (side === 'player') {\n                    handlePlayerArmorGainFromSingleEvent(added, '');\n                }\n            }\n            return added;\n        };\n        const tryTriggerModaoStabilizer = (side, actualDelta, reason) => {\n            if (side !== 'player')\n                return;\n            if (actualDelta < 3)\n                return;\n            const stabilizerCount = getActiveRelicCount('modao_stabilizer_pin');\n            if (stabilizerCount <= 0)\n                return;\n            if (modaoStabilizerTriggersThisTurn.value >= 2)\n                return;\n            const gained = addArmorForSide('player', stabilizerCount);\n            if (gained <= 0)\n                return;\n            modaoStabilizerTriggersThisTurn.value += 1;\n            logRelicMessage(`[] ${reason} ${actualDelta} ${gained}  ${modaoStabilizerTriggersThisTurn.value}/2`);\n        };\n        const restoreManaForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const before = target.mp;\n            target.mp = Math.max(0, target.mp + value);\n            const delta = target.mp - before;\n            if (delta > 0) {\n                pushFloatingNumber(side, delta, 'mana', '+');\n                tryTriggerModaoStabilizer(side, delta, '/');\n            }\n            return delta;\n        };\n        const healForSide = (side, amount, options) => {\n            const baseValue = Math.max(0, Math.floor(amount));\n            if (baseValue <= 0)\n                return { healed: 0, overflow: 0 };\n            let value = baseValue;\n            if (side === 'player') {\n                const healAmpCount = getActiveRelicCount('bloodpool_crimson_plasma');\n                if (healAmpCount > 0) {\n                    value = Math.max(0, Math.floor(value * (1 + 0.25 * healAmpCount)));\n                }\n            }\n            if (value <= 0)\n                return { healed: 0, overflow: 0 };\n            const target = getEntityBySide(side);\n            const before = target.hp;\n            target.hp = Math.max(0, Math.min(target.maxHp, target.hp + value));\n            const healed = target.hp - before;\n            const overflowRaw = Math.max(0, value - healed);\n            if (healed > 0) {\n                pushFloatingNumber(side, healed, 'heal', '+');\n            }\n            if (options?.overflowToArmor && overflowRaw > 0) {\n                addArmorForSide(side, overflowRaw);\n            }\n            if (side === 'player' && healed > 0) {\n                const reflowCount = getActiveRelicCount('bloodpool_reflow_mark');\n                if (reflowCount > 0) {\n                    const state = getRelicRuntimeState('bloodpool_reflow_mark');\n                    const current = Math.max(0, Math.floor(Number(state['healTriggersThisTurn'] ?? 0)));\n                    const cap = Math.max(0, 2 * reflowCount);\n                    if (current < cap) {\n                        const next = Math.min(cap, current + 1);\n                        state['healTriggersThisTurn'] = next;\n                    }\n                }\n            }\n            return { healed, overflow: overflowRaw };\n        };\n        const shouldAllowStatusEffectWithRelics = (targetSide, effectType, stacks, options) => {\n            let allowed = true;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                if (!allowed)\n                    return;\n                const hook = relic.hooks?.onBeforeApplyEffect;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    self: playerStats.value,\n                    opponent: enemyStats.value,\n                    state,\n                    addLog: logRelicMessage,\n                    hasRelic: hasActiveRelic,\n                    getRelicCount: getActiveRelicCount,\n                    addStatusEffect: (side, targetEffectType, targetStacks, applyOptions) => (applyStatusEffectWithRelics(side, targetEffectType, targetStacks, applyOptions)),\n                    addArmor: addArmorForSide,\n                    restoreMana: restoreManaForSide,\n                    heal: healForSide,\n                    addRerollCharges: changeRerollCharges,\n                    getRerollCharges,\n                    targetSide,\n                    target,\n                    effectType,\n                    stacks,\n                    source: options?.source,\n                    restrictedTypes: options?.restrictedTypes,\n                };\n                const result = hook(ctx);\n                if (result === false) {\n                    allowed = false;\n                }\n            });\n            return allowed;\n        };\n        const applyStatusEffectWithRelics = (side, effectType, stacks, options) => {\n            const value = Math.max(0, Math.floor(stacks));\n            if (value <= 0)\n                return false;\n            if (!shouldAllowStatusEffectWithRelics(side, effectType, value, options))\n                return false;\n            const target = getEntityBySide(side);\n            const hpBeforeApply = target.hp;\n            const applied = applyEffect(target, effectType, value, {\n                restrictedTypes: options?.restrictedTypes,\n                source: options?.source,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            });\n            if (applied\n                && side === 'player'\n                && effectType === ET.CORROSION\n                && hpBeforeApply > 0\n                && target.hp <= 0) {\n                log('<span class=\"text-red-400\">[] </span>');\n                queuePlayerLethalNegativeStatus(PLAYER_CORROSION_LETHAL_NEGATIVE_STATUS, '');\n            }\n            if (applied && side === 'enemy' && effectType === ET.COLD) {\n                const sourceTag = options?.source ?? '';\n                const fromEnemyCard = typeof sourceTag === 'string' && sourceTag.startsWith('enemy_');\n                const freezePumpCount = getActiveRelicCount('yanhan_freeze_pump');\n                if (!fromEnemyCard && freezePumpCount > 0 && freezePumpTriggersThisTurn.value < 2) {\n                    const gained = addArmorForSide('player', freezePumpCount);\n                    if (gained > 0) {\n                        freezePumpTriggersThisTurn.value += 1;\n                        logRelicMessage(`[]  ${gained}  ${freezePumpTriggersThisTurn.value}/2`);\n                    }\n                }\n            }\n            return applied;\n        };\n        const createPlayerLifecycleContext = (relic, count, state) => ({\n            count,\n            side: 'player',\n            self: playerStats.value,\n            opponent: enemyStats.value,\n            state,\n            addLog: logRelicMessage,\n            hasRelic: hasActiveRelic,\n            getRelicCount: getActiveRelicCount,\n            addStatusEffect: (side, effectType, stacks, options) => (applyStatusEffectWithRelics(side, effectType, stacks, {\n                source: options?.source ?? `relic:${relic.id}`,\n                restrictedTypes: options?.restrictedTypes,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            })),\n            addArmor: addArmorForSide,\n            restoreMana: restoreManaForSide,\n            heal: healForSide,\n            addRerollCharges: changeRerollCharges,\n            getRerollCharges,\n        });\n        const triggerPlayerRelicLifecycleHooks = (hookName) => {\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.[hookName];\n                if (!hook)\n                    return;\n                hook(createPlayerLifecycleContext(relic, entry.count, state));\n            });\n        };\n        const triggerPlayerRelicBeforeBurnDamageHooks = (targetSide, burnStacks, damage, turn) => {\n            let currentDamage = Math.max(0, Math.floor(damage));\n            let isTrueDamage = false;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onBeforeBurnDamage;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: currentDamage,\n                    isTrueDamage,\n                };\n                hook(ctx);\n                currentDamage = Math.max(0, Math.floor(ctx.damage));\n                isTrueDamage = !!ctx.isTrueDamage;\n            });\n            return { damage: currentDamage, isTrueDamage };\n        };\n        const triggerPlayerRelicAfterBurnDamageTakenHooks = (targetSide, burnStacks, damage, isTrueDamage, turn) => {\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onAfterBurnDamageTaken;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: Math.max(0, Math.floor(damage)),\n                    isTrueDamage,\n                };\n                hook(ctx);\n            });\n        };\n        const triggerPlayerRelicHitHooks = (sourceSide, targetSide, card, finalPoint, hitIndex, hitCount, attemptedDamage, actualDamage) => {\n            const source = getEntityBySide(sourceSide);\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    sourceSide,\n                    targetSide,\n                    source,\n                    target,\n                    card,\n                    finalPoint,\n                    hitIndex,\n                    hitCount,\n                    attemptedDamage: Math.max(0, Math.floor(attemptedDamage)),\n                    actualDamage: Math.max(0, Math.floor(actualDamage)),\n                };\n                relic.hooks?.onAfterHitDealt?.(ctx);\n                relic.hooks?.onAfterHitTaken?.(ctx);\n            });\n        };\n        // --- Helpers ---\n        const scaleDuration = (ms) => Math.max(60, Math.floor(ms / speedMultiplier.value));\n        const wait = (ms) => new Promise((resolve) => setTimeout(resolve, scaleDuration(ms)));\n        const transitionStyle = (ms) => ({ transitionDuration: `${scaleDuration(ms)}ms` });\n        const withTransition = (style, ms) => ({\n            ...style,\n            transitionDuration: `${scaleDuration(ms)}ms`,\n        });\n        const playerPlayedCardStyle = computed(() => {\n            const visual = playerPlayedCardVisual.value;\n            const entered = !!visual?.entered;\n            return {\n                left: entered ? '29%' : '50%',\n                top: entered ? '23%' : '84%',\n                transform: `translate(-50%, -50%) scale(${entered ? 1 : 0.96})`,\n                opacity: entered ? '1' : '0',\n                transitionProperty: 'left, top, transform, opacity',\n                transitionDuration: `${scaleDuration(540)}ms`,\n                transitionTimingFunction: 'cubic-bezier(0.22, 0.9, 0.2, 1)',\n            };\n        });\n        const resolvedCardVisualInnerClass = (visual) => {\n            const sideClass = visual.source === 'player'\n                ? 'resolved-card-visual-inner--player'\n                : 'resolved-card-visual-inner--enemy';\n            const variantClass = visual.variant === 'attack'\n                ? 'resolved-card-visual-inner--attack'\n                : (visual.variant === 'self'\n                    ? 'resolved-card-visual-inner--self'\n                    : 'resolved-card-visual-inner--fade');\n            return `${sideClass} ${variantClass}`;\n        };\n        const showEnemyIntentCard = computed(() => {\n            if (!combatState.value.enemyIntentCard)\n                return false;\n            if (enemyIntentConsumedThisTurn.value)\n                return false;\n            return !resolvedEnemyCardVisual.value;\n        });\n        const floatingColors = {\n            physical: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            magic: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            shield: 'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',\n            heal: 'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',\n            mana: 'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',\n            true: 'text-zinc-500 drop-shadow-[0_0_8px_rgba(39,39,42,0.9)]',\n        };\n        const floatingNumbersFor = (side) => floatingNumbers.value.filter((entry) => entry.side === side);\n        const handCardKey = (card) => {\n            let key = handCardKeys.get(card);\n            if (!key) {\n                handCardKeySeed += 1;\n                key = `hand-${handCardKeySeed}`;\n                handCardKeys.set(card, key);\n            }\n            return key;\n        };\n        const isCardShaking = (card) => invalidCardShakeKeys.value.has(handCardKey(card));\n        const triggerInvalidCardShake = (card) => {\n            const key = handCardKey(card);\n            const withoutKey = new Set(invalidCardShakeKeys.value);\n            withoutKey.delete(key);\n            invalidCardShakeKeys.value = withoutKey;\n            requestAnimationFrame(() => {\n                const next = new Set(invalidCardShakeKeys.value);\n                next.add(key);\n                invalidCardShakeKeys.value = next;\n                setTimeout(() => {\n                    const removed = new Set(invalidCardShakeKeys.value);\n                    removed.delete(key);\n                    invalidCardShakeKeys.value = removed;\n                }, scaleDuration(360));\n            });\n        };\n        const resolveTargetSide = (source, target) => {\n            if (target === 'self')\n                return source;\n            return source === 'player' ? 'enemy' : 'player';\n        };\n        const removeCardsById = (cards, cardId) => (cards.filter((card) => card.id !== cardId));\n        const removeSingleCardById = (cards, cardId) => {\n            let removed = false;\n            return cards.filter((card) => {\n                if (!removed && card.id === cardId) {\n                    removed = true;\n                    return false;\n                }\n                return true;\n            });\n        };\n        const insertCardIntoDeckRandomly = (deck, card) => {\n            const index = Math.floor(Math.random() * (deck.length + 1));\n            return [...deck.slice(0, index), card, ...deck.slice(index)];\n        };\n        const applyPurgeTraitAfterUse = (source, card) => {\n            if (!card.traits.purgeOnUse)\n                return;\n            if (source === 'player') {\n                combatState.value.discardPile = removeSingleCardById(combatState.value.discardPile, card.id);\n            }\n            else {\n                combatState.value.enemyDeck = removeSingleCardById(combatState.value.enemyDeck, card.id);\n                combatState.value.enemyDiscard = removeSingleCardById(combatState.value.enemyDiscard, card.id);\n            }\n            log(`<span class=\"text-zinc-300\">${card.name}</span>`);\n        };\n        const applyInsertTrait = (source, card) => {\n            const toInsert = card.traits.insertCardsToEnemyDeck ?? [];\n            if (toInsert.length <= 0)\n                return;\n            const sourceLabel = source === 'player' ? '' : '';\n            const targetSide = source === 'player' ? 'enemy' : 'player';\n            for (const cardName of toInsert) {\n                const inserted = getCardByName(cardName);\n                if (!inserted)\n                    continue;\n                const battleCard = cloneCardForBattle(inserted);\n                if (targetSide === 'player') {\n                    combatState.value.playerDeck = insertCardIntoDeckRandomly(combatState.value.playerDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.playerDeck.length} / ${combatState.value.discardPile.length}</span>`);\n                }\n                else {\n                    combatState.value.enemyDeck = insertCardIntoDeckRandomly(combatState.value.enemyDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.enemyDeck.length} / ${combatState.value.enemyDiscard.length}</span>`);\n                }\n            }\n        };\n        const destroyOpponentCardByTrait = (winnerSide, loserCard) => {\n            if (loserCard.id === PASS_CARD.id)\n                return;\n            if (winnerSide === 'player') {\n                combatState.value.enemyDeck = removeCardsById(combatState.value.enemyDeck, loserCard.id);\n                combatState.value.enemyDiscard = removeCardsById(combatState.value.enemyDiscard, loserCard.id);\n            }\n            else {\n                combatState.value.playerDeck = removeCardsById(combatState.value.playerDeck, loserCard.id);\n                combatState.value.playerHand = removeCardsById(combatState.value.playerHand, loserCard.id);\n                combatState.value.discardPile = removeCardsById(combatState.value.discardPile, loserCard.id);\n                if (combatState.value.playerSelectedCard?.id === loserCard.id) {\n                    combatState.value.playerSelectedCard = null;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${loserCard.name}</span>`);\n        };\n        const applyShockOnManaLoss = (side, lostMp, reason) => {\n            const loss = Math.max(0, Math.floor(lostMp));\n            if (loss <= 0)\n                return;\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const label = side === 'player' ? '' : '';\n            const shockStacks = getEffectStacks(target, ET.SHOCK);\n            if (shockStacks <= 0)\n                return;\n            const { actualDamage, logs: shockDamageLogs } = applyDamageToSideWithRelics(side, target, shockStacks, false, '');\n            if (actualDamage > 0) {\n                pushFloatingNumber(side, actualDamage, 'magic', '-');\n            }\n            const nextStacks = Math.max(0, shockStacks - 1);\n            if (nextStacks <= 0) {\n                removeEffect(target, ET.SHOCK);\n            }\n            else {\n                const shockEffect = target.effects.find((effect) => effect.type === ET.SHOCK);\n                if (shockEffect) {\n                    shockEffect.stacks = nextStacks;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${label}${reason} ${actualDamage}  ${shockStacks}${nextStacks}</span>`);\n            for (const dl of shockDamageLogs) {\n                const normalized = dl.startsWith('') ? `${label}${dl}` : dl;\n                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n            }\n            if (side === 'player' && actualDamage > 0 && target.hp <= 0) {\n                queuePlayerLethalNegativeStatus(PLAYER_SHOCK_LETHAL_NEGATIVE_STATUS, '');\n            }\n        };\n        const changeManaWithShock = (side, delta, reason, options) => {\n            const value = Math.floor(delta);\n            if (value === 0)\n                return { ok: true, actualDelta: 0 };\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const before = target.mp;\n            if (value < 0 && options?.requireEnoughForDecrease && before < -value) {\n                return { ok: false, actualDelta: 0 };\n            }\n            target.mp = Math.max(0, before + value);\n            const actualDelta = target.mp - before;\n            if (actualDelta > 0 && options?.showPositiveFloating !== false) {\n                pushFloatingNumber(side, actualDelta, 'mana', '+');\n            }\n            if (actualDelta < 0) {\n                applyShockOnManaLoss(side, -actualDelta, reason);\n            }\n            if (actualDelta > 0) {\n                tryTriggerModaoStabilizer(side, actualDelta, `${reason}`);\n            }\n            return { ok: true, actualDelta };\n        };\n        const spendManaWithShock = (side, amount, reason) => {\n            const cost = Math.max(0, Math.floor(amount));\n            if (cost <= 0)\n                return true;\n            return changeManaWithShock(side, -cost, reason, { requireEnoughForDecrease: true }).ok;\n        };\n        const hasModaoWeaveBackupInPlayerHand = () => (combatState.value.playerHand.some((entry) => entry.id === 'modao_weave_backup'));\n        const getSecondMagicCardInPlayerHand = () => {\n            let seen = 0;\n            for (const card of combatState.value.playerHand) {\n                if (card.type !== CardType.MAGIC)\n                    continue;\n                seen += 1;\n                if (seen === 2)\n                    return card;\n            }\n            return null;\n        };\n        const isMagicCostFreeThisTurn = (side) => (nextTurnMagicCostFree.value[side] === combatState.value.turn);\n        const grantNextTurnMagicCostFree = (side, card) => {\n            const targetTurn = combatState.value.turn + 1;\n            if (nextTurnMagicCostFree.value[side] < targetTurn) {\n                nextTurnMagicCostFree.value[side] = targetTurn;\n            }\n            const sideLabel = side === 'player' ? '' : '';\n            log(`<span class=\"text-sky-300\">${sideLabel}${card.name}0</span>`);\n        };\n        const getEffectiveManaCost = (side, card) => {\n            const base = Math.max(0, Math.floor(card.manaCost ?? 0));\n            if (card.type !== CardType.MAGIC)\n                return base;\n            if (isMagicCostFreeThisTurn(side))\n                return 0;\n            let discount = 0;\n            if (side === 'player') {\n                if (hasModaoWeaveBackupInPlayerHand()) {\n                    discount += 1;\n                }\n                const hostCount = getActiveRelicCount('modao_arcane_host');\n                if (hostCount > 0 && getSecondMagicCardInPlayerHand() === card) {\n                    discount += (2 * hostCount);\n                }\n            }\n            return Math.max(0, base - discount);\n        };\n        const withEffectiveManaCost = (side, card) => {\n            const manaCost = getEffectiveManaCost(side, card);\n            if (manaCost === card.manaCost)\n                return card;\n            return { ...card, manaCost };\n        };\n        const resolveCardSelfDamage = (card) => {\n            const raw = card.selfDamage;\n            if (raw === undefined || raw === null)\n                return null;\n            if (typeof raw === 'number') {\n                const amount = Math.max(0, Math.floor(raw));\n                if (amount <= 0)\n                    return null;\n                return { value: amount, mode: 'fixed', target: 'hp' };\n            }\n            const mode = raw.mode ?? 'fixed';\n            const target = raw.target ?? 'hp';\n            const baseAmount = Number.isFinite(raw.value) ? raw.value : 0;\n            if (baseAmount <= 0)\n                return null;\n            if (mode === 'percent') {\n                return { value: baseAmount, mode: 'percent', target };\n            }\n            return { value: Math.max(0, Math.floor(baseAmount)), mode: 'fixed', target };\n        };\n        const triggerBleedProc = (targetSide, reason) => {\n            const target = targetSide === 'player' ? playerStats.value : enemyStats.value;\n            const targetLabel = targetSide === 'player' ? '' : '';\n            const bleedStacks = Math.max(0, getEffectStacks(target, ET.BLEED));\n            if (bleedStacks <= 0) {\n                log(`<span class=\"text-gray-400\">[] ${reason}${targetLabel}</span>`);\n                return 0;\n            }\n            const { actualDamage, logs: bleedLogs } = applyDamageToSideWithRelics(targetSide, target, bleedStacks, true, '');\n            if (actualDamage > 0) {\n                pushFloatingNumber(targetSide, actualDamage, 'true', '-');\n            }\n            log(`<span class=\"text-rose-300\">[] ${reason}${targetLabel} ${actualDamage} </span>`);\n            for (const dl of bleedLogs) {\n                const normalized = dl.startsWith('') ? `${targetLabel}${dl}` : dl;\n                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n            }\n            if (targetSide === 'enemy' && actualDamage > 0) {\n                const feastCount = getActiveRelicCount('bloodpool_first_bleed_feast');\n                if (feastCount > 0 && !bloodpoolFirstBleedFeastTriggered.value) {\n                    bloodpoolFirstBleedFeastTriggered.value = true;\n                    const { healed } = healForSide('player', actualDamage * feastCount);\n                    logRelicMessage(`[]  ${healed} `);\n                }\n            }\n            return actualDamage;\n        };\n        const applyBloodbladeAttachOnClash = (sourceSide, targetSide) => {\n            const sourceStats = sourceSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.BLOODBLADE_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.BLEED, stacks, { source: 'effect:bloodblade_attach' });\n            const sourceLabel = sourceSide === 'player' ? '' : '';\n            log(`<span class=\"text-rose-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const applyLightningAttachOnDodge = (dodgerSide, targetSide) => {\n            const sourceStats = dodgerSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.LIGHTNING_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.SHOCK, stacks, { source: 'effect:lightning_attach' });\n            const sourceLabel = dodgerSide === 'player' ? '' : '';\n            log(`<span class=\"text-indigo-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const cardEffectMatchesTrigger = (effectTrigger, trigger) => {\n            if (!effectTrigger || effectTrigger.length === 0)\n                return trigger === 'on_use';\n            return effectTrigger.includes(trigger);\n        };\n        const applyCardEffectsByTrigger = (source, card, finalPoint, trigger = 'on_use') => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            const label = source === 'player' ? '' : '';\n            let hasEffect = false;\n            for (const ce of card.cardEffects) {\n                if (!cardEffectMatchesTrigger(ce.triggers, trigger))\n                    continue;\n                const targetKey = ce.target ?? 'self';\n                const targetEntity = targetKey === 'self' ? attacker : defender;\n                const targetSide = resolveTargetSide(source, targetKey);\n                if (ce.kind === 'heal') {\n                    const healAmount = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : Math.floor(ce.fixedValue ?? 0);\n                    const { healed } = healForSide(targetSide, healAmount);\n                    log(`<span class=\"text-green-400\">${label}${card.name} ${healed} </span>`);\n                    hasEffect = true;\n                }\n                else if (ce.kind === 'apply_buff') {\n                    const beforeMaxHp = targetEntity.maxHp;\n                    const beforeHp = targetEntity.hp;\n                    const stacks = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : ce.valueMode === 'max_hp_percent'\n                            ? Math.floor(targetEntity.maxHp * (ce.scale ?? 0))\n                            : Math.floor(ce.fixedValue ?? 1);\n                    const applied = applyStatusEffectWithRelics(targetSide, ce.effectType, stacks, {\n                        restrictedTypes: ce.restrictedTypes,\n                        source: card.id,\n                        lockDecayThisTurn: ce.effectType === ET.BIND || ce.effectType === ET.SILENCE || ce.effectType === ET.STUN,\n                    });\n                    if (!applied) {\n                        continue;\n                    }\n                    if (ce.effectType === ET.ARMOR) {\n                        pushFloatingNumber(targetSide, stacks, 'shield', '+');\n                        if (targetSide === 'player') {\n                            handlePlayerArmorGainFromSingleEvent(stacks, `${card.name}`);\n                        }\n                    }\n                    if (ce.effectType === ET.MAX_HP_REDUCTION) {\n                        const actualMaxHpLoss = Math.max(0, beforeMaxHp - targetEntity.maxHp);\n                        const hpLossByCap = Math.max(0, beforeHp - targetEntity.hp);\n                        if (hpLossByCap > 0) {\n                            pushFloatingNumber(targetSide, hpLossByCap, 'true', '-');\n                        }\n                        log(`<span class=\"text-fuchsia-300\">${label}${card.name} -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                    }\n                    else if (ce.effectType === ET.TEMP_MAX_HP) {\n                        const actualMaxHpGain = Math.max(0, targetEntity.maxHp - beforeMaxHp);\n                        log(`<span class=\"text-rose-300\">${label}${card.name} +${actualMaxHpGain}</span>`);\n                    }\n                    else {\n                        log(`<span class=\"text-yellow-400\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[ce.effectType]?.name ?? ce.effectType}</span>`);\n                    }\n                    hasEffect = true;\n                }\n                else if (ce.kind === 'restore_mana') {\n                    const restoreAmount = ce.valueMode === 'point_scale'\n                        ? Math.floor(finalPoint * (ce.scale ?? 1))\n                        : Math.floor(ce.fixedValue ?? 0);\n                    const manaResult = changeManaWithShock(targetSide, restoreAmount, `${label}${card.name}`, { showPositiveFloating: true });\n                    const actualRestore = Math.max(0, manaResult.actualDelta);\n                    if (actualRestore > 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name} ${actualRestore} </span>`);\n                        hasEffect = true;\n                    }\n                    else if (manaResult.actualDelta < 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name} ${Math.abs(manaResult.actualDelta)} </span>`);\n                        hasEffect = true;\n                    }\n                    else if (restoreAmount !== 0) {\n                        log(`<span class=\"text-blue-400\">${label}${card.name}</span>`);\n                        hasEffect = true;\n                    }\n                }\n                else if (ce.kind === 'cleanse') {\n                    const cleanseTargets = ce.cleanseTypes && ce.cleanseTypes.length > 0\n                        ? ce.cleanseTypes\n                        : targetEntity.effects.map((eff) => eff.type);\n                    for (const et of cleanseTargets) {\n                        removeEffect(targetEntity, et);\n                    }\n                    log(`<span class=\"text-cyan-300\">${label}${card.name}</span>`);\n                    hasEffect = true;\n                }\n            }\n            return hasEffect;\n        };\n        const applyToxinSpreadOnPhysicalPlay = (source, card) => {\n            if (card.id === PASS_CARD.id || card.type !== CardType.PHYSICAL)\n                return;\n            const spreadOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const spreadOwner = spreadOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const spreadStacks = getEffectStacks(spreadOwner, ET.TOXIN_SPREAD);\n            if (spreadStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.POISON, spreadStacks, { source: 'effect:toxin_spread' });\n            const sourceLabel = source === 'player' ? '' : '';\n            const spreadOwnerLabel = spreadOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-emerald-300\">${spreadOwnerLabel}[] ${sourceLabel} ${spreadStacks} </span>`);\n        };\n        const applyAmbushOnCardPlay = (source, card) => {\n            if (card.id === PASS_CARD.id)\n                return;\n            if (card.type !== CardType.PHYSICAL && card.type !== CardType.DODGE)\n                return;\n            const ambushOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const ambushOwner = ambushOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const ambushStacks = getEffectStacks(ambushOwner, ET.AMBUSH);\n            if (ambushStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.BIND, 1, {\n                source: 'effect:ambush',\n                restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n                lockDecayThisTurn: true,\n            });\n            reduceEffectStacks(ambushOwner, ET.AMBUSH, 1);\n            const sourceLabel = source === 'player' ? '' : '';\n            const ambushOwnerLabel = ambushOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-violet-300\">${ambushOwnerLabel}[] ${sourceLabel} 1 </span>`);\n        };\n        const withFirstUseLightningAmbushBonus = (source, card, options) => {\n            if (card.id !== 'enemy_vinewalker_lightning_ambush')\n                return card;\n            if (lightningAmbushFirstUseConsumed.value[source])\n                return card;\n            const shouldConsume = options?.consume ?? true;\n            const shouldAnnounce = options?.announce ?? shouldConsume;\n            if (shouldConsume) {\n                lightningAmbushFirstUseConsumed.value[source] = true;\n            }\n            const boosted = cloneCardForBattle(card);\n            boosted.calculation.addition += 4;\n            if (shouldAnnounce) {\n                const sourceLabel = source === 'player' ? '' : '';\n                log(`<span class=\"text-indigo-300\">${sourceLabel}${card.name} +4</span>`);\n            }\n            return boosted;\n        };\n        let poisonAmountImmediateCheckRunning = false;\n        const applyImmediatePoisonAmountLethalCheck = (side) => {\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            if (target.hp <= 0)\n                return;\n            const poisonAmount = getEffectStacks(target, ET.POISON_AMOUNT);\n            if (poisonAmount <= 0 || poisonAmount < target.hp)\n                return;\n            removeEffect(target, ET.POISON_AMOUNT);\n            const { actualDamage, logs: poisonLogs } = applyDamageToSideWithRelics(side, target, poisonAmount, true, '');\n            if (actualDamage > 0) {\n                pushFloatingNumber(side, actualDamage, 'true', '-');\n            }\n            const label = side === 'player' ? '' : '';\n            log(`<span class=\"text-zinc-300\">${label}[]  ${actualDamage} </span>`);\n            for (const poisonLog of poisonLogs) {\n                const normalized = poisonLog.startsWith('') ? `${label}${poisonLog}` : poisonLog;\n                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n            }\n            if (side === 'player' && actualDamage > 0 && target.hp <= 0) {\n                queuePlayerLethalNegativeStatus(PLAYER_POISON_LETHAL_NEGATIVE_STATUS, '');\n            }\n        };\n        const rollIntInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const applyFatigueDegreePenaltyOnTurnStart = () => {\n            const current = fatigueDegree.value;\n            if (current < 200)\n                return false;\n            if (current >= 300) {\n                playerStats.value.maxHp = 0;\n                playerStats.value.hp = 0;\n                log('<span class=\"text-red-400\">[]  300</span>');\n                return true;\n            }\n            const fatigueStacks = rollIntInRange(1, 3);\n            applyStatusEffectWithRelics('player', ET.FATIGUE, fatigueStacks, { source: 'system:fatigue_degree' });\n            log(`<span class=\"text-amber-300\">[]  ${fatigueStacks} </span>`);\n            if (current >= 200) {\n                const poisonStacks = rollIntInRange(1, 2);\n                applyStatusEffectWithRelics('player', ET.POISON, poisonStacks, { source: 'system:fatigue_degree' });\n                log(`<span class=\"text-emerald-300\">[]  ${poisonStacks} </span>`);\n            }\n            return false;\n        };\n        const queueCardNegativeEffectForPlayer = (source, card) => {\n            if (source !== 'enemy')\n                return;\n            const negativeEffect = (card.negativeEffect ?? '').trim();\n            if (!negativeEffect)\n                return;\n            pendingCardNegativeEffects.value.push(negativeEffect);\n            log(`<span class=\"text-fuchsia-300\">${negativeEffect}</span>`);\n        };\n        const applyHitAttachEffects = (source, card, attacker, defenderSide) => {\n            const flameStacks = getEffectStacks(attacker, ET.FLAME_ATTACH);\n            if (flameStacks > 0 && (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)) {\n                applyStatusEffectWithRelics(defenderSide, ET.BURN, flameStacks, { source: 'effect:flame_attach' });\n            }\n            const poisonStacks = getEffectStacks(attacker, ET.POISON_ATTACH);\n            if (poisonStacks > 0 && card.type === CardType.MAGIC) {\n                applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: 'effect:poison_attach' });\n            }\n            const totalApplied = flameStacks + (card.type === CardType.MAGIC ? poisonStacks : 0);\n            if (totalApplied > 0) {\n                const label = source === 'player' ? '' : '';\n                log(`<span class=\"text-orange-300\">${label}[] </span>`);\n            }\n        };\n        const consumeChargeOnRoll = (stats, label, rolled) => {\n            let next = rolled;\n            const chargeStacks = getEffectStacks(stats, ET.CHARGE);\n            if (chargeStacks > 0) {\n                removeEffect(stats, ET.CHARGE);\n                next = Math.max(0, Math.floor(next + chargeStacks));\n                log(`<span class=\"text-cyan-300\">${label}[] +${chargeStacks} ${rolled}  ${next}</span>`);\n            }\n            const fatigueStacks = getEffectStacks(stats, ET.FATIGUE);\n            if (fatigueStacks > 0) {\n                removeEffect(stats, ET.FATIGUE);\n                const reduced = Math.max(0, Math.floor(next - fatigueStacks));\n                log(`<span class=\"text-amber-300\">${label}[] -${fatigueStacks} ${next}  ${reduced}</span>`);\n                next = reduced;\n            }\n            return next;\n        };\n        const clearDicePreview = () => {\n            previewPlayerDice.value = null;\n            previewEnemyDice.value = null;\n            playerDicePreviewLines.value = [];\n            enemyDicePreviewLines.value = [];\n            playerDicePreviewCardName.value = '';\n            enemyDicePreviewCardName.value = '';\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n        };\n        const clearPlayerPlayedCard = () => {\n            playerPlayedCardVisual.value = null;\n        };\n        const clearResolvedCardVisual = () => {\n            resolvedPlayerCardVisual.value = null;\n            resolvedEnemyCardVisual.value = null;\n        };\n        const stopAllCardAnimations = () => {\n            animationStopToken += 1;\n            clearPlayerPlayedCard();\n            clearResolvedCardVisual();\n            impactShake.value = false;\n            showClashAnimation.value = false;\n            shatteringTarget.value = null;\n        };\n        const showPlayerPlayedCard = (card) => {\n            if (endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const id = ++playerPlayedCardVisualId;\n            playerPlayedCardVisual.value = { id, card, entered: false };\n            requestAnimationFrame(() => {\n                if (token !== animationStopToken || endCombatPending.value)\n                    return;\n                if (playerPlayedCardVisual.value?.id === id) {\n                    playerPlayedCardVisual.value.entered = true;\n                }\n            });\n        };\n        const playResolvedCardAnimation = async (source, card) => {\n            if (card.id === PASS_CARD.id || endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const variant = (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)\n                ? 'attack'\n                : (card.type === CardType.DODGE ? 'fade' : 'self');\n            const id = ++resolvedCardVisualId;\n            const slot = source === 'player' ? resolvedPlayerCardVisual : resolvedEnemyCardVisual;\n            slot.value = { id, source, card, variant };\n            if (variant === 'attack') {\n                const impactDelay = scaleDuration(720);\n                setTimeout(() => {\n                    if (token !== animationStopToken || endCombatPending.value)\n                        return;\n                    impactShake.value = true;\n                    setTimeout(() => {\n                        if (token !== animationStopToken)\n                            return;\n                        impactShake.value = false;\n                    }, scaleDuration(220));\n                }, impactDelay);\n            }\n            const animDuration = variant === 'attack' ? 930 : 570;\n            await wait(animDuration);\n            if (token !== animationStopToken || endCombatPending.value)\n                return;\n            if (slot.value?.id === id) {\n                slot.value = null;\n            }\n        };\n        const getCardFinalPoint = (source, card, baseDice, isPreview = false) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            // 2+1\n            if (card.id === 'burn_inferno_judgement') {\n                finalPoint += Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n            }\n            // 3+1\n            if (card.id === 'bloodpool_blood_debt_strike') {\n                const lostHp = Math.max(0, Math.floor(attacker.maxHp - attacker.hp));\n                finalPoint += Math.floor(lostHp / 3);\n            }\n            if (source === 'player') {\n                forEachPlayerRelic((entry, relic, state) => {\n                    const hook = relic.hooks?.modifyFinalPoint;\n                    if (!hook)\n                        return;\n                    const ctx = {\n                        count: entry.count,\n                        side: 'player',\n                        card,\n                        baseDice,\n                        currentPoint: finalPoint,\n                        self: attacker,\n                        opponent: defender,\n                        state,\n                        isPreview,\n                        addLog: logRelicMessage,\n                        hasRelic: hasActiveRelic,\n                        getRelicCount: getActiveRelicCount,\n                    };\n                    finalPoint = hook(ctx);\n                });\n            }\n            return Math.max(0, Math.floor(finalPoint));\n        };\n        const formatPointValue = (value) => {\n            const rounded = Math.round(value * 100) / 100;\n            if (Number.isInteger(rounded))\n                return String(Math.trunc(rounded));\n            return rounded.toFixed(2).replace(/\\.?0+$/, '');\n        };\n        const formatRelicPointDelta = (relicId, before, after) => {\n            if (relicId === 'modao_witch_hat' && Math.abs(before) > 0.0001) {\n                return `x${formatPointValue(after / before)}${formatPointValue(before)}${formatPointValue(after)}`;\n            }\n            const delta = after - before;\n            if (Math.abs(delta) < 0.0001)\n                return '0';\n            const roundedInt = Math.round(delta);\n            if (Math.abs(delta - roundedInt) < 0.0001) {\n                return `${roundedInt >= 0 ? '+' : ''}${roundedInt}${formatPointValue(before)}${formatPointValue(after)}`;\n            }\n            return `${delta >= 0 ? '+' : ''}${formatPointValue(delta)}${formatPointValue(before)}${formatPointValue(after)}`;\n        };\n        const buildCardPreviewLines = (source, card, baseDice) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            const lines = [];\n            lines.push(`${baseDice}`);\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            const multiplierText = formatPointValue(card.calculation.multiplier);\n            const addition = card.calculation.addition;\n            const additionText = addition >= 0 ? `+${addition}` : `${addition}`;\n            lines.push(` x${multiplierText} ${additionText} => ${finalPoint}`);\n            if (card.id === 'burn_inferno_judgement') {\n                const bonus = Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n                if (bonus > 0) {\n                    finalPoint += bonus;\n                    lines.push(` +${bonus} => ${finalPoint}`);\n                }\n            }\n            if (card.id === 'bloodpool_blood_debt_strike') {\n                const lostHp = Math.max(0, Math.floor(attacker.maxHp - attacker.hp));\n                const bonus = Math.floor(lostHp / 3);\n                if (bonus > 0) {\n                    finalPoint += bonus;\n                    lines.push(`${lostHp} +${bonus} => ${finalPoint}`);\n                }\n            }\n            if (source === 'player') {\n                forEachPlayerRelic((entry, relic, state) => {\n                    const hook = relic.hooks?.modifyFinalPoint;\n                    if (!hook)\n                        return;\n                    const before = finalPoint;\n                    const ctx = {\n                        count: entry.count,\n                        side: 'player',\n                        card,\n                        baseDice,\n                        currentPoint: finalPoint,\n                        self: attacker,\n                        opponent: defender,\n                        state,\n                        isPreview: true,\n                        addLog: logRelicMessage,\n                        hasRelic: hasActiveRelic,\n                        getRelicCount: getActiveRelicCount,\n                    };\n                    finalPoint = hook(ctx);\n                    if (Math.abs(finalPoint - before) < 0.0001)\n                        return;\n                    lines.push(`${relic.name} ${formatRelicPointDelta(relic.id, before, finalPoint)} => ${formatPointValue(finalPoint)}`);\n                });\n            }\n            lines.push(`${Math.max(0, Math.floor(finalPoint))}`);\n            return lines;\n        };\n        const getCardPreviewPoint = (source, card, baseDice) => {\n            return getCardFinalPoint(source, card, baseDice, true);\n        };\n        const handlePlayerCardHoverStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n            playerDicePreviewCardName.value = card.name;\n            playerDicePreviewLines.value = buildCardPreviewLines('player', card, combatState.value.playerBaseDice);\n        };\n        const handlePlayerCardHoverEnd = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = null;\n            playerDicePreviewCardName.value = '';\n            playerDicePreviewLines.value = [];\n        };\n        const handlePlayerCardTouchStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (hoverPreviewTimer)\n                clearTimeout(hoverPreviewTimer);\n            hoverPreviewTimer = setTimeout(() => {\n                if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                    return;\n                previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n                playerDicePreviewCardName.value = card.name;\n                playerDicePreviewLines.value = buildCardPreviewLines('player', card, combatState.value.playerBaseDice);\n            }, 260);\n        };\n        const handlePlayerCardTouchEnd = () => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = null;\n            playerDicePreviewCardName.value = '';\n            playerDicePreviewLines.value = [];\n        };\n        const rollDiceInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const handlePlayerDiceClick = () => {\n            if (!canPlayerRerollDice.value)\n                return;\n            const chargesBeforeHooks = getRerollCharges('player');\n            let rerolled = null;\n            forEachPlayerRelic((entry, relic, state) => {\n                if (rerolled !== null)\n                    return;\n                const hook = relic.hooks?.onDiceClick;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    currentDice: combatState.value.playerBaseDice,\n                    minDice: playerStats.value.minDice,\n                    maxDice: playerStats.value.maxDice,\n                    state,\n                    roll: rollDiceInRange,\n                    consumeRerollCharge,\n                    getRerollCharges,\n                    addLog: logRelicMessage,\n                };\n                rerolled = hook(ctx);\n            });\n            if (rerolled === null) {\n                if (getRerollCharges('player') < chargesBeforeHooks)\n                    return;\n                if (!consumeRerollCharge('player', 1))\n                    return;\n                rerolled = rollDiceInRange(playerStats.value.minDice, playerStats.value.maxDice);\n                log(`<span class=\"text-amber-300\">[] 1 ${getRerollCharges('player')} </span>`);\n            }\n            const before = combatState.value.playerBaseDice;\n            const rerolledRaw = Math.max(0, Math.floor(rerolled));\n            playerTurnRawDice.value = rerolledRaw;\n            const after = consumeChargeOnRoll(playerStats.value, '', rerolledRaw);\n            combatState.value.playerBaseDice = after;\n            previewPlayerDice.value = null;\n            log(`<span class=\"text-amber-200\">${before}  ${after}</span>`);\n        };\n        const canPreviewEnemyDice = () => {\n            return (combatState.value.phase === CombatPhase.PLAYER_INPUT &&\n                !isRolling.value &&\n                !showClashAnimation.value &&\n                !!combatState.value.enemyIntentCard);\n        };\n        const showEnemyDicePreview = () => {\n            if (!canPreviewEnemyDice())\n                return;\n            const card = combatState.value.enemyIntentCard;\n            if (!card)\n                return;\n            const previewCard = withFirstUseLightningAmbushBonus('enemy', card, {\n                consume: false,\n                announce: false,\n            });\n            const preview = getCardPreviewPoint('enemy', previewCard, combatState.value.enemyBaseDice);\n            if (preview === null)\n                return;\n            previewEnemyDice.value = preview;\n            enemyDicePreviewCardName.value = previewCard.name;\n            enemyDicePreviewLines.value = buildCardPreviewLines('enemy', previewCard, combatState.value.enemyBaseDice);\n        };\n        const hideEnemyDicePreview = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (showClashAnimation.value)\n                return;\n            previewEnemyDice.value = null;\n            enemyDicePreviewCardName.value = '';\n            enemyDicePreviewLines.value = [];\n        };\n        const handleEnemyDiceHoverStart = () => {\n            showEnemyDicePreview();\n        };\n        const handleEnemyDiceHoverEnd = () => {\n            hideEnemyDicePreview();\n        };\n        const handleEnemyDiceTouchStart = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            enemyDicePreviewTimer = setTimeout(() => {\n                showEnemyDicePreview();\n            }, 260);\n        };\n        const handleEnemyDiceTouchEnd = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            hideEnemyDicePreview();\n        };\n        const clearEffectTooltipTimers = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n            if (effectTooltipAutoHideTimer) {\n                clearTimeout(effectTooltipAutoHideTimer);\n                effectTooltipAutoHideTimer = null;\n            }\n        };\n        const showEffectTooltipForTarget = (target, effect, align = 'center') => {\n            const rootRect = combatRootEl.value?.getBoundingClientRect();\n            if (!rootRect)\n                return;\n            const rect = target.getBoundingClientRect();\n            const top = Math.max(8, rect.top - rootRect.top - 8);\n            const tooltipMaxWidth = 256;\n            const x = align === 'right'\n                ? Math.max(8, Math.min(rect.right - rootRect.left + 10, rootRect.width - tooltipMaxWidth - 8))\n                : Math.max(100, Math.min(rect.left + rect.width / 2 - rootRect.left, rootRect.width - 100));\n            effectTooltip.value = {\n                x,\n                y: top,\n                name: getEffectName(effect.type),\n                description: getEffectDescription(effect.type),\n                stacks: effect.stacks,\n                align,\n            };\n        };\n        const showEffectTooltip = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            showEffectTooltipForTarget(target, effect, align);\n        };\n        const hideEffectTooltip = () => {\n            clearEffectTooltipTimers();\n            effectTooltip.value = null;\n        };\n        const handleEffectTouchStart = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            effectTooltipLongPressTimer = setTimeout(() => {\n                showEffectTooltipForTarget(target, effect, align);\n                effectTooltipAutoHideTimer = setTimeout(() => {\n                    effectTooltip.value = null;\n                    effectTooltipAutoHideTimer = null;\n                }, scaleDuration(1800));\n            }, scaleDuration(320));\n        };\n        const handleEffectTouchEnd = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n        };\n        const pushFloatingNumber = (side, value, kind, sign = '+') => {\n            const amount = Math.max(0, Math.floor(value));\n            if (amount <= 0)\n                return;\n            const id = ++floatingNumberId;\n            const duration = kind === 'heal' ? scaleDuration(1800) : scaleDuration(1350);\n            floatingNumbers.value.push({\n                id,\n                side,\n                kind,\n                text: `${sign}${amount}`,\n                colorClass: floatingColors[kind],\n                leftOffset: Math.floor((Math.random() - 0.5) * 120),\n                topOffset: 24 + Math.floor(Math.random() * 20),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const pushFloatingText = (side, text, colorClass = 'text-sky-300', duration = scaleDuration(1050)) => {\n            const id = ++floatingNumberId;\n            floatingNumbers.value.push({\n                id,\n                side,\n                text,\n                colorClass,\n                leftOffset: Math.floor((Math.random() - 0.5) * 90),\n                topOffset: 18 + Math.floor(Math.random() * 18),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const notifyEnemyManaInsufficient = () => {\n            if (enemyManaLackHintTurn === combatState.value.turn)\n                return;\n            enemyManaLackHintTurn = combatState.value.turn;\n            pushFloatingText('enemy', '', 'text-blue-300');\n            log('<span class=\"text-blue-300\"></span>');\n        };\n        const log = (msg) => {\n            combatState.value.logs = [msg, ...combatState.value.logs].slice(0, 240);\n        };\n        if (activePlayerRelics.length > 0) {\n            const relicSummary = activePlayerRelics\n                .map((entry) => (entry.count > 1 ? `${entry.relic.name}x${entry.count}` : entry.relic.name))\n                .join('');\n            log(`<span class=\"text-amber-300\">${relicSummary}</span>`);\n        }\n        triggerPlayerRelicLifecycleHooks('onBattleStart');\n        onMounted(() => {\n            battleSpeedUp.value = localStorage.getItem(SPEED_SETTING_KEY) === '1';\n            loadFatigueDegree();\n            addFatigueDegree(10);\n            void initPortraitUrls();\n        });\n        onUnmounted(() => {\n            portraitLoaderDisposed = true;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            clearEffectTooltipTimers();\n        });\n        watch(battleSpeedUp, (enabled) => {\n            localStorage.setItem(SPEED_SETTING_KEY, enabled ? '1' : '0');\n        });\n        watch([\n            () => combatState.value.phase,\n            () => combatState.value.turn,\n            () => combatState.value.playerBaseDice,\n            () => combatState.value.enemyBaseDice,\n            isPlayerDiceObscured,\n            isEnemyDiceObscured,\n        ], () => {\n            playerDiceUiNoise.value = isPlayerDiceObscured.value ? rerollUiNoise() : 0;\n            enemyDiceUiNoise.value = isEnemyDiceObscured.value ? rerollUiNoise() : 0;\n        }, { immediate: true });\n        const drawCards = (count, currentDeck, currentDiscard) => {\n            let deck = [...currentDeck];\n            let discard = [...currentDiscard];\n            const drawn = [];\n            for (let i = 0; i < count; i++) {\n                if (deck.length === 0) {\n                    if (discard.length === 0)\n                        break;\n                    deck = [...discard].sort(() => Math.random() - 0.5);\n                    discard = [];\n                    triggerPlayerRelicLifecycleHooks('onDeckShuffle');\n                }\n                const card = deck.pop();\n                if (card)\n                    drawn.push(card);\n            }\n            return { drawn, newDeck: deck, newDiscard: discard };\n        };\n        const normalizedPlayerActiveSkills = computed(() => {\n            const raw = Array.isArray(props.playerActiveSkills)\n                ? props.playerActiveSkills.slice(0, 2)\n                : [];\n            while (raw.length < 2)\n                raw.push(null);\n            return raw.map((skill) => (skill ? { ...skill } : null));\n        });\n        const activeSkillRuntime = ref([\n            { nextAvailableTurn: 1, usedCount: 0 },\n            { nextAvailableTurn: 1, usedCount: 0 },\n        ]);\n        const resetActiveSkillRuntime = () => {\n            activeSkillRuntime.value = normalizedPlayerActiveSkills.value.map(() => ({\n                nextAvailableTurn: 1,\n                usedCount: 0,\n            }));\n        };\n        watch(normalizedPlayerActiveSkills, () => {\n            resetActiveSkillRuntime();\n        }, { immediate: true, deep: true });\n        const activeSkillCooldownRemaining = (idx) => {\n            const runtime = activeSkillRuntime.value[idx];\n            if (!runtime)\n                return 0;\n            return Math.max(0, runtime.nextAvailableTurn - combatState.value.turn);\n        };\n        const activeSkillDisabledReason = (idx) => {\n            const skill = normalizedPlayerActiveSkills.value[idx];\n            if (!skill)\n                return '';\n            if (endCombatPending.value)\n                return '';\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return '';\n            const runtime = activeSkillRuntime.value[idx];\n            const cooldown = activeSkillCooldownRemaining(idx);\n            if (cooldown > 0)\n                return `${cooldown}`;\n            const maxUses = Math.max(0, Math.floor(skill.maxUses ?? 0));\n            if (maxUses > 0 && runtime && runtime.usedCount >= maxUses) {\n                return `${maxUses}`;\n            }\n            if (playerStats.value.mp < Math.max(0, Math.floor(skill.manaCost))) {\n                return '';\n            }\n            return null;\n        };\n        const playerActiveSkillSlots = computed(() => normalizedPlayerActiveSkills.value.map((skill, idx) => ({\n            idx,\n            skill,\n            cooldownRemaining: activeSkillCooldownRemaining(idx),\n            usedCount: activeSkillRuntime.value[idx]?.usedCount ?? 0,\n            maxUses: skill ? Math.max(0, Math.floor(skill.maxUses ?? 0)) || null : null,\n        })));\n        const getActiveSkillStatusText = (slot) => {\n            const reason = activeSkillDisabledReason(slot.idx);\n            if (reason?.startsWith(''))\n                return `${slot.cooldownRemaining}`;\n            if (slot.maxUses)\n                return `${slot.usedCount}/${slot.maxUses}`;\n            if (reason === '')\n                return '';\n            if (!slot.skill)\n                return '';\n            return reason ? '' : '';\n        };\n        const rerollSideDiceByActiveSkill = (side, skillName) => {\n            const stats = side === 'player' ? playerStats.value : enemyStats.value;\n            const before = side === 'player' ? combatState.value.playerBaseDice : combatState.value.enemyBaseDice;\n            const rawRoll = rollDiceInRange(stats.minDice, stats.maxDice);\n            const after = consumeChargeOnRoll(stats, side === 'player' ? '' : '', rawRoll);\n            if (side === 'player') {\n                playerTurnRawDice.value = rawRoll;\n                combatState.value.playerBaseDice = after;\n                log(`<span class=\"text-zinc-200\">${skillName}${before}  ${after}</span>`);\n                return;\n            }\n            enemyTurnRawDice.value = rawRoll;\n            combatState.value.enemyBaseDice = after;\n            log(`<span class=\"text-zinc-200\">${skillName}${before}  ${after}</span>`);\n        };\n        const useActiveSkill = (idx) => {\n            const skill = normalizedPlayerActiveSkills.value[idx];\n            if (!skill)\n                return;\n            const disabledReason = activeSkillDisabledReason(idx);\n            if (disabledReason) {\n                log(`<span class=\"text-gray-400\">${skill.name}${disabledReason}</span>`);\n                return;\n            }\n            const manaCost = Math.max(0, Math.floor(skill.manaCost));\n            if (manaCost > 0) {\n                const ok = spendManaWithShock('player', manaCost, `${skill.name}`);\n                if (!ok) {\n                    log(`<span class=\"text-red-400\">${skill.name}</span>`);\n                    return;\n                }\n            }\n            switch (skill.id) {\n                case 'active_basic_reroll_self':\n                    rerollSideDiceByActiveSkill('player', skill.name);\n                    break;\n                case 'active_basic_reroll_enemy':\n                    rerollSideDiceByActiveSkill('enemy', skill.name);\n                    break;\n                case 'active_basic_draw': {\n                    const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                    combatState.value.playerDeck = newDeck;\n                    combatState.value.discardPile = newDiscard;\n                    const card = drawn[0];\n                    if (!card) {\n                        log(`<span class=\"text-gray-400\">${skill.name}</span>`);\n                    }\n                    else if (combatState.value.playerHand.length >= 3) {\n                        const replaceIdx = Math.floor(Math.random() * combatState.value.playerHand.length);\n                        const replaced = combatState.value.playerHand[replaceIdx];\n                        combatState.value.playerHand.splice(replaceIdx, 1, card);\n                        combatState.value.discardPile.push(replaced);\n                        log(`<span class=\"text-zinc-200\">${skill.name}${replaced.name}${card.name}</span>`);\n                    }\n                    else {\n                        combatState.value.playerHand = [...combatState.value.playerHand, card];\n                        log(`<span class=\"text-zinc-200\">${skill.name}${card.name}</span>`);\n                    }\n                    break;\n                }\n                case 'active_basic_guard': {\n                    const added = addArmorForSide('player', 2);\n                    if (added > 0) {\n                        log(`<span class=\"text-zinc-200\">${skill.name} ${added} </span>`);\n                    }\n                    else {\n                        log(`<span class=\"text-gray-400\">${skill.name}</span>`);\n                    }\n                    break;\n                }\n                case 'active_basic_boost': {\n                    const before = combatState.value.playerBaseDice;\n                    combatState.value.playerBaseDice = Math.max(0, combatState.value.playerBaseDice + 1);\n                    playerTurnRawDice.value = Math.max(0, playerTurnRawDice.value + 1);\n                    log(`<span class=\"text-zinc-200\">${skill.name} ${before}  ${combatState.value.playerBaseDice}</span>`);\n                    break;\n                }\n                case 'active_basic_weaken': {\n                    const before = combatState.value.enemyBaseDice;\n                    combatState.value.enemyBaseDice = Math.max(0, combatState.value.enemyBaseDice - 1);\n                    enemyTurnRawDice.value = Math.max(0, enemyTurnRawDice.value - 1);\n                    log(`<span class=\"text-zinc-200\">${skill.name} ${before}  ${combatState.value.enemyBaseDice}</span>`);\n                    break;\n                }\n                default:\n                    log(`<span class=\"text-gray-400\">${skill.name}</span>`);\n                    break;\n            }\n            const runtime = activeSkillRuntime.value[idx];\n            if (runtime) {\n                runtime.usedCount += 1;\n                const cooldown = Math.max(0, Math.floor(skill.Cooldown));\n                runtime.nextAvailableTurn = cooldown > 0 ? combatState.value.turn + cooldown : combatState.value.turn;\n            }\n        };\n        const handCardClass = (card) => {\n            const selected = combatState.value.playerSelectedCard;\n            const isSelected = selected === card;\n            const isNotSelected = selected && !isSelected;\n            const isActionPhase = combatState.value.phase === CombatPhase.PLAYER_INPUT;\n            return [\n                isSelected ? '-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]' : '',\n                isNotSelected ? 'opacity-30 scale-90 translate-y-8 grayscale' : 'hover:scale-110 hover:-translate-y-4 hover:z-50',\n                !isActionPhase && !isSelected ? 'opacity-50 grayscale cursor-not-allowed' : 'cursor-pointer',\n            ];\n        };\n        const getDisplayHandCard = (card) => withEffectiveManaCost('player', card);\n        // --- Enemy AI Card Selection ---\n        function selectEnemyCard() {\n            // \n            if (getEffectStacks(enemyStats.value, ET.STUN) > 0) {\n                log('<span class=\"text-gray-400\"></span>');\n                return PASS_CARD;\n            }\n            if (combatState.value.enemyDeck.length === 0) {\n                if (combatState.value.enemyDiscard.length === 0)\n                    return PASS_CARD; // Fallback\n                combatState.value.enemyDeck = [...combatState.value.enemyDiscard].sort(() => Math.random() - 0.5);\n                combatState.value.enemyDiscard = [];\n            }\n            let selectedCard;\n            if (enemyDef) {\n                // Use the enemy's custom AI logic\n                const ctx = {\n                    enemyStats: enemyStats.value,\n                    playerStats: playerStats.value,\n                    deck: combatState.value.enemyDeck,\n                    turn: combatState.value.turn,\n                    flags: aiFlags,\n                };\n                selectedCard = enemyDef.selectCard(ctx);\n            }\n            else {\n                // Fallback: random selection (should never happen with proper registry)\n                const idx = Math.floor(Math.random() * combatState.value.enemyDeck.length);\n                selectedCard = combatState.value.enemyDeck[idx];\n            }\n            const runtimeCard = withEffectiveManaCost('enemy', selectedCard);\n            const check = canPlayCard(enemyStats.value, runtimeCard, enemyTurnRawDice.value);\n            if (!check.allowed) {\n                log(`<span class=\"text-gray-400\">${check.reason ?? ''}</span>`);\n                return PASS_CARD;\n            }\n            return selectedCard;\n        }\n        // --- Phase Management ---\n        const startTurn = () => {\n            if (endCombatPending.value)\n                return;\n            log(`<span class=\"text-slate-300\">${combatState.value.turn}</span>`);\n            enemyManaLackHintTurn = -1;\n            if (sealCircuitPendingMana.value > 0) {\n                const pending = sealCircuitPendingMana.value;\n                sealCircuitPendingMana.value = 0;\n                const restored = restoreManaForSide('player', pending);\n                if (restored > 0) {\n                    logRelicMessage(`[]  ${restored} `);\n                }\n            }\n            const reverseCircuitCount = getActiveRelicCount('burn_reverse_circuit');\n            if (reverseCircuitCount > 0 && getEffectStacks(playerStats.value, ET.BURN) > 0) {\n                const hpLoss = Math.min(playerStats.value.hp, reverseCircuitCount);\n                let actualHpLoss = 0;\n                if (hpLoss > 0) {\n                    actualHpLoss = applyDirectHpLossWithRelics('player', playerStats.value, hpLoss, '');\n                    pushFloatingNumber('player', actualHpLoss, 'true', '-');\n                    addPlayerDamageTakenThisTurn(actualHpLoss);\n                }\n                const restored = restoreManaForSide('player', reverseCircuitCount);\n                logRelicMessage(`[]  ${actualHpLoss}  ${restored} `);\n                if (playerStats.value.hp <= 0)\n                    return;\n            }\n            const scaleRingCount = getActiveRelicCount('modao_scale_ring');\n            if (scaleRingCount > 0 && combatState.value.turn % 3 === 0) {\n                const restored = restoreManaForSide('player', scaleRingCount);\n                if (restored > 0) {\n                    logRelicMessage(`[]  ${combatState.value.turn}  ${restored} `);\n                }\n            }\n            clearDicePreview();\n            stopAllCardAnimations();\n            combatState.value.phase = CombatPhase.DRAW_PHASE;\n            combatState.value.playerSelectedCard = null;\n            combatState.value.enemyIntentCard = null;\n            enemyIntentConsumedThisTurn.value = false;\n            enemyIntentManaSpentThisTurn.value = false;\n            isRolling.value = true;\n            shatteringTarget.value = null;\n            showClashAnimation.value = false;\n            triggerPlayerRelicLifecycleHooks('onTurnStart');\n            const pulseMarkCount = getActiveRelicCount('bloodpool_pulse_mark');\n            if (pulseMarkCount > 0 && playerStats.value.hp > 0) {\n                const pulseDamage = Math.max(0, pulseMarkCount * 2);\n                if (pulseDamage > 0) {\n                    const { actualDamage, logs: pulseLogs } = applyDamageToSideWithRelics('player', playerStats.value, pulseDamage, true, '');\n                    if (actualDamage > 0) {\n                        pushFloatingNumber('player', actualDamage, 'true', '-');\n                        addPlayerDamageTakenThisTurn(actualDamage);\n                        logRelicMessage(`[]  ${actualDamage} `);\n                        triggerPlayerRelicHitHooks('enemy', 'player', PASS_CARD, 0, 1, 1, actualDamage, actualDamage);\n                    }\n                    for (const pulseLog of pulseLogs) {\n                        const normalized = pulseLog.startsWith('') ? `${pulseLog}` : pulseLog;\n                        log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                    }\n                    if (playerStats.value.hp <= 0)\n                        return;\n                }\n            }\n            setTimeout(() => {\n                if (endCombatPending.value)\n                    return;\n                const pRawRoll = Math.floor(Math.random() * (playerStats.value.maxDice - playerStats.value.minDice + 1)) + playerStats.value.minDice;\n                const eRawRoll = Math.floor(Math.random() * (enemyStats.value.maxDice - enemyStats.value.minDice + 1)) + enemyStats.value.minDice;\n                const pRoll = consumeChargeOnRoll(playerStats.value, '', pRawRoll);\n                const eRoll = consumeChargeOnRoll(enemyStats.value, '', eRawRoll);\n                playerTurnRawDice.value = pRawRoll;\n                enemyTurnRawDice.value = eRawRoll;\n                isRolling.value = false;\n                combatState.value.playerBaseDice = pRoll;\n                combatState.value.enemyBaseDice = eRoll;\n                combatState.value.phase = CombatPhase.DRAW_PHASE;\n                log(` [${pRoll}] vs  [${eRoll}]`);\n            }, scaleDuration(1500));\n        };\n        // Watch for INIT phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.TURN_START) {\n                playerDamageTakenThisTurn.value = 0;\n                freezePumpTriggersThisTurn.value = 0;\n                freezeFlowCoreTriggeredThisTurn.value = false;\n                modaoStabilizerTriggersThisTurn.value = 0;\n                bloodpoolSkinMarkTriggersThisTurn.value = 0;\n                if (combatState.value.turn === 1) {\n                    bloodpoolFirstBleedFeastTriggered.value = false;\n                    bloodpoolCriticalReboundTriggered.value = false;\n                    nextMagicDoubleCast.value.player = 0;\n                    nextMagicDoubleCast.value.enemy = 0;\n                    nextTurnMagicCostFree.value.player = 0;\n                    nextTurnMagicCostFree.value.enemy = 0;\n                }\n                const defeatedByFatigueDegree = applyFatigueDegreePenaltyOnTurnStart();\n                if (defeatedByFatigueDegree) {\n                    return;\n                }\n                // Process turn-start effects (poison, burn, mana spring, etc.)\n                if (combatState.value.turn > 1) {\n                    for (const [side, label, stats] of [['player', '', playerStats], ['enemy', '', enemyStats]]) {\n                        const targetSide = side;\n                        const opponentSide = side === 'player' ? 'enemy' : 'player';\n                        const opponentStats = side === 'player' ? enemyStats : playerStats;\n                        const poisonAmountBeforeTurnStart = getEffectStacks(stats.value, ET.POISON_AMOUNT);\n                        const hpBeforeTurnStart = stats.value.hp;\n                        const poisonAmountLethalTriggered = poisonAmountBeforeTurnStart > 0 && poisonAmountBeforeTurnStart >= hpBeforeTurnStart;\n                        const result = processOnTurnStart(stats.value);\n                        let turnStartLogs = [...result.logs];\n                        let burnDamageTaken = 0;\n                        let burnIsTrueDamage = false;\n                        let turnStartImmediateDamageTaken = 0;\n                        let turnStartTrueDamageTaken = 0;\n                        let pendingRegenHeal = 0;\n                        const regenLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (regenLog) {\n                            const regenMatch = regenLog.match(/\\s+(\\d+)\\s+/);\n                            pendingRegenHeal = regenMatch ? Math.max(0, Number(regenMatch[1])) : 0;\n                        }\n                        if (combatState.value.turn % 3 === 0) {\n                            const growthBigStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_BIG);\n                            if (growthBigStacks > 0) {\n                                stats.value.maxDice += growthBigStacks;\n                                turnStartLogs.push(`[]  +${growthBigStacks} ${stats.value.maxDice}`);\n                            }\n                            const growthSmallStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_SMALL);\n                            if (growthSmallStacks > 0) {\n                                stats.value.minDice += growthSmallStacks;\n                                if (stats.value.minDice > stats.value.maxDice) {\n                                    stats.value.maxDice = stats.value.minDice;\n                                }\n                                turnStartLogs.push(`[]  +${growthSmallStacks} ${stats.value.minDice}`);\n                            }\n                        }\n                        for (const pending of result.applyToOpponent) {\n                            applyStatusEffectWithRelics(opponentSide, pending.type, pending.stacks, { source: `effect:${pending.type}` });\n                        }\n                        if (result.opponentHpChange !== 0) {\n                            if (result.opponentHpChange > 0) {\n                                healForSide(opponentSide, result.opponentHpChange);\n                            }\n                            else {\n                                const hpBeforeOpponent = opponentStats.value.hp;\n                                opponentStats.value.hp = Math.max(0, Math.min(opponentStats.value.maxHp, opponentStats.value.hp + result.opponentHpChange));\n                                const actualOpponentHpDelta = opponentStats.value.hp - hpBeforeOpponent;\n                                if (actualOpponentHpDelta < 0) {\n                                    pushFloatingNumber(opponentSide, Math.abs(actualOpponentHpDelta), 'magic', '-');\n                                }\n                            }\n                        }\n                        // \n                        const burnLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (burnLog) {\n                            const burnMatch = burnLog.match(/\\s+(\\d+)\\s+/);\n                            const rawBurnDamage = burnMatch ? Number(burnMatch[1]) : 0;\n                            const burnStacks = getEffectStacks(stats.value, ET.BURN);\n                            turnStartLogs = turnStartLogs.filter((entry) => entry !== burnLog);\n                            if (rawBurnDamage > 0) {\n                                const burnResult = triggerPlayerRelicBeforeBurnDamageHooks(targetSide, burnStacks, rawBurnDamage, combatState.value.turn);\n                                result.hpChange += rawBurnDamage; //  processOnTurnStart \n                                if (burnResult.damage > 0) {\n                                    if (burnResult.isTrueDamage) {\n                                        const { actualDamage, logs: burnApplyLogs } = applyDamageToSideWithRelics(side, stats.value, burnResult.damage, true, '');\n                                        burnDamageTaken = actualDamage;\n                                        burnIsTrueDamage = actualDamage > 0;\n                                        turnStartImmediateDamageTaken += actualDamage;\n                                        if (actualDamage > 0) {\n                                            pushFloatingNumber(side, actualDamage, 'true', '-');\n                                        }\n                                        turnStartLogs.push(`[]  ${actualDamage} `);\n                                        for (const burnApplyLog of burnApplyLogs) {\n                                            turnStartLogs.push(burnApplyLog);\n                                        }\n                                    }\n                                    else {\n                                        const { actualDamage, logs: burnApplyLogs } = applyDamageToSideWithRelics(side, stats.value, burnResult.damage, false, '');\n                                        burnDamageTaken = actualDamage;\n                                        turnStartImmediateDamageTaken += actualDamage;\n                                        if (actualDamage > 0) {\n                                            pushFloatingNumber(side, actualDamage, 'magic', '-');\n                                            turnStartLogs.push(`[]  ${actualDamage} `);\n                                        }\n                                        else {\n                                            turnStartLogs.push('[] ');\n                                        }\n                                        for (const burnApplyLog of burnApplyLogs) {\n                                            turnStartLogs.push(burnApplyLog);\n                                        }\n                                    }\n                                }\n                                else {\n                                    turnStartLogs.push('[]  0');\n                                }\n                            }\n                        }\n                        const inkCreationStacks = getEffectStacks(stats.value, ET.INK_CREATION);\n                        if (burnDamageTaken > 0 && inkCreationStacks > 0) {\n                            const extraTrueDamage = Math.max(0, Math.floor(burnDamageTaken * inkCreationStacks));\n                            if (extraTrueDamage > 0) {\n                                const { actualDamage, logs: inkCreationLogs } = applyDamageToSideWithRelics(side, stats.value, extraTrueDamage, true, '');\n                                turnStartImmediateDamageTaken += actualDamage;\n                                if (actualDamage > 0) {\n                                    pushFloatingNumber(side, actualDamage, 'true', '-');\n                                }\n                                turnStartLogs.push(`[]  ${actualDamage} `);\n                                for (const inkCreationLog of inkCreationLogs) {\n                                    turnStartLogs.push(inkCreationLog);\n                                }\n                            }\n                        }\n                        const residualHpChange = result.hpChange - pendingRegenHeal;\n                        if (pendingRegenHeal > 0) {\n                            healForSide(targetSide, pendingRegenHeal);\n                        }\n                        if (residualHpChange !== 0) {\n                            if (residualHpChange > 0) {\n                                healForSide(targetSide, residualHpChange);\n                            }\n                            else {\n                                stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + residualHpChange));\n                            }\n                        }\n                        if (result.mpChange !== 0) {\n                            changeManaWithShock(side, result.mpChange, '', { showPositiveFloating: true });\n                        }\n                        if (result.trueDamage > 0) {\n                            const hpBeforeTrueDamage = stats.value.hp;\n                            const { actualDamage } = applyDamageToSideWithRelics(side, stats.value, result.trueDamage, true, '');\n                            turnStartTrueDamageTaken = actualDamage;\n                            if (actualDamage > 0) {\n                                pushFloatingNumber(side, actualDamage, 'true', '-');\n                            }\n                            if (targetSide === 'player'\n                                && poisonAmountLethalTriggered\n                                && hpBeforeTrueDamage > 0\n                                && stats.value.hp <= 0) {\n                                queuePlayerLethalNegativeStatus(PLAYER_POISON_LETHAL_NEGATIVE_STATUS, '');\n                            }\n                        }\n                        if (targetSide === 'player') {\n                            const turnStartDamageTaken = Math.max(0, turnStartImmediateDamageTaken + turnStartTrueDamageTaken + Math.max(0, -residualHpChange));\n                            addPlayerDamageTakenThisTurn(turnStartDamageTaken);\n                        }\n                        if (burnDamageTaken > 0) {\n                            triggerPlayerRelicAfterBurnDamageTakenHooks(targetSide, getEffectStacks(stats.value, ET.BURN), burnDamageTaken, burnIsTrueDamage, combatState.value.turn);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(stats.value);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${label}: ${reviveLog}</span>`);\n                        }\n                        for (const l of turnStartLogs) {\n                            log(`<span class=\"text-gray-400 text-[9px]\">${label}: ${l}</span>`);\n                        }\n                    }\n                }\n                setTimeout(() => {\n                    if (endCombatPending.value)\n                        return;\n                    startTurn();\n                }, scaleDuration(1000));\n            }\n        }, { immediate: true });\n        // Watch for DRAW_PHASE\n        watch([() => combatState.value.phase, isRolling], ([phase, rolling]) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.DRAW_PHASE && !rolling) {\n                // Use enemy AI to select card\n                const eCard = selectEnemyCard();\n                const { drawn, newDeck, newDiscard } = drawCards(3, combatState.value.playerDeck, combatState.value.discardPile);\n                combatState.value.enemyIntentCard = eCard;\n                enemyIntentConsumedThisTurn.value = false;\n                enemyIntentManaSpentThisTurn.value = false;\n                combatState.value.playerHand = drawn;\n                combatState.value.playerDeck = newDeck;\n                combatState.value.discardPile = newDiscard;\n                combatState.value.phase = CombatPhase.PLAYER_INPUT;\n            }\n        });\n        // Handle Card Select\n        const handleCardSelect = (card, handIdx) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (handIdx < 0 || handIdx >= combatState.value.playerHand.length)\n                return;\n            if (combatState.value.playerHand[handIdx] !== card)\n                return;\n            const runtimeCard = withEffectiveManaCost('player', card);\n            const check = canPlayCard(playerStats.value, runtimeCard, playerTurnRawDice.value);\n            if (!check.allowed) {\n                triggerInvalidCardShake(card);\n                log(`<span class=\"text-red-400\">${check.reason ?? ''}</span>`);\n                return;\n            }\n            if (runtimeCard.type === CardType.MAGIC) {\n                const canSpend = spendManaWithShock('player', runtimeCard.manaCost, `${card.name}`);\n                if (!canSpend) {\n                    triggerInvalidCardShake(card);\n                    log('<span class=\"text-red-400\"></span>');\n                    return;\n                }\n            }\n            // \n            const [played] = combatState.value.playerHand.splice(handIdx, 1);\n            if (!played)\n                return;\n            clearDicePreview();\n            showPlayerPlayedCard(played);\n            addFatigueDegree(1);\n            combatState.value.discardPile.push(played);\n            combatState.value.playerSelectedCard = played;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n        };\n        const handleSkipTurn = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (!combatState.value.enemyIntentCard)\n                return;\n            clearDicePreview();\n            clearPlayerPlayedCard();\n            combatState.value.playerSelectedCard = PASS_CARD;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n            log('<span class=\"text-gray-400\"></span>');\n        };\n        // Clashable check\n        const isClashable = (card1, card2) => {\n            const t1 = card1.type;\n            const t2 = card2.type;\n            const bypassDodge = (card1.ignoreDodge && t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                || (card2.ignoreDodge && t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC));\n            if (bypassDodge)\n                return false;\n            if (t1 === CardType.PHYSICAL && t2 === CardType.PHYSICAL)\n                return true;\n            if (t1 === CardType.MAGIC && t2 === CardType.MAGIC)\n                return true;\n            if (t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC))\n                return true;\n            if (t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                return true;\n            return false;\n        };\n        // Resolution\n        const resolveCombat = async (pCard, eCard, pDice, eDice) => {\n            if (endCombatPending.value)\n                return;\n            try {\n                let resolvedPlayerCard = pCard;\n                let resolvedEnemyCard = eCard;\n                resolvedEnemyCard = withEffectiveManaCost('enemy', resolvedEnemyCard);\n                if (resolvedEnemyCard.type === CardType.MAGIC\n                    && resolvedEnemyCard.id !== PASS_CARD.id\n                    && !enemyIntentManaSpentThisTurn.value) {\n                    enemyIntentManaSpentThisTurn.value = true;\n                    const canSpend = spendManaWithShock('enemy', resolvedEnemyCard.manaCost, `${resolvedEnemyCard.name}`);\n                    if (!canSpend) {\n                        resolvedEnemyCard = PASS_CARD;\n                        combatState.value.enemyIntentCard = PASS_CARD;\n                        notifyEnemyManaInsufficient();\n                    }\n                }\n                resolvedPlayerCard = withFirstUseLightningAmbushBonus('player', resolvedPlayerCard);\n                resolvedEnemyCard = withFirstUseLightningAmbushBonus('enemy', resolvedEnemyCard);\n                if (resolvedPlayerCard.traits.combo) {\n                    comboUiMaskBridge.value = true;\n                }\n                const shouldClash = isClashable(resolvedPlayerCard, resolvedEnemyCard);\n                const clashBypassedByIgnoreDodge = (resolvedPlayerCard.ignoreDodge\n                    && resolvedEnemyCard.type === CardType.DODGE\n                    && (resolvedPlayerCard.type === CardType.PHYSICAL || resolvedPlayerCard.type === CardType.MAGIC))\n                    || (resolvedEnemyCard.ignoreDodge\n                        && resolvedPlayerCard.type === CardType.DODGE\n                        && (resolvedEnemyCard.type === CardType.PHYSICAL || resolvedEnemyCard.type === CardType.MAGIC));\n                if (!shouldClash && clashBypassedByIgnoreDodge) {\n                    log('<span class=\"text-indigo-300\">[] </span>');\n                }\n                const playerSkippedTurn = resolvedPlayerCard.id === PASS_CARD.id;\n                const enemySkippedTurn = resolvedEnemyCard.id === PASS_CARD.id;\n                let resolvedPlayerDice = pDice;\n                let resolvedEnemyDice = eDice;\n                const rerollByTrait = (source, card) => {\n                    if (card.id === PASS_CARD.id || card.traits.reroll === 'none')\n                        return;\n                    const sourceLabel = source === 'player' ? '' : '';\n                    let target = source;\n                    if (card.traits.reroll === 'enemy') {\n                        target = source === 'player' ? 'enemy' : 'player';\n                    }\n                    const targetLabel = target === 'player' ? '' : '';\n                    const targetStats = target === 'player' ? playerStats.value : enemyStats.value;\n                    const rerolled = rollDiceInRange(targetStats.minDice, targetStats.maxDice);\n                    const before = target === 'player' ? resolvedPlayerDice : resolvedEnemyDice;\n                    if (target === 'player') {\n                        resolvedPlayerDice = rerolled;\n                        combatState.value.playerBaseDice = rerolled;\n                    }\n                    else {\n                        resolvedEnemyDice = rerolled;\n                        combatState.value.enemyBaseDice = rerolled;\n                    }\n                    log(`<span class=\"text-amber-300\">${sourceLabel}${card.name}${targetLabel} ${before}  ${rerolled}</span>`);\n                };\n                rerollByTrait('player', resolvedPlayerCard);\n                rerollByTrait('enemy', resolvedEnemyCard);\n                const pClashPoint = getCardPreviewPoint('player', resolvedPlayerCard, resolvedPlayerDice);\n                const eClashPoint = getCardPreviewPoint('enemy', resolvedEnemyCard, resolvedEnemyDice);\n                const clearBurnForSide = (side, reason) => {\n                    const target = side === 'player' ? playerStats.value : enemyStats.value;\n                    const label = side === 'player' ? '' : '';\n                    const burnStacks = getEffectStacks(target, ET.BURN);\n                    if (burnStacks <= 0)\n                        return;\n                    removeEffect(target, ET.BURN);\n                    log(`<span class=\"text-orange-300\">${reason} ${label}${burnStacks}</span>`);\n                };\n                if (enemySkippedTurn) {\n                    clearBurnForSide('player', '');\n                }\n                if (playerSkippedTurn) {\n                    clearBurnForSide('enemy', '');\n                }\n                applyToxinSpreadOnPhysicalPlay('player', resolvedPlayerCard);\n                applyToxinSpreadOnPhysicalPlay('enemy', resolvedEnemyCard);\n                applyAmbushOnCardPlay('player', resolvedPlayerCard);\n                applyAmbushOnCardPlay('enemy', resolvedEnemyCard);\n                let pSuccess = true;\n                let eSuccess = true;\n                let resultMsg = '';\n                let clashWinner = null;\n                if (shouldClash) {\n                    previewPlayerDice.value = pClashPoint;\n                    previewEnemyDice.value = eClashPoint;\n                    showClashAnimation.value = true;\n                    await wait(600);\n                    screenShake.value = true;\n                    setTimeout(() => (screenShake.value = false), scaleDuration(500));\n                    // \n                    applyBloodbladeAttachOnClash('player', 'enemy');\n                    applyBloodbladeAttachOnClash('enemy', 'player');\n                    applyCardEffectsByTrigger('player', resolvedPlayerCard, pClashPoint, 'on_clash');\n                    applyCardEffectsByTrigger('enemy', resolvedEnemyCard, eClashPoint, 'on_clash');\n                    let successfulDodger = null;\n                    if (resolvedPlayerCard.type === resolvedEnemyCard.type) {\n                        if (pClashPoint > eClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                        else if (eClashPoint > pClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                        else {\n                            pSuccess = false;\n                            eSuccess = false;\n                            clashWinner = 'tie';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedPlayerCard.type === CardType.DODGE) {\n                        if (eClashPoint > pClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                            successfulDodger = 'player';\n                        }\n                        else {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedEnemyCard.type === CardType.DODGE) {\n                        if (pClashPoint > eClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                            successfulDodger = 'enemy';\n                        }\n                        else {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                    }\n                    if (clashWinner === 'player')\n                        shatteringTarget.value = 'enemy';\n                    else if (clashWinner === 'enemy')\n                        shatteringTarget.value = 'player';\n                    else if (clashWinner === 'tie') {\n                        shatteringTarget.value = 'both';\n                    }\n                    if (resultMsg) {\n                        log(`<span class=\"text-gray-300\">${resultMsg}</span>`);\n                    }\n                    // \n                    const playerBleedStacksOnClash = Math.max(0, getEffectStacks(playerStats.value, ET.BLEED));\n                    if (playerBleedStacksOnClash > 0) {\n                        triggerBleedProc('player', '');\n                    }\n                    const enemyBleedStacksOnClash = Math.max(0, getEffectStacks(enemyStats.value, ET.BLEED));\n                    if (enemyBleedStacksOnClash > 0) {\n                        triggerBleedProc('enemy', '');\n                    }\n                    if (clashWinner === 'enemy') {\n                        changeRerollCharges('player', 1);\n                        log('<span class=\"text-amber-300\"> +1</span>');\n                    }\n                    if (clashWinner === 'player') {\n                        clearBurnForSide('player', '');\n                    }\n                    else if (clashWinner === 'enemy') {\n                        clearBurnForSide('enemy', '');\n                    }\n                    if (clashWinner === 'player') {\n                        const pointMarkCount = getActiveRelicCount('bloodpool_clash_point_mark');\n                        if (pointMarkCount > 0) {\n                            if (applyStatusEffectWithRelics('enemy', ET.BLEED, pointMarkCount, { source: 'relic:bloodpool_clash_point_mark' })) {\n                                logRelicMessage(`[]  ${pointMarkCount} `);\n                            }\n                        }\n                    }\n                    if (successfulDodger === 'player') {\n                        applyLightningAttachOnDodge('player', 'enemy');\n                        applyCardEffectsByTrigger('player', resolvedPlayerCard, pClashPoint, 'on_dodge_success');\n                        if (resolvedPlayerCard.id === 'enemy_inkmouse_cowardice') {\n                            playerStats.value.maxDice += 1;\n                            log('<span class=\"text-cyan-300\"> +1</span>');\n                        }\n                        if (resolvedPlayerCard.id === 'modao_zero_domain_dodge') {\n                            grantNextTurnMagicCostFree('player', resolvedPlayerCard);\n                        }\n                    }\n                    else if (successfulDodger === 'enemy') {\n                        applyLightningAttachOnDodge('enemy', 'player');\n                        applyCardEffectsByTrigger('enemy', resolvedEnemyCard, eClashPoint, 'on_dodge_success');\n                        if (resolvedEnemyCard.id === 'enemy_inkmouse_cowardice') {\n                            enemyStats.value.maxDice += 1;\n                            log('<span class=\"text-cyan-300\"> +1</span>');\n                        }\n                        if (resolvedEnemyCard.id === 'modao_zero_domain_dodge') {\n                            grantNextTurnMagicCostFree('enemy', resolvedEnemyCard);\n                        }\n                    }\n                    if (clashWinner === 'player' && resolvedPlayerCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('player', resolvedEnemyCard);\n                    }\n                    else if (clashWinner === 'enemy' && resolvedEnemyCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('enemy', resolvedPlayerCard);\n                    }\n                    await wait(650);\n                    showClashAnimation.value = false;\n                    clearDicePreview();\n                }\n                else {\n                    await wait(500);\n                    pSuccess = true;\n                    eSuccess = true;\n                }\n                // \n                if (!pSuccess && resolvedPlayerCard.traits.purgeOnUse && resolvedPlayerCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('player', resolvedPlayerCard);\n                }\n                if (!eSuccess && resolvedEnemyCard.traits.purgeOnUse && resolvedEnemyCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('enemy', resolvedEnemyCard);\n                }\n                // Execution Phase - use algorithms.ts for proper damage calculation\n                const executeCard = async (source, card, baseDice) => {\n                    if (endCombatPending.value)\n                        return;\n                    const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n                    const defender = source === 'player' ? enemyStats.value : playerStats.value;\n                    const label = source === 'player' ? '' : '';\n                    const defenderSide = source === 'player' ? 'enemy' : 'player';\n                    const defenderLabel = defenderSide === 'player' ? '' : '';\n                    const opponentSkippedTurn = source === 'player' ? enemySkippedTurn : playerSkippedTurn;\n                    const enemyColdBeforeAction = getEffectStacks(enemyStats.value, ET.COLD);\n                    const playerBurnBeforeAction = getEffectStacks(playerStats.value, ET.BURN);\n                    const playerHpBeforeAction = playerStats.value.hp;\n                    let relicTrackingHandled = false;\n                    if (source === 'enemy' && card.id !== PASS_CARD.id) {\n                        enemyIntentConsumedThisTurn.value = true;\n                    }\n                    if (source === 'player') {\n                        clearPlayerPlayedCard();\n                    }\n                    if (card.id !== PASS_CARD.id) {\n                        log(`${label}${card.name}`);\n                    }\n                    await playResolvedCardAnimation(source, card);\n                    if (endCombatPending.value)\n                        return;\n                    // Calculate final point for this card\n                    const finalPoint = getCardFinalPoint(source, card, baseDice);\n                    const applyCardExtraAttributes = () => {\n                        const selfDamage = resolveCardSelfDamage(card);\n                        if (selfDamage) {\n                            const rawAmount = selfDamage.mode === 'percent'\n                                ? Math.floor(attacker.maxHp * (selfDamage.value / 100))\n                                : Math.floor(selfDamage.value);\n                            const amount = Math.max(0, rawAmount);\n                            if (amount > 0) {\n                                if (selfDamage.target === 'maxHp') {\n                                    const beforeMaxHp = attacker.maxHp;\n                                    const beforeHp = attacker.hp;\n                                    attacker.maxHp = Math.max(0, attacker.maxHp - amount);\n                                    if (attacker.hp > attacker.maxHp) {\n                                        attacker.hp = attacker.maxHp;\n                                    }\n                                    const actualMaxHpLoss = Math.max(0, beforeMaxHp - attacker.maxHp);\n                                    const hpLossByCap = Math.max(0, beforeHp - attacker.hp);\n                                    if (hpLossByCap > 0) {\n                                        pushFloatingNumber(source, hpLossByCap, 'true', '-');\n                                    }\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                                }\n                                else {\n                                    const actualSelfDamage = applyDirectHpLossWithRelics(source, attacker, amount, `${card.name}`);\n                                    if (actualSelfDamage > 0) {\n                                        pushFloatingNumber(source, actualSelfDamage, 'true', '-');\n                                    }\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} ${actualSelfDamage} </span>`);\n                                }\n                                const reviveResult = triggerSwarmReviveIfNeeded(attacker);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                        }\n                        const manaDrain = Math.max(0, Math.floor(card.manaDrain ?? 0));\n                        if (manaDrain > 0) {\n                            const drainResult = changeManaWithShock(defenderSide, -manaDrain, `${label}${card.name}`);\n                            const drainedMana = Math.max(0, -drainResult.actualDelta);\n                            const overflowHpDamage = Math.max(0, manaDrain - drainedMana);\n                            let actualOverflowHpDamage = 0;\n                            if (overflowHpDamage > 0) {\n                                actualOverflowHpDamage = applyDirectHpLossWithRelics(defenderSide, defender, overflowHpDamage, `${card.name}`);\n                                pushFloatingNumber(defenderSide, actualOverflowHpDamage, 'true', '-');\n                            }\n                            const gainResult = changeManaWithShock(source, manaDrain, `${label}${card.name}`, { showPositiveFloating: true });\n                            const gainedMana = Math.max(0, gainResult.actualDelta);\n                            const overflowDamageText = actualOverflowHpDamage > 0\n                                ? ` ${actualOverflowHpDamage} `\n                                : '';\n                            log(`<span class=\"text-blue-300\">${label}${card.name} ${drainedMana}  ${gainedMana} ${overflowDamageText}</span>`);\n                            if (actualOverflowHpDamage > 0) {\n                                const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                        }\n                    };\n                    const triggerPostActionRelicTracking = () => {\n                        if (relicTrackingHandled)\n                            return;\n                        relicTrackingHandled = true;\n                        const enemyColdAfterAction = getEffectStacks(enemyStats.value, ET.COLD);\n                        const reducedCold = Math.max(0, enemyColdBeforeAction - enemyColdAfterAction);\n                        if (reducedCold > 0) {\n                            const frostStorageCount = getActiveRelicCount('yanhan_frost_storage_plate');\n                            if (frostStorageCount > 0) {\n                                const gained = addArmorForSide('player', frostStorageCount);\n                                if (gained > 0) {\n                                    logRelicMessage(`[]  ${gained} `);\n                                }\n                            }\n                            const abyssRiftCount = getActiveRelicCount('yanhan_cold_abyss_rift');\n                            if (abyssRiftCount > 0) {\n                                const trueDamage = 2 * abyssRiftCount;\n                                const actualTrueDamage = applyDirectHpLossWithRelics('enemy', enemyStats.value, trueDamage, '');\n                                pushFloatingNumber('enemy', actualTrueDamage, 'true', '-');\n                                logRelicMessage(`[]  ${actualTrueDamage} `);\n                                const reviveResult = triggerSwarmReviveIfNeeded(enemyStats.value);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                        }\n                        const playerBurnAfterAction = getEffectStacks(playerStats.value, ET.BURN);\n                        const reducedPlayerBurn = Math.max(0, playerBurnBeforeAction - playerBurnAfterAction);\n                        if (reducedPlayerBurn > 0) {\n                            const heatExchangeCount = getActiveRelicCount('burn_heat_exchange_fin');\n                            if (heatExchangeCount > 0) {\n                                const gained = addArmorForSide('player', 5 * heatExchangeCount);\n                                if (gained > 0) {\n                                    logRelicMessage(`[]  ${gained} `);\n                                }\n                            }\n                        }\n                        addPlayerDamageTakenThisTurn(Math.max(0, playerHpBeforeAction - playerStats.value.hp));\n                    };\n                    const finalizeCardExecution = () => {\n                        applyCardExtraAttributes();\n                        queueCardNegativeEffectForPlayer(source, card);\n                        applyInsertTrait(source, card);\n                        applyPurgeTraitAfterUse(source, card);\n                    };\n                    const finalizeAndTrack = () => {\n                        finalizeCardExecution();\n                        triggerPostActionRelicTracking();\n                    };\n                    const triggerLowTempEngraverOnFunctionPlay = () => {\n                        if (source !== 'player')\n                            return;\n                        if (card.id === PASS_CARD.id || card.type !== CardType.FUNCTION)\n                            return;\n                        const count = getActiveRelicCount('yanhan_low_temp_engraver');\n                        if (count <= 0)\n                            return;\n                        if (applyStatusEffectWithRelics('enemy', ET.COLD, count, { source: 'relic:yanhan_low_temp_engraver' })) {\n                            logRelicMessage(`[]  +${count}`);\n                        }\n                    };\n                    const syncCurrentPointForUi = () => {\n                        if (card.type !== CardType.FUNCTION || card.id === PASS_CARD.id)\n                            return;\n                        const nextPoint = Math.max(0, Math.floor(finalPoint));\n                        if (source === 'player') {\n                            if (combatState.value.playerBaseDice !== nextPoint) {\n                                combatState.value.playerBaseDice = nextPoint;\n                                log(`<span class=\"text-dungeon-gold/80\"> ${nextPoint}</span>`);\n                            }\n                        }\n                        else if (combatState.value.enemyBaseDice !== nextPoint) {\n                            combatState.value.enemyBaseDice = nextPoint;\n                        }\n                    };\n                    const applyCardEffects = (trigger = 'on_use') => (applyCardEffectsByTrigger(source, card, finalPoint, trigger));\n                    if (opponentSkippedTurn) {\n                        applyCardEffects('on_opponent_skip');\n                    }\n                    triggerLowTempEngraverOnFunctionPlay();\n                    if (card.id === 'yanhan_zero_boundary_verdict') {\n                        const coldStacks = getEffectStacks(defender, ET.COLD);\n                        if (coldStacks >= 10) {\n                            reduceEffectStacks(defender, ET.COLD, 10);\n                            applyStatusEffectWithRelics(defenderSide, ET.STUN, 1, { source: card.id, lockDecayThisTurn: true });\n                            log(`<span class=\"text-sky-300\">${label}${card.name}101</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}10</span>`);\n                        }\n                        applyCardEffects();\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'bloodpool_ratio_inversion') {\n                        const attackerRatio = attacker.maxHp > 0 ? attacker.hp / attacker.maxHp : 0;\n                        const defenderRatio = defender.maxHp > 0 ? defender.hp / defender.maxHp : 0;\n                        const nextAttackerHp = Math.max(0, Math.min(attacker.maxHp, Math.floor(attacker.maxHp * defenderRatio)));\n                        const nextDefenderHp = Math.max(0, Math.min(defender.maxHp, Math.floor(defender.maxHp * attackerRatio)));\n                        const attackerDelta = nextAttackerHp - attacker.hp;\n                        const defenderDelta = nextDefenderHp - defender.hp;\n                        attacker.hp = nextAttackerHp;\n                        defender.hp = nextDefenderHp;\n                        if (attackerDelta > 0) {\n                            pushFloatingNumber(source, attackerDelta, 'heal', '+');\n                        }\n                        else if (attackerDelta < 0) {\n                            pushFloatingNumber(source, Math.abs(attackerDelta), 'true', '-');\n                        }\n                        if (defenderDelta > 0) {\n                            pushFloatingNumber(defenderSide, defenderDelta, 'heal', '+');\n                        }\n                        else if (defenderDelta < 0) {\n                            pushFloatingNumber(defenderSide, Math.abs(defenderDelta), 'true', '-');\n                        }\n                        log(`<span class=\"text-rose-300\">${label}${card.name} ${Math.round(attackerRatio * 100)}%   ${Math.round(defenderRatio * 100)}%</span>`);\n                        const defenderRevive = triggerSwarmReviveIfNeeded(defender);\n                        for (const reviveLog of defenderRevive.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                        }\n                        const attackerRevive = triggerSwarmReviveIfNeeded(attacker);\n                        for (const reviveLog of attackerRevive.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                        }\n                        applyCardEffects();\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'bloodpool_bleed_transfusion') {\n                        const selfBleed = Math.max(0, getEffectStacks(attacker, ET.BLEED));\n                        if (selfBleed > 0) {\n                            removeEffect(attacker, ET.BLEED);\n                            applyStatusEffectWithRelics(defenderSide, ET.BLEED, selfBleed, { source: card.id });\n                            log(`<span class=\"text-rose-300\">${label}${card.name} ${selfBleed} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const triggerTimes = 3;\n                        for (let i = 0; i < triggerTimes; i += 1) {\n                            const damage = triggerBleedProc(defenderSide, `${label}${card.name}${i + 1}`);\n                            triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, i + 1, triggerTimes, damage, damage);\n                            if (defender.hp <= 0)\n                                break;\n                        }\n                        applyCardEffects();\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_liquidation') {\n                        const cleanseTargets = [...ELEMENTAL_DEBUFF_TYPES];\n                        let removedStacks = 0;\n                        for (const et of cleanseTargets) {\n                            const stacks = getEffectStacks(defender, et);\n                            if (stacks > 0) {\n                                removedStacks += stacks;\n                                removeEffect(defender, et);\n                            }\n                        }\n                        const trueDamage = removedStacks * 2;\n                        if (trueDamage > 0) {\n                            const actualTrueDamage = applyDirectHpLossWithRelics(defenderSide, defender, trueDamage, `${card.name}`);\n                            pushFloatingNumber(defenderSide, actualTrueDamage, 'true', '-');\n                            log(`<span class=\"text-zinc-300\">${label}${card.name} ${removedStacks}  ${actualTrueDamage} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                        }\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_liquid_fire') {\n                        const coldStacks = getEffectStacks(defender, ET.COLD);\n                        if (coldStacks > 0) {\n                            removeEffect(defender, ET.COLD);\n                            applyStatusEffectWithRelics(defenderSide, ET.BURN, coldStacks, { source: card.id });\n                            log(`<span class=\"text-orange-300\">${label}${card.name} ${coldStacks} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_activated_slime') {\n                        const currentElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((et) => ({ type: et, stacks: getEffectStacks(defender, et) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (currentElementals.length > 0) {\n                            const picked = currentElementals[Math.floor(Math.random() * currentElementals.length)];\n                            applyStatusEffectWithRelics(defenderSide, picked.type, picked.stacks, { source: card.id });\n                            log(`<span class=\"text-teal-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_premium_shield') {\n                        const x = Math.max(0, Math.floor(defender.mp));\n                        if (x > 0) {\n                            applyStatusEffectWithRelics(source, ET.STURDY, x, { source: card.id });\n                            attacker.mp += x;\n                            pushFloatingNumber(source, x, 'shield', '+');\n                            pushFloatingNumber(source, x, 'mana', '+');\n                        }\n                        log(`<span class=\"text-cyan-300\">${label}${card.name} ${x}  ${x} </span>`);\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_cunning') {\n                        applyStatusEffectWithRelics(defenderSide, ET.PEEP_FORBIDDEN, 1, { source: card.id });\n                        applyStatusEffectWithRelics(defenderSide, ET.COGNITIVE_INTERFERENCE, 1, { source: card.id });\n                        log(`<span class=\"text-violet-300\">${label}${card.name}</span>`);\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_internal_manipulation') {\n                        const currentCorrosion = Math.max(0, getEffectStacks(defender, ET.CORROSION));\n                        const addStacks = Math.min(10, currentCorrosion);\n                        if (addStacks > 0) {\n                            applyStatusEffectWithRelics(defenderSide, ET.CORROSION, addStacks, { source: card.id });\n                            log(`<span class=\"text-emerald-300\">${label}${card.name} +${addStacks}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_undead_condense') {\n                        const selfElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((type) => ({ type, stacks: getEffectStacks(attacker, type) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (selfElementals.length > 0) {\n                            const picked = selfElementals[Math.floor(Math.random() * selfElementals.length)];\n                            removeEffect(attacker, picked.type);\n                            log(`<span class=\"text-cyan-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        const healAmount = Math.max(0, Math.floor(finalPoint));\n                        const { healed } = healForSide(source, healAmount);\n                        log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_nymph_giant_projection') {\n                        const hadIllusoryBody = getEffectStacks(attacker, ET.ILLUSORY_BODY) > 0;\n                        if (hadIllusoryBody) {\n                            removeEffect(attacker, ET.ILLUSORY_BODY);\n                        }\n                        attacker.minDice += 2;\n                        attacker.maxDice += 4;\n                        if (attacker.minDice > attacker.maxDice) {\n                            attacker.maxDice = attacker.minDice;\n                        }\n                        syncCurrentPointForUi();\n                        log(`<span class=\"text-violet-300\">${label}${card.name}${hadIllusoryBody ? '' : ''} +2 +4 ${attacker.minDice}~${attacker.maxDice}</span>`);\n                        applyCardEffects();\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.id === 'enemy_mata_fungal_repair') {\n                        const poisonAmount = Math.max(0, getEffectStacks(defender, ET.POISON_AMOUNT));\n                        if (poisonAmount > 0) {\n                            removeEffect(defender, ET.POISON_AMOUNT);\n                            log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonAmount} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const triggerCount = Math.floor(poisonAmount / 2);\n                        if (triggerCount > 0) {\n                            const healAmount = triggerCount * 2;\n                            const { healed } = healForSide(source, healAmount);\n                            const beforeMaxHp = defender.maxHp;\n                            const beforeHp = defender.hp;\n                            applyStatusEffectWithRelics(defenderSide, ET.MAX_HP_REDUCTION, triggerCount, { source: card.id });\n                            const actualMaxHpLoss = Math.max(0, beforeMaxHp - defender.maxHp);\n                            const hpLossByCap = Math.max(0, beforeHp - defender.hp);\n                            if (hpLossByCap > 0) {\n                                pushFloatingNumber(defenderSide, hpLossByCap, 'true', '-');\n                            }\n                            log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${triggerCount}  ${healed}  -${actualMaxHpLoss}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n                        }\n                        else if (poisonAmount > 0) {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}2</span>`);\n                        }\n                        finalizeAndTrack();\n                        return;\n                    }\n                    if (card.type === CardType.FUNCTION) {\n                        if (card.id === 'burn_char_convert') {\n                            const burned = getEffectStacks(attacker, ET.BURN);\n                            syncCurrentPointForUi();\n                            if (burned > 0) {\n                                removeEffect(attacker, ET.BURN);\n                                attacker.mp += burned;\n                                pushFloatingNumber(source, burned, 'mana', '+');\n                                log(`<span class=\"text-blue-400\">${label}${card.name} ${burned}  ${burned} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'yanhan_pressure_cycle') {\n                            syncCurrentPointForUi();\n                            const armorStacks = Math.max(0, getEffectStacks(attacker, ET.ARMOR));\n                            const consumedArmor = Math.min(10, armorStacks);\n                            if (consumedArmor > 0) {\n                                reduceEffectStacks(attacker, ET.ARMOR, consumedArmor);\n                            }\n                            const cycles = Math.max(0, Math.floor(consumedArmor / 2));\n                            if (cycles > 0) {\n                                applyStatusEffectWithRelics(defenderSide, ET.COLD, cycles, { source: card.id });\n                                const manaResult = changeManaWithShock(source, cycles, `${label}${card.name}`, {\n                                    showPositiveFloating: true,\n                                });\n                                const restored = Math.max(0, manaResult.actualDelta);\n                                log(`<span class=\"text-sky-300\">${label}${card.name} ${consumedArmor}  ${cycles}  ${restored} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}2</span>`);\n                            }\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'yanhan_cold_source_rectifier') {\n                            syncCurrentPointForUi();\n                            const coldStacks = Math.max(0, getEffectStacks(defender, ET.COLD));\n                            const consumedCold = Math.min(4, coldStacks);\n                            if (consumedCold > 0) {\n                                reduceEffectStacks(defender, ET.COLD, consumedCold);\n                                const { healed } = healForSide(source, consumedCold);\n                                log(`<span class=\"text-cyan-300\">${label}${card.name} ${consumedCold}  ${healed} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'modao_mana_purify') {\n                            syncCurrentPointForUi();\n                            const currentMp = Math.max(0, Math.floor(attacker.mp));\n                            const gain = Math.min(20, currentMp);\n                            if (gain > 0) {\n                                const manaResult = changeManaWithShock(source, gain, `${label}${card.name}`, {\n                                    showPositiveFloating: true,\n                                });\n                                const restored = Math.max(0, manaResult.actualDelta);\n                                log(`<span class=\"text-blue-300\">${label}${card.name} ${restored} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}0</span>`);\n                            }\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'modao_energy_barrier') {\n                            syncCurrentPointForUi();\n                            const consumedMp = Math.min(5, Math.max(0, Math.floor(attacker.mp)));\n                            if (consumedMp > 0) {\n                                changeManaWithShock(source, -consumedMp, `${label}${card.name}`);\n                            }\n                            const armorGain = consumedMp * 2;\n                            if (armorGain > 0) {\n                                applyStatusEffectWithRelics(source, ET.ARMOR, armorGain, { source: card.id });\n                                pushFloatingNumber(source, armorGain, 'shield', '+');\n                                if (source === 'player') {\n                                    handlePlayerArmorGainFromSingleEvent(armorGain, `${card.name}`);\n                                }\n                            }\n                            log(`<span class=\"text-cyan-300\">${label}${card.name} ${consumedMp}  ${armorGain} </span>`);\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'modao_mana_armor') {\n                            syncCurrentPointForUi();\n                            const armorGain = Math.max(0, Math.floor(attacker.mp));\n                            let actualArmorGain = 0;\n                            if (armorGain > 0) {\n                                const armorBefore = Math.max(0, getEffectStacks(attacker, ET.ARMOR));\n                                applyStatusEffectWithRelics(source, ET.ARMOR, armorGain, { source: card.id });\n                                actualArmorGain = Math.max(0, getEffectStacks(attacker, ET.ARMOR) - armorBefore);\n                                if (actualArmorGain > 0) {\n                                    pushFloatingNumber(source, actualArmorGain, 'shield', '+');\n                                    if (source === 'player') {\n                                        handlePlayerArmorGainFromSingleEvent(actualArmorGain, `${card.name}`);\n                                    }\n                                }\n                            }\n                            log(`<span class=\"text-cyan-300\">${label}${card.name} ${actualArmorGain} </span>`);\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'modao_wager') {\n                            syncCurrentPointForUi();\n                            const wagerCost = Math.max(0, Math.floor(finalPoint));\n                            if (wagerCost <= 0) {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                                finalizeAndTrack();\n                                return;\n                            }\n                            const spent = spendManaWithShock(source, wagerCost, `${label}${card.name}`);\n                            if (!spent) {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                                finalizeAndTrack();\n                                return;\n                            }\n                            const beforeBoost = Math.max(0, getEffectStacks(attacker, ET.DAMAGE_BOOST));\n                            applyStatusEffectWithRelics(source, ET.DAMAGE_BOOST, wagerCost, { source: card.id });\n                            const actualBoostGain = Math.max(0, getEffectStacks(attacker, ET.DAMAGE_BOOST) - beforeBoost);\n                            log(`<span class=\"text-rose-300\">${label}${card.name} ${wagerCost}  ${actualBoostGain} </span>`);\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'yanhan_spell_echo') {\n                            syncCurrentPointForUi();\n                            nextMagicDoubleCast.value[source] += 1;\n                            log(`<span class=\"text-sky-300\">${label}${card.name}1</span>`);\n                            finalizeAndTrack();\n                            return;\n                        }\n                        if (card.id === 'bloodpool_life_wall') {\n                            syncCurrentPointForUi();\n                            const missingHp = Math.max(0, Math.floor(attacker.maxHp - attacker.hp));\n                            applyCardEffects();\n                            let actualArmorGain = 0;\n                            if (missingHp > 0) {\n                                const armorBefore = Math.max(0, getEffectStacks(attacker, ET.ARMOR));\n                                applyStatusEffectWithRelics(source, ET.ARMOR, missingHp, { source: card.id });\n                                actualArmorGain = Math.max(0, getEffectStacks(attacker, ET.ARMOR) - armorBefore);\n                                if (actualArmorGain > 0) {\n                                    pushFloatingNumber(source, actualArmorGain, 'shield', '+');\n                                    if (source === 'player') {\n                                        handlePlayerArmorGainFromSingleEvent(actualArmorGain, `${card.name}`);\n                                    }\n                                }\n                            }\n                            if (actualArmorGain > 0) {\n                                log(`<span class=\"text-rose-300\">${label}${card.name} ${actualArmorGain} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                            finalizeAndTrack();\n                            return;\n                        }\n                        // Process card effects (heal, apply_buff, restore_mana, cleanse)\n                        syncCurrentPointForUi();\n                        const hasEffect = applyCardEffects();\n                        if (card.id === 'enemy_rose_nectar_discipline') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                const poisonStacks = Math.max(0, Math.floor(finalPoint));\n                                if (poisonStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: card.id });\n                                    log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonStacks} </span>`);\n                                }\n                            }\n                        }\n                        if (!hasEffect) {\n                            // Fallback for special function cards (e.g. MP recovery)\n                            if (card.id === 'c5') {\n                                attacker.mp += 5;\n                                pushFloatingNumber(source, 5, 'mana', '+');\n                            }\n                        }\n                        finalizeAndTrack();\n                    }\n                    else if (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC) {\n                        if (card.id === 'burn_critical_boil') {\n                            const coldStacks = Math.max(0, getEffectStacks(defender, ET.COLD));\n                            const burnStacks = Math.max(0, getEffectStacks(defender, ET.BURN));\n                            const consumedBurn = Math.max(0, Math.min(burnStacks, Math.floor(coldStacks / 2)));\n                            const consumedCold = consumedBurn * 2;\n                            const trueDamage = consumedBurn * 4;\n                            if (consumedBurn > 0) {\n                                reduceEffectStacks(defender, ET.COLD, consumedCold);\n                                reduceEffectStacks(defender, ET.BURN, consumedBurn);\n                                const actualTrueDamage = applyDirectHpLossWithRelics(defenderSide, defender, trueDamage, `${card.name}`);\n                                if (actualTrueDamage > 0) {\n                                    pushFloatingNumber(defenderSide, actualTrueDamage, 'true', '-');\n                                }\n                                log(`<span class=\"text-orange-300\">${label}${card.name}2:1 ${consumedCold}  ${consumedBurn}  ${actualTrueDamage} </span>`);\n                                triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, 1, 1, actualTrueDamage, actualTrueDamage);\n                                const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                                for (const reviveLog of reviveResult.logs) {\n                                    log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                }\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}2:1</span>`);\n                                triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, 1, 1, 0, 0);\n                            }\n                            applyHitAttachEffects(source, card, attacker, defenderSide);\n                            applyCardEffects();\n                            finalizeAndTrack();\n                            return;\n                        }\n                        const applyEffectsBeforeAttack = card.id === 'yanhan_frost_burst';\n                        if (applyEffectsBeforeAttack) {\n                            applyCardEffects();\n                        }\n                        const burnStacksOnDefender = getEffectStacks(defender, ET.BURN);\n                        const baseHitCount = Math.max(1, Math.floor(card.hitCount ?? 1));\n                        const defenderSwarmStacks = Math.max(0, getEffectStacks(defender, ET.SWARM));\n                        let extraHitCount = card.id === 'enemy_moth_swarm_burst'\n                            ? Math.max(0, getEffectStacks(attacker, ET.SWARM))\n                            : 0;\n                        let arcaneLanceBonusHit = false;\n                        if (card.id === 'modao_echo_feedback') {\n                            extraHitCount += defenderSwarmStacks;\n                        }\n                        if (card.id === 'modao_mana_hurricane') {\n                            const availableMp = Math.min(9, Math.max(0, Math.floor(attacker.mp)));\n                            const consumedMp = Math.floor(availableMp / 3) * 3;\n                            const bonusHits = Math.floor(consumedMp / 3);\n                            if (consumedMp > 0) {\n                                changeManaWithShock(source, -consumedMp, `${label}${card.name}`);\n                            }\n                            extraHitCount += bonusHits;\n                            log(`<span class=\"text-blue-300\">${label}${card.name} ${consumedMp}  ${bonusHits} </span>`);\n                        }\n                        if (card.id === 'modao_ring_collapse') {\n                            const availableMp = Math.min(20, Math.max(0, Math.floor(attacker.mp)));\n                            const consumedMp = Math.floor(availableMp / 4) * 4;\n                            const bonusHits = Math.floor(consumedMp / 4);\n                            if (consumedMp > 0) {\n                                changeManaWithShock(source, -consumedMp, `${label}${card.name}`);\n                            }\n                            extraHitCount += bonusHits;\n                            log(`<span class=\"text-blue-300\">${label}${card.name} ${consumedMp}  ${bonusHits} </span>`);\n                        }\n                        if (card.id === 'modao_arcane_lance' && attacker.mp >= 8) {\n                            const canConsume = spendManaWithShock(source, 4, `${label}${card.name}`);\n                            if (canConsume) {\n                                extraHitCount += 1;\n                                arcaneLanceBonusHit = true;\n                                log(`<span class=\"text-blue-300\">${label}${card.name}41.5</span>`);\n                            }\n                        }\n                        const totalHitCount = baseHitCount + extraHitCount;\n                        if (card.id === 'yanhan_cold_chamber_duplicate') {\n                            const currentCold = getEffectStacks(defender, ET.COLD);\n                            if (currentCold > 0) {\n                                applyStatusEffectWithRelics(defenderSide, ET.COLD, currentCold, { source: card.id });\n                                log(`<span class=\"text-sky-300\">${label}${card.name}+${currentCold}</span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                        }\n                        if (totalHitCount > 1) {\n                            log(`<span class=\"text-violet-300\">${label}${card.name} ${totalHitCount} </span>`);\n                        }\n                        let modaoMagicSwordTotalDamage = 0;\n                        let totalActualDamageDealt = 0;\n                        for (let hit = 0; hit < totalHitCount; hit++) {\n                            // Attack card: calculate damage through the full pipeline\n                            let cardForCalculation = card;\n                            const customDamage = card.id === 'burn_scorch_wind'\n                                ? Math.floor(finalPoint * 0.5) + burnStacksOnDefender\n                                : card.id === 'burn_detonation'\n                                    ? Math.floor(burnStacksOnDefender)\n                                    : card.id === 'yanhan_frost_burst'\n                                        ? Math.max(0, getEffectStacks(defender, ET.COLD))\n                                        : card.id === 'modao_mana_hurricane'\n                                            ? Math.max(0, 12 - Math.floor(finalPoint))\n                                            : card.id === 'modao_prism_flow'\n                                                ? Math.floor(finalPoint * (0.9 + Math.min(2.1, Math.floor(Math.max(0, attacker.mp) / 2) * 0.3)))\n                                                : card.id === 'modao_arcane_lance' && arcaneLanceBonusHit && hit === totalHitCount - 1\n                                                    ? Math.floor(finalPoint * 1.5)\n                                                    : card.id === 'enemy_rose_wangzhi_whip' && getEffectStacks(defender, ET.BIND) > 0\n                                                        ? Math.floor(finalPoint) + 2\n                                                        : null;\n                            if (customDamage !== null) {\n                                cardForCalculation = {\n                                    ...card,\n                                    damageLogic: { mode: 'fixed', value: Math.floor(customDamage) },\n                                };\n                            }\n                            const { damage, isTrueDamage, logs: dmgLogs } = calculateFinalDamage({\n                                finalPoint,\n                                card: cardForCalculation,\n                                attackerEffects: attacker.effects,\n                                defenderEffects: defender.effects,\n                                relicModifiers: NO_RELIC_MOD,\n                            });\n                            const adjustedDamage = defenderSide === 'player'\n                                ? applyPlayerSkinMarkDamageReduction(damage, `${defenderLabel}`)\n                                : damage;\n                            const { actualDamage, logs: applyLogs } = applyDamageToSideWithRelics(defenderSide, defender, adjustedDamage, isTrueDamage, `${card.name}`);\n                            const hitPrefix = totalHitCount > 1 ? `${hit + 1}` : '';\n                            const damageLogColorClass = isTrueDamage ? 'text-zinc-500' : 'text-red-400';\n                            log(`${label}${card.name}${hitPrefix}${finalPoint} <span class=\"${damageLogColorClass} font-bold\">${actualDamage}</span> `);\n                            if (actualDamage > 0) {\n                                const damageKind = isTrueDamage\n                                    ? 'true'\n                                    : (card.type === CardType.MAGIC ? 'magic' : 'physical');\n                                pushFloatingNumber(defenderSide, actualDamage, damageKind, '-');\n                            }\n                            if (card.id === 'modao_magic_sword' && actualDamage > 0) {\n                                modaoMagicSwordTotalDamage += actualDamage;\n                            }\n                            if (actualDamage > 0) {\n                                totalActualDamageDealt += actualDamage;\n                            }\n                            if (card.type === CardType.PHYSICAL && !isTrueDamage && actualDamage > 0) {\n                                const thornStacks = getEffectStacks(defender, ET.THORNS);\n                                if (thornStacks > 0) {\n                                    let reflectedDamage = Math.max(0, Math.floor(actualDamage * 0.5));\n                                    if (source === 'player') {\n                                        reflectedDamage = applyPlayerSkinMarkDamageReduction(reflectedDamage, '');\n                                    }\n                                    if (reflectedDamage > 0) {\n                                        const { actualDamage: actualReflectedDamage, logs: reflectedLogs } = applyDamageToSideWithRelics(source, attacker, reflectedDamage, false, '');\n                                        if (actualReflectedDamage > 0) {\n                                            pushFloatingNumber(source, actualReflectedDamage, 'physical', '-');\n                                        }\n                                        log(`<span class=\"text-lime-300\">${defenderLabel}[]  ${actualReflectedDamage} ${label}</span>`);\n                                        for (const reflectedLog of reflectedLogs) {\n                                            const normalized = reflectedLog.startsWith('') ? `${label}${reflectedLog}` : reflectedLog;\n                                            log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                                        }\n                                        const reviveResult = triggerSwarmReviveIfNeeded(attacker);\n                                        for (const reviveLog of reviveResult.logs) {\n                                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                                        }\n                                    }\n                                }\n                            }\n                            const coldLogs = consumeColdAfterDealingDamage(attacker, actualDamage);\n                            for (const coldLog of coldLogs) {\n                                log(`<span class=\"text-sky-300 text-[9px]\">${label}: ${coldLog}</span>`);\n                            }\n                            for (const dl of dmgLogs) {\n                                if (dl.startsWith(':'))\n                                    continue;\n                                log(`<span class=\"text-gray-500 text-[9px]\">${dl}</span>`);\n                            }\n                            for (const dl of applyLogs) {\n                                const normalized = dl.startsWith('') ? `${defenderLabel}${dl}` : dl;\n                                log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                            }\n                            triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, hit + 1, totalHitCount, adjustedDamage, actualDamage);\n                            applyHitAttachEffects(source, card, attacker, defenderSide);\n                            if (defender.hp <= 0)\n                                break;\n                        }\n                        if (card.id === 'modao_magic_sword' && modaoMagicSwordTotalDamage > 0) {\n                            const manaResult = changeManaWithShock(source, modaoMagicSwordTotalDamage, `${label}${card.name}`, {\n                                showPositiveFloating: true,\n                            });\n                            const restored = Math.max(0, manaResult.actualDelta);\n                            log(`<span class=\"text-blue-300\">${label}${card.name} ${restored} </span>`);\n                        }\n                        if (card.id === 'bloodpool_siphon_slash') {\n                            const healAmount = Math.max(0, Math.floor(totalActualDamageDealt * 0.5));\n                            const { healed } = healForSide(source, healAmount);\n                            log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                        }\n                        if (card.id === 'bloodpool_vital_reservoir') {\n                            const maxHpGain = Math.max(0, Math.floor(totalActualDamageDealt));\n                            if (maxHpGain > 0) {\n                                const beforeMaxHp = attacker.maxHp;\n                                const applied = applyStatusEffectWithRelics(source, ET.TEMP_MAX_HP, maxHpGain, { source: card.id });\n                                const actualMaxHpGain = Math.max(0, attacker.maxHp - beforeMaxHp);\n                                if (applied && actualMaxHpGain > 0) {\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} +${actualMaxHpGain}</span>`);\n                                }\n                                else {\n                                    log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                                }\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                        }\n                        const inkCreationStacks = Math.max(0, getEffectStacks(attacker, ET.INK_CREATION));\n                        if (inkCreationStacks > 0 && totalActualDamageDealt > 0) {\n                            const corrosionStacks = Math.max(0, Math.floor(finalPoint * inkCreationStacks));\n                            if (corrosionStacks > 0) {\n                                applyStatusEffectWithRelics(defenderSide, ET.CORROSION, corrosionStacks, { source: 'effect:ink_creation' });\n                                log(`<span class=\"text-emerald-300\">${label}[]  ${corrosionStacks} </span>`);\n                            }\n                        }\n                        // \n                        if (!applyEffectsBeforeAttack) {\n                            applyCardEffects();\n                        }\n                        if (card.id === 'burn_kindle') {\n                            const burnStacks = Math.max(0, getEffectStacks(defender, ET.BURN));\n                            if (burnStacks > 0) {\n                                applyStatusEffectWithRelics(defenderSide, ET.BURN, burnStacks, { source: card.id });\n                                log(`<span class=\"text-orange-300\">${label}${card.name}+${burnStacks}</span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                        }\n                        if (card.id === 'bloodpool_blood_debt_strike') {\n                            const bleedStacks = 3;\n                            if (applyStatusEffectWithRelics(defenderSide, ET.BLEED, bleedStacks, { source: card.id })) {\n                                log(`<span class=\"text-rose-300\">${label}${card.name} ${bleedStacks} </span>`);\n                            }\n                        }\n                        if (card.id === 'bloodpool_scar_burst') {\n                            const bleedDamage = triggerBleedProc(defenderSide, `${label}${card.name}`);\n                            triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, 1, 1, bleedDamage, bleedDamage);\n                            const bleedStacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                            if (bleedStacks > 0) {\n                                if (applyStatusEffectWithRelics(defenderSide, ET.BLEED, bleedStacks, { source: card.id })) {\n                                    log(`<span class=\"text-rose-300\">${label}${card.name} ${bleedStacks} </span>`);\n                                }\n                            }\n                        }\n                        if (card.id === 'yanhan_feedback_freeze_wheel') {\n                            const armorGain = Math.max(0, Math.floor(getEffectStacks(defender, ET.COLD) / 2));\n                            if (armorGain > 0) {\n                                applyStatusEffectWithRelics(source, ET.ARMOR, armorGain, { source: card.id });\n                                pushFloatingNumber(source, armorGain, 'shield', '+');\n                                if (source === 'player') {\n                                    handlePlayerArmorGainFromSingleEvent(armorGain, `${card.name}`);\n                                }\n                                log(`<span class=\"text-cyan-300\">${label}${card.name} ${armorGain} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_blissbee_aphro_stinger') {\n                            const targetHasVulnerable = getEffectStacks(defender, ET.VULNERABLE) > 0;\n                            if (targetHasVulnerable) {\n                                const poisonStacks = 2;\n                                if (poisonStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: card.id });\n                                }\n                                log(`<span class=\"text-emerald-300\">${label}${card.name} ${poisonStacks} </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_blissbee_precise_harvest') {\n                            const targetHasPoison = getEffectStacks(defender, ET.POISON) > 0;\n                            if (targetHasPoison) {\n                                const shockStacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                                if (shockStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.SHOCK, shockStacks, { source: card.id });\n                                }\n                                log(`<span class=\"text-indigo-300\">${label}${card.name} ${shockStacks} </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_rose_life_drain') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                const healAmount = Math.max(0, Math.floor(finalPoint));\n                                const { healed } = healForSide(source, healAmount);\n                                if (healed > 0) {\n                                    log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                                }\n                            }\n                        }\n                        if (card.id === 'enemy_ursula_whip_punish') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                const vulnerableStacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                                if (vulnerableStacks > 0) {\n                                    applyStatusEffectWithRelics(defenderSide, ET.VULNERABLE, vulnerableStacks, { source: card.id });\n                                    log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${vulnerableStacks} </span>`);\n                                }\n                            }\n                        }\n                        if (card.id === 'enemy_floating_page_sensory_infusion') {\n                            const targetCorrosion = Math.max(0, getEffectStacks(defender, ET.CORROSION));\n                            if (targetCorrosion > 0) {\n                                applyStatusEffectWithRelics(defenderSide, ET.POISON, targetCorrosion, { source: card.id });\n                                log(`<span class=\"text-emerald-300\">${label}${card.name} ${targetCorrosion} </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_floating_page_forced_immersion') {\n                            const targetHasBind = getEffectStacks(defender, ET.BIND) > 0;\n                            if (targetHasBind) {\n                                applyStatusEffectWithRelics(defenderSide, ET.COGNITIVE_INTERFERENCE, 1, { source: card.id });\n                                log(`<span class=\"text-violet-300\">${label}${card.name} 1 </span>`);\n                            }\n                        }\n                        if (card.id === 'enemy_muxinlan_unstable_reagent') {\n                            const stacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                            if (stacks > 0) {\n                                const picked = ELEMENTAL_DEBUFF_TYPES[Math.floor(Math.random() * ELEMENTAL_DEBUFF_TYPES.length)];\n                                applyStatusEffectWithRelics(defenderSide, picked, stacks, { source: card.id });\n                                log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[picked]?.name ?? picked}</span>`);\n                            }\n                        }\n                        finalizeAndTrack();\n                    }\n                    else {\n                        finalizeAndTrack();\n                    }\n                };\n                const applyPointSuppressBeforeQueue = () => {\n                    const playerSuppress = (pSuccess && resolvedPlayerCard.id === 'basic_point_suppress')\n                        ? Math.max(0, getCardPreviewPoint('player', resolvedPlayerCard, resolvedPlayerDice))\n                        : 0;\n                    const enemySuppress = (eSuccess && resolvedEnemyCard.id === 'basic_point_suppress')\n                        ? Math.max(0, getCardPreviewPoint('enemy', resolvedEnemyCard, resolvedEnemyDice))\n                        : 0;\n                    if (playerSuppress > 0 && resolvedEnemyCard.id !== PASS_CARD.id) {\n                        const before = resolvedEnemyDice;\n                        resolvedEnemyDice = Math.max(0, resolvedEnemyDice - playerSuppress);\n                        const reduced = Math.max(0, before - resolvedEnemyDice);\n                        if (reduced > 0) {\n                            combatState.value.enemyBaseDice = resolvedEnemyDice;\n                            log(`<span class=\"text-amber-300\">${resolvedPlayerCard.name} -${reduced}${before}${resolvedEnemyDice}</span>`);\n                        }\n                    }\n                    if (enemySuppress > 0 && resolvedPlayerCard.id !== PASS_CARD.id) {\n                        const before = resolvedPlayerDice;\n                        resolvedPlayerDice = Math.max(0, resolvedPlayerDice - enemySuppress);\n                        const reduced = Math.max(0, before - resolvedPlayerDice);\n                        if (reduced > 0) {\n                            combatState.value.playerBaseDice = resolvedPlayerDice;\n                            log(`<span class=\"text-amber-300\">${resolvedEnemyCard.name} -${reduced}${before}${resolvedPlayerDice}</span>`);\n                        }\n                    }\n                };\n                applyPointSuppressBeforeQueue();\n                const queue = [];\n                let deferredEnemyAction = null;\n                if (pSuccess)\n                    queue.push({ source: 'player', card: resolvedPlayerCard, type: resolvedPlayerCard.type, baseDice: resolvedPlayerDice });\n                if (eSuccess) {\n                    const enemyAction = { source: 'enemy', card: resolvedEnemyCard, type: resolvedEnemyCard.type, baseDice: resolvedEnemyDice };\n                    if (resolvedPlayerCard.traits.combo) {\n                        // \n                        deferredEnemyAction = enemyAction;\n                    }\n                    else {\n                        queue.push(enemyAction);\n                    }\n                }\n                const typePriority = (t) => {\n                    if (t === CardType.FUNCTION)\n                        return 3;\n                    if (t === CardType.MAGIC)\n                        return 2;\n                    if (t === CardType.PHYSICAL)\n                        return 1;\n                    return 0;\n                };\n                queue.sort((a, b) => typePriority(b.type) - typePriority(a.type));\n                const executeActionWithMagicEcho = async (action) => {\n                    await executeCard(action.source, action.card, action.baseDice);\n                    if (action.type !== CardType.MAGIC)\n                        return;\n                    const pending = Math.max(0, nextMagicDoubleCast.value[action.source]);\n                    if (pending <= 0)\n                        return;\n                    nextMagicDoubleCast.value[action.source] = pending - 1;\n                    const sourceLabel = action.source === 'player' ? '' : '';\n                    log(`<span class=\"text-sky-300\">${sourceLabel}[] </span>`);\n                    if (endCombatPending.value)\n                        return;\n                    await wait(320);\n                    if (endCombatPending.value)\n                        return;\n                    await executeCard(action.source, action.card, action.baseDice);\n                };\n                const shouldRunSimultaneousVisuals = (queue.length === 2\n                    && queue.every((action) => action.type === CardType.DODGE || action.type === CardType.FUNCTION));\n                if (shouldRunSimultaneousVisuals) {\n                    await Promise.all(queue.map((action) => executeActionWithMagicEcho(action)));\n                    if (endCombatPending.value)\n                        return;\n                    await wait(630);\n                }\n                else {\n                    for (const action of queue) {\n                        if (endCombatPending.value)\n                            break;\n                        await executeActionWithMagicEcho(action);\n                        if (endCombatPending.value)\n                            break;\n                        await wait(630);\n                    }\n                }\n                stopAllCardAnimations();\n                if (endCombatPending.value)\n                    return;\n                //  draw  1 \n                if (resolvedPlayerCard.traits.combo) {\n                    if (resolvedPlayerCard.traits.draw) {\n                        const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                        combatState.value.playerDeck = newDeck;\n                        combatState.value.discardPile = newDiscard;\n                        combatState.value.playerHand = [...combatState.value.playerHand, ...drawn];\n                    }\n                    if (combatState.value.playerHand.length > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        combatState.value.playerSelectedCard = null;\n                        combatState.value.phase = CombatPhase.PLAYER_INPUT;\n                        return;\n                    }\n                    // \n                    if (deferredEnemyAction && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        if (endCombatPending.value)\n                            return;\n                        await executeActionWithMagicEcho(deferredEnemyAction);\n                        if (endCombatPending.value)\n                            return;\n                        await wait(630);\n                    }\n                }\n                if (playerStats.value.hp <= 0 || enemyStats.value.hp <= 0)\n                    return;\n                // End-of-turn effect processing (armor halving, stun clear, etc.)\n                const playerArmorBeforeEnd = getEffectStacks(playerStats.value, ET.ARMOR);\n                const pEndLogs = processOnTurnEnd(playerStats.value);\n                const eEndLogs = processOnTurnEnd(enemyStats.value);\n                const playerArmorAfterEnd = getEffectStacks(playerStats.value, ET.ARMOR);\n                const armorLostOnDecay = Math.max(0, playerArmorBeforeEnd - playerArmorAfterEnd);\n                const sealCircuitCount = getActiveRelicCount('yanhan_seal_circuit');\n                if (sealCircuitCount > 0 && armorLostOnDecay > 0) {\n                    const pending = Math.max(0, Math.floor((armorLostOnDecay * sealCircuitCount) / 3));\n                    if (pending > 0) {\n                        sealCircuitPendingMana.value += pending;\n                        logRelicMessage(`[]  ${armorLostOnDecay} ${pending} `);\n                    }\n                }\n                const reverseShellCount = getActiveRelicCount('yanhan_reverse_phase_shell');\n                if (reverseShellCount > 0 && playerDamageTakenThisTurn.value >= 10) {\n                    const coldStacks = 2 * reverseShellCount;\n                    if (applyStatusEffectWithRelics('enemy', ET.COLD, coldStacks, { source: 'relic:yanhan_reverse_phase_shell' })) {\n                        logRelicMessage(`[]  ${playerDamageTakenThisTurn.value} ${coldStacks} `);\n                    }\n                }\n                for (const l of [...pEndLogs, ...eEndLogs]) {\n                    log(`<span class=\"text-gray-500 text-[9px]\">${l}</span>`);\n                }\n                triggerPlayerRelicLifecycleHooks('onTurnEnd');\n                const magicDollCount = getActiveRelicCount('modao_magic_doll');\n                if (magicDollCount > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                    for (let i = 0; i < magicDollCount; i++) {\n                        const canSpend = spendManaWithShock('player', 1, '');\n                        if (!canSpend)\n                            break;\n                        const { actualDamage, logs: dollLogs } = applyDamageToSideWithRelics('enemy', enemyStats.value, 2, false, '');\n                        if (actualDamage > 0) {\n                            pushFloatingNumber('enemy', actualDamage, 'magic', '-');\n                        }\n                        logRelicMessage(`[] 1 ${actualDamage} `);\n                        for (const dl of dollLogs) {\n                            const normalized = dl.startsWith('') ? `${dl}` : dl;\n                            log(`<span class=\"text-gray-500 text-[9px]\">${normalized}</span>`);\n                        }\n                        if (enemyStats.value.hp <= 0)\n                            break;\n                    }\n                }\n                // Cleanup\n                combatState.value.discardPile = [...combatState.value.discardPile, ...combatState.value.playerHand];\n                combatState.value.playerHand = [];\n                combatState.value.turn += 1;\n                combatState.value.phase = CombatPhase.TURN_START;\n            }\n            finally {\n                comboUiMaskBridge.value = false;\n            }\n        };\n        // Watch for RESOLUTION phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.RESOLUTION &&\n                combatState.value.playerSelectedCard &&\n                combatState.value.enemyIntentCard &&\n                !showClashAnimation.value) {\n                resolveCombat(combatState.value.playerSelectedCard, combatState.value.enemyIntentCard, combatState.value.playerBaseDice, combatState.value.enemyBaseDice);\n            }\n        });\n        const runEndCombatSequence = async (win) => {\n            const token = ++endCombatSequenceToken;\n            await wait(HP_BAR_ANIMATION_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            await wait(RESULT_DELAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            stopAllCardAnimations();\n            battleResultBanner.value = win ? 'win' : 'lose';\n            combatState.value.phase = win ? CombatPhase.WIN : CombatPhase.LOSE;\n            await wait(RESULT_BANNER_STAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            setFatigueDegree(0);\n            const finalPlayerStats = cloneEntityStats(playerStats.value);\n            if (getEffectStacks(finalPlayerStats, ET.TEMP_MAX_HP) > 0) {\n                removeEffect(finalPlayerStats, ET.TEMP_MAX_HP);\n            }\n            emit('endCombat', win, finalPlayerStats, [...combatState.value.logs], [...pendingCardNegativeEffects.value]);\n        };\n        watch(() => playerStats.value.hp, (nextHp, prevHp) => {\n            if (endCombatPending.value)\n                return;\n            if (!Number.isFinite(nextHp) || !Number.isFinite(prevHp))\n                return;\n            const maxHp = Math.max(1, playerStats.value.maxHp);\n            const halfHp = maxHp * 0.5;\n            const prevHalfState = prevHp > halfHp ? 1 : (prevHp < halfHp ? -1 : 0);\n            const nextHalfState = nextHp > halfHp ? 1 : (nextHp < halfHp ? -1 : 0);\n            const crossedHalf = prevHalfState * nextHalfState === -1;\n            const resonanceCount = getActiveRelicCount('bloodpool_halfline_resonance');\n            if (crossedHalf && resonanceCount > 0 && enemyStats.value.hp > 0) {\n                for (let i = 0; i < resonanceCount; i += 1) {\n                    const damage = triggerBleedProc('enemy', `[] ${i + 1}/${resonanceCount}`);\n                    if (damage <= 0 || enemyStats.value.hp <= 0)\n                        break;\n                }\n            }\n            const reboundCount = getActiveRelicCount('bloodpool_critical_rebound');\n            if (reboundCount > 0\n                && !bloodpoolCriticalReboundTriggered.value\n                && nextHp > 0\n                && nextHp < halfHp) {\n                bloodpoolCriticalReboundTriggered.value = true;\n                const { healed } = healForSide('player', 5 * reboundCount);\n                logRelicMessage(`[]  ${healed} `);\n            }\n        });\n        // /\n        watch([\n            () => playerStats.value.hp,\n            () => enemyStats.value.hp,\n            () => getEffectStacks(playerStats.value, ET.POISON_AMOUNT),\n            () => getEffectStacks(enemyStats.value, ET.POISON_AMOUNT),\n        ], () => {\n            if (endCombatPending.value || poisonAmountImmediateCheckRunning)\n                return;\n            poisonAmountImmediateCheckRunning = true;\n            try {\n                applyImmediatePoisonAmountLethalCheck('player');\n                applyImmediatePoisonAmountLethalCheck('enemy');\n            }\n            finally {\n                poisonAmountImmediateCheckRunning = false;\n            }\n        });\n        // Win/Lose check\n        watch([() => playerStats.value.hp, () => enemyStats.value.hp], ([pHp, eHp]) => {\n            if (endCombatPending.value)\n                return;\n            let win = null;\n            if (pHp <= 0)\n                win = false;\n            else if (eHp <= 0)\n                win = true;\n            if (win === null)\n                return;\n            endCombatPending.value = true;\n            void runEndCombatSequence(win);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"combatRootEl\",\n                ref: combatRootEl,\n                class: _normalizeClass([\"combat-root w-full h-full bg-[#1a1a22] text-dungeon-paper font-ui relative overflow-hidden select-none\", [_unref(screenShake) ? 'animate-shake' : '', _unref(impactShake) ? 'animate-impact-shake' : '']]),\n                style: _normalizeStyle(_unref(combatRootStyle))\n            }, [\n                _createCommentVNode(\" Background \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Dynamic background image \"),\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Fallback gradient \"),\n                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(40,35,50,0.5),_#0e0e14_90%)]\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\" Darken overlay for readability \"),\n                    _cache[33] || (_cache[33] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/40\" }, null, -1 /* CACHED */))\n                ]),\n                _cache[57] || (_cache[57] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-20 z-0 mix-blend-overlay bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Top Left: Settings \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (settingsOpen.value = !_unref(settingsOpen)))\n                    }, [\n                        _createVNode(_unref(Settings2), { class: \"size-5\" }),\n                        _cache[34] || (_cache[34] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (emit('openDeck')))\n                    }, [\n                        _createVNode(_unref(Scroll), { class: \"size-5\" }),\n                        _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (emit('openRelics')))\n                    }, [\n                        _createVNode(_unref(Box), { class: \"size-5\" }),\n                        _cache[36] || (_cache[36] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    (_unref(settingsOpen))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => (_isRef(battleSpeedUp) ? (battleSpeedUp).value = $event : null)),\n                                        type: \"checkbox\",\n                                        class: \"accent-dungeon-gold\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(battleSpeedUp)]\n                                    ]),\n                                    _cache[37] || (_cache[37] = _createElementVNode(\"span\", null, \"2x\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"h-8 rounded-lg border border-white/20 bg-[#252030]/80 px-2 text-xs text-dungeon-gold hover:border-dungeon-gold/60 hover:bg-[#352a40] transition-colors\",\n                                    onClick: _cache[4] || (_cache[4] =\n                                        //@ts-ignore\n                                        (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                }, \"  \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" Top Center: Turn Counter \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"text-xs text-white/60 tracking-widest\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(combatState).turn), 1 /* TEXT */),\n                        _createElementVNode(\"div\", {\n                            class: \"mt-1.5 w-44 relative pointer-events-auto\",\n                            style: _normalizeStyle(_unref(fatigueBarStyle)),\n                            onMouseenter: showFatigueHelp,\n                            onMouseleave: hideFatigueHelp\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", {\n                                    class: \"h-full bg-gradient-to-r from-amber-400 via-orange-400 to-red-500 transition-all duration-500\",\n                                    style: _normalizeStyle(withTransition({ width: `${_unref(fatigueDegreePercent)}%` }, 500))\n                                }, null, 4 /* STYLE */)\n                            ]),\n                            (_unref(fatigueHelpVisible) && _unref(fatigueDegree) > 50)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, \" \" + _toDisplayString(_unref(fatigueDegree)) + \"/300 +10 +1200300 \", 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 36 /* STYLE, NEED_HYDRATION */),\n                        (_unref(dicePreviewPanels).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(dicePreviewPanels), (panel) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: panel.key,\n                                        class: \"px-1 text-left\"\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_13, _toDisplayString(panel.title), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(panel.lines, (line, idx) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: `${panel.key}-line-${idx}`,\n                                                    class: \"text-sm leading-relaxed text-white/90 [text-shadow:0_1px_2px_rgba(0,0,0,0.9)]\"\n                                                }, _toDisplayString(line), 1 /* TEXT */));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\" Battlefield Layer \"),\n                _createElementVNode(\"div\", _hoisted_15, [\n                    _createCommentVNode(\" Enemy Position: Top Right \"),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                        _createCommentVNode(\" Enemy Intent Card \"),\n                        (_unref(showEnemyIntentCard) && _unref(combatState).enemyIntentCard)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"absolute -top-5 left-0 text-amber-200/80 text-[10px] px-2 py-0.5 rounded\" }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_19, [\n                                        _createVNode(DungeonCard, {\n                                            card: _unref(combatState).enemyIntentCard,\n                                            \"mask-level\": _unref(enemyIntentMaskLevel),\n                                            \"is-enemy\": \"\",\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\", \"mask-level\"])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 1,\n                                class: \"absolute -left-24 bottom-20 z-20 animate-float pointer-events-auto\",\n                                onMouseenter: handleEnemyDiceHoverStart,\n                                onMouseleave: handleEnemyDiceHoverEnd,\n                                onTouchstartPassive: handleEnemyDiceTouchStart,\n                                onTouchend: handleEnemyDiceTouchEnd,\n                                onTouchcancel: handleEnemyDiceTouchEnd\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayEnemyDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(enemyStats).minDice,\n                                    \"rolling-max\": _unref(enemyStats).maxDice,\n                                    \"number-class\": _unref(enemyDiceNumberClass),\n                                    color: \"red\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"])\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _createCommentVNode(\" Placeholder icon (shown when portrait fails to load) \"),\n                                (_unref(enemyPortraitError))\n                                    ? (_openBlock(), _createBlock(_unref(Skull), {\n                                        key: 0,\n                                        class: \"w-48 h-48 text-red-900/20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n                                    }))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Enemy portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(enemyPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"enemy portrait\",\n                                            onError: _cache[5] || (_cache[5] = ($event) => (enemyPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_22)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Enemy Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_23, [\n                            _createElementVNode(\"div\", _hoisted_24, [\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(enemyDisplayName)), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('enemy'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", [popup.colorClass, popup.kind === 'heal' ? 'combat-float-number--heal' : '']]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(enemyArmor) > 0 || _unref(enemyPoisonAmount) > 0 || _unref(enemyTempMaxHp) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                    (_unref(enemyArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[6] || (_cache[6] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[7] || (_cache[7] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[8] || (_cache[8] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[40] || (_cache[40] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(enemyArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_27))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(enemyPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[10] || (_cache[10] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[11] || (_cache[11] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[41] || (_cache[41] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_30, _toDisplayString(_unref(enemyPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_29))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(enemyTempMaxHp) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 2,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyTempMaxHp)}. ${getEffectDescription(_unref(ET).TEMP_MAX_HP)}`,\n                                            onMouseenter: _cache[12] || (_cache[12] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(enemyTempMaxHp))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[13] || (_cache[13] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(enemyTempMaxHp))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[14] || (_cache[14] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(enemyTempMaxHp))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[42] || (_cache[42] = _createElementVNode(\"span\", { class: \"text-[10px] text-rose-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_32, _toDisplayString(_unref(enemyTempMaxHp)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_31))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                _cache[43] || (_cache[43] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_34, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyStats).maxHp > 0 ? (_unref(enemyStats).hp / _unref(enemyStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_35, _toDisplayString(_unref(enemyStats).hp) + \"/\" + _toDisplayString(_unref(enemyStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_36, [\n                                _cache[44] || (_cache[44] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_37, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(enemyStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(_unref(enemyStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_39, [\n                                _cache[45] || (_cache[45] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_40, _toDisplayString(_unref(enemyStats).minDice) + \" ~ \" + _toDisplayString(_unref(enemyStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(enemyVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(enemyVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `enemy-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff)),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff)),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff)),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (getEffectFontAwesomeClass(eff.type))\n                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                    key: 0,\n                                                    class: _normalizeClass([getEffectFontAwesomeClass(eff.type), 'text-[14px] leading-none']),\n                                                    style: _normalizeStyle(getEffectFontAwesomeStyle(eff.type)),\n                                                    \"aria-hidden\": \"true\"\n                                                }, null, 6 /* CLASS, STYLE */))\n                                                : (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), {\n                                                    key: 1,\n                                                    class: \"size-3.5\"\n                                                })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_43, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_42));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Player Position: Bottom Left \"),\n                    _createElementVNode(\"div\", _hoisted_44, [\n                        _createCommentVNode(\" Player Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: _normalizeClass([\"absolute -top-[1rem] left-[140%] -translate-x-1/2 z-20 animate-float pointer-events-auto\", _unref(canPlayerRerollDice) ? 'cursor-pointer' : 'cursor-default']),\n                                title: _unref(playerDiceRerollHint),\n                                style: { \"animation-delay\": \"1s\" },\n                                onClick: handlePlayerDiceClick\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayPlayerDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(playerStats).minDice,\n                                    \"rolling-max\": _unref(playerStats).maxDice,\n                                    \"number-class\": _unref(playerDiceNumberClass),\n                                    color: \"gold\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(playerDiceRerollCharges) > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 0,\n                                        class: _normalizeClass([\"absolute left-1/2 top-[5.9rem] -translate-x-1/2 rounded-md border border-amber-300/35 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap\", _unref(canPlayerRerollDice) ? 'text-amber-200' : 'text-amber-200/70'])\n                                    }, \" \" + _toDisplayString(_unref(playerDiceRerollCharges)), 3 /* TEXT, CLASS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 10 /* CLASS, PROPS */, _hoisted_45))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Player Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_46, [\n                            _createElementVNode(\"div\", _hoisted_47, [\n                                _createCommentVNode(\" Placeholder glow (shown when portrait fails to load) \"),\n                                (_unref(playerPortraitError))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Player portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(playerPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"player portrait\",\n                                            onError: _cache[15] || (_cache[15] = ($event) => (playerPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_49)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Player Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_50, [\n                            _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"flex justify-between text-xs text-white/80 font-bold mb-1.5\" }, [\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_51, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('player'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", [popup.colorClass, popup.kind === 'heal' ? 'combat-float-number--heal' : '']]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(playerArmor) > 0 || _unref(playerPoisonAmount) > 0 || _unref(playerTempMaxHp) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [\n                                    (_unref(playerArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[16] || (_cache[16] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[17] || (_cache[17] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[18] || (_cache[18] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[46] || (_cache[46] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_54, _toDisplayString(_unref(playerArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_53))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(playerPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[19] || (_cache[19] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[20] || (_cache[20] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[21] || (_cache[21] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[47] || (_cache[47] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_56, _toDisplayString(_unref(playerPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_55))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(playerTempMaxHp) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 2,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerTempMaxHp)}. ${getEffectDescription(_unref(ET).TEMP_MAX_HP)}`,\n                                            onMouseenter: _cache[22] || (_cache[22] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(playerTempMaxHp)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[23] || (_cache[23] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(playerTempMaxHp)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[24] || (_cache[24] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).TEMP_MAX_HP, _unref(playerTempMaxHp)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[48] || (_cache[48] = _createElementVNode(\"span\", { class: \"text-[10px] text-rose-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_58, _toDisplayString(_unref(playerTempMaxHp)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_57))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_59, [\n                                _cache[49] || (_cache[49] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_60, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerStats).maxHp > 0 ? (_unref(playerStats).hp / _unref(playerStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_61, _toDisplayString(_unref(playerStats).hp) + \"/\" + _toDisplayString(_unref(playerStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_62, [\n                                _cache[50] || (_cache[50] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_63, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(playerStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_64, _toDisplayString(_unref(playerStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_65, [\n                                _cache[51] || (_cache[51] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_66, _toDisplayString(_unref(playerStats).minDice) + \" ~ \" + _toDisplayString(_unref(playerStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(playerVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_67, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `player-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff, 'right')),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (getEffectFontAwesomeClass(eff.type))\n                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                    key: 0,\n                                                    class: _normalizeClass([getEffectFontAwesomeClass(eff.type), 'text-[14px] leading-none']),\n                                                    style: _normalizeStyle(getEffectFontAwesomeStyle(eff.type)),\n                                                    \"aria-hidden\": \"true\"\n                                                }, null, 6 /* CLASS, STYLE */))\n                                                : (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), {\n                                                    key: 1,\n                                                    class: \"size-3.5\"\n                                                })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_69, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_68));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Card Animation Layer \"),\n                _createElementVNode(\"div\", _hoisted_70, [\n                    (_unref(playerPlayedCardVisual))\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"absolute player-played-card\",\n                            style: _normalizeStyle(_unref(playerPlayedCardStyle))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass(_unref(playerPlayedCardVisual).entered ? 'player-played-card-bob' : '')\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: _unref(playerPlayedCardVisual).card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 4 /* STYLE */))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedCardVisualEntries), (visual) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: visual.id,\n                            class: _normalizeClass([\"resolved-card-visual\", visual.source === 'player' ? 'resolved-card-visual--player' : 'resolved-card-visual--enemy'])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"resolved-card-visual-inner\", resolvedCardVisualInnerClass(visual)])\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: visual.card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" UI Layer (HUD) \"),\n                _createElementVNode(\"div\", _hoisted_71, [\n                    _createCommentVNode(\" Center: Clash Zone \"),\n                    _createElementVNode(\"div\", _hoisted_72, [\n                        _createCommentVNode(\" Clash Animation Stage \"),\n                        (_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_73, [\n                                _createCommentVNode(\" Player Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute right-1/2 mr-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'player' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-left']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayPlayerDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(playerStats).minDice,\n                                        \"rolling-max\": _unref(playerStats).maxDice,\n                                        color: \"gold\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */),\n                                _createCommentVNode(\" Enemy Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute left-1/2 ml-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'enemy' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-right']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayEnemyDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(enemyStats).minDice,\n                                        \"rolling-max\": _unref(enemyStats).maxDice,\n                                        color: \"red\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" Bottom Bar: Hand & Piles \"),\n                    _createElementVNode(\"div\", _hoisted_74, [\n                        _createCommentVNode(\" Center: Hand Cards \"),\n                        _createElementVNode(\"div\", _hoisted_75, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).playerHand, (card, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: handCardKey(card),\n                                    class: _normalizeClass([\"transition-all duration-500 origin-bottom\", [handCardClass(card), isCardShaking(card) ? 'invalid-card-shake' : '']]),\n                                    style: _normalizeStyle(transitionStyle(500)),\n                                    onMouseenter: ($event) => (handlePlayerCardHoverStart(card)),\n                                    onMouseleave: handlePlayerCardHoverEnd,\n                                    onTouchstartPassive: ($event) => (handlePlayerCardTouchStart(card)),\n                                    onTouchend: handlePlayerCardTouchEnd,\n                                    onTouchcancel: handlePlayerCardTouchEnd\n                                }, [\n                                    _createVNode(DungeonCard, {\n                                        card: getDisplayHandCard(card),\n                                        \"mask-level\": _unref(playerHandMaskLevel),\n                                        disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT && _unref(combatState).playerSelectedCard !== card,\n                                        onClick: ($event) => (handleCardSelect(card, idx))\n                                    }, null, 8 /* PROPS */, [\"card\", \"mask-level\", \"disabled\", \"onClick\"])\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_76));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Right Corner: Skip + Active Skills \"),\n                        _createElementVNode(\"div\", _hoisted_77, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-5 bg-[#252030]/90 border border-white/15 rounded-lg text-xs text-white/80 hover:border-amber-400 hover:text-amber-200 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed\",\n                                disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT,\n                                onClick: handleSkipTurn\n                            }, \"  \", 8 /* PROPS */, _hoisted_78),\n                            _createElementVNode(\"div\", _hoisted_79, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerActiveSkillSlots), (slot) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: `active-skill-slot-${slot.idx}`,\n                                        type: \"button\",\n                                        class: _normalizeClass([\"relative w-30 h-44 rounded-xl border-2 shadow-xl overflow-hidden transition-all\", [\n                                                slot.skill\n                                                    ? 'border-zinc-100/85 bg-[#1b1722] text-dungeon-paper'\n                                                    : 'border-white/20 bg-[#15131c]/95 text-white/45',\n                                                activeSkillDisabledReason(slot.idx)\n                                                    ? 'opacity-80 cursor-not-allowed grayscale-[0.2]'\n                                                    : 'hover:-translate-y-1 hover:shadow-[0_0_24px_rgba(255,255,255,0.16)] active:scale-[0.98]',\n                                            ]]),\n                                        disabled: Boolean(activeSkillDisabledReason(slot.idx)),\n                                        onClick: ($event) => (useActiveSkill(slot.idx))\n                                    }, [\n                                        _createElementVNode(\"div\", {\n                                            class: _normalizeClass([\"absolute inset-0\", slot.skill\n                                                    ? 'bg-[radial-gradient(circle_at_32%_18%,rgba(255,255,255,0.2),rgba(20,18,28,0.95)_66%)]'\n                                                    : 'bg-[radial-gradient(circle_at_32%_18%,rgba(255,255,255,0.08),rgba(16,14,22,0.96)_66%)]'])\n                                        }, null, 2 /* CLASS */),\n                                        (slot.skill)\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                _createElementVNode(\"div\", _hoisted_81, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: _normalizeClass([\"w-6 h-6 rounded-full text-[10px] font-bold flex items-center justify-center border shadow-md\", slot.skill.manaCost > 0\n                                                                ? 'bg-purple-700/80 text-white border-purple-300/40'\n                                                                : 'bg-zinc-700/60 text-zinc-100 border-zinc-300/35'])\n                                                    }, _toDisplayString(slot.skill.manaCost), 3 /* TEXT, CLASS */),\n                                                    _cache[53] || (_cache[53] = _createElementVNode(\"div\", { class: \"bg-black/60 p-1 rounded-full border border-white/10 text-[10px] text-zinc-100 leading-none\" }, \"  \", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_82, [\n                                                    _cache[54] || (_cache[54] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[linear-gradient(135deg,rgba(245,245,245,0.35),rgba(140,140,160,0.08)_60%,rgba(12,10,18,0.82))]\" }, null, -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_83, _toDisplayString(slot.skill.name[0] || '?'), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_84, [\n                                                    _createElementVNode(\"div\", _hoisted_85, _toDisplayString(slot.skill.name), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_86, _toDisplayString(slot.skill.description), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_87, [\n                                                        _createElementVNode(\"span\", _hoisted_88, \"CD \" + _toDisplayString(slot.skill.Cooldown), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: _normalizeClass(activeSkillDisabledReason(slot.idx) ? 'text-amber-200/90' : 'text-emerald-300/90')\n                                                        }, _toDisplayString(getActiveSkillStatusText(slot)), 3 /* TEXT, CLASS */)\n                                                    ])\n                                                ])\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_89, \"\"))\n                                    ], 10 /* CLASS, PROPS */, _hoisted_80));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" Log Feed + Piles Overlay: top-right, below parent \\\"\\\" button \"),\n                    _createElementVNode(\"div\", _hoisted_90, [\n                        _createElementVNode(\"div\", _hoisted_91, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors\",\n                                title: _unref(logsCollapsed) ? '' : '',\n                                onClick: _cache[25] || (_cache[25] = ($event) => (logsCollapsed.value = !_unref(logsCollapsed)))\n                            }, _toDisplayString(_unref(logsCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_92),\n                            (!_unref(logsCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_93, [\n                                    _createCommentVNode(\" eslint-disable-next-line vue/no-v-html \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).logs, (l, i) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: i,\n                                            class: \"bg-black/60 p-1 rounded border-l-2 border-gray-700\",\n                                            innerHTML: l\n                                        }, null, 8 /* PROPS */, _hoisted_94));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_95, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors\",\n                                title: _unref(pilesCollapsed) ? '' : '',\n                                onClick: _cache[26] || (_cache[26] = ($event) => (pilesCollapsed.value = !_unref(pilesCollapsed)))\n                            }, _toDisplayString(_unref(pilesCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_96),\n                            (!_unref(pilesCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_97, [\n                                    _createElementVNode(\"div\", _hoisted_98, [\n                                        _createElementVNode(\"div\", _hoisted_99, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-dungeon-gold active:scale-95 transition-all shadow-lg\",\n                                                onClick: _cache[27] || (_cache[27] = ($event) => (overlayOpen.value = 'deck'))\n                                            }, [\n                                                _createVNode(_unref(Layers), { class: \"size-5 text-dungeon-gold\" }),\n                                                _createElementVNode(\"span\", _hoisted_100, _toDisplayString(_unref(combatState).playerDeck.length), 1 /* TEXT */)\n                                            ]),\n                                            _cache[55] || (_cache[55] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_101, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 active:scale-95 transition-all shadow-lg\",\n                                                onClick: _cache[28] || (_cache[28] = ($event) => (overlayOpen.value = 'discard'))\n                                            }, [\n                                                _createVNode(_unref(Trash2), { class: \"size-5 text-gray-400\" }),\n                                                _createElementVNode(\"span\", _hoisted_102, _toDisplayString(_unref(combatState).discardPile.length), 1 /* TEXT */)\n                                            ]),\n                                            _cache[56] || (_cache[56] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                (_unref(battleResultBanner))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_103, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"px-12 py-5 rounded-2xl border-2 text-5xl md:text-6xl font-heading tracking-[0.2em] drop-shadow-[0_0_30px_rgba(0,0,0,0.9)] animate-pulse backdrop-blur-md\", _unref(battleResultBanner) === 'win'\n                                    ? 'bg-emerald-950/70 border-emerald-400/60 text-emerald-300'\n                                    : 'bg-red-950/70 border-red-500/60 text-red-300'])\n                        }, _toDisplayString(_unref(battleResultBanner) === 'win' ? '' : ''), 3 /* TEXT, CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(effectTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"effect-tooltip absolute z-[72] pointer-events-none\", _unref(effectTooltip).align === 'right' ? 'effect-tooltip--right text-right' : 'effect-tooltip--center']),\n                        style: _normalizeStyle({ left: `${_unref(effectTooltip).x}px`, top: `${_unref(effectTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_104, _toDisplayString(_unref(effectTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_105, _toDisplayString(_unref(effectTooltip).description), 1 /* TEXT */),\n                        (_unref(effectTooltip).stacks > 1)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_106, \": \" + _toDisplayString(_unref(effectTooltip).stacks), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Deck/Discard Overlay \"),\n                (_unref(overlayOpen))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8\",\n                        onClick: _cache[31] || (_cache[31] = ($event) => (overlayOpen.value = null))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"bg-[#18141e] border border-white/10 p-6 rounded-2xl max-w-2xl w-full max-h-[80%] flex flex-col relative shadow-2xl\",\n                            onClick: _cache[30] || (_cache[30] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_107, [\n                                _createElementVNode(\"h3\", _hoisted_108, _toDisplayString(_unref(overlayOpen) === 'deck' ? '' : ''), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    onClick: _cache[29] || (_cache[29] = ($event) => (overlayOpen.value = null))\n                                }, [\n                                    _createVNode(_unref(XIcon), { class: \"size-6 hover:text-red-500\" })\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_109, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overlayOpen) === 'deck' ? _unref(combatState).playerDeck : _unref(combatState).discardPile, (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"scale-75 origin-top-left\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatView.vue?vue&type=style&index=0&id=99a69034&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-99a69034\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, unref as _unref, createVNode as _createVNode, renderSlot as _renderSlot, normalizeClass as _normalizeClass, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"relative flex shrink-0 items-center justify-between rounded-t-2xl border-b border-amber-300/25 bg-[linear-gradient(120deg,rgba(34,21,14,0.96),rgba(59,35,20,0.92)_46%,rgba(33,20,13,0.96))] px-6 py-4\" };\nconst _hoisted_2 = { class: \"relative text-xl font-heading tracking-[0.2em] text-amber-100 drop-shadow-[0_0_10px_rgba(251,191,36,0.35)]\" };\nconst _hoisted_3 = { class: \"relative flex-1 overflow-y-auto custom-scrollbar bg-[linear-gradient(160deg,rgba(20,13,9,0.92),rgba(30,19,12,0.9))] p-8 text-dungeon-paper/80\" };\nimport { X } from 'lucide-vue-next';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonModal',\n    props: {\n        title: {},\n        isOpen: { type: Boolean },\n        panelClass: {}\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                (__props.isOpen)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-md\",\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\n                                'relative mx-4 flex max-h-[90%] w-full max-w-3xl flex-col overflow-hidden rounded-2xl border border-amber-300/35 bg-[#100b09]/95 shadow-[0_24px_60px_rgba(0,0,0,0.65),0_0_50px_rgba(217,119,6,0.22)]',\n                                __props.panelClass,\n                            ])\n                        }, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_18%_-10%,rgba(251,191,36,0.2),transparent_45%),radial-gradient(circle_at_84%_0%,rgba(251,191,36,0.12),transparent_36%)]\" }, null, -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-[1px] rounded-[15px] border border-white/6\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute inset-0 bg-[linear-gradient(90deg,transparent,rgba(255,255,255,0.08),transparent)] opacity-40\" }, null, -1 /* CACHED */)),\n                                _createElementVNode(\"h2\", _hoisted_2, _toDisplayString(__props.title), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    class: \"relative rounded-full border border-amber-300/30 bg-black/20 p-1 text-amber-200/80 transition-colors hover:text-amber-100\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                                }, [\n                                    _createVNode(_unref(X), { class: \"size-6\" })\n                                ])\n                            ]),\n                            _createCommentVNode(\" Body \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"text-center py-12\" }, [\n                                        _createElementVNode(\"div\", { class: \"mb-4 text-4xl opacity-20 animate-pulse\" }, \"\"),\n                                        _createElementVNode(\"p\", { class: \"font-ui text-sm uppercase tracking-widest\" }, \" // \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Ornamental Corners \"),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute -left-1 -top-1 h-5 w-5 border-l-2 border-t-2 border-amber-300/75\" }, null, -1 /* CACHED */)),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute -right-1 -top-1 h-5 w-5 border-r-2 border-t-2 border-amber-300/75\" }, null, -1 /* CACHED */)),\n                            _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute -bottom-1 -left-1 h-5 w-5 border-b-2 border-l-2 border-amber-300/75\" }, null, -1 /* CACHED */)),\n                            _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"pointer-events-none absolute -bottom-1 -right-1 h-5 w-5 border-b-2 border-r-2 border-amber-300/75\" }, null, -1 /* CACHED */))\n                        ], 2 /* CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"text-center py-8\"\n};\nconst _hoisted_2 = {\n    key: 1,\n    class: \"flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"flex items-start gap-3\" };\nconst _hoisted_5 = { class: \"shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors\" };\nconst _hoisted_6 = { class: \"text-dungeon-gold font-heading text-sm\" };\nconst _hoisted_7 = { class: \"text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors\" };\nconst _hoisted_8 = { class: \"mt-4 pt-4 border-t border-dungeon-gold/15\" };\nconst _hoisted_9 = { class: \"flex gap-3\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_14 = {\n    key: 2,\n    class: \"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n};\nconst _hoisted_15 = { class: \"glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30\" };\nconst _hoisted_16 = { class: \"text-dungeon-paper/70 font-ui text-sm mb-6\" };\nconst _hoisted_17 = { class: \"text-dungeon-gold font-bold\" };\nconst _hoisted_18 = { class: \"flex gap-3 justify-end\" };\nimport { BookOpen, Pencil, RefreshCw, RotateCcw } from 'lucide-vue-next';\nimport { useGameStore } from '../gameStore';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SaveLoadPanel',\n    props: {\n        isOpen: { type: Boolean },\n        entries: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const confirmTarget = ref(null);\n        const isManualSummaryRunning = ref(false);\n        function handleRollback(messageId) {\n            confirmTarget.value = messageId;\n        }\n        async function doRollback() {\n            if (confirmTarget.value !== null) {\n                await gameStore.rollbackTo(confirmTarget.value);\n                confirmTarget.value = null;\n            }\n        }\n        function handleReroll() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.rerollCurrent();\n        }\n        function handleEdit() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.startEdit();\n        }\n        async function handleManualSummary() {\n            if (gameStore.isGenerating || isManualSummaryRunning.value)\n                return;\n            isManualSummaryRunning.value = true;\n            try {\n                const writtenCount = await gameStore.rebuildAutoSummaryChronicleFromMessages();\n                if (writtenCount < 0) {\n                    toastr.error('');\n                    return;\n                }\n                if (writtenCount === 0) {\n                    toastr.warning('');\n                    return;\n                }\n                toastr.success(` ${writtenCount} `);\n            }\n            finally {\n                isManualSummaryRunning.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                onClose: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    (__props.entries.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _createVNode(_unref(BookOpen), { class: \"size-12 mx-auto text-dungeon-gold/30 mb-4\" }),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"text-gray-500 font-ui\" }, \"\", -1 /* CACHED */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.entries, (entry) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: entry.messageId,\n                                    class: \"group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]\",\n                                    onClick: ($event) => (handleRollback(entry.messageId))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\" Floor Number Badge \"),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createElementVNode(\"span\", _hoisted_6, \"#\" + _toDisplayString(entry.messageId), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" Summary Text \"),\n                                        _createElementVNode(\"p\", _hoisted_7, _toDisplayString(entry.summary), 1 /* TEXT */),\n                                        _createCommentVNode(\" Arrow Icon \"),\n                                        _createVNode(_unref(RotateCcw), { class: \"size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors\" })\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])),\n                    _createCommentVNode(\" Bottom Action Buttons \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleReroll\n                            }, [\n                                _createVNode(_unref(RefreshCw), { class: \"size-4\" }),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"Roll\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_10),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\", _unref(gameStore).isEditing ? 'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20' : '']),\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleEdit\n                            }, [\n                                _createVNode(_unref(Pencil), { class: \"size-4\" }),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"\", -1 /* CACHED */))\n                            ], 10 /* CLASS, PROPS */, _hoisted_11)\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"mt-3 w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                            disabled: _unref(gameStore).isGenerating || _unref(isManualSummaryRunning),\n                            onClick: handleManualSummary\n                        }, [\n                            _createVNode(_unref(BookOpen), { class: \"size-4\" }),\n                            _createElementVNode(\"span\", _hoisted_13, _toDisplayString(_unref(isManualSummaryRunning) ? '...' : ''), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_12)\n                    ]),\n                    _createCommentVNode(\" Confirm Dialog \"),\n                    (_unref(confirmTarget) !== null)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                            _createElementVNode(\"div\", _hoisted_15, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-lg mb-3\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_16, [\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(_unref(confirmTarget)), 1 /* TEXT */),\n                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"text-red-400/80 text-xs\" }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (confirmTarget.value = null))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors\",\n                                        onClick: doRollback\n                                    }, \"  \")\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, Transition as _Transition, withCtx as _withCtx, createTextVNode as _createTextVNode, isRef as _isRef, withKeys as _withKeys, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, withModifiers as _withModifiers, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative\" };\nconst _hoisted_2 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = { class: \"absolute top-6 left-6 z-50 flex flex-col space-y-4\" };\nconst _hoisted_5 = { class: \"absolute top-6 right-4 z-50 flex flex-col space-y-4\" };\nconst _hoisted_6 = { class: \"h-full w-full flex flex-col items-center\" };\nconst _hoisted_7 = { class: \"flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"flex flex-col h-full\"\n};\nconst _hoisted_10 = { class: \"flex justify-end gap-3 mt-4\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"whitespace-pre-wrap text-dungeon-paper/85\"\n};\nconst _hoisted_12 = { class: \"story-rich-text\" };\nconst _hoisted_13 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_14 = {\n    key: 0,\n    class: \"story-tucao-section-list\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    key: 0,\n    class: \"story-tucao-panel\"\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_18 = {\n    key: 0,\n    class: \"mt-8 flex flex-col space-y-3\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"text-xl mr-2\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"mt-4\"\n};\nconst _hoisted_22 = { class: \"flex justify-center gap-4\" };\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_25 = {\n    key: 2,\n    class: \"mt-4\"\n};\nconst _hoisted_26 = { class: \"flex justify-center\" };\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n    key: 2,\n    class: \"mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm\"\n};\nconst _hoisted_29 = { class: \"bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 shrink-0\" };\nconst _hoisted_30 = { class: \"relative w-full\" };\nconst _hoisted_31 = [\"disabled\", \"placeholder\"];\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = { class: \"absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none\" };\nconst _hoisted_34 = [\"title\"];\nconst _hoisted_35 = {\n    key: 0,\n    class: \"relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]\"\n};\nconst _hoisted_36 = { class: \"flex items-end gap-4 mb-3\" };\nconst _hoisted_37 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_38 = [\"title\"];\nconst _hoisted_39 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_40 = { \"clip-path\": \"url(#heartClip)\" };\nconst _hoisted_41 = [\"y\", \"height\"];\nconst _hoisted_42 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_43 = { class: \"text-[#cc3333] font-bold\" };\nconst _hoisted_44 = { class: \"text-gray-600\" };\nconst _hoisted_45 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_46 = [\"title\"];\nconst _hoisted_47 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_48 = { \"clip-path\": \"url(#manaClip)\" };\nconst _hoisted_49 = [\"y\", \"height\"];\nconst _hoisted_50 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_51 = { class: \"text-blue-400 font-bold\" };\nconst _hoisted_52 = { class: \"flex items-center justify-between px-1 mb-2\" };\nconst _hoisted_53 = { class: \"flex items-center gap-2 text-dungeon-paper/70\" };\nconst _hoisted_54 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_55 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_56 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_57 = { class: \"flex items-center justify-between px-1\" };\nconst _hoisted_58 = { class: \"flex items-center gap-2 text-dungeon-gold\" };\nconst _hoisted_59 = { class: \"font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm\" };\nconst _hoisted_60 = { class: \"map-modal\" };\nconst _hoisted_61 = { class: \"map-toolbar\" };\nconst _hoisted_62 = { class: \"map-summary\" };\nconst _hoisted_63 = { class: \"map-summary-highlight\" };\nconst _hoisted_64 = { class: \"map-summary-highlight\" };\nconst _hoisted_65 = {\n    key: 0,\n    class: \"map-empty\"\n};\nconst _hoisted_66 = [\"width\", \"height\", \"viewBox\"];\nconst _hoisted_67 = [\"x1\", \"y1\", \"x2\", \"y2\"];\nconst _hoisted_68 = { class: \"map-room-icon\" };\nconst _hoisted_69 = { class: \"map-room-step\" };\nconst _hoisted_70 = {\n    key: 0,\n    class: \"bond-list custom-scrollbar max-h-[64vh] overflow-y-auto pr-1\"\n};\nconst _hoisted_71 = [\"onClick\"];\nconst _hoisted_72 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_73 = {\n    key: 1,\n    class: \"bond-portrait-fallback\"\n};\nconst _hoisted_74 = { class: \"bond-affection-wrap\" };\nconst _hoisted_75 = { class: \"bond-affection-head\" };\nconst _hoisted_76 = { class: \"bond-role-name\" };\nconst _hoisted_77 = { class: \"bond-affection-track\" };\nconst _hoisted_78 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center gap-3 py-12\"\n};\nconst _hoisted_79 = [\"src\", \"alt\"];\nconst _hoisted_80 = { class: \"bond-preview-footer\" };\nconst _hoisted_81 = { class: \"bond-preview-name\" };\nconst _hoisted_82 = {\n    key: 0,\n    class: \"grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4\"\n};\nconst _hoisted_83 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_84 = { class: \"w-full max-w-[90rem] mx-auto flex flex-col gap-4\" };\nconst _hoisted_85 = { class: \"flex items-center gap-2\" };\nconst _hoisted_86 = {\n    key: 0,\n    class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-h-[72vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_87 = [\"disabled\", \"onClick\"];\nconst _hoisted_88 = [\"src\", \"alt\"];\nconst _hoisted_89 = { class: \"absolute inset-x-2 top-2 z-10\" };\nconst _hoisted_90 = { class: \"magic-book-title text-center truncate text-[22px]\" };\nconst _hoisted_91 = {\n    key: 1,\n    class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 py-8 text-center text-sm text-dungeon-paper/50\"\n};\nconst _hoisted_92 = { class: \"rounded border border-dungeon-brown/60 bg-[#140d08]/70 p-3\" };\nconst _hoisted_93 = { class: \"flex items-center justify-end gap-2\" };\nconst _hoisted_94 = { class: \"text-xs text-dungeon-gold/80\" };\nconst _hoisted_95 = { class: \"mt-3 grid grid-cols-1 md:grid-cols-2 gap-4 justify-items-center\" };\nconst _hoisted_96 = [\"disabled\", \"onClick\"];\nconst _hoisted_97 = {\n    key: 0,\n    class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\"\n};\nconst _hoisted_98 = { class: \"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-300/40 shadow-md\" };\nconst _hoisted_99 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_100 = { class: \"relative font-heading text-4xl text-white/20 select-none\" };\nconst _hoisted_101 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_102 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_103 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_104 = { class: \"mt-1 text-center text-white/55 font-bold text-[10px] font-ui tracking-wider\" };\nconst _hoisted_105 = { class: \"mt-2 flex justify-end\" };\nconst _hoisted_106 = [\"disabled\"];\nconst _hoisted_107 = { class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5 max-h-[60vh] overflow-y-auto custom-scrollbar pr-1 justify-items-center\" };\nconst _hoisted_108 = [\"disabled\", \"onClick\"];\nconst _hoisted_109 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_110 = { class: \"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-300/40 shadow-md\" };\nconst _hoisted_111 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_112 = { class: \"relative font-heading text-4xl text-white/20 select-none\" };\nconst _hoisted_113 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_114 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_115 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_116 = { class: \"mt-1 flex items-center justify-between text-[10px] text-white/60 font-ui\" };\nconst _hoisted_117 = { class: \"w-full max-w-3xl mx-auto flex flex-col gap-5\" };\nconst _hoisted_118 = { class: \"rounded border border-dungeon-gold/30 bg-[#140d08]/70 px-4 py-3 flex items-center justify-between\" };\nconst _hoisted_119 = { class: \"font-heading text-dungeon-gold text-xl\" };\nconst _hoisted_120 = { class: \"flex items-center justify-between gap-3\" };\nconst _hoisted_121 = { class: \"font-heading text-dungeon-gold text-base\" };\nconst _hoisted_122 = { class: \"font-ui text-xs text-dungeon-paper/65 mt-1\" };\nconst _hoisted_123 = [\"disabled\", \"onClick\"];\nconst _hoisted_124 = { class: \"mt-3 h-2 rounded bg-black/45 border border-dungeon-brown/45 overflow-hidden\" };\nconst _hoisted_125 = { class: \"mt-2 font-ui text-[11px] text-dungeon-paper/60\" };\nconst _hoisted_126 = {\n    key: 0,\n    class: \"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-6 gap-y-6 p-4 overflow-y-auto max-h-[60%]\"\n};\nconst _hoisted_127 = [\"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_128 = { class: \"relative\" };\nconst _hoisted_129 = { class: \"absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight\" };\nconst _hoisted_130 = { class: \"font-heading text-dungeon-gold text-[11px] text-center mt-1 leading-relaxed truncate w-full\" };\nconst _hoisted_131 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_132 = { class: \"relic-tooltip-name\" };\nconst _hoisted_133 = { class: \"relic-tooltip-desc\" };\nconst _hoisted_134 = { class: \"flex flex-col space-y-6 w-full max-w-lg mx-auto\" };\nconst _hoisted_135 = { class: \"space-y-4\" };\nconst _hoisted_136 = { class: \"flex items-center justify-between\" };\nconst _hoisted_137 = { class: \"flex items-center gap-2\" };\nconst _hoisted_138 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_139 = { class: \"flex items-center justify-between\" };\nconst _hoisted_140 = { class: \"flex items-center gap-2\" };\nconst _hoisted_141 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_142 = { class: \"flex items-center justify-between\" };\nconst _hoisted_143 = { class: \"flex items-center justify-between\" };\nconst _hoisted_144 = { class: \"flex items-center gap-2\" };\nconst _hoisted_145 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_146 = { class: \"flex items-center justify-between\" };\nconst _hoisted_147 = { class: \"flex items-center gap-2\" };\nconst _hoisted_148 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_149 = { class: \"flex items-center justify-between\" };\nconst _hoisted_150 = [\"disabled\"];\nconst _hoisted_151 = {\n    key: 0,\n    value: \"\"\n};\nconst _hoisted_152 = [\"value\"];\nconst _hoisted_153 = { class: \"flex items-center justify-between\" };\nconst _hoisted_154 = { class: \"flex items-center gap-2\" };\nconst _hoisted_155 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_156 = { class: \"flex items-center justify-between\" };\nconst _hoisted_157 = { class: \"inline-flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_158 = { class: \"text-dungeon-paper text-sm font-ui\" };\nconst _hoisted_159 = { class: \"grid grid-cols-2 gap-4\" };\nconst _hoisted_160 = { class: \"flex flex-col gap-4 w-full max-w-4xl\" };\nconst _hoisted_161 = { class: \"flex items-center justify-between\" };\nconst _hoisted_162 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_163 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/50 p-3\" };\nconst _hoisted_164 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_165 = { class: \"text-[11px] text-dungeon-gold/80\" };\nconst _hoisted_166 = { class: \"max-h-52 overflow-y-auto custom-scrollbar pr-1 space-y-1.5\" };\nconst _hoisted_167 = [\"onClick\"];\nconst _hoisted_168 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_169 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_170 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_171 = { class: \"text-[10px] px-1 rounded border border-white/15 text-dungeon-paper/60\" };\nconst _hoisted_172 = [\"title\"];\nconst _hoisted_173 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_174 = { class: \"mt-2 grid grid-cols-9 gap-1\" };\nconst _hoisted_175 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar\" };\nconst _hoisted_176 = { class: \"space-y-3\" };\nconst _hoisted_177 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_178 = [\"onClick\"];\nconst _hoisted_179 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_180 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_181 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_182 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4\" };\nconst _hoisted_183 = [\"disabled\", \"onClick\"];\nconst _hoisted_184 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_185 = { class: \"flex justify-end gap-3\" };\nconst _hoisted_186 = [\"disabled\"];\nconst _hoisted_187 = { class: \"flex items-center justify-between\" };\nconst _hoisted_188 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_189 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar\" };\nconst _hoisted_190 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-2\" };\nconst _hoisted_191 = [\"onClick\"];\nconst _hoisted_192 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3\" };\nconst _hoisted_193 = { class: \"max-h-[28vh] overflow-y-auto custom-scrollbar pr-1\" };\nconst _hoisted_194 = { class: \"space-y-2\" };\nconst _hoisted_195 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_196 = [\"onClick\"];\nconst _hoisted_197 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_198 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_199 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_200 = { class: \"grid grid-cols-1 md:grid-cols-2 gap-2\" };\nconst _hoisted_201 = { class: \"flex items-start justify-between gap-2\" };\nconst _hoisted_202 = { class: \"min-w-0\" };\nconst _hoisted_203 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_204 = { class: \"text-[10px] text-dungeon-paper/60\" };\nconst _hoisted_205 = { class: \"flex items-center gap-1 shrink-0\" };\nconst _hoisted_206 = [\"onClick\"];\nconst _hoisted_207 = { class: \"w-6 text-center text-xs text-dungeon-gold\" };\nconst _hoisted_208 = [\"onClick\"];\nconst _hoisted_209 = { class: \"mt-1 text-[10px] text-dungeon-paper/70 leading-relaxed\" };\nconst _hoisted_210 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_211 = { class: \"flex items-center gap-2 px-3 py-2 rounded border border-dungeon-brown/60 bg-dungeon-dark/40 text-sm text-dungeon-paper/80\" };\nconst _hoisted_212 = { class: \"flex justify-between gap-3\" };\nconst _hoisted_213 = [\"disabled\"];\nconst _hoisted_214 = {\n    key: 0,\n    class: \"custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4\"\n};\nconst _hoisted_215 = { class: \"text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap\" };\nconst _hoisted_216 = {\n    key: 1,\n    class: \"text-dungeon-paper/60 font-ui py-8 text-center text-sm\"\n};\nconst _hoisted_217 = {\n    key: 0,\n    class: \"absolute inset-0 z-[94] bg-black\"\n};\nconst _hoisted_218 = [\"src\"];\nconst _hoisted_219 = [\"src\"];\nconst _hoisted_220 = { class: \"shop-layout absolute inset-y-0 right-0 z-[96] flex items-center px-4 md:px-7\" };\nconst _hoisted_221 = { class: \"shop-panel ml-auto w-full max-w-[48rem] h-[84vh] max-h-[860px]\" };\nconst _hoisted_222 = { class: \"shop-goods-grid custom-scrollbar\" };\nconst _hoisted_223 = [\"disabled\", \"onClick\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_224 = { class: \"shop-item-icon-wrap\" };\nconst _hoisted_225 = { class: \"shop-item-price\" };\nconst _hoisted_226 = {\n    key: 0,\n    class: \"rounded border border-amber-200/15 bg-black/25 py-10 text-center text-sm text-amber-100/65\"\n};\nconst _hoisted_227 = { class: \"shop-panel-foot\" };\nconst _hoisted_228 = [\"disabled\"];\nconst _hoisted_229 = [\"disabled\"];\nconst _hoisted_230 = [\"src\"];\nconst _hoisted_231 = {\n    key: 0,\n    class: \"pointer-events-none absolute inset-0\"\n};\nconst _hoisted_232 = [\"disabled\", \"onClick\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_233 = { class: \"pointer-events-auto chest-portals-anchor w-full\" };\nconst _hoisted_234 = { class: \"flex justify-center gap-4 flex-wrap\" };\nconst _hoisted_235 = [\"disabled\", \"onClick\"];\nconst _hoisted_236 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_237 = [\"disabled\"];\nconst _hoisted_238 = [\"src\"];\nconst _hoisted_239 = { class: \"idol-layout absolute inset-0 z-[97]\" };\nconst _hoisted_240 = { class: \"idol-slots-row\" };\nconst _hoisted_241 = { class: \"idol-slot-wrap\" };\nconst _hoisted_242 = { class: \"idol-slot-wrap\" };\nconst _hoisted_243 = { class: \"idol-slot-wrap\" };\nconst _hoisted_244 = [\"disabled\"];\nconst _hoisted_245 = {\n    key: 0,\n    class: \"absolute inset-0 z-[102] bg-black/90\"\n};\nconst _hoisted_246 = { class: \"absolute inset-0 p-6 md:p-10 flex items-center justify-center\" };\nconst _hoisted_247 = { class: \"w-full max-w-6xl rounded-xl border border-dungeon-gold/35 bg-[#0f0906]/95 p-5 md:p-7 shadow-[0_0_28px_rgba(212,175,55,0.2)]\" };\nconst _hoisted_248 = { class: \"mb-4 flex items-center justify-between gap-3\" };\nconst _hoisted_249 = { class: \"text-xs text-dungeon-paper/65 mt-1\" };\nconst _hoisted_250 = { class: \"flex items-center gap-2\" };\nconst _hoisted_251 = [\"disabled\"];\nconst _hoisted_252 = [\"disabled\"];\nconst _hoisted_253 = {\n    key: 0,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-5\"\n};\nconst _hoisted_254 = [\"onClick\"];\nconst _hoisted_255 = { class: \"mb-2 text-center text-[11px] text-dungeon-paper/75\" };\nconst _hoisted_256 = { class: \"flex justify-center\" };\nconst _hoisted_257 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col\"\n};\nconst _hoisted_258 = { class: \"flex items-center justify-between text-[11px] font-semibold\" };\nconst _hoisted_259 = { class: \"mt-2 flex items-center gap-2 text-[11px] text-zinc-700\" };\nconst _hoisted_260 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_261 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_262 = { class: \"mt-3 text-xs leading-relaxed text-zinc-700 flex-1\" };\nconst _hoisted_263 = { class: \"text-[11px] text-zinc-500\" };\nconst _hoisted_264 = { class: \"mb-4 rounded border border-dungeon-gold/25 bg-black/20 p-3\" };\nconst _hoisted_265 = { class: \"text-xs text-dungeon-paper/70 mb-2\" };\nconst _hoisted_266 = { class: \"flex justify-center\" };\nconst _hoisted_267 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col\"\n};\nconst _hoisted_268 = { class: \"flex items-center justify-between text-[11px] font-semibold\" };\nconst _hoisted_269 = { class: \"mt-2 flex items-center gap-2 text-[11px] text-zinc-700\" };\nconst _hoisted_270 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_271 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_272 = { class: \"mt-3 text-xs leading-relaxed text-zinc-700 flex-1\" };\nconst _hoisted_273 = { class: \"text-[11px] text-zinc-500\" };\nconst _hoisted_274 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/50 bg-black/20 p-4 text-center\"\n};\nconst _hoisted_275 = [\"disabled\"];\nconst _hoisted_276 = {\n    key: 1,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-[52vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_277 = [\"disabled\", \"onClick\"];\nconst _hoisted_278 = { class: \"text-[11px] text-dungeon-paper/65 mb-2\" };\nconst _hoisted_279 = { class: \"flex justify-center\" };\nconst _hoisted_280 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55\"\n};\nconst _hoisted_281 = {\n    key: 2,\n    class: \"grid grid-cols-1 md:grid-cols-2 gap-4\"\n};\nconst _hoisted_282 = [\"disabled\", \"onClick\"];\nconst _hoisted_283 = { class: \"text-[11px] text-dungeon-paper/65 mb-2\" };\nconst _hoisted_284 = { class: \"flex justify-center\" };\nconst _hoisted_285 = {\n    key: 0,\n    class: \"w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col\"\n};\nconst _hoisted_286 = { class: \"flex items-center justify-between text-[11px] font-semibold\" };\nconst _hoisted_287 = { class: \"mt-2 flex items-center gap-2 text-[11px] text-zinc-700\" };\nconst _hoisted_288 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_289 = { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" };\nconst _hoisted_290 = { class: \"mt-3 text-xs leading-relaxed text-zinc-700 flex-1\" };\nconst _hoisted_291 = { class: \"text-[11px] text-zinc-500\" };\nconst _hoisted_292 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55\"\n};\nconst _hoisted_293 = {\n    key: 0,\n    class: \"absolute inset-0 z-[100] bg-black\"\n};\nimport { Activity, Book, BookOpen, Box, ChevronDown, Coins, Dices, FileText, Lock, Map as MapIcon, Maximize, Scroll, Send, Settings as SettingsIcon, Users, } from 'lucide-vue-next';\nimport { getAllActiveSkills, resolveActiveSkillNames } from '../battle/activeSkillRegistry';\nimport { getAllCards, resolveCardNames } from '../battle/cardRegistry';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { getAllRelics, getRelicById, getRelicByName } from '../battle/relicRegistry';\nimport { bgmTrackId, bgmTracks, bgmVolume, setBgmTrack, setBgmVolume } from '../bgm';\nimport { recordEncounteredCards, recordEncounteredRelics } from '../codexStore';\nimport { FLOOR_MAP, getFloorForArea, getNextFloor } from '../floor';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { getLocalFolderImagePaths } from '../localAssetManifest';\nimport { CardType, EffectType } from '../types';\nimport CombatView from './CombatView.vue';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\nimport DungeonModal from './DungeonModal.vue';\nimport SaveLoadPanel from './SaveLoadPanel.vue';\n\nimport { defineComponent, h, ref, computed, watch, nextTick, reactive, onUnmounted, onMounted, onBeforeUnmount } from 'vue';\nconst OVERLAY_STATE_KEY = 'dungeon.ui.overlay_state.v1';\nconst IMAGE_CDN_ROOT = 'https://img.vinsimage.org';\nconst HF_USER_DIR = '/user';\nconst HF_MONSTER_DIR = '/';\nconst BG_OPACITY_KEY = 'dungeon.bg_overlay_opacity';\nconst IDOL_SNAP_DISTANCE = 112;\nconst MAP_PATH_COLUMNS = 6;\nconst MAP_CELL_SIZE = 62;\nconst MAP_CELL_GAP = 32;\nconst MAP_MIN_SCALE = 0.6;\nconst MAP_MAX_SCALE = 2.6;\nconst MAP_SCALE_STEP = 0.14;\nconst HOT_SPRING_CLEANSE_ACTION_TEXT = '<user>';\nconst VICTORY_REWARD_SKIP_ACTION_TEXT = '<user>';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameView',\n    emits: [\"backToSplash\"],\n    setup(__props) {\n        const SidebarIcon = defineComponent({\n            props: {\n                icon: { type: Object, required: true },\n                active: { type: Boolean, default: false },\n                label: { type: String, default: '' },\n                tooltipSide: { type: String, default: 'right' },\n                disabled: { type: Boolean, default: false },\n                highlight: { type: Boolean, default: false },\n            },\n            emits: ['click'],\n            setup(props, { emit }) {\n                return () => h('button', {\n                    disabled: props.disabled,\n                    class: [\n                        'w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group disabled:cursor-not-allowed',\n                        props.disabled\n                            ? 'bg-[#120d0a] text-dungeon-paper/35 border-dungeon-brown/70'\n                            : props.active\n                                ? (props.highlight\n                                    ? 'bg-dungeon-gold text-black border-dungeon-gold shadow-[0_0_20px_rgba(212,175,55,0.85)]'\n                                    : 'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]')\n                                : (props.highlight\n                                    ? 'bg-[#1a0f08] text-dungeon-gold border-dungeon-gold/75 shadow-[0_0_11px_rgba(212,175,55,0.45)] hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold'\n                                    : 'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50'),\n                    ],\n                    onClick: () => {\n                        if (!props.disabled) {\n                            emit('click');\n                        }\n                    },\n                }, [\n                    h(props.icon, { class: 'size-6' }),\n                    props.label\n                        ? h('div', {\n                            class: [\n                                'absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none',\n                                props.tooltipSide === 'left' ? 'right-14' : 'left-14',\n                            ],\n                        }, props.label)\n                        : null,\n                ]);\n            },\n        });\n        const WizardHatIcon = defineComponent({\n            setup() {\n                return () => h('i', { class: 'fa-solid fa-hat-wizard text-[20px]' });\n            },\n        });\n        const gameStore = useGameStore();\n        const activeModal = ref(null);\n        const inputText = ref('');\n        const isVariableUpdateOpen = ref(false);\n        const isStatusOpen = ref(true);\n        const showCombat = ref(false);\n        const combatEnemyName = ref('');\n        const showShopView = ref(false);\n        const showIdolView = ref(false);\n        const shopProducts = ref([]);\n        const shopBuying = ref(false);\n        const shopSpentGold = ref(0);\n        const shopPurchasedItems = ref([]);\n        const shopRobClickCount = ref(0);\n        const shopRobbing = ref(false);\n        const shopSessionKey = ref(null);\n        const showChestView = ref(false);\n        const chestStage = ref('closed');\n        const chestRolling = ref(false);\n        const chestRewardRelics = ref([]);\n        const chestRewardCollectedFlags = ref([]);\n        const chestCollecting = ref(false);\n        const chestRewardVisible = ref(false);\n        const chestOpenedBgReady = ref(false);\n        const chestPortalChoices = ref([]);\n        const chestRewardCountFixed = ref(null);\n        const chestCloseCount = ref(0);\n        const chestForceMimicNextOpen = ref(false);\n        const hotSpringCleanseMessage = ref(null);\n        const idolDiceValue = ref(1);\n        const idolDiceRolling = ref(false);\n        const idolAssignedTarget = ref(null);\n        const idolSnapPreviewTarget = ref(null);\n        const idolDicePosition = ref({ x: 0, y: 0 });\n        const idolDiceStageRef = ref(null);\n        const idolDiceRef = ref(null);\n        const idolSlotMaxHpRef = ref(null);\n        const idolSlotMpRef = ref(null);\n        const idolSlotGoldRef = ref(null);\n        const idolDragPointerId = ref(null);\n        const idolDragStart = ref({ x: 0, y: 0 });\n        const idolDragStartPos = ref({ x: 0, y: 0 });\n        const combatTestStep = ref('deck');\n        const selectedTestDeck = ref([]);\n        const selectedTestEnemy = ref('');\n        const selectedTestRelicCounts = ref({});\n        const selectedCardCategoryTab = ref('');\n        const selectedRelicCategoryTab = ref('');\n        const activeCombatContext = ref('normal');\n        const pendingCombatNarrative = ref(null);\n        const dispatchedCombatNarrativeIds = new Set();\n        const showVictoryRewardView = ref(false);\n        const victoryRewardStage = ref('pick');\n        const victoryRewardOptions = ref([]);\n        const selectedVictoryRewardCard = ref(null);\n        const rewardApplying = ref(false);\n        const rewardRefreshUsed = ref(false);\n        const rewardIsNormalEnemy = ref(false);\n        const relicTooltip = ref(null);\n        const combatTestStartAt999 = ref(false);\n        const combatTestStartAt999CurrentBattle = ref(false);\n        let chestMimicTimer = null;\n        let chestRewardFadeTimer = null;\n        let chestCloseLongPressTimer = null;\n        let shopRobTimer = null;\n        let hotSpringCleanseTimer = null;\n        let idolRollTimer = null;\n        let relicTooltipLongPressTimer = null;\n        let relicTooltipAutoHideTimer = null;\n        let hotSpringCleanseMessageId = 0;\n        const isRestoringOverlayState = ref(false);\n        const BOSS_FOLDER_NAMES = new Set([\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ]);\n        const bondFolderImageCache = new Map();\n        const bondFolderImagePromiseCache = new Map();\n        const bondPortraitUrls = ref({});\n        const bondPortraitErrors = ref({});\n        const bondPortraitLoadTasks = new Map();\n        const bondPortraitPreview = ref(null);\n        let bondPortraitLoaderDisposed = false;\n        const normalizeRepoPath = (path) => path.replace(/\\\\/g, '/').replace(/^\\/+|\\/+$/g, '');\n        const encodeRepoPath = (path) => normalizeRepoPath(path).split('/').map((seg) => encodeURIComponent(seg)).join('/');\n        const toResolveUrl = (repoPath) => `${IMAGE_CDN_ROOT}/${encodeRepoPath(repoPath)}`;\n        const pickRandom = (items) => (items.length > 0 ? items[Math.floor(Math.random() * items.length)] : null);\n        const fetchFolderImages = async (repoFolderPath) => {\n            const folder = normalizeRepoPath(repoFolderPath);\n            const cached = bondFolderImageCache.get(folder);\n            if (cached)\n                return cached;\n            const pending = bondFolderImagePromiseCache.get(folder);\n            if (pending)\n                return pending;\n            const task = (async () => {\n                const images = getLocalFolderImagePaths(folder);\n                bondFolderImageCache.set(folder, images);\n                return images;\n            })();\n            bondFolderImagePromiseCache.set(folder, task);\n            try {\n                return await task;\n            }\n            finally {\n                bondFolderImagePromiseCache.delete(folder);\n            }\n        };\n        const resolveRandomPortrait = async (folderPath, fallbackFilePath) => {\n            const images = await fetchFolderImages(folderPath);\n            const randomPath = pickRandom(images);\n            return randomPath ? toResolveUrl(randomPath) : toResolveUrl(fallbackFilePath);\n        };\n        const resolveCharacterPortraitUrl = async (characterName) => {\n            const trimmedName = characterName.trim();\n            if (trimmedName === '' || trimmedName === '') {\n                return resolveRandomPortrait(HF_USER_DIR, `${HF_USER_DIR}/.png`);\n            }\n            const folderPath = `${HF_MONSTER_DIR}/${trimmedName}`;\n            const fallbackPath = `${HF_MONSTER_DIR}/${trimmedName}.png`;\n            if (BOSS_FOLDER_NAMES.has(trimmedName)) {\n                return resolveRandomPortrait(folderPath, fallbackPath);\n            }\n            const folderImages = await fetchFolderImages(folderPath);\n            const randomEnemy = pickRandom(folderImages);\n            return randomEnemy ? toResolveUrl(randomEnemy) : toResolveUrl(fallbackPath);\n        };\n        const clampBondAffection = (value) => {\n            const n = Number(value);\n            if (!Number.isFinite(n))\n                return 0;\n            return Math.max(-1000, Math.min(1000, Math.floor(n)));\n        };\n        const bondRoleEntries = computed(() => {\n            const rolesRaw = gameStore.statData.;\n            if (!rolesRaw || typeof rolesRaw !== 'object')\n                return [];\n            return Object.entries(rolesRaw)\n                .filter(([name]) => typeof name === 'string' && name.trim().length > 0)\n                .map(([name, payload]) => ({\n                name: name.trim(),\n                affection: clampBondAffection(payload?.),\n            }))\n                .sort((a, b) => {\n                if (a.affection !== b.affection)\n                    return b.affection - a.affection;\n                return a.name.localeCompare(b.name, 'zh-Hans-CN');\n            });\n        });\n        const getBondPortraitUrl = (characterName) => (bondPortraitUrls.value[characterName] ?? toResolveUrl(`${HF_MONSTER_DIR}/${characterName}.png`));\n        const bondEntries = computed(() => (bondRoleEntries.value.map((entry) => ({\n            ...entry,\n            portraitUrl: getBondPortraitUrl(entry.name),\n            affectionAbsRatio: Math.min(1, Math.abs(entry.affection) / 1000),\n        }))));\n        const ensureBondPortraitLoaded = async (characterName) => {\n            if (bondPortraitUrls.value[characterName])\n                return;\n            const pending = bondPortraitLoadTasks.get(characterName);\n            if (pending) {\n                await pending;\n                return;\n            }\n            const task = (async () => {\n                const url = await resolveCharacterPortraitUrl(characterName);\n                if (bondPortraitLoaderDisposed)\n                    return;\n                bondPortraitUrls.value = {\n                    ...bondPortraitUrls.value,\n                    [characterName]: url,\n                };\n                bondPortraitErrors.value = {\n                    ...bondPortraitErrors.value,\n                    [characterName]: false,\n                };\n            })();\n            bondPortraitLoadTasks.set(characterName, task);\n            try {\n                await task;\n            }\n            finally {\n                bondPortraitLoadTasks.delete(characterName);\n            }\n        };\n        const handleBondPortraitError = (characterName) => {\n            bondPortraitErrors.value = {\n                ...bondPortraitErrors.value,\n                [characterName]: true,\n            };\n        };\n        const formatBondAffection = (affection) => (affection > 0 ? `+${affection}` : String(affection));\n        const openBondPortraitPreview = (entry) => {\n            if (bondPortraitErrors.value[entry.name])\n                return;\n            bondPortraitPreview.value = {\n                name: entry.name,\n                url: entry.portraitUrl,\n            };\n        };\n        const closeBondPortraitPreview = () => {\n            bondPortraitPreview.value = null;\n        };\n        // --- Dynamic Background ---\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const HF_BG_BASE = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF`;\n        const bgArea = computed(() => gameStore.statData._ || '');\n        const bgRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!bgArea.value || bgImageError.value)\n                return '';\n            const isLord = bgRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${bgArea.value}_` : bgArea.value;\n            return `${HF_BG_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (bgRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true;\n            }\n            else {\n                bgImageError.value = true;\n            }\n        }\n        const bgOverlayOpacity = ref(parseFloat(localStorage.getItem(BG_OPACITY_KEY) ?? '0.5'));\n        watch(bgOverlayOpacity, (v) => localStorage.setItem(BG_OPACITY_KEY, String(v)));\n        const CHEST_BG_CLOSED = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B11.png`;\n        const CHEST_BG_OPENED = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B12.png`;\n        const CHEST_BG_MIMIC = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B13.png`;\n        const SHOP_BG_URL = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%95%86%E5%BA%97.png`;\n        const SHOP_MERCHANT_PORTRAIT_URL = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/%E6%B2%90%E8%8A%AF%E5%85%B0/%E6%B2%90%E8%8A%AF%E5%85%B04.png`;\n        const IDOL_BG_URL = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E7%A5%9E%E5%83%8F.png`;\n        const idolBackgroundUrl = IDOL_BG_URL;\n        const shopBackgroundUrl = SHOP_BG_URL;\n        const shopMerchantPortraitUrl = SHOP_MERCHANT_PORTRAIT_URL;\n        const chestBackgroundUrl = computed(() => {\n            if (chestStage.value === 'opened')\n                return CHEST_BG_OPENED;\n            if (chestStage.value === 'mimic')\n                return CHEST_BG_MIMIC;\n            return CHEST_BG_CLOSED;\n        });\n        const IDOL_BLESSING_CONFIG = {\n            maxHp: {\n                target: 'maxHp',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice}`,\n            },\n            mp: {\n                target: 'mp',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice}`,\n            },\n            gold: {\n                target: 'gold',\n                slotLabel: '',\n                statueName: '',\n                rewardText: (dice) => `+${dice * 2}`,\n            },\n        };\n        const allCardsForTest = computed(() => getAllCards().filter(card => card.category !== ''));\n        const cardByIdMap = computed(() => {\n            const map = new Map();\n            for (const card of getAllCards()) {\n                map.set(card.id, card);\n            }\n            return map;\n        });\n        const relicByIdMap = computed(() => {\n            const map = new Map();\n            for (const relic of getAllRelics()) {\n                map.set(relic.id, relic);\n            }\n            return map;\n        });\n        const CATEGORY_ORDER = {\n            : 0,\n            : 1,\n            : 2,\n            : 3,\n            : 4,\n        };\n        const compareCategory = (a, b) => {\n            const orderA = CATEGORY_ORDER[a] ?? 999;\n            const orderB = CATEGORY_ORDER[b] ?? 999;\n            if (orderA !== orderB)\n                return orderA - orderB;\n            return a.localeCompare(b, 'zh-Hans-CN');\n        };\n        const CARD_TYPE_ORDER_FOR_TEST = {\n            [CardType.PHYSICAL]: 0,\n            [CardType.MAGIC]: 1,\n            [CardType.FUNCTION]: 2,\n            [CardType.DODGE]: 3,\n            [CardType.ACTIVE]: 4,\n            [CardType.CURSE]: 5,\n        };\n        const cardCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const card of allCardsForTest.value) {\n                if (!grouped.has(card.category)) {\n                    grouped.set(card.category, []);\n                }\n                grouped.get(card.category).push(card);\n            }\n            return Array.from(grouped.entries())\n                .sort(([a], [b]) => compareCategory(a, b))\n                .map(([category, cards]) => ({\n                category,\n                cards: [...cards].sort((a, b) => {\n                    const typeOrderA = CARD_TYPE_ORDER_FOR_TEST[a.type] ?? 999;\n                    const typeOrderB = CARD_TYPE_ORDER_FOR_TEST[b.type] ?? 999;\n                    if (typeOrderA !== typeOrderB)\n                        return typeOrderA - typeOrderB;\n                    return a.name.localeCompare(b.name, 'zh-Hans-CN');\n                }),\n            }));\n        });\n        const cardCategoryTabsForTest = computed(() => [\n            '',\n            ...cardCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredCardCategoryGroupsForTest = computed(() => {\n            if (selectedCardCategoryTab.value === '')\n                return cardCategoryGroupsForTest.value;\n            return cardCategoryGroupsForTest.value.filter((group) => group.category === selectedCardCategoryTab.value);\n        });\n        const MAGIC_BOOK_COVER_BASE = `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E6%B3%95%E4%B9%A6%E5%B0%81%E9%9D%A2`;\n        const getMagicBookCoverUrl = (bookName) => `${MAGIC_BOOK_COVER_BASE}/${encodeURIComponent(bookName)}.png`;\n        const carryableMagicBookNames = computed(() => (cardCategoryGroupsForTest.value\n            .map((group) => group.category)\n            .filter((category) => category !== '')));\n        const rawCarriedMagicBooks = computed(() => {\n            const raw = gameStore.statData._;\n            if (!Array.isArray(raw))\n                return [];\n            return raw.filter((name) => typeof name === 'string' && name.trim().length > 0);\n        });\n        const carriedMagicBooks = computed(() => {\n            const available = new Set(carryableMagicBookNames.value);\n            return rawCarriedMagicBooks.value.filter((name) => available.has(name));\n        });\n        const carriedMagicBookSet = computed(() => new Set(carriedMagicBooks.value));\n        const selectableRelicPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            let pool = getAllRelics().filter((relic) => categorySet.has(relic.category));\n            if (pool.length === 0) {\n                pool = getAllRelics().filter((relic) => relic.category === '');\n            }\n            return [...pool];\n        });\n        const muxinlanFavor = computed(() => {\n            const roles = (gameStore.statData. ?? {});\n            const raw = Number(roles?.['']?.[''] ?? 0);\n            const safe = Number.isFinite(raw) ? raw : 0;\n            return Math.max(-1000, Math.min(1000, safe));\n        });\n        const shopDiscountRate = computed(() => Math.max(0, Math.min(1000, muxinlanFavor.value)) * 0.0002);\n        const shopRobBtnOpacity = computed(() => {\n            const revealed = Math.min(5, shopRobClickCount.value);\n            return (0.32 + revealed * 0.13).toFixed(2);\n        });\n        const parseMerchantDefeatedValue = (value) => {\n            if (value === true || value === 1)\n                return true;\n            if (typeof value === 'string') {\n                const normalized = value.trim().toLowerCase();\n                return normalized === 'true' || normalized === '1';\n            }\n            return false;\n        };\n        const isMerchantDefeated = computed(() => parseMerchantDefeatedValue(gameStore.statData._));\n        const canEditMagicBooks = computed(() => ((gameStore.statData._ || '') === ''));\n        const magicBookSidebarIcon = computed(() => (canEditMagicBooks.value ? Book : Lock));\n        const magicHatSidebarIcon = computed(() => (canEditMagicBooks.value ? WizardHatIcon : Lock));\n        const isUpdatingMagicBooks = ref(false);\n        const magicBooksNavTab = ref('books');\n        const selectedStartingActiveSlot = ref(0);\n        const isUpdatingStartingActiveSkills = ref(false);\n        const isUpgradingMagicHat = ref(false);\n        const getSafeInt = (value, fallback) => {\n            const parsed = Number(value);\n            if (!Number.isFinite(parsed))\n                return fallback;\n            return Math.max(0, Math.floor(parsed));\n        };\n        const readInitialMaxHpForUpgrade = () => {\n            return Math.max(1, getSafeInt(gameStore.statData.$, 20));\n        };\n        const calcUpgradeLevel = (value, base, step, maxLevel) => {\n            const level = Math.floor((value - base) / step);\n            return Math.max(0, Math.min(maxLevel, level));\n        };\n        const magicHatSkillPoints = computed(() => getSafeInt(gameStore.statData.$, 0));\n        const magicHatTracks = computed(() => {\n            const hpValue = readInitialMaxHpForUpgrade();\n            const mpValue = Math.max(1, getSafeInt(gameStore.statData.$, 1));\n            const goldValue = getSafeInt(gameStore.statData.$, 0);\n            const hpLevel = calcUpgradeLevel(hpValue, 20, 2, 5);\n            const mpLevel = calcUpgradeLevel(mpValue, 1, 1, 3);\n            const goldLevel = calcUpgradeLevel(goldValue, 0, 2, 5);\n            const hpIsMax = hpLevel >= 5;\n            const mpIsMax = mpLevel >= 3;\n            const goldIsMax = goldLevel >= 5;\n            return [\n                {\n                    id: 'hp',\n                    label: '',\n                    currentValue: hpValue,\n                    currentLevel: hpLevel,\n                    maxLevel: 5,\n                    nextValue: hpIsMax ? hpValue : 20 + (hpLevel + 1) * 2,\n                    nextCost: hpIsMax ? 0 : [1, 3, 6, 10, 15][hpLevel],\n                    isMax: hpIsMax,\n                    progressPercent: (hpLevel / 5) * 100,\n                    barClass: 'bg-gradient-to-r from-rose-500/85 to-red-400/85',\n                },\n                {\n                    id: 'mp',\n                    label: '',\n                    currentValue: mpValue,\n                    currentLevel: mpLevel,\n                    maxLevel: 3,\n                    nextValue: mpIsMax ? mpValue : 1 + (mpLevel + 1),\n                    nextCost: mpIsMax ? 0 : [5, 10, 15][mpLevel],\n                    isMax: mpIsMax,\n                    progressPercent: (mpLevel / 3) * 100,\n                    barClass: 'bg-gradient-to-r from-sky-500/85 to-blue-400/85',\n                },\n                {\n                    id: 'gold',\n                    label: '',\n                    currentValue: goldValue,\n                    currentLevel: goldLevel,\n                    maxLevel: 5,\n                    nextValue: goldIsMax ? goldValue : (goldLevel + 1) * 2,\n                    nextCost: goldIsMax ? 0 : [2, 4, 6, 8, 10][goldLevel],\n                    isMax: goldIsMax,\n                    progressPercent: (goldLevel / 5) * 100,\n                    barClass: 'bg-gradient-to-r from-amber-500/85 to-yellow-300/85',\n                },\n            ];\n        });\n        const openMagicBookModal = () => {\n            if (!canEditMagicBooks.value)\n                return;\n            magicBooksNavTab.value = 'books';\n            selectedStartingActiveSlot.value = 0;\n            activeModal.value = 'magicBooks';\n        };\n        const openMagicHatModal = () => {\n            if (!canEditMagicBooks.value)\n                return;\n            activeModal.value = 'magicHat';\n        };\n        const toggleMagicBook = async (bookName) => {\n            if (isUpdatingMagicBooks.value)\n                return;\n            const current = rawCarriedMagicBooks.value;\n            const nextBooks = current.includes(bookName)\n                ? current.filter((name) => name !== bookName)\n                : [...current, bookName];\n            isUpdatingMagicBooks.value = true;\n            await gameStore.updateStatDataFields({\n                _: Array.from(new Set(nextBooks)),\n            });\n            isUpdatingMagicBooks.value = false;\n        };\n        const upgradeMagicHatStat = async (id) => {\n            if (!canEditMagicBooks.value)\n                return;\n            if (isUpgradingMagicHat.value)\n                return;\n            const track = magicHatTracks.value.find((item) => item.id === id);\n            if (!track || track.isMax)\n                return;\n            if (magicHatSkillPoints.value < track.nextCost) {\n                toastr.warning('');\n                return;\n            }\n            const updates = {\n                $: magicHatSkillPoints.value - track.nextCost,\n            };\n            if (id === 'hp') {\n                updates['$'] = track.nextValue;\n                updates._ = track.nextValue;\n                updates._ = track.nextValue;\n            }\n            else if (id === 'mp') {\n                updates['$'] = track.nextValue;\n                updates._ = Math.max(getSafeInt(gameStore.statData._, 0), track.nextValue);\n            }\n            else {\n                updates['$'] = track.nextValue;\n                updates._ = Math.max(getSafeInt(gameStore.statData._, 0), track.nextValue);\n            }\n            isUpgradingMagicHat.value = true;\n            const ok = await gameStore.updateStatDataFields(updates);\n            isUpgradingMagicHat.value = false;\n            if (!ok) {\n                toastr.warning('');\n                return;\n            }\n            toastr.info(`${track.label}  ${track.nextValue}`);\n        };\n        const cardByNameForTest = computed(() => {\n            const map = new Map();\n            for (const card of allCardsForTest.value) {\n                map.set(card.name, card);\n            }\n            return map;\n        });\n        const activeSkillsForBattle = computed(() => getAllActiveSkills());\n        const activeSkillByIdMap = computed(() => {\n            const map = new Map();\n            for (const skill of activeSkillsForBattle.value) {\n                map.set(skill.id, skill);\n            }\n            return map;\n        });\n        const activeSkillByNameMap = computed(() => {\n            const map = new Map();\n            for (const skill of activeSkillsForBattle.value) {\n                map.set(skill.name, skill);\n            }\n            return map;\n        });\n        const startingActiveSkillOptions = computed(() => (activeSkillsForBattle.value.filter((skill) => skill.category === '')));\n        const startingActiveSkillEntries = computed(() => {\n            const raw = Array.isArray(gameStore.statData.$) ? [...gameStore.statData.$].slice(0, 2) : [];\n            while (raw.length < 2)\n                raw.push('');\n            return raw.map((name, idx) => ({\n                idx,\n                name,\n                skill: activeSkillByNameMap.value.get(name) ?? null,\n            }));\n        });\n        const isSkillEquippedInStartingActive = (skillName) => (startingActiveSkillEntries.value.some((entry) => entry.name === skillName));\n        const setStartingActiveSkill = async (skill) => {\n            if (isUpdatingStartingActiveSkills.value)\n                return;\n            const slot = Math.max(0, Math.min(1, Math.floor(selectedStartingActiveSlot.value)));\n            const next = startingActiveSkillEntries.value.map((entry) => entry.name);\n            const conflictSlot = next.findIndex((name, idx) => name === skill.name && idx !== slot);\n            if (conflictSlot >= 0) {\n                const previous = next[slot] ?? '';\n                next[conflictSlot] = previous;\n            }\n            next[slot] = skill.name;\n            while (next.length < 2)\n                next.push('');\n            isUpdatingStartingActiveSkills.value = true;\n            const ok = await gameStore.updateStatDataFields({ $: next.slice(0, 2) });\n            isUpdatingStartingActiveSkills.value = false;\n            if (!ok) {\n                toastr.warning('');\n            }\n        };\n        const clearStartingActiveSkill = async (slotIdx) => {\n            if (isUpdatingStartingActiveSkills.value)\n                return;\n            const slot = Math.max(0, Math.min(1, Math.floor(slotIdx)));\n            const next = startingActiveSkillEntries.value.map((entry) => entry.name);\n            while (next.length < 2)\n                next.push('');\n            next[slot] = '';\n            isUpdatingStartingActiveSkills.value = true;\n            const ok = await gameStore.updateStatDataFields({ $: next.slice(0, 2) });\n            isUpdatingStartingActiveSkills.value = false;\n            if (!ok) {\n                toastr.warning('');\n            }\n        };\n        const EXCLUDED_VICTORY_REWARD_CARD_IDS = new Set([\n            'basic_physical',\n            'basic_magic',\n            'basic_shield',\n            'basic_dodge',\n        ]);\n        const EXCLUDED_VICTORY_REWARD_ACTIVE_SKILL_IDS = new Set([\n            'active_basic_reroll_self',\n            'active_basic_reroll_enemy',\n            'active_basic_draw',\n            'active_basic_guard',\n            'active_basic_boost',\n            'active_basic_weaken',\n        ]);\n        const rewardCardPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            const filtered = allCardsForTest.value.filter((card) => (categorySet.has(card.category)\n                && !EXCLUDED_VICTORY_REWARD_CARD_IDS.has(card.id)));\n            if (filtered.length > 0)\n                return filtered;\n            return allCardsForTest.value.filter((card) => !EXCLUDED_VICTORY_REWARD_CARD_IDS.has(card.id));\n        });\n        const rewardActiveSkillPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            const filtered = activeSkillsForBattle.value.filter((skill) => (categorySet.has(skill.category)\n                && !EXCLUDED_VICTORY_REWARD_ACTIVE_SKILL_IDS.has(skill.id)));\n            if (filtered.length > 0)\n                return filtered;\n            return activeSkillsForBattle.value.filter((skill) => (skill.category === ''\n                && !EXCLUDED_VICTORY_REWARD_ACTIVE_SKILL_IDS.has(skill.id)));\n        });\n        const rewardDeckReplaceEntries = computed(() => {\n            const raw = Array.isArray(gameStore.statData._) ? gameStore.statData._ : [];\n            return raw.slice(0, 9).map((name, idx) => ({\n                idx,\n                name,\n                card: cardByNameForTest.value.get(name) ?? null,\n            }));\n        });\n        const rewardActiveReplaceEntries = computed(() => {\n            const raw = Array.isArray(gameStore.statData.$) ? [...gameStore.statData.$].slice(0, 2) : [];\n            while (raw.length < 2)\n                raw.push('');\n            return raw.map((name, idx) => ({\n                idx,\n                name,\n                skill: activeSkillByNameMap.value.get(name) ?? null,\n            }));\n        });\n        const selectedTestDeckCards = computed(() => selectedTestDeck.value\n            .map((cardName, idx) => ({ idx, card: cardByNameForTest.value.get(cardName) }))\n            .filter((entry) => entry.card !== undefined));\n        const allEnemyNamesForTest = computed(() => getAllEnemyNames());\n        const baseRelicsForTest = computed(() => ([...getAllRelics()].sort((a, b) => {\n            const categoryDiff = compareCategory(a.category, b.category);\n            if (categoryDiff !== 0)\n                return categoryDiff;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const relicCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const relic of baseRelicsForTest.value) {\n                if (!grouped.has(relic.category)) {\n                    grouped.set(relic.category, []);\n                }\n                grouped.get(relic.category).push(relic);\n            }\n            return Array.from(grouped.entries()).map(([category, relics]) => ({\n                category,\n                relics,\n            }));\n        });\n        const relicCategoryTabsForTest = computed(() => [\n            '',\n            ...relicCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredRelicCategoryGroupsForTest = computed(() => {\n            if (selectedRelicCategoryTab.value === '')\n                return relicCategoryGroupsForTest.value;\n            return relicCategoryGroupsForTest.value.filter((group) => group.category === selectedRelicCategoryTab.value);\n        });\n        watch(cardCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedCardCategoryTab.value)) {\n                selectedCardCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        watch(relicCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedRelicCategoryTab.value)) {\n                selectedRelicCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        watch(bondRoleEntries, (entries) => {\n            const names = entries.map((entry) => entry.name);\n            const keepSet = new Set(names);\n            const nextUrls = {};\n            for (const [name, url] of Object.entries(bondPortraitUrls.value)) {\n                if (keepSet.has(name)) {\n                    nextUrls[name] = url;\n                }\n            }\n            if (Object.keys(nextUrls).length !== Object.keys(bondPortraitUrls.value).length) {\n                bondPortraitUrls.value = nextUrls;\n            }\n            const nextErrors = {};\n            for (const [name, hasError] of Object.entries(bondPortraitErrors.value)) {\n                if (keepSet.has(name)) {\n                    nextErrors[name] = hasError;\n                }\n            }\n            if (Object.keys(nextErrors).length !== Object.keys(bondPortraitErrors.value).length) {\n                bondPortraitErrors.value = nextErrors;\n            }\n            for (const name of names) {\n                if (!bondPortraitUrls.value[name]) {\n                    void ensureBondPortraitLoaded(name);\n                }\n            }\n        }, { immediate: true, deep: true });\n        const getCardTypeBadgeClass = (type) => {\n            switch (type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-500/50 text-red-300 bg-red-900/20';\n                case CardType.MAGIC:\n                    return 'border-blue-500/50 text-blue-300 bg-blue-900/20';\n                case CardType.FUNCTION:\n                    return 'border-yellow-500/50 text-yellow-300 bg-yellow-900/20';\n                case CardType.DODGE:\n                    return 'border-emerald-500/50 text-emerald-300 bg-emerald-900/20';\n                case CardType.ACTIVE:\n                    return 'border-zinc-300/70 text-zinc-100 bg-zinc-100/10';\n                case CardType.CURSE:\n                    return 'border-violet-500/50 text-violet-300 bg-violet-900/20';\n                default:\n                    return 'border-white/30 text-dungeon-paper/80 bg-white/5';\n            }\n        };\n        const isActiveSkillReward = (item) => (Boolean(item && item.type === CardType.ACTIVE));\n        const getVictoryRewardTypeText = (item) => (isActiveSkillReward(item) ? '' : '');\n        const getCardCategoryStripClass = (category) => {\n            switch (category) {\n                case '':\n                    return 'bg-dungeon-gold/80';\n                case '':\n                    return 'bg-violet-400/85';\n                case '':\n                    return 'bg-orange-500/85';\n                case '':\n                    return 'bg-sky-400/85';\n                case '':\n                    return 'bg-rose-500/85';\n                default:\n                    return 'bg-indigo-400/80';\n            }\n        };\n        //  Resolved deck from MVU _ via card registry \n        const resolvedDeck = computed(() => {\n            const skills = gameStore.statData._ ?? [];\n            return resolveCardNames(skills.filter((s) => s !== ''));\n        });\n        const resolvedActiveSkills = computed(() => {\n            const skills = Array.isArray(gameStore.statData.$) ? gameStore.statData.$ : [];\n            return resolveActiveSkillNames(skills.filter((s) => s !== ''));\n        });\n        //  Resolved relics from MVU _ \n        // Format: { relicName: count } e.g. { \"\": 2, \"\": 3 }\n        const relicEntries = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            return Object.entries(raw)\n                .filter(([name, count]) => name && count > 0)\n                .map(([name, count]) => {\n                const relic = getRelicByName(name);\n                return {\n                    name,\n                    count,\n                    rarity: relic?.rarity ?? '',\n                    category: relic?.category ?? '',\n                    effect: relic?.effect ?? '',\n                    description: relic?.description ?? relic?.effect ?? '',\n                };\n            })\n                .sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN'));\n        });\n        const getOwnedRelicCountById = (id) => {\n            const relic = getAllRelics().find((entry) => entry.id === id);\n            if (!relic)\n                return 0;\n            const raw = gameStore.statData._ ?? {};\n            const byName = Number(raw[relic.name] ?? 0);\n            const byId = Number(raw[id] ?? 0);\n            const safeByName = Number.isFinite(byName) ? byName : 0;\n            const safeById = Number.isFinite(byId) ? byId : 0;\n            return Math.max(0, Math.floor(Math.max(safeByName, safeById)));\n        };\n        const BLOODPOOL_PASSIVE_MAX_HP_RELICS = [\n            { id: 'bloodpool_strawberry', bonus: 5 },\n            { id: 'bloodpool_pear', bonus: 10 },\n            { id: 'bloodpool_mango', bonus: 15 },\n        ];\n        const bloodpoolPassiveMaxHpBonus = computed(() => (BLOODPOOL_PASSIVE_MAX_HP_RELICS.reduce((sum, item) => {\n            return sum + (getOwnedRelicCountById(item.id) * item.bonus);\n        }, 0)));\n        const canRefreshVictoryReward = computed(() => (showVictoryRewardView.value\n            && victoryRewardStage.value === 'pick'\n            && rewardIsNormalEnemy.value\n            && !rewardRefreshUsed.value\n            && getOwnedRelicCountById('base_silver_card') > 0));\n        const chestRewardEntries = computed(() => (chestRewardRelics.value.map((relic) => ({\n            name: relic.name,\n            count: 1,\n            rarity: relic.rarity,\n            category: relic.category,\n            effect: relic.effect,\n            description: relic.description ?? relic.effect ?? '',\n        }))));\n        const clearRelicTooltipTimers = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n            if (relicTooltipAutoHideTimer) {\n                clearTimeout(relicTooltipAutoHideTimer);\n                relicTooltipAutoHideTimer = null;\n            }\n        };\n        const showRelicTooltipForTarget = (target, relic) => {\n            const rect = target.getBoundingClientRect();\n            const tooltipWidth = 240;\n            const margin = 8;\n            const x = Math.max(margin, Math.min(rect.left + rect.width / 2, window.innerWidth - tooltipWidth - margin));\n            const y = Math.max(margin, rect.top - margin);\n            relicTooltip.value = {\n                x,\n                y,\n                name: relic.name,\n                rarity: relic.rarity,\n                category: relic.category,\n                count: relic.count,\n                effect: relic.effect,\n                description: relic.description,\n            };\n        };\n        const showRelicTooltip = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            showRelicTooltipForTarget(target, relic);\n        };\n        const hideRelicTooltip = () => {\n            clearRelicTooltipTimers();\n            relicTooltip.value = null;\n        };\n        const handleRelicTouchStart = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            relicTooltipLongPressTimer = setTimeout(() => {\n                showRelicTooltipForTarget(target, relic);\n                relicTooltipAutoHideTimer = setTimeout(() => {\n                    relicTooltip.value = null;\n                    relicTooltipAutoHideTimer = null;\n                }, 1800);\n            }, 320);\n        };\n        const handleRelicTouchEnd = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n        };\n        const showChestRewardTooltip = (event, index) => {\n            const entry = chestRewardEntries.value[index];\n            if (!entry)\n                return;\n            showRelicTooltip(event, entry);\n        };\n        const handleChestRewardTouchStart = (event, index) => {\n            const entry = chestRewardEntries.value[index];\n            if (!entry)\n                return;\n            handleRelicTouchStart(event, entry);\n        };\n        const combatRelicMap = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            const normalized = {};\n            for (const [name, value] of Object.entries(raw)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                normalized[name] = count;\n            }\n            return normalized;\n        });\n        watch(resolvedDeck, (cards) => {\n            if (!Array.isArray(cards) || cards.length === 0)\n                return;\n            recordEncounteredCards(cards.map((card) => card.id));\n        }, { immediate: true });\n        watch(relicEntries, (entries) => {\n            if (!Array.isArray(entries) || entries.length === 0)\n                return;\n            const ids = entries\n                .map((entry) => getRelicByName(entry.name)?.id ?? '')\n                .filter((id) => Boolean(id));\n            if (ids.length === 0)\n                return;\n            recordEncounteredRelics(ids);\n        }, { immediate: true });\n        watch(() => chestRewardRelics.value, (relics) => {\n            if (!Array.isArray(relics) || relics.length === 0)\n                return;\n            recordEncounteredRelics(relics.map((relic) => relic.id));\n        }, { deep: false });\n        watch(() => shopProducts.value, (products) => {\n            if (!Array.isArray(products) || products.length === 0)\n                return;\n            recordEncounteredRelics(products.map((item) => item.relic.id));\n        }, { deep: false });\n        watch(() => victoryRewardOptions.value, (cards) => {\n            if (!Array.isArray(cards) || cards.length === 0)\n                return;\n            recordEncounteredCards(cards.map((card) => card.id));\n        }, { deep: false });\n        watch(activeModal, (modal) => {\n            if (modal === 'magicBooks' || modal === 'magicHat') {\n                gameStore.loadStatData();\n            }\n            if (modal === 'map') {\n                nextTick(() => centerMapOnLatestNode(true));\n            }\n            if (modal !== 'bonds') {\n                closeBondPortraitPreview();\n            }\n            if (modal !== 'relics') {\n                hideRelicTooltip();\n            }\n        });\n        watch(canEditMagicBooks, (editable) => {\n            if (!editable && (activeModal.value === 'magicBooks' || activeModal.value === 'magicHat')) {\n                activeModal.value = null;\n            }\n        });\n        const selectedRelicTotalCount = computed(() => (Object.values(selectedTestRelicCounts.value).reduce((sum, value) => sum + Math.max(0, Math.floor(value)), 0)));\n        //  Text display settings (reactive, persisted) \n        const textSettings = reactive({\n            fontSize: 21,\n            lineHeight: 2.0,\n            fontFamily: \"'Cinzel', serif\",\n            containerWidth: 1300,\n        });\n        const isStreamingEnabled = computed({\n            get: () => gameStore.useStreaming,\n            set: (value) => gameStore.setUseStreaming(value),\n        });\n        const selectedBgmTrackId = computed({\n            get: () => bgmTrackId.value,\n            set: (value) => setBgmTrack(value),\n        });\n        const bgmVolumePercent = computed({\n            get: () => Math.round(bgmVolume.value * 100),\n            set: (value) => setBgmVolume(value / 100),\n        });\n        //  Computed display values from MVU stat_data \n        const displayText = computed(() => gameStore.mainText || '/');\n        const MAP_ROOM_VISUAL_BY_LABEL = {\n            : { icon: '', fill: 'rgba(153,27,27,0.78)', border: '#ef4444', text: '#fecaca' },\n            : { icon: '', fill: 'rgba(127,29,29,0.84)', border: '#f87171', text: '#ffe4e6' },\n            : { icon: '', fill: 'rgba(133,77,14,0.78)', border: '#f59e0b', text: '#fef3c7' },\n            : { icon: '', fill: 'rgba(20,83,45,0.78)', border: '#34d399', text: '#dcfce7' },\n            : { icon: '', fill: 'rgba(12,74,110,0.78)', border: '#38bdf8', text: '#e0f2fe' },\n            : { icon: '', fill: 'rgba(88,28,135,0.78)', border: '#c084fc', text: '#f3e8ff' },\n            : { icon: '', fill: 'rgba(63,63,70,0.78)', border: '#a1a1aa', text: '#f4f4f5' },\n            : { icon: '', fill: 'rgba(124,45,18,0.78)', border: '#fb923c', text: '#ffedd5' },\n        };\n        const currentFloorPath = computed(() => {\n            const rawPath = (Array.isArray(gameStore.statData.$)\n                ? gameStore.statData.$\n                : (gameStore.statData.$?.$ ?? null));\n            if (!Array.isArray(rawPath))\n                return [];\n            return rawPath\n                .filter((item) => typeof item === 'string')\n                .map((item) => item.trim())\n                .filter((item) => item.length > 0);\n        });\n        const currentLayerRoomCount = computed(() => {\n            const rawCount = Number((gameStore.statData.$?. ?? 0));\n            if (!Number.isFinite(rawCount))\n                return 0;\n            return Math.max(0, Math.floor(rawCount));\n        });\n        const mapViewportRef = ref(null);\n        const mapScale = ref(1);\n        const mapOffsetX = ref(0);\n        const mapOffsetY = ref(0);\n        const mapDragPointerId = ref(null);\n        const mapDragStartClient = ref({ x: 0, y: 0 });\n        const mapDragStartOffset = ref({ x: 0, y: 0 });\n        const mapPathNodes = computed(() => {\n            const step = MAP_CELL_SIZE + MAP_CELL_GAP;\n            return currentFloorPath.value.map((label, index) => {\n                const row = Math.floor(index / MAP_PATH_COLUMNS);\n                const positionInRow = index % MAP_PATH_COLUMNS;\n                const col = row % 2 === 0 ? positionInRow : (MAP_PATH_COLUMNS - 1 - positionInRow);\n                const x = col * step;\n                const y = row * step;\n                const visual = MAP_ROOM_VISUAL_BY_LABEL[label] ?? {\n                    icon: '',\n                    fill: 'rgba(39,39,42,0.78)',\n                    border: '#a1a1aa',\n                    text: '#f4f4f5',\n                };\n                return {\n                    key: `node-${index}-${label}`,\n                    index,\n                    x,\n                    y,\n                    centerX: x + (MAP_CELL_SIZE / 2),\n                    centerY: y + (MAP_CELL_SIZE / 2),\n                    icon: visual.icon,\n                    style: {\n                        left: `${x}px`,\n                        top: `${y}px`,\n                        background: visual.fill,\n                        borderColor: visual.border,\n                        color: visual.text,\n                    },\n                };\n            });\n        });\n        const mapContentWidth = computed(() => ((MAP_PATH_COLUMNS - 1) * (MAP_CELL_SIZE + MAP_CELL_GAP) + MAP_CELL_SIZE));\n        const mapContentHeight = computed(() => {\n            const total = mapPathNodes.value.length;\n            const rowCount = total > 0 ? Math.floor((total - 1) / MAP_PATH_COLUMNS) + 1 : 1;\n            return (rowCount - 1) * (MAP_CELL_SIZE + MAP_CELL_GAP) + MAP_CELL_SIZE;\n        });\n        const mapPathLines = computed(() => {\n            const nodes = mapPathNodes.value;\n            if (nodes.length <= 1)\n                return [];\n            const lines = [];\n            for (let i = 1; i < nodes.length; i += 1) {\n                const prev = nodes[i - 1];\n                const curr = nodes[i];\n                lines.push({\n                    key: `line-${i - 1}-${i}`,\n                    x1: prev.centerX,\n                    y1: prev.centerY,\n                    x2: curr.centerX,\n                    y2: curr.centerY,\n                });\n            }\n            return lines;\n        });\n        const mapCanvasStyle = computed(() => ({\n            width: `${mapContentWidth.value}px`,\n            height: `${mapContentHeight.value}px`,\n            transform: `translate(${mapOffsetX.value}px, ${mapOffsetY.value}px) scale(${mapScale.value})`,\n            transformOrigin: '0 0',\n        }));\n        const clampMapScale = (value) => Math.max(MAP_MIN_SCALE, Math.min(MAP_MAX_SCALE, value));\n        const centerMapOnLatestNode = (resetScale = false) => {\n            const viewport = mapViewportRef.value;\n            if (!viewport)\n                return;\n            if (resetScale) {\n                mapScale.value = 1;\n            }\n            const latest = mapPathNodes.value[mapPathNodes.value.length - 1];\n            const focusX = latest ? latest.centerX : (mapContentWidth.value / 2);\n            const focusY = latest ? latest.centerY : (mapContentHeight.value / 2);\n            mapOffsetX.value = (viewport.clientWidth / 2) - (focusX * mapScale.value);\n            mapOffsetY.value = (viewport.clientHeight / 2) - (focusY * mapScale.value);\n        };\n        const zoomMap = (delta) => {\n            const viewport = mapViewportRef.value;\n            const nextScale = clampMapScale(mapScale.value + delta);\n            if (nextScale === mapScale.value)\n                return;\n            if (!viewport) {\n                mapScale.value = nextScale;\n                return;\n            }\n            const centerX = viewport.clientWidth / 2;\n            const centerY = viewport.clientHeight / 2;\n            const worldX = (centerX - mapOffsetX.value) / mapScale.value;\n            const worldY = (centerY - mapOffsetY.value) / mapScale.value;\n            mapScale.value = nextScale;\n            mapOffsetX.value = centerX - (worldX * nextScale);\n            mapOffsetY.value = centerY - (worldY * nextScale);\n        };\n        const handleMapZoomIn = () => zoomMap(MAP_SCALE_STEP);\n        const handleMapZoomOut = () => zoomMap(-MAP_SCALE_STEP);\n        const handleMapResetView = () => centerMapOnLatestNode(true);\n        const handleMapWheel = (event) => {\n            zoomMap(event.deltaY < 0 ? MAP_SCALE_STEP : -MAP_SCALE_STEP);\n        };\n        const handleMapPointerDown = (event) => {\n            if (event.pointerType === 'mouse' && event.button !== 0)\n                return;\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            mapDragPointerId.value = event.pointerId;\n            mapDragStartClient.value = { x: event.clientX, y: event.clientY };\n            mapDragStartOffset.value = { x: mapOffsetX.value, y: mapOffsetY.value };\n            target.setPointerCapture(event.pointerId);\n        };\n        const handleMapPointerMove = (event) => {\n            if (mapDragPointerId.value !== event.pointerId)\n                return;\n            const dx = event.clientX - mapDragStartClient.value.x;\n            const dy = event.clientY - mapDragStartClient.value.y;\n            mapOffsetX.value = mapDragStartOffset.value.x + dx;\n            mapOffsetY.value = mapDragStartOffset.value.y + dy;\n        };\n        const handleMapPointerUp = (event) => {\n            if (mapDragPointerId.value !== event.pointerId)\n                return;\n            const target = event.currentTarget;\n            if (target) {\n                target.releasePointerCapture(event.pointerId);\n            }\n            mapDragPointerId.value = null;\n        };\n        watch(() => currentFloorPath.value.length, () => {\n            if (activeModal.value === 'map') {\n                nextTick(() => centerMapOnLatestNode(false));\n            }\n        });\n        const inlineMarkRegex = /(\\*[^*\\r\\n]+\\*|[^\\r\\n]+|[^\\r\\n]+|\"[^\"\\r\\n]+\"|'[^'\\r\\n]+')/g;\n        const headerMarkRegex = /^(#{1,4})\\s*(.*)$/;\n        const tucaoOpenTagRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n        const tucaoCloseTagRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n        const tucaoExpandedState = ref({});\n        function isQuotedText(text) {\n            const value = text.trim();\n            if (value.length < 2)\n                return false;\n            return (/^[^\\r\\n]+$/.test(value)\n                || /^[^\\r\\n]+$/.test(value)\n                || /^\"[^\"\\r\\n]+\"$/.test(value)\n                || /^'[^'\\r\\n]+'$/.test(value));\n        }\n        function normalizeTucaoMarkers(text) {\n            return text\n                // HTML entity forms: &lt;tucao&gt;...&lt;/tucao&gt;\n                .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n                .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n                // Alternate bracket forms: [tucao]...[/tucao]\n                .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n                .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n                // Chinese tag alias: <>...</>\n                .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n                .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n        }\n        function parseInlineSegments(line, keyPrefix) {\n            if (!line)\n                return [];\n            const segments = [];\n            let lastIndex = 0;\n            let segmentIndex = 0;\n            let match;\n            inlineMarkRegex.lastIndex = 0;\n            while ((match = inlineMarkRegex.exec(line)) !== null) {\n                if (match.index > lastIndex) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'text',\n                        text: line.slice(lastIndex, match.index),\n                    });\n                    segmentIndex += 1;\n                }\n                const markedText = match[0];\n                if (markedText.startsWith('*') && markedText.endsWith('*')) {\n                    const innerText = markedText.slice(1, -1);\n                    if (isQuotedText(innerText)) {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'quote',\n                            text: innerText,\n                        });\n                    }\n                    else {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'muted',\n                            text: innerText,\n                        });\n                    }\n                }\n                else if (isQuotedText(markedText)) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                else {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                segmentIndex += 1;\n                lastIndex = inlineMarkRegex.lastIndex;\n            }\n            if (lastIndex < line.length) {\n                segments.push({\n                    key: `${keyPrefix}-seg-${segmentIndex}`,\n                    type: 'text',\n                    text: line.slice(lastIndex),\n                });\n            }\n            return segments;\n        }\n        function parseStoryLine(line, key) {\n            const match = headerMarkRegex.exec(line);\n            let level = 0;\n            let content = line;\n            if (match) {\n                level = match[1].length;\n                content = match[2];\n            }\n            return {\n                type: 'line',\n                key,\n                level,\n                segments: parseInlineSegments(content, key),\n            };\n        }\n        function parseTextLines(text, keyPrefix) {\n            if (text.length === 0)\n                return [];\n            return text.split('\\n').map((line, index) => parseStoryLine(line, `${keyPrefix}-line-${index}`));\n        }\n        function parseStoryContent(text) {\n            const normalized = normalizeTucaoMarkers(text).replace(/\\r\\n/g, '\\n');\n            const lines = [];\n            const tucaoSections = [];\n            let cursor = 0;\n            let sectionIndex = 0;\n            let openMatch;\n            tucaoOpenTagRegex.lastIndex = 0;\n            while ((openMatch = tucaoOpenTagRegex.exec(normalized)) !== null) {\n                const openStart = openMatch.index;\n                const openEnd = tucaoOpenTagRegex.lastIndex;\n                const plainPart = normalized.slice(cursor, openStart);\n                lines.push(...parseTextLines(plainPart, `story-${sectionIndex}-plain-${cursor}`));\n                tucaoCloseTagRegex.lastIndex = openEnd;\n                const closeMatch = tucaoCloseTagRegex.exec(normalized);\n                const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n                const nextCursor = closeMatch ? tucaoCloseTagRegex.lastIndex : normalized.length;\n                const tucaoContent = normalized.slice(openEnd, contentEnd).replace(/^\\n+/, '').replace(/\\n+$/, '');\n                const tucaoKey = `story-tucao-${sectionIndex}-${openStart}`;\n                const parsedTucaoLines = parseTextLines(tucaoContent, tucaoKey);\n                if (parsedTucaoLines.length > 0) {\n                    tucaoSections.push({\n                        key: tucaoKey,\n                        lines: parsedTucaoLines,\n                    });\n                }\n                cursor = nextCursor;\n                tucaoOpenTagRegex.lastIndex = cursor;\n                sectionIndex += 1;\n                // Missing closing tag: consume to end once.\n                if (!closeMatch) {\n                    break;\n                }\n            }\n            const tail = normalized.slice(cursor);\n            lines.push(...parseTextLines(tail, `story-tail-${cursor}`));\n            return {\n                lines,\n                tucaoSections,\n            };\n        }\n        const storyContentState = computed(() => parseStoryContent(displayText.value));\n        const storyMainLines = computed(() => storyContentState.value.lines);\n        const storyTucaoSections = computed(() => storyContentState.value.tucaoSections);\n        watch(storyTucaoSections, (sections) => {\n            const validKeys = new Set(sections.map(section => section.key));\n            const nextState = {};\n            for (const [key, value] of Object.entries(tucaoExpandedState.value)) {\n                if (validKeys.has(key)) {\n                    nextState[key] = value;\n                }\n            }\n            tucaoExpandedState.value = nextState;\n        }, { immediate: true });\n        const isTucaoExpanded = (key) => Boolean(tucaoExpandedState.value[key]);\n        const toggleTucao = (key) => {\n            tucaoExpandedState.value[key] = !isTucaoExpanded(key);\n        };\n        // HP: _ / _, HP \n        const displayHp = computed(() => {\n            const hp = toNonNegativeInt(gameStore.statData._, 10);\n            const maxHp = displayMaxHp.value;\n            return Math.min(hp, maxHp);\n        });\n        const displayMaxHp = computed(() => {\n            const baseMaxHp = toNonNegativeInt(gameStore.statData._, 10);\n            return Math.max(1, baseMaxHp + bloodpoolPassiveMaxHpBonus.value);\n        });\n        // MP: _ only, no max variable. Visual cap at 20.\n        const displayMp = computed(() => gameStore.statData._ ?? 1);\n        // Gold\n        const displayGold = computed(() => gameStore.statData._ ?? 0);\n        // Dice range\n        const displayMinDice = computed(() => gameStore.statData.$ ?? 0);\n        const displayMaxDice = computed(() => gameStore.statData.$ ?? 0);\n        const idolDiceMin = computed(() => Math.max(1, toNonNegativeInt(displayMinDice.value, 1)));\n        const idolDiceMax = computed(() => Math.max(idolDiceMin.value, toNonNegativeInt(displayMaxDice.value, 6)));\n        const hpPercent = computed(() => {\n            const max = displayMaxHp.value;\n            return max > 0 ? Math.min((displayHp.value / max) * 100, 100) : 100;\n        });\n        // MP visual fill: cap at 20 for display\n        const mpPercent = computed(() => {\n            const mp = displayMp.value;\n            const visualMax = 20;\n            return Math.min((mp / visualMax) * 100, 100);\n        });\n        const idolRewardSummary = computed(() => {\n            const target = idolAssignedTarget.value;\n            if (!target)\n                return null;\n            const config = IDOL_BLESSING_CONFIG[target];\n            const dice = idolDiceValue.value;\n            const amount = target === 'gold' ? dice * 2 : dice;\n            return {\n                target,\n                statueName: config.statueName,\n                amount,\n                rewardText: config.rewardText(dice),\n            };\n        });\n        //  Actions \n        const handleSendInput = () => {\n            if (!inputText.value.trim() || gameStore.isGenerating)\n                return;\n            gameStore.sendAction(inputText.value);\n            inputText.value = '';\n        };\n        const handleOptionClick = (option) => {\n            if (gameStore.isGenerating)\n                return;\n            // Strip the \"A. \" / \"B. \" / etc. prefix, paste content into input box\n            const stripped = option.replace(/^[A-D]\\.\\s*/i, '');\n            inputText.value = stripped;\n        };\n        const REBIRTH_STARTER_DECK = [\n            '', '', '',\n            '', '',\n            '', '',\n            '', '',\n        ];\n        const HOT_SPRING_CLEANSE_LINES = [\n            '',\n            '',\n            '',\n            '',\n        ];\n        const toNonNegativeInt = (value, fallback) => {\n            const n = Number(value);\n            if (!Number.isFinite(n))\n                return fallback;\n            return Math.max(0, Math.floor(n));\n        };\n        const buildRebirthResetFields = () => {\n            const initialMaxHp = Math.max(1, toNonNegativeInt(gameStore.statData.$, 10));\n            const initialMp = toNonNegativeInt(gameStore.statData.$, 1);\n            const initialGold = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentSkillPoints = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentFloor = Math.max(1, toNonNegativeInt(gameStore.statData._, 1));\n            const rebirthSkillPointGain = Math.floor((currentFloor * (currentFloor + 1)) / 2);\n            return {\n                _: initialMaxHp,\n                _: initialMaxHp,\n                _: initialMp,\n                _: initialGold,\n                $: currentSkillPoints + rebirthSkillPointGain,\n                _: [...REBIRTH_STARTER_DECK],\n                _: [],\n                $: '',\n                $: ['', ''],\n                _: {},\n                $: 6,\n                $: 1,\n                _: 1,\n                _: '',\n                _: '',\n                _: '',\n                _: '',\n                _: false,\n                $: {\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                },\n                $: [],\n            };\n        };\n        const handleRebirthClick = () => {\n            if (gameStore.isGenerating)\n                return;\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            closeShopView();\n            closeChestView();\n            closeIdolView();\n            pendingCombatNarrative.value = null;\n            gameStore.setPendingCombatMvuChanges(null);\n            gameStore.setPendingStatDataChanges(buildRebirthResetFields());\n            gameStore.sendAction('<user>');\n        };\n        //  Room type config for E option \n        const ROOM_TYPE_CONFIG = {\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.25)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#dc262680' },\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.3)', borderColor: '#ef4444', textColor: '#fca5a5', glowColor: '#ef444480' },\n            '': { label: '', icon: '', bgColor: 'rgba(161,98,7,0.25)', borderColor: '#eab308', textColor: '#fde68a', glowColor: '#eab30880' },\n            '': { label: '', icon: '', bgColor: 'rgba(21,128,61,0.25)', borderColor: '#22c55e', textColor: '#bbf7d0', glowColor: '#22c55e80' },\n            '': { label: '', icon: '', bgColor: 'rgba(8,145,178,0.25)', borderColor: '#06b6d4', textColor: '#a5f3fc', glowColor: '#06b6d480' },\n            '': { label: '', icon: '', bgColor: 'rgba(126,34,206,0.25)', borderColor: '#a855f7', textColor: '#e9d5ff', glowColor: '#a855f780' },\n        };\n        // E option: no button for  / \n        const specialOptionConfig = computed(() => {\n            if (!gameStore.hasOptionE)\n                return null;\n            if (isTreasureRoomContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            if (isShopContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            const roomType = gameStore.statData._;\n            if (!roomType)\n                return null;\n            if (roomType === '' || roomType === '')\n                return null;\n            return ROOM_TYPE_CONFIG[roomType] ?? null;\n        });\n        const isTreasureRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '' || area === '';\n        });\n        const isShopContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '';\n        });\n        const isHotSpringRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '';\n        });\n        const isIdolRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '';\n        });\n        const isCombatRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '' || roomType === '';\n        });\n        const sanitizeCombatLogLine = (line) => {\n            return line\n                .replace(/<[^>]*>/g, '')\n                .replace(/&nbsp;/g, ' ')\n                .replace(/\\s+/g, ' ')\n                .trim();\n        };\n        const formatCombatLogs = (logs) => {\n            const ordered = [...logs]\n                .reverse()\n                .map(sanitizeCombatLogLine)\n                .filter((line) => line.length > 0);\n            if (ordered.length === 0)\n                return '';\n            return ordered.join('\\n');\n        };\n        const buildCombatNarrative = (win, enemyName, context, logs) => {\n            const outcomeLine = win\n                ? `<user>[]<user>${enemyName}`\n                : `<user>[]<user>${enemyName}`;\n            const contextLine = context === 'shopRobbery'\n                ? '<user>'\n                : context === 'chestMimic'\n                    ? '<user>'\n                    : context === 'combatTest'\n                        ? '<user>'\n                        : '<user>';\n            const followupLine = win\n                ? '<user>'\n                : '<user>';\n            return `${outcomeLine}\\n${contextLine}\\n${followupLine}\\n<user>\\n${formatCombatLogs(logs)}`;\n        };\n        const sendCombatNarrativeOnce = (narrative, text) => {\n            if (dispatchedCombatNarrativeIds.has(narrative.id))\n                return;\n            if (gameStore.isGenerating)\n                return;\n            dispatchedCombatNarrativeIds.add(narrative.id);\n            gameStore.sendAction(text);\n        };\n        const queueCombatMvuSync = (win, finalStats, negativeEffects) => {\n            const hpRaw = Number(finalStats?.hp);\n            const hasHp = Number.isFinite(hpRaw);\n            const finalMaxHpRaw = Number(finalStats?.maxHp);\n            const hasFinalMaxHp = Number.isFinite(finalMaxHpRaw);\n            const floorRaw = Number(gameStore.statData._ ?? 1);\n            const floor = Number.isFinite(floorRaw) ? Math.max(1, Math.floor(floorRaw)) : 1;\n            const goldReward = 3 + (2 * floor);\n            const bloodPoolCount = getOwnedRelicCountById('bloodpool_blood_pool');\n            const stomachMarkCount = getOwnedRelicCountById('bloodpool_stomach_mark');\n            const baseMaxHp = toNonNegativeInt(gameStore.statData._, 10);\n            const stomachBonus = Math.max(0, 2 * stomachMarkCount);\n            const passiveMaxHpBonus = bloodpoolPassiveMaxHpBonus.value;\n            const normalizedNegativeEffects = negativeEffects\n                .filter((item) => typeof item === 'string')\n                .map((item) => item.trim())\n                .filter((item) => item.length > 0);\n            let nextHp = hasHp ? Math.max(0, Math.floor(hpRaw)) : undefined;\n            if (win && nextHp !== undefined && bloodPoolCount > 0) {\n                const combatMaxHp = hasFinalMaxHp\n                    ? Math.max(1, Math.floor(finalMaxHpRaw))\n                    : Math.max(1, baseMaxHp + passiveMaxHpBonus);\n                if (nextHp <= Math.floor(combatMaxHp * 0.5)) {\n                    const maxHpAfterBattle = Math.max(1, baseMaxHp + stomachBonus + passiveMaxHpBonus);\n                    nextHp = Math.min(maxHpAfterBattle, nextHp + (12 * bloodPoolCount));\n                }\n            }\n            if (stomachBonus > 0) {\n                gameStore.mergePendingStatDataChanges({\n                    _: Math.max(1, baseMaxHp + stomachBonus),\n                });\n            }\n            gameStore.setPendingCombatMvuChanges({\n                hp: nextHp,\n                addDefeatMark: !win,\n                goldDelta: win ? goldReward : undefined,\n                negativeStatusesAdd: normalizedNegativeEffects,\n            });\n        };\n        const applyMerchantDefeatedShopState = () => {\n            for (const item of shopProducts.value) {\n                item.finalPrice = 0;\n            }\n        };\n        const pickUniqueRewardItem = (pool, usedIds) => {\n            const candidates = pool.filter((item) => !usedIds.has(item.id));\n            if (candidates.length === 0)\n                return null;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? null;\n        };\n        const buildVictoryRewardOptions = () => {\n            const pool = [...rewardCardPool.value, ...rewardActiveSkillPool.value];\n            const roomType = (gameStore.statData._ || '').trim();\n            const isLordRoom = roomType === '';\n            const isNormalEnemy = roomType === '';\n            rewardIsNormalEnemy.value = isNormalEnemy;\n            const hasRainbowCard = isNormalEnemy && getOwnedRelicCountById('base_rainbow_card') > 0;\n            const hasGoldenCard = isNormalEnemy && getOwnedRelicCountById('base_golden_card') > 0;\n            const optionCount = 3 + (hasRainbowCard ? 1 : 0);\n            const rareChance = isLordRoom ? 1 : (hasGoldenCard ? 0.1 : 0.05);\n            const normalPool = pool.filter((item) => item.rarity === '');\n            const rarePool = pool.filter((item) => item.rarity === '');\n            const options = [];\n            const usedIds = new Set();\n            for (let i = 0; i < optionCount; i++) {\n                const pickRare = isLordRoom || Math.random() < rareChance;\n                const primaryPool = pickRare ? rarePool : normalPool;\n                let picked = pickUniqueRewardItem(primaryPool, usedIds);\n                if (!picked) {\n                    picked = pickUniqueRewardItem(pool, usedIds);\n                }\n                if (!picked)\n                    continue;\n                options.push(picked);\n                usedIds.add(picked.id);\n            }\n            return options;\n        };\n        const startVictoryRewardFlow = () => {\n            const options = buildVictoryRewardOptions();\n            if (options.length === 0)\n                return false;\n            rewardRefreshUsed.value = false;\n            victoryRewardOptions.value = options;\n            selectedVictoryRewardCard.value = null;\n            victoryRewardStage.value = 'pick';\n            showVictoryRewardView.value = true;\n            return true;\n        };\n        const refreshVictoryRewardOptions = () => {\n            if (!canRefreshVictoryReward.value || rewardApplying.value)\n                return;\n            const options = buildVictoryRewardOptions();\n            if (options.length === 0)\n                return;\n            rewardRefreshUsed.value = true;\n            victoryRewardOptions.value = options;\n            selectedVictoryRewardCard.value = null;\n            victoryRewardStage.value = 'pick';\n        };\n        const finalizeVictoryRewardFlow = (options) => {\n            const skipReward = Boolean(options?.skipReward);\n            showVictoryRewardView.value = false;\n            victoryRewardStage.value = 'pick';\n            victoryRewardOptions.value = [];\n            selectedVictoryRewardCard.value = null;\n            rewardApplying.value = false;\n            rewardRefreshUsed.value = false;\n            rewardIsNormalEnemy.value = false;\n            const narrative = pendingCombatNarrative.value;\n            pendingCombatNarrative.value = null;\n            if (skipReward) {\n                if (narrative) {\n                    sendCombatNarrativeOnce(narrative, VICTORY_REWARD_SKIP_ACTION_TEXT);\n                }\n                else if (!gameStore.isGenerating) {\n                    gameStore.sendAction(VICTORY_REWARD_SKIP_ACTION_TEXT);\n                }\n                return;\n            }\n            if (!narrative)\n                return;\n            if (narrative.context === 'shopRobbery')\n                return;\n            sendCombatNarrativeOnce(narrative, narrative.text);\n        };\n        const exitVictoryRewardFlow = () => {\n            finalizeVictoryRewardFlow({ skipReward: true });\n        };\n        const pickVictoryRewardCard = (card) => {\n            selectedVictoryRewardCard.value = card;\n            victoryRewardStage.value = isActiveSkillReward(card) ? 'replaceActive' : 'replaceDeck';\n        };\n        const replaceDeckCardWithReward = (idx) => {\n            if (!selectedVictoryRewardCard.value || rewardApplying.value || isActiveSkillReward(selectedVictoryRewardCard.value))\n                return;\n            const raw = Array.isArray(gameStore.statData._)\n                ? [...gameStore.statData._].slice(0, 9)\n                : [];\n            if (raw.length === 0) {\n                raw.push(selectedVictoryRewardCard.value.name);\n            }\n            else if (idx >= 0 && idx < raw.length) {\n                raw[idx] = selectedVictoryRewardCard.value.name;\n            }\n            else {\n                return;\n            }\n            rewardApplying.value = true;\n            gameStore.mergePendingStatDataChanges({ _: raw });\n            finalizeVictoryRewardFlow();\n        };\n        const replaceActiveSkillWithReward = (idx) => {\n            if (!selectedVictoryRewardCard.value || rewardApplying.value || !isActiveSkillReward(selectedVictoryRewardCard.value))\n                return;\n            if (idx < 0 || idx > 1)\n                return;\n            const raw = Array.isArray(gameStore.statData.$)\n                ? [...gameStore.statData.$].slice(0, 2)\n                : [];\n            while (raw.length < 2)\n                raw.push('');\n            raw[idx] = selectedVictoryRewardCard.value.name;\n            rewardApplying.value = true;\n            gameStore.mergePendingStatDataChanges({ $: raw });\n            finalizeVictoryRewardFlow();\n        };\n        const getRarityBasePrice = (rarity) => {\n            if (rarity === '')\n                return 15;\n            if (rarity === '')\n                return 10;\n            return 5;\n        };\n        const formatRarityLabel = (rarity) => (rarity === '' ? '' : rarity);\n        const rollShopRarity = () => {\n            const r = Math.random();\n            if (r < 0.8)\n                return '';\n            if (r < 0.95)\n                return '';\n            return '';\n        };\n        const toRelicTooltipEntry = (relic) => ({\n            name: relic.name,\n            count: 1,\n            rarity: relic.rarity,\n            category: relic.category,\n            effect: relic.effect,\n            description: relic.description ?? relic.effect ?? '',\n        });\n        const showShopProductTooltip = (event, item) => {\n            showRelicTooltip(event, toRelicTooltipEntry(item.relic));\n        };\n        const handleShopProductTouchStart = (event, item) => {\n            handleRelicTouchStart(event, toRelicTooltipEntry(item.relic));\n        };\n        const generateShopProducts = () => {\n            const pool = [...selectableRelicPool.value];\n            const favorForCount = Math.max(0, muxinlanFavor.value);\n            const targetCount = Math.max(0, 3 + Math.floor(favorForCount / 200));\n            const count = Math.min(targetCount, pool.length);\n            const usedNames = new Set();\n            const discountRate = shopDiscountRate.value;\n            const next = [];\n            for (let i = 0; i < count; i++) {\n                const targetRarity = rollShopRarity();\n                let candidates = pool.filter((relic) => !usedNames.has(relic.name) && relic.rarity === targetRarity);\n                if (candidates.length === 0) {\n                    candidates = pool.filter((relic) => !usedNames.has(relic.name));\n                }\n                if (candidates.length === 0)\n                    break;\n                const relic = pickOne(candidates);\n                if (!relic)\n                    break;\n                usedNames.add(relic.name);\n                const basePrice = getRarityBasePrice(relic.rarity);\n                const finalPrice = isMerchantDefeated.value ? 0 : Math.max(1, Math.ceil(basePrice * (1 - discountRate)));\n                next.push({\n                    key: `${relic.id}-${i}`,\n                    relic,\n                    basePrice,\n                    finalPrice,\n                    sold: false,\n                });\n            }\n            shopProducts.value = next;\n        };\n        const getCurrentShopSessionKey = () => {\n            const area = (gameStore.statData._ || '').trim();\n            const roomType = (gameStore.statData._ || '').trim();\n            const floor = Math.max(1, toNonNegativeInt(gameStore.statData._, 1));\n            const roomsPassed = Math.max(0, toNonNegativeInt(gameStore.statData.$?., 0));\n            return `${floor}|${area}|${roomType}|${roomsPassed}`;\n        };\n        const resetShopSession = () => {\n            shopSessionKey.value = null;\n            shopProducts.value = [];\n            shopSpentGold.value = 0;\n            shopPurchasedItems.value = [];\n            shopRobClickCount.value = 0;\n            shopRobbing.value = false;\n        };\n        const openShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            const nextSessionKey = getCurrentShopSessionKey();\n            const shouldRebuild = shopSessionKey.value !== nextSessionKey || shopProducts.value.length === 0;\n            if (shouldRebuild) {\n                shopSessionKey.value = nextSessionKey;\n                shopSpentGold.value = 0;\n                shopPurchasedItems.value = [];\n                shopRobClickCount.value = 0;\n                shopRobbing.value = false;\n                generateShopProducts();\n            }\n            if (isMerchantDefeated.value) {\n                applyMerchantDefeatedShopState();\n            }\n            showShopView.value = true;\n        };\n        const closeShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopRobbing.value = false;\n            showShopView.value = false;\n        };\n        const buildNextRelicInventory = (pickedRelic, baseInventory) => {\n            const rawRelics = baseInventory ?? (gameStore.statData._ ?? {});\n            const nextRelics = {};\n            for (const [name, value] of Object.entries(rawRelics)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                nextRelics[name] = count;\n            }\n            nextRelics[pickedRelic.name] = (nextRelics[pickedRelic.name] ?? 0) + 1;\n            return nextRelics;\n        };\n        const buyShopProduct = (item) => {\n            if (shopBuying.value || item.sold)\n                return;\n            const baseGold = Math.max(0, Math.floor(Number(gameStore.statData._ ?? 0)));\n            const currentGold = Math.max(0, baseGold - shopSpentGold.value);\n            if (currentGold < item.finalPrice) {\n                return;\n            }\n            shopBuying.value = true;\n            item.sold = true;\n            shopSpentGold.value += item.finalPrice;\n            shopPurchasedItems.value.push({\n                name: item.relic.name,\n                rarity: formatRarityLabel(item.relic.rarity),\n                price: item.finalPrice,\n            });\n            hideRelicTooltip();\n            shopBuying.value = false;\n        };\n        const exitShop = () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value)\n                return;\n            const purchased = [...shopPurchasedItems.value];\n            const total = shopSpentGold.value;\n            if (purchased.length > 0) {\n                const baseGold = Math.max(0, Math.floor(Number(gameStore.statData._ ?? 0)));\n                const nextGold = Math.max(0, baseGold - total);\n                let nextRelics = gameStore.statData._ ?? {};\n                for (const item of purchased) {\n                    const relic = getRelicByName(item.name);\n                    if (relic) {\n                        nextRelics = buildNextRelicInventory(relic, nextRelics);\n                    }\n                    else {\n                        const fallbackNext = {};\n                        for (const [name, value] of Object.entries(nextRelics)) {\n                            const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                            if (!name || count <= 0)\n                                continue;\n                            fallbackNext[name] = count;\n                        }\n                        fallbackNext[item.name] = (fallbackNext[item.name] ?? 0) + 1;\n                        nextRelics = fallbackNext;\n                    }\n                }\n                gameStore.mergePendingStatDataChanges({\n                    _: nextGold,\n                    _: nextRelics,\n                });\n            }\n            const narrative = pendingCombatNarrative.value;\n            closeShopView();\n            if (narrative && narrative.context === 'shopRobbery' && narrative.win) {\n                const lootedText = purchased.length > 0\n                    ? `<user>${purchased.map((item) => `${item.name}${item.rarity}`).join('')}`\n                    : '<user>';\n                const report = `${narrative.text}\\n${lootedText}\\n<user>`;\n                pendingCombatNarrative.value = null;\n                sendCombatNarrativeOnce(narrative, report);\n                return;\n            }\n            if (purchased.length === 0)\n                return;\n            const purchasedText = purchased.map((item) => `${item.name}${item.rarity}`).join('');\n            gameStore.sendAction(`<user>${purchasedText}${total}`);\n        };\n        const handleShopRobClick = async () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value || isMerchantDefeated.value)\n                return;\n            if (shopRobClickCount.value < 5) {\n                shopRobClickCount.value += 1;\n                return;\n            }\n            shopRobbing.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: '' });\n            if (!ok) {\n                shopRobbing.value = false;\n                return;\n            }\n            clearShopRobTimer();\n            shopRobTimer = setTimeout(() => {\n                closeShopView();\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'shopRobbery';\n                showCombat.value = true;\n                shopRobTimer = null;\n            }, 1000);\n        };\n        const clearShopRobTimer = () => {\n            if (!shopRobTimer)\n                return;\n            clearTimeout(shopRobTimer);\n            shopRobTimer = null;\n        };\n        const clearChestMimicTimer = () => {\n            if (!chestMimicTimer)\n                return;\n            clearTimeout(chestMimicTimer);\n            chestMimicTimer = null;\n        };\n        const clearChestRewardFadeTimer = () => {\n            if (!chestRewardFadeTimer)\n                return;\n            clearTimeout(chestRewardFadeTimer);\n            chestRewardFadeTimer = null;\n        };\n        const clearChestCloseLongPressTimer = () => {\n            if (!chestCloseLongPressTimer)\n                return;\n            clearTimeout(chestCloseLongPressTimer);\n            chestCloseLongPressTimer = null;\n        };\n        const clearHotSpringCleanseTimer = () => {\n            if (!hotSpringCleanseTimer)\n                return;\n            clearTimeout(hotSpringCleanseTimer);\n            hotSpringCleanseTimer = null;\n        };\n        const showHotSpringCleanseText = () => {\n            const text = pickOne(HOT_SPRING_CLEANSE_LINES) ?? HOT_SPRING_CLEANSE_LINES[0];\n            const messageId = ++hotSpringCleanseMessageId;\n            hotSpringCleanseMessage.value = { id: messageId, text };\n            clearHotSpringCleanseTimer();\n            hotSpringCleanseTimer = setTimeout(() => {\n                if (hotSpringCleanseMessage.value?.id === messageId) {\n                    hotSpringCleanseMessage.value = null;\n                }\n                hotSpringCleanseTimer = null;\n            }, 2600);\n        };\n        const useHotSpringCleanse = () => {\n            showHotSpringCleanseText();\n            gameStore.setPendingStatDataChanges({ _: [] });\n            gameStore.sendAction(HOT_SPRING_CLEANSE_ACTION_TEXT);\n        };\n        onUnmounted(() => {\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearChestCloseLongPressTimer();\n            clearHotSpringCleanseTimer();\n            clearIdolRollTimer();\n        });\n        const handleChestBgLoaded = () => {\n            if (!showChestView.value)\n                return;\n            if (chestStage.value !== 'opened')\n                return;\n            if (chestBackgroundUrl.value !== CHEST_BG_OPENED)\n                return;\n            chestOpenedBgReady.value = true;\n            const hasUncollectedReward = chestRewardRelics.value.some((_, idx) => !chestRewardCollectedFlags.value[idx]);\n            if (hasUncollectedReward) {\n                chestRewardVisible.value = true;\n            }\n        };\n        const openChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearChestCloseLongPressTimer();\n            chestStage.value = 'closed';\n            chestRolling.value = false;\n            chestRewardRelics.value = [];\n            chestRewardCollectedFlags.value = [];\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n            chestPortalChoices.value = [];\n            chestRewardCountFixed.value = null;\n            chestCloseCount.value = 0;\n            chestForceMimicNextOpen.value = false;\n            showChestView.value = true;\n        };\n        const closeChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearChestCloseLongPressTimer();\n            hideRelicTooltip();\n            showChestView.value = false;\n            chestRolling.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n        };\n        const clearIdolRollTimer = () => {\n            if (!idolRollTimer)\n                return;\n            clearTimeout(idolRollTimer);\n            idolRollTimer = null;\n        };\n        const clampNumber = (value, min, max) => {\n            if (max <= min)\n                return min;\n            return Math.max(min, Math.min(max, value));\n        };\n        const rollIdolDiceValue = () => {\n            const min = idolDiceMin.value;\n            const max = idolDiceMax.value;\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        const getIdolSlotElement = (target) => {\n            if (target === 'maxHp')\n                return idolSlotMaxHpRef.value;\n            if (target === 'mp')\n                return idolSlotMpRef.value;\n            return idolSlotGoldRef.value;\n        };\n        const getIdolSnapCandidate = (x, y) => {\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return null;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const diceCenterX = x + (diceRect.width / 2);\n            const diceCenterY = y + (diceRect.height / 2);\n            let best = null;\n            const targets = ['maxHp', 'mp', 'gold'];\n            for (const target of targets) {\n                const slotEl = getIdolSlotElement(target);\n                if (!slotEl)\n                    continue;\n                const slotRect = slotEl.getBoundingClientRect();\n                const slotCenterX = (slotRect.left - stageRect.left) + (slotRect.width / 2);\n                const slotCenterY = (slotRect.top - stageRect.top) + (slotRect.height / 2);\n                const distance = Math.hypot(slotCenterX - diceCenterX, slotCenterY - diceCenterY);\n                const snapX = clampNumber(slotCenterX - (diceRect.width / 2), 0, maxX);\n                const snapY = clampNumber(slotCenterY - (diceRect.height / 2), 0, maxY);\n                if (!best || distance < best.distance) {\n                    best = { target, distance, snapX, snapY };\n                }\n            }\n            if (!best || best.distance > IDOL_SNAP_DISTANCE)\n                return null;\n            return best;\n        };\n        const placeIdolDiceAtStart = () => {\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const x = Math.max(0, (stageRect.width - diceRect.width) / 2);\n            const y = clampNumber(stageRect.height * 0.72, 0, maxY);\n            idolDicePosition.value = { x: clampNumber(x, 0, maxX), y };\n            idolSnapPreviewTarget.value = null;\n        };\n        const openIdolView = () => {\n            if (gameStore.isGenerating)\n                return;\n            clearIdolRollTimer();\n            idolAssignedTarget.value = null;\n            idolSnapPreviewTarget.value = null;\n            idolDragPointerId.value = null;\n            idolDiceValue.value = idolDiceMin.value;\n            idolDiceRolling.value = true;\n            showIdolView.value = true;\n            idolRollTimer = setTimeout(() => {\n                idolDiceValue.value = rollIdolDiceValue();\n                idolDiceRolling.value = false;\n                idolRollTimer = null;\n                requestAnimationFrame(() => {\n                    placeIdolDiceAtStart();\n                });\n            }, 520);\n        };\n        const closeIdolView = () => {\n            clearIdolRollTimer();\n            idolDragPointerId.value = null;\n            showIdolView.value = false;\n        };\n        const handleIdolDicePointerDown = (event) => {\n            if (!showIdolView.value || idolDiceRolling.value)\n                return;\n            const diceEl = idolDiceRef.value;\n            if (!diceEl)\n                return;\n            idolAssignedTarget.value = null;\n            idolDragPointerId.value = event.pointerId;\n            idolDragStart.value = { x: event.clientX, y: event.clientY };\n            idolDragStartPos.value = { ...idolDicePosition.value };\n            diceEl.setPointerCapture(event.pointerId);\n        };\n        const handleIdolDicePointerMove = (event) => {\n            if (!showIdolView.value)\n                return;\n            if (idolDragPointerId.value !== event.pointerId)\n                return;\n            const stageEl = idolDiceStageRef.value;\n            const diceEl = idolDiceRef.value;\n            if (!stageEl || !diceEl)\n                return;\n            const stageRect = stageEl.getBoundingClientRect();\n            const diceRect = diceEl.getBoundingClientRect();\n            const maxX = Math.max(0, stageRect.width - diceRect.width);\n            const maxY = Math.max(0, stageRect.height - diceRect.height);\n            const dx = event.clientX - idolDragStart.value.x;\n            const dy = event.clientY - idolDragStart.value.y;\n            const nextX = clampNumber(idolDragStartPos.value.x + dx, 0, maxX);\n            const nextY = clampNumber(idolDragStartPos.value.y + dy, 0, maxY);\n            idolDicePosition.value = { x: nextX, y: nextY };\n            const candidate = getIdolSnapCandidate(nextX, nextY);\n            idolSnapPreviewTarget.value = candidate?.target ?? null;\n        };\n        const handleIdolDicePointerUp = (event) => {\n            if (!showIdolView.value)\n                return;\n            if (idolDragPointerId.value !== event.pointerId)\n                return;\n            const diceEl = idolDiceRef.value;\n            if (diceEl) {\n                diceEl.releasePointerCapture(event.pointerId);\n            }\n            const candidate = getIdolSnapCandidate(idolDicePosition.value.x, idolDicePosition.value.y);\n            if (candidate) {\n                idolAssignedTarget.value = candidate.target;\n                idolSnapPreviewTarget.value = candidate.target;\n                idolDicePosition.value = { x: candidate.snapX, y: candidate.snapY };\n            }\n            else {\n                idolAssignedTarget.value = null;\n                idolSnapPreviewTarget.value = null;\n            }\n            idolDragPointerId.value = null;\n        };\n        const buildIdolPendingFields = () => {\n            const reward = idolRewardSummary.value;\n            if (!reward)\n                return null;\n            const currentMaxHp = toNonNegativeInt(gameStore.statData._, 10);\n            const currentMp = toNonNegativeInt(gameStore.statData._, 1);\n            const currentGold = toNonNegativeInt(gameStore.statData._, 0);\n            if (reward.target === 'maxHp') {\n                return { _: currentMaxHp + reward.amount };\n            }\n            if (reward.target === 'mp') {\n                return { _: currentMp + reward.amount };\n            }\n            return { _: currentGold + reward.amount };\n        };\n        const exitIdolView = () => {\n            if (gameStore.isGenerating)\n                return;\n            const reward = idolRewardSummary.value;\n            closeIdolView();\n            if (!reward) {\n                gameStore.sendAction('<user>');\n                return;\n            }\n            const fields = buildIdolPendingFields();\n            if (fields) {\n                gameStore.setPendingStatDataChanges(fields);\n            }\n            gameStore.sendAction(`<user>${reward.statueName}${reward.rewardText}`);\n        };\n        const rollChestRewardRarity = () => {\n            const rarityRoll = Math.random();\n            if (rarityRoll < 0.8)\n                return '';\n            if (rarityRoll < 0.95)\n                return '';\n            return '';\n        };\n        const rollChestRewardCount = () => (Math.random() < 0.8 ? 1 : 2);\n        const pickChestRewardRelics = (count) => {\n            const candidatePool = [...selectableRelicPool.value];\n            if (candidatePool.length === 0 || count <= 0)\n                return [];\n            const picked = [];\n            const usedIds = new Set();\n            for (let i = 0; i < count; i += 1) {\n                const targetRarity = rollChestRewardRarity();\n                let candidates = candidatePool.filter((relic) => relic.rarity === targetRarity && !usedIds.has(relic.id));\n                if (candidates.length === 0) {\n                    candidates = candidatePool.filter((relic) => !usedIds.has(relic.id));\n                }\n                if (candidates.length === 0) {\n                    candidates = candidatePool.filter((relic) => relic.rarity === targetRarity);\n                }\n                if (candidates.length === 0) {\n                    candidates = candidatePool;\n                }\n                const relic = pickOne(candidates);\n                if (!relic)\n                    break;\n                usedIds.add(relic.id);\n                picked.push(relic);\n            }\n            return picked;\n        };\n        const queueChestMimicCombatTransition = () => {\n            clearChestMimicTimer();\n            chestMimicTimer = setTimeout(() => {\n                showChestView.value = false;\n                chestRolling.value = false;\n                chestRewardVisible.value = false;\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'chestMimic';\n                showCombat.value = true;\n                chestMimicTimer = null;\n            }, 1000);\n        };\n        const closeOpenedChestForRefresh = () => {\n            if (chestStage.value !== 'opened' || chestRolling.value || chestCollecting.value)\n                return;\n            const hasCollectedAnyReward = chestRewardCollectedFlags.value.some((flag) => flag);\n            if (hasCollectedAnyReward) {\n                toastr.info('');\n                return;\n            }\n            chestCloseCount.value += 1;\n            if (chestCloseCount.value >= 2) {\n                chestForceMimicNextOpen.value = true;\n            }\n            clearChestRewardFadeTimer();\n            hideRelicTooltip();\n            chestStage.value = 'closed';\n            chestRolling.value = false;\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n            chestRewardRelics.value = [];\n            chestRewardCollectedFlags.value = [];\n            chestPortalChoices.value = [];\n        };\n        const handleChestContextMenu = () => {\n            closeOpenedChestForRefresh();\n        };\n        const handleChestTouchStart = () => {\n            if (chestStage.value !== 'opened')\n                return;\n            clearChestCloseLongPressTimer();\n            chestCloseLongPressTimer = setTimeout(() => {\n                closeOpenedChestForRefresh();\n                chestCloseLongPressTimer = null;\n            }, 2000);\n        };\n        const handleChestTouchEnd = () => {\n            clearChestCloseLongPressTimer();\n        };\n        const collectChestReward = (index) => {\n            if (chestCollecting.value)\n                return;\n            if (index < 0 || index >= chestRewardRelics.value.length)\n                return;\n            if (chestRewardCollectedFlags.value[index])\n                return;\n            chestCollecting.value = true;\n            chestRewardCollectedFlags.value[index] = true;\n            chestCollecting.value = false;\n            const allCollected = chestRewardCollectedFlags.value.length > 0\n                && chestRewardCollectedFlags.value.every((flag) => flag);\n            if (!allCollected)\n                return;\n            clearChestRewardFadeTimer();\n            chestRewardFadeTimer = setTimeout(() => {\n                chestRewardVisible.value = false;\n                hideRelicTooltip();\n                chestRewardFadeTimer = null;\n            }, 260);\n        };\n        const handleChestCenterClick = async () => {\n            if (chestRolling.value || chestStage.value !== 'closed')\n                return;\n            chestRolling.value = true;\n            const forcedMimic = chestForceMimicNextOpen.value;\n            const openSuccess = !forcedMimic && Math.random() < 0.9;\n            if (openSuccess) {\n                chestStage.value = 'opened';\n                chestOpenedBgReady.value = false;\n                chestRewardVisible.value = false;\n                const rewardCount = chestRewardCountFixed.value ?? rollChestRewardCount();\n                chestRewardCountFixed.value = rewardCount;\n                const rewards = pickChestRewardRelics(rewardCount);\n                if (rewards.length === 0) {\n                    chestRolling.value = false;\n                    return;\n                }\n                chestRewardRelics.value = rewards;\n                chestRewardCollectedFlags.value = rewards.map(() => false);\n                chestCollecting.value = false;\n                chestPortalChoices.value = generateChestLeavePortals();\n                if (chestOpenedBgReady.value) {\n                    chestRewardVisible.value = true;\n                }\n                chestRolling.value = false;\n                return;\n            }\n            chestForceMimicNextOpen.value = false;\n            chestStage.value = 'mimic';\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestPortalChoices.value = [];\n            await gameStore.updateStatDataFields({ _: '' });\n            queueChestMimicCombatTransition();\n        };\n        const startCombatFromSpecialOption = async () => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            const bloodPoolCount = getOwnedRelicCountById('bloodpool_blood_pool');\n            if (roomType === '' && bloodPoolCount > 0) {\n                const fullHp = displayMaxHp.value;\n                const currentHp = toNonNegativeInt(gameStore.statData._, fullHp);\n                if (currentHp < fullHp) {\n                    const ok = await gameStore.updateStatDataFields({ _: fullHp });\n                    if (!ok)\n                        return;\n                }\n            }\n            let enemyName = (gameStore.statData._ || '').trim();\n            if (!enemyName) {\n                enemyName = roomType === ''\n                    ? (pickLordMonsterByArea(area) ?? '')\n                    : (pickBattleMonsterByArea(area) ?? '');\n                if (!enemyName) {\n                    toastr.warning('');\n                    return;\n                }\n                const ok = await gameStore.updateStatDataFields({ _: enemyName });\n                if (!ok)\n                    return;\n            }\n            combatEnemyName.value = enemyName;\n            activeCombatContext.value = 'normal';\n            showCombat.value = true;\n        };\n        const handleSpecialOption = async () => {\n            if (isTreasureRoomContext.value) {\n                openChestView();\n                return;\n            }\n            if (isShopContext.value) {\n                openShopView();\n                return;\n            }\n            if (isHotSpringRoomContext.value) {\n                useHotSpringCleanse();\n                return;\n            }\n            if (isIdolRoomContext.value) {\n                openIdolView();\n                return;\n            }\n            if (isCombatRoomContext.value) {\n                await startCombatFromSpecialOption();\n                return;\n            }\n            toastr.info('...');\n        };\n        const buildOverlaySnapshot = () => {\n            if (showChestView.value) {\n                return {\n                    version: 1,\n                    active: 'chest',\n                    chest: {\n                        stage: chestStage.value,\n                        rolling: chestRolling.value,\n                        rewardRelicIds: chestRewardRelics.value.map((relic) => relic.id),\n                        rewardCollectedFlags: chestRewardRelics.value.map((_, idx) => Boolean(chestRewardCollectedFlags.value[idx])),\n                        collecting: chestCollecting.value,\n                        rewardVisible: chestRewardVisible.value,\n                        openedBgReady: chestOpenedBgReady.value,\n                        portalChoices: chestPortalChoices.value.map((portal) => ({ ...portal })),\n                        rewardCountFixed: chestRewardCountFixed.value,\n                        closeCount: chestCloseCount.value,\n                        forceMimicNextOpen: chestForceMimicNextOpen.value,\n                    },\n                };\n            }\n            if (showShopView.value) {\n                return {\n                    version: 1,\n                    active: 'shop',\n                    shop: {\n                        products: shopProducts.value.map((item) => ({\n                            key: item.key,\n                            relicId: item.relic.id,\n                            basePrice: item.basePrice,\n                            finalPrice: item.finalPrice,\n                            sold: item.sold,\n                        })),\n                        spentGold: shopSpentGold.value,\n                        purchasedItems: shopPurchasedItems.value.map((item) => ({ ...item })),\n                        robClickCount: shopRobClickCount.value,\n                        robbing: shopRobbing.value,\n                    },\n                };\n            }\n            if (showIdolView.value) {\n                return {\n                    version: 1,\n                    active: 'idol',\n                    idol: {\n                        diceValue: idolDiceValue.value,\n                        diceRolling: idolDiceRolling.value,\n                        assignedTarget: idolAssignedTarget.value,\n                        snapPreviewTarget: idolSnapPreviewTarget.value,\n                        dicePosition: { ...idolDicePosition.value },\n                    },\n                };\n            }\n            if (showVictoryRewardView.value) {\n                return {\n                    version: 1,\n                    active: 'victoryReward',\n                    victory: {\n                        stage: victoryRewardStage.value,\n                        optionRewardIds: victoryRewardOptions.value.map((item) => item.id),\n                        selectedRewardId: selectedVictoryRewardCard.value?.id ?? null,\n                        refreshUsed: rewardRefreshUsed.value,\n                        isNormalEnemy: rewardIsNormalEnemy.value,\n                    },\n                };\n            }\n            return null;\n        };\n        const persistOverlaySnapshot = () => {\n            if (isRestoringOverlayState.value)\n                return;\n            const snapshot = buildOverlaySnapshot();\n            if (!snapshot) {\n                localStorage.removeItem(OVERLAY_STATE_KEY);\n                return;\n            }\n            try {\n                localStorage.setItem(OVERLAY_STATE_KEY, JSON.stringify(snapshot));\n            }\n            catch {\n                // ignore storage write failure\n            }\n        };\n        const resolvePersistedPortalChoices = (choices) => {\n            if (!Array.isArray(choices))\n                return [];\n            const resolved = [];\n            for (const entry of choices) {\n                if (!entry || typeof entry !== 'object')\n                    continue;\n                const portal = entry;\n                if (typeof portal.label !== 'string'\n                    || typeof portal.roomType !== 'string'\n                    || typeof portal.icon !== 'string'\n                    || typeof portal.bgColor !== 'string'\n                    || typeof portal.borderColor !== 'string'\n                    || typeof portal.textColor !== 'string'\n                    || typeof portal.glowColor !== 'string') {\n                    continue;\n                }\n                resolved.push({\n                    label: portal.label,\n                    roomType: portal.roomType,\n                    areaName: typeof portal.areaName === 'string' ? portal.areaName : undefined,\n                    floorName: typeof portal.floorName === 'string' ? portal.floorName : undefined,\n                    isFloorTransition: Boolean(portal.isFloorTransition),\n                    icon: portal.icon,\n                    bgColor: portal.bgColor,\n                    borderColor: portal.borderColor,\n                    textColor: portal.textColor,\n                    glowColor: portal.glowColor,\n                });\n            }\n            return resolved;\n        };\n        const restoreOverlaySnapshot = () => {\n            const raw = localStorage.getItem(OVERLAY_STATE_KEY);\n            if (!raw)\n                return;\n            let parsed = null;\n            try {\n                parsed = JSON.parse(raw);\n            }\n            catch {\n                localStorage.removeItem(OVERLAY_STATE_KEY);\n                return;\n            }\n            if (!parsed || parsed.version !== 1) {\n                localStorage.removeItem(OVERLAY_STATE_KEY);\n                return;\n            }\n            isRestoringOverlayState.value = true;\n            try {\n                if (parsed.active === 'chest' && parsed.chest) {\n                    const relics = parsed.chest.rewardRelicIds\n                        .map((id) => relicByIdMap.value.get(id) ?? getRelicById(id))\n                        .filter((relic) => Boolean(relic));\n                    showChestView.value = true;\n                    chestStage.value = parsed.chest.stage;\n                    chestRolling.value = Boolean(parsed.chest.rolling);\n                    chestRewardRelics.value = relics;\n                    chestRewardCollectedFlags.value = relics.map((_, idx) => Boolean(parsed.chest?.rewardCollectedFlags[idx]));\n                    chestCollecting.value = false;\n                    chestRewardVisible.value = Boolean(parsed.chest.rewardVisible);\n                    chestOpenedBgReady.value = Boolean(parsed.chest.openedBgReady);\n                    chestPortalChoices.value = resolvePersistedPortalChoices(parsed.chest.portalChoices);\n                    chestRewardCountFixed.value = parsed.chest.rewardCountFixed === null\n                        ? null\n                        : Math.max(1, Math.min(2, toNonNegativeInt(parsed.chest.rewardCountFixed, 1)));\n                    chestCloseCount.value = toNonNegativeInt(parsed.chest.closeCount, 0);\n                    chestForceMimicNextOpen.value = Boolean(parsed.chest.forceMimicNextOpen);\n                    if (chestStage.value === 'mimic') {\n                        queueChestMimicCombatTransition();\n                    }\n                    return;\n                }\n                if (parsed.active === 'shop' && parsed.shop) {\n                    const products = [];\n                    for (const [idx, product] of parsed.shop.products.entries()) {\n                        const relic = relicByIdMap.value.get(product.relicId) ?? getRelicById(product.relicId);\n                        if (!relic)\n                            continue;\n                        products.push({\n                            key: product.key || `${relic.id}-${idx}`,\n                            relic,\n                            basePrice: Math.max(0, toNonNegativeInt(product.basePrice, 0)),\n                            finalPrice: Math.max(0, toNonNegativeInt(product.finalPrice, 0)),\n                            sold: Boolean(product.sold),\n                        });\n                    }\n                    showShopView.value = true;\n                    shopProducts.value = products;\n                    shopSpentGold.value = Math.max(0, toNonNegativeInt(parsed.shop.spentGold, 0));\n                    shopPurchasedItems.value = Array.isArray(parsed.shop.purchasedItems)\n                        ? parsed.shop.purchasedItems\n                            .filter((item) => item && typeof item.name === 'string')\n                            .map((item) => ({\n                            name: item.name,\n                            rarity: typeof item.rarity === 'string' ? item.rarity : '',\n                            price: Math.max(0, toNonNegativeInt(item.price, 0)),\n                        }))\n                        : [];\n                    shopRobClickCount.value = Math.max(0, toNonNegativeInt(parsed.shop.robClickCount, 0));\n                    shopRobbing.value = Boolean(parsed.shop.robbing);\n                    shopSessionKey.value = getCurrentShopSessionKey();\n                    shopBuying.value = false;\n                    return;\n                }\n                if (parsed.active === 'idol' && parsed.idol) {\n                    showIdolView.value = true;\n                    idolDiceValue.value = clampNumber(toNonNegativeInt(parsed.idol.diceValue, idolDiceMin.value), idolDiceMin.value, idolDiceMax.value);\n                    idolDiceRolling.value = false;\n                    idolAssignedTarget.value = parsed.idol.assignedTarget;\n                    idolSnapPreviewTarget.value = parsed.idol.snapPreviewTarget;\n                    idolDicePosition.value = {\n                        x: Number.isFinite(parsed.idol.dicePosition?.x) ? parsed.idol.dicePosition.x : 0,\n                        y: Number.isFinite(parsed.idol.dicePosition?.y) ? parsed.idol.dicePosition.y : 0,\n                    };\n                    idolDragPointerId.value = null;\n                    return;\n                }\n                if (parsed.active === 'victoryReward' && parsed.victory) {\n                    const victoryData = parsed.victory;\n                    const optionIds = Array.isArray(victoryData.optionRewardIds)\n                        ? victoryData.optionRewardIds\n                        : (Array.isArray(victoryData.optionCardIds) ? victoryData.optionCardIds : []);\n                    const options = optionIds\n                        .map((id) => cardByIdMap.value.get(id) ?? activeSkillByIdMap.value.get(id))\n                        .filter((item) => Boolean(item));\n                    if (options.length === 0) {\n                        localStorage.removeItem(OVERLAY_STATE_KEY);\n                        return;\n                    }\n                    const selectedId = victoryData.selectedRewardId ?? victoryData.selectedCardId ?? null;\n                    const restoredStage = victoryData.stage === 'replaceActive'\n                        ? 'replaceActive'\n                        : victoryData.stage === 'replaceDeck' || victoryData.stage === 'replace'\n                            ? 'replaceDeck'\n                            : 'pick';\n                    showVictoryRewardView.value = true;\n                    victoryRewardStage.value = restoredStage;\n                    victoryRewardOptions.value = options;\n                    selectedVictoryRewardCard.value = selectedId\n                        ? (cardByIdMap.value.get(selectedId) ?? activeSkillByIdMap.value.get(selectedId) ?? null)\n                        : null;\n                    rewardApplying.value = false;\n                    rewardRefreshUsed.value = Boolean(parsed.victory.refreshUsed);\n                    rewardIsNormalEnemy.value = Boolean(parsed.victory.isNormalEnemy);\n                    return;\n                }\n                localStorage.removeItem(OVERLAY_STATE_KEY);\n            }\n            finally {\n                isRestoringOverlayState.value = false;\n            }\n        };\n        watch([\n            showChestView,\n            showShopView,\n            showIdolView,\n            showVictoryRewardView,\n            chestStage,\n            chestRolling,\n            chestRewardRelics,\n            chestRewardCollectedFlags,\n            chestCollecting,\n            chestRewardVisible,\n            chestOpenedBgReady,\n            chestPortalChoices,\n            chestRewardCountFixed,\n            chestCloseCount,\n            chestForceMimicNextOpen,\n            shopProducts,\n            shopSpentGold,\n            shopPurchasedItems,\n            shopRobClickCount,\n            shopRobbing,\n            idolDiceValue,\n            idolDiceRolling,\n            idolAssignedTarget,\n            idolSnapPreviewTarget,\n            idolDicePosition,\n            victoryRewardStage,\n            victoryRewardOptions,\n            selectedVictoryRewardCard,\n            rewardRefreshUsed,\n            rewardIsNormalEnemy,\n        ], () => {\n            persistOverlaySnapshot();\n        }, { deep: true });\n        onMounted(() => {\n            restoreOverlaySnapshot();\n        });\n        // \n        //  [Leave] Portal System  Floor/Area Logic\n        // \n        const FLOOR_MONSTER_CONFIG = {\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', '', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': [''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': [''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n        };\n        //  FLOOR_MONSTER_CONFIG \n        const LORD_MONSTER_ORDER = [\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ];\n        const LORD_MONSTER_BY_AREA = (() => {\n            const areaOrder = [];\n            for (const floorConfig of Object.values(FLOOR_MONSTER_CONFIG)) {\n                areaOrder.push(...Object.keys(floorConfig.uniqueByArea));\n            }\n            const mapping = {};\n            for (let i = 0; i < areaOrder.length; i += 1) {\n                const area = areaOrder[i];\n                const lordName = LORD_MONSTER_ORDER[i];\n                if (lordName) {\n                    mapping[area] = lordName;\n                }\n            }\n            return mapping;\n        })();\n        // 70% 30% \n        const COMMON_MONSTER_RATE_BY_FLOOR = {\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n        };\n        function pickOne(arr) {\n            if (!arr.length)\n                return null;\n            return arr[Math.floor(Math.random() * arr.length)];\n        }\n        function pickBattleMonsterByArea(area) {\n            const floor = getFloorForArea(area) ?? '';\n            const config = FLOOR_MONSTER_CONFIG[floor];\n            if (!config)\n                return null;\n            const commonPool = config.common;\n            const uniquePool = config.uniqueByArea[area] ?? [];\n            const commonRate = COMMON_MONSTER_RATE_BY_FLOOR[floor] ?? 0.7;\n            let pool = [];\n            if (commonPool.length === 0 && uniquePool.length === 0)\n                return null;\n            if (commonPool.length === 0) {\n                pool = uniquePool;\n            }\n            else if (uniquePool.length === 0) {\n                pool = commonPool;\n            }\n            else {\n                pool = Math.random() < commonRate ? commonPool : uniquePool;\n            }\n            return pickOne(pool);\n        }\n        function pickLordMonsterByArea(area) {\n            const lordName = LORD_MONSTER_BY_AREA[area];\n            if (!lordName)\n                return null;\n            return lordName;\n        }\n        //  Portal visuals \n        const PORTAL_ROOM_TYPES = ['', '', '', '', '', '', ''];\n        const PORTAL_ROOM_WEIGHTS = {\n            '': 50,\n            '': 20,\n            '': 5,\n            '': 10,\n            '': 10,\n            '': 0,\n            '': 5,\n        };\n        const TRAP_POOL_BY_AREA = {\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            // \n            '': ['', '', ''],\n            '': [''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n        };\n        const ALL_TRAPS = Object.values(TRAP_POOL_BY_AREA).flat();\n        const pickTrapByArea = (area) => {\n            const pool = TRAP_POOL_BY_AREA[area] ?? [];\n            if (pool.length > 0)\n                return pickOne(pool);\n            if (ALL_TRAPS.length > 0)\n                return pickOne(ALL_TRAPS);\n            return null;\n        };\n        const getAvailablePortalRoomTypes = (currentArea) => {\n            if (parseMerchantDefeatedValue(gameStore.statData._)) {\n                const withoutShop = PORTAL_ROOM_TYPES.filter((type) => type !== '');\n                if (currentArea === '') {\n                    return withoutShop.filter((type) => type !== '');\n                }\n                return withoutShop;\n            }\n            if (currentArea === '') {\n                return PORTAL_ROOM_TYPES.filter((type) => type !== '');\n            }\n            return [...PORTAL_ROOM_TYPES];\n        };\n        const PORTAL_ROOM_VISUALS = {\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.5)', borderColor: '#991b1b', textColor: '#fca5a5', glowColor: '#dc2626' },\n            '': { icon: '', bgColor: 'rgba(113,63,18,0.5)', borderColor: '#a16207', textColor: '#fde68a', glowColor: '#eab308' },\n            '': { icon: '', bgColor: 'rgba(20,83,45,0.5)', borderColor: '#166534', textColor: '#bbf7d0', glowColor: '#22c55e' },\n            '': { icon: '', bgColor: 'rgba(22,78,99,0.5)', borderColor: '#155e75', textColor: '#a5f3fc', glowColor: '#06b6d4' },\n            '': { icon: '', bgColor: 'rgba(88,28,135,0.5)', borderColor: '#7e22ce', textColor: '#e9d5ff', glowColor: '#a855f7' },\n            '': { icon: '', bgColor: 'rgba(63,63,70,0.5)', borderColor: '#52525b', textColor: '#d4d4d8', glowColor: '#71717a' },\n            '': { icon: '', bgColor: 'rgba(124,45,18,0.5)', borderColor: '#9a3412', textColor: '#fed7aa', glowColor: '#ea580c' },\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.6)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#ef4444' },\n        };\n        const AREA_PORTAL_VISUAL = {\n            icon: '', bgColor: 'rgba(79,70,229,0.5)', borderColor: '#6366f1', textColor: '#c7d2fe', glowColor: '#818cf8',\n        };\n        let cachedPortals = [];\n        let cachedPortalFingerprint = '';\n        function shuffle(arr) {\n            const a = [...arr];\n            for (let i = a.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                [a[i], a[j]] = [a[j], a[i]];\n            }\n            return a;\n        }\n        function rollPortalCount() {\n            const roll = Math.random();\n            // 1/2/3 = 30% / 50% / 20%\n            return roll < 0.3 ? 1 : roll < 0.8 ? 2 : 3;\n        }\n        function pickWeightedRoomTypes(roomTypes, count) {\n            const picked = [];\n            if (roomTypes.length === 0 || count <= 0)\n                return picked;\n            // \n            const weightedPool = roomTypes.map((type) => ({\n                type,\n                weight: Math.max(0, PORTAL_ROOM_WEIGHTS[type] ?? 0),\n            }));\n            const totalWeight = weightedPool.reduce((sum, item) => sum + item.weight, 0);\n            while (picked.length < count) {\n                let selected;\n                if (totalWeight <= 0) {\n                    selected = pickOne(roomTypes) ?? roomTypes[0];\n                }\n                else {\n                    let roll = Math.random() * totalWeight;\n                    selected = weightedPool[weightedPool.length - 1].type;\n                    for (const item of weightedPool) {\n                        roll -= item.weight;\n                        if (roll <= 0) {\n                            selected = item.type;\n                            break;\n                        }\n                    }\n                }\n                picked.push(selected);\n            }\n            return picked;\n        }\n        function generatePortals() {\n            const currentArea = gameStore.statData._ || '';\n            const currentRoomType = gameStore.statData._ || '';\n            const stats = gameStore.statData.$ || {};\n            const roomsPassed = stats. ?? 0;\n            const isStartArea = currentArea === '';\n            const isBossRoom = currentRoomType === '';\n            //  Special:  or   next floor area portals \n            if (isStartArea || isBossRoom) {\n                let targetFloor = null;\n                if (isStartArea) {\n                    targetFloor = '';\n                }\n                else {\n                    const currentFloor = getFloorForArea(currentArea);\n                    if (currentFloor)\n                        targetFloor = getNextFloor(currentFloor);\n                }\n                if (targetFloor && FLOOR_MAP[targetFloor]) {\n                    const candidates = FLOOR_MAP[targetFloor].filter(a => a !== currentArea);\n                    const picked = shuffle(candidates).slice(0, 3);\n                    return picked.map(areaName => ({\n                        label: areaName,\n                        roomType: '',\n                        areaName,\n                        floorName: targetFloor,\n                        isFloorTransition: true,\n                        ...AREA_PORTAL_VISUAL,\n                    }));\n                }\n            }\n            //  Boss room probability: rooms >= 7  (rooms - 6) * 30% \n            if (roomsPassed >= 7) {\n                const bossChance = (roomsPassed - 6) * 0.3;\n                if (Math.random() < bossChance) {\n                    const vis = PORTAL_ROOM_VISUALS[''];\n                    return [{ label: '', roomType: '', isFloorTransition: false, ...vis }];\n                }\n            }\n            //  Normal: 1-3 weighted room portals (30%/50%/20%, with replacement) \n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const count = rollPortalCount();\n            const picked = pickWeightedRoomTypes(availableRoomTypes, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        // //hasLeave \n        const portalChoices = computed(() => {\n            if (!gameStore.hasLeave) {\n                cachedPortals = [];\n                cachedPortalFingerprint = '';\n                return [];\n            }\n            //  +  + \n            const area = gameStore.statData._ || '';\n            const roomType = gameStore.statData._ || '';\n            const rooms = (gameStore.statData.$?. ?? 0);\n            const merchantDefeated = parseMerchantDefeatedValue(gameStore.statData._);\n            const fingerprint = `${area}|${roomType}|${rooms}|${merchantDefeated ? 1 : 0}`;\n            if (fingerprint !== cachedPortalFingerprint) {\n                cachedPortalFingerprint = fingerprint;\n                cachedPortals = generatePortals();\n            }\n            return cachedPortals;\n        });\n        //  Room type  $ field mapping \n        const ROOM_STAT_KEY = {\n            '': '', '': '', '': '',\n            '': '', '': '', '': '', '': '',\n        };\n        const getPathLabelByRoomType = (roomType) => (roomType.endsWith('') ? roomType.slice(0, -1) : roomType);\n        const buildQueuedPortalAction = (portal) => {\n            if (portal.isFloorTransition) {\n                // \n                gameStore.setPendingPortalChanges({\n                    area: portal.areaName,\n                    roomType: '',\n                    resetRoomCounter: true,\n                    resetPath: true,\n                    //  +1 +1 +1\n                    incrementKeys: ['', '', ''],\n                    appendPathLabel: '',\n                    enemyName: '',\n                });\n                console.info(`[Portal] Floor transition queued  area: ${portal.areaName}, first room: `);\n                const enterText = `${portal.areaName}`;\n                return {\n                    enterText,\n                    actionText: `<user>${enterText}`,\n                };\n            }\n            // \n            const incrementKeys = ['', ''];\n            const statKey = ROOM_STAT_KEY[portal.roomType];\n            if (statKey)\n                incrementKeys.push(statKey);\n            const currentArea = gameStore.statData._ || '';\n            const encounterMonster = portal.roomType === ''\n                ? pickLordMonsterByArea(currentArea)\n                : portal.roomType === ''\n                    ? pickBattleMonsterByArea(currentArea)\n                    : null;\n            const trapName = portal.roomType === ''\n                ? pickTrapByArea(currentArea)\n                : null;\n            const trapHpAfterDamage = portal.roomType === ''\n                ? Math.max(1, toNonNegativeInt(gameStore.statData._, 1) - 5)\n                : undefined;\n            let pendingStatDataFields;\n            if (portal.roomType === '') {\n                pendingStatDataFields = {\n                    _: trapName ?? '',\n                    _: trapHpAfterDamage,\n                };\n            }\n            else if (portal.roomType === '') {\n                const maxHp = Math.max(1, displayMaxHp.value);\n                pendingStatDataFields = {\n                    _: maxHp,\n                };\n            }\n            gameStore.setPendingPortalChanges({\n                roomType: portal.roomType,\n                incrementKeys,\n                appendPathLabel: getPathLabelByRoomType(portal.roomType),\n                enemyName: encounterMonster ?? '',\n            });\n            console.info(`[Portal] Room transition queued  type: ${portal.roomType}`);\n            const enterText = (portal.roomType === '' || portal.roomType === '') && encounterMonster\n                ? `${portal.roomType}${encounterMonster}`\n                : portal.roomType === '' && trapName\n                    ? `${portal.roomType}${trapName}`\n                    : `${portal.roomType}`;\n            return {\n                enterText,\n                actionText: `<user>${enterText}`,\n                pendingStatDataFields,\n            };\n        };\n        function generateChestLeavePortals() {\n            const generated = generatePortals();\n            if (generated.length > 0)\n                return generated;\n            const currentArea = gameStore.statData._ || '';\n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const count = rollPortalCount();\n            const picked = pickWeightedRoomTypes(availableRoomTypes, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        const handlePortalClick = async (portal) => {\n            if (gameStore.isGenerating)\n                return;\n            resetShopSession();\n            const { actionText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            gameStore.setPendingStatDataChanges(pendingStatDataFields ?? null);\n            gameStore.sendAction(actionText);\n        };\n        const handleChestPortalClick = async (portal) => {\n            if (gameStore.isGenerating || chestCollecting.value || chestStage.value !== 'opened')\n                return;\n            resetShopSession();\n            const { actionText, enterText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            const collectedRelics = chestRewardRelics.value.filter((_, idx) => chestRewardCollectedFlags.value[idx]);\n            const mergedPendingStatDataFields = {\n                ...(pendingStatDataFields ?? {}),\n            };\n            if (collectedRelics.length > 0) {\n                //  user \n                let nextRelics = gameStore.statData._ ?? {};\n                for (const relic of collectedRelics) {\n                    nextRelics = buildNextRelicInventory(relic, nextRelics);\n                }\n                mergedPendingStatDataFields._ = nextRelics;\n            }\n            gameStore.setPendingStatDataChanges(Object.keys(mergedPendingStatDataFields).length > 0 ? mergedPendingStatDataFields : null);\n            const relicNameText = collectedRelics.map((relic) => relic.name).join('');\n            closeChestView();\n            if (relicNameText) {\n                gameStore.sendAction(`<user>${relicNameText}<user>${enterText}`);\n                return;\n            }\n            gameStore.sendAction(actionText);\n        };\n        const openSaveLoad = () => {\n            gameStore.loadSaveEntries();\n            gameStore.isSaveLoadOpen = !gameStore.isSaveLoadOpen;\n        };\n        const openVariableUpdate = () => {\n            isVariableUpdateOpen.value = !isVariableUpdateOpen.value;\n        };\n        // toggleFullScreen imported from '../fullscreen'\n        //  Combat Test \n        const getSelectedTestRelicCount = (name) => {\n            return Math.max(0, Math.floor(selectedTestRelicCounts.value[name] ?? 0));\n        };\n        const setSelectedTestRelicCount = (name, next) => {\n            const value = Math.max(0, Math.floor(next));\n            if (value <= 0) {\n                delete selectedTestRelicCounts.value[name];\n                return;\n            }\n            selectedTestRelicCounts.value[name] = value;\n        };\n        const increaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) + 1);\n        };\n        const decreaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) - 1);\n        };\n        const buildSelectedRelicPayload = () => {\n            const next = {};\n            for (const relic of baseRelicsForTest.value) {\n                const count = getSelectedTestRelicCount(relic.name);\n                if (count > 0) {\n                    next[relic.name] = count;\n                }\n            }\n            return next;\n        };\n        const openCombatTestBuilder = () => {\n            gameStore.loadStatData();\n            const availableCardNames = new Set(allCardsForTest.value.map(c => c.name));\n            const availableRelicNames = new Set(baseRelicsForTest.value.map((relic) => relic.name));\n            const presetDeck = Array.isArray(gameStore.statData._)\n                ? gameStore.statData._.filter((name) => availableCardNames.has(name)).slice(0, 9)\n                : [];\n            const presetRelicsRaw = gameStore.statData._ ?? {};\n            const presetRelics = {};\n            for (const [name, value] of Object.entries(presetRelicsRaw)) {\n                if (!availableRelicNames.has(name))\n                    continue;\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (count <= 0)\n                    continue;\n                presetRelics[name] = count;\n            }\n            selectedTestDeck.value = [...presetDeck];\n            selectedTestEnemy.value = '';\n            selectedTestRelicCounts.value = presetRelics;\n            selectedCardCategoryTab.value = '';\n            selectedRelicCategoryTab.value = '';\n            combatTestStartAt999.value = false;\n            combatTestStep.value = 'deck';\n            activeModal.value = 'combatTestBuilder';\n        };\n        const addCardToTestDeck = (cardName) => {\n            if (selectedTestDeck.value.length >= 9)\n                return;\n            selectedTestDeck.value.push(cardName);\n        };\n        const removeCardFromTestDeck = (index) => {\n            if (index < 0 || index >= selectedTestDeck.value.length)\n                return;\n            selectedTestDeck.value.splice(index, 1);\n        };\n        const confirmCombatTestDeck = async () => {\n            if (selectedTestDeck.value.length !== 9) {\n                gameStore.error = '9';\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: [...selectedTestDeck.value],\n            });\n            if (!ok)\n                return;\n            if (allEnemyNamesForTest.value.length === 0) {\n                gameStore.error = ' enemyRegistry ';\n                return;\n            }\n            combatTestStep.value = 'enemy';\n        };\n        const confirmCombatTestEnemyAndStart = async () => {\n            if (!selectedTestEnemy.value) {\n                gameStore.error = '';\n                return;\n            }\n            const enemyDef = getEnemyByName(selectedTestEnemy.value);\n            if (!enemyDef) {\n                gameStore.error = `${selectedTestEnemy.value}`;\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: selectedTestEnemy.value,\n                _: buildSelectedRelicPayload(),\n            });\n            if (!ok)\n                return;\n            activeModal.value = null;\n            combatEnemyName.value = selectedTestEnemy.value;\n            activeCombatContext.value = 'combatTest';\n            combatTestStartAt999CurrentBattle.value = combatTestStartAt999.value;\n            showCombat.value = true;\n        };\n        const handleCombatEnd = async (win, finalStats, logs, negativeEffects) => {\n            const context = activeCombatContext.value;\n            const enemyName = combatEnemyName.value || (gameStore.statData._ || '');\n            pendingCombatNarrative.value = {\n                id: `${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n                context,\n                win,\n                enemyName,\n                text: buildCombatNarrative(win, enemyName, context, logs ?? []),\n            };\n            queueCombatMvuSync(win, finalStats, negativeEffects ?? []);\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            combatTestStartAt999CurrentBattle.value = false;\n            activeCombatContext.value = 'normal';\n            if (!win) {\n                closeShopView();\n                const narrative = pendingCombatNarrative.value;\n                pendingCombatNarrative.value = null;\n                if (narrative) {\n                    sendCombatNarrativeOnce(narrative, narrative.text);\n                }\n                console.log('[Combat] Result:', 'LOSE');\n                return;\n            }\n            if (context === 'shopRobbery' && enemyName === '') {\n                const ok = await gameStore.updateStatDataFields({ _: true });\n                if (ok) {\n                    shopRobbing.value = false;\n                    showShopView.value = true;\n                    applyMerchantDefeatedShopState();\n                }\n                else if (pendingCombatNarrative.value) {\n                    pendingCombatNarrative.value.context = 'normal';\n                }\n            }\n            const hasRewardOptions = startVictoryRewardFlow();\n            if (!hasRewardOptions) {\n                finalizeVictoryRewardFlow();\n            }\n            console.log('[Combat] Result:', 'WIN');\n        };\n        onBeforeUnmount(() => {\n            bondPortraitLoaderDisposed = true;\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            clearChestCloseLongPressTimer();\n            clearHotSpringCleanseTimer();\n            clearIdolRollTimer();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Dynamic Background \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_3))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createElementVNode(\"div\", {\n                        class: \"absolute inset-0\",\n                        style: _normalizeStyle({ backgroundColor: `rgba(0,0,0,${_unref(bgOverlayOpacity)})` })\n                    }, null, 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Sidebar: Individual Icons Top-Left (no back button, settings already has exit) \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(SettingsIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'settings',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeModal.value = 'settings'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Scroll),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'deck',\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeModal.value = 'deck'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Box),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'relics',\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeModal.value = 'relics'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Users),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'bonds',\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeModal.value = 'bonds'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(MapIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'map',\n                        onClick: _cache[4] || (_cache[4] = ($event) => (activeModal.value = 'map'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(magicBookSidebarIcon),\n                        label: _unref(canEditMagicBooks) ? '' : '',\n                        \"tooltip-side\": \"right\",\n                        active: _unref(canEditMagicBooks) && _unref(activeModal) === 'magicBooks',\n                        highlight: _unref(canEditMagicBooks),\n                        disabled: !_unref(canEditMagicBooks),\n                        onClick: openMagicBookModal\n                    }, null, 8 /* PROPS */, [\"icon\", \"label\", \"active\", \"highlight\", \"disabled\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(magicHatSidebarIcon),\n                        label: _unref(canEditMagicBooks) ? '' : '',\n                        \"tooltip-side\": \"right\",\n                        active: _unref(canEditMagicBooks) && _unref(activeModal) === 'magicHat',\n                        highlight: _unref(canEditMagicBooks),\n                        disabled: !_unref(canEditMagicBooks),\n                        onClick: openMagicHatModal\n                    }, null, 8 /* PROPS */, [\"icon\", \"label\", \"active\", \"highlight\", \"disabled\"])\n                ]),\n                _createCommentVNode(\" Right sidebar: save/load only (reroll & edit moved into panel) \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Maximize),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        onClick: _unref(toggleFullScreen)\n                    }, null, 8 /* PROPS */, [\"icon\", \"onClick\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(BookOpen),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(gameStore).isSaveLoadOpen,\n                        onClick: openSaveLoad\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(FileText),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(isVariableUpdateOpen),\n                        onClick: openVariableUpdate\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"div\", {\n                        class: \"w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full\",\n                        style: _normalizeStyle({ maxWidth: _unref(textSettings).containerWidth + 'px' })\n                    }, [\n                        _createCommentVNode(\" Story Text Area \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createCommentVNode(\" Decorative Corners \"),\n                            _cache[48] || (_cache[48] = _createElementVNode(\"div\", { class: \"absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _cache[49] || (_cache[49] = _createElementVNode(\"div\", { class: \"absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Loading Indicator \"),\n                            (_unref(gameStore).isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[43] || (_cache[43] = [\n                                        _createStaticVNode(\"<div class=\\\"flex gap-1\\\" data-v-bf3fe73c><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0s;\\\" data-v-bf3fe73c></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.2s;\\\" data-v-bf3fe73c></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.4s;\\\" data-v-bf3fe73c></span></div><span class=\\\"text-dungeon-gold/60 font-ui text-sm\\\" data-v-bf3fe73c>...</span>\", 2)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Edit Mode \"),\n                            (_unref(gameStore).isEditing)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(gameStore).editingText) = $event)),\n                                        class: \"flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, null, 4 /* STYLE */), [\n                                        [_vModelText, _unref(gameStore).editingText]\n                                    ]),\n                                    _createCommentVNode(\" Edit Actions \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(gameStore).cancelEdit()))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]\",\n                                            onClick: _cache[7] || (_cache[7] = ($event) => (_unref(gameStore).saveEdit()))\n                                        }, \"  \")\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" Normal View (not editing) \"),\n                                    _createCommentVNode(\" Story Content \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, [\n                                        _createCommentVNode(\" Streaming text (during generation) \"),\n                                        (_unref(isStreamingEnabled) && _unref(gameStore).isGenerating && _unref(gameStore).streamingText)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString(_unref(gameStore).streamingText), 1 /* TEXT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" Final main text \"),\n                                                _createElementVNode(\"div\", _hoisted_12, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyMainLines), (line) => {\n                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                            key: line.key,\n                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                        }, [\n                                                            (line.segments.length > 0)\n                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                        key: segment.key,\n                                                                        class: _normalizeClass({\n                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                        })\n                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"\"))\n                                                        ], 2 /* CLASS */));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    (_unref(storyTucaoSections).length > 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyTucaoSections), (section, sectionIndex) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: section.key,\n                                                                    class: \"story-tucao-wrap\"\n                                                                }, [\n                                                                    _createElementVNode(\"button\", {\n                                                                        class: \"story-tucao-toggle\",\n                                                                        type: \"button\",\n                                                                        onClick: ($event) => (toggleTucao(section.key))\n                                                                    }, _toDisplayString(isTucaoExpanded(section.key)\n                                                                        ? ` ${sectionIndex + 1}`\n                                                                        : `  ${sectionIndex + 1}`), 9 /* TEXT, PROPS */, _hoisted_15),\n                                                                    _createVNode(_Transition, { name: \"tucao-expand\" }, {\n                                                                        default: _withCtx(() => [\n                                                                            (isTucaoExpanded(section.key))\n                                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(section.lines, (line) => {\n                                                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                                                            key: line.key,\n                                                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                                                        }, [\n                                                                                            (line.segments.length > 0)\n                                                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                                        key: segment.key,\n                                                                                                        class: _normalizeClass({\n                                                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                                                        })\n                                                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \"\"))\n                                                                                        ], 2 /* CLASS */));\n                                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                                ]))\n                                                                                : _createCommentVNode(\"v-if\", true)\n                                                                        ]),\n                                                                        _: 2 /* DYNAMIC */\n                                                                    }, 1024 /* DYNAMIC_SLOTS */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ], 4 /* STYLE */),\n                                    _createCommentVNode(\" Options Section \"),\n                                    (!_unref(gameStore).isGenerating && (_unref(gameStore).options.length > 0 || _unref(gameStore).hasOptionE || _unref(gameStore).hasLeave || _unref(gameStore).hasRebirth))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                            _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2\" }, null, -1 /* CACHED */)),\n                                            _createCommentVNode(\" A-D Normal Options \"),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameStore).options, (option, i) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 'opt-' + i,\n                                                    class: \"w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1\",\n                                                    onClick: ($event) => (handleOptionClick(option))\n                                                }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_19));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createCommentVNode(\" E Option: Special Room Action Button \"),\n                                            (_unref(gameStore).hasOptionE && _unref(specialOptionConfig))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]\",\n                                                    style: _normalizeStyle({\n                                                        backgroundColor: _unref(specialOptionConfig).bgColor,\n                                                        borderColor: _unref(specialOptionConfig).borderColor,\n                                                        color: _unref(specialOptionConfig).textColor,\n                                                        boxShadow: `0 0 20px ${_unref(specialOptionConfig).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`,\n                                                    }),\n                                                    onClick: handleSpecialOption\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_unref(specialOptionConfig).icon), 1 /* TEXT */),\n                                                    _createTextVNode(\" \" + _toDisplayString(_unref(specialOptionConfig).label), 1 /* TEXT */)\n                                                ], 4 /* STYLE */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Leave] Portal System \"),\n                                            (_unref(gameStore).hasLeave && _unref(portalChoices).length > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                                    _cache[44] || (_cache[44] = _createElementVNode(\"div\", { class: \"text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_22, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(portalChoices), (portal, i) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 'portal-' + i,\n                                                                class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95\",\n                                                                style: _normalizeStyle({\n                                                                    backgroundColor: portal.bgColor,\n                                                                    borderColor: portal.borderColor,\n                                                                    boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                                }),\n                                                                onClick: ($event) => (handlePortalClick(portal))\n                                                            }, [\n                                                                _createCommentVNode(\" Portal glow ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                                    style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                                }, null, 4 /* STYLE */),\n                                                                _createCommentVNode(\" Portal icon \"),\n                                                                _createElementVNode(\"span\", _hoisted_24, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                                _createCommentVNode(\" Portal label \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                                    style: _normalizeStyle({ color: portal.textColor })\n                                                                }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                                _createCommentVNode(\" Animated ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                                    style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                                }, null, 4 /* STYLE */)\n                                                            ], 12 /* STYLE, PROPS */, _hoisted_23));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Rebirth] Reset Button \"),\n                                            (_unref(gameStore).hasRebirth)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                                    _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"text-center text-red-300/70 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_26, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"group relative px-7 py-3 rounded-lg border-2 font-heading text-sm tracking-wider transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] bg-red-950/45 border-red-500/60 text-red-100 shadow-[0_0_14px_rgba(239,68,68,0.35)] hover:shadow-[0_0_20px_rgba(248,113,113,0.5)]\",\n                                                            disabled: _unref(gameStore).isGenerating,\n                                                            onClick: handleRebirthClick\n                                                        }, [...(_cache[45] || (_cache[45] = [\n                                                                _createElementVNode(\"span\", { class: \"text-base mr-2\" }, \"\", -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_27)\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(hotSpringCleanseMessage))\n                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                            key: `spring-cleanse-${_unref(hotSpringCleanseMessage).id}`,\n                                            class: \"spring-cleanse-float\"\n                                        }, _toDisplayString(_unref(hotSpringCleanseMessage).text), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" Error Display \"),\n                                    (_unref(gameStore).error)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(_unref(gameStore).error), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Input Area \"),\n                        _createElementVNode(\"div\", _hoisted_29, [\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => (_isRef(inputText) ? (inputText).value = $event : null)),\n                                    type: \"text\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    placeholder: _unref(gameStore).isGenerating ? '...' : '...',\n                                    class: \"w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 pr-14 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    onKeydown: _withKeys(handleSendInput, [\"enter\"])\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_31), [\n                                    [_vModelText, _unref(inputText)]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: handleSendInput\n                                }, [\n                                    _createVNode(_unref(Send), { class: \"size-5\" })\n                                ], 8 /* PROPS */, _hoisted_32)\n                            ])\n                        ])\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Player Status HUD (Bottom Left) - Collapsible \"),\n                _createElementVNode(\"div\", _hoisted_33, [\n                    _createCommentVNode(\" Toggle Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md\",\n                        title: _unref(isStatusOpen) ? '' : '',\n                        onClick: _cache[9] || (_cache[9] = ($event) => (isStatusOpen.value = !_unref(isStatusOpen)))\n                    }, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(isStatusOpen) ? _unref(ChevronDown) : _unref(Activity)), { class: \"size-5\" }))\n                    ], 8 /* PROPS */, _hoisted_34),\n                    _createCommentVNode(\" Expandable Status Panel \"),\n                    _createVNode(_Transition, { name: \"status-slide\" }, {\n                        default: _withCtx(() => [\n                            (_unref(isStatusOpen))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                    _createCommentVNode(\" Decorative Elements \"),\n                                    _cache[59] || (_cache[59] = _createElementVNode(\"div\", { class: \"absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[60] || (_cache[60] = _createElementVNode(\"div\", { class: \"absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[61] || (_cache[61] = _createElementVNode(\"div\", { class: \"absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" HP & MP: Container-fill style \"),\n                                    _createElementVNode(\"div\", _hoisted_36, [\n                                        _createCommentVNode(\" HP Heart Container \"),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-heart\",\n                                                title: `HP: ${_unref(displayHp)}/${_unref(displayMaxHp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_39, [\n                                                    _cache[50] || (_cache[50] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"heartClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"hpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"hpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#8a0e0e\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#cc2222\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#ee4444\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Heart outline (dark) \"),\n                                                    _cache[51] || (_cache[51] = _createElementVNode(\"path\", {\n                                                        d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\",\n                                                        fill: \"#1a0808\",\n                                                        stroke: \"#5c1a1a\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level (clipped to heart) \"),\n                                                    _createElementVNode(\"g\", _hoisted_40, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(hpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(hpPercent) / 100) * 60,\n                                                            fill: \"url(#hpGradient)\",\n                                                            filter: \"url(#hpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_41)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[52] || (_cache[52] = _createElementVNode(\"ellipse\", {\n                                                        cx: \"22\",\n                                                        cy: \"18\",\n                                                        rx: \"5\",\n                                                        ry: \"4\",\n                                                        fill: \"rgba(255,255,255,0.12)\",\n                                                        transform: \"rotate(-20,22,18)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_38),\n                                            _createElementVNode(\"span\", _hoisted_42, [\n                                                _createElementVNode(\"span\", _hoisted_43, _toDisplayString(_unref(displayHp)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_44, \"/\" + _toDisplayString(_unref(displayMaxHp)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\" MP Crystal Container \"),\n                                        _createElementVNode(\"div\", _hoisted_45, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-mana\",\n                                                title: `MP: ${_unref(displayMp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_47, [\n                                                    _cache[53] || (_cache[53] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"manaClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 4 L54 24 L32 60 L10 24 Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"mpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"mpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#1a1a8a\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#3344cc\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#5566ee\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Crystal outline \"),\n                                                    _cache[54] || (_cache[54] = _createElementVNode(\"path\", {\n                                                        d: \"M32 4 L54 24 L32 60 L10 24 Z\",\n                                                        fill: \"#080818\",\n                                                        stroke: \"#1a1a5c\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level \"),\n                                                    _createElementVNode(\"g\", _hoisted_48, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(mpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(mpPercent) / 100) * 60,\n                                                            fill: \"url(#mpGradient)\",\n                                                            filter: \"url(#mpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_49)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[55] || (_cache[55] = _createElementVNode(\"polygon\", {\n                                                        points: \"26,14 32,8 38,14 32,20\",\n                                                        fill: \"rgba(255,255,255,0.1)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_46),\n                                            _createElementVNode(\"span\", _hoisted_50, [\n                                                _createElementVNode(\"span\", _hoisted_51, _toDisplayString(_unref(displayMp)), 1 /* TEXT */)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Divider \"),\n                                    _cache[62] || (_cache[62] = _createElementVNode(\"div\", { class: \"my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" Dice Range Row \"),\n                                    _createElementVNode(\"div\", _hoisted_52, [\n                                        _createElementVNode(\"div\", _hoisted_53, [\n                                            _createVNode(_unref(Dices), { class: \"size-4 text-dungeon-gold-dim drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_54, [\n                                                _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(displayMinDice)), 1 /* TEXT */),\n                                                _cache[56] || (_cache[56] = _createElementVNode(\"span\", { class: \"text-gray-500\" }, \"~\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_56, _toDisplayString(_unref(displayMaxDice)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _cache[57] || (_cache[57] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Dice\", -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\" Gold Row \"),\n                                    _createElementVNode(\"div\", _hoisted_57, [\n                                        _createElementVNode(\"div\", _hoisted_58, [\n                                            _createVNode(_unref(Coins), { class: \"size-4 drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_59, _toDisplayString(_unref(displayGold)), 1 /* TEXT */)\n                                        ]),\n                                        _cache[58] || (_cache[58] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Gold\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\" Modals \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'map',\n                    \"panel-class\": \"max-w-5xl\",\n                    onClose: _cache[10] || (_cache[10] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_60, [\n                            _createElementVNode(\"div\", _hoisted_61, [\n                                _createElementVNode(\"div\", _hoisted_62, [\n                                    _cache[63] || (_cache[63] = _createTextVNode(\" \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_63, _toDisplayString(_unref(currentFloorPath).length), 1 /* TEXT */),\n                                    _cache[64] || (_cache[64] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[65] || (_cache[65] = _createElementVNode(\"span\", { class: \"map-summary-divider\" }, \"|\", -1 /* CACHED */)),\n                                    _cache[66] || (_cache[66] = _createTextVNode(\" \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_64, _toDisplayString(_unref(currentLayerRoomCount)), 1 /* TEXT */),\n                                    _cache[67] || (_cache[67] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", { class: \"map-controls\" }, [\n                                    _createElementVNode(\"button\", {\n                                        type: \"button\",\n                                        class: \"map-control-btn\",\n                                        onClick: handleMapZoomOut\n                                    }, \"-\"),\n                                    _createElementVNode(\"button\", {\n                                        type: \"button\",\n                                        class: \"map-control-btn\",\n                                        onClick: handleMapZoomIn\n                                    }, \"+\"),\n                                    _createElementVNode(\"button\", {\n                                        type: \"button\",\n                                        class: \"map-control-btn map-control-btn--wide\",\n                                        onClick: handleMapResetView\n                                    }, \"\")\n                                ])\n                            ]),\n                            (_unref(currentFloorPath).length === 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_65, \"  \"))\n                                : (_openBlock(), _createElementBlock(\"div\", {\n                                    key: 1,\n                                    ref_key: \"mapViewportRef\",\n                                    ref: mapViewportRef,\n                                    class: \"map-viewport\",\n                                    onWheel: _withModifiers(handleMapWheel, [\"prevent\"]),\n                                    onPointerdown: handleMapPointerDown,\n                                    onPointermove: handleMapPointerMove,\n                                    onPointerup: handleMapPointerUp,\n                                    onPointercancel: handleMapPointerUp\n                                }, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"map-canvas\",\n                                        style: _normalizeStyle(_unref(mapCanvasStyle))\n                                    }, [\n                                        (_openBlock(), _createElementBlock(\"svg\", {\n                                            class: \"map-links\",\n                                            width: _unref(mapContentWidth),\n                                            height: _unref(mapContentHeight),\n                                            viewBox: `0 0 ${_unref(mapContentWidth)} ${_unref(mapContentHeight)}`\n                                        }, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(mapPathLines), (line) => {\n                                                return (_openBlock(), _createElementBlock(\"line\", {\n                                                    key: line.key,\n                                                    x1: line.x1,\n                                                    y1: line.y1,\n                                                    x2: line.x2,\n                                                    y2: line.y2,\n                                                    stroke: \"rgba(0,0,0,0.9)\",\n                                                    \"stroke-width\": \"4\",\n                                                    \"stroke-linecap\": \"round\"\n                                                }, null, 8 /* PROPS */, _hoisted_67));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ], 8 /* PROPS */, _hoisted_66)),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(mapPathNodes), (node) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: `path-node-${node.index}`,\n                                                class: \"map-room-cell\",\n                                                style: _normalizeStyle(node.style)\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_68, _toDisplayString(node.icon), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_69, _toDisplayString(node.index + 1), 1 /* TEXT */)\n                                            ], 4 /* STYLE */));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 4 /* STYLE */)\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'bonds',\n                    \"panel-class\": \"max-w-4xl\",\n                    onClose: _cache[11] || (_cache[11] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(bondEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_70, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(bondEntries), (entry) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: `bond-${entry.name}`,\n                                        class: \"bond-row\"\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            type: \"button\",\n                                            class: \"bond-portrait-frame bond-portrait-frame--clickable\",\n                                            onClick: ($event) => (openBondPortraitPreview(entry))\n                                        }, [\n                                            (!_unref(bondPortraitErrors)[entry.name])\n                                                ? (_openBlock(), _createElementBlock(\"img\", {\n                                                    key: 0,\n                                                    src: entry.portraitUrl,\n                                                    alt: `${entry.name} `,\n                                                    class: \"bond-portrait-image\",\n                                                    loading: \"lazy\",\n                                                    onError: ($event) => (handleBondPortraitError(entry.name))\n                                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_72))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_73, _toDisplayString(entry.name.slice(0, 1)), 1 /* TEXT */))\n                                        ], 8 /* PROPS */, _hoisted_71),\n                                        _createElementVNode(\"div\", _hoisted_74, [\n                                            _createElementVNode(\"div\", _hoisted_75, [\n                                                _createElementVNode(\"span\", _hoisted_76, _toDisplayString(entry.name), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", {\n                                                    class: _normalizeClass([\"bond-affection-value\", entry.affection >= 0 ? 'bond-affection-value--positive' : 'bond-affection-value--negative'])\n                                                }, _toDisplayString(formatBondAffection(entry.affection)) + \" / 1000\", 3 /* TEXT, CLASS */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_77, [\n                                                _createElementVNode(\"div\", {\n                                                    class: _normalizeClass([\"bond-affection-fill\", entry.affection >= 0 ? 'bond-affection-fill--positive' : 'bond-affection-fill--negative']),\n                                                    style: _normalizeStyle({ width: `${Math.round(entry.affectionAbsRatio * 100)}%` })\n                                                }, null, 6 /* CLASS, STYLE */)\n                                            ])\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_78, [\n                                _createVNode(_unref(Users), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[68] || (_cache[68] = _createElementVNode(\"span\", { class: \"font-ui text-sm text-dungeon-paper/50\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(bondPortraitPreview))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"fixed inset-0 z-[230] flex items-center justify-center bg-black/85 p-6 backdrop-blur-sm\",\n                                onClick: closeBondPortraitPreview\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"bond-preview-panel\",\n                                    onClick: _cache[12] || (_cache[12] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createElementVNode(\"img\", {\n                                        src: _unref(bondPortraitPreview).url,\n                                        alt: `${_unref(bondPortraitPreview).name} `,\n                                        class: \"bond-preview-image\"\n                                    }, null, 8 /* PROPS */, _hoisted_79),\n                                    _createElementVNode(\"div\", _hoisted_80, [\n                                        _createElementVNode(\"span\", _hoisted_81, _toDisplayString(_unref(bondPortraitPreview).name), 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            type: \"button\",\n                                            class: \"bond-preview-close-btn\",\n                                            onClick: closeBondPortraitPreview\n                                        }, \"\")\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'deck',\n                    onClose: _cache[13] || (_cache[13] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(resolvedDeck).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_82, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedDeck), (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"hover:scale-105 transition-transform flex justify-center\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_83, [\n                                _createVNode(_unref(Scroll), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[69] || (_cache[69] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"  \", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'magicBooks',\n                    \"panel-class\": \"max-w-[92rem] max-h-[94%]\",\n                    onClose: _cache[17] || (_cache[17] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_84, [\n                            _createElementVNode(\"div\", _hoisted_85, [\n                                _createElementVNode(\"button\", {\n                                    type: \"button\",\n                                    class: _normalizeClass([\"px-4 py-1.5 rounded border text-xs font-ui transition-colors\", _unref(magicBooksNavTab) === 'books'\n                                            ? 'border-dungeon-gold/70 text-dungeon-gold bg-dungeon-gold/10'\n                                            : 'border-dungeon-brown/60 text-dungeon-paper/70 hover:border-dungeon-gold/50']),\n                                    onClick: _cache[14] || (_cache[14] = ($event) => (magicBooksNavTab.value = 'books'))\n                                }, \"  \", 2 /* CLASS */),\n                                _createElementVNode(\"button\", {\n                                    type: \"button\",\n                                    class: _normalizeClass([\"px-4 py-1.5 rounded border text-xs font-ui transition-colors\", _unref(magicBooksNavTab) === 'active'\n                                            ? 'border-dungeon-gold/70 text-dungeon-gold bg-dungeon-gold/10'\n                                            : 'border-dungeon-brown/60 text-dungeon-paper/70 hover:border-dungeon-gold/50']),\n                                    onClick: _cache[15] || (_cache[15] = ($event) => (magicBooksNavTab.value = 'active'))\n                                }, \"  \", 2 /* CLASS */)\n                            ]),\n                            (_unref(magicBooksNavTab) === 'books')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    (_unref(carryableMagicBookNames).length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_86, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(carryableMagicBookNames), (bookName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `magic-book-${bookName}`,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"relative rounded-lg border p-3 text-left transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[#130c08]/80\", _unref(carriedMagicBookSet).has(bookName)\n                                                            ? 'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.45)] ring-1 ring-dungeon-gold/70'\n                                                            : 'border-dungeon-brown/70 hover:border-dungeon-gold/45']),\n                                                    disabled: _unref(isUpdatingMagicBooks),\n                                                    onClick: ($event) => (toggleMagicBook(bookName))\n                                                }, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: _normalizeClass([\"relative w-full overflow-hidden rounded-md border\", _unref(carriedMagicBookSet).has(bookName) ? 'border-dungeon-gold/60' : 'border-dungeon-brown/60'])\n                                                    }, [\n                                                        _createElementVNode(\"img\", {\n                                                            src: getMagicBookCoverUrl(bookName),\n                                                            alt: `${bookName} `,\n                                                            class: _normalizeClass([\"w-full [aspect-ratio:832/1216] object-cover transition-all duration-300\", _unref(carriedMagicBookSet).has(bookName)\n                                                                    ? 'brightness-100 saturate-110'\n                                                                    : 'brightness-50 saturate-60']),\n                                                            loading: \"lazy\"\n                                                        }, null, 10 /* CLASS, PROPS */, _hoisted_88),\n                                                        _cache[70] || (_cache[70] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-black/55 via-black/10 to-black/38\" }, null, -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_89, [\n                                                            _createElementVNode(\"div\", _hoisted_90, _toDisplayString(bookName) + \"\", 1 /* TEXT */)\n                                                        ])\n                                                    ], 2 /* CLASS */)\n                                                ], 10 /* CLASS, PROPS */, _hoisted_87));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_91, \"  \"))\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createElementVNode(\"div\", _hoisted_92, [\n                                        _createElementVNode(\"div\", _hoisted_93, [\n                                            _createElementVNode(\"div\", _hoisted_94, \"\" + _toDisplayString(_unref(selectedStartingActiveSlot) + 1), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_95, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(startingActiveSkillEntries), (entry) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `starting-active-slot-${entry.idx}`,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"relative w-[180px] h-[250px] rounded-xl border-2 overflow-hidden shadow-lg text-left transition-all\", _unref(selectedStartingActiveSlot) === entry.idx\n                                                            ? 'border-dungeon-gold/75 shadow-[0_0_20px_rgba(212,175,55,0.35)]'\n                                                            : 'border-dungeon-brown/60 hover:border-dungeon-gold/45']),\n                                                    disabled: _unref(isUpdatingStartingActiveSkills),\n                                                    onClick: ($event) => (selectedStartingActiveSlot.value = entry.idx)\n                                                }, [\n                                                    _cache[73] || (_cache[73] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_30%_15%,rgba(250,248,255,0.16),rgba(18,14,24,0.96)_64%)]\" }, null, -1 /* CACHED */)),\n                                                    (entry.skill)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_97, [\n                                                            _createElementVNode(\"div\", _hoisted_98, _toDisplayString(entry.skill.manaCost), 1 /* TEXT */),\n                                                            _cache[71] || (_cache[71] = _createElementVNode(\"div\", { class: \"bg-black/60 p-1 rounded-full border border-white/10 text-[10px] text-zinc-100 leading-none\" }, \"\", -1 /* CACHED */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createElementVNode(\"div\", _hoisted_99, [\n                                                        _cache[72] || (_cache[72] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[linear-gradient(135deg,rgba(245,245,245,0.36),rgba(145,145,168,0.09)_58%,rgba(11,9,16,0.84))]\" }, null, -1 /* CACHED */)),\n                                                        _createElementVNode(\"span\", _hoisted_100, _toDisplayString(entry.skill?.name?.[0] ?? ''), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_101, [\n                                                        _createElementVNode(\"div\", _hoisted_102, _toDisplayString(entry.skill?.name ?? ` ${entry.idx + 1}`), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_103, _toDisplayString(entry.skill?.description ?? ''), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_104, _toDisplayString(_unref(selectedStartingActiveSlot) === entry.idx ? '' : ` ${entry.idx + 1}`), 1 /* TEXT */)\n                                                    ])\n                                                ], 10 /* CLASS, PROPS */, _hoisted_96));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_105, [\n                                            _createElementVNode(\"button\", {\n                                                type: \"button\",\n                                                class: \"px-3 py-1 rounded border border-dungeon-brown/60 text-xs text-dungeon-paper/70 hover:border-dungeon-gold/45 disabled:opacity-50\",\n                                                disabled: _unref(isUpdatingStartingActiveSkills),\n                                                onClick: _cache[16] || (_cache[16] = ($event) => (clearStartingActiveSkill(_unref(selectedStartingActiveSlot))))\n                                            }, \"  \", 8 /* PROPS */, _hoisted_106)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_107, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(startingActiveSkillOptions), (skill) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: `starting-active-skill-${skill.id}`,\n                                                type: \"button\",\n                                                class: _normalizeClass([\"relative w-[180px] h-[250px] rounded-xl border-2 shadow-xl overflow-hidden transition-all disabled:opacity-50 disabled:cursor-not-allowed\", isSkillEquippedInStartingActive(skill.name)\n                                                        ? 'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.38)]'\n                                                        : 'border-dungeon-brown/60 hover:border-dungeon-gold/50']),\n                                                disabled: _unref(isUpdatingStartingActiveSkills),\n                                                onClick: ($event) => (setStartingActiveSkill(skill))\n                                            }, [\n                                                _cache[76] || (_cache[76] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_30%_15%,rgba(250,248,255,0.18),rgba(18,14,24,0.96)_64%)]\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_109, [\n                                                    _createElementVNode(\"div\", _hoisted_110, _toDisplayString(skill.manaCost), 1 /* TEXT */),\n                                                    _cache[74] || (_cache[74] = _createElementVNode(\"div\", { class: \"bg-black/60 p-1 rounded-full border border-white/10 text-[10px] text-zinc-100 leading-none\" }, \"\", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_111, [\n                                                    _cache[75] || (_cache[75] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[linear-gradient(135deg,rgba(245,245,245,0.36),rgba(145,145,168,0.09)_58%,rgba(11,9,16,0.84))]\" }, null, -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_112, _toDisplayString(skill.name[0]), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_113, [\n                                                    _createElementVNode(\"div\", _hoisted_114, _toDisplayString(skill.name), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_115, _toDisplayString(skill.description), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_116, [\n                                                        _createElementVNode(\"span\", null, \"CD \" + _toDisplayString(skill.Cooldown), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: _normalizeClass(isSkillEquippedInStartingActive(skill.name) ? 'text-dungeon-gold' : 'text-white/55')\n                                                        }, _toDisplayString(isSkillEquippedInStartingActive(skill.name) ? '' : ''), 3 /* TEXT, CLASS */)\n                                                    ])\n                                                ])\n                                            ], 10 /* CLASS, PROPS */, _hoisted_108));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'magicHat',\n                    \"panel-class\": \"max-w-3xl\",\n                    onClose: _cache[18] || (_cache[18] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_117, [\n                            _createElementVNode(\"div\", _hoisted_118, [\n                                _cache[77] || (_cache[77] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/75 text-sm\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_119, _toDisplayString(_unref(magicHatSkillPoints)), 1 /* TEXT */)\n                            ]),\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(magicHatTracks), (track) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: `magic-hat-${track.id}`,\n                                    class: \"rounded border border-dungeon-brown/60 bg-[#160d08]/65 p-4\"\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_120, [\n                                        _createElementVNode(\"div\", null, [\n                                            _createElementVNode(\"div\", _hoisted_121, _toDisplayString(track.label), 1 /* TEXT */),\n                                            _createElementVNode(\"div\", _hoisted_122, \"  \" + _toDisplayString(track.currentValue) + \"   \" + _toDisplayString(track.currentLevel) + \"/\" + _toDisplayString(track.maxLevel), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            type: \"button\",\n                                            class: _normalizeClass([\"px-3 py-1.5 rounded border text-xs font-ui transition-colors disabled:opacity-50 disabled:cursor-not-allowed\", track.isMax\n                                                    ? 'border-dungeon-brown/60 text-dungeon-paper/45'\n                                                    : 'border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10']),\n                                            disabled: _unref(isUpgradingMagicHat) || track.isMax,\n                                            onClick: ($event) => (upgradeMagicHatStat(track.id))\n                                        }, _toDisplayString(track.isMax ? '' : `-${track.nextCost} `), 11 /* TEXT, CLASS, PROPS */, _hoisted_123)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_124, [\n                                        _createElementVNode(\"div\", {\n                                            class: _normalizeClass([\"h-full transition-all duration-300\", track.barClass]),\n                                            style: _normalizeStyle({ width: `${track.progressPercent}%` })\n                                        }, null, 6 /* CLASS, STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_125, _toDisplayString(track.isMax ? '' : ` ${track.nextValue}`), 1 /* TEXT */)\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'relics',\n                    onClose: _cache[19] || (_cache[19] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(relicEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_126, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicEntries), (relic) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: relic.name,\n                                        type: \"button\",\n                                        class: \"relative flex flex-col items-center p-1.5 rounded border border-dungeon-brown/30 bg-[#1a0f08]/35 hover:border-dungeon-gold/40 transition-colors focus:outline-none focus:border-dungeon-gold/60\",\n                                        onMouseenter: ($event) => (showRelicTooltip($event, relic)),\n                                        onMouseleave: hideRelicTooltip,\n                                        onFocus: ($event) => (showRelicTooltip($event, relic)),\n                                        onBlur: hideRelicTooltip,\n                                        onTouchstartPassive: ($event) => (handleRelicTouchStart($event, relic)),\n                                        onTouchend: handleRelicTouchEnd,\n                                        onTouchcancel: handleRelicTouchEnd\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_128, [\n                                            _createVNode(_unref(Box), { class: \"size-9 text-dungeon-gold/75\" }),\n                                            _createElementVNode(\"span\", _hoisted_129, \"x\" + _toDisplayString(relic.count), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_130, _toDisplayString(relic.name), 1 /* TEXT */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_127));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_131, [\n                                _createVNode(_unref(Box), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[78] || (_cache[78] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                (_unref(relicTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed z-[220] pointer-events-none relic-tooltip\",\n                        style: _normalizeStyle({ left: `${_unref(relicTooltip).x}px`, top: `${_unref(relicTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_132, _toDisplayString(_unref(relicTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_133, _toDisplayString(_unref(relicTooltip).description), 1 /* TEXT */)\n                    ], 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Settings Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'settings',\n                    onClose: _cache[32] || (_cache[32] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_134, [\n                            _createCommentVNode(\" Text Display Settings Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[88] || (_cache[88] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_135, [\n                                    _createCommentVNode(\" Font Size \"),\n                                    _createElementVNode(\"div\", _hoisted_136, [\n                                        _cache[79] || (_cache[79] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_137, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[20] || (_cache[20] = ($event) => (_unref(textSettings).fontSize = Math.max(12, _unref(textSettings).fontSize - 1)))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_138, _toDisplayString(_unref(textSettings).fontSize) + \"px\", 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[21] || (_cache[21] = ($event) => (_unref(textSettings).fontSize = Math.min(28, _unref(textSettings).fontSize + 1)))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Line Height \"),\n                                    _createElementVNode(\"div\", _hoisted_139, [\n                                        _cache[80] || (_cache[80] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_140, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[22] || (_cache[22] = ($event) => (_unref(textSettings).lineHeight = Math.max(1.2, +(_unref(textSettings).lineHeight - 0.1).toFixed(1))))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_141, _toDisplayString(_unref(textSettings).lineHeight), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[23] || (_cache[23] = ($event) => (_unref(textSettings).lineHeight = Math.min(3.0, +(_unref(textSettings).lineHeight + 0.1).toFixed(1))))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Font Family \"),\n                                    _createElementVNode(\"div\", _hoisted_142, [\n                                        _cache[82] || (_cache[82] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((_unref(textSettings).fontFamily) = $event)),\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui\"\n                                        }, [...(_cache[81] || (_cache[81] = [\n                                                _createElementVNode(\"option\", { value: \"'Cinzel', serif\" }, \"Cinzel ()\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Inter', sans-serif\" }, \"Inter\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MedievalSharp', cursive\" }, \"MedievalSharp\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MaShanZheng', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MagicBookTitle', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"serif\" }, \"Serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"sans-serif\" }, \"Sans-serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Microsoft YaHei', sans-serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'SimSun', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'KaiTi', serif\" }, \"\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(textSettings).fontFamily]\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Container Width \"),\n                                    _createElementVNode(\"div\", _hoisted_143, [\n                                        _cache[83] || (_cache[83] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_144, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event) => ((_unref(textSettings).containerWidth) = $event)),\n                                                type: \"range\",\n                                                min: \"600\",\n                                                max: \"1600\",\n                                                step: \"50\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(textSettings).containerWidth,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_145, _toDisplayString(_unref(textSettings).containerWidth) + \"px\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Background Clarity \"),\n                                    _createElementVNode(\"div\", _hoisted_146, [\n                                        _cache[84] || (_cache[84] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_147, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => (_isRef(bgOverlayOpacity) ? (bgOverlayOpacity).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"0.8\",\n                                                step: \"0.05\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgOverlayOpacity),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_148, _toDisplayString(Math.round((1 - _unref(bgOverlayOpacity)) * 100)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_149, [\n                                        _cache[85] || (_cache[85] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => (_isRef(selectedBgmTrackId) ? (selectedBgmTrackId).value = $event : null)),\n                                            disabled: _unref(bgmTracks).length === 0,\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui disabled:opacity-50 disabled:cursor-not-allowed\"\n                                        }, [\n                                            (_unref(bgmTracks).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"option\", _hoisted_151, \"\"))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(bgmTracks), (track) => {\n                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                    key: track.id,\n                                                    value: track.id\n                                                }, _toDisplayString(track.name), 9 /* TEXT, PROPS */, _hoisted_152));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ], 8 /* PROPS */, _hoisted_150), [\n                                            [_vModelSelect, _unref(selectedBgmTrackId)]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_153, [\n                                        _cache[86] || (_cache[86] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_154, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => (_isRef(bgmVolumePercent) ? (bgmVolumePercent).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"100\",\n                                                step: \"1\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgmVolumePercent),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_155, _toDisplayString(_unref(bgmVolumePercent)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_156, [\n                                        _cache[87] || (_cache[87] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"label\", _hoisted_157, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event) => (_isRef(isStreamingEnabled) ? (isStreamingEnabled).value = $event : null)),\n                                                type: \"checkbox\",\n                                                class: \"h-4 w-4 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelCheckbox, _unref(isStreamingEnabled)]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_158, _toDisplayString(_unref(isStreamingEnabled) ? '' : ''), 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _cache[90] || (_cache[90] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-dungeon-gold/20\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" System Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[89] || (_cache[89] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_159, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded\",\n                                        onClick: _cache[30] || (_cache[30] =\n                                            //@ts-ignore\n                                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded\",\n                                        onClick: _cache[31] || (_cache[31] = ($event) => (_ctx.$emit('backToSplash')))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2\",\n                                        onClick: openCombatTestBuilder\n                                    }, \"   \")\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Test Builder Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'combatTestBuilder',\n                    onClose: _cache[36] || (_cache[36] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_160, [\n                            (_unref(combatTestStep) === 'deck')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_161, [\n                                        _cache[91] || (_cache[91] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"19\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_162, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_163, [\n                                        _createElementVNode(\"div\", _hoisted_164, [\n                                            _cache[92] || (_cache[92] = _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_165, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_166, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(selectedTestDeckCards), (entry) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `selected-card-${entry.idx}`,\n                                                    class: \"w-full text-left flex items-stretch gap-2 rounded border border-dungeon-gold/20 bg-[#1a0f08]/70 px-2 py-2 hover:border-dungeon-gold/50 transition-colors\",\n                                                    onClick: ($event) => (removeCardFromTestDeck(entry.idx))\n                                                }, [\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"w-1.5 rounded\", getCardCategoryStripClass(entry.card.category)])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createElementVNode(\"div\", _hoisted_168, [\n                                                        _createElementVNode(\"div\", _hoisted_169, [\n                                                            _createElementVNode(\"span\", _hoisted_170, _toDisplayString(entry.card.name), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: _normalizeClass([\"text-[10px] px-1 rounded border\", getCardTypeBadgeClass(entry.card.type)])\n                                                            }, _toDisplayString(entry.card.type), 3 /* TEXT, CLASS */),\n                                                            _createElementVNode(\"span\", _hoisted_171, _toDisplayString(entry.card.category), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"mt-1 text-[10px] text-dungeon-paper/70 truncate\",\n                                                            title: entry.card.description\n                                                        }, _toDisplayString(entry.card.description), 9 /* TEXT, PROPS */, _hoisted_172)\n                                                    ]),\n                                                    _cache[93] || (_cache[93] = _createElementVNode(\"span\", { class: \"text-[10px] text-red-300/85 shrink-0 self-center\" }, \"\", -1 /* CACHED */))\n                                                ], 8 /* PROPS */, _hoisted_167));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(selectedTestDeckCards).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_173, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_174, [\n                                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(9, (idx) => {\n                                                return _createElementVNode(\"div\", {\n                                                    key: `deck-slot-${idx}`,\n                                                    class: _normalizeClass([\"h-2 rounded border\", idx <= _unref(selectedTestDeck).length\n                                                            ? 'bg-dungeon-gold/70 border-dungeon-gold/60'\n                                                            : 'bg-black/20 border-dungeon-brown/40'])\n                                                }, null, 2 /* CLASS */);\n                                            }), 64 /* STABLE_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_175, [\n                                        _createElementVNode(\"div\", _hoisted_176, [\n                                            _createElementVNode(\"div\", _hoisted_177, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(cardCategoryTabsForTest), (category) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `card-tab-${category}`,\n                                                        class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedCardCategoryTab) === category\n                                                                ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                        onClick: ($event) => (selectedCardCategoryTab.value = category)\n                                                    }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_178));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredCardCategoryGroupsForTest), (group) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: `card-category-${group.category}`,\n                                                    class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_179, [\n                                                        _createElementVNode(\"h4\", _hoisted_180, _toDisplayString(group.category), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_181, _toDisplayString(group.cards.length) + \" \", 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_182, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.cards, (card) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `all-card-${group.category}-${card.id}`,\n                                                                class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(selectedTestDeck).length >= 9,\n                                                                onClick: ($event) => (addCardToTestDeck(card.name))\n                                                            }, [\n                                                                _createVNode(DungeonCard, {\n                                                                    card: card,\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]),\n                                                                _cache[94] || (_cache[94] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-dungeon-gold/80\" }, \"\", -1 /* CACHED */))\n                                                            ], 8 /* PROPS */, _hoisted_183));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(filteredCardCategoryGroupsForTest).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_184, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_185, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[33] || (_cache[33] = ($event) => (activeModal.value = null))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: _unref(selectedTestDeck).length !== 9,\n                                            onClick: confirmCombatTestDeck\n                                        }, \"  \", 8 /* PROPS */, _hoisted_186)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createElementVNode(\"div\", _hoisted_187, [\n                                        _cache[95] || (_cache[95] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"2\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_188, \": 9: \" + _toDisplayString(_unref(selectedRelicTotalCount)) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_189, [\n                                        _createElementVNode(\"div\", _hoisted_190, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allEnemyNamesForTest), (enemyName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `enemy-${enemyName}`,\n                                                    class: _normalizeClass([\"text-left px-3 py-2 rounded border text-xs transition-colors\", _unref(selectedTestEnemy) === enemyName\n                                                            ? 'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold'\n                                                            : 'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),\n                                                    onClick: ($event) => (selectedTestEnemy.value = enemyName)\n                                                }, _toDisplayString(enemyName), 11 /* TEXT, CLASS, PROPS */, _hoisted_191));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_192, [\n                                        _cache[96] || (_cache[96] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center justify-between\" }, [\n                                            _createElementVNode(\"h4\", { class: \"font-heading text-dungeon-gold text-xs tracking-wider uppercase\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/60\" }, \" MVU `_`\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_193, [\n                                            _createElementVNode(\"div\", _hoisted_194, [\n                                                _createElementVNode(\"div\", _hoisted_195, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicCategoryTabsForTest), (category) => {\n                                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: `relic-tab-${category}`,\n                                                            class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedRelicCategoryTab) === category\n                                                                    ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                    : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                            onClick: ($event) => (selectedRelicCategoryTab.value = category)\n                                                        }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_196));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredRelicCategoryGroupsForTest), (group) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: `relic-category-${group.category}`,\n                                                        class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_197, [\n                                                            _createElementVNode(\"h5\", _hoisted_198, _toDisplayString(group.category), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_199, _toDisplayString(group.relics.length) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_200, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.relics, (relic) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: `test-relic-${group.category}-${relic.id}`,\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#1a0f08]/70 p-2\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_201, [\n                                                                        _createElementVNode(\"div\", _hoisted_202, [\n                                                                            _createElementVNode(\"div\", _hoisted_203, _toDisplayString(relic.name), 1 /* TEXT */),\n                                                                            _createElementVNode(\"div\", _hoisted_204, _toDisplayString(relic.rarity), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_205, [\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold\",\n                                                                                onClick: ($event) => (decreaseSelectedRelic(relic.name))\n                                                                            }, \" - \", 8 /* PROPS */, _hoisted_206),\n                                                                            _createElementVNode(\"span\", _hoisted_207, _toDisplayString(getSelectedTestRelicCount(relic.name)), 1 /* TEXT */),\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown\",\n                                                                                onClick: ($event) => (increaseSelectedRelic(relic.name))\n                                                                            }, \" + \", 8 /* PROPS */, _hoisted_208)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_209, _toDisplayString(relic.effect), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (_unref(filteredRelicCategoryGroupsForTest).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_210, \"  \"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"label\", _hoisted_211, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => (_isRef(combatTestStartAt999) ? (combatTestStartAt999).value = $event : null)),\n                                            type: \"checkbox\",\n                                            class: \"accent-amber-500\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelCheckbox, _unref(combatTestStartAt999)]\n                                        ]),\n                                        _cache[97] || (_cache[97] = _createElementVNode(\"span\", null, \" 999  HP/MP=999\", -1 /* CACHED */))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_212, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[35] || (_cache[35] = ($event) => (combatTestStep.value = 'deck'))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: !_unref(selectedTestEnemy),\n                                            onClick: confirmCombatTestEnemyAndStart\n                                        }, \"  \", 8 /* PROPS */, _hoisted_213)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Save/Load Panel \"),\n                _createVNode(SaveLoadPanel, {\n                    \"is-open\": _unref(gameStore).isSaveLoadOpen,\n                    entries: _unref(gameStore).saveEntries,\n                    onClose: _cache[37] || (_cache[37] = ($event) => (_unref(gameStore).isSaveLoadOpen = false))\n                }, null, 8 /* PROPS */, [\"is-open\", \"entries\"]),\n                _createCommentVNode(\" Variable Update Viewer \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(isVariableUpdateOpen),\n                    onClose: _cache[38] || (_cache[38] = ($event) => (isVariableUpdateOpen.value = false))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(gameStore).variableUpdateText)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_214, [\n                                _createElementVNode(\"pre\", _hoisted_215, _toDisplayString(_unref(gameStore).variableUpdateText), 1 /* TEXT */)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_216, \" <UpdateVariable>  <update> \"))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Shop Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showShopView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_217, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(shopBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_218),\n                                _cache[99] || (_cache[99] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/22\" }, null, -1 /* CACHED */)),\n                                (!_unref(isMerchantDefeated))\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 0,\n                                        src: _unref(shopMerchantPortraitUrl),\n                                        class: \"pointer-events-none absolute left-0 bottom-0 z-[99] h-[92vh] max-h-[1216px] w-auto object-contain\",\n                                        alt: \"\"\n                                    }, null, 8 /* PROPS */, _hoisted_219))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"div\", _hoisted_220, [\n                                    _createElementVNode(\"div\", _hoisted_221, [\n                                        _cache[98] || (_cache[98] = _createElementVNode(\"div\", { class: \"shop-panel-head\" }, [\n                                            _createElementVNode(\"div\", { class: \"font-heading text-xl text-amber-100\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_222, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(shopProducts), (item) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: item.key,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"shop-item-card\", { 'is-sold': item.sold }]),\n                                                    disabled: item.sold || _unref(shopBuying),\n                                                    onClick: ($event) => (buyShopProduct(item)),\n                                                    onMouseenter: ($event) => (showShopProductTooltip($event, item)),\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: ($event) => (showShopProductTooltip($event, item)),\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: ($event) => (handleShopProductTouchStart($event, item)),\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_224, [\n                                                        _createVNode(_unref(Box), { class: \"shop-item-icon\" })\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_225, [\n                                                        _createVNode(_unref(Coins), { class: \"size-3.5\" }),\n                                                        _createElementVNode(\"span\", null, _toDisplayString(item.finalPrice), 1 /* TEXT */)\n                                                    ])\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_223));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(shopProducts).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_226, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_227, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-rob-btn px-5 py-2 font-ui text-xs tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing) || _unref(isMerchantDefeated),\n                                                style: _normalizeStyle({ opacity: _unref(shopRobBtnOpacity) }),\n                                                onClick: handleShopRobClick\n                                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_228),\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-exit-btn px-7 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing),\n                                                onClick: exitShop\n                                            }, \"  \", 8 /* PROPS */, _hoisted_229)\n                                        ])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Treasure Chest Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showChestView))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"absolute inset-0 z-[95] bg-black\",\n                                onContextmenu: _withModifiers(handleChestContextMenu, [\"prevent\"]),\n                                onTouchstartPassive: handleChestTouchStart,\n                                onTouchend: handleChestTouchEnd,\n                                onTouchcancel: handleChestTouchEnd\n                            }, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(chestBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\",\n                                    onLoad: handleChestBgLoaded\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_230),\n                                (_unref(chestStage) === 'opened')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_231, [\n                                        (_unref(chestRewardVisible) && _unref(chestRewardRelics).length > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 0,\n                                                class: _normalizeClass([\"chest-reward-anchor\", { 'is-multi': _unref(chestRewardRelics).length > 1 }])\n                                            }, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(chestRewardRelics), (relic, i) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `chest-reward-${relic.id}-${i}`,\n                                                        type: \"button\",\n                                                        class: _normalizeClass([\"pointer-events-auto chest-reward-btn\", { 'is-collected': _unref(chestRewardCollectedFlags)[i] }]),\n                                                        disabled: _unref(chestCollecting) || _unref(chestRewardCollectedFlags)[i],\n                                                        onClick: ($event) => (collectChestReward(i)),\n                                                        onMouseenter: ($event) => (showChestRewardTooltip($event, i)),\n                                                        onMouseleave: hideRelicTooltip,\n                                                        onFocus: ($event) => (showChestRewardTooltip($event, i)),\n                                                        onBlur: hideRelicTooltip,\n                                                        onTouchstartPassive: ($event) => (handleChestRewardTouchStart($event, i)),\n                                                        onTouchend: handleRelicTouchEnd,\n                                                        onTouchcancel: handleRelicTouchEnd\n                                                    }, [\n                                                        _createVNode(_unref(Box), { class: \"chest-reward-icon\" })\n                                                    ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_232));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 2 /* CLASS */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_233, [\n                                            _createElementVNode(\"div\", _hoisted_234, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(chestPortalChoices), (portal, i) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `chest-portal-${i}`,\n                                                        class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                        style: _normalizeStyle({\n                                                            backgroundColor: portal.bgColor,\n                                                            borderColor: portal.borderColor,\n                                                            boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                        }),\n                                                        disabled: _unref(chestCollecting),\n                                                        onClick: ($event) => (handleChestPortalClick(portal))\n                                                    }, [\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                            style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                        }, null, 4 /* STYLE */),\n                                                        _createElementVNode(\"span\", _hoisted_236, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                            style: _normalizeStyle({ color: portal.textColor })\n                                                        }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                            style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                        }, null, 4 /* STYLE */)\n                                                    ], 12 /* STYLE, PROPS */, _hoisted_235));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(chestStage) === 'closed')\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 1,\n                                        type: \"button\",\n                                        \"aria-label\": \"\",\n                                        class: \"absolute left-1/2 top-1/2 h-[42vh] max-h-[360px] min-h-[220px] w-[36vw] max-w-[540px] min-w-[260px] -translate-x-1/2 -translate-y-1/2 cursor-pointer rounded-2xl border-0 bg-transparent p-0 opacity-0\",\n                                        disabled: _unref(chestRolling),\n                                        onClick: handleChestCenterClick\n                                    }, null, 8 /* PROPS */, _hoisted_237))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Idol Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showIdolView))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"absolute inset-0 z-[96] bg-black overflow-hidden\",\n                                onPointermove: handleIdolDicePointerMove,\n                                onPointerup: handleIdolDicePointerUp,\n                                onPointercancel: handleIdolDicePointerUp\n                            }, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(idolBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_238),\n                                _createElementVNode(\"div\", _hoisted_239, [\n                                    _createElementVNode(\"div\", _hoisted_240, [\n                                        _createElementVNode(\"div\", _hoisted_241, [\n                                            _cache[100] || (_cache[100] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"1\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotMaxHpRef\",\n                                                ref: idolSlotMaxHpRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'maxHp',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'maxHp',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_242, [\n                                            _cache[101] || (_cache[101] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"1\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotMpRef\",\n                                                ref: idolSlotMpRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'mp',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'mp',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_243, [\n                                            _cache[102] || (_cache[102] = _createElementVNode(\"div\", { class: \"idol-slot-hint\" }, \"2\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", {\n                                                ref_key: \"idolSlotGoldRef\",\n                                                ref: idolSlotGoldRef,\n                                                class: _normalizeClass([\"idol-slot\", {\n                                                        'is-preview': _unref(idolSnapPreviewTarget) === 'gold',\n                                                        'is-selected': _unref(idolAssignedTarget) === 'gold',\n                                                    }])\n                                            }, null, 2 /* CLASS */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", {\n                                        ref_key: \"idolDiceStageRef\",\n                                        ref: idolDiceStageRef,\n                                        class: \"idol-dice-stage\"\n                                    }, [\n                                        _createElementVNode(\"div\", {\n                                            ref_key: \"idolDiceRef\",\n                                            ref: idolDiceRef,\n                                            class: _normalizeClass([\"idol-dice-draggable\", { 'is-locked': _unref(idolDiceRolling) }]),\n                                            style: _normalizeStyle({ transform: `translate(${_unref(idolDicePosition).x}px, ${_unref(idolDicePosition).y}px)` }),\n                                            onPointerdown: handleIdolDicePointerDown\n                                        }, [\n                                            _createVNode(DungeonDice, {\n                                                value: _unref(idolDiceValue),\n                                                rolling: _unref(idolDiceRolling),\n                                                color: \"gold\",\n                                                size: \"lg\",\n                                                \"rolling-min\": _unref(idolDiceMin),\n                                                \"rolling-max\": _unref(idolDiceMax)\n                                            }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\"])\n                                        ], 38 /* CLASS, STYLE, NEED_HYDRATION */)\n                                    ], 512 /* NEED_PATCH */)\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"idol-exit-btn absolute right-5 bottom-5 z-[98] px-6 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: exitIdolView\n                                }, \"  \", 8 /* PROPS */, _hoisted_244)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Victory Card Reward Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showVictoryRewardView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_245, [\n                                _createElementVNode(\"div\", _hoisted_246, [\n                                    _createElementVNode(\"div\", _hoisted_247, [\n                                        _createElementVNode(\"div\", _hoisted_248, [\n                                            _createElementVNode(\"div\", null, [\n                                                _cache[103] || (_cache[103] = _createElementVNode(\"div\", { class: \"font-heading text-xl text-dungeon-gold\" }, \"\", -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_249, _toDisplayString(_unref(victoryRewardStage) === 'pick'\n                                                    ? ' 1 '\n                                                    : (_unref(victoryRewardStage) === 'replaceActive'\n                                                        ? '2'\n                                                        : '9')), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_250, [\n                                                (_unref(canRefreshVictoryReward))\n                                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: 0,\n                                                        class: \"px-4 py-2 rounded border border-sky-500/50 text-sky-200 hover:bg-sky-500/10 disabled:opacity-50\",\n                                                        disabled: _unref(rewardApplying),\n                                                        onClick: refreshVictoryRewardOptions\n                                                    }, \"  \", 8 /* PROPS */, _hoisted_251))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/75 hover:border-dungeon-gold/50\",\n                                                    disabled: _unref(rewardApplying),\n                                                    onClick: exitVictoryRewardFlow\n                                                }, \"  \", 8 /* PROPS */, _hoisted_252)\n                                            ])\n                                        ]),\n                                        (_unref(victoryRewardStage) === 'pick')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_253, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(victoryRewardOptions), (reward) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `reward-option-${reward.id}`,\n                                                        type: \"button\",\n                                                        class: \"rounded-lg border border-dungeon-brown/50 bg-[#160d08]/75 p-3 transition-all hover:border-dungeon-gold/60 hover:scale-[1.01]\",\n                                                        onClick: ($event) => (pickVictoryRewardCard(reward))\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_255, _toDisplayString(getVictoryRewardTypeText(reward)), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_256, [\n                                                            (!isActiveSkillReward(reward))\n                                                                ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                    key: 0,\n                                                                    card: reward,\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]))\n                                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_257, [\n                                                                    _createElementVNode(\"div\", _hoisted_258, [\n                                                                        _createElementVNode(\"span\", null, _toDisplayString(reward.name), 1 /* TEXT */),\n                                                                        _cache[104] || (_cache[104] = _createElementVNode(\"span\", { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" }, \"\", -1 /* CACHED */))\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_259, [\n                                                                        _createElementVNode(\"span\", _hoisted_260, \"MP \" + _toDisplayString(reward.manaCost), 1 /* TEXT */),\n                                                                        _createElementVNode(\"span\", _hoisted_261, \"CD \" + _toDisplayString(reward.Cooldown), 1 /* TEXT */)\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_262, _toDisplayString(reward.description), 1 /* TEXT */),\n                                                                    _createElementVNode(\"div\", _hoisted_263, \"\" + _toDisplayString(reward.category) + \"  \" + _toDisplayString(reward.rarity), 1 /* TEXT */)\n                                                                ]))\n                                                        ]),\n                                                        _cache[105] || (_cache[105] = _createElementVNode(\"div\", { class: \"mt-2 text-center text-xs text-dungeon-gold/90\" }, \"\", -1 /* CACHED */))\n                                                    ], 8 /* PROPS */, _hoisted_254));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                            : (_unref(victoryRewardStage) === 'replaceDeck' || _unref(victoryRewardStage) === 'replaceActive')\n                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                    _createElementVNode(\"div\", _hoisted_264, [\n                                                        _createElementVNode(\"div\", _hoisted_265, \" \" + _toDisplayString(_unref(selectedVictoryRewardCard) && isActiveSkillReward(_unref(selectedVictoryRewardCard)) ? '' : '') + \" \", 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_266, [\n                                                            (_unref(selectedVictoryRewardCard) && !isActiveSkillReward(_unref(selectedVictoryRewardCard)))\n                                                                ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                    key: 0,\n                                                                    card: _unref(selectedVictoryRewardCard),\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]))\n                                                                : (_unref(selectedVictoryRewardCard) && isActiveSkillReward(_unref(selectedVictoryRewardCard)))\n                                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_267, [\n                                                                        _createElementVNode(\"div\", _hoisted_268, [\n                                                                            _createElementVNode(\"span\", null, _toDisplayString(_unref(selectedVictoryRewardCard).name), 1 /* TEXT */),\n                                                                            _cache[106] || (_cache[106] = _createElementVNode(\"span\", { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" }, \"\", -1 /* CACHED */))\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_269, [\n                                                                            _createElementVNode(\"span\", _hoisted_270, \"MP \" + _toDisplayString(_unref(selectedVictoryRewardCard).manaCost), 1 /* TEXT */),\n                                                                            _createElementVNode(\"span\", _hoisted_271, \"CD \" + _toDisplayString(_unref(selectedVictoryRewardCard).Cooldown), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_272, _toDisplayString(_unref(selectedVictoryRewardCard).description), 1 /* TEXT */),\n                                                                        _createElementVNode(\"div\", _hoisted_273, \"\" + _toDisplayString(_unref(selectedVictoryRewardCard).category) + \"  \" + _toDisplayString(_unref(selectedVictoryRewardCard).rarity), 1 /* TEXT */)\n                                                                    ]))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ]),\n                                                    (_unref(victoryRewardStage) === 'replaceDeck' && _unref(rewardDeckReplaceEntries).length === 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_274, [\n                                                            _cache[107] || (_cache[107] = _createElementVNode(\"div\", { class: \"text-sm text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"button\", {\n                                                                type: \"button\",\n                                                                class: \"mt-3 px-4 py-2 rounded border border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10 disabled:opacity-50\",\n                                                                disabled: _unref(rewardApplying),\n                                                                onClick: _cache[39] || (_cache[39] = ($event) => (replaceDeckCardWithReward(0)))\n                                                            }, \"  \", 8 /* PROPS */, _hoisted_275)\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    (_unref(victoryRewardStage) === 'replaceDeck' && _unref(rewardDeckReplaceEntries).length > 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_276, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(rewardDeckReplaceEntries), (entry) => {\n                                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                                    key: `reward-replace-${entry.idx}`,\n                                                                    type: \"button\",\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                                    disabled: _unref(rewardApplying),\n                                                                    onClick: ($event) => (replaceDeckCardWithReward(entry.idx))\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_278, \" \" + _toDisplayString(entry.idx + 1), 1 /* TEXT */),\n                                                                    _createElementVNode(\"div\", _hoisted_279, [\n                                                                        (entry.card)\n                                                                            ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                                key: 0,\n                                                                                card: entry.card,\n                                                                                disabled: \"\"\n                                                                            }, null, 8 /* PROPS */, [\"card\"]))\n                                                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_280, _toDisplayString(entry.name || ''), 1 /* TEXT */))\n                                                                    ])\n                                                                ], 8 /* PROPS */, _hoisted_277));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    (_unref(victoryRewardStage) === 'replaceActive')\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_281, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(rewardActiveReplaceEntries), (entry) => {\n                                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                                    key: `reward-active-replace-${entry.idx}`,\n                                                                    type: \"button\",\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                                    disabled: _unref(rewardApplying),\n                                                                    onClick: ($event) => (replaceActiveSkillWithReward(entry.idx))\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_283, \" \" + _toDisplayString(entry.idx + 1), 1 /* TEXT */),\n                                                                    _createElementVNode(\"div\", _hoisted_284, [\n                                                                        (entry.skill)\n                                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_285, [\n                                                                                _createElementVNode(\"div\", _hoisted_286, [\n                                                                                    _createElementVNode(\"span\", null, _toDisplayString(entry.skill.name), 1 /* TEXT */),\n                                                                                    _cache[108] || (_cache[108] = _createElementVNode(\"span\", { class: \"rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5\" }, \"\", -1 /* CACHED */))\n                                                                                ]),\n                                                                                _createElementVNode(\"div\", _hoisted_287, [\n                                                                                    _createElementVNode(\"span\", _hoisted_288, \"MP \" + _toDisplayString(entry.skill.manaCost), 1 /* TEXT */),\n                                                                                    _createElementVNode(\"span\", _hoisted_289, \"CD \" + _toDisplayString(entry.skill.Cooldown), 1 /* TEXT */)\n                                                                                ]),\n                                                                                _createElementVNode(\"div\", _hoisted_290, _toDisplayString(entry.skill.description), 1 /* TEXT */),\n                                                                                _createElementVNode(\"div\", _hoisted_291, \"\" + _toDisplayString(entry.skill.category) + \"  \" + _toDisplayString(entry.skill.rarity), 1 /* TEXT */)\n                                                                            ]))\n                                                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_292, _toDisplayString(entry.name || ''), 1 /* TEXT */))\n                                                                    ])\n                                                                ], 8 /* PROPS */, _hoisted_282));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ], 64 /* STABLE_FRAGMENT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Combat Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showCombat))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_293, [\n                                _createVNode(CombatView, {\n                                    class: \"w-full h-full\",\n                                    \"enemy-name\": _unref(combatEnemyName),\n                                    \"player-deck\": _unref(resolvedDeck),\n                                    \"player-active-skills\": _unref(resolvedActiveSkills),\n                                    \"player-relics\": _unref(combatRelicMap),\n                                    \"test-start-at-999\": _unref(combatTestStartAt999CurrentBattle),\n                                    \"track-discovery\": _unref(activeCombatContext) !== 'combatTest',\n                                    \"ui-font-family\": _unref(textSettings).fontFamily,\n                                    \"initial-player-stats\": {\n                                        hp: _unref(displayHp),\n                                        maxHp: _unref(displayMaxHp),\n                                        mp: _unref(displayMp),\n                                        minDice: _unref(displayMinDice) || 1,\n                                        maxDice: _unref(displayMaxDice) || 6,\n                                        effects: [{ type: _unref(EffectType).MANA_SPRING, stacks: 1, polarity: 'buff' }],\n                                    },\n                                    onEndCombat: handleCombatEnd,\n                                    onOpenDeck: _cache[40] || (_cache[40] = ($event) => (activeModal.value = 'deck')),\n                                    onOpenRelics: _cache[41] || (_cache[41] = ($event) => (activeModal.value = 'relics'))\n                                }, null, 8 /* PROPS */, [\"enemy-name\", \"player-deck\", \"player-active-skills\", \"player-relics\", \"test-start-at-999\", \"track-discovery\", \"ui-font-family\", \"initial-player-stats\"]),\n                                _createCommentVNode(\" Exit combat button \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm\",\n                                    onClick: _cache[42] || (_cache[42] = ($event) => (showCombat.value = false))\n                                }, \"   \")\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameView.vue?vue&type=style&index=0&id=bf3fe73c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bf3fe73c\"]])\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"play\", [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"z-10 flex flex-col items-center space-y-12\" };\nconst _hoisted_2 = { class: \"flex flex-col space-y-4 w-64\" };\nimport { Maximize, Play, Star } from 'lucide-vue-next';\n\nimport { ref, nextTick, onMounted, onBeforeUnmount } from 'vue';\nconst IMAGE_CDN_ROOT = 'https://img.vinsimage.org';\nconst BACKGROUND_FADE_MS = 700;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    emits: [\"start\", \"toggleFullscreen\", \"openCollection\"],\n    setup(__props) {\n        const isVisible = ref(false);\n        const splashBackgrounds = [\n            `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF1.png`,\n            `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF2.png`,\n            `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF3.png`,\n            `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF4.png`,\n            `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF5.png`,\n        ];\n        const currentBackgroundUrl = ref(splashBackgrounds[0]);\n        const incomingBackgroundUrl = ref(null);\n        const outgoingBackgroundUrl = ref(null);\n        const isIncomingVisible = ref(false);\n        const isOutgoingVisible = ref(true);\n        const isBackgroundTransitioning = ref(false);\n        let backgroundFadeTimer = null;\n        let backgroundTransitionToken = 0;\n        const pickRandomBackground = (exclude) => {\n            const candidates = exclude\n                ? splashBackgrounds.filter((url) => url !== exclude)\n                : splashBackgrounds;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? splashBackgrounds[0];\n        };\n        const preloadImage = (url) => new Promise((resolve) => {\n            let settled = false;\n            const finish = () => {\n                if (settled)\n                    return;\n                settled = true;\n                resolve();\n            };\n            const img = new Image();\n            img.onload = finish;\n            img.onerror = finish;\n            img.src = url;\n            setTimeout(finish, 1200);\n        });\n        const switchBackground = async () => {\n            if (isBackgroundTransitioning.value)\n                return;\n            const nextUrl = pickRandomBackground(currentBackgroundUrl.value);\n            if (nextUrl === currentBackgroundUrl.value)\n                return;\n            const token = ++backgroundTransitionToken;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n            await preloadImage(nextUrl);\n            if (token !== backgroundTransitionToken)\n                return;\n            isBackgroundTransitioning.value = true;\n            outgoingBackgroundUrl.value = currentBackgroundUrl.value;\n            incomingBackgroundUrl.value = nextUrl;\n            isOutgoingVisible.value = true;\n            isIncomingVisible.value = false;\n            await nextTick();\n            await new Promise((resolve) => requestAnimationFrame(() => requestAnimationFrame(() => resolve())));\n            if (token !== backgroundTransitionToken)\n                return;\n            isIncomingVisible.value = true;\n            isOutgoingVisible.value = false;\n            backgroundFadeTimer = setTimeout(() => {\n                if (token !== backgroundTransitionToken)\n                    return;\n                currentBackgroundUrl.value = nextUrl;\n                incomingBackgroundUrl.value = null;\n                outgoingBackgroundUrl.value = null;\n                isBackgroundTransitioning.value = false;\n                backgroundFadeTimer = null;\n            }, BACKGROUND_FADE_MS);\n        };\n        onMounted(() => {\n            currentBackgroundUrl.value = pickRandomBackground();\n            isVisible.value = true;\n        });\n        onBeforeUnmount(() => {\n            backgroundTransitionToken += 1;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000\", _unref(isVisible) ? 'opacity-100' : 'opacity-0']),\n                style: { aspectRatio: '16/9' }\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat\",\n                    style: _normalizeStyle({ backgroundImage: `url('${_unref(currentBackgroundUrl)}')` })\n                }, null, 4 /* STYLE */),\n                (_unref(incomingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isIncomingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(incomingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(outgoingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isOutgoingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(outgoingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"button\", {\n                    type: \"button\",\n                    class: \"absolute inset-0 z-[1] bg-transparent cursor-pointer focus:outline-none\",\n                    \"aria-label\": \"\",\n                    onClick: switchBackground\n                }),\n                _createCommentVNode(\" Dynamic Background \"),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Ornamental Frame \"),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Fullscreen Button (Top Right, Small) \"),\n                _createElementVNode(\"button\", {\n                    class: \"absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggleFullscreen')))\n                }, [\n                    _createVNode(_unref(Maximize), { class: \"size-4\" })\n                ]),\n                _createCommentVNode(\" Main Content \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Title Section \"),\n                    _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"text-center space-y-4 relative\\\"><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50\\\"></div><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50\\\"></div><h1 class=\\\"text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide\\\">  </h1><h2 class=\\\"text-xl md:text-2xl font-body text-[#f9e6a0] tracking-[0.35em] uppercase border-t border-dungeon-brown pt-4 mt-2\\\"> Created by Vin </h2></div>\", 1)),\n                    _createCommentVNode(\" Menu Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('start')))\n                        }, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full\" }, null, -1 /* CACHED */)),\n                            _createVNode(_unref(Play), { class: \"size-5 text-dungeon-gold group-hover:scale-110 transition-transform\" }),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold\" }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-3 bg-[#120b08] hover:bg-dungeon-brown/80 border border-dungeon-brown/80 hover:border-dungeon-gold/60 text-dungeon-paper/85 font-heading tracking-widest flex items-center justify-center space-x-2 transition-all duration-300\",\n                            onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('openCollection')))\n                        }, [\n                            _createVNode(_unref(Star), { class: \"size-4\" }),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createBlock as _createBlock, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"codex-root\" };\nconst _hoisted_2 = { class: \"top-nav\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"top-nav-btn-text\" };\nconst _hoisted_5 = { class: \"book-layout\" };\nconst _hoisted_6 = { class: \"side-nav\" };\nconst _hoisted_7 = { class: \"side-title\" };\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"book-shell\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"card-grid\"\n};\nconst _hoisted_11 = {\n    key: 1,\n    class: \"entry-grid\"\n};\nconst _hoisted_12 = { class: \"entry-title\" };\nconst _hoisted_13 = { class: \"entry-meta\" };\nconst _hoisted_14 = { class: \"entry-desc\" };\nconst _hoisted_15 = {\n    key: 2,\n    class: \"entry-grid\"\n};\nconst _hoisted_16 = { class: \"effect-row\" };\nconst _hoisted_17 = { class: \"effect-icon\" };\nconst _hoisted_18 = { key: 1 };\nconst _hoisted_19 = { class: \"entry-title\" };\nconst _hoisted_20 = { class: \"entry-meta\" };\nconst _hoisted_21 = { class: \"entry-desc\" };\nconst _hoisted_22 = {\n    key: 3,\n    class: \"enemy-grid\"\n};\nconst _hoisted_23 = { class: \"enemy-head\" };\nconst _hoisted_24 = { class: \"portrait\" };\nconst _hoisted_25 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_26 = {\n    key: 1,\n    class: \"portrait-fallback\"\n};\nconst _hoisted_27 = { class: \"enemy-head-text\" };\nconst _hoisted_28 = { class: \"entry-title\" };\nconst _hoisted_29 = { class: \"entry-meta\" };\nconst _hoisted_30 = { class: \"entry-meta\" };\nconst _hoisted_31 = { class: \"entry-desc\" };\nconst _hoisted_32 = { class: \"page-foot\" };\nconst _hoisted_33 = [\"disabled\"];\nconst _hoisted_34 = { class: \"page-indicator\" };\nconst _hoisted_35 = [\"disabled\"];\nimport { getAllCards } from '../battle/cardRegistry';\nimport { EFFECT_REGISTRY } from '../battle/effects';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { getAllRelics } from '../battle/relicRegistry';\nimport { loadCodexState } from '../codexStore';\nimport { getLocalFolderImagePaths } from '../localAssetManifest';\nimport { CardType, EffectType as ET } from '../types';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref, computed, watch } from 'vue';\nconst IMAGE_CDN_ROOT = 'https://img.vinsimage.org';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WitchCollectionModal',\n    props: {\n        isOpen: { type: Boolean }\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        const props = __props;\n        const tabs = [\n            { id: 'cards', label: '' },\n            { id: 'relics', label: '' },\n            { id: 'enemies', label: '' },\n            { id: 'status', label: '' },\n        ];\n        const CARD_TYPE_ORDER = {\n            [CardType.PHYSICAL]: 0,\n            [CardType.MAGIC]: 1,\n            [CardType.FUNCTION]: 2,\n            [CardType.DODGE]: 3,\n            [CardType.CURSE]: 4,\n        };\n        const RELIC_RARITY_ORDER = { : 0, : 1, : 2 };\n        const PAGE_SIZE = { cards: 9, relics: 20, enemies: 8, status: 20 };\n        const activeTab = ref('cards');\n        const currentPage = ref(1);\n        const flipName = ref('flip-next');\n        const codex = ref(loadCodexState());\n        const cardFilter = ref('');\n        const relicFilter = ref('');\n        const enemyFloorFilter = ref('');\n        const statusFilter = ref('');\n        const refreshCodex = () => {\n            codex.value = loadCodexState();\n        };\n        const encounteredCardIds = computed(() => new Set(codex.value.cards));\n        const encounteredRelicIds = computed(() => new Set(codex.value.relics));\n        const encounteredEffectTypes = computed(() => new Set(codex.value.effects));\n        const encounteredEnemyNames = computed(() => new Set(codex.value.enemies.map((enemy) => enemy.name)));\n        const allCards = computed(() => (getAllCards().slice().sort((a, b) => {\n            const categoryComp = a.category.localeCompare(b.category, 'zh-Hans-CN');\n            if (categoryComp !== 0)\n                return categoryComp;\n            const typeComp = (CARD_TYPE_ORDER[a.type] ?? 99) - (CARD_TYPE_ORDER[b.type] ?? 99);\n            if (typeComp !== 0)\n                return typeComp;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const cardCategories = computed(() => Array.from(new Set(allCards.value.map((card) => card.category))).sort((a, b) => a.localeCompare(b, 'zh-Hans-CN')));\n        const filteredCards = computed(() => (cardFilter.value === '' ? allCards.value : allCards.value.filter((card) => card.category === cardFilter.value)));\n        const allRelics = computed(() => (getAllRelics().slice().sort((a, b) => {\n            const rarityComp = (RELIC_RARITY_ORDER[a.rarity] ?? 99) - (RELIC_RARITY_ORDER[b.rarity] ?? 99);\n            if (rarityComp !== 0)\n                return rarityComp;\n            const categoryComp = a.category.localeCompare(b.category, 'zh-Hans-CN');\n            if (categoryComp !== 0)\n                return categoryComp;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const relicCategories = computed(() => Array.from(new Set(allRelics.value.map((relic) => relic.category))).sort((a, b) => a.localeCompare(b, 'zh-Hans-CN')));\n        const filteredRelics = computed(() => (relicFilter.value === '' ? allRelics.value : allRelics.value.filter((relic) => relic.category === relicFilter.value)));\n        const effectKind = (polarity) => {\n            if (polarity === 'buff')\n                return '';\n            if (polarity === 'debuff')\n                return '';\n            return '';\n        };\n        const EFFECT_FA_ICON_CLASS = {\n            [ET.BARRIER]: 'fa-brands fa-fediverse',\n            [ET.ARMOR]: 'fa-solid fa-shield-halved',\n            [ET.BIND]: 'fa-solid fa-link',\n            [ET.DEVOUR]: 'fa-brands fa-optin-monster',\n            [ET.POISON]: 'fa-solid fa-virus',\n            [ET.POISON_AMOUNT]: 'fa-solid fa-bacterium',\n            [ET.CORROSION]: 'fa-brands fa-cloudscale',\n            [ET.BURN]: 'fa-solid fa-fire',\n            [ET.BLEED]: 'fa-solid fa-droplet',\n            [ET.VULNERABLE]: 'fa-brands fa-linode',\n            [ET.DAMAGE_BOOST]: 'fa-brands fa-superpowers',\n            [ET.REGEN]: 'fa-brands fa-medrt',\n            [ET.WHITE_TURBID]: 'fa-solid fa-droplet',\n            [ET.IGNITE_AURA]: 'fa-solid fa-fire-flame-simple',\n            [ET.STUN]: 'fa-solid fa-ban',\n            [ET.CHARGE]: 'fa-solid fa-exclamation',\n            [ET.FATIGUE]: 'fa-solid fa-bed',\n            [ET.COLD]: 'fa-regular fa-snowflake',\n            [ET.TEMPERATURE_DIFF]: 'fa-brands fa-empire',\n            [ET.NON_LIVING]: 'fa-solid fa-skull',\n            [ET.NON_ENTITY]: 'fa-solid fa-ghost',\n            [ET.ILLUSORY_BODY]: 'fa-solid fa-ghost',\n            [ET.TEMP_MAX_HP]: 'fa-solid fa-heart',\n            [ET.MAX_HP_REDUCTION]: 'fa-solid fa-heart-pulse',\n            [ET.POINT_GROWTH_BIG]: 'fa-solid fa-dice fa-lg',\n            [ET.POINT_GROWTH_SMALL]: 'fa-solid fa-dice fa-sm',\n            [ET.MANA_DRAIN]: 'fa-solid fa-battery-empty',\n            [ET.MANA_SPRING]: 'fa-brands fa-drupal',\n            [ET.SWARM]: 'fa-solid fa-bugs',\n            [ET.BLOOD_COCOON]: 'fa-brands fa-battle-net',\n            [ET.INDOMITABLE]: 'fa-solid fa-shield',\n            [ET.PEEP_FORBIDDEN]: 'fa-solid fa-eye',\n            [ET.BLIND_ASH]: 'fa-regular fa-eye-slash',\n            [ET.COGNITIVE_INTERFERENCE]: 'fa-solid fa-hamsa',\n            [ET.MEMORY_FOG]: 'fa-brands fa-phabricator',\n            [ET.SILENCE]: 'fa-solid fa-circle-xmark',\n            [ET.STURDY]: 'fa-solid fa-user-shield',\n            [ET.SHOCK]: 'fa-solid fa-bolt',\n            [ET.FLAME_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.POISON_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.TOXIN_SPREAD]: 'fa-brands fa-hornbill',\n            [ET.AMBUSH]: 'fa-solid fa-user-secret',\n            [ET.FROST_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.BLOODBLADE_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.LIGHTNING_ATTACH]: 'fa-solid fa-flask-vial',\n            [ET.THORNS]: 'fa-solid fa-leaf',\n        };\n        const EFFECT_FA_ICON_STYLE = {\n            [ET.FLAME_ATTACH]: { color: 'rgb(255, 64, 64)' },\n            [ET.POISON_ATTACH]: { color: 'rgb(81, 255, 116)' },\n            [ET.FROST_ATTACH]: { color: 'rgb(108, 230, 255)' },\n            [ET.BLOODBLADE_ATTACH]: { color: 'rgb(176, 0, 0)' },\n            [ET.LIGHTNING_ATTACH]: { color: 'rgb(201, 69, 255)' },\n            [ET.TEMP_MAX_HP]: { color: 'rgb(255, 120, 150)' },\n            [ET.ILLUSORY_BODY]: {\n                '--fa-primary-color': 'rgb(255, 255, 255)',\n                '--fa-secondary-color': 'rgb(255, 255, 255)',\n            },\n        };\n        const getEffectFontAwesomeClass = (type) => EFFECT_FA_ICON_CLASS[type] ?? null;\n        const getEffectFontAwesomeStyle = (type) => EFFECT_FA_ICON_STYLE[type];\n        const allEffects = computed(() => (Object.entries(EFFECT_REGISTRY)\n            .map(([type, def]) => ({\n            type,\n            name: def.name,\n            description: def.description ?? '',\n            kind: effectKind(def.polarity),\n            faClass: getEffectFontAwesomeClass(type),\n            faStyle: getEffectFontAwesomeStyle(type),\n        }))\n            .sort((a, b) => {\n            const order = { : 0, : 1, : 2 };\n            const kindComp = (order[a.kind] ?? 99) - (order[b.kind] ?? 99);\n            if (kindComp !== 0)\n                return kindComp;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const filteredEffects = computed(() => (statusFilter.value === '' ? allEffects.value : allEffects.value.filter((effect) => effect.kind === statusFilter.value)));\n        const ENEMY_FLOOR_HINT = {\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n            : 1,\n        };\n        const allEnemies = computed(() => (getAllEnemyNames().map((name) => {\n            const encounters = codex.value.enemies.filter((entry) => entry.name === name);\n            const floor = ENEMY_FLOOR_HINT[name] ?? (encounters[0]?.floor ?? 0);\n            const areaLabel = encounters[0]?.area ?? '';\n            const def = getEnemyByName(name, Math.max(1, floor)) ?? getEnemyByName(name, 1);\n            const stats = def?.stats ?? { hp: 0, maxHp: 0, mp: 0, minDice: 0, maxDice: 0 };\n            return {\n                name,\n                floor,\n                floorLabel: floor > 0 ? String(floor) : '',\n                areaLabel,\n                fallbackPortraitUrl: `${IMAGE_CDN_ROOT}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/${encodeURIComponent(name)}.png`,\n                stats: {\n                    hp: stats.hp,\n                    maxHp: stats.maxHp,\n                    mp: stats.mp,\n                    minDice: stats.minDice,\n                    maxDice: stats.maxDice,\n                },\n                deckCardNames: def?.deck?.map((card) => card.name) ?? [],\n            };\n        }).sort((a, b) => {\n            if (a.floor !== b.floor)\n                return a.floor - b.floor;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const enemyFloorItems = computed(() => {\n            const floors = Array.from(new Set(allEnemies.value.map((enemy) => enemy.floorLabel))).sort((a, b) => (a === '' ? 1 : b === '' ? -1 : Number(a) - Number(b)));\n            return [{ key: '', label: '' }, ...floors.map((floor) => ({ key: floor, label: floor === '' ? '' : `${floor}` }))];\n        });\n        const filteredEnemies = computed(() => {\n            if (enemyFloorFilter.value === '')\n                return allEnemies.value;\n            return allEnemies.value.filter((enemy) => enemy.floorLabel === enemyFloorFilter.value);\n        });\n        const sideTitle = computed(() => {\n            if (activeTab.value === 'cards')\n                return '';\n            if (activeTab.value === 'relics')\n                return '';\n            if (activeTab.value === 'enemies')\n                return '';\n            return '';\n        });\n        const sideItems = computed(() => {\n            if (activeTab.value === 'cards')\n                return [{ key: '', label: '' }, ...cardCategories.value.map((category) => ({ key: category, label: category }))];\n            if (activeTab.value === 'relics')\n                return [{ key: '', label: '' }, ...relicCategories.value.map((category) => ({ key: category, label: category }))];\n            if (activeTab.value === 'enemies')\n                return enemyFloorItems.value;\n            return [{ key: '', label: '' }, { key: '', label: '' }, { key: '', label: '' }, { key: '', label: '' }];\n        });\n        const currentFilter = computed(() => {\n            if (activeTab.value === 'cards')\n                return cardFilter.value;\n            if (activeTab.value === 'relics')\n                return relicFilter.value;\n            if (activeTab.value === 'enemies')\n                return enemyFloorFilter.value;\n            return statusFilter.value;\n        });\n        const totalItems = computed(() => {\n            if (activeTab.value === 'cards')\n                return filteredCards.value.length;\n            if (activeTab.value === 'relics')\n                return filteredRelics.value.length;\n            if (activeTab.value === 'enemies')\n                return filteredEnemies.value.length;\n            return filteredEffects.value.length;\n        });\n        const totalPages = computed(() => Math.max(1, Math.ceil(totalItems.value / PAGE_SIZE[activeTab.value])));\n        const pageKey = computed(() => `${activeTab.value}-${currentFilter.value}-${currentPage.value}`);\n        const pageStart = computed(() => (currentPage.value - 1) * PAGE_SIZE[activeTab.value]);\n        const pageEnd = computed(() => pageStart.value + PAGE_SIZE[activeTab.value]);\n        const pagedCards = computed(() => filteredCards.value.slice(pageStart.value, pageEnd.value));\n        const pagedRelics = computed(() => filteredRelics.value.slice(pageStart.value, pageEnd.value));\n        const pagedEffects = computed(() => filteredEffects.value.slice(pageStart.value, pageEnd.value));\n        const pagedEnemies = computed(() => filteredEnemies.value.slice(pageStart.value, pageEnd.value));\n        const setMainTab = (tab) => {\n            if (activeTab.value === tab)\n                return;\n            activeTab.value = tab;\n            flipName.value = 'flip-next';\n            currentPage.value = 1;\n        };\n        const setFilter = (key) => {\n            if (activeTab.value === 'cards')\n                cardFilter.value = key;\n            if (activeTab.value === 'relics')\n                relicFilter.value = key;\n            if (activeTab.value === 'enemies')\n                enemyFloorFilter.value = key;\n            if (activeTab.value === 'status')\n                statusFilter.value = key;\n            flipName.value = 'flip-next';\n            currentPage.value = 1;\n        };\n        const prevPage = () => {\n            if (currentPage.value <= 1)\n                return;\n            flipName.value = 'flip-prev';\n            currentPage.value -= 1;\n        };\n        const nextPage = () => {\n            if (currentPage.value >= totalPages.value)\n                return;\n            flipName.value = 'flip-next';\n            currentPage.value += 1;\n        };\n        watch(totalPages, (pages) => {\n            currentPage.value = Math.min(Math.max(1, currentPage.value), pages);\n        });\n        const portraitMap = ref({});\n        const portraitErrorMap = ref({});\n        const folderCache = new Map();\n        const folderPromise = new Map();\n        const fetchFolderImages = async (folderPath) => {\n            if (folderCache.has(folderPath))\n                return folderCache.get(folderPath);\n            if (folderPromise.has(folderPath))\n                return folderPromise.get(folderPath);\n            const task = (async () => {\n                const images = getLocalFolderImagePaths(folderPath);\n                folderCache.set(folderPath, images);\n                return images;\n            })();\n            folderPromise.set(folderPath, task);\n            try {\n                return await task;\n            }\n            finally {\n                folderPromise.delete(folderPath);\n            }\n        };\n        const ensurePortraits = async () => {\n            if (activeTab.value !== 'enemies')\n                return;\n            const targets = pagedEnemies.value.filter((enemy) => encounteredEnemyNames.value.has(enemy.name));\n            await Promise.all(targets.map(async (enemy) => {\n                if (portraitMap.value[enemy.name])\n                    return;\n                const images = await fetchFolderImages(`//${enemy.name}`);\n                const chosen = images.length > 0 ? images[Math.floor(Math.random() * images.length)] : null;\n                portraitMap.value[enemy.name] = chosen ? `${IMAGE_CDN_ROOT}/${encodeURIComponent(chosen).replace(/%2F/g, '/')}` : enemy.fallbackPortraitUrl;\n            }));\n        };\n        const markPortraitError = (name) => {\n            portraitErrorMap.value[name] = true;\n        };\n        watch(() => props.isOpen, (open) => {\n            if (!open)\n                return;\n            refreshCodex();\n            currentPage.value = 1;\n            void ensurePortraits();\n        }, { immediate: true });\n        watch([activeTab, currentPage, enemyFloorFilter], () => {\n            if (!props.isOpen)\n                return;\n            void ensurePortraits();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                \"panel-class\": \"codex-single-modal !max-w-[min(96vw,1500px)] !max-h-[94%]\",\n                onClose: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\" Decorative top glow line \"),\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"codex-top-glow\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"header\", _hoisted_2, [\n                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                                return _createElementVNode(\"button\", {\n                                    key: tab.id,\n                                    type: \"button\",\n                                    class: _normalizeClass([\"top-nav-btn\", { active: _unref(activeTab) === tab.id }]),\n                                    onClick: ($event) => (setMainTab(tab.id))\n                                }, [\n                                    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(tab.label), 1 /* TEXT */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_3);\n                            }), 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"aside\", _hoisted_6, [\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_unref(sideTitle)), 1 /* TEXT */),\n                                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"side-divider\" }, null, -1 /* CACHED */)),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(sideItems), (item) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: `${_unref(activeTab)}-${item.key}`,\n                                        type: \"button\",\n                                        class: _normalizeClass([\"side-btn\", { active: _unref(currentFilter) === item.key }]),\n                                        onClick: ($event) => (setFilter(item.key))\n                                    }, _toDisplayString(item.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_8));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"section\", _hoisted_9, [\n                                _createVNode(_Transition, {\n                                    name: _unref(flipName),\n                                    mode: \"out-in\"\n                                }, {\n                                    default: _withCtx(() => [\n                                        (_openBlock(), _createElementBlock(\"article\", {\n                                            key: _unref(pageKey),\n                                            class: \"book-page\"\n                                        }, [\n                                            (_unref(activeTab) === 'cards')\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(pagedCards), (card) => {\n                                                        return (_openBlock(), _createBlock(DungeonCard, {\n                                                            key: `card-${card.id}`,\n                                                            card: card,\n                                                            disabled: true,\n                                                            \"mask-level\": _unref(encounteredCardIds).has(card.id) ? 'none' : 'full'\n                                                        }, null, 8 /* PROPS */, [\"card\", \"mask-level\"]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                                : (_unref(activeTab) === 'relics')\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(pagedRelics), (relic) => {\n                                                            return (_openBlock(), _createElementBlock(\"article\", {\n                                                                key: `relic-${relic.id}`,\n                                                                class: \"entry-card\"\n                                                            }, [\n                                                                _createElementVNode(\"div\", _hoisted_12, _toDisplayString(_unref(encounteredRelicIds).has(relic.id) ? relic.name : '???'), 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", _hoisted_13, _toDisplayString(_unref(encounteredRelicIds).has(relic.id) ? `${relic.category}  ${relic.rarity}` : '???  ???'), 1 /* TEXT */),\n                                                                _createElementVNode(\"p\", _hoisted_14, _toDisplayString(_unref(encounteredRelicIds).has(relic.id) ? relic.effect : '???'), 1 /* TEXT */)\n                                                            ]));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : (_unref(activeTab) === 'status')\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(pagedEffects), (effect) => {\n                                                                return (_openBlock(), _createElementBlock(\"article\", {\n                                                                    key: `effect-${effect.type}`,\n                                                                    class: \"entry-card\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                                        _createElementVNode(\"span\", _hoisted_17, [\n                                                                            (_unref(encounteredEffectTypes).has(effect.type) && effect.faClass)\n                                                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                    key: 0,\n                                                                                    class: _normalizeClass([effect.faClass, 'text-[14px] leading-none']),\n                                                                                    style: _normalizeStyle(effect.faStyle),\n                                                                                    \"aria-hidden\": \"true\"\n                                                                                }, null, 6 /* CLASS, STYLE */))\n                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"?\"))\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_19, _toDisplayString(_unref(encounteredEffectTypes).has(effect.type) ? effect.name : '???'), 1 /* TEXT */)\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_20, _toDisplayString(_unref(encounteredEffectTypes).has(effect.type) ? effect.kind : '???'), 1 /* TEXT */),\n                                                                    _createElementVNode(\"p\", _hoisted_21, _toDisplayString(_unref(encounteredEffectTypes).has(effect.type) ? (effect.description || '') : '???'), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(pagedEnemies), (enemy) => {\n                                                                return (_openBlock(), _createElementBlock(\"article\", {\n                                                                    key: enemy.name,\n                                                                    class: \"entry-card enemy-card\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_23, [\n                                                                        _createElementVNode(\"div\", _hoisted_24, [\n                                                                            (_unref(encounteredEnemyNames).has(enemy.name) && !_unref(portraitErrorMap)[enemy.name])\n                                                                                ? (_openBlock(), _createElementBlock(\"img\", {\n                                                                                    key: 0,\n                                                                                    src: _unref(portraitMap)[enemy.name] || enemy.fallbackPortraitUrl,\n                                                                                    alt: `${enemy.name}`,\n                                                                                    class: \"portrait-img\",\n                                                                                    loading: \"lazy\",\n                                                                                    onError: ($event) => (markPortraitError(enemy.name))\n                                                                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_25))\n                                                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_26, \"?\"))\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_27, [\n                                                                            _createElementVNode(\"div\", _hoisted_28, _toDisplayString(_unref(encounteredEnemyNames).has(enemy.name) ? enemy.name : '???'), 1 /* TEXT */),\n                                                                            _createElementVNode(\"div\", _hoisted_29, _toDisplayString(_unref(encounteredEnemyNames).has(enemy.name)\n                                                                                ? `${enemy.floorLabel}  ${enemy.areaLabel}`\n                                                                                : `${enemy.floorLabel}  ???`), 1 /* TEXT */)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_30, _toDisplayString(_unref(encounteredEnemyNames).has(enemy.name)\n                                                                        ? `HP ${enemy.stats.hp}/${enemy.stats.maxHp}  MP ${enemy.stats.mp}   ${enemy.stats.minDice}~${enemy.stats.maxDice}`\n                                                                        : 'HP ???  MP ???   ???'), 1 /* TEXT */),\n                                                                    _createElementVNode(\"p\", _hoisted_31, _toDisplayString(_unref(encounteredEnemyNames).has(enemy.name)\n                                                                        ? `${enemy.deckCardNames.join('') || ''}`\n                                                                        : '???'), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])),\n                                            _createElementVNode(\"div\", _hoisted_32, [\n                                                _createElementVNode(\"button\", {\n                                                    type: \"button\",\n                                                    class: \"bookmark bookmark-prev\",\n                                                    disabled: _unref(currentPage) <= 1,\n                                                    onClick: prevPage\n                                                }, \"  \", 8 /* PROPS */, _hoisted_33),\n                                                _createElementVNode(\"span\", _hoisted_34, \" \" + _toDisplayString(_unref(currentPage)) + \" / \" + _toDisplayString(_unref(totalPages)) + \" \", 1 /* TEXT */),\n                                                _createElementVNode(\"button\", {\n                                                    type: \"button\",\n                                                    class: \"bookmark bookmark-next\",\n                                                    disabled: _unref(currentPage) >= _unref(totalPages),\n                                                    onClick: nextPage\n                                                }, \"  \", 8 /* PROPS */, _hoisted_35)\n                                            ])\n                                        ]))\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }, 8 /* PROPS */, [\"name\"])\n                            ])\n                        ])\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WitchCollectionModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WitchCollectionModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WitchCollectionModal.vue?vue&type=style&index=0&id=63b6b248&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-63b6b248\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"w-full relative\" };\nimport GameView from './components/GameView.vue';\nimport SplashScreen from './components/SplashScreen.vue';\nimport WitchCollectionModal from './components/WitchCollectionModal.vue';\nimport { disposeBgm, initializeBgm } from './bgm';\nimport { toggleFullScreen } from './fullscreen';\nimport { useGameStore } from './gameStore';\n\nimport { ref, onMounted, onUnmounted, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const appState = ref('SPLASH');\n        const isCollectionOpen = ref(false);\n        const gameStore = useGameStore();\n        onMounted(() => {\n            void initializeBgm();\n        });\n        onUnmounted(() => {\n            disposeBgm();\n        });\n        /**\n         *  gameStoreMVU\n         */\n        async function startGame() {\n            appState.value = 'GAME';\n            await nextTick();\n            await gameStore.initialize();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Splash Screen \"),\n                _createVNode(_Transition, {\n                    name: \"scene-fade\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(appState) === 'SPLASH')\n                            ? (_openBlock(), _createBlock(SplashScreen, {\n                                key: \"splash\",\n                                onStart: startGame,\n                                onToggleFullscreen: _unref(toggleFullScreen),\n                                onOpenCollection: _cache[0] || (_cache[0] = ($event) => (isCollectionOpen.value = true))\n                            }, null, 8 /* PROPS */, [\"onToggleFullscreen\"]))\n                            : (_openBlock(), _createBlock(GameView, {\n                                key: \"game\",\n                                onBackToSplash: _cache[1] || (_cache[1] = ($event) => (appState.value = 'SPLASH'))\n                            }))\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createVNode(WitchCollectionModal, {\n                    \"is-open\": _unref(isCollectionOpen),\n                    onClose: _cache[2] || (_cache[2] = ($event) => (isCollectionOpen.value = false))\n                }, null, 8 /* PROPS */, [\"is-open\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3673323e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.29_typescript@6.0.0-dev.20250807__webpack@5.105.3/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3673323e\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './styles.css';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","hasA11yProp","prop","startsWith","isEmptyString","value","mergeClasses","classes","filter","className","index","array","Boolean","trim","indexOf","join","toKebabCase","string","replace","toLowerCase","toPascalCase","camelCase","match","p1","p2","toUpperCase","toCamelCase","charAt","slice","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","slots","h","Number","class","default","map","child","createLucideIcon","iconName","attrs","Book","d","Lock","x","y","rx","ry","Settings","cx","cy","r","Scroll","Box","Users","Maximize","BookOpen","FileText","Send","ChevronDown","Activity","Dices","Coins","CardType","EffectType","GamePhase","CombatPhase","ACTIVE_SKILL_REGISTRY","id","type","ACTIVE","category","rarity","manaCost","Cooldown","description","ACTIVE_SKILL_BY_NAME","Map","skill","resolveActiveSkillNames","names","get","getActiveSkillByName","PHYSICAL","calculation","multiplier","addition","damageLogic","mode","scale","scaleAddition","hitCount","traits","combo","reroll","draw","cardEffects","MAGIC","FUNCTION","kind","effectType","ARMOR","valueMode","DODGE","triggers","BARRIER","fixedValue","SILENCE","COLD","MANA_DRAIN","BURN","VULNERABLE","TEMPERATURE_DIFF","BLEED","TEMP_MAX_HP","selfDamage","BIND","restrictedTypes","DEVOUR","POISON","CHARGE","negativeEffect","CORROSION","SWARM","MAX_HP_REDUCTION","CURSE","unplayable","insertCardsToEnemyDeck","SHOCK","manaDrain","STUN","AMBUSH","purgeOnUse","cleanseTypes","REGEN","destroyOnClashWin","CARD_REGISTRY","getCardByName","getAllCards","values","EFFECT_REGISTRY","polarity","timings","stackable","maxStacks","POISON_AMOUNT","DAMAGE_BOOST","WHITE_TURBID","IGNITE_AURA","FATIGUE","NON_LIVING","NON_ENTITY","ILLUSORY_BODY","POINT_GROWTH_BIG","POINT_GROWTH_SMALL","MANA_SPRING","BLOOD_COCOON","INDOMITABLE","PEEP_FORBIDDEN","BLIND_ASH","COGNITIVE_INTERFERENCE","MEMORY_FOG","STURDY","FLAME_ATTACH","POISON_ATTACH","TOXIN_SPREAD","FROST_ATTACH","BLOODBLADE_ATTACH","LIGHTNING_ATTACH","THORNS","INK_CREATION","ELEMENTAL_DEBUFF_TYPES","findEffect","entity","effects","find","e","hasEffect","some","stacks","getEffectStacks","effect","applyEffect","options","normalizedStacks","Math","max","floor","def","existing","nextStacks","temperatureDiffStacks","maxReducible","maxHp","min","hp","prevStacks","actualAdded","lockDecayThisTurn","instanceStacks","instance","undefined","source","push","removeEffect","reduceEffectStacks","amount","removed","processOnTurnStart","result","hpChange","mpChange","trueDamage","opponentHpChange","isStunned","logs","applyToOpponent","poisonAmount","burnStacks","burnDamage","vulnerableStacks","regenStacks","whiteTurbidStacks","manaSpringStacks","projectedMp","mp","frostAttachStacks","processOnTurnEnd","poisonStacks","bindEffect","armorEffect","silenceEffect","stunEffect","canPlayCard","card","baseRawDice","allowed","reason","length","includes","pickCardById","ctx","deck","c","weightedRandom","total","reduce","s","o","weight","roll","random","opt","CARD_BY_ID","buildDeckById","ids","Error","requireCardById","MUXINLAN_CARD","MIMIC_CARD","SWAMP_LURKER_CARD","MIMIC_BUBBLE_CARD","MIST_SPRITE_CARD","VINEWALKER_CARD","SPRING_SPIRIT_CARD","INFILTRATOR_TENTACLE_CARD","CAVE_TENTACLE_CARD","BLISS_BEE_CARD","POLLEN_SPRAYER_CARD","PRIM_CARD","NYMPH_CARD","UNDINE_CARD","MATA_CARD","ROSE_CARD","URSULA_CARD","FLOATING_PAGE_CARD","INK_MOUSE_CARD","INK_SLIME_CARD","WHISPER_GHOST_CARD","BOOK_DEMON_CARD","currentFloor","stats","minDice","maxDice","selectCard","flags","muxinlanOpenedWithCunning","sum","t","playerStats","enemyStats","highMpPool","chosen","lowMpPool","hasUsedHeal","normalCards","pool","vinewalkerOpenedWithLurk","infiltratorTentacleOpenedWithLightningAmbush","caveTentacleOpenedWithLightningAmbush","POLLEN_SPRAYER_ENEMY","pollenSprayerOpenedWithHighPressureSpray","selfHasSwarm","nymphUsedGiantProjection","undineUsedEarthLiquid","playerPoisonAmount","roseOpenedWithPlantDominion","playerHasSilence","playerCorrosion","playerHasBind","turn","STATIC_ENEMY_REGISTRY","ENEMY_NAME_ORDER","keys","getEnemyByName","devourPool","normalPool","getAllEnemyNames","getStacks","eff","RELIC_LIST","hooks","onBattleStart","count","self","addLog","modifyFinalPoint","currentPoint","onTurnEnd","side","restoreMana","restored","addStatusEffect","onTurnStart","addArmor","gained","addRerollCharges","getRerollCharges","onDiceClick","consumeRerollCharge","onDeckShuffle","heal","healed","overflow","overflowToArmor","onAfterHitDealt","targetSide","actualDamage","state","onBeforeApplyEffect","onAfterHitTaken","sourceSide","onBeforeBurnDamage","damage","opponent","current","minimum","need","onAfterBurnDamageTaken","add","isPreview","bonus","isTrueDamage","hasRelic","minDamage","active","triggered","turnCounter","gain","currentHp","cocoonStacks","RELIC_BY_ID","relic","RELIC_BY_NAME","getAllRelics","getRelicById","getRelicByName","LOCAL_FOLDER_IMAGE_FILE_NAMES","getLocalFolderImagePaths","folderPath","normalizedFolderPath","fileNames","fileName","LOCAL_BGM_FILE_NAMES","ENCODED_DUNGEON","encodeURIComponent","ENCODED_BGM_DIR","BGM_TRACK_KEY","BGM_VOLUME_KEY","DEFAULT_BGM_ID","bgmTracksState","ref","bgmVolumeState","bgmTrackIdState","initialized","audioEl","loadedTrackId","resumeListenerBound","currentTrackSources","currentTrackSourceIndex","buildHfTrackUrl","buildLocalTrackUrl","windowsPath","parts","split","root","rest","part","buildTrackSources","sources","Set","createTrack","url","DEFAULT_TRACKS","clampVolume","isFinite","ensureAudio","Audio","preload","loop","volume","addEventListener","nextIndex","src","load","play","catch","bindResumeOnGesture","persistTrackId","localStorage","setItem","applyCurrentTrackToAudio","track","audio","resume","document","once","capture","tryPlay","bootstrapTrackList","async","localTracks","fetchDungeonBackgroundMusicTracks","tracks","sort","a","b","localeCompare","initializeBgm","raw","parsed","parsePersistedVolume","getItem","setBgmVolume","String","bgmTracks","readonly","bgmVolume","bgmTrackId","CODEX_STORAGE_KEY","hasBrowserStorage","window","toUniqueStringArray","Array","isArray","seen","item","normalized","has","sanitizeEnemyEncounters","dedup","area","floorNum","firstSeenAt","Date","now","lastSeenAt","times","set","from","loadCodexState","version","cards","relics","enemies","data","parseCodexState","JSON","parse","saveCodexState","next","stringify","recordEncounteredCards","normalizeCardId","input","before","recordEncounteredRelics","normalizeRelicId","recordEncounteredEffects","effectTypes","normalizeEffectType","FLOOR_MAP","FLOOR_ORDER","FLOOR_NUMBER_MAP","getFloorForArea","floorName","areas","Object","entries","getFloorNumberForArea","toggleFullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","err","console","warn","message","isLeaveOptionLine","line","test","isRebirthOptionLine","extractTag","text","tagName","escapedTagName","regex","RegExp","exec","fullMatch","openTagEnd","firstChar","trimStart","extractTagByPriority","tagNames","content","removeThinkBlock","thinkTagRegex","depth","lastIndex","isClosing","tagStart","tagEnd","filterStreamingTextAfterThinkEnd","closeMatch","removeHtmlComments","extractTucaoBlocks","normalizeTucaoMarkers","openRegex","closeRegex","cursor","openEnd","contentEnd","parseOptions","optionText","parseResponse","cleanText","mainTextRaw","mainText","fallbackTucao","block","optionRaw","summary","updateVarBlock","jsonPatch","variableUpdate","allOptions","hasOptionE","hasLeave","hasRebirth","rawText","extractSummary","messageText","useGameStore","STREAMING_ENABLED_KEY","currentSummary","isGenerating","streamingText","useStreaming","readStreamingEnabledSetting","error","isInitialized","variableUpdateText","isEditing","editingText","statData","saveEntries","isSaveLoadOpen","pendingPortalChanges","pendingCombatMvuChanges","pendingStatDataChanges","AUTO_SUMMARY_TITLE","normalizeSummaryText","formatChronicleContent","lines","entry","resolveAutoSummaryEntryTarget","worldbookNames","charWorldbooks","getCharWorldbookNames","primary","additional","chatWorldbook","getChatWorldbookName","getBoundWorldbookNames","worldbookName","worldbook","getWorldbook","uid","updateAutoSummaryChronicle","assistantMessageId","summaryText","normalizedSummary","chronicleIndex","updateWorldbookWith","nextEntries","delete","idx","upsertChronicleEntry","trimmed","legacyMatch","orderedMatch","parseChronicleContent","render","ensureLatestMessageWindow","maxVisible","lastId","getLastMessageId","visibleWindow","firstVisibleMessageId","messages","getChatMessages","hide_state","updates","shouldHide","message_id","is_hidden","setChatMessages","refresh","syncFloorNumberByArea","mvuData","stat","_","loadLatestAssistantState","role","clean","extractMainText","detectOptionE","detectLeave","detectRebirth","extractVariableUpdate","loadStatData","Mvu","getMvuData","info","applyParsedResponse","refreshLocalStatData","initialize","waitGlobalInitialized","msg","sendAction","userInput","oldMvuData","currentPendingPortalChanges","currentPendingCombatChanges","currentPendingStatDataChanges","userMvuDataAfterPortal","baseMvuData","changes","cloneDeep","stat_data","sd","roomType","enemyName","resetRoomCounter","incrementKeys","nextPath","resetPath","appendPathLabel","normalizedLabel","prototype","hasOwnProperty","call","applyPendingPortalChangesToMvu","userMvuDataAfterCombat","addDefeatMark","base","negativeStatusesAdd","status","goldDelta","currentGold","delta","applyPendingCombatChangesToMvu","userMvuData","fields","assign","applyPendingStatDataChangesToMvu","createChatMessages","streamListener","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_generation_id","generate","user_input","should_stream","stop","newMvuData","parseMessage","display_data","delta_data","newAssistantMessageId","setUseStreaming","enabled","nextEnabled","persistStreamingEnabledSetting","setPendingPortalChanges","setPendingCombatMvuChanges","setPendingStatDataChanges","mergePendingStatDataChanges","loadSaveEntries","messageId","rebuildAutoSummaryChronicleFromMessages","rollbackTo","targetMessageId","idsToDelete","i","deleteChatMessages","toastr","success","rerollCurrent","allMessages","latestMsg","lastUserMsg","reverse","m","startEdit","saveEdit","currentMvuData","prevMvuData","replaceMvuData","cancelEdit","updateStatDataFields","nextMvuData","ShieldCheck","Shield","Link2","x1","x2","y1","y2","Skull","Bug","Droplet","Flame","TriangleAlert","Sword","Heart","Sparkles","Ban","Zap","Snowflake","Waves","Bone","Layers","Battery","Eye","EyeOff","Brain","Leaf","Settings2","Trash2","X","calculateFinalPoint","baseDice","relicModifiers","point","globalMultiplier","globalAddition","calculateFinalDamage","finalPoint","dl","baseValue","calculateRawDamage","cold","attackerEffects","damageBoost","defenderHasNonEntity","defenderEffects","defenderHasIllusoryBody","vuln","sturdy","armor","triggerSwarmReviveIfNeeded","revived","recoverHp","consumeColdAfterDealingDamage","attacker","CircleQuestionMark","RefreshCcw","Footprints","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","disabled","selected","faceDown","isEnemy","maskLevel","emits","setup","__props","typeColorClass","computed","typeIcon","typeIconColor","typeGradient","displayName","displayDescription","displayTypeText","displayInitial","showManaBadge","isRareCard","_ctx","_cache","onClick","$event","$emit","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","__exports__","style","rolling","rollingMin","rollingMax","numberClass","displayValue","interval","gradientId","toString","substr","sizeClass","sm","md","lg","numberSizeClass","borderColor","textColor","numberTextClass","rollRandomInRange","getRollingRange","watch","clearInterval","setInterval","immediate","onUnmounted","offset","points","opacity","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","HF_USER_DIR","HF_MONSTER_DIR","SPEED_SETTING_KEY","FATIGUE_DEGREE_KEY","PLAYER_POISON_LETHAL_NEGATIVE_STATUS","initialPlayerStats","playerDeck","playerActiveSkills","playerRelics","testStartAt999","uiFontFamily","trackDiscovery","emit","__emit","gameStore","currentFloorNumber","floorFromArea","fallback","resolveCurrentFloorNumber","enemyDef","enemyDisplayName","BOSS_FOLDER_NAMES","folderImageCache","folderImagePromiseCache","normalizeRepoPath","path","toResolveUrl","repoPath","seg","pickRandom","items","fetchFolderImages","repoFolderPath","folder","cached","pending","task","images","playerPortraitUrl","enemyPortraitUrl","playerPortraitError","enemyPortraitError","portraitLoaderDisposed","resolveRandomPortrait","fallbackFilePath","randomPath","bgIsLordFallback","bgImageError","HF_BASE","currentArea","currentRoomType","bgImageUrl","suffix","onBgError","aiFlags","reactive","cloneEntityStats","normalizeTestStartStats","cloned","getEffectName","getEffectDescription","createStatusEffectPreview","EFFECT_FA_ICON_CLASS","EFFECT_FA_ICON_STYLE","getEffectFontAwesomeClass","getEffectFontAwesomeStyle","EFFECT_ICON_COMPONENTS","getEffectIconComponent","effectIconBoxClass","playerArmor","enemyArmor","enemyPoisonAmount","playerTempMaxHp","enemyTempMaxHp","playerPoisonAmountPercent","enemyPoisonAmountPercent","playerVisibleEffects","enemyVisibleEffects","cloneCardForBattle","ce","toBattleDeck","enemyDeck","PASS_CARD","combatState","phase","TURN_START","actionsRemaining","playerBaseDice","enemyBaseDice","playerHand","discardPile","enemyDiscard","enemyIntentCard","enemyPredictedPoint","playerSelectedCard","lastPlayedCard","recordCombatDiscoveryAtStart","payload","findIndex","found","recordEncounteredEnemy","recordCombatEffectDiscovery","onMounted","deep","playerTurnRawDice","enemyTurnRawDice","isRolling","showClashAnimation","shatteringTarget","screenShake","impactShake","overlayOpen","settingsOpen","battleSpeedUp","logsCollapsed","pilesCollapsed","battleResultBanner","endCombatPending","enemyIntentConsumedThisTurn","enemyIntentManaSpentThisTurn","combatRootEl","effectTooltip","speedMultiplier","combatFontFamily","combatRootStyle","fontFamily","floatingNumbers","pendingCardNegativeEffects","fatigueDegree","fatigueHelpVisible","fatigueDegreeRatio","fatigueDegreePercent","fatigueBarOpacityRatio","fatigueBarStyle","showFatigueHelp","hideFatigueHelp","queuePlayerLethalNegativeStatus","negativeStatus","log","lightningAmbushFirstUseConsumed","player","enemy","previewPlayerDice","previewEnemyDice","playerDicePreviewLines","enemyDicePreviewLines","playerDicePreviewCardName","enemyDicePreviewCardName","playerDiceUiNoise","enemyDiceUiNoise","comboUiMaskBridge","isUiMaskingActive","PLAYER_INPUT","isPlayerDiceObscured","isEnemyDiceObscured","rerollUiNoise","displayPlayerDice","displayEnemyDice","canPlayerRerollDice","playerDiceRerollCharges","playerDiceRerollHint","playerDicePreviewChanged","enemyDicePreviewChanged","playerDiceNumberClass","enemyDiceNumberClass","dicePreviewPanels","panels","title","enemyIntentMaskLevel","playerHandMaskLevel","playerPlayedCardVisual","resolvedPlayerCardVisual","resolvedEnemyCardVisual","resolvedCardVisualEntries","visual","hoverPreviewTimer","enemyDicePreviewTimer","effectTooltipLongPressTimer","effectTooltipAutoHideTimer","floatingNumberId","handCardKeySeed","playerPlayedCardVisualId","resolvedCardVisualId","animationStopToken","endCombatSequenceToken","enemyManaLackHintTurn","handCardKeys","WeakMap","invalidCardShakeKeys","normalizePersistedInt","setFatigueDegree","addFatigueDegree","NO_RELIC_MOD","activePlayerRelics","aggregated","resolveRelicMap","relicRuntimeState","playerDamageTakenThisTurn","freezePumpTriggersThisTurn","freezeFlowCoreTriggeredThisTurn","sealCircuitPendingMana","modaoStabilizerTriggersThisTurn","bloodpoolSkinMarkTriggersThisTurn","bloodpoolFirstBleedFeastTriggered","bloodpoolCriticalReboundTriggered","nextMagicDoubleCast","nextTurnMagicCostFree","getEntityBySide","getRelicRuntimeState","relicId","hasActiveRelic","getActiveRelicCount","changeRerollCharges","forEachPlayerRelic","callback","logRelicMessage","addPlayerDamageTakenThisTurn","applyPlayerSkinMarkDamageReduction","rawDamage","markCount","reduced","applyPlayerHemostaticValveDamageCap","capped","applyDamageToSideWithRelics","incoming","ae","actual","reviveResult","applyDamageToEntity","applyDirectHpLossWithRelics","adjusted","handlePlayerArmorGainFromSingleEvent","relicCount","restoreManaForSide","addArmorForSide","added","pushFloatingNumber","tryTriggerModaoStabilizer","actualDelta","stabilizerCount","healForSide","healAmpCount","overflowRaw","reflowCount","cap","applyStatusEffectWithRelics","hook","getRelicCount","targetEffectType","targetStacks","applyOptions","shouldAllowStatusEffectWithRelics","hpBeforeApply","applied","sourceTag","fromEnemyCard","freezePumpCount","createPlayerLifecycleContext","triggerPlayerRelicLifecycleHooks","hookName","triggerPlayerRelicBeforeBurnDamageHooks","currentDamage","triggerPlayerRelicAfterBurnDamageTakenHooks","triggerPlayerRelicHitHooks","hitIndex","attemptedDamage","scaleDuration","ms","wait","Promise","resolve","setTimeout","transitionStyle","transitionDuration","withTransition","playerPlayedCardStyle","entered","left","top","transform","transitionProperty","transitionTimingFunction","resolvedCardVisualInnerClass","variant","showEnemyIntentCard","floatingColors","physical","magic","shield","mana","true","floatingNumbersFor","handCardKey","isCardShaking","triggerInvalidCardShake","withoutKey","requestAnimationFrame","resolveTargetSide","removeCardsById","cardId","removeSingleCardById","insertCardIntoDeckRandomly","applyPurgeTraitAfterUse","destroyOpponentCardByTrait","winnerSide","loserCard","changeManaWithShock","ok","requireEnoughForDecrease","showPositiveFloating","lostMp","label","shockStacks","shockDamageLogs","shockEffect","applyShockOnManaLoss","spendManaWithShock","cost","grantNextTurnMagicCostFree","targetTurn","getEffectiveManaCost","isMagicCostFreeThisTurn","discount","hostCount","getSecondMagicCardInPlayerHand","withEffectiveManaCost","triggerBleedProc","targetLabel","bleedStacks","bleedLogs","feastCount","applyBloodbladeAttachOnClash","applyLightningAttachOnDodge","dodgerSide","cardEffectMatchesTrigger","effectTrigger","trigger","applyCardEffectsByTrigger","defender","targetKey","targetEntity","healAmount","beforeMaxHp","beforeHp","actualMaxHpLoss","hpLossByCap","actualMaxHpGain","restoreAmount","manaResult","actualRestore","abs","cleanseTargets","et","applyToxinSpreadOnPhysicalPlay","spreadOwnerSide","spreadStacks","applyAmbushOnCardPlay","ambushOwnerSide","ambushOwner","withFirstUseLightningAmbushBonus","shouldConsume","consume","shouldAnnounce","announce","boosted","poisonAmountImmediateCheckRunning","applyImmediatePoisonAmountLethalCheck","poisonLogs","poisonLog","rollIntInRange","low","high","applyHitAttachEffects","defenderSide","flameStacks","consumeChargeOnRoll","rolled","chargeStacks","fatigueStacks","clearDicePreview","clearTimeout","clearPlayerPlayedCard","stopAllCardAnimations","getCardFinalPoint","entityEffects","lostHp","formatPointValue","rounded","round","isInteger","trunc","toFixed","buildCardPreviewLines","multiplierText","additionText","after","roundedInt","formatRelicPointDelta","getCardPreviewPoint","handlePlayerCardHoverEnd","handlePlayerCardTouchEnd","rollDiceInRange","handlePlayerDiceClick","chargesBeforeHooks","rerolled","currentDice","rerolledRaw","showEnemyDicePreview","previewCard","preview","hideEnemyDicePreview","handleEnemyDiceHoverStart","handleEnemyDiceHoverEnd","handleEnemyDiceTouchStart","handleEnemyDiceTouchEnd","clearEffectTooltipTimers","showEffectTooltipForTarget","align","rootRect","getBoundingClientRect","rect","right","showEffectTooltip","event","currentTarget","hideEffectTooltip","handleEffectTouchStart","handleEffectTouchEnd","sign","duration","colorClass","leftOffset","topOffset","notifyEnemyManaInsufficient","pushFloatingText","relicSummary","stored","loadFatigueDegree","playerUrl","enemyFolderPath","enemyFallback","shouldPreferFolder","enemyUrl","folderImages","randomEnemy","initPortraitUrls","drawCards","currentDeck","currentDiscard","discard","drawn","pop","newDeck","newDiscard","normalizedPlayerActiveSkills","activeSkillRuntime","nextAvailableTurn","usedCount","activeSkillCooldownRemaining","runtime","activeSkillDisabledReason","cooldown","maxUses","playerActiveSkillSlots","cooldownRemaining","getActiveSkillStatusText","slot","rerollSideDiceByActiveSkill","skillName","rawRoll","handCardClass","isSelected","getDisplayHandCard","applyFatigueDegreePenaltyOnTurnStart","opponentSide","opponentStats","poisonAmountBeforeTurnStart","hpBeforeTurnStart","poisonAmountLethalTriggered","turnStartLogs","burnDamageTaken","burnIsTrueDamage","turnStartImmediateDamageTaken","turnStartTrueDamageTaken","pendingRegenHeal","regenLog","regenMatch","growthBigStacks","growthSmallStacks","hpBeforeOpponent","actualOpponentHpDelta","burnLog","burnMatch","rawBurnDamage","burnResult","burnApplyLogs","burnApplyLog","inkCreationStacks","extraTrueDamage","inkCreationLogs","inkCreationLog","residualHpChange","hpBeforeTrueDamage","turnStartDamageTaken","reviveLog","l","reverseCircuitCount","hpLoss","actualHpLoss","scaleRingCount","DRAW_PHASE","pulseMarkCount","pulseDamage","pulseLogs","pulseLog","pRawRoll","eRawRoll","pRoll","eRoll","startTurn","eCard","selectedCard","runtimeCard","check","selectEnemyCard","handleCardSelect","handIdx","played","splice","token","showPlayerPlayedCard","RESOLUTION","handleSkipTurn","resolveCombat","pCard","pDice","eDice","resolvedPlayerCard","resolvedEnemyCard","shouldClash","card1","card2","t1","t2","ignoreDodge","isClashable","clashBypassedByIgnoreDodge","playerSkippedTurn","enemySkippedTurn","resolvedPlayerDice","resolvedEnemyDice","rerollByTrait","sourceLabel","targetStats","pClashPoint","eClashPoint","clearBurnForSide","pSuccess","eSuccess","resultMsg","clashWinner","successfulDodger","pointMarkCount","executeCard","defenderLabel","opponentSkippedTurn","enemyColdBeforeAction","playerBurnBeforeAction","playerHpBeforeAction","relicTrackingHandled","impactDelay","animDuration","playResolvedCardAnimation","applyCardExtraAttributes","baseAmount","resolveCardSelfDamage","rawAmount","actualSelfDamage","drainResult","drainedMana","overflowHpDamage","actualOverflowHpDamage","gainResult","gainedMana","overflowDamageText","finalizeCardExecution","queueCardNegativeEffectForPlayer","toInsert","cardName","inserted","battleCard","applyInsertTrait","finalizeAndTrack","enemyColdAfterAction","frostStorageCount","abyssRiftCount","actualTrueDamage","playerBurnAfterAction","heatExchangeCount","triggerPostActionRelicTracking","syncCurrentPointForUi","nextPoint","applyCardEffects","triggerLowTempEngraverOnFunctionPlay","attackerRatio","defenderRatio","nextAttackerHp","nextDefenderHp","attackerDelta","defenderDelta","defenderRevive","attackerRevive","selfBleed","triggerTimes","removedStacks","coldStacks","currentElementals","picked","currentCorrosion","addStacks","selfElementals","hadIllusoryBody","triggerCount","burned","armorStacks","consumedArmor","cycles","consumedCold","currentMp","consumedMp","armorGain","actualArmorGain","armorBefore","wagerCost","beforeBoost","actualBoostGain","missingHp","consumedBurn","applyEffectsBeforeAttack","burnStacksOnDefender","baseHitCount","defenderSwarmStacks","extraHitCount","arcaneLanceBonusHit","availableMp","bonusHits","totalHitCount","currentCold","modaoMagicSwordTotalDamage","totalActualDamageDealt","hit","cardForCalculation","customDamage","dmgLogs","adjustedDamage","applyLogs","hitPrefix","damageLogColorClass","damageKind","reflectedDamage","actualReflectedDamage","reflectedLogs","reflectedLog","coldLogs","coldLog","maxHpGain","corrosionStacks","bleedDamage","targetCorrosion","playerSuppress","enemySuppress","applyPointSuppressBeforeQueue","queue","deferredEnemyAction","enemyAction","typePriority","executeActionWithMagicEcho","action","every","all","playerArmorBeforeEnd","pEndLogs","eEndLogs","playerArmorAfterEnd","armorLostOnDecay","sealCircuitCount","reverseShellCount","magicDollCount","dollLogs","nextHp","prevHp","halfHp","crossedHalf","resonanceCount","reboundCount","pHp","eHp","win","WIN","LOSE","finalPlayerStats","runEndCombatSequence","ref_key","alt","onError","args","onMouseenter","onMouseleave","panel","DungeonCard","onTouchstartPassive","onTouchend","onTouchcancel","DungeonDice","popup","animationDuration","onFocus","onBlur","disabledReason","replaceIdx","replaced","innerHTML","isOpen","panelClass","to","$slots","RotateCcw","RefreshCw","Pencil","confirmTarget","isManualSummaryRunning","doRollback","handleReroll","handleEdit","handleManualSummary","writtenCount","warning","DungeonModal","onClose","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137","_hoisted_138","_hoisted_139","_hoisted_140","_hoisted_141","_hoisted_142","_hoisted_143","_hoisted_144","_hoisted_145","_hoisted_146","_hoisted_147","_hoisted_148","_hoisted_149","_hoisted_150","_hoisted_151","_hoisted_152","_hoisted_153","_hoisted_154","_hoisted_155","_hoisted_156","_hoisted_157","_hoisted_158","_hoisted_159","_hoisted_160","_hoisted_161","_hoisted_162","_hoisted_163","_hoisted_164","_hoisted_165","_hoisted_166","_hoisted_167","_hoisted_168","_hoisted_169","_hoisted_170","_hoisted_171","_hoisted_172","_hoisted_173","_hoisted_174","_hoisted_175","_hoisted_176","_hoisted_177","_hoisted_178","_hoisted_179","_hoisted_180","_hoisted_181","_hoisted_182","_hoisted_183","_hoisted_184","_hoisted_185","_hoisted_186","_hoisted_187","_hoisted_188","_hoisted_189","_hoisted_190","_hoisted_191","_hoisted_192","_hoisted_193","_hoisted_194","_hoisted_195","_hoisted_196","_hoisted_197","_hoisted_198","_hoisted_199","_hoisted_200","_hoisted_201","_hoisted_202","_hoisted_203","_hoisted_204","_hoisted_205","_hoisted_206","_hoisted_207","_hoisted_208","_hoisted_209","_hoisted_210","_hoisted_211","_hoisted_212","_hoisted_213","_hoisted_214","_hoisted_215","_hoisted_216","_hoisted_217","_hoisted_218","_hoisted_219","_hoisted_220","_hoisted_221","_hoisted_222","_hoisted_223","_hoisted_224","_hoisted_225","_hoisted_226","_hoisted_227","_hoisted_228","_hoisted_229","_hoisted_230","_hoisted_231","_hoisted_232","_hoisted_233","_hoisted_234","_hoisted_235","_hoisted_236","_hoisted_237","_hoisted_238","_hoisted_239","_hoisted_240","_hoisted_241","_hoisted_242","_hoisted_243","_hoisted_244","_hoisted_245","_hoisted_246","_hoisted_247","_hoisted_248","_hoisted_249","_hoisted_250","_hoisted_251","_hoisted_252","_hoisted_253","_hoisted_254","_hoisted_255","_hoisted_256","_hoisted_257","_hoisted_258","_hoisted_259","_hoisted_260","_hoisted_261","_hoisted_262","_hoisted_263","_hoisted_264","_hoisted_265","_hoisted_266","_hoisted_267","_hoisted_268","_hoisted_269","_hoisted_270","_hoisted_271","_hoisted_272","_hoisted_273","_hoisted_274","_hoisted_275","_hoisted_276","_hoisted_277","_hoisted_278","_hoisted_279","_hoisted_280","_hoisted_281","_hoisted_282","_hoisted_283","_hoisted_284","_hoisted_285","_hoisted_286","_hoisted_287","_hoisted_288","_hoisted_289","_hoisted_290","_hoisted_291","_hoisted_292","_hoisted_293","OVERLAY_STATE_KEY","BG_OPACITY_KEY","MAP_CELL_SIZE","MAP_SCALE_STEP","VICTORY_REWARD_SKIP_ACTION_TEXT","SidebarIcon","defineComponent","icon","required","tooltipSide","highlight","WizardHatIcon","activeModal","inputText","isVariableUpdateOpen","isStatusOpen","showCombat","combatEnemyName","showShopView","showIdolView","shopProducts","shopBuying","shopSpentGold","shopPurchasedItems","shopRobClickCount","shopRobbing","shopSessionKey","showChestView","chestStage","chestRolling","chestRewardRelics","chestRewardCollectedFlags","chestCollecting","chestRewardVisible","chestOpenedBgReady","chestPortalChoices","chestRewardCountFixed","chestCloseCount","chestForceMimicNextOpen","hotSpringCleanseMessage","idolDiceValue","idolDiceRolling","idolAssignedTarget","idolSnapPreviewTarget","idolDicePosition","idolDiceStageRef","idolDiceRef","idolSlotMaxHpRef","idolSlotMpRef","idolSlotGoldRef","idolDragPointerId","idolDragStart","idolDragStartPos","combatTestStep","selectedTestDeck","selectedTestEnemy","selectedTestRelicCounts","selectedCardCategoryTab","selectedRelicCategoryTab","activeCombatContext","pendingCombatNarrative","dispatchedCombatNarrativeIds","showVictoryRewardView","victoryRewardStage","victoryRewardOptions","selectedVictoryRewardCard","rewardApplying","rewardRefreshUsed","rewardIsNormalEnemy","relicTooltip","combatTestStartAt999","combatTestStartAt999CurrentBattle","chestMimicTimer","chestRewardFadeTimer","chestCloseLongPressTimer","shopRobTimer","hotSpringCleanseTimer","idolRollTimer","relicTooltipLongPressTimer","relicTooltipAutoHideTimer","hotSpringCleanseMessageId","isRestoringOverlayState","bondFolderImageCache","bondFolderImagePromiseCache","bondPortraitUrls","bondPortraitErrors","bondPortraitLoadTasks","bondPortraitPreview","bondPortraitLoaderDisposed","clampBondAffection","n","bondRoleEntries","rolesRaw","affection","bondEntries","portraitUrl","characterName","affectionAbsRatio","ensureBondPortraitLoaded","trimmedName","fallbackPath","resolveCharacterPortraitUrl","closeBondPortraitPreview","HF_BG_BASE","bgArea","bgRoomType","bgOverlayOpacity","parseFloat","v","CHEST_BG_CLOSED","CHEST_BG_OPENED","CHEST_BG_MIMIC","idolBackgroundUrl","shopBackgroundUrl","shopMerchantPortraitUrl","chestBackgroundUrl","IDOL_BLESSING_CONFIG","slotLabel","statueName","rewardText","dice","gold","allCardsForTest","cardByIdMap","relicByIdMap","CATEGORY_ORDER","compareCategory","orderA","orderB","CARD_TYPE_ORDER_FOR_TEST","cardCategoryGroupsForTest","grouped","typeOrderA","typeOrderB","cardCategoryTabsForTest","group","filteredCardCategoryGroupsForTest","MAGIC_BOOK_COVER_BASE","getMagicBookCoverUrl","bookName","carryableMagicBookNames","rawCarriedMagicBooks","carriedMagicBooks","available","carriedMagicBookSet","selectableRelicPool","categorySet","muxinlanFavor","roles","safe","shopDiscountRate","shopRobBtnOpacity","parseMerchantDefeatedValue","isMerchantDefeated","canEditMagicBooks","magicBookSidebarIcon","magicHatSidebarIcon","isUpdatingMagicBooks","magicBooksNavTab","selectedStartingActiveSlot","isUpdatingStartingActiveSkills","isUpgradingMagicHat","getSafeInt","calcUpgradeLevel","step","maxLevel","level","magicHatSkillPoints","magicHatTracks","hpValue","mpValue","goldValue","hpLevel","mpLevel","goldLevel","hpIsMax","mpIsMax","goldIsMax","currentValue","currentLevel","nextValue","nextCost","isMax","progressPercent","barClass","openMagicBookModal","openMagicHatModal","cardByNameForTest","activeSkillsForBattle","activeSkillByIdMap","activeSkillByNameMap","startingActiveSkillOptions","startingActiveSkillEntries","isSkillEquippedInStartingActive","EXCLUDED_VICTORY_REWARD_CARD_IDS","EXCLUDED_VICTORY_REWARD_ACTIVE_SKILL_IDS","rewardCardPool","filtered","rewardActiveSkillPool","rewardDeckReplaceEntries","rewardActiveReplaceEntries","selectedTestDeckCards","allEnemyNamesForTest","baseRelicsForTest","categoryDiff","relicCategoryGroupsForTest","relicCategoryTabsForTest","filteredRelicCategoryGroupsForTest","tabs","keepSet","nextUrls","nextErrors","hasError","getCardTypeBadgeClass","isActiveSkillReward","getCardCategoryStripClass","resolvedDeck","skills","resolvedActiveSkills","relicEntries","getOwnedRelicCountById","byName","byId","safeByName","safeById","BLOODPOOL_PASSIVE_MAX_HP_RELICS","bloodpoolPassiveMaxHpBonus","canRefreshVictoryReward","chestRewardEntries","clearRelicTooltipTimers","showRelicTooltipForTarget","innerWidth","showRelicTooltip","hideRelicTooltip","handleRelicTouchStart","handleRelicTouchEnd","showChestRewardTooltip","combatRelicMap","products","modal","nextTick","centerMapOnLatestNode","editable","selectedRelicTotalCount","textSettings","fontSize","lineHeight","containerWidth","isStreamingEnabled","selectedBgmTrackId","trackId","bgmVolumePercent","displayText","MAP_ROOM_VISUAL_BY_LABEL","border","currentFloorPath","rawPath","currentLayerRoomCount","rawCount","mapViewportRef","mapScale","mapOffsetX","mapOffsetY","mapDragPointerId","mapDragStartClient","mapDragStartOffset","mapPathNodes","row","positionInRow","MAP_PATH_COLUMNS","centerX","centerY","background","mapContentWidth","mapContentHeight","mapPathLines","nodes","prev","curr","mapCanvasStyle","transformOrigin","resetScale","viewport","latest","focusX","focusY","clientWidth","clientHeight","zoomMap","nextScale","worldX","worldY","handleMapZoomIn","handleMapZoomOut","handleMapResetView","handleMapWheel","deltaY","handleMapPointerDown","pointerType","button","pointerId","clientX","clientY","setPointerCapture","handleMapPointerMove","dx","dy","handleMapPointerUp","releasePointerCapture","inlineMarkRegex","headerMarkRegex","tucaoOpenTagRegex","tucaoCloseTagRegex","tucaoExpandedState","isQuotedText","parseInlineSegments","keyPrefix","segments","segmentIndex","markedText","endsWith","innerText","parseTextLines","parseStoryLine","storyContentState","tucaoSections","openMatch","sectionIndex","openStart","plainPart","nextCursor","tucaoKey","parsedTucaoLines","tail","parseStoryContent","storyMainLines","storyTucaoSections","sections","validKeys","section","nextState","isTucaoExpanded","displayHp","toNonNegativeInt","displayMaxHp","baseMaxHp","displayMp","displayGold","displayMinDice","displayMaxDice","idolDiceMin","idolDiceMax","hpPercent","mpPercent","idolRewardSummary","config","handleSendInput","REBIRTH_STARTER_DECK","HOT_SPRING_CLEANSE_LINES","handleRebirthClick","closeShopView","closeChestView","closeIdolView","initialMaxHp","initialMp","initialGold","currentSkillPoints","buildRebirthResetFields","ROOM_TYPE_CONFIG","bgColor","glowColor","specialOptionConfig","isTreasureRoomContext","isShopContext","isHotSpringRoomContext","isIdolRoomContext","isCombatRoomContext","sanitizeCombatLogLine","buildCombatNarrative","context","ordered","formatCombatLogs","sendCombatNarrativeOnce","narrative","applyMerchantDefeatedShopState","finalPrice","pickUniqueRewardItem","usedIds","candidates","buildVictoryRewardOptions","isLordRoom","isNormalEnemy","hasRainbowCard","hasGoldenCard","optionCount","rareChance","rarePool","pickRare","refreshVictoryRewardOptions","finalizeVictoryRewardFlow","skipReward","exitVictoryRewardFlow","replaceDeckCardWithReward","getRarityBasePrice","rollShopRarity","toRelicTooltipEntry","showShopProductTooltip","getCurrentShopSessionKey","resetShopSession","openShopView","clearShopRobTimer","nextSessionKey","favorForCount","targetCount","usedNames","discountRate","targetRarity","pickOne","basePrice","ceil","sold","generateShopProducts","buildNextRelicInventory","pickedRelic","baseInventory","rawRelics","nextRelics","exitShop","purchased","baseGold","nextGold","fallbackNext","lootedText","report","purchasedText","handleShopRobClick","clearChestMimicTimer","clearChestRewardFadeTimer","clearChestCloseLongPressTimer","clearHotSpringCleanseTimer","useHotSpringCleanse","showHotSpringCleanseText","clearIdolRollTimer","handleChestBgLoaded","clampNumber","getIdolSlotElement","getIdolSnapCandidate","stageEl","diceEl","stageRect","diceRect","maxX","maxY","diceCenterX","diceCenterY","best","targets","slotEl","slotRect","slotCenterX","slotCenterY","distance","hypot","snapX","snapY","openIdolView","rollIdolDiceValue","placeIdolDiceAtStart","handleIdolDicePointerDown","handleIdolDicePointerMove","nextX","nextY","candidate","handleIdolDicePointerUp","exitIdolView","reward","currentMaxHp","buildIdolPendingFields","rollChestRewardRarity","rarityRoll","queueChestMimicCombatTransition","closeOpenedChestForRefresh","flag","handleChestContextMenu","handleChestTouchStart","handleChestTouchEnd","handleChestCenterClick","rewardCount","rewards","candidatePool","pickChestRewardRelics","generated","generatePortals","availableRoomTypes","getAvailablePortalRoomTypes","rollPortalCount","pickWeightedRoomTypes","rt","isFloorTransition","PORTAL_ROOM_VISUALS","generateChestLeavePortals","handleSpecialOption","bloodPoolCount","fullHp","pickLordMonsterByArea","pickBattleMonsterByArea","startCombatFromSpecialOption","persistOverlaySnapshot","snapshot","chest","stage","rewardRelicIds","rewardCollectedFlags","collecting","rewardVisible","openedBgReady","portalChoices","portal","rewardCountFixed","closeCount","forceMimicNextOpen","shop","spentGold","purchasedItems","robClickCount","robbing","idol","diceValue","diceRolling","assignedTarget","snapPreviewTarget","dicePosition","victory","optionRewardIds","selectedRewardId","refreshUsed","removeItem","restoreOverlaySnapshot","choices","resolved","areaName","resolvePersistedPortalChoices","product","price","victoryData","optionCardIds","selectedId","selectedCardId","restoredStage","FLOOR_MONSTER_CONFIG","common","uniqueByArea","LORD_MONSTER_ORDER","LORD_MONSTER_BY_AREA","areaOrder","floorConfig","mapping","lordName","COMMON_MONSTER_RATE_BY_FLOOR","arr","commonPool","uniquePool","commonRate","PORTAL_ROOM_TYPES","PORTAL_ROOM_WEIGHTS","TRAP_POOL_BY_AREA","ALL_TRAPS","flat","withoutShop","AREA_PORTAL_VISUAL","cachedPortals","cachedPortalFingerprint","roomTypes","weightedPool","totalWeight","roomsPassed","isStartArea","targetFloor","getNextFloor","j","shuffle","bossChance","fingerprint","ROOM_STAT_KEY","buildQueuedPortalAction","enterText","actionText","statKey","encounterMonster","trapName","pickTrapByArea","trapHpAfterDamage","pendingStatDataFields","openSaveLoad","openVariableUpdate","getSelectedTestRelicCount","setSelectedTestRelicCount","buildSelectedRelicPayload","openCombatTestBuilder","availableCardNames","availableRelicNames","presetDeck","presetRelicsRaw","presetRelics","confirmCombatTestDeck","confirmCombatTestEnemyAndStart","handleCombatEnd","finalStats","negativeEffects","hpRaw","hasHp","finalMaxHpRaw","hasFinalMaxHp","floorRaw","goldReward","stomachMarkCount","stomachBonus","passiveMaxHpBonus","normalizedNegativeEffects","combatMaxHp","maxHpAfterBattle","queueCombatMvuSync","startVictoryRewardFlow","onBeforeUnmount","backgroundColor","maxWidth","segment","option","stripped","boxShadow","placeholder","onKeydown","stdDeviation","in","onWheel","onPointerdown","onPointermove","onPointerup","onPointercancel","node","loading","nextBooks","slotIdx","conflictSlot","previous","number","SaveLoadPanel","onContextmenu","onLoad","collectedRelics","mergedPendingStatDataFields","relicNameText","CombatView","onEndCombat","onOpenDeck","onOpenRelics","Play","Star","isVisible","splashBackgrounds","currentBackgroundUrl","incomingBackgroundUrl","outgoingBackgroundUrl","isIncomingVisible","isOutgoingVisible","isBackgroundTransitioning","backgroundFadeTimer","backgroundTransitionToken","pickRandomBackground","exclude","switchBackground","nextUrl","settled","finish","img","Image","onload","onerror","aspectRatio","backgroundImage","CARD_TYPE_ORDER","RELIC_RARITY_ORDER","PAGE_SIZE","activeTab","currentPage","flipName","codex","cardFilter","relicFilter","enemyFloorFilter","statusFilter","encounteredCardIds","encounteredRelicIds","encounteredEffectTypes","encounteredEnemyNames","allCards","categoryComp","typeComp","cardCategories","filteredCards","allRelics","rarityComp","relicCategories","filteredRelics","allEffects","faClass","faStyle","order","kindComp","filteredEffects","ENEMY_FLOOR_HINT","allEnemies","encounters","areaLabel","floorLabel","fallbackPortraitUrl","deckCardNames","enemyFloorItems","filteredEnemies","sideTitle","sideItems","currentFilter","totalItems","totalPages","pageKey","pageStart","pageEnd","pagedCards","pagedRelics","pagedEffects","pagedEnemies","prevPage","nextPage","pages","portraitMap","portraitErrorMap","folderCache","folderPromise","ensurePortraits","open","tab","appState","isCollectionOpen","startGame","pause","SplashScreen","onStart","onToggleFullscreen","onOpenCollection","GameView","onBackToSplash","WitchCollectionModal","$","app","createApp","App","use","mount","on","unmount"],"sourceRoot":""}