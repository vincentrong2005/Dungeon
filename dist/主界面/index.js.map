{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/hasA11yProp.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/isEmptyString.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/mergeClasses.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toKebabCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toPascalCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toCamelCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/Icon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/lock.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/scroll.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/box.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/map.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/maximize.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book-open.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/file-text.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/send.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/activity.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/dices.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/coins.js","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//battle/cardRegistry.ts","src://tavern_helper_template/src//battle/effects.ts","src://tavern_helper_template/src//battle/enemyRegistry.ts","src://tavern_helper_template/src//battle/relicRegistry.ts","src://tavern_helper_template/src//floor.ts","src://tavern_helper_template/src//fullscreen.ts","src://tavern_helper_template/src//responseParser.ts","src://tavern_helper_template/src//gameStore.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/link-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/skull.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bug.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/droplet.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/flame.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/triangle-alert.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/heart.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/ban.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/zap.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/snowflake.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bone.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/layers.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/battery.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/waves.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/eye-off.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/brain.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/trash-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/x.js","src://tavern_helper_template/src//battle/algorithms.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/circle-question-mark.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sword.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/footprints.js","src://tavern_helper_template/src//components/DungeonCard.vue","webpack://tavern_helper_template/src//components/DungeonCard.vue?fd36","src://tavern_helper_template/src//components/DungeonDice.vue","webpack://tavern_helper_template/src//components/DungeonDice.vue?4d80","webpack://tavern_helper_template/./src//components/CombatView.vue?260e","webpack://tavern_helper_template/src//components/CombatView.vue?359a","src://tavern_helper_template/src//components/DungeonModal.vue","webpack://tavern_helper_template/src//components/DungeonModal.vue?bc30","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/pencil.js","src://tavern_helper_template/src//components/SaveLoadPanel.vue","webpack://tavern_helper_template/src//components/SaveLoadPanel.vue?6d12","webpack://tavern_helper_template/./src//components/GameView.vue?fd3b","webpack://tavern_helper_template/src//components/GameView.vue?b90d","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/play.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/star.js","src://tavern_helper_template/src//components/SplashScreen.vue","webpack://tavern_helper_template/src//components/SplashScreen.vue?b8bd","webpack://tavern_helper_template/./src//App.vue?40f8","webpack://tavern_helper_template/src//App.vue?bf93","src://tavern_helper_template/src//index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasA11yProp };\n//# sourceMappingURL=hasA11yProp.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString };\n//# sourceMappingURL=isEmptyString.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses };\n//# sourceMappingURL=mergeClasses.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { toKebabCase };\n//# sourceMappingURL=toKebabCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { toCamelCase } from './toCamelCase.js';\n\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\n\nexport { toPascalCase };\n//# sourceMappingURL=toPascalCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\n\nexport { toCamelCase };\n//# sourceMappingURL=toCamelCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { hasA11yProp } from './shared/src/utils/hasA11yProp.js';\nimport { isEmptyString } from './shared/src/utils/isEmptyString.js';\nimport { mergeClasses } from './shared/src/utils/mergeClasses.js';\nimport { toKebabCase } from './shared/src/utils/toKebabCase.js';\nimport { toPascalCase } from './shared/src/utils/toPascalCase.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      ),\n      ...!slots.default && !hasA11yProp(props) && { \"aria-hidden\": \"true\" }\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Book = createLucideIcon(\"book\", [\n  [\n    \"path\",\n    {\n      d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20\",\n      key: \"k3hazp\"\n    }\n  ]\n]);\n\nexport { Book as default };\n//# sourceMappingURL=book.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scroll = createLucideIcon(\"scroll\", [\n  [\"path\", { d: \"M19 17V5a2 2 0 0 0-2-2H4\", key: \"zz82l3\" }],\n  [\n    \"path\",\n    {\n      d: \"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3\",\n      key: \"1ph1d7\"\n    }\n  ]\n]);\n\nexport { Scroll as default };\n//# sourceMappingURL=scroll.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Box = createLucideIcon(\"box\", [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"book-open\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"file-text\", [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dices = createLucideIcon(\"dices\", [\n  [\"rect\", { width: \"12\", height: \"12\", x: \"2\", y: \"10\", rx: \"2\", ry: \"2\", key: \"6agr2n\" }],\n  [\n    \"path\",\n    { d: \"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6\", key: \"1o487t\" }\n  ],\n  [\"path\", { d: \"M6 18h.01\", key: \"uhywen\" }],\n  [\"path\", { d: \"M10 14h.01\", key: \"ssrbsk\" }],\n  [\"path\", { d: \"M15 6h.01\", key: \"cblpky\" }],\n  [\"path\", { d: \"M18 9h.01\", key: \"2061c0\" }]\n]);\n\nexport { Dices as default };\n//# sourceMappingURL=dices.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coins = createLucideIcon(\"coins\", [\n  [\"circle\", { cx: \"8\", cy: \"8\", r: \"6\", key: \"3yglwk\" }],\n  [\"path\", { d: \"M18.09 10.37A6 6 0 1 1 10.34 18\", key: \"t5s6rm\" }],\n  [\"path\", { d: \"M7 6h1v4\", key: \"1obek4\" }],\n  [\"path\", { d: \"m16.71 13.88.7.71-2.82 2.82\", key: \"1rbuyh\" }]\n]);\n\nexport { Coins as default };\n//# sourceMappingURL=coins.js.map\n","// \n//    \n// \n\n//   \nexport enum CardType {\n  PHYSICAL = '',\n  MAGIC = '',\n  FUNCTION = '',\n  DODGE = '',\n  CURSE = '',\n}\n\nexport type CardRarity = '' | '';\n\n//   \n/**  */\nexport type DamageMode = 'relative' | 'fixed' | 'mixed';\n\n/**\n * \n * - relative:  = FinalPoint * scale + scaleAddition\n * - fixed:     = value\n * - mixed:     = baseValue + FinalPoint * scale + scaleAddition\n */\nexport interface DamageLogic {\n  mode: DamageMode;\n  /** relative / mixed:  += FinalPoint * scale */\n  scale?: number;\n  /** relative / mixed:  += scaleAddition */\n  scaleAddition?: number;\n  /** fixed:  */\n  value?: number;\n  /** mixed:  */\n  baseValue?: number;\n}\n\n//   \nexport type RerollTarget = 'self' | 'enemy' | 'none';\n\nexport interface CardTraits {\n  /**  */\n  combo: boolean;\n  /**  */\n  reroll: RerollTarget;\n  /**  */\n  draw: boolean;\n  /**  */\n  unplayable?: boolean;\n  /**  */\n  destroyOnClashWin?: boolean;\n  /**  */\n  insertCardsToEnemyDeck?: string[];\n  /**  */\n  purgeOnUse?: boolean;\n}\n\n//   \nexport interface CardCalculation {\n  /**  1.0 */\n  multiplier: number;\n  /**  0 */\n  addition: number;\n}\n\n//   \n\n/**  */\nexport type EffectValueMode = 'fixed' | 'point_scale';\n\n/**  */\nexport interface CardEffect {\n  /**  */\n  kind:\n    | 'apply_buff'     //  Buff/Debuff\n    | 'heal'           // \n    | 'restore_mana'   // \n    | 'cleanse';       //  Debuff\n\n  //  apply_buff  \n  /** kind = apply_buff  */\n  effectType?: EffectType;\n  /** self = enemy =  */\n  target?: 'self' | 'enemy';\n  /**  */\n  restrictedTypes?: CardType[];\n\n  //   \n  /** fixed = point_scale = FinalPoint * scale */\n  valueMode: EffectValueMode;\n  /** fixed  */\n  fixedValue?: number;\n  /** point_scale / = FinalPoint * scale */\n  scale?: number;\n\n  //  cleanse  \n  /**  Debuff kind = cleanse  */\n  cleanseTypes?: EffectType[];\n}\n\n//   \nexport interface CardData {\n  id: string;\n  name: string;\n  type: CardType;\n  /**  */\n  category: string;\n  /**  */\n  rarity: CardRarity;\n  /**  Type ==   0 */\n  manaCost: number;\n  /**  */\n  calculation: CardCalculation;\n  /**  */\n  damageLogic: DamageLogic;\n  /** 1 */\n  hitCount?: number;\n  /**  */\n  traits: CardTraits;\n  /**  */\n  cardEffects: CardEffect[];\n  /**  */\n  description: string;\n  /**  */\n  image?: string;\n}\n\n//  /Buff  \nexport enum EffectType {\n  /**    -1 */\n  BARRIER = '',\n  /**    */\n  ARMOR = '',\n  /**    */\n  BIND = '',\n  /**    3 / */\n  DEVOUR = '',\n  /**    */\n  POISON = '',\n  /**    */\n  POISON_AMOUNT = '\\u4e2d\\u6bd2\\u91cf',\n  /**   300 */\n  CORROSION = '',\n  /**    */\n  BURN = '',\n  /**    */\n  BLEED = '',\n  /**    */\n  VULNERABLE = '',\n  /**    */\n  REGEN = '',\n  /**    */\n  IGNITE_AURA = '',\n  /**    */\n  STUN = '',\n  /**    */\n  CHARGE = '',\n  /**    */\n  COLD = '',\n  /**    */\n  NON_LIVING = '',\n  /**   50% */\n  NON_ENTITY = '',\n  /**    */\n  MAX_HP_REDUCTION = '',\n  /**  3+1 */\n  POINT_GROWTH_BIG = '',\n  /**  3+1 */\n  POINT_GROWTH_SMALL = '',\n  /**    */\n  MANA_DRAIN = '',\n  /**   + */\n  MANA_SPRING = '',\n  /**   1 */\n  SWARM = '',\n  /**   11 */\n  INDOMITABLE = '',\n  /**   UIdebuff */\n  PEEP_FORBIDDEN = '',\n  /**   UIdebuff */\n  BLIND_ASH = '',\n  /**   debuff */\n  COGNITIVE_INTERFERENCE = '',\n  /**   /debuff */\n  MEMORY_FOG = '',\n  /**   -1 */\n  SILENCE = '',\n  /**   1 */\n  STURDY = '',\n  /**    */\n  SHOCK = '',\n  /**    */\n  FLAME_ATTACH = '',\n  /**    */\n  POISON_ATTACH = '',\n  /**    */\n  TOXIN_SPREAD = '',\n  /**   /1-1 */\n  AMBUSH = '',\n  /**    */\n  FROST_ATTACH = '',\n  /**    */\n  BLOODBLADE_ATTACH = '',\n  /**    */\n  LIGHTNING_ATTACH = '',\n}\n\n/**  */\nexport type EffectPolarity = 'buff' | 'debuff' | 'mixed' | 'trait' | 'special';\n\n//   \nexport interface EffectInstance {\n  type: EffectType;\n  /**  /  */\n  stacks: number;\n  /**  */\n  polarity: EffectPolarity;\n  /**  */\n  lockDecayThisTurn?: boolean;\n  /**\n   * \n   *  ['', ''] \n   */\n  restrictedTypes?: CardType[];\n  /** / */\n  source?: string;\n}\n\n//   \nexport enum GamePhase {\n  EXPLORE = 'EXPLORE',\n  COMBAT = 'COMBAT',\n}\n\n//   \nexport enum CombatPhase {\n  /**  */\n  TURN_START = 'TURN_START',\n  /**  */\n  DRAW_PHASE = 'DRAW_PHASE',\n  /**  */\n  INTENT_PREVIEW = 'INTENT_PREVIEW',\n  /**  */\n  PLAYER_INPUT = 'PLAYER_INPUT',\n  /**  */\n  RESOLUTION = 'RESOLUTION',\n  /**  */\n  DISCARD_PHASE = 'DISCARD_PHASE',\n  /**  */\n  TURN_END = 'TURN_END',\n  /**  */\n  WIN = 'WIN',\n  /**  */\n  LOSE = 'LOSE',\n}\n\n//   \nexport interface EntityStats {\n  hp: number;\n  maxHp: number;\n  mp: number;\n  /**  */\n  minDice: number;\n  maxDice: number;\n  /**  */\n  effects: EffectInstance[];\n}\n\n//   \nexport type ClashOutcome = 'player_win' | 'enemy_win' | 'draw' | 'dodge_success' | 'no_clash';\n\nexport interface ClashResult {\n  outcome: ClashOutcome;\n  playerFinalPoint: number;\n  enemyFinalPoint: number;\n  message: string;\n}\n\n//   \nexport interface CombatState {\n  turn: number;\n  phase: CombatPhase;\n  /**  */\n  actionsRemaining: number;\n\n  // \n  playerBaseDice: number;\n  enemyBaseDice: number;\n\n  // \n  playerHand: CardData[];\n  playerDeck: CardData[];\n  discardPile: CardData[];\n\n  // \n  enemyDeck: CardData[];\n  enemyDiscard: CardData[];\n  enemyIntentCard: CardData | null;\n  enemyPredictedPoint: number;\n\n  // \n  playerSelectedCard: CardData | null;\n\n  // \"\"\n  lastPlayedCard: CardData | null;\n\n  // \n  logs: string[];\n}\n\n//   \nexport interface RelicModifiers {\n  /**  */\n  globalMultiplier: number;\n  /**  */\n  globalAddition: number;\n}\n\n//   \nexport interface PointCalculationContext {\n  baseDice: number;\n  card: CardData;\n  entityEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n}\n\n//   \nexport interface DamageCalculationContext {\n  finalPoint: number;\n  card: CardData;\n  attackerEffects: EffectInstance[];\n  defenderEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n  /**  */\n  isTrueDamage?: boolean;\n}\n\n//   AI  \n\n/**  AI    */\nexport interface EnemyAIContext {\n  /**  effects */\n  enemyStats: Readonly<EntityStats>;\n  /**  effects */\n  playerStats: Readonly<EntityStats>;\n  /**  */\n  deck: CardData[];\n  /**  */\n  turn: number;\n  /**\n   * \n   *  { hasUsedHeal: false } \n   */\n  flags: Record<string, any>;\n}\n\n/**\n * \n * \n * \n */\nexport type EnemyAISelectCard = (ctx: EnemyAIContext) => CardData;\n\n/**  */\nexport interface EnemyDefinition {\n  /**  */\n  name: string;\n  /**  */\n  stats: EntityStats;\n  /**  */\n  deck: CardData[];\n  /**  AI  */\n  selectCard: EnemyAISelectCard;\n}\n","// \n//    \n//  UI  MVU  _string[]\n//   getCardByName()  CardData\n// \n\nimport { CardType, EffectType, type CardData } from '../types';\n\n/**\n * =====================================================================\n * /\n * =====================================================================\n * 1) \n *    -  `CardType.MAGIC`  `manaCost`\n *    - PHYSICAL / FUNCTION / DODGE `manaCost: 0`\n *\n * 2) \n *    - `calculation = { multiplier, addition }`\n *      FinalPoint = floor(BaseDice * multiplier + addition + )\n *    - `damageLogic`\n *      relative: damage = floor(FinalPoint * scale + scaleAddition)\n *      fixed:    damage = floor(value)\n *      mixed:    damage = floor(baseValue + FinalPoint * scale + scaleAddition)\n *\n * 3) +N\n *    - +N `calculation.addition = N`\n *    - +N `damageLogic.scaleAddition = N`\n *       mixed/fixed\n *\n * 4) \n *    - floor\n *\n * 5) \n *    -  `hitCount` 1\n *    -  `hitCount`  UI \n *\n * 6) \n *    - description +N  +N\n * =====================================================================\n */\n\n//   \n\n/**  */\nconst : CardData = {\n  id: 'basic_physical',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +1 */\nconst 1: CardData = {\n  id: 'basic_physical_plus_1',\n  name: '+1',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +2 */\nconst 2: CardData = {\n  id: 'basic_physical_plus_2',\n  name: '+2',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** +4 */\nconst 4: CardData = {\n  id: 'basic_physical_plus_4',\n  name: '+4',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 4 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+41',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_magic',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'focus_magic_attack',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '3MP*1.51',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.ARMOR,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '+11',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/** 0.6 */\nconst : CardData = {\n  id: 'basic_rest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 0.6 },\n    { kind: 'heal', target: 'self', valueMode: 'point_scale', scale: 0.6 },\n  ],\n  description: '0.60.6',\n};\n\n/** -1 */\nconst : CardData = {\n  id: 'basic_side_step_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '-1',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_breathing_technique',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_void_step',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'self', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/** +21 */\nconst : CardData = {\n  id: 'basic_mirror_phantom',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'basic_mana_shift',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n//   \n\n/** +1-2 */\nconst : CardData = {\n  id: 'burn_spark_mark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+1-2',\n};\n\n/** +1+2 */\nconst : CardData = {\n  id: 'burn_tar_splash',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+1+2',\n};\n\n/** 0.5+ */\nconst : CardData = {\n  id: 'burn_scorch_wind',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** -21+1 */\nconst : CardData = {\n  id: 'burn_scorch',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '-21+1',\n};\n\n/** 1+1 */\nconst : CardData = {\n  id: 'burn_flame_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'burn_soul_bolt',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '1+2',\n};\n\n/** *20.6+1 */\nconst : CardData = {\n  id: 'burn_body_lunge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '*20.6+1',\n};\n\n/** *0.81 */\nconst : CardData = {\n  id: 'burn_detonation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 0.8, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*0.81',\n};\n\n/** 2+11 */\nconst : CardData = {\n  id: 'burn_inferno_judgement',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2+11',\n};\n\n/** +2+1 */\nconst : CardData = {\n  id: 'burn_hell_waves',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BARRIER, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+2+1',\n};\n\n/**  CombatView  */\nconst : CardData = {\n  id: 'burn_char_convert',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** +211 */\nconst : CardData = {\n  id: 'enemy_mimic_slimy_tentacle',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+211',\n};\n\n/** *1.31.5 */\nconst : CardData = {\n  id: 'enemy_mimic_agile_tongue',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.3, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.31.5',\n};\n\n/** 1+1+2 */\nconst : CardData = {\n  id: 'enemy_mimic_maw',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '112',\n};\n\n/** *30.5 */\nconst : CardData = {\n  id: 'enemy_mimic_crush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 3.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*30.5',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_mimic_digest',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '+20.5',\n};\n\n/** 0.5+1 */\nconst : CardData = {\n  id: 'enemy_moth_aphro_powder',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.5+1',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_moth_sensitive_mark',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_moth_pheromone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CHARGE, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_moth_swarm_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '6MP11',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_root_tremor_sense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 2.0 },\n  ],\n  description: '2',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_root_lube_secretion',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '0.5',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_root_infiltrate_climb',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_charge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/** +10.51 */\nconst : CardData = {\n  id: 'enemy_swamp_numb_spread',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '+10.51',\n};\n\n/** +20.5 */\nconst : CardData = {\n  id: 'enemy_swamp_fluid_wrap',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.DEVOUR, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+20.5',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_swamp_corrode',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '2',\n};\n\n/** *1.511 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_aphro_gas',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '*1.511',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_mimicbubble_elastic_adsorb',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '11',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_mimicbubble_iridescent_float',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** 2 CombatView */\nconst : CardData = {\n  id: 'enemy_mist_sprite_illusion_lure',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_vinewalker_lurk',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.AMBUSH, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1',\n};\n\n/** 1+4 CombatView */\nconst : CardData = {\n  id: 'enemy_vinewalker_lightning_ambush',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1+4',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_vinewalker_paralytic_toxin',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n    { kind: 'apply_buff', effectType: EffectType.SHOCK, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_vinewalker_lubricated_shrink',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** 31 */\nconst : CardData = {\n  id: 'enemy_springspirit_liquefied_infiltration',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CORROSION, target: 'enemy', valueMode: 'fixed', fixedValue: 3 },\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '31',\n};\n\n/** 10 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_internal_manipulation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '10',\n};\n\n/** debuff1 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_undead_condense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'debuff1',\n};\n\n/** 2 CombatView */\nconst : CardData = {\n  id: 'enemy_springspirit_silent_infiltration',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_slime_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_heal',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'curse_alchemy_waste',\n  name: '',\n  type: CardType.CURSE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: true },\n  cardEffects: [],\n  description: '-21',\n};\n\n/**  CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_cunning',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '11',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_muxinlan_forced_acquisition',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false, destroyOnClashWin: true },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** *2debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquidation',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*2debuff12',\n};\n\n/** *1.50.5debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_unstable_reagent',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.50.5debuff',\n};\n\n/** *1.51:1 CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_liquid_fire',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*1.51:1',\n};\n\n/** +3debuff CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_activated_slime',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 3 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+3debuff',\n};\n\n/**  */\nconst : CardData = {\n  id: 'enemy_muxinlan_take_it',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false, insertCardsToEnemyDeck: [''] },\n  cardEffects: [\n    { kind: 'heal', valueMode: 'point_scale', scale: 2.0, target: 'self' },\n  ],\n  description: '2',\n};\n\n/** xxx CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_premium_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: 'xxx',\n};\n\n/** *0.5 CombatView */\nconst : CardData = {\n  id: 'enemy_muxinlan_set_ambush',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 0.5, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '*0.51',\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst CARD_REGISTRY: ReadonlyMap<string, CardData> = new Map<string, CardData>([\n  [.name, ],\n  [1.name, 1],\n  [2.name, 2],\n  [4.name, 4],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getCardByName(name: string): CardData | undefined {\n  return CARD_REGISTRY.get(name);\n}\n\n/**  CardData  */\nexport function resolveCardNames(names: string[]): CardData[] {\n  return names\n    .map((n) => CARD_REGISTRY.get(n))\n    .filter((c): c is CardData => c !== undefined);\n}\n\n/**  */\nexport function getAllCardNames(): string[] {\n  return [...CARD_REGISTRY.keys()];\n}\n\n/**  */\nexport function getAllCards(): CardData[] {\n  return [...CARD_REGISTRY.values()];\n}\n\n","// \n//  /Buff   \n// \n\nimport {\n  type CardData,\n  type CardType,\n  type EffectInstance,\n  type EffectPolarity,\n  type EntityStats,\n  EffectType,\n} from '../types';\n\n//   \n\n/**  */\nexport type EffectTiming =\n  | 'onTurnStart'    // \n  | 'onTurnEnd'      // \n  | 'onBeforeDamage'  // \n  | 'onAfterDamage'  // \n  | 'onBeforeAttack' // \n  | 'onAfterAttack'  // \n  | 'onClash'        // \n  | 'onDiceRoll'     // \n  | 'onCardPlay'     // \n  | 'passive';       // \n\n/**  */\nexport interface EffectDefinition {\n  type: EffectType;\n  name: string;\n  polarity: EffectPolarity;\n  /**  */\n  timings: EffectTiming[];\n  /**  */\n  stackable: boolean;\n  /** 0 =  */\n  maxStacks: number;\n  /**  */\n  description: string;\n}\n\n//   \n\nexport const EFFECT_REGISTRY: Record<EffectType, EffectDefinition> = {\n  [EffectType.BARRIER]: {\n    type: EffectType.BARRIER,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.ARMOR]: {\n    type: EffectType.ARMOR,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BIND]: {\n    type: EffectType.BIND,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.DEVOUR]: {\n    type: EffectType.DEVOUR,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay'],\n    stackable: false,\n    maxStacks: 1,\n    description: '3//',\n  },\n  [EffectType.POISON]: {\n    type: EffectType.POISON,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POISON_AMOUNT]: {\n    type: EffectType.POISON_AMOUNT,\n    name: '',\n    polarity: 'special',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.CORROSION]: {\n    type: EffectType.CORROSION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '30',\n  },\n  [EffectType.BURN]: {\n    type: EffectType.BURN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLEED]: {\n    type: EffectType.BLEED,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onClash', 'onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.VULNERABLE]: {\n    type: EffectType.VULNERABLE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.REGEN]: {\n    type: EffectType.REGEN,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.IGNITE_AURA]: {\n    type: EffectType.IGNITE_AURA,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.STUN]: {\n    type: EffectType.STUN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onTurnEnd'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.CHARGE]: {\n    type: EffectType.CHARGE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.COLD]: {\n    type: EffectType.COLD,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeAttack', 'onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.NON_LIVING]: {\n    type: EffectType.NON_LIVING,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.NON_ENTITY]: {\n    type: EffectType.NON_ENTITY,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '50%50%',\n  },\n  [EffectType.MAX_HP_REDUCTION]: {\n    type: EffectType.MAX_HP_REDUCTION,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POINT_GROWTH_BIG]: {\n    type: EffectType.POINT_GROWTH_BIG,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.POINT_GROWTH_SMALL]: {\n    type: EffectType.POINT_GROWTH_SMALL,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '3+1',\n  },\n  [EffectType.MANA_DRAIN]: {\n    type: EffectType.MANA_DRAIN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.MANA_SPRING]: {\n    type: EffectType.MANA_SPRING,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.SWARM]: {\n    type: EffectType.SWARM,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '01',\n  },\n  [EffectType.INDOMITABLE]: {\n    type: EffectType.INDOMITABLE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '011',\n  },\n  [EffectType.PEEP_FORBIDDEN]: {\n    type: EffectType.PEEP_FORBIDDEN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.BLIND_ASH]: {\n    type: EffectType.BLIND_ASH,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: 'UI',\n  },\n  [EffectType.COGNITIVE_INTERFERENCE]: {\n    type: EffectType.COGNITIVE_INTERFERENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.MEMORY_FOG]: {\n    type: EffectType.MEMORY_FOG,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.SILENCE]: {\n    type: EffectType.SILENCE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.STURDY]: {\n    type: EffectType.STURDY,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '1',\n  },\n  [EffectType.SHOCK]: {\n    type: EffectType.SHOCK,\n    name: '',\n    polarity: 'debuff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.FLAME_ATTACH]: {\n    type: EffectType.FLAME_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.POISON_ATTACH]: {\n    type: EffectType.POISON_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.TOXIN_SPREAD]: {\n    type: EffectType.TOXIN_SPREAD,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.AMBUSH]: {\n    type: EffectType.AMBUSH,\n    name: '',\n    polarity: 'buff',\n    timings: ['passive'],\n    stackable: true,\n    maxStacks: 0,\n    description: '11',\n  },\n  [EffectType.FROST_ATTACH]: {\n    type: EffectType.FROST_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLOODBLADE_ATTACH]: {\n    type: EffectType.BLOODBLADE_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.LIGHTNING_ATTACH]: {\n    type: EffectType.LIGHTNING_ATTACH,\n    name: '',\n    polarity: 'buff',\n    timings: ['onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n};\n\n// debuff\nexport const ELEMENTAL_DEBUFF_TYPES: EffectType[] = [\n  EffectType.COLD,\n  EffectType.BURN,\n  EffectType.POISON,\n  EffectType.BLEED,\n  EffectType.SHOCK,\n];\n\n// \n//  \n// \n\n/**\n * \n */\nexport function findEffect(entity: EntityStats, type: EffectType): EffectInstance | undefined {\n  return entity.effects.find(e => e.type === type);\n}\n\n/**\n * \n */\nexport function hasEffect(entity: EntityStats, type: EffectType): boolean {\n  return entity.effects.some(e => e.type === type && e.stacks > 0);\n}\n\n/**\n *  0\n */\nexport function getEffectStacks(entity: EntityStats, type: EffectType): number {\n  const effect = findEffect(entity, type);\n  return effect ? effect.stacks : 0;\n}\n\n/**\n * \n * /\n */\nexport function applyEffect(\n  entity: EntityStats,\n  type: EffectType,\n  stacks: number = 1,\n  options?: { restrictedTypes?: CardType[]; source?: string; lockDecayThisTurn?: boolean },\n): boolean {\n  const normalizedStacks = Math.max(0, Math.floor(stacks));\n  if (normalizedStacks <= 0) return false;\n\n  // \n  if (hasEffect(entity, EffectType.NON_LIVING)) {\n    if (type === EffectType.POISON || type === EffectType.BLEED) {\n      return false; // \n    }\n  }\n\n  const def = EFFECT_REGISTRY[type];\n  const existing = findEffect(entity, type);\n  let nextStacks = normalizedStacks;\n\n  // 0\n  if (type === EffectType.MAX_HP_REDUCTION) {\n    const maxReducible = Math.max(0, entity.maxHp);\n    if (maxReducible <= 0) return false;\n    nextStacks = Math.min(nextStacks, maxReducible);\n    entity.maxHp -= nextStacks;\n    entity.hp = Math.min(entity.hp, entity.maxHp);\n  }\n\n  if (existing) {\n    if (def.stackable) {\n      existing.stacks += nextStacks;\n      if (def.maxStacks > 0) {\n        existing.stacks = Math.min(existing.stacks, def.maxStacks);\n      }\n    }\n    // \n    if (type === EffectType.BIND && options?.restrictedTypes) {\n      existing.restrictedTypes = options.restrictedTypes;\n    }\n    if (type === EffectType.BIND && options?.lockDecayThisTurn) {\n      existing.lockDecayThisTurn = true;\n    }\n    if (type === EffectType.CORROSION && existing.stacks >= 30) {\n      entity.maxHp = 0;\n      entity.hp = 0;\n    }\n    return true;\n  }\n\n  // \n  const instance: EffectInstance = {\n    type,\n    stacks: def.maxStacks > 0 ? Math.min(nextStacks, def.maxStacks) : nextStacks,\n    polarity: def.polarity,\n    lockDecayThisTurn: type === EffectType.BIND ? !!options?.lockDecayThisTurn : undefined,\n    restrictedTypes: options?.restrictedTypes,\n    source: options?.source,\n  };\n  entity.effects.push(instance);\n  if (type === EffectType.CORROSION && instance.stacks >= 30) {\n    entity.maxHp = 0;\n    entity.hp = 0;\n  }\n  return true;\n}\n\n/**\n * \n */\nexport function removeEffect(entity: EntityStats, type: EffectType): void {\n  entity.effects = entity.effects.filter(e => e.type !== type);\n}\n\n/**\n *  0 \n */\nexport function reduceEffectStacks(entity: EntityStats, type: EffectType, amount: number = 1): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  effect.stacks -= amount;\n  if (effect.stacks <= 0) {\n    removeEffect(entity, type);\n  }\n}\n\n// \n//  \n// \n\n/**  */\nexport interface TurnStartResult {\n  hpChange: number;\n  mpChange: number;\n  trueDamage: number;\n  isStunned: boolean;\n  logs: string[];\n  /**  */\n  applyToOpponent: Array<{ type: EffectType; stacks: number }>;\n}\n\n/**\n * \n *       (-1)      \n */\nexport function processOnTurnStart(entity: EntityStats): TurnStartResult {\n  const result: TurnStartResult = {\n    hpChange: 0,\n    mpChange: 0,\n    trueDamage: 0,\n    isStunned: false,\n    logs: [],\n    applyToOpponent: [],\n  };\n\n  // \n  if (hasEffect(entity, EffectType.MANA_DRAIN)) {\n    result.mpChange = -entity.mp;\n    result.logs.push(`[] `);\n    reduceEffectStacks(entity, EffectType.MANA_DRAIN);\n  }\n\n  // \n  const poisonAmount = getEffectStacks(entity, EffectType.POISON_AMOUNT);\n  if (poisonAmount > 0) {\n    if (poisonAmount >= entity.hp) {\n      result.trueDamage += poisonAmount;\n      removeEffect(entity, EffectType.POISON_AMOUNT);\n      result.logs.push(`[] (${poisonAmount})  (${entity.hp}) ${poisonAmount} `);\n    }\n  }\n\n  // \n  const burnStacks = getEffectStacks(entity, EffectType.BURN);\n  if (burnStacks > 0) {\n    let burnDamage = burnStacks;\n    const vulnerableStacks = getEffectStacks(entity, EffectType.VULNERABLE);\n    if (vulnerableStacks > 0) {\n      burnDamage += vulnerableStacks;\n      result.logs.push(`[]  +${vulnerableStacks}`);\n    }\n    result.hpChange -= burnDamage;\n    result.logs.push(`[]  ${burnDamage} `);\n  }\n\n  //  -1\n  if (hasEffect(entity, EffectType.BLEED)) {\n    reduceEffectStacks(entity, EffectType.BLEED);\n    result.logs.push(`[] `);\n  }\n\n  // \n  const regenStacks = getEffectStacks(entity, EffectType.REGEN);\n  if (regenStacks > 0) {\n    result.hpChange += regenStacks;\n    result.logs.push(`[]  ${regenStacks} `);\n  }\n\n  //   \n  const igniteStacks = getEffectStacks(entity, EffectType.IGNITE_AURA);\n  if (igniteStacks > 0) {\n    applyEffect(entity, EffectType.BURN, 1);\n    result.applyToOpponent.push({ type: EffectType.BURN, stacks: 1 });\n    result.logs.push(`[]  1 `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    result.isStunned = true;\n    result.logs.push(`[] `);\n  }\n\n  // \n  const manaSpringStacks = getEffectStacks(entity, EffectType.MANA_SPRING);\n  if (manaSpringStacks > 0) {\n    result.mpChange += manaSpringStacks;\n    result.logs.push(`[]  +${manaSpringStacks}`);\n  }\n\n  // \n  const frostAttachStacks = getEffectStacks(entity, EffectType.FROST_ATTACH);\n  if (frostAttachStacks > 0) {\n    result.applyToOpponent.push({ type: EffectType.COLD, stacks: frostAttachStacks });\n    result.logs.push(`[]  ${frostAttachStacks} `);\n  }\n\n  return result;\n}\n\n/**\n * \n * (-1)  ()  ()\n */\nexport function processOnTurnEnd(entity: EntityStats): string[] {\n  const logs: string[] = [];\n\n  // -1\n  const poisonStacks = getEffectStacks(entity, EffectType.POISON);\n  if (poisonStacks > 0) {\n    applyEffect(entity, EffectType.POISON_AMOUNT, poisonStacks);\n    reduceEffectStacks(entity, EffectType.POISON, 1);\n    logs.push(`[]  +${poisonStacks} 1`);\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect && bindEffect.stacks > 0) {\n    if (bindEffect.lockDecayThisTurn) {\n      bindEffect.lockDecayThisTurn = false;\n      if (bindEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.BIND);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.BIND);\n      logs.push(`[] `);\n    }\n  }\n\n  // \n  const armorEffect = findEffect(entity, EffectType.ARMOR);\n  if (armorEffect && armorEffect.stacks > 0) {\n    armorEffect.stacks = Math.floor(armorEffect.stacks / 2);\n    if (armorEffect.stacks <= 0) {\n      removeEffect(entity, EffectType.ARMOR);\n    }\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.SILENCE)) {\n    reduceEffectStacks(entity, EffectType.SILENCE);\n    logs.push(`[] `);\n  }\n\n  // 1\n  if (hasEffect(entity, EffectType.STURDY)) {\n    removeEffect(entity, EffectType.STURDY);\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    removeEffect(entity, EffectType.STUN);\n    logs.push(`[] `);\n  }\n\n  return logs;\n}\n\n// \n//  \n// \n\n/**\n * \n */\nexport function canPlayCard(\n  entity: EntityStats,\n  card: CardData,\n  baseRawDice: number,\n): { allowed: boolean; reason?: string } {\n  // \n  if (card.traits.unplayable) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect) {\n    const restrictedTypes = bindEffect.restrictedTypes && bindEffect.restrictedTypes.length > 0\n      ? bindEffect.restrictedTypes\n      : (['', ''] as CardType[]);\n    if (restrictedTypes.includes(card.type)) {\n      return { allowed: false, reason: `${card.type}` };\n    }\n  }\n\n  // 3 //\n  if (hasEffect(entity, EffectType.DEVOUR) && baseRawDice <= 3) {\n    if (\n      card.type === '' as CardType\n      || card.type === '' as CardType\n      || card.type === '' as CardType\n    ) {\n      return { allowed: false, reason: `3${card.type}` };\n    }\n  }\n\n  // \n  if (card.type === ('' as CardType) && card.manaCost > entity.mp) {\n    return { allowed: false, reason: `${card.manaCost}${entity.mp}` };\n  }\n\n  // \n  if (card.type === ('' as CardType) && hasEffect(entity, EffectType.SILENCE)) {\n    return { allowed: false, reason: '' };\n  }\n\n  return { allowed: true };\n}\n","import { type CardData, EffectType, type EnemyAIContext, type EnemyDefinition } from '../types';\nimport { getAllCards } from './cardRegistry';\nimport { ELEMENTAL_DEBUFF_TYPES } from './effects';\n\nfunction pickCardById(ctx: EnemyAIContext, id: string): CardData {\n  return ctx.deck.find((c) => c.id === id) ?? ctx.deck[0]!;\n}\n\nfunction weightedRandom<T>(options: { value: T; weight: number }[]): T {\n  const total = options.reduce((s, o) => s + o.weight, 0);\n  let roll = Math.random() * total;\n  for (const opt of options) {\n    roll -= opt.weight;\n    if (roll <= 0) return opt.value;\n  }\n  return options[options.length - 1]!.value;\n}\n\nconst CARD_BY_ID = new Map<string, CardData>(getAllCards().map((card) => [card.id, card]));\nconst requireCardById = (id: string): CardData => {\n  const card = CARD_BY_ID.get(id);\n  if (!card) {\n    throw new Error(`[enemyRegistry] Missing card id: ${id}`);\n  }\n  return card;\n};\nconst buildDeckById = (ids: string[]) => ids.map((id) => requireCardById(id));\n\nconst  = '';\nconst  = '';\n\nconst MUXINLAN_CARD = {\n  CUNNING: 'enemy_muxinlan_cunning',\n  FORCED: 'enemy_muxinlan_forced_acquisition',\n  LIQUIDATION: 'enemy_muxinlan_liquidation',\n  REAGENT: 'enemy_muxinlan_unstable_reagent',\n  LIQUID_FIRE: 'enemy_muxinlan_liquid_fire',\n  SLIME: 'enemy_muxinlan_activated_slime',\n  TAKE_IT: 'enemy_muxinlan_take_it',\n  PREMIUM: 'enemy_muxinlan_premium_shield',\n  AMBUSH: 'enemy_muxinlan_set_ambush',\n} as const;\n\nconst MIMIC_CARD = {\n  TENTACLE: 'enemy_mimic_slimy_tentacle',\n  TONGUE: 'enemy_mimic_agile_tongue',\n  MAW: 'enemy_mimic_maw',\n  CRUSH: 'enemy_mimic_crush',\n  DIGEST: 'enemy_mimic_digest',\n} as const;\n\nconst SWAMP_LURKER_CARD = {\n  CHARGE: 'enemy_charge',\n  NUMB_SPREAD: 'enemy_swamp_numb_spread',\n  FLUID_WRAP: 'enemy_swamp_fluid_wrap',\n  CORRODE: 'enemy_swamp_corrode',\n} as const;\n\nconst MIMIC_BUBBLE_CARD = {\n  APHRO_GAS: 'enemy_mimicbubble_aphro_gas',\n  ELASTIC_ADSORB: 'enemy_mimicbubble_elastic_adsorb',\n  IRIDESCENT_FLOAT: 'enemy_mimicbubble_iridescent_float',\n} as const;\n\nconst MIST_SPRITE_CARD = {\n  ILLUSION_LURE: 'enemy_mist_sprite_illusion_lure',\n} as const;\n\nconst VINEWALKER_CARD = {\n  LURK: 'enemy_vinewalker_lurk',\n  LIGHTNING_AMBUSH: 'enemy_vinewalker_lightning_ambush',\n  PARALYTIC_TOXIN: 'enemy_vinewalker_paralytic_toxin',\n  LUBRICATED_SHRINK: 'enemy_vinewalker_lubricated_shrink',\n} as const;\n\nconst SPRING_SPIRIT_CARD = {\n  LIQUEFIED_INFILTRATION: 'enemy_springspirit_liquefied_infiltration',\n  INTERNAL_MANIPULATION: 'enemy_springspirit_internal_manipulation',\n  UNDEAD_CONDENSE: 'enemy_springspirit_undead_condense',\n  SILENT_INFILTRATION: 'enemy_springspirit_silent_infiltration',\n} as const;\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 + 30 * floor,\n      maxHp: 20 + 30 * floor,\n      mp: 2 * floor,\n      minDice: 1 + floor,\n      maxDice: 6 + floor,\n      effects: [\n        { type: EffectType.MANA_SPRING, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FLAME_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.POISON_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.FROST_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.BLOODBLADE_ATTACH, stacks: 1, polarity: 'buff' },\n        { type: EffectType.LIGHTNING_ATTACH, stacks: 1, polarity: 'buff' },\n      ],\n    },\n    deck: buildDeckById([\n      MUXINLAN_CARD.CUNNING,\n      MUXINLAN_CARD.FORCED,\n      MUXINLAN_CARD.LIQUIDATION,\n      MUXINLAN_CARD.REAGENT,\n      MUXINLAN_CARD.LIQUID_FIRE,\n      MUXINLAN_CARD.SLIME,\n      MUXINLAN_CARD.TAKE_IT,\n      MUXINLAN_CARD.PREMIUM,\n      MUXINLAN_CARD.AMBUSH,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      if (!ctx.flags.muxinlanOpenedWithCunning) {\n        ctx.flags.muxinlanOpenedWithCunning = true;\n        return pickCardById(ctx, MUXINLAN_CARD.CUNNING);\n      }\n\n      const getStacks = (t: EffectType) => ctx.playerStats.effects.find((e) => e.type === t)?.stacks ?? 0;\n      const elementalTotal = ELEMENTAL_DEBUFF_TYPES\n        .reduce((sum, type) => sum + getStacks(type), 0);\n      if (elementalTotal >= 12) {\n        return pickCardById(ctx, MUXINLAN_CARD.LIQUIDATION);\n      }\n\n      if (ctx.enemyStats.mp > 4) {\n        const highMpPool = [MUXINLAN_CARD.REAGENT, MUXINLAN_CARD.LIQUID_FIRE, MUXINLAN_CARD.SLIME] as const;\n        const chosen = highMpPool[Math.floor(Math.random() * highMpPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const lowMpPool = [MUXINLAN_CARD.FORCED, MUXINLAN_CARD.TAKE_IT, MUXINLAN_CARD.PREMIUM, MUXINLAN_CARD.AMBUSH] as const;\n      const chosen = lowMpPool[Math.floor(Math.random() * lowMpPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nfunction createDefinition(currentFloor: number): EnemyDefinition {\n  const floor = Math.max(1, Math.floor(currentFloor));\n  return {\n    name: ,\n    stats: {\n      hp: 20 * floor,\n      maxHp: 20 * floor,\n      mp: 0,\n      minDice: floor,\n      maxDice: 5 + 2 * floor,\n      effects: [],\n    },\n    deck: buildDeckById([\n      MIMIC_CARD.TENTACLE,\n      MIMIC_CARD.TONGUE,\n      MIMIC_CARD.MAW,\n      MIMIC_CARD.CRUSH,\n      MIMIC_CARD.DIGEST,\n    ]),\n    selectCard(ctx: EnemyAIContext) {\n      const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n      if (playerHasDevour) {\n        const devourPool = [MIMIC_CARD.CRUSH, MIMIC_CARD.DIGEST] as const;\n        const chosen = devourPool[Math.floor(Math.random() * devourPool.length)]!;\n        return pickCardById(ctx, chosen);\n      }\n\n      const normalPool = [MIMIC_CARD.TENTACLE, MIMIC_CARD.TONGUE, MIMIC_CARD.MAW] as const;\n      const chosen = normalPool[Math.floor(Math.random() * normalPool.length)]!;\n      return pickCardById(ctx, chosen);\n    },\n  };\n}\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 12,\n    maxHp: 12,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_charge', 'enemy_slime_dodge', 'enemy_heal']),\n  selectCard(ctx: EnemyAIContext) {\n    const hpRatio = ctx.enemyStats.hp / ctx.enemyStats.maxHp;\n    if (hpRatio <= 0.4 && !ctx.flags.hasUsedHeal) {\n      ctx.flags.hasUsedHeal = true;\n      return pickCardById(ctx, 'enemy_heal');\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: 'enemy_charge', weight: 70 },\n      { value: 'enemy_slime_dodge', weight: 30 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 5,\n    maxHp: 5,\n    mp: 1,\n    minDice: 1,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([\n    'enemy_moth_aphro_powder',\n    'enemy_moth_sensitive_mark',\n    'enemy_moth_pheromone',\n    'enemy_moth_swarm_burst',\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCardById(ctx, 'enemy_moth_swarm_burst');\n    }\n\n    const normalCards = ['enemy_moth_aphro_powder', 'enemy_moth_sensitive_mark', 'enemy_moth_pheromone'] as const;\n    const chosen = normalCards[Math.floor(Math.random() * normalCards.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 8,\n    maxHp: 8,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [{ type: EffectType.SWARM, stacks: 2, polarity: 'buff' }],\n  },\n  deck: buildDeckById(['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb']),\n  selectCard(ctx: EnemyAIContext) {\n    const pool = ['enemy_root_tremor_sense', 'enemy_root_lube_secretion', 'enemy_root_infiltrate_climb'] as const;\n    const chosen = pool[Math.floor(Math.random() * pool.length)]!;\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [{ type: EffectType.REGEN, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    SWAMP_LURKER_CARD.CHARGE,\n    SWAMP_LURKER_CARD.NUMB_SPREAD,\n    SWAMP_LURKER_CARD.FLUID_WRAP,\n    SWAMP_LURKER_CARD.CORRODE,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const playerHasDevour = ctx.playerStats.effects.some((e) => e.type === EffectType.DEVOUR && e.stacks > 0);\n    if (playerHasDevour) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.CORRODE);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, SWAMP_LURKER_CARD.FLUID_WRAP);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SWAMP_LURKER_CARD.CHARGE, weight: 30 },\n      { value: SWAMP_LURKER_CARD.NUMB_SPREAD, weight: 70 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 15,\n    maxHp: 15,\n    mp: 0,\n    minDice: 2,\n    maxDice: 4,\n    effects: [{ type: EffectType.TOXIN_SPREAD, stacks: 1, polarity: 'buff' }],\n  },\n  deck: buildDeckById([\n    MIMIC_BUBBLE_CARD.APHRO_GAS,\n    MIMIC_BUBBLE_CARD.ELASTIC_ADSORB,\n    MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const chosen = weightedRandom<string>([\n      { value: MIMIC_BUBBLE_CARD.APHRO_GAS, weight: 50 },\n      { value: MIMIC_BUBBLE_CARD.ELASTIC_ADSORB, weight: 30 },\n      { value: MIMIC_BUBBLE_CARD.IRIDESCENT_FLOAT, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 4,\n    maxHp: 4,\n    mp: 0,\n    minDice: 1,\n    maxDice: 1,\n    effects: [\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.SWARM, stacks: 2, polarity: 'buff' },\n      { type: EffectType.POINT_GROWTH_BIG, stacks: 1, polarity: 'buff' },\n    ],\n  },\n  deck: buildDeckById([MIST_SPRITE_CARD.ILLUSION_LURE]),\n  selectCard(ctx: EnemyAIContext) {\n    return pickCardById(ctx, MIST_SPRITE_CARD.ILLUSION_LURE);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 16,\n    maxHp: 16,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [],\n  },\n  deck: buildDeckById([\n    VINEWALKER_CARD.LURK,\n    VINEWALKER_CARD.LIGHTNING_AMBUSH,\n    VINEWALKER_CARD.PARALYTIC_TOXIN,\n    VINEWALKER_CARD.LUBRICATED_SHRINK,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    if (!ctx.flags.vinewalkerOpenedWithLurk) {\n      ctx.flags.vinewalkerOpenedWithLurk = true;\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const playerHasBind = ctx.playerStats.effects.some((e) => e.type === EffectType.BIND && e.stacks > 0);\n    if (playerHasBind) {\n      return pickCardById(ctx, VINEWALKER_CARD.PARALYTIC_TOXIN);\n    }\n\n    const selfHasAmbush = ctx.enemyStats.effects.some((e) => e.type === EffectType.AMBUSH && e.stacks > 0);\n    if (!selfHasAmbush) {\n      return pickCardById(ctx, VINEWALKER_CARD.LURK);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: VINEWALKER_CARD.LIGHTNING_AMBUSH, weight: 75 },\n      { value: VINEWALKER_CARD.LUBRICATED_SHRINK, weight: 25 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst : EnemyDefinition = {\n  name: '',\n  stats: {\n    hp: 20,\n    maxHp: 20,\n    mp: 0,\n    minDice: 1,\n    maxDice: 6,\n    effects: [\n      { type: EffectType.NON_LIVING, stacks: 1, polarity: 'trait' },\n      { type: EffectType.NON_ENTITY, stacks: 1, polarity: 'trait' },\n    ],\n  },\n  deck: buildDeckById([\n    SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION,\n    SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION,\n    SPRING_SPIRIT_CARD.UNDEAD_CONDENSE,\n    SPRING_SPIRIT_CARD.SILENT_INFILTRATION,\n  ]),\n  selectCard(ctx: EnemyAIContext) {\n    const selfHasElementalDebuff = ELEMENTAL_DEBUFF_TYPES\n      .some((type) => ctx.enemyStats.effects.some((e) => e.type === type && e.stacks > 0));\n\n    if (!selfHasElementalDebuff) {\n      const chosen = weightedRandom<string>([\n        { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 50 },\n        { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 30 },\n        { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 20 },\n      ]);\n      return pickCardById(ctx, chosen);\n    }\n\n    const chosen = weightedRandom<string>([\n      { value: SPRING_SPIRIT_CARD.LIQUEFIED_INFILTRATION, weight: 40 },\n      { value: SPRING_SPIRIT_CARD.SILENT_INFILTRATION, weight: 25 },\n      { value: SPRING_SPIRIT_CARD.INTERNAL_MANIPULATION, weight: 15 },\n      { value: SPRING_SPIRIT_CARD.UNDEAD_CONDENSE, weight: 20 },\n    ]);\n    return pickCardById(ctx, chosen);\n  },\n};\n\nconst STATIC_ENEMY_REGISTRY: ReadonlyMap<string, EnemyDefinition> = new Map<string, EnemyDefinition>([\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\nconst ENEMY_NAME_ORDER: readonly string[] = [\n  ,\n  ,\n  ...STATIC_ENEMY_REGISTRY.keys(),\n];\n\nexport function getEnemyByName(name: string, currentFloor: number = 1): EnemyDefinition | undefined {\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  if (name === ) {\n    return createDefinition(currentFloor);\n  }\n  return STATIC_ENEMY_REGISTRY.get(name);\n}\n\nexport function getAllEnemyNames(): string[] {\n  return [...ENEMY_NAME_ORDER];\n}\n\n\n","import { CardType, EffectType, type CardData, type EntityStats } from '../types';\n\nexport type RelicRarity = '' | '' | '';\nexport type RelicCategory = '' | '';\n\nexport type RelicSide = 'player' | 'enemy';\nexport type RelicFloatKind = 'shield' | 'mana' | 'heal';\n\nexport interface RelicApplyEffectOptions {\n  restrictedTypes?: CardType[];\n  source?: string;\n  lockDecayThisTurn?: boolean;\n}\n\ninterface RelicSharedHookContext {\n  count: number;\n  side: RelicSide;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n  addStatusEffect: (\n    side: RelicSide,\n    effectType: EffectType,\n    stacks: number,\n    options?: RelicApplyEffectOptions,\n  ) => boolean;\n  addArmor: (side: RelicSide, amount: number) => number;\n  restoreMana: (side: RelicSide, amount: number) => number;\n  heal: (\n    side: RelicSide,\n    amount: number,\n    options?: { overflowToArmor?: boolean },\n  ) => { healed: number; overflow: number };\n  addRerollCharges: (side: RelicSide, amount: number) => void;\n  getRerollCharges: (side: RelicSide) => number;\n}\n\nexport interface RelicLifecycleHookContext extends RelicSharedHookContext {}\n\nexport interface RelicPointHookContext {\n  count: number;\n  side: RelicSide;\n  card: CardData;\n  baseDice: number;\n  currentPoint: number;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  isPreview: boolean;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n}\n\nexport interface RelicDiceClickHookContext {\n  count: number;\n  side: RelicSide;\n  currentDice: number;\n  minDice: number;\n  maxDice: number;\n  state: Record<string, unknown>;\n  roll: (min: number, max: number) => number;\n  consumeRerollCharge: (side: RelicSide, amount?: number) => boolean;\n  getRerollCharges: (side: RelicSide) => number;\n  addLog: (message: string) => void;\n}\n\nexport interface RelicBeforeApplyEffectHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  effectType: EffectType;\n  stacks: number;\n  source?: string;\n  restrictedTypes?: CardType[];\n}\n\nexport interface RelicBurnDamageHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicAfterBurnDamageTakenHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicHitHookContext extends RelicSharedHookContext {\n  sourceSide: RelicSide;\n  targetSide: RelicSide;\n  source: EntityStats;\n  target: EntityStats;\n  card: CardData;\n  finalPoint: number;\n  hitIndex: number;\n  hitCount: number;\n  attemptedDamage: number;\n  actualDamage: number;\n}\n\nexport interface RelicHooks {\n  onBattleStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnEnd?: (ctx: RelicLifecycleHookContext) => void;\n  onDeckShuffle?: (ctx: RelicLifecycleHookContext) => void;\n  modifyFinalPoint?: (ctx: RelicPointHookContext) => number;\n  onDiceClick?: (ctx: RelicDiceClickHookContext) => number | null;\n  onBeforeApplyEffect?: (ctx: RelicBeforeApplyEffectHookContext) => boolean | void;\n  onBeforeBurnDamage?: (ctx: RelicBurnDamageHookContext) => void;\n  onAfterBurnDamageTaken?: (ctx: RelicAfterBurnDamageTakenHookContext) => void;\n  onAfterHitDealt?: (ctx: RelicHitHookContext) => void;\n  onAfterHitTaken?: (ctx: RelicHitHookContext) => void;\n}\n\nexport interface RelicData {\n  id: string;\n  name: string;\n  rarity: RelicRarity;\n  category: RelicCategory;\n  effect: string;\n  description: string;\n  hooks?: RelicHooks;\n}\n\nexport interface ResolvedRelicEntry {\n  relic: RelicData;\n  count: number;\n}\n\nconst getStacks = (entity: EntityStats, effectType: EffectType) => (\n  entity.effects.find((eff) => eff.type === effectType)?.stacks ?? 0\n);\n\nconst RELIC_LIST: readonly RelicData[] = [\n  {\n    id: 'lucky_coin_small',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.minDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'lucky_coin_large',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.maxDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'red_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.PHYSICAL) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'blue_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.MAGIC) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'yellow_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.FUNCTION) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'green_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' -1',\n    description: ' -1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.DODGE) return currentPoint;\n        return currentPoint - count;\n      },\n    },\n  },\n  {\n    id: 'mana_residue',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 0 +1',\n    description: ' 0 1 ',\n    hooks: {\n      onTurnEnd: ({ count, side, self, restoreMana, addLog }) => {\n        if (self.mp !== 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  0 ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sanctuary_amulet',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.INDOMITABLE, count, { source: 'relic:sanctuary_amulet' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onTurnStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'reset_button',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 6 ',\n    description: ' 6 ',\n    hooks: {\n      onBattleStart: ({ count, side, addRerollCharges, getRerollCharges, addLog }) => {\n        const gained = count * 6;\n        addRerollCharges(side, gained);\n        addLog(`[]  ${gained}  ${getRerollCharges(side)}`);\n      },\n      onDiceClick: ({ count, side, minDice, maxDice, roll, consumeRerollCharge, getRerollCharges, addLog }) => {\n        if (count <= 0) return null;\n        if (!consumeRerollCharge(side, 1)) return null;\n        const value = roll(minDice, maxDice);\n        addLog(`[]  ${getRerollCharges(side)} `);\n        return value;\n      },\n    },\n  },\n  {\n    id: 'energy_candy',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onDeckShuffle: ({ count, side, restoreMana, addLog }) => {\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_shield',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 10 ',\n    description: ' 10 ',\n    hooks: {\n      onBattleStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, 10 * count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'pure_water',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 8 ',\n    description: ' 8 ',\n    hooks: {\n      onBattleStart: ({ count, side, heal, addLog }) => {\n        const { healed, overflow } = heal(side, 8 * count, { overflowToArmor: true });\n        addLog(`[]  ${healed}  ${overflow} `);\n      },\n    },\n  },\n  {\n    id: 'oily_grease',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2 ',\n    description: ' 2 ',\n    hooks: {\n      onAfterHitDealt: ({ count, side, targetSide, actualDamage, state, addStatusEffect, addLog }) => {\n        if (targetSide === side) return;\n        if (actualDamage <= 0) return;\n        if (state['triggered'] === true) return;\n        state['triggered'] = true;\n        const stacks = 2 * count;\n        if (addStatusEffect(targetSide, EffectType.BURN, stacks, { source: 'relic:oily_grease' })) {\n          addLog(`[]  ${stacks} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sunglasses',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        if (addStatusEffect(targetSide, EffectType.STUN, Math.max(1, count), { source: 'relic:sunglasses' })) {\n          addLog('[] ');\n        }\n      },\n      onBeforeApplyEffect: ({ side, targetSide, effectType, addLog }) => {\n        if (targetSide !== side) return;\n        if (effectType !== EffectType.STUN) return;\n        addLog('[] ');\n        return false;\n      },\n    },\n  },\n  {\n    id: 'flame_ring',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterHitTaken: ({ count, side, sourceSide, targetSide, card, addStatusEffect, addLog }) => {\n        if (targetSide !== side) return;\n        if (sourceSide === side) return;\n        if (card.type !== CardType.PHYSICAL) return;\n        if (addStatusEffect(sourceSide, EffectType.BURN, count, { source: 'relic:flame_ring' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'fire_slime',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2',\n    description: ' 2',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide !== ctx.side) return;\n        if (ctx.damage === 2) return;\n        ctx.damage = 2;\n      },\n    },\n  },\n  {\n    id: 'ember_seed',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBattleStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n      onTurnStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'phoenix_feather',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, state, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const current = Number(state['nextCardPointBonus'] ?? 0);\n        const add = 1 * count;\n        state['nextCardPointBonus'] = current + add;\n        addLog(`[]  +${current + add}`);\n      },\n      modifyFinalPoint: ({ side, currentPoint, state, isPreview, addLog }) => {\n        if (side !== 'player') return currentPoint;\n        const bonus = Math.max(0, Math.floor(Number(state['nextCardPointBonus'] ?? 0)));\n        if (bonus <= 0) return currentPoint;\n        if (!isPreview) {\n          state['nextCardPointBonus'] = 0;\n          addLog(`[]  +${bonus}`);\n        }\n        return currentPoint + bonus;\n      },\n    },\n  },\n  {\n    id: 'rekindle_core',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, restoreMana, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'everlasting_fuel',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.damage <= 0) return;\n        ctx.isTrueDamage = true;\n      },\n    },\n  },\n  {\n    id: 'sun_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '*',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide === ctx.side && ctx.hasRelic('fire_slime')) {\n          return;\n        }\n        const minDamage = Math.max(1, ctx.turn * Math.max(1, ctx.count));\n        if (ctx.damage >= minDamage) return;\n        ctx.damage = minDamage;\n      },\n    },\n  },\n];\n\nconst RELIC_BY_ID = new Map(RELIC_LIST.map((relic) => [relic.id, relic]));\nconst RELIC_BY_NAME = new Map(RELIC_LIST.map((relic) => [relic.name, relic]));\n\nexport function getAllRelics(): readonly RelicData[] {\n  return RELIC_LIST;\n}\n\nexport function getRelicById(id: string): RelicData | undefined {\n  return RELIC_BY_ID.get(id);\n}\n\nexport function getRelicByName(name: string): RelicData | undefined {\n  return RELIC_BY_NAME.get(name);\n}\n\nexport function getRelicsByCategory(category: RelicCategory): readonly RelicData[] {\n  return RELIC_LIST.filter((relic) => relic.category === category);\n}\n\nexport function resolveRelicMap(raw: Record<string, number> | null | undefined): ResolvedRelicEntry[] {\n  if (!raw || typeof raw !== 'object') return [];\n\n  const aggregated = new Map<string, ResolvedRelicEntry>();\n\n  for (const [key, value] of Object.entries(raw)) {\n    const count = Math.max(0, Math.floor(Number(value ?? 0)));\n    if (!key || count <= 0) continue;\n\n    const relic = RELIC_BY_ID.get(key) ?? RELIC_BY_NAME.get(key);\n    if (!relic) continue;\n\n    const existing = aggregated.get(relic.id);\n    if (existing) {\n      existing.count += count;\n    } else {\n      aggregated.set(relic.id, { relic, count });\n    }\n  }\n\n  return Array.from(aggregated.values()).sort((a, b) => a.relic.name.localeCompare(b.relic.name, 'zh-Hans-CN'));\n}\n","export const FLOOR_MAP: Record<string, string[]> = {\n  : ['', '', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n  : ['', '', '', '', ''],\n};\n\nexport const FLOOR_ORDER = ['', '', '', '', ''] as const;\n\nconst FLOOR_NUMBER_MAP: Record<string, number> = {\n  : 1,\n  : 2,\n  : 3,\n  : 4,\n  : 5,\n};\n\nexport function getFloorForArea(area: string): string | null {\n  for (const [floorName, areas] of Object.entries(FLOOR_MAP)) {\n    if (areas.includes(area)) return floorName;\n  }\n  return null;\n}\n\nexport function getNextFloor(currentFloor: string): string | null {\n  const idx = FLOOR_ORDER.indexOf(currentFloor as (typeof FLOOR_ORDER)[number]);\n  if (idx < 0 || idx >= FLOOR_ORDER.length - 1) return null;\n  return FLOOR_ORDER[idx + 1];\n}\n\nexport function getFloorNumberForArea(area: string): number {\n  const floorName = getFloorForArea(area);\n  if (!floorName) return 1;\n  return FLOOR_NUMBER_MAP[floorName] ?? 1;\n}\n\n","/**  F11 */\nexport function toggleFullScreen(): void {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen().catch((err: Error) => {\n      console.warn(`Fullscreen error: ${err.message}`);\n    });\n  } else {\n    document.exitFullscreen();\n  }\n}\n","/**\n * LLM \n *  AI  XML \n */\n/**\n * Maintenance note:\n * - Keep this file UTF-8 (contains Chinese text).\n * - Avoid shell redirection full-file overwrite (>, >>, Out-File, Set-Content).\n * - Prefer apply_patch/IDE-safe edits to prevent mojibake.\n */\n\nexport interface ParsedResponse {\n  /**  <maintext>/<maintxt>/<content>/<> */\n  mainText: string;\n  /** <option>...</option> A-D E / [Leave] / [Rebirth] */\n  options: string[];\n  /** <sum>...</sum>  */\n  summary: string;\n  /** <UpdateVariable>/<update>  */\n  variableUpdate: string;\n  /** <UpdateVariable>  <JSONPatch>...</JSONPatch>  */\n  jsonPatch: string;\n  /**  */\n  rawText: string;\n  /**  E  */\n  hasOptionE: boolean;\n  /**  [Leave]  */\n  hasLeave: boolean;\n  /**  [Rebirth]  */\n  hasRebirth: boolean;\n}\n\nfunction isLeaveOptionLine(line: string): boolean {\n  return /\\bleave\\b/i.test(line);\n}\n\nfunction isRebirthOptionLine(line: string): boolean {\n  return /\\brebirth\\b/i.test(line);\n}\n\n/**\n *  XML \n */\nfunction extractTag(text: string, tagName: string): string {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  // \n  const regex = new RegExp(`(?:^|[\\\\r\\\\n]|>)\\\\s*<${escapedTagName}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)</${escapedTagName}>`, 'ig');\n  let match: RegExpExecArray | null;\n\n  while ((match = regex.exec(text)) !== null) {\n    const fullMatch = match[0];\n    const openTagEnd = fullMatch.indexOf('>');\n    if (openTagEnd >= 0) {\n      //  \"<maintext>, <option>\"\n      const afterOpen = fullMatch.slice(openTagEnd + 1).trimStart();\n      const firstChar = afterOpen[0];\n      if (firstChar === ',' || firstChar === '') continue;\n    }\n    return match[1].trim();\n  }\n\n  return '';\n}\n\n/**\n * \n */\nfunction extractTagByPriority(text: string, tagNames: string[]): string {\n  for (const tagName of tagNames) {\n    const content = extractTag(text, tagName);\n    if (content) return content;\n  }\n  return '';\n}\n\n/**\n * \n * <think>, <thinking>, <Think>, <Thinking> \n *  <thinking> ... </think>\n * \n */\nfunction removeThinkBlock(text: string): string {\n  const thinkTagRegex = /<\\s*(\\/?)\\s*(think|thinking)\\b[^>]*>/gi;\n\n  let result = '';\n  let depth = 0;\n  let lastIndex = 0;\n  let match: RegExpExecArray | null;\n\n  while ((match = thinkTagRegex.exec(text)) !== null) {\n    const isClosing = match[1] === '/';\n    const tagStart = match.index;\n    const tagEnd = thinkTagRegex.lastIndex;\n\n    // \n    //  </think>/< /thinking> \n    if (depth === 0 && !isClosing) {\n      result += text.slice(lastIndex, tagStart);\n    }\n\n    if (isClosing) {\n      //  think/thinking \n      if (depth > 0) depth -= 1;\n    } else {\n      depth += 1;\n    }\n\n    lastIndex = tagEnd;\n  }\n\n  // \n  if (depth === 0) {\n    result += text.slice(lastIndex);\n  }\n\n  return result.trim();\n}\n\n/**\n * \n *  </think> / </thinking> \n */\nexport function filterStreamingTextAfterThinkEnd(text: string): string {\n  if (!text) return '';\n\n  const closeThinkTagRegex = /<\\s*\\/\\s*(think|thinking)\\b[^>]*>/i;\n  const closeMatch = closeThinkTagRegex.exec(text);\n  if (!closeMatch) return text;\n\n  return text.slice(closeMatch.index + closeMatch[0].length).trimStart();\n}\n\n/**\n *  HTML \n */\nfunction removeHtmlComments(text: string): string {\n  return text.replace(/<!--[\\s\\S]*?(?:-->|$)/g, '').trim();\n}\n\nfunction normalizeTucaoMarkers(text: string): string {\n  return text\n    .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n    .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n    .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n    .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n    .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n    .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n}\n\nfunction extractTucaoBlocks(text: string): string[] {\n  const normalized = normalizeTucaoMarkers(text);\n  const result: string[] = [];\n  const openRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n  const closeRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n\n  let cursor = 0;\n  openRegex.lastIndex = 0;\n\n  while (openRegex.exec(normalized) !== null) {\n    const openEnd = openRegex.lastIndex;\n    closeRegex.lastIndex = openEnd;\n    const closeMatch = closeRegex.exec(normalized);\n    const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n    const content = normalized.slice(openEnd, contentEnd).trim();\n    if (content.length > 0) {\n      result.push(content);\n    }\n\n    cursor = closeMatch ? closeRegex.lastIndex : normalized.length;\n    openRegex.lastIndex = cursor;\n    if (!closeMatch) break;\n  }\n\n  return result;\n}\n\n/**\n * \n *  \"A. xxx\", \"B. xxx\" \n */\nfunction parseOptions(optionText: string): string[] {\n  if (!optionText) return [];\n  return optionText\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n *  LLM \n */\nexport function parseResponse(text: string): ParsedResponse {\n  // \n  const cleanText = removeThinkBlock(text);\n\n  // \n  const mainTextRaw = extractTagByPriority(cleanText, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(cleanText);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  const optionRaw = extractTag(cleanText, 'option');\n  const summary = extractTag(cleanText, 'sum');\n\n  //  UpdateVariable / update \n  const updateVarBlock = extractTagByPriority(cleanText, ['UpdateVariable', 'update']);\n  const jsonPatch = extractTag(updateVarBlock, 'JSONPatch');\n  const variableUpdate = updateVarBlock || jsonPatch;\n\n  // \n  const allOptions = parseOptions(optionRaw);\n\n  //  E  [Leave]\n  const hasOptionE = allOptions.some(line => /^E\\.\\s/i.test(line));\n  const hasLeave = allOptions.some(isLeaveOptionLine);\n  const hasRebirth = allOptions.some(isRebirthOptionLine);\n\n  //  E  [Leave] A-D \n  const normalOptions = allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n\n  return {\n    mainText,\n    options: normalOptions,\n    summary,\n    variableUpdate,\n    jsonPatch,\n    rawText: cleanText,\n    hasOptionE,\n    hasLeave,\n    hasRebirth,\n  };\n}\n\n/**\n *  <sum> \n * \n */\nexport function extractSummary(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTag(clean, 'sum');\n}\n\n/**\n *  <maintext> \n */\nexport function extractMainText(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  const mainTextRaw = extractTagByPriority(clean, ['maintext', 'maintxt', 'content', '']);\n  let mainText = removeHtmlComments(mainTextRaw);\n  const mainHasTucao = /<\\s*\\/?\\s*(?:tucao|)\\b|\\[\\s*\\/?\\s*tucao\\s*]|&lt;\\s*\\/?\\s*tucao\\b/i.test(mainTextRaw);\n  if (!mainHasTucao) {\n    const fallbackTucao = extractTucaoBlocks(clean);\n    if (fallbackTucao.length > 0) {\n      const merged = fallbackTucao.map(block => `<tucao>\\n${block}\\n</tucao>`).join('\\n\\n');\n      mainText = [mainText, merged].filter(part => part && part.trim().length > 0).join('\\n\\n');\n    }\n  }\n  return mainText;\n}\n\n/**\n * <UpdateVariable> / <update>\n */\nexport function extractVariableUpdate(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTagByPriority(clean, ['UpdateVariable', 'update']);\n}\n\n/**\n *  <option>  A-D \n */\nexport function extractOptions(messageText: string): string[] {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (isLeaveOptionLine(line)) return false;\n    if (isRebirthOptionLine(line)) return false;\n    return true;\n  });\n}\n\n/**\n *  E \n */\nexport function detectOptionE(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /^E\\.\\s/i.test(line));\n}\n\n/**\n *  [Leave]\n */\nexport function detectLeave(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isLeaveOptionLine);\n}\n\n/**\n *  [Rebirth]\n */\nexport function detectRebirth(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(isRebirthOptionLine);\n}\n","// Schema import removed - using raw MVU data directly\nimport { detectLeave, detectOptionE, detectRebirth, extractMainText, extractOptions, extractSummary, extractVariableUpdate, filterStreamingTextAfterThinkEnd, parseResponse } from './responseParser';\n/**\n *  Store\n *    user   generate     assistant \n */\nexport const useGameStore = defineStore('game', () => {\n    const STREAMING_ENABLED_KEY = 'dungeon.streaming_enabled';\n    function readStreamingEnabledSetting() {\n        try {\n            const raw = localStorage.getItem(STREAMING_ENABLED_KEY);\n            if (raw === null)\n                return true;\n            return raw === 'true';\n        }\n        catch {\n            return true;\n        }\n    }\n    function persistStreamingEnabledSetting(enabled) {\n        try {\n            localStorage.setItem(STREAMING_ENABLED_KEY, String(enabled));\n        }\n        catch {\n            // Ignore persistence errors in restricted environments\n        }\n    }\n    //   \n    const mainText = ref('');\n    const options = ref([]);\n    const currentSummary = ref('');\n    const isGenerating = ref(false);\n    const streamingText = ref('');\n    const useStreaming = ref(readStreamingEnabledSetting());\n    const error = ref(null);\n    const isInitialized = ref(false);\n    //   \n    const hasOptionE = ref(false);\n    const hasLeave = ref(false);\n    const hasRebirth = ref(false);\n    const variableUpdateText = ref('');\n    //   \n    const isEditing = ref(false);\n    const editingText = ref('');\n    //  MVU  stat_data\n    const statData = ref({});\n    //   \n    const saveEntries = ref([]);\n    const isSaveLoadOpen = ref(false);\n    const pendingPortalChanges = ref(null);\n    const pendingCombatMvuChanges = ref(null);\n    const pendingStatDataChanges = ref(null);\n    function setPendingPortalChanges(changes) {\n        pendingPortalChanges.value = changes;\n    }\n    function setPendingCombatMvuChanges(changes) {\n        pendingCombatMvuChanges.value = changes ? _.cloneDeep(changes) : null;\n    }\n    function setPendingStatDataChanges(fields) {\n        pendingStatDataChanges.value = fields ? { fields: _.cloneDeep(fields) } : null;\n    }\n    function setUseStreaming(enabled) {\n        const nextEnabled = Boolean(enabled);\n        useStreaming.value = nextEnabled;\n        if (!nextEnabled) {\n            streamingText.value = '';\n        }\n        persistStreamingEnabledSetting(nextEnabled);\n    }\n    /**\n     *  MVU  user \n     */\n    function applyPendingPortalChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!changes)\n            return result;\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (changes.area !== undefined)\n            sd._ = changes.area;\n        sd._ = changes.roomType;\n        if (changes.enemyName !== undefined)\n            sd._ = changes.enemyName;\n        if (!sd.$ || typeof sd.$ !== 'object') {\n            sd.$ = {};\n        }\n        const stat = sd.$;\n        if (changes.resetRoomCounter) {\n            stat. = 0;\n        }\n        if (changes.incrementKeys) {\n            for (const key of changes.incrementKeys) {\n                stat[key] = (Number(stat[key]) || 0) + 1;\n            }\n        }\n        return result;\n    }\n    function applyPendingCombatChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes)\n            return result;\n        if (Number.isFinite(changes.hp)) {\n            sd._ = Math.max(0, Math.floor(Number(changes.hp)));\n        }\n        if (changes.addDefeatMark) {\n            const raw = sd._;\n            const base = Array.isArray(raw)\n                ? raw.filter((item) => typeof item === 'string')\n                : [];\n            if (!base.includes('[]')) {\n                base.push('[]');\n            }\n            sd._ = base;\n        }\n        if (Number.isFinite(changes.goldDelta)) {\n            const currentGold = Math.max(0, Math.floor(Number(sd._ ?? 0)));\n            const delta = Math.floor(Number(changes.goldDelta));\n            sd._ = Math.max(0, currentGold + delta);\n        }\n        return result;\n    }\n    function applyPendingStatDataChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (!changes || !changes.fields || typeof changes.fields !== 'object')\n            return result;\n        Object.assign(sd, _.cloneDeep(changes.fields));\n        return result;\n    }\n    /**\n     *  assistant \n     */\n    async function initialize() {\n        try {\n            await waitGlobalInitialized('Mvu');\n            console.info('[GameStore] MVU initialized');\n            //  assistant \n            const lastId = getLastMessageId();\n            if (lastId >= 0) {\n                loadLatestAssistantState();\n                loadStatData();\n            }\n            isInitialized.value = true;\n            console.info('[GameStore] Initialized successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Init error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     *  assistant \n     */\n    function loadLatestAssistantState() {\n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        if (messages.length > 0) {\n            const lastMsg = messages[messages.length - 1];\n            const text = lastMsg.message;\n            mainText.value = extractMainText(text);\n            options.value = extractOptions(text);\n            currentSummary.value = extractSummary(text);\n            hasOptionE.value = detectOptionE(text);\n            hasLeave.value = detectLeave(text);\n            hasRebirth.value = detectRebirth(text);\n            variableUpdateText.value = extractVariableUpdate(text);\n        }\n    }\n    /**\n     *  MVU stat_data\n     */\n    function loadStatData() {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const mvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema /\n                statData.value = raw;\n                console.info('[GameStore] stat_data loaded from message', lastId);\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] Failed to load stat_data:', err);\n        }\n    }\n    /**\n     * \n     * 1.  MVU \n     * 2.  user \n     * 3.  generate  LLM \n     * 4.  +  MVU \n     * 5.  assistant  MVU \n     * 6. \n     */\n    async function sendAction(userInput) {\n        if (isGenerating.value || !userInput.trim())\n            return;\n        error.value = null;\n        isGenerating.value = true;\n        streamingText.value = '';\n        try {\n            // 1.  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            const currentPendingPortalChanges = pendingPortalChanges.value;\n            const currentPendingCombatChanges = pendingCombatMvuChanges.value;\n            const currentPendingStatDataChanges = pendingStatDataChanges.value;\n            // 2.  user  MVU \n            const userMvuDataAfterPortal = applyPendingPortalChangesToMvu(oldMvuData, currentPendingPortalChanges);\n            const userMvuDataAfterCombat = applyPendingCombatChangesToMvu(userMvuDataAfterPortal, currentPendingCombatChanges);\n            const userMvuData = applyPendingStatDataChangesToMvu(userMvuDataAfterCombat, currentPendingStatDataChanges);\n            // 3.  user  MVU \n            console.info('[GameStore] Creating user message:', userInput);\n            await createChatMessages([{ role: 'user', message: userInput, data: userMvuData }], { refresh: 'none' });\n            // user \n            pendingPortalChanges.value = null;\n            pendingCombatMvuChanges.value = null;\n            pendingStatDataChanges.value = null;\n            // 4. \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, _generation_id) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // 5.  generate \n            console.info('[GameStore] Generating LLM response...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            console.info('[GameStore] LLM response received, length:', result.length);\n            // \n            streamListener.stop();\n            streamingText.value = '';\n            // 6. \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            // 7.  MVU  user \n            let newMvuData = await Mvu.parseMessage(result, _.cloneDeep(userMvuData));\n            if (!newMvuData) {\n                newMvuData = _.cloneDeep(userMvuData);\n            }\n            else if (!newMvuData.stat_data && userMvuData?.stat_data) {\n                newMvuData.stat_data = _.cloneDeep(userMvuData.stat_data);\n            }\n            // 8.  MVU \n            if (newMvuData) {\n                delete newMvuData.display_data;\n                delete newMvuData.delta_data;\n            }\n            // 9.  assistant  MVU \n            console.info('[GameStore] Creating assistant message with MVU data');\n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            // 10.  stat_data\n            refreshLocalStatData(newMvuData);\n            console.info('[GameStore] Action completed successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] sendAction error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function applyParsedResponse(parsed) {\n        mainText.value = parsed.mainText;\n        options.value = parsed.options;\n        currentSummary.value = parsed.summary;\n        hasOptionE.value = parsed.hasOptionE;\n        hasLeave.value = parsed.hasLeave;\n        hasRebirth.value = parsed.hasRebirth;\n        variableUpdateText.value = parsed.variableUpdate;\n    }\n    /**\n     *  MVU  stat_data \n     */\n    function refreshLocalStatData(mvuData) {\n        try {\n            if (!mvuData)\n                return;\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema.safeParse /\n                statData.value = raw;\n                console.info('[GameStore] Local stat_data refreshed:', JSON.stringify(raw.$));\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] refreshLocalStatData error:', err);\n        }\n    }\n    /**\n     *  <sum> \n     */\n    function loadSaveEntries() {\n        const entries = [];\n        const lastId = getLastMessageId();\n        if (lastId < 0) {\n            saveEntries.value = entries;\n            return;\n        }\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        for (const msg of messages) {\n            const summary = extractSummary(msg.message);\n            if (summary) {\n                entries.push({\n                    messageId: msg.message_id,\n                    summary,\n                });\n            }\n        }\n        saveEntries.value = entries;\n    }\n    /**\n     * \n     */\n    async function rollbackTo(targetMessageId) {\n        try {\n            const lastId = getLastMessageId();\n            if (targetMessageId >= lastId) {\n                console.warn('[GameStore] Cannot rollback: target is current or future');\n                return;\n            }\n            //  target \n            const idsToDelete = [];\n            for (let i = targetMessageId + 1; i <= lastId; i++) {\n                idsToDelete.push(i);\n            }\n            console.info(`[GameStore] Rolling back: deleting messages ${targetMessageId + 1} to ${lastId}`);\n            await deleteChatMessages(idsToDelete, { refresh: 'none' });\n            //  assistant \n            loadLatestAssistantState();\n            //  MVU  getLastMessageId\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: targetMessageId });\n                const raw = _.get(mvuData, 'stat_data');\n                if (raw && typeof raw === 'object') {\n                    statData.value = raw;\n                    console.info('[GameStore] Rollback: loaded stat_data from message', targetMessageId);\n                }\n            }\n            catch (e) {\n                console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back', e);\n                loadStatData();\n            }\n            // \n            isSaveLoadOpen.value = false;\n            toastr.success('');\n            console.info('[GameStore] Rollback completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Rollback error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * Roll assistant+user \n     */\n    async function rerollCurrent() {\n        if (isGenerating.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 1) {\n                console.warn('[GameStore] Cannot reroll: not enough messages');\n                return;\n            }\n            isGenerating.value = true;\n            error.value = null;\n            streamingText.value = '';\n            //  user  re-generate \n            const allMessages = getChatMessages(`0-${lastId}`);\n            const lastUserMsg = [...allMessages].reverse().find(m => m.role === 'user');\n            const userInput = lastUserMsg ? lastUserMsg.message : '';\n            //  assistant \n            console.info('[GameStore] Reroll: deleting message', lastId);\n            await deleteChatMessages([lastId], { refresh: 'none' });\n            //  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            // \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text) => {\n                streamingText.value = filterStreamingTextAfterThinkEnd(text);\n            });\n            // \n            console.info('[GameStore] Reroll: regenerating...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: useStreaming.value,\n            });\n            streamListener.stop();\n            streamingText.value = '';\n            // \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            //  MVU \n            const newMvuData = await Mvu.parseMessage(result, _.cloneDeep(oldMvuData));\n            //  assistant  MVU \n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            toastr.success('');\n            console.info('[GameStore] Reroll completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Reroll error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function startEdit() {\n        if (isEditing.value || isGenerating.value)\n            return;\n        //  SillyTavern  assistant \n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`${lastId}-${lastId}`);\n        if (messages.length === 0)\n            return;\n        editingText.value = messages[0].message;\n        isEditing.value = true;\n    }\n    /**\n     *  assistant \n     */\n    async function saveEdit() {\n        if (!isEditing.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            //  MVU \n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            //  MVU \n            const prevMvuData = lastId > 0\n                ? Mvu.getMvuData({ type: 'message', message_id: lastId - 1 })\n                : Mvu.getMvuData({ type: 'message', message_id: 0 });\n            //  MVU \n            let newMvuData = await Mvu.parseMessage(editingText.value, _.cloneDeep(prevMvuData));\n            //  stat_data / display_data\n            //  MVU \n            if (newMvuData && currentMvuData) {\n                if (!newMvuData.stat_data && currentMvuData.stat_data) {\n                    newMvuData.stat_data = currentMvuData.stat_data;\n                }\n                if (!newMvuData.display_data && currentMvuData.display_data) {\n                    newMvuData.display_data = currentMvuData.display_data;\n                }\n            }\n            else if (!newMvuData && currentMvuData) {\n                // parseMessage \n                newMvuData = currentMvuData;\n            }\n            // \n            await setChatMessages([{ message_id: lastId, message: editingText.value }], { refresh: 'none' });\n            //  MVU \n            if (newMvuData) {\n                await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id: lastId });\n            }\n            // \n            const parsed = parseResponse(editingText.value);\n            applyParsedResponse(parsed);\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            isEditing.value = false;\n            editingText.value = '';\n            toastr.success('');\n            console.info('[GameStore] Edit saved');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Save edit error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * \n     */\n    function cancelEdit() {\n        isEditing.value = false;\n        editingText.value = '';\n    }\n    /**\n     *  stat_data \n     */\n    async function updateStatDataFields(fields) {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0) {\n                error.value = '';\n                return false;\n            }\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const nextMvuData = _.cloneDeep(currentMvuData ?? {});\n            if (!nextMvuData.stat_data || typeof nextMvuData.stat_data !== 'object') {\n                nextMvuData.stat_data = {};\n            }\n            Object.assign(nextMvuData.stat_data, _.cloneDeep(fields));\n            await Mvu.replaceMvuData(nextMvuData, { type: 'message', message_id: lastId });\n            refreshLocalStatData(nextMvuData);\n            return true;\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] updateStatDataFields error:', msg);\n            error.value = `: ${msg}`;\n            return false;\n        }\n    }\n    return {\n        // State\n        mainText,\n        options,\n        currentSummary,\n        isGenerating,\n        useStreaming,\n        streamingText,\n        error,\n        isInitialized,\n        statData,\n        saveEntries,\n        isSaveLoadOpen,\n        isEditing,\n        editingText,\n        hasOptionE,\n        hasLeave,\n        hasRebirth,\n        variableUpdateText,\n        // Actions\n        initialize,\n        sendAction,\n        setUseStreaming,\n        setPendingPortalChanges,\n        setPendingCombatMvuChanges,\n        setPendingStatDataChanges,\n        loadStatData,\n        loadSaveEntries,\n        rollbackTo,\n        rerollCurrent,\n        startEdit,\n        saveEdit,\n        cancelEdit,\n        updateStatDataFields,\n    };\n});\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link2 = createLucideIcon(\"link-2\", [\n  [\"path\", { d: \"M9 17H7A5 5 0 0 1 7 7h2\", key: \"8i5ue5\" }],\n  [\"path\", { d: \"M15 7h2a5 5 0 1 1 0 10h-2\", key: \"1b9ql8\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"12\", y2: \"12\", key: \"1jonct\" }]\n]);\n\nexport { Link2 as default };\n//# sourceMappingURL=link-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Skull = createLucideIcon(\"skull\", [\n  [\"path\", { d: \"m12.5 17-.5-1-.5 1h1z\", key: \"3me087\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z\",\n      key: \"1o5pge\"\n    }\n  ],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }]\n]);\n\nexport { Skull as default };\n//# sourceMappingURL=skull.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"bug\", [\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z\", key: \"uouzyp\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M21 21a4 4 0 0 0-3.81-4\", key: \"1b0z45\" }],\n  [\"path\", { d: \"M21 5a4 4 0 0 1-3.55 3.97\", key: \"5cxbf6\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M3 21a4 4 0 0 1 3.81-4\", key: \"1fjd4g\" }],\n  [\"path\", { d: \"M3 5a4 4 0 0 0 3.55 3.97\", key: \"1d7oge\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M9 7.13V6a3 3 0 1 1 6 0v1.13\", key: \"1vgav8\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplet = createLucideIcon(\"droplet\", [\n  [\n    \"path\",\n    {\n      d: \"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z\",\n      key: \"c7niix\"\n    }\n  ]\n]);\n\nexport { Droplet as default };\n//# sourceMappingURL=droplet.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flame = createLucideIcon(\"flame\", [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n]);\n\nexport { Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"heart\", [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ban = createLucideIcon(\"ban\", [\n  [\"path\", { d: \"M4.929 4.929 19.07 19.071\", key: \"196cmz\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Ban as default };\n//# sourceMappingURL=ban.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"zap\", [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Snowflake = createLucideIcon(\"snowflake\", [\n  [\"path\", { d: \"m10 20-1.25-2.5L6 18\", key: \"18frcb\" }],\n  [\"path\", { d: \"M10 4 8.75 6.5 6 6\", key: \"7mghy3\" }],\n  [\"path\", { d: \"m14 20 1.25-2.5L18 18\", key: \"1chtki\" }],\n  [\"path\", { d: \"m14 4 1.25 2.5L18 6\", key: \"1b4wsy\" }],\n  [\"path\", { d: \"m17 21-3-6h-4\", key: \"15hhxa\" }],\n  [\"path\", { d: \"m17 3-3 6 1.5 3\", key: \"11697g\" }],\n  [\"path\", { d: \"M2 12h6.5L10 9\", key: \"kv9z4n\" }],\n  [\"path\", { d: \"m20 10-1.5 2 1.5 2\", key: \"1swlpi\" }],\n  [\"path\", { d: \"M22 12h-6.5L14 15\", key: \"1mxi28\" }],\n  [\"path\", { d: \"m4 10 1.5 2L4 14\", key: \"k9enpj\" }],\n  [\"path\", { d: \"m7 21 3-6-1.5-3\", key: \"j8hb9u\" }],\n  [\"path\", { d: \"m7 3 3 6h4\", key: \"1otusx\" }]\n]);\n\nexport { Snowflake as default };\n//# sourceMappingURL=snowflake.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bone = createLucideIcon(\"bone\", [\n  [\n    \"path\",\n    {\n      d: \"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z\",\n      key: \"w610uw\"\n    }\n  ]\n]);\n\nexport { Bone as default };\n//# sourceMappingURL=bone.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Battery = createLucideIcon(\"battery\", [\n  [\"path\", { d: \"M 22 14 L 22 10\", key: \"nqc4tb\" }],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"16\", height: \"12\", rx: \"2\", key: \"13zb55\" }]\n]);\n\nexport { Battery as default };\n//# sourceMappingURL=battery.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Waves = createLucideIcon(\"waves\", [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n]);\n\nexport { Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eye = createLucideIcon(\"eye\", [\n  [\n    \"path\",\n    {\n      d: \"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0\",\n      key: \"1nclc0\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Eye as default };\n//# sourceMappingURL=eye.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EyeOff = createLucideIcon(\"eye-off\", [\n  [\n    \"path\",\n    {\n      d: \"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49\",\n      key: \"ct8e1f\"\n    }\n  ],\n  [\"path\", { d: \"M14.084 14.158a3 3 0 0 1-4.242-4.242\", key: \"151rxh\" }],\n  [\n    \"path\",\n    {\n      d: \"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143\",\n      key: \"13bj9a\"\n    }\n  ],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { EyeOff as default };\n//# sourceMappingURL=eye-off.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"brain\", [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"settings-2\", [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"trash-2\", [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"x\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","// \n//     &  & \n// \n\nimport {\n    type CardData,\n    CardType,\n    type ClashResult,\n    type DamageCalculationContext,\n    EffectType,\n    type EntityStats,\n    type PointCalculationContext,\n} from '../types';\nimport {\n    findEffect,\n    getEffectStacks,\n    hasEffect,\n    reduceEffectStacks,\n    removeEffect,\n} from './effects';\n\n// \n//  A. \n// \n\n/**\n * \n * FinalPoint = (BaseDice * Multiplier + Addition) * BuffMod * RelicMod + BuffAdd + RelicAdd\n */\nexport function calculateFinalPoint(ctx: PointCalculationContext): number {\n  const { baseDice, card, relicModifiers } = ctx;\n\n  // Step 1-2: \n  let point = baseDice * card.calculation.multiplier + card.calculation.addition;\n\n  // Step 3-4: \n  point *= relicModifiers.globalMultiplier;\n\n  // Step 5-6: \n  point += relicModifiers.globalAddition;\n\n  return Math.max(0, Math.floor(point));\n}\n\n// \n//  B. \n// \n\n/**\n * \n * 1.  vs   2.  vs   3.  vs (|)  4. \n */\nexport function shouldClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  forceClashFunction: boolean = false,\n): boolean {\n  const p = playerCard.type;\n  const e = enemyCard.type;\n\n  if (p === CardType.FUNCTION || e === CardType.FUNCTION) return forceClashFunction;\n  if (p === e) return true;\n  if (p === CardType.DODGE && (e === CardType.PHYSICAL || e === CardType.MAGIC)) return true;\n  if (e === CardType.DODGE && (p === CardType.PHYSICAL || p === CardType.MAGIC)) return true;\n\n  return false;\n}\n\n/**\n * \n *  <  = \n */\nexport function resolveClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  playerPoint: number,\n  enemyPoint: number,\n): ClashResult {\n  const isPlayerDodge = playerCard.type === CardType.DODGE;\n  const isEnemyDodge = enemyCard.type === CardType.DODGE;\n\n  // \n  if (isPlayerDodge && !isEnemyDodge) {\n    if (playerPoint < enemyPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n    }\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint}  ${enemyPoint})` };\n  }\n  // \n  if (isEnemyDodge && !isPlayerDodge) {\n    if (enemyPoint < playerPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint} < ${playerPoint})` };\n    }\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint}  ${playerPoint})` };\n  }\n  // \n  if (playerPoint > enemyPoint) {\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} > ${enemyPoint})` };\n  } else if (enemyPoint > playerPoint) {\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n  }\n  return { outcome: 'draw', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint})` };\n}\n\n// \n//  C. \n// \n\n/**\n * \n * relative: FinalPoint * scale + scaleAddition\n * fixed:    value\n * mixed:    baseValue + FinalPoint * scale + scaleAddition\n */\nexport function calculateRawDamage(finalPoint: number, card: CardData): number {\n  const dl = card.damageLogic;\n  switch (dl.mode) {\n    case 'relative': return finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    case 'fixed':    return dl.value ?? 0;\n    case 'mixed':    return (dl.baseValue ?? 0) + finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    default:         return 0;\n  }\n}\n\n/**\n * \n *           \n */\nexport function calculateFinalDamage(ctx: DamageCalculationContext): { damage: number; isTrueDamage: boolean; logs: string[] } {\n  const logs: string[] = [];\n  let damage = calculateRawDamage(ctx.finalPoint, ctx.card);\n  logs.push(`: ${Math.floor(damage)}`);\n\n  const isTrueDamage = ctx.isTrueDamage ?? false;\n\n  // \n  const cold = ctx.attackerEffects.find(e => e.type === EffectType.COLD)?.stacks ?? 0;\n  if (cold > 0) { damage -= cold; logs.push(`[] -${cold}`); }\n\n  // /\n  const defenderHasNonEntity = ctx.defenderEffects.some((e) => e.type === EffectType.NON_ENTITY && e.stacks > 0);\n  if (defenderHasNonEntity) {\n    if (ctx.card.type === CardType.PHYSICAL) {\n      damage *= 0.5;\n      logs.push('[]  x0.5');\n    } else if (ctx.card.type === CardType.MAGIC) {\n      damage *= 1.5;\n      logs.push('[]  x1.5');\n    }\n  }\n\n  if (isTrueDamage) {\n    logs.push(``);\n    return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: true, logs };\n  }\n\n  // \n  const vuln = ctx.defenderEffects.find(e => e.type === EffectType.VULNERABLE)?.stacks ?? 0;\n  if (vuln > 0) { damage += vuln; logs.push(`[] +${vuln}`); }\n\n  // \n  const sturdy = ctx.defenderEffects.find(e => e.type === EffectType.STURDY)?.stacks ?? 0;\n  if (sturdy > 0) { damage -= sturdy; logs.push(`[] -${sturdy}`); }\n\n  //  applyDamageToEntity \n  if (ctx.defenderEffects.some(e => e.type === EffectType.BARRIER && e.stacks > 0)) {\n    logs.push(`[] `);\n  }\n\n  //  applyDamageToEntity \n  const armor = ctx.defenderEffects.find(e => e.type === EffectType.ARMOR)?.stacks ?? 0;\n  if (armor > 0) { logs.push(`[]  ${armor} `); }\n\n  return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: false, logs };\n}\n\n/**\n * \n */\nexport function triggerSwarmReviveIfNeeded(target: EntityStats): { revived: boolean; logs: string[] } {\n  const logs: string[] = [];\n  if (target.hp > 0) return { revived: false, logs };\n  if (target.maxHp <= 0) return { revived: false, logs };\n\n  const swarmStacks = getEffectStacks(target, EffectType.SWARM);\n  if (swarmStacks > 0) {\n    reduceEffectStacks(target, EffectType.SWARM, 1);\n    target.hp = target.maxHp;\n    logs.push(`[] 1${target.maxHp}`);\n    return { revived: true, logs };\n  }\n\n  const indomitableStacks = getEffectStacks(target, EffectType.INDOMITABLE);\n  if (indomitableStacks > 0) {\n    reduceEffectStacks(target, EffectType.INDOMITABLE, 1);\n    target.hp = 1;\n    logs.push(`[] 11`);\n    return { revived: true, logs };\n  }\n\n  return { revived: false, logs };\n}\n\n/**\n * \n *  0 \n */\nexport function consumeColdAfterDealingDamage(attacker: EntityStats, actualDamage: number): string[] {\n  const logs: string[] = [];\n  void actualDamage;\n\n  const cold = findEffect(attacker, EffectType.COLD);\n  if (!cold || cold.stacks <= 0) return logs;\n\n  const before = cold.stacks;\n  cold.stacks = Math.floor(cold.stacks / 2);\n  if (cold.stacks <= 0) {\n    removeEffect(attacker, EffectType.COLD);\n    logs.push(`[] ${before} -> 0`);\n  } else {\n    logs.push(`[] ${before} -> ${cold.stacks}`);\n  }\n  return logs;\n}\n\n/**\n * ///\n */\nexport function applyDamageToEntity(target: EntityStats, damage: number, isTrueDamage: boolean): { actualDamage: number; logs: string[] } {\n  const logs: string[] = [];\n  if (!isTrueDamage) {\n    if (hasEffect(target, EffectType.BARRIER) && damage > 0) {\n      reduceEffectStacks(target, EffectType.BARRIER);\n      logs.push(`[] -1`);\n      return { actualDamage: 0, logs };\n    }\n    const ae = findEffect(target, EffectType.ARMOR);\n    if (ae && ae.stacks > 0 && damage > 0) {\n      const c = Math.min(ae.stacks, damage);\n      ae.stacks -= c; damage -= c;\n      if (ae.stacks <= 0) removeEffect(target, EffectType.ARMOR);\n      logs.push(`[] ${c}${damage}`);\n    }\n  }\n  const actual = Math.min(damage, target.hp);\n  target.hp -= actual;\n  logs.push(`${actual}(HP: ${target.hp}/${target.maxHp})`);\n  const reviveResult = triggerSwarmReviveIfNeeded(target);\n  logs.push(...reviveResult.logs);\n  return { actualDamage: actual, logs };\n}\n\n// \n//  D.  & \n// \n\n/** (), () */\nexport function processClashEffects(winner: EntityStats, loser: EntityStats): string[] {\n  const logs: string[] = [];\n  const bleed = getEffectStacks(loser, EffectType.BLEED);\n  if (bleed > 0) { loser.hp -= bleed; logs.push(`[] ${bleed}`); }\n  if (hasEffect(winner, EffectType.BURN)) { removeEffect(winner, EffectType.BURN); logs.push(`[] `); }\n  return logs;\n}\n\n/** ,  */\nexport function processPostAttackEffects(_attacker: EntityStats): string[] {\n  const logs: string[] = [];\n  // \n  return logs;\n}\n\n// \n//  E. \n// \n\nexport function rollDice(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sword = createLucideIcon(\"sword\", [\n  [\"path\", { d: \"m11 19-6-6\", key: \"s7kpr\" }],\n  [\"path\", { d: \"m5 21-2-2\", key: \"1kw20b\" }],\n  [\"path\", { d: \"m8 16-4 4\", key: \"1oqv8h\" }],\n  [\"path\", { d: \"M9.5 17.5 21 6V3h-3L6.5 14.5\", key: \"pkxemp\" }]\n]);\n\nexport { Sword as default };\n//# sourceMappingURL=sword.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"refresh-ccw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Footprints = createLucideIcon(\"footprints\", [\n  [\n    \"path\",\n    {\n      d: \"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z\",\n      key: \"1dudjm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z\",\n      key: \"l2t8xc\"\n    }\n  ],\n  [\"path\", { d: \"M16 17h4\", key: \"1dejxt\" }],\n  [\"path\", { d: \"M4 13h4\", key: \"1bwh8b\" }]\n]);\n\nexport { Footprints as default };\n//# sourceMappingURL=footprints.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_2 = { class: \"bg-black/60 p-1 rounded-full border border-white/10\" };\nconst _hoisted_3 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_4 = { class: \"absolute font-heading text-white/20 text-4xl select-none\" };\nconst _hoisted_5 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_6 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_7 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_8 = { class: \"mt-1 text-center text-white/50 font-bold text-[10px] font-ui tracking-wider\" };\nimport { CircleHelp, Footprints, RefreshCcw, Skull, Sparkles, Sword } from 'lucide-vue-next';\nimport { CardType } from '../types';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonCard',\n    props: {\n        card: {},\n        disabled: { type: Boolean, default: false },\n        selected: { type: Boolean, default: false },\n        faceDown: { type: Boolean, default: false },\n        isEnemy: { type: Boolean, default: false },\n        className: { default: '' },\n        maskLevel: { default: 'none' }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        const props = __props;\n        const typeColorClass = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'border-gray-600 bg-gray-900/40';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-900 bg-red-950/30';\n                case CardType.MAGIC:\n                    return 'border-purple-900 bg-purple-950/30';\n                case CardType.FUNCTION:\n                    return 'border-yellow-800 bg-yellow-950/30';\n                case CardType.DODGE:\n                    return 'border-emerald-900 bg-emerald-950/30';\n                case CardType.CURSE:\n                    return 'border-violet-900 bg-violet-950/35';\n                default:\n                    return 'border-gray-700 bg-gray-800';\n            }\n        });\n        const typeIcon = computed(() => {\n            if (props.maskLevel === 'full') {\n                return CircleHelp;\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return Sword;\n                case CardType.MAGIC:\n                    return Sparkles;\n                case CardType.FUNCTION:\n                    return RefreshCcw;\n                case CardType.DODGE:\n                    return Footprints;\n                case CardType.CURSE:\n                    return Skull;\n                default:\n                    return Sword;\n            }\n        });\n        const typeIconColor = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'text-gray-400';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'text-red-400';\n                case CardType.MAGIC:\n                    return 'text-purple-400';\n                case CardType.FUNCTION:\n                    return 'text-yellow-400';\n                case CardType.DODGE:\n                    return 'text-emerald-400';\n                case CardType.CURSE:\n                    return 'text-violet-400';\n                default:\n                    return 'text-gray-400';\n            }\n        });\n        const cardStrengthLabel = computed(() => {\n            const dl = props.card.damageLogic;\n            switch (dl.mode) {\n                case 'relative': return ` ${dl.scale ?? 1}x`;\n                case 'fixed': return dl.value ? ` ${dl.value}` : '';\n                case 'mixed': return `${dl.baseValue ?? 0}+${dl.scale ?? 1}x`;\n                default: return '';\n            }\n        });\n        const typeGradient = computed(() => {\n            if (props.maskLevel === 'full') {\n                return 'bg-gradient-to-tr from-gray-700 to-black';\n            }\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'bg-gradient-to-tr from-red-900 to-black';\n                case CardType.MAGIC:\n                    return 'bg-gradient-to-tr from-purple-900 to-black';\n                case CardType.FUNCTION:\n                    return 'bg-gradient-to-tr from-yellow-900 to-black';\n                case CardType.DODGE:\n                    return 'bg-gradient-to-tr from-emerald-900 to-black';\n                case CardType.CURSE:\n                    return 'bg-gradient-to-tr from-violet-900 to-black';\n                default:\n                    return 'bg-gradient-to-tr from-gray-800 to-black';\n            }\n        });\n        const displayName = computed(() => (props.maskLevel === 'none' ? props.card.name : '???'));\n        const displayDescription = computed(() => (props.maskLevel === 'none' ? props.card.description : '???'));\n        const displayTypeText = computed(() => (props.maskLevel === 'full' ? '?' : props.card.type));\n        const displayInitial = computed(() => (displayName.value[0] ?? '?'));\n        const showManaBadge = computed(() => (props.maskLevel !== 'full'\n            && props.card.type === CardType.MAGIC\n            && props.card.manaCost > 0));\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" Face Down Card \"),\n                (__props.faceDown)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"w-40 h-60 rounded-xl bg-[#252030] border-2 border-[#3a3040] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2\", __props.className])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"div\", { class: \"absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50\" }, [\n                                _createElementVNode(\"div\", { class: \"size-16 rounded-full border-2 border-[#5c3a21] opacity-30\" })\n                            ], -1 /* CACHED */)\n                        ]))], 2 /* CLASS */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Face Up Card \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"relative w-40 h-60 rounded-xl shadow-2xl transition-all duration-300 transform bg-[#16121e] border-2 cursor-pointer\", [\n                                    _unref(typeColorClass),\n                                    __props.selected ? 'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20' : 'hover:-translate-y-2 hover:z-10',\n                                    __props.disabled ? 'opacity-80 !cursor-default' : '',\n                                    __props.className,\n                                ]]),\n                            onClick: _cache[0] || (_cache[0] = ($event) => (!__props.disabled && _ctx.$emit('click')))\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-400/40 shadow-md\", !_unref(showManaBadge) ? 'opacity-0' : ''])\n                                }, _toDisplayString(__props.card.manaCost), 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(typeIcon)), {\n                                        class: _normalizeClass([\"size-5\", _unref(typeIconColor)])\n                                    }, null, 8 /* PROPS */, [\"class\"]))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Image Placeholder \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"size-full opacity-60\", _unref(typeGradient)])\n                                }, null, 2 /* CLASS */),\n                                _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_unref(displayInitial)), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"h3\", _hoisted_6, _toDisplayString(_unref(displayName)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_unref(displayDescription)), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(_unref(displayTypeText)), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */)\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\n\nimport { ref, computed, watch, onUnmounted } from 'vue';\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    class: \"absolute inset-0 size-full\",\n    style: { \"filter\": \"drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))\" }\n};\nconst _hoisted_2 = [\"fill\", \"stroke\"];\nconst _hoisted_3 = [\"stroke\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonDice',\n    props: {\n        value: {},\n        rolling: { type: Boolean },\n        color: { default: 'gold' },\n        size: { default: 'md' },\n        className: { default: '' },\n        rollingMin: { default: 1 },\n        rollingMax: { default: 6 },\n        numberClass: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayValue = ref(1);\n        let interval = null;\n        const gradientId = `grad-${props.color}-${Math.random().toString(36).substr(2, 9)}`;\n        const sizeClass = computed(() => {\n            const map = { sm: 'w-12 h-12', md: 'w-20 h-20', lg: 'w-32 h-32' };\n            return map[props.size];\n        });\n        const numberSizeClass = computed(() => {\n            const map = { sm: 'text-xl', md: 'text-3xl', lg: 'text-6xl' };\n            return map[props.size];\n        });\n        const borderColor = computed(() => (props.color === 'gold' ? '#4d331f' : '#2a0505'));\n        const textColor = computed(() => (props.color === 'gold' ? 'text-[#2c1a0e]' : 'text-[#2c0e0e]'));\n        const numberTextClass = computed(() => props.numberClass || textColor.value);\n        const getRollingRange = () => {\n            const min = Math.floor(Math.min(props.rollingMin, props.rollingMax));\n            const max = Math.floor(Math.max(props.rollingMin, props.rollingMax));\n            return {\n                min: Number.isFinite(min) ? min : 1,\n                max: Number.isFinite(max) ? max : 6,\n            };\n        };\n        const rollRandomInRange = () => {\n            const { min, max } = getRollingRange();\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        watch(() => [props.rolling, props.value, props.rollingMin, props.rollingMax], ([rolling]) => {\n            if (interval) {\n                clearInterval(interval);\n                interval = null;\n            }\n            if (rolling) {\n                interval = setInterval(() => {\n                    displayValue.value = rollRandomInRange();\n                }, 80);\n            }\n            else {\n                displayValue.value = props.value;\n            }\n        }, { immediate: true });\n        onUnmounted(() => {\n            if (interval)\n                clearInterval(interval);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative flex items-center justify-center drop-shadow-xl transition-all duration-300\", [__props.rolling ? 'animate-bounce' : '', __props.className]])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"relative flex items-center justify-center\", _unref(sizeClass)])\n                }, [\n                    (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [\n                        _createElementVNode(\"defs\", null, [\n                            _createElementVNode(\"linearGradient\", {\n                                id: gradientId,\n                                x1: \"0%\",\n                                y1: \"0%\",\n                                x2: \"100%\",\n                                y2: \"100%\"\n                            }, [\n                                (__props.color === 'gold')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[0] || (_cache[0] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#f9e6a0\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#d4af37\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#8a7122\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#fca5a5\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#ef4444\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#7f1d1d\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ]),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 2, 93 25, 93 75, 50 98, 7 75, 7 25\",\n                            fill: `url(#${gradientId})`,\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"3\"\n                        }, null, 8 /* PROPS */, _hoisted_2),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 8, 87 29, 87 71, 50 92, 13 71, 13 29\",\n                            fill: \"none\",\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"1\",\n                            opacity: \"0.4\"\n                        }, null, 8 /* PROPS */, _hoisted_3)\n                    ])),\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"relative z-10 font-heading font-bold drop-shadow-sm\", [_unref(numberTextClass), _unref(numberSizeClass)]])\n                    }, _toDisplayString(_unref(displayValue)), 3 /* TEXT, CLASS */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createVNode as _createVNode, isRef as _isRef, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createBlock as _createBlock, Fragment as _Fragment, renderList as _renderList, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = { class: \"absolute top-4 left-4 z-50 pointer-events-auto flex flex-col gap-2 scale-[1.1] origin-top-left\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"mt-1 w-52 bg-[#1a1520]/95 border border-white/10 rounded-xl p-3 text-xs text-dungeon-paper shadow-xl backdrop-blur-md\"\n};\nconst _hoisted_5 = { class: \"flex flex-col gap-3\" };\nconst _hoisted_6 = { class: \"flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_7 = { class: \"absolute top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-none scale-[1.1] origin-top\" };\nconst _hoisted_8 = { class: \"flex flex-col items-center\" };\nconst _hoisted_9 = { class: \"text-lg font-heading font-bold text-white/90\" };\nconst _hoisted_10 = { class: \"absolute inset-0 z-10 pointer-events-none\" };\nconst _hoisted_11 = { class: \"absolute top-[3%] right-[2%] md:top-[5%] md:right-[3%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000 scale-[1.1] origin-top-right\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"absolute -left-48 top-8\"\n};\nconst _hoisted_13 = { class: \"relative\" };\nconst _hoisted_14 = { class: \"rotate-[-3deg] shadow-[0_0_20px_rgba(200,120,0,0.15)]\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_16 = { class: \"text-white/70\" };\nconst _hoisted_17 = { class: \"font-bold text-[#b08a2e]\" };\nconst _hoisted_18 = { class: \"relative w-full h-full\" };\nconst _hoisted_19 = { class: \"absolute bottom-0 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_20 = [\"src\"];\nconst _hoisted_21 = { class: \"relative overflow-visible mt-3 w-72 scale-[1.2] origin-top bg-[#18141e]/90 border border-white/8 p-3 rounded-xl shadow-lg backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_22 = { class: \"flex justify-between text-sm text-white/90 font-bold mb-1.5\" };\nconst _hoisted_23 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_25 = [\"aria-label\"];\nconst _hoisted_26 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_27 = [\"aria-label\"];\nconst _hoisted_28 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_29 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_30 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_31 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_32 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_33 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_34 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_35 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_36 = { class: \"text-[10px] text-red-300\" };\nconst _hoisted_37 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_38 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_39 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_40 = { class: \"absolute bottom-[18%] left-[3%] md:bottom-[22%] md:left-[6%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32 scale-[1.1] origin-bottom-left\" };\nconst _hoisted_41 = [\"title\"];\nconst _hoisted_42 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_43 = { class: \"text-white/70\" };\nconst _hoisted_44 = { class: \"font-bold text-red-800\" };\nconst _hoisted_45 = { class: \"relative w-full h-full\" };\nconst _hoisted_46 = { class: \"absolute bottom-4 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_47 = {\n    key: 0,\n    class: \"size-20 bg-dungeon-gold/15 blur-2xl rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n};\nconst _hoisted_48 = [\"src\"];\nconst _hoisted_49 = { class: \"relative overflow-visible mt-2 w-60 scale-[1.2] origin-bottom bg-[#18141e]/90 border border-white/8 p-2.5 rounded-xl shadow-xl backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_50 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_51 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_52 = [\"aria-label\"];\nconst _hoisted_53 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_54 = [\"aria-label\"];\nconst _hoisted_55 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_56 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_57 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_58 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_59 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_60 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_61 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_62 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_63 = { class: \"text-[10px] text-dungeon-gold\" };\nconst _hoisted_64 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_65 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_66 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_67 = { class: \"absolute inset-0 z-[45] pointer-events-none overflow-hidden\" };\nconst _hoisted_68 = { class: \"absolute inset-0 z-30 flex flex-col pointer-events-none\" };\nconst _hoisted_69 = { class: \"flex-1 flex items-center justify-center relative\" };\nconst _hoisted_70 = {\n    key: 0,\n    class: \"relative w-full h-64 flex items-center justify-center z-50\"\n};\nconst _hoisted_71 = { class: \"pointer-events-none min-h-[200px] w-full flex items-end justify-center pb-6 px-4 space-x-4 relative\" };\nconst _hoisted_72 = { class: \"flex space-x-4 items-end mb-2 z-40 scale-[1.1] origin-bottom pointer-events-auto\" };\nconst _hoisted_73 = [\"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_74 = { class: \"absolute right-6 bottom-6 flex flex-col items-end gap-2.5 z-50 scale-[1.1] origin-bottom-right pointer-events-auto\" };\nconst _hoisted_75 = [\"disabled\"];\nconst _hoisted_76 = { class: \"flex space-x-3\" };\nconst _hoisted_77 = { class: \"relative group\" };\nconst _hoisted_78 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_79 = { class: \"relative group\" };\nconst _hoisted_80 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_81 = { class: \"absolute right-0 top-14 z-40 pointer-events-auto select-none scale-[1.1] origin-top-right\" };\nconst _hoisted_82 = { class: \"flex items-start\" };\nconst _hoisted_83 = [\"title\"];\nconst _hoisted_84 = {\n    key: 0,\n    class: \"w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-1 text-[10px] font-mono text-gray-300\"\n};\nconst _hoisted_85 = [\"innerHTML\"];\nconst _hoisted_86 = {\n    key: 0,\n    class: \"absolute inset-0 z-[70] flex items-center justify-center pointer-events-none\"\n};\nconst _hoisted_87 = { class: \"effect-tooltip-name\" };\nconst _hoisted_88 = { class: \"effect-tooltip-desc\" };\nconst _hoisted_89 = {\n    key: 0,\n    class: \"effect-tooltip-stacks\"\n};\nconst _hoisted_90 = { class: \"flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2\" };\nconst _hoisted_91 = { class: \"font-heading text-xl text-dungeon-gold\" };\nconst _hoisted_92 = { class: \"overflow-y-auto grid grid-cols-4 gap-4 p-2\" };\nimport { Ban, Battery, Brain, Bone, Box, Bug, Droplet, Eye, EyeOff, Flame, Heart, Layers, Link2, Scroll, Settings2, Shield, ShieldCheck, Skull, Snowflake, Sparkles, Trash2, TriangleAlert, Waves, X as XIcon, Zap, } from 'lucide-vue-next';\nimport { applyDamageToEntity, calculateFinalDamage, calculateFinalPoint, consumeColdAfterDealingDamage, triggerSwarmReviveIfNeeded } from '../battle/algorithms';\nimport { getCardByName } from '../battle/cardRegistry';\nimport { EFFECT_REGISTRY, ELEMENTAL_DEBUFF_TYPES, applyEffect, canPlayCard, getEffectStacks, processOnTurnEnd, processOnTurnStart, reduceEffectStacks, removeEffect } from '../battle/effects';\nimport { getEnemyByName } from '../battle/enemyRegistry';\nimport { resolveRelicMap, } from '../battle/relicRegistry';\nimport { toggleFullScreen } from '../fullscreen';\nimport { getFloorNumberForArea } from '../floor';\nimport { useGameStore } from '../gameStore';\nimport { CardType, CombatPhase, EffectType as ET } from '../types';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\n\nimport { ref, computed, reactive, onMounted, onUnmounted, watch } from 'vue';\nconst HF_DATASET_REPO = 'Vin05/AI-Gallery';\nconst HF_USER_DIR = '/user';\nconst HF_MONSTER_DIR = '/';\nconst HF_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst SPEED_SETTING_KEY = 'dungeon.combat.speed_up';\nconst HP_BAR_ANIMATION_MS = 500;\nconst RESULT_DELAY_MS = 500;\nconst RESULT_BANNER_STAY_MS = 1500;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatView',\n    props: {\n        initialPlayerStats: {},\n        enemyName: {},\n        playerDeck: {},\n        playerRelics: { default: () => ({}) },\n        testStartAt999: { type: Boolean, default: false }\n    },\n    emits: [\"endCombat\", \"openDeck\", \"openRelics\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const resolveCurrentFloorNumber = () => {\n            const area = gameStore.statData._ || '';\n            const floorFromArea = getFloorNumberForArea(area);\n            const fallback = Math.max(1, Math.floor(Number(gameStore.statData._ ?? 1)));\n            const floor = area ? floorFromArea : fallback;\n            gameStore.statData._ = floor;\n            return floor;\n        };\n        const currentFloorNumber = resolveCurrentFloorNumber();\n        // --- Enemy Loading ---\n        const enemyDef = getEnemyByName(props.enemyName, currentFloorNumber);\n        const enemyDisplayName = enemyDef?.name ?? props.enemyName;\n        // --- Portrait URLs ---\n        const HF_RESOLVE_ROOT = `https://huggingface.co/datasets/${HF_DATASET_REPO}/resolve/main`;\n        const HF_TREE_API_ROOT = `https://huggingface.co/api/datasets/${HF_DATASET_REPO}/tree/main`;\n        const IMAGE_EXT_RE = /\\.(png|jpe?g|webp|gif|avif|bmp|svg)$/i;\n        const BOSS_FOLDER_NAMES = new Set([\n            '', '', '', '', '', '',\n            '', '', '', '', '',\n            '', '', '', '',\n            '', '', '', '',\n            '', '', '', '', '', '',\n        ]);\n        const folderImageCache = new Map();\n        const folderImagePromiseCache = new Map();\n        const normalizeRepoPath = (path) => path.replace(/\\\\/g, '/').replace(/^\\/+|\\/+$/g, '');\n        const encodeRepoPath = (path) => normalizeRepoPath(path).split('/').map((seg) => encodeURIComponent(seg)).join('/');\n        const toResolveUrl = (repoPath) => `${HF_RESOLVE_ROOT}/${encodeRepoPath(repoPath)}`;\n        const pickRandom = (items) => (items.length > 0 ? items[Math.floor(Math.random() * items.length)] : null);\n        const parseNextLink = (linkHeader) => {\n            if (!linkHeader)\n                return null;\n            const match = linkHeader.match(/<([^>]+)>\\s*;\\s*rel=\"next\"/i);\n            return match?.[1] ?? null;\n        };\n        const fetchFolderImages = async (repoFolderPath) => {\n            const folder = normalizeRepoPath(repoFolderPath);\n            const cached = folderImageCache.get(folder);\n            if (cached)\n                return cached;\n            const pending = folderImagePromiseCache.get(folder);\n            if (pending)\n                return pending;\n            const task = (async () => {\n                const images = [];\n                let nextUrl = `${HF_TREE_API_ROOT}/${encodeRepoPath(folder)}?recursive=true&limit=1000`;\n                while (nextUrl) {\n                    let response;\n                    try {\n                        response = await fetch(nextUrl);\n                    }\n                    catch {\n                        break;\n                    }\n                    if (!response.ok)\n                        break;\n                    let entries = [];\n                    try {\n                        entries = await response.json();\n                    }\n                    catch {\n                        break;\n                    }\n                    for (const entry of entries) {\n                        if (entry.type !== 'file' || !entry.path)\n                            continue;\n                        if (!IMAGE_EXT_RE.test(entry.path))\n                            continue;\n                        images.push(entry.path);\n                    }\n                    nextUrl = parseNextLink(response.headers.get('link'));\n                }\n                folderImageCache.set(folder, images);\n                return images;\n            })();\n            folderImagePromiseCache.set(folder, task);\n            try {\n                return await task;\n            }\n            finally {\n                folderImagePromiseCache.delete(folder);\n            }\n        };\n        const playerPortraitUrl = ref(toResolveUrl(`${HF_USER_DIR}/.png`));\n        const enemyPortraitUrl = ref(toResolveUrl(`${HF_MONSTER_DIR}/${enemyDisplayName}.png`));\n        const playerPortraitError = ref(false);\n        const enemyPortraitError = ref(false);\n        let portraitLoaderDisposed = false;\n        const resolveRandomPortrait = async (folderPath, fallbackFilePath) => {\n            const images = await fetchFolderImages(folderPath);\n            const randomPath = pickRandom(images);\n            return randomPath ? toResolveUrl(randomPath) : toResolveUrl(fallbackFilePath);\n        };\n        const initPortraitUrls = async () => {\n            const playerUrl = await resolveRandomPortrait(HF_USER_DIR, `${HF_USER_DIR}/.png`);\n            if (!portraitLoaderDisposed) {\n                playerPortraitError.value = false;\n                playerPortraitUrl.value = playerUrl;\n            }\n            const enemyFolderPath = `${HF_MONSTER_DIR}/${enemyDisplayName}`;\n            const enemyFallback = `${HF_MONSTER_DIR}/${enemyDisplayName}.png`;\n            const shouldPreferFolder = BOSS_FOLDER_NAMES.has(enemyDisplayName);\n            let enemyUrl = toResolveUrl(enemyFallback);\n            if (shouldPreferFolder) {\n                enemyUrl = await resolveRandomPortrait(enemyFolderPath, enemyFallback);\n            }\n            else {\n                const folderImages = await fetchFolderImages(enemyFolderPath);\n                const randomEnemy = pickRandom(folderImages);\n                if (randomEnemy) {\n                    enemyUrl = toResolveUrl(randomEnemy);\n                }\n            }\n            if (!portraitLoaderDisposed) {\n                enemyPortraitError.value = false;\n                enemyPortraitUrl.value = enemyUrl;\n            }\n        };\n        // --- Dynamic Background ---\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const currentArea = computed(() => gameStore.statData._ || '');\n        const currentRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!currentArea.value || bgImageError.value)\n                return '';\n            const isLord = currentRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${currentArea.value}_` : currentArea.value;\n            return `${HF_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (currentRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true; // fallback to normal area bg\n            }\n            else {\n                bgImageError.value = true; // give up, show gradient\n            }\n        }\n        // AI flags - mutable state for enemy AI decisions (e.g. hasUsedHeal)\n        const aiFlags = reactive({});\n        // --- State ---\n        const cloneEntityStats = (stats) => ({\n            ...stats,\n            effects: stats.effects.map((eff) => ({\n                ...eff,\n                restrictedTypes: eff.restrictedTypes ? [...eff.restrictedTypes] : undefined,\n            })),\n        });\n        const normalizeTestStartStats = (stats) => {\n            const cloned = cloneEntityStats(stats);\n            if (!props.testStartAt999)\n                return cloned;\n            return { ...cloned, hp: 999, maxHp: 999, mp: 999 };\n        };\n        const playerStats = ref(normalizeTestStartStats(props.initialPlayerStats));\n        const enemyStats = ref(normalizeTestStartStats(enemyDef\n            ? enemyDef.stats\n            : { hp: 1, maxHp: 1, mp: 0, minDice: 1, maxDice: 1, effects: [] }));\n        // --- Effect display helpers ---\n        const getEffectName = (type) => {\n            return EFFECT_REGISTRY[type]?.name ?? String(type);\n        };\n        const getEffectDescription = (type) => {\n            return EFFECT_REGISTRY[type]?.description ?? '';\n        };\n        const createStatusEffectPreview = (type, stacks) => ({\n            type,\n            stacks: Math.max(1, Math.floor(stacks)),\n            polarity: EFFECT_REGISTRY[type]?.polarity ?? 'special',\n        });\n        const EFFECT_ICON_COMPONENTS = {\n            [ET.BARRIER]: ShieldCheck,\n            [ET.ARMOR]: Shield,\n            [ET.BIND]: Link2,\n            [ET.DEVOUR]: Skull,\n            [ET.POISON]: Bug,\n            [ET.POISON_AMOUNT]: Droplet,\n            [ET.CORROSION]: Droplet,\n            [ET.BURN]: Flame,\n            [ET.BLEED]: Droplet,\n            [ET.VULNERABLE]: TriangleAlert,\n            [ET.REGEN]: Heart,\n            [ET.IGNITE_AURA]: Sparkles,\n            [ET.STUN]: Ban,\n            [ET.CHARGE]: Zap,\n            [ET.COLD]: Snowflake,\n            [ET.NON_LIVING]: Bone,\n            [ET.NON_ENTITY]: Sparkles,\n            [ET.MAX_HP_REDUCTION]: Heart,\n            [ET.POINT_GROWTH_BIG]: Layers,\n            [ET.POINT_GROWTH_SMALL]: Layers,\n            [ET.MANA_DRAIN]: Battery,\n            [ET.MANA_SPRING]: Waves,\n            [ET.SWARM]: Bug,\n            [ET.INDOMITABLE]: Heart,\n            [ET.PEEP_FORBIDDEN]: Eye,\n            [ET.BLIND_ASH]: EyeOff,\n            [ET.COGNITIVE_INTERFERENCE]: Brain,\n            [ET.MEMORY_FOG]: EyeOff,\n            [ET.SILENCE]: Ban,\n            [ET.STURDY]: Shield,\n            [ET.SHOCK]: Zap,\n            [ET.FLAME_ATTACH]: Flame,\n            [ET.POISON_ATTACH]: Bug,\n            [ET.TOXIN_SPREAD]: Bug,\n            [ET.AMBUSH]: Link2,\n            [ET.FROST_ATTACH]: Snowflake,\n            [ET.BLOODBLADE_ATTACH]: Droplet,\n            [ET.LIGHTNING_ATTACH]: Zap,\n        };\n        const getEffectIconComponent = (type) => {\n            return EFFECT_ICON_COMPONENTS[type] ?? Sparkles;\n        };\n        const effectIconBoxClass = (polarity) => {\n            switch (polarity) {\n                case 'buff': return 'bg-emerald-900/65 border-emerald-400/50 text-emerald-200';\n                case 'debuff': return 'bg-red-900/65 border-red-400/55 text-red-200';\n                case 'trait': return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n                case 'mixed': return 'bg-indigo-900/70 border-indigo-400/55 text-indigo-200';\n                case 'special': return 'bg-amber-900/70 border-amber-400/55 text-amber-200';\n                default: return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n            }\n        };\n        // --- Armor computed ---\n        const playerArmor = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyArmor = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmount = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const enemyPoisonAmount = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmountPercent = computed(() => {\n            if (playerStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((playerPoisonAmount.value / playerStats.value.maxHp) * 100, 100));\n        });\n        const enemyPoisonAmountPercent = computed(() => {\n            if (enemyStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((enemyPoisonAmount.value / enemyStats.value.maxHp) * 100, 100));\n        });\n        const playerVisibleEffects = computed(() => playerStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const enemyVisibleEffects = computed(() => enemyStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const cloneCardForBattle = (card) => ({\n            ...card,\n            calculation: { ...card.calculation },\n            damageLogic: { ...card.damageLogic },\n            traits: { ...card.traits },\n            cardEffects: card.cardEffects.map((ce) => ({\n                ...ce,\n                restrictedTypes: ce.restrictedTypes ? [...ce.restrictedTypes] : undefined,\n                cleanseTypes: ce.cleanseTypes ? [...ce.cleanseTypes] : undefined,\n            })),\n        });\n        const toBattleDeck = (cards) => cards.map(cloneCardForBattle);\n        const enemyDeck = enemyDef ? toBattleDeck(enemyDef.deck) : [];\n        // dummy card to prevent crash if enemy has no cards\n        const PASS_CARD = {\n            id: 'pass', name: '', type: CardType.FUNCTION, category: '', rarity: '', manaCost: 0,\n            calculation: { multiplier: 0, addition: 0 }, damageLogic: { mode: 'fixed', value: 0 },\n            traits: { combo: false, reroll: 'none', draw: false }, cardEffects: [], description: '',\n        };\n        const combatState = ref({\n            turn: 1,\n            phase: CombatPhase.TURN_START,\n            actionsRemaining: 1,\n            playerBaseDice: 1,\n            enemyBaseDice: 1,\n            playerHand: [],\n            playerDeck: toBattleDeck(props.playerDeck).sort(() => Math.random() - 0.5),\n            discardPile: [],\n            enemyDeck: [...enemyDeck],\n            enemyDiscard: [],\n            enemyIntentCard: null,\n            enemyPredictedPoint: 0,\n            playerSelectedCard: null,\n            lastPlayedCard: null,\n            logs: [` <span class=\"text-red-500 font-bold\">${enemyDisplayName}</span>`],\n        });\n        // //\n        const playerTurnRawDice = ref(1);\n        const enemyTurnRawDice = ref(1);\n        const isRolling = ref(false);\n        const showClashAnimation = ref(false);\n        const shatteringTarget = ref(null);\n        const screenShake = ref(false);\n        const impactShake = ref(false);\n        const overlayOpen = ref(null);\n        const settingsOpen = ref(false);\n        const battleSpeedUp = ref(false);\n        const logsCollapsed = ref(true);\n        const battleResultBanner = ref(null);\n        const endCombatPending = ref(false);\n        const enemyIntentConsumedThisTurn = ref(false);\n        const combatRootEl = ref(null);\n        const effectTooltip = ref(null);\n        const speedMultiplier = computed(() => (battleSpeedUp.value ? 2 : 1));\n        const combatRootStyle = computed(() => ({ '--combat-speed-multiplier': String(speedMultiplier.value) }));\n        const floatingNumbers = ref([]);\n        const lightningAmbushFirstUseConsumed = ref({\n            player: false,\n            enemy: false,\n        });\n        const previewPlayerDice = ref(null);\n        const previewEnemyDice = ref(null);\n        const playerDiceUiNoise = ref(0);\n        const enemyDiceUiNoise = ref(0);\n        const comboUiMaskBridge = ref(false);\n        const isUiMaskingActive = computed(() => (combatState.value.phase === CombatPhase.PLAYER_INPUT || comboUiMaskBridge.value));\n        const isPlayerDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.BLIND_ASH) > 0));\n        const isEnemyDiceObscured = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.PEEP_FORBIDDEN) > 0));\n        const rerollUiNoise = () => Math.floor(Math.random() * 3) - 1;\n        const displayPlayerDice = computed(() => {\n            const base = previewPlayerDice.value ?? combatState.value.playerBaseDice;\n            if (!isPlayerDiceObscured.value)\n                return base;\n            return Math.max(0, base + playerDiceUiNoise.value);\n        });\n        const displayEnemyDice = computed(() => {\n            const base = previewEnemyDice.value ?? combatState.value.enemyBaseDice;\n            if (!isEnemyDiceObscured.value)\n                return base;\n            return Math.max(0, base + enemyDiceUiNoise.value);\n        });\n        const canPlayerRerollDice = computed(() => (playerDiceRerollCharges.value > 0\n            && combatState.value.phase === CombatPhase.PLAYER_INPUT\n            && !isRolling.value\n            && !showClashAnimation.value\n            && !endCombatPending.value));\n        const playerDiceRerollHint = computed(() => {\n            if (playerDiceRerollCharges.value <= 0)\n                return '';\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return '';\n            if (isRolling.value || showClashAnimation.value)\n                return '';\n            if (endCombatPending.value)\n                return '';\n            return `${playerDiceRerollCharges.value}`;\n        });\n        const playerDicePreviewChanged = computed(() => (previewPlayerDice.value !== null && previewPlayerDice.value !== combatState.value.playerBaseDice));\n        const enemyDicePreviewChanged = computed(() => (previewEnemyDice.value !== null && previewEnemyDice.value !== combatState.value.enemyBaseDice));\n        const playerDiceNumberClass = computed(() => {\n            if (isPlayerDiceObscured.value)\n                return 'text-violet-400';\n            return playerDicePreviewChanged.value ? 'text-red-800' : '';\n        });\n        const enemyDiceNumberClass = computed(() => {\n            if (isEnemyDiceObscured.value)\n                return 'text-violet-400';\n            return enemyDicePreviewChanged.value ? 'text-[#b08a2e]' : '';\n        });\n        const enemyIntentMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.COGNITIVE_INTERFERENCE) > 0\n            ? 'full'\n            : 'none'));\n        const playerHandMaskLevel = computed(() => (isUiMaskingActive.value\n            && getEffectStacks(playerStats.value, ET.MEMORY_FOG) > 0\n            ? 'partial'\n            : 'none'));\n        const playerPlayedCardVisual = ref(null);\n        const resolvedPlayerCardVisual = ref(null);\n        const resolvedEnemyCardVisual = ref(null);\n        const resolvedCardVisualEntries = computed(() => ([resolvedPlayerCardVisual.value, resolvedEnemyCardVisual.value]\n            .filter((visual) => !!visual)));\n        let hoverPreviewTimer = null;\n        let enemyDicePreviewTimer = null;\n        let effectTooltipLongPressTimer = null;\n        let effectTooltipAutoHideTimer = null;\n        let floatingNumberId = 0;\n        let handCardKeySeed = 0;\n        let playerPlayedCardVisualId = 0;\n        let resolvedCardVisualId = 0;\n        let animationStopToken = 0;\n        let endCombatSequenceToken = 0;\n        let enemyManaLackHintTurn = -1;\n        const handCardKeys = new WeakMap();\n        const invalidCardShakeKeys = ref(new Set());\n        // Default relic modifiers (no relics yet)\n        const NO_RELIC_MOD = { globalMultiplier: 1, globalAddition: 0 };\n        const activePlayerRelics = resolveRelicMap(props.playerRelics);\n        const playerDiceRerollCharges = ref(0);\n        const relicRuntimeState = reactive({});\n        const getEntityBySide = (side) => (side === 'player' ? playerStats.value : enemyStats.value);\n        const getRelicRuntimeState = (relicId) => {\n            if (!relicRuntimeState[relicId]) {\n                relicRuntimeState[relicId] = {};\n            }\n            return relicRuntimeState[relicId];\n        };\n        const hasActiveRelic = (id) => activePlayerRelics.some((entry) => entry.relic.id === id && entry.count > 0);\n        const getActiveRelicCount = (id) => (activePlayerRelics.find((entry) => entry.relic.id === id)?.count ?? 0);\n        const changeRerollCharges = (side, delta) => {\n            if (side !== 'player')\n                return;\n            playerDiceRerollCharges.value = Math.max(0, playerDiceRerollCharges.value + Math.floor(delta));\n        };\n        const consumeRerollCharge = (side, amount = 1) => {\n            if (side !== 'player')\n                return false;\n            const need = Math.max(1, Math.floor(amount));\n            if (playerDiceRerollCharges.value < need)\n                return false;\n            playerDiceRerollCharges.value -= need;\n            return true;\n        };\n        const getRerollCharges = (side) => {\n            if (side !== 'player')\n                return 0;\n            return playerDiceRerollCharges.value;\n        };\n        const forEachPlayerRelic = (callback) => {\n            for (const entry of activePlayerRelics) {\n                callback(entry, entry.relic, getRelicRuntimeState(entry.relic.id));\n            }\n        };\n        const logRelicMessage = (message) => {\n            log(`<span class=\"text-amber-300 text-[9px]\">[] ${message}</span>`);\n        };\n        const addArmorForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const added = applyEffect(target, ET.ARMOR, value, { source: 'relic' }) ? value : 0;\n            if (added > 0) {\n                pushFloatingNumber(side, added, 'shield', '+');\n            }\n            return added;\n        };\n        const restoreManaForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const before = target.mp;\n            target.mp = Math.max(0, target.mp + value);\n            const delta = target.mp - before;\n            if (delta > 0) {\n                pushFloatingNumber(side, delta, 'mana', '+');\n            }\n            return delta;\n        };\n        const healForSide = (side, amount, options) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return { healed: 0, overflow: 0 };\n            const target = getEntityBySide(side);\n            const before = target.hp;\n            target.hp = Math.max(0, Math.min(target.maxHp, target.hp + value));\n            const healed = target.hp - before;\n            const overflowRaw = Math.max(0, value - healed);\n            if (healed > 0) {\n                pushFloatingNumber(side, healed, 'heal', '+');\n            }\n            if (options?.overflowToArmor && overflowRaw > 0) {\n                addArmorForSide(side, overflowRaw);\n            }\n            return { healed, overflow: overflowRaw };\n        };\n        const shouldAllowStatusEffectWithRelics = (targetSide, effectType, stacks, options) => {\n            let allowed = true;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                if (!allowed)\n                    return;\n                const hook = relic.hooks?.onBeforeApplyEffect;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    self: playerStats.value,\n                    opponent: enemyStats.value,\n                    state,\n                    addLog: logRelicMessage,\n                    hasRelic: hasActiveRelic,\n                    getRelicCount: getActiveRelicCount,\n                    addStatusEffect: (side, targetEffectType, targetStacks, applyOptions) => (applyStatusEffectWithRelics(side, targetEffectType, targetStacks, applyOptions)),\n                    addArmor: addArmorForSide,\n                    restoreMana: restoreManaForSide,\n                    heal: healForSide,\n                    addRerollCharges: changeRerollCharges,\n                    getRerollCharges,\n                    targetSide,\n                    target,\n                    effectType,\n                    stacks,\n                    source: options?.source,\n                    restrictedTypes: options?.restrictedTypes,\n                };\n                const result = hook(ctx);\n                if (result === false) {\n                    allowed = false;\n                }\n            });\n            return allowed;\n        };\n        const applyStatusEffectWithRelics = (side, effectType, stacks, options) => {\n            const value = Math.max(0, Math.floor(stacks));\n            if (value <= 0)\n                return false;\n            if (!shouldAllowStatusEffectWithRelics(side, effectType, value, options))\n                return false;\n            const target = getEntityBySide(side);\n            return applyEffect(target, effectType, value, {\n                restrictedTypes: options?.restrictedTypes,\n                source: options?.source,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            });\n        };\n        const createPlayerLifecycleContext = (relic, count, state) => ({\n            count,\n            side: 'player',\n            self: playerStats.value,\n            opponent: enemyStats.value,\n            state,\n            addLog: logRelicMessage,\n            hasRelic: hasActiveRelic,\n            getRelicCount: getActiveRelicCount,\n            addStatusEffect: (side, effectType, stacks, options) => (applyStatusEffectWithRelics(side, effectType, stacks, {\n                source: options?.source ?? `relic:${relic.id}`,\n                restrictedTypes: options?.restrictedTypes,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            })),\n            addArmor: addArmorForSide,\n            restoreMana: restoreManaForSide,\n            heal: healForSide,\n            addRerollCharges: changeRerollCharges,\n            getRerollCharges,\n        });\n        const triggerPlayerRelicLifecycleHooks = (hookName) => {\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.[hookName];\n                if (!hook)\n                    return;\n                hook(createPlayerLifecycleContext(relic, entry.count, state));\n            });\n        };\n        const triggerPlayerRelicBeforeBurnDamageHooks = (targetSide, burnStacks, damage, turn) => {\n            let currentDamage = Math.max(0, Math.floor(damage));\n            let isTrueDamage = false;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onBeforeBurnDamage;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: currentDamage,\n                    isTrueDamage,\n                };\n                hook(ctx);\n                currentDamage = Math.max(0, Math.floor(ctx.damage));\n                isTrueDamage = !!ctx.isTrueDamage;\n            });\n            return { damage: currentDamage, isTrueDamage };\n        };\n        const triggerPlayerRelicAfterBurnDamageTakenHooks = (targetSide, burnStacks, damage, isTrueDamage, turn) => {\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onAfterBurnDamageTaken;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: Math.max(0, Math.floor(damage)),\n                    isTrueDamage,\n                };\n                hook(ctx);\n            });\n        };\n        const triggerPlayerRelicHitHooks = (sourceSide, targetSide, card, finalPoint, hitIndex, hitCount, attemptedDamage, actualDamage) => {\n            const source = getEntityBySide(sourceSide);\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    sourceSide,\n                    targetSide,\n                    source,\n                    target,\n                    card,\n                    finalPoint,\n                    hitIndex,\n                    hitCount,\n                    attemptedDamage: Math.max(0, Math.floor(attemptedDamage)),\n                    actualDamage: Math.max(0, Math.floor(actualDamage)),\n                };\n                relic.hooks?.onAfterHitDealt?.(ctx);\n                relic.hooks?.onAfterHitTaken?.(ctx);\n            });\n        };\n        // --- Helpers ---\n        const scaleDuration = (ms) => Math.max(60, Math.floor(ms / speedMultiplier.value));\n        const wait = (ms) => new Promise((resolve) => setTimeout(resolve, scaleDuration(ms)));\n        const transitionStyle = (ms) => ({ transitionDuration: `${scaleDuration(ms)}ms` });\n        const withTransition = (style, ms) => ({\n            ...style,\n            transitionDuration: `${scaleDuration(ms)}ms`,\n        });\n        const playerPlayedCardStyle = computed(() => {\n            const visual = playerPlayedCardVisual.value;\n            const entered = !!visual?.entered;\n            return {\n                left: entered ? '29%' : '50%',\n                top: entered ? '23%' : '84%',\n                transform: `translate(-50%, -50%) scale(${entered ? 1 : 0.96})`,\n                opacity: entered ? '1' : '0',\n                transitionProperty: 'left, top, transform, opacity',\n                transitionDuration: `${scaleDuration(540)}ms`,\n                transitionTimingFunction: 'cubic-bezier(0.22, 0.9, 0.2, 1)',\n            };\n        });\n        const resolvedCardVisualInnerClass = (visual) => {\n            const sideClass = visual.source === 'player'\n                ? 'resolved-card-visual-inner--player'\n                : 'resolved-card-visual-inner--enemy';\n            const variantClass = visual.variant === 'attack'\n                ? 'resolved-card-visual-inner--attack'\n                : (visual.variant === 'self'\n                    ? 'resolved-card-visual-inner--self'\n                    : 'resolved-card-visual-inner--fade');\n            return `${sideClass} ${variantClass}`;\n        };\n        const showEnemyIntentCard = computed(() => {\n            if (!combatState.value.enemyIntentCard)\n                return false;\n            if (enemyIntentConsumedThisTurn.value)\n                return false;\n            return !resolvedEnemyCardVisual.value;\n        });\n        const floatingColors = {\n            physical: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            magic: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            shield: 'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',\n            heal: 'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',\n            mana: 'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',\n            true: 'text-zinc-500 drop-shadow-[0_0_8px_rgba(39,39,42,0.9)]',\n        };\n        const floatingNumbersFor = (side) => floatingNumbers.value.filter((entry) => entry.side === side);\n        const handCardKey = (card) => {\n            let key = handCardKeys.get(card);\n            if (!key) {\n                handCardKeySeed += 1;\n                key = `hand-${handCardKeySeed}`;\n                handCardKeys.set(card, key);\n            }\n            return key;\n        };\n        const isCardShaking = (card) => invalidCardShakeKeys.value.has(handCardKey(card));\n        const triggerInvalidCardShake = (card) => {\n            const key = handCardKey(card);\n            const withoutKey = new Set(invalidCardShakeKeys.value);\n            withoutKey.delete(key);\n            invalidCardShakeKeys.value = withoutKey;\n            requestAnimationFrame(() => {\n                const next = new Set(invalidCardShakeKeys.value);\n                next.add(key);\n                invalidCardShakeKeys.value = next;\n                setTimeout(() => {\n                    const removed = new Set(invalidCardShakeKeys.value);\n                    removed.delete(key);\n                    invalidCardShakeKeys.value = removed;\n                }, scaleDuration(360));\n            });\n        };\n        const resolveTargetSide = (source, target) => {\n            if (target === 'self')\n                return source;\n            return source === 'player' ? 'enemy' : 'player';\n        };\n        const removeCardsById = (cards, cardId) => (cards.filter((card) => card.id !== cardId));\n        const removeSingleCardById = (cards, cardId) => {\n            let removed = false;\n            return cards.filter((card) => {\n                if (!removed && card.id === cardId) {\n                    removed = true;\n                    return false;\n                }\n                return true;\n            });\n        };\n        const insertCardIntoDeckRandomly = (deck, card) => {\n            const index = Math.floor(Math.random() * (deck.length + 1));\n            return [...deck.slice(0, index), card, ...deck.slice(index)];\n        };\n        const applyPurgeTraitAfterUse = (source, card) => {\n            if (!card.traits.purgeOnUse)\n                return;\n            if (source === 'player') {\n                combatState.value.discardPile = removeSingleCardById(combatState.value.discardPile, card.id);\n            }\n            else {\n                combatState.value.enemyDeck = removeSingleCardById(combatState.value.enemyDeck, card.id);\n                combatState.value.enemyDiscard = removeSingleCardById(combatState.value.enemyDiscard, card.id);\n            }\n            log(`<span class=\"text-zinc-300\">${card.name}</span>`);\n        };\n        const applyInsertTrait = (source, card) => {\n            const toInsert = card.traits.insertCardsToEnemyDeck ?? [];\n            if (toInsert.length <= 0)\n                return;\n            const sourceLabel = source === 'player' ? '' : '';\n            const targetSide = source === 'player' ? 'enemy' : 'player';\n            for (const cardName of toInsert) {\n                const inserted = getCardByName(cardName);\n                if (!inserted)\n                    continue;\n                const battleCard = cloneCardForBattle(inserted);\n                if (targetSide === 'player') {\n                    combatState.value.playerDeck = insertCardIntoDeckRandomly(combatState.value.playerDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.playerDeck.length} / ${combatState.value.discardPile.length}</span>`);\n                }\n                else {\n                    combatState.value.enemyDeck = insertCardIntoDeckRandomly(combatState.value.enemyDeck, battleCard);\n                    log(`<span class=\"text-fuchsia-300\">${sourceLabel}${card.name}${cardName}${combatState.value.enemyDeck.length} / ${combatState.value.enemyDiscard.length}</span>`);\n                }\n            }\n        };\n        const destroyOpponentCardByTrait = (winnerSide, loserCard) => {\n            if (loserCard.id === PASS_CARD.id)\n                return;\n            if (winnerSide === 'player') {\n                combatState.value.enemyDeck = removeCardsById(combatState.value.enemyDeck, loserCard.id);\n                combatState.value.enemyDiscard = removeCardsById(combatState.value.enemyDiscard, loserCard.id);\n            }\n            else {\n                combatState.value.playerDeck = removeCardsById(combatState.value.playerDeck, loserCard.id);\n                combatState.value.playerHand = removeCardsById(combatState.value.playerHand, loserCard.id);\n                combatState.value.discardPile = removeCardsById(combatState.value.discardPile, loserCard.id);\n                if (combatState.value.playerSelectedCard?.id === loserCard.id) {\n                    combatState.value.playerSelectedCard = null;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${loserCard.name}</span>`);\n        };\n        const applyShockOnManaLoss = (side, lostMp, reason) => {\n            const loss = Math.max(0, Math.floor(lostMp));\n            if (loss <= 0)\n                return;\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const label = side === 'player' ? '' : '';\n            const shockStacks = getEffectStacks(target, ET.SHOCK);\n            if (shockStacks <= 0)\n                return;\n            target.hp = Math.max(0, target.hp - shockStacks);\n            pushFloatingNumber(side, shockStacks, 'true', '-');\n            const nextStacks = Math.floor(shockStacks / 2);\n            if (nextStacks <= 0) {\n                removeEffect(target, ET.SHOCK);\n            }\n            else {\n                const shockEffect = target.effects.find((effect) => effect.type === ET.SHOCK);\n                if (shockEffect) {\n                    shockEffect.stacks = nextStacks;\n                }\n            }\n            log(`<span class=\"text-violet-300\">${label}${reason} ${shockStacks}  ${shockStacks}${nextStacks}</span>`);\n        };\n        const changeManaWithShock = (side, delta, reason, options) => {\n            const value = Math.floor(delta);\n            if (value === 0)\n                return { ok: true, actualDelta: 0 };\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            const before = target.mp;\n            if (value < 0 && options?.requireEnoughForDecrease && before < -value) {\n                return { ok: false, actualDelta: 0 };\n            }\n            target.mp = Math.max(0, before + value);\n            const actualDelta = target.mp - before;\n            if (actualDelta > 0 && options?.showPositiveFloating !== false) {\n                pushFloatingNumber(side, actualDelta, 'mana', '+');\n            }\n            if (actualDelta < 0) {\n                applyShockOnManaLoss(side, -actualDelta, reason);\n            }\n            return { ok: true, actualDelta };\n        };\n        const spendManaWithShock = (side, amount, reason) => {\n            const cost = Math.max(0, Math.floor(amount));\n            if (cost <= 0)\n                return true;\n            return changeManaWithShock(side, -cost, reason, { requireEnoughForDecrease: true }).ok;\n        };\n        const applyBloodbladeAttachOnClash = (sourceSide, targetSide) => {\n            const sourceStats = sourceSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.BLOODBLADE_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.BLEED, stacks, { source: 'effect:bloodblade_attach' });\n            const sourceLabel = sourceSide === 'player' ? '' : '';\n            log(`<span class=\"text-rose-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const applyLightningAttachOnDodge = (dodgerSide, targetSide) => {\n            const sourceStats = dodgerSide === 'player' ? playerStats.value : enemyStats.value;\n            const stacks = getEffectStacks(sourceStats, ET.LIGHTNING_ATTACH);\n            if (stacks <= 0)\n                return;\n            applyStatusEffectWithRelics(targetSide, ET.SHOCK, stacks, { source: 'effect:lightning_attach' });\n            const sourceLabel = dodgerSide === 'player' ? '' : '';\n            log(`<span class=\"text-indigo-300\">${sourceLabel}[]  ${stacks} </span>`);\n        };\n        const applyLifeMaxReduction = (targetSide, stacks, sourceTag, sourceLabel) => {\n            const target = targetSide === 'player' ? playerStats.value : enemyStats.value;\n            const value = Math.max(0, Math.floor(stacks));\n            if (value <= 0)\n                return 0;\n            const beforeMaxHp = target.maxHp;\n            const beforeHp = target.hp;\n            const applied = applyStatusEffectWithRelics(targetSide, ET.MAX_HP_REDUCTION, value, { source: sourceTag })\n                ? Math.max(0, beforeMaxHp - target.maxHp)\n                : 0;\n            const targetLabel = targetSide === 'player' ? '' : '';\n            if (applied <= 0) {\n                log(`<span class=\"text-gray-400\">${sourceLabel}${targetLabel}</span>`);\n                return 0;\n            }\n            const hpLossByCap = Math.max(0, beforeHp - target.hp);\n            if (hpLossByCap > 0) {\n                pushFloatingNumber(targetSide, hpLossByCap, 'true', '-');\n            }\n            log(`<span class=\"text-fuchsia-300\">${sourceLabel}${targetLabel} -${applied}${hpLossByCap > 0 ? ` -${hpLossByCap}` : ''}</span>`);\n            return applied;\n        };\n        const applyDodgeSuccessCardBonus = (dodgerSide, dodgeCard, dodgePoint) => {\n            const dodger = dodgerSide === 'player' ? playerStats.value : enemyStats.value;\n            const label = dodgerSide === 'player' ? '' : '';\n            const point = Math.max(0, Math.floor(dodgePoint));\n            if (dodgeCard.id === 'basic_breathing_technique') {\n                const beforeHp = dodger.hp;\n                dodger.hp = Math.min(dodger.maxHp, dodger.hp + point);\n                const actualHeal = dodger.hp - beforeHp;\n                if (actualHeal > 0) {\n                    pushFloatingNumber(dodgerSide, actualHeal, 'heal', '+');\n                }\n                log(`<span class=\"text-green-300\">${label}${dodgeCard.name} ${point} </span>`);\n                return;\n            }\n            if (dodgeCard.id === 'basic_mirror_phantom') {\n                applyStatusEffectWithRelics(dodgerSide, ET.BARRIER, 1, { source: dodgeCard.id });\n                log(`<span class=\"text-sky-300\">${label}${dodgeCard.name} 1 </span>`);\n                return;\n            }\n            if (dodgeCard.id === 'enemy_mimicbubble_iridescent_float') {\n                const targetSide = dodgerSide === 'player' ? 'enemy' : 'player';\n                const targetLabel = targetSide === 'player' ? '' : '';\n                applyStatusEffectWithRelics(targetSide, ET.BIND, 1, {\n                    source: dodgeCard.id,\n                    restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n                    lockDecayThisTurn: true,\n                });\n                log(`<span class=\"text-indigo-300\">${label}${dodgeCard.name}${targetLabel} 1 </span>`);\n                return;\n            }\n            if (dodgeCard.id === 'enemy_mist_sprite_illusion_lure') {\n                const targetSide = dodgerSide === 'player' ? 'enemy' : 'player';\n                applyLifeMaxReduction(targetSide, 2, dodgeCard.id, `${label}${dodgeCard.name}`);\n                return;\n            }\n            if (dodgeCard.id === 'enemy_vinewalker_lubricated_shrink') {\n                if (point > 0) {\n                    applyStatusEffectWithRelics(dodgerSide, ET.CHARGE, point, { source: dodgeCard.id });\n                }\n                log(`<span class=\"text-cyan-300\">${label}${dodgeCard.name} ${point} </span>`);\n                return;\n            }\n            if (dodgeCard.id === 'enemy_springspirit_silent_infiltration') {\n                const targetSide = dodgerSide === 'player' ? 'enemy' : 'player';\n                applyStatusEffectWithRelics(targetSide, ET.CORROSION, 2, { source: dodgeCard.id });\n                log(`<span class=\"text-emerald-300\">${label}${dodgeCard.name} +2</span>`);\n                return;\n            }\n            if (dodgeCard.id === 'basic_mana_shift') {\n                const beforeMp = dodger.mp;\n                dodger.mp = Math.max(0, dodger.mp + point);\n                const actualRestore = dodger.mp - beforeMp;\n                if (actualRestore > 0) {\n                    pushFloatingNumber(dodgerSide, actualRestore, 'mana', '+');\n                }\n                log(`<span class=\"text-blue-300\">${label}${dodgeCard.name} ${point} </span>`);\n            }\n        };\n        const applyToxinSpreadOnPhysicalPlay = (source, card) => {\n            if (card.id === PASS_CARD.id || card.type !== CardType.PHYSICAL)\n                return;\n            const spreadOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const spreadOwner = spreadOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const spreadStacks = getEffectStacks(spreadOwner, ET.TOXIN_SPREAD);\n            if (spreadStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.POISON, spreadStacks, { source: 'effect:toxin_spread' });\n            const sourceLabel = source === 'player' ? '' : '';\n            const spreadOwnerLabel = spreadOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-emerald-300\">${spreadOwnerLabel}[] ${sourceLabel} ${spreadStacks} </span>`);\n        };\n        const applyAmbushOnCardPlay = (source, card) => {\n            if (card.id === PASS_CARD.id)\n                return;\n            if (card.type !== CardType.PHYSICAL && card.type !== CardType.DODGE)\n                return;\n            const ambushOwnerSide = source === 'player' ? 'enemy' : 'player';\n            const ambushOwner = ambushOwnerSide === 'player' ? playerStats.value : enemyStats.value;\n            const ambushStacks = getEffectStacks(ambushOwner, ET.AMBUSH);\n            if (ambushStacks <= 0)\n                return;\n            applyStatusEffectWithRelics(source, ET.BIND, 1, {\n                source: 'effect:ambush',\n                restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n                lockDecayThisTurn: true,\n            });\n            reduceEffectStacks(ambushOwner, ET.AMBUSH, 1);\n            const sourceLabel = source === 'player' ? '' : '';\n            const ambushOwnerLabel = ambushOwnerSide === 'player' ? '' : '';\n            log(`<span class=\"text-violet-300\">${ambushOwnerLabel}[] ${sourceLabel} 1 </span>`);\n        };\n        const withFirstUseLightningAmbushBonus = (source, card, options) => {\n            if (card.id !== 'enemy_vinewalker_lightning_ambush')\n                return card;\n            if (lightningAmbushFirstUseConsumed.value[source])\n                return card;\n            const shouldConsume = options?.consume ?? true;\n            const shouldAnnounce = options?.announce ?? shouldConsume;\n            if (shouldConsume) {\n                lightningAmbushFirstUseConsumed.value[source] = true;\n            }\n            const boosted = cloneCardForBattle(card);\n            boosted.calculation.addition += 4;\n            if (shouldAnnounce) {\n                const sourceLabel = source === 'player' ? '' : '';\n                log(`<span class=\"text-indigo-300\">${sourceLabel}${card.name} +4</span>`);\n            }\n            return boosted;\n        };\n        let poisonAmountImmediateCheckRunning = false;\n        const applyImmediatePoisonAmountLethalCheck = (side) => {\n            const target = side === 'player' ? playerStats.value : enemyStats.value;\n            if (target.hp <= 0)\n                return;\n            const poisonAmount = getEffectStacks(target, ET.POISON_AMOUNT);\n            if (poisonAmount <= 0 || poisonAmount < target.hp)\n                return;\n            removeEffect(target, ET.POISON_AMOUNT);\n            const { actualDamage, logs: poisonLogs } = applyDamageToEntity(target, poisonAmount, true);\n            if (actualDamage > 0) {\n                pushFloatingNumber(side, actualDamage, 'true', '-');\n            }\n            const label = side === 'player' ? '' : '';\n            log(`<span class=\"text-zinc-300\">${label}[]  ${actualDamage} </span>`);\n            for (const poisonLog of poisonLogs) {\n                log(`<span class=\"text-gray-500 text-[9px]\">${poisonLog}</span>`);\n            }\n        };\n        const applyHitAttachEffects = (source, card, attacker, defenderSide) => {\n            const flameStacks = getEffectStacks(attacker, ET.FLAME_ATTACH);\n            if (flameStacks > 0 && (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)) {\n                applyStatusEffectWithRelics(defenderSide, ET.BURN, flameStacks, { source: 'effect:flame_attach' });\n            }\n            const poisonStacks = getEffectStacks(attacker, ET.POISON_ATTACH);\n            if (poisonStacks > 0 && card.type === CardType.MAGIC) {\n                applyStatusEffectWithRelics(defenderSide, ET.POISON, poisonStacks, { source: 'effect:poison_attach' });\n            }\n            const totalApplied = flameStacks + (card.type === CardType.MAGIC ? poisonStacks : 0);\n            if (totalApplied > 0) {\n                const label = source === 'player' ? '' : '';\n                log(`<span class=\"text-orange-300\">${label}[] </span>`);\n            }\n        };\n        const consumeChargeOnRoll = (stats, label, rolled) => {\n            const chargeStacks = getEffectStacks(stats, ET.CHARGE);\n            if (chargeStacks <= 0)\n                return rolled;\n            removeEffect(stats, ET.CHARGE);\n            const boosted = Math.max(0, Math.floor(rolled + chargeStacks));\n            log(`<span class=\"text-cyan-300\">${label}[] +${chargeStacks} ${rolled}  ${boosted}</span>`);\n            return boosted;\n        };\n        const clearDicePreview = () => {\n            previewPlayerDice.value = null;\n            previewEnemyDice.value = null;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n        };\n        const clearPlayerPlayedCard = () => {\n            playerPlayedCardVisual.value = null;\n        };\n        const clearResolvedCardVisual = () => {\n            resolvedPlayerCardVisual.value = null;\n            resolvedEnemyCardVisual.value = null;\n        };\n        const stopAllCardAnimations = () => {\n            animationStopToken += 1;\n            clearPlayerPlayedCard();\n            clearResolvedCardVisual();\n            impactShake.value = false;\n            showClashAnimation.value = false;\n            shatteringTarget.value = null;\n        };\n        const showPlayerPlayedCard = (card) => {\n            if (endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const id = ++playerPlayedCardVisualId;\n            playerPlayedCardVisual.value = { id, card, entered: false };\n            requestAnimationFrame(() => {\n                if (token !== animationStopToken || endCombatPending.value)\n                    return;\n                if (playerPlayedCardVisual.value?.id === id) {\n                    playerPlayedCardVisual.value.entered = true;\n                }\n            });\n        };\n        const playResolvedCardAnimation = async (source, card) => {\n            if (card.id === PASS_CARD.id || endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const variant = (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)\n                ? 'attack'\n                : (card.type === CardType.DODGE ? 'fade' : 'self');\n            const id = ++resolvedCardVisualId;\n            const slot = source === 'player' ? resolvedPlayerCardVisual : resolvedEnemyCardVisual;\n            slot.value = { id, source, card, variant };\n            if (variant === 'attack') {\n                const impactDelay = scaleDuration(720);\n                setTimeout(() => {\n                    if (token !== animationStopToken || endCombatPending.value)\n                        return;\n                    impactShake.value = true;\n                    setTimeout(() => {\n                        if (token !== animationStopToken)\n                            return;\n                        impactShake.value = false;\n                    }, scaleDuration(220));\n                }, impactDelay);\n            }\n            const animDuration = variant === 'attack' ? 930 : 570;\n            await wait(animDuration);\n            if (token !== animationStopToken || endCombatPending.value)\n                return;\n            if (slot.value?.id === id) {\n                slot.value = null;\n            }\n        };\n        const getCardFinalPoint = (source, card, baseDice, isPreview = false) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            // 2+1\n            if (card.id === 'burn_inferno_judgement') {\n                finalPoint += Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n            }\n            if (source === 'player') {\n                forEachPlayerRelic((entry, relic, state) => {\n                    const hook = relic.hooks?.modifyFinalPoint;\n                    if (!hook)\n                        return;\n                    const ctx = {\n                        count: entry.count,\n                        side: 'player',\n                        card,\n                        baseDice,\n                        currentPoint: finalPoint,\n                        self: attacker,\n                        opponent: defender,\n                        state,\n                        isPreview,\n                        addLog: logRelicMessage,\n                        hasRelic: hasActiveRelic,\n                        getRelicCount: getActiveRelicCount,\n                    };\n                    finalPoint = hook(ctx);\n                });\n            }\n            return Math.max(0, Math.floor(finalPoint));\n        };\n        const getCardPreviewPoint = (source, card, baseDice) => {\n            return getCardFinalPoint(source, card, baseDice, true);\n        };\n        const handlePlayerCardHoverStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n        };\n        const handlePlayerCardHoverEnd = () => {\n            previewPlayerDice.value = null;\n        };\n        const handlePlayerCardTouchStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (hoverPreviewTimer)\n                clearTimeout(hoverPreviewTimer);\n            hoverPreviewTimer = setTimeout(() => {\n                previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n            }, 260);\n        };\n        const handlePlayerCardTouchEnd = () => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            previewPlayerDice.value = null;\n        };\n        const rollDiceInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const handlePlayerDiceClick = () => {\n            if (!canPlayerRerollDice.value)\n                return;\n            const chargesBeforeHooks = getRerollCharges('player');\n            let rerolled = null;\n            forEachPlayerRelic((entry, relic, state) => {\n                if (rerolled !== null)\n                    return;\n                const hook = relic.hooks?.onDiceClick;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    currentDice: combatState.value.playerBaseDice,\n                    minDice: playerStats.value.minDice,\n                    maxDice: playerStats.value.maxDice,\n                    state,\n                    roll: rollDiceInRange,\n                    consumeRerollCharge,\n                    getRerollCharges,\n                    addLog: logRelicMessage,\n                };\n                rerolled = hook(ctx);\n            });\n            if (rerolled === null) {\n                if (getRerollCharges('player') < chargesBeforeHooks)\n                    return;\n                if (!consumeRerollCharge('player', 1))\n                    return;\n                rerolled = rollDiceInRange(playerStats.value.minDice, playerStats.value.maxDice);\n                log(`<span class=\"text-amber-300\">[] 1 ${getRerollCharges('player')} </span>`);\n            }\n            const before = combatState.value.playerBaseDice;\n            const after = consumeChargeOnRoll(playerStats.value, '', Math.max(0, Math.floor(rerolled)));\n            combatState.value.playerBaseDice = after;\n            previewPlayerDice.value = null;\n            log(`<span class=\"text-amber-200\">${before}  ${after}</span>`);\n        };\n        const canPreviewEnemyDice = () => {\n            return (combatState.value.phase === CombatPhase.PLAYER_INPUT &&\n                !isRolling.value &&\n                !showClashAnimation.value &&\n                !!combatState.value.enemyIntentCard);\n        };\n        const getEnemyIntentFinalPoint = () => {\n            const card = combatState.value.enemyIntentCard;\n            if (!card)\n                return null;\n            const previewCard = withFirstUseLightningAmbushBonus('enemy', card, {\n                consume: false,\n                announce: false,\n            });\n            return getCardPreviewPoint('enemy', previewCard, combatState.value.enemyBaseDice);\n        };\n        const showEnemyDicePreview = () => {\n            if (!canPreviewEnemyDice())\n                return;\n            const preview = getEnemyIntentFinalPoint();\n            if (preview === null)\n                return;\n            previewEnemyDice.value = preview;\n        };\n        const hideEnemyDicePreview = () => {\n            if (showClashAnimation.value)\n                return;\n            previewEnemyDice.value = null;\n        };\n        const handleEnemyDiceHoverStart = () => {\n            showEnemyDicePreview();\n        };\n        const handleEnemyDiceHoverEnd = () => {\n            hideEnemyDicePreview();\n        };\n        const handleEnemyDiceTouchStart = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            enemyDicePreviewTimer = setTimeout(() => {\n                showEnemyDicePreview();\n            }, 260);\n        };\n        const handleEnemyDiceTouchEnd = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            hideEnemyDicePreview();\n        };\n        const clearEffectTooltipTimers = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n            if (effectTooltipAutoHideTimer) {\n                clearTimeout(effectTooltipAutoHideTimer);\n                effectTooltipAutoHideTimer = null;\n            }\n        };\n        const showEffectTooltipForTarget = (target, effect, align = 'center') => {\n            const rootRect = combatRootEl.value?.getBoundingClientRect();\n            if (!rootRect)\n                return;\n            const rect = target.getBoundingClientRect();\n            const top = Math.max(8, rect.top - rootRect.top - 8);\n            const tooltipMaxWidth = 256;\n            const x = align === 'right'\n                ? Math.max(8, Math.min(rect.right - rootRect.left + 10, rootRect.width - tooltipMaxWidth - 8))\n                : Math.max(100, Math.min(rect.left + rect.width / 2 - rootRect.left, rootRect.width - 100));\n            effectTooltip.value = {\n                x,\n                y: top,\n                name: getEffectName(effect.type),\n                description: getEffectDescription(effect.type),\n                stacks: effect.stacks,\n                align,\n            };\n        };\n        const showEffectTooltip = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            showEffectTooltipForTarget(target, effect, align);\n        };\n        const hideEffectTooltip = () => {\n            clearEffectTooltipTimers();\n            effectTooltip.value = null;\n        };\n        const handleEffectTouchStart = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            effectTooltipLongPressTimer = setTimeout(() => {\n                showEffectTooltipForTarget(target, effect, align);\n                effectTooltipAutoHideTimer = setTimeout(() => {\n                    effectTooltip.value = null;\n                    effectTooltipAutoHideTimer = null;\n                }, scaleDuration(1800));\n            }, scaleDuration(320));\n        };\n        const handleEffectTouchEnd = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n        };\n        const pushFloatingNumber = (side, value, kind, sign = '+') => {\n            const amount = Math.max(0, Math.floor(value));\n            if (amount <= 0)\n                return;\n            const id = ++floatingNumberId;\n            // Extend popup lifetime by ~50% for better readability.\n            const duration = scaleDuration(1350);\n            floatingNumbers.value.push({\n                id,\n                side,\n                text: `${sign}${amount}`,\n                colorClass: floatingColors[kind],\n                leftOffset: Math.floor((Math.random() - 0.5) * 120),\n                topOffset: 24 + Math.floor(Math.random() * 20),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const pushFloatingText = (side, text, colorClass = 'text-sky-300', duration = scaleDuration(1050)) => {\n            const id = ++floatingNumberId;\n            floatingNumbers.value.push({\n                id,\n                side,\n                text,\n                colorClass,\n                leftOffset: Math.floor((Math.random() - 0.5) * 90),\n                topOffset: 18 + Math.floor(Math.random() * 18),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const notifyEnemyManaInsufficient = () => {\n            if (enemyManaLackHintTurn === combatState.value.turn)\n                return;\n            enemyManaLackHintTurn = combatState.value.turn;\n            pushFloatingText('enemy', '', 'text-blue-300');\n            log('<span class=\"text-blue-300\"></span>');\n        };\n        const log = (msg) => {\n            combatState.value.logs = [msg, ...combatState.value.logs].slice(0, 240);\n        };\n        if (activePlayerRelics.length > 0) {\n            const relicSummary = activePlayerRelics\n                .map((entry) => (entry.count > 1 ? `${entry.relic.name}x${entry.count}` : entry.relic.name))\n                .join('');\n            log(`<span class=\"text-amber-300\">${relicSummary}</span>`);\n        }\n        triggerPlayerRelicLifecycleHooks('onBattleStart');\n        onMounted(() => {\n            battleSpeedUp.value = localStorage.getItem(SPEED_SETTING_KEY) === '1';\n            void initPortraitUrls();\n        });\n        onUnmounted(() => {\n            portraitLoaderDisposed = true;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            clearEffectTooltipTimers();\n        });\n        watch(battleSpeedUp, (enabled) => {\n            localStorage.setItem(SPEED_SETTING_KEY, enabled ? '1' : '0');\n        });\n        watch([\n            () => combatState.value.phase,\n            () => combatState.value.turn,\n            () => combatState.value.playerBaseDice,\n            () => combatState.value.enemyBaseDice,\n            isPlayerDiceObscured,\n            isEnemyDiceObscured,\n        ], () => {\n            playerDiceUiNoise.value = isPlayerDiceObscured.value ? rerollUiNoise() : 0;\n            enemyDiceUiNoise.value = isEnemyDiceObscured.value ? rerollUiNoise() : 0;\n        }, { immediate: true });\n        const drawCards = (count, currentDeck, currentDiscard) => {\n            let deck = [...currentDeck];\n            let discard = [...currentDiscard];\n            const drawn = [];\n            for (let i = 0; i < count; i++) {\n                if (deck.length === 0) {\n                    if (discard.length === 0)\n                        break;\n                    deck = [...discard].sort(() => Math.random() - 0.5);\n                    discard = [];\n                    log('<span class=\"text-yellow-500\"></span>');\n                    triggerPlayerRelicLifecycleHooks('onDeckShuffle');\n                }\n                const card = deck.pop();\n                if (card)\n                    drawn.push(card);\n            }\n            return { drawn, newDeck: deck, newDiscard: discard };\n        };\n        const handCardClass = (card) => {\n            const selected = combatState.value.playerSelectedCard;\n            const isSelected = selected === card;\n            const isNotSelected = selected && !isSelected;\n            const isActionPhase = combatState.value.phase === CombatPhase.PLAYER_INPUT;\n            return [\n                isSelected ? '-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]' : '',\n                isNotSelected ? 'opacity-30 scale-90 translate-y-8 grayscale' : 'hover:scale-110 hover:-translate-y-4 hover:z-50',\n                !isActionPhase && !isSelected ? 'opacity-50 grayscale cursor-not-allowed' : 'cursor-pointer',\n            ];\n        };\n        // --- Enemy AI Card Selection ---\n        function selectEnemyCard() {\n            // \n            if (getEffectStacks(enemyStats.value, ET.STUN) > 0) {\n                log('<span class=\"text-gray-400\"></span>');\n                return PASS_CARD;\n            }\n            if (combatState.value.enemyDeck.length === 0) {\n                if (combatState.value.enemyDiscard.length === 0)\n                    return PASS_CARD; // Fallback\n                combatState.value.enemyDeck = [...combatState.value.enemyDiscard].sort(() => Math.random() - 0.5);\n                combatState.value.enemyDiscard = [];\n            }\n            let selectedCard;\n            if (enemyDef) {\n                // Use the enemy's custom AI logic\n                const ctx = {\n                    enemyStats: enemyStats.value,\n                    playerStats: playerStats.value,\n                    deck: combatState.value.enemyDeck,\n                    turn: combatState.value.turn,\n                    flags: aiFlags,\n                };\n                selectedCard = enemyDef.selectCard(ctx);\n            }\n            else {\n                // Fallback: random selection (should never happen with proper registry)\n                const idx = Math.floor(Math.random() * combatState.value.enemyDeck.length);\n                selectedCard = combatState.value.enemyDeck[idx];\n            }\n            const check = canPlayCard(enemyStats.value, selectedCard, enemyTurnRawDice.value);\n            if (!check.allowed) {\n                log(`<span class=\"text-gray-400\">${check.reason ?? ''}</span>`);\n                return PASS_CARD;\n            }\n            return selectedCard;\n        }\n        // --- Phase Management ---\n        const startTurn = () => {\n            if (endCombatPending.value)\n                return;\n            enemyManaLackHintTurn = -1;\n            clearDicePreview();\n            stopAllCardAnimations();\n            combatState.value.phase = CombatPhase.DRAW_PHASE;\n            combatState.value.playerSelectedCard = null;\n            combatState.value.enemyIntentCard = null;\n            enemyIntentConsumedThisTurn.value = false;\n            isRolling.value = true;\n            shatteringTarget.value = null;\n            showClashAnimation.value = false;\n            triggerPlayerRelicLifecycleHooks('onTurnStart');\n            setTimeout(() => {\n                if (endCombatPending.value)\n                    return;\n                const pRawRoll = Math.floor(Math.random() * (playerStats.value.maxDice - playerStats.value.minDice + 1)) + playerStats.value.minDice;\n                const eRawRoll = Math.floor(Math.random() * (enemyStats.value.maxDice - enemyStats.value.minDice + 1)) + enemyStats.value.minDice;\n                const pRoll = consumeChargeOnRoll(playerStats.value, '', pRawRoll);\n                const eRoll = consumeChargeOnRoll(enemyStats.value, '', eRawRoll);\n                playerTurnRawDice.value = pRawRoll;\n                enemyTurnRawDice.value = eRawRoll;\n                isRolling.value = false;\n                combatState.value.playerBaseDice = pRoll;\n                combatState.value.enemyBaseDice = eRoll;\n                combatState.value.phase = CombatPhase.DRAW_PHASE;\n                log(` [${pRoll}] vs  [${eRoll}]`);\n            }, scaleDuration(1500));\n        };\n        // Watch for INIT phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.TURN_START) {\n                // Process turn-start effects (poison, burn, mana spring, etc.)\n                if (combatState.value.turn > 1) {\n                    for (const [side, label, stats] of [['player', '', playerStats], ['enemy', '', enemyStats]]) {\n                        const targetSide = side;\n                        const opponentSide = side === 'player' ? 'enemy' : 'player';\n                        const result = processOnTurnStart(stats.value);\n                        let turnStartLogs = [...result.logs];\n                        let burnDamageTaken = 0;\n                        let shownTrueDamage = 0;\n                        let burnIsTrueDamage = false;\n                        if (combatState.value.turn % 3 === 0) {\n                            const growthBigStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_BIG);\n                            if (growthBigStacks > 0) {\n                                stats.value.maxDice += growthBigStacks;\n                                turnStartLogs.push(`[]  +${growthBigStacks} ${stats.value.maxDice}`);\n                            }\n                            const growthSmallStacks = getEffectStacks(stats.value, ET.POINT_GROWTH_SMALL);\n                            if (growthSmallStacks > 0) {\n                                stats.value.minDice += growthSmallStacks;\n                                if (stats.value.minDice > stats.value.maxDice) {\n                                    stats.value.maxDice = stats.value.minDice;\n                                }\n                                turnStartLogs.push(`[]  +${growthSmallStacks} ${stats.value.minDice}`);\n                            }\n                        }\n                        for (const pending of result.applyToOpponent) {\n                            applyStatusEffectWithRelics(opponentSide, pending.type, pending.stacks, { source: 'effect:ignite_aura' });\n                        }\n                        // \n                        const burnLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (burnLog) {\n                            const burnMatch = burnLog.match(/\\s+(\\d+)\\s+/);\n                            const rawBurnDamage = burnMatch ? Number(burnMatch[1]) : 0;\n                            const burnStacks = getEffectStacks(stats.value, ET.BURN);\n                            turnStartLogs = turnStartLogs.filter((entry) => entry !== burnLog);\n                            if (rawBurnDamage > 0) {\n                                const burnResult = triggerPlayerRelicBeforeBurnDamageHooks(targetSide, burnStacks, rawBurnDamage, combatState.value.turn);\n                                result.hpChange += rawBurnDamage; //  processOnTurnStart \n                                if (burnResult.damage > 0) {\n                                    if (burnResult.isTrueDamage) {\n                                        pushFloatingNumber(side, burnResult.damage, 'true', '-');\n                                        burnDamageTaken = burnResult.damage;\n                                        shownTrueDamage += burnResult.damage;\n                                        burnIsTrueDamage = true;\n                                        result.trueDamage += burnResult.damage;\n                                        turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                    }\n                                    else {\n                                        let pendingBurnDamage = burnResult.damage;\n                                        if (getEffectStacks(stats.value, ET.BARRIER) > 0) {\n                                            reduceEffectStacks(stats.value, ET.BARRIER, 1);\n                                            pendingBurnDamage = 0;\n                                            turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                        }\n                                        if (pendingBurnDamage > 0) {\n                                            const armorStacks = getEffectStacks(stats.value, ET.ARMOR);\n                                            if (armorStacks > 0) {\n                                                const absorbed = Math.min(armorStacks, pendingBurnDamage);\n                                                if (absorbed > 0) {\n                                                    reduceEffectStacks(stats.value, ET.ARMOR, absorbed);\n                                                    pendingBurnDamage -= absorbed;\n                                                    turnStartLogs.push(`[]  ${absorbed} `);\n                                                }\n                                            }\n                                        }\n                                        if (pendingBurnDamage > 0) {\n                                            burnDamageTaken = pendingBurnDamage;\n                                            result.hpChange -= pendingBurnDamage;\n                                            pushFloatingNumber(side, pendingBurnDamage, 'magic', '-');\n                                            turnStartLogs.push(`[]  ${pendingBurnDamage} `);\n                                        }\n                                        else {\n                                            turnStartLogs.push('[] ');\n                                        }\n                                    }\n                                }\n                                else {\n                                    turnStartLogs.push('[]  0');\n                                }\n                            }\n                        }\n                        if (result.hpChange !== 0) {\n                            const hpBefore = stats.value.hp;\n                            stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + result.hpChange));\n                            const hpDelta = stats.value.hp - hpBefore;\n                            if (hpDelta > 0) {\n                                pushFloatingNumber(side, hpDelta, 'heal', '+');\n                            }\n                        }\n                        if (result.mpChange !== 0) {\n                            changeManaWithShock(side, result.mpChange, '', { showPositiveFloating: true });\n                        }\n                        if (result.trueDamage > 0) {\n                            stats.value.hp = Math.max(0, stats.value.hp - result.trueDamage);\n                            const pendingTrueDamage = Math.max(0, result.trueDamage - shownTrueDamage);\n                            if (pendingTrueDamage > 0) {\n                                pushFloatingNumber(side, pendingTrueDamage, 'true', '-');\n                            }\n                        }\n                        if (burnDamageTaken > 0) {\n                            triggerPlayerRelicAfterBurnDamageTakenHooks(targetSide, getEffectStacks(stats.value, ET.BURN), burnDamageTaken, burnIsTrueDamage, combatState.value.turn);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(stats.value);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${label}: ${reviveLog}</span>`);\n                        }\n                        for (const l of turnStartLogs) {\n                            log(`<span class=\"text-gray-400 text-[9px]\">${label}: ${l}</span>`);\n                        }\n                    }\n                }\n                setTimeout(() => {\n                    if (endCombatPending.value)\n                        return;\n                    startTurn();\n                }, scaleDuration(1000));\n            }\n        }, { immediate: true });\n        // Watch for DRAW_PHASE\n        watch([() => combatState.value.phase, isRolling], ([phase, rolling]) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.DRAW_PHASE && !rolling) {\n                // Use enemy AI to select card\n                const eCard = selectEnemyCard();\n                const { drawn, newDeck, newDiscard } = drawCards(3, combatState.value.playerDeck, combatState.value.discardPile);\n                combatState.value.enemyIntentCard = eCard;\n                enemyIntentConsumedThisTurn.value = false;\n                combatState.value.playerHand = drawn;\n                combatState.value.playerDeck = newDeck;\n                combatState.value.discardPile = newDiscard;\n                combatState.value.phase = CombatPhase.PLAYER_INPUT;\n            }\n        });\n        // Handle Card Select\n        const handleCardSelect = (card, handIdx) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (handIdx < 0 || handIdx >= combatState.value.playerHand.length)\n                return;\n            if (combatState.value.playerHand[handIdx] !== card)\n                return;\n            const check = canPlayCard(playerStats.value, card, playerTurnRawDice.value);\n            if (!check.allowed) {\n                triggerInvalidCardShake(card);\n                log(`<span class=\"text-red-400\">${check.reason ?? ''}</span>`);\n                return;\n            }\n            if (card.type === CardType.MAGIC) {\n                const canSpend = spendManaWithShock('player', card.manaCost, `${card.name}`);\n                if (!canSpend) {\n                    triggerInvalidCardShake(card);\n                    log('<span class=\"text-red-400\"></span>');\n                    return;\n                }\n            }\n            // \n            const [played] = combatState.value.playerHand.splice(handIdx, 1);\n            if (!played)\n                return;\n            clearDicePreview();\n            showPlayerPlayedCard(played);\n            combatState.value.discardPile.push(played);\n            combatState.value.playerSelectedCard = played;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n        };\n        const handleSkipTurn = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (!combatState.value.enemyIntentCard)\n                return;\n            clearDicePreview();\n            clearPlayerPlayedCard();\n            combatState.value.playerSelectedCard = PASS_CARD;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n            log('<span class=\"text-gray-400\"></span>');\n        };\n        // Clashable check\n        const isClashable = (t1, t2) => {\n            if (t1 === CardType.PHYSICAL && t2 === CardType.PHYSICAL)\n                return true;\n            if (t1 === CardType.MAGIC && t2 === CardType.MAGIC)\n                return true;\n            if (t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC))\n                return true;\n            if (t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                return true;\n            return false;\n        };\n        // Resolution\n        const resolveCombat = async (pCard, eCard, pDice, eDice) => {\n            if (endCombatPending.value)\n                return;\n            try {\n                let resolvedPlayerCard = pCard;\n                let resolvedEnemyCard = eCard;\n                if (resolvedEnemyCard.type === CardType.MAGIC && resolvedEnemyCard.id !== PASS_CARD.id) {\n                    const cost = Math.max(0, Math.floor(resolvedEnemyCard.manaCost));\n                    if (enemyStats.value.mp < cost) {\n                        resolvedEnemyCard = PASS_CARD;\n                        notifyEnemyManaInsufficient();\n                    }\n                }\n                resolvedPlayerCard = withFirstUseLightningAmbushBonus('player', resolvedPlayerCard);\n                resolvedEnemyCard = withFirstUseLightningAmbushBonus('enemy', resolvedEnemyCard);\n                if (resolvedPlayerCard.traits.combo) {\n                    comboUiMaskBridge.value = true;\n                }\n                const shouldClash = isClashable(resolvedPlayerCard.type, resolvedEnemyCard.type);\n                const playerSkippedTurn = resolvedPlayerCard.id === PASS_CARD.id;\n                const enemySkippedTurn = resolvedEnemyCard.id === PASS_CARD.id;\n                let resolvedPlayerDice = pDice;\n                let resolvedEnemyDice = eDice;\n                const rerollByTrait = (source, card) => {\n                    if (card.id === PASS_CARD.id || card.traits.reroll === 'none')\n                        return;\n                    const sourceLabel = source === 'player' ? '' : '';\n                    let target = source;\n                    if (card.traits.reroll === 'enemy') {\n                        target = source === 'player' ? 'enemy' : 'player';\n                    }\n                    const targetLabel = target === 'player' ? '' : '';\n                    const targetStats = target === 'player' ? playerStats.value : enemyStats.value;\n                    const rerolled = rollDiceInRange(targetStats.minDice, targetStats.maxDice);\n                    const before = target === 'player' ? resolvedPlayerDice : resolvedEnemyDice;\n                    if (target === 'player') {\n                        resolvedPlayerDice = rerolled;\n                        combatState.value.playerBaseDice = rerolled;\n                    }\n                    else {\n                        resolvedEnemyDice = rerolled;\n                        combatState.value.enemyBaseDice = rerolled;\n                    }\n                    log(`<span class=\"text-amber-300\">${sourceLabel}${card.name}${targetLabel} ${before}  ${rerolled}</span>`);\n                };\n                rerollByTrait('player', resolvedPlayerCard);\n                rerollByTrait('enemy', resolvedEnemyCard);\n                const pClashPoint = getCardPreviewPoint('player', resolvedPlayerCard, resolvedPlayerDice);\n                const eClashPoint = getCardPreviewPoint('enemy', resolvedEnemyCard, resolvedEnemyDice);\n                const clearBurnForSide = (side, reason) => {\n                    const target = side === 'player' ? playerStats.value : enemyStats.value;\n                    const label = side === 'player' ? '' : '';\n                    const burnStacks = getEffectStacks(target, ET.BURN);\n                    if (burnStacks <= 0)\n                        return;\n                    removeEffect(target, ET.BURN);\n                    log(`<span class=\"text-orange-300\">${reason} ${label}${burnStacks}</span>`);\n                };\n                if (enemySkippedTurn) {\n                    clearBurnForSide('player', '');\n                }\n                if (playerSkippedTurn) {\n                    clearBurnForSide('enemy', '');\n                }\n                applyToxinSpreadOnPhysicalPlay('player', resolvedPlayerCard);\n                applyToxinSpreadOnPhysicalPlay('enemy', resolvedEnemyCard);\n                applyAmbushOnCardPlay('player', resolvedPlayerCard);\n                applyAmbushOnCardPlay('enemy', resolvedEnemyCard);\n                let pSuccess = true;\n                let eSuccess = true;\n                let resultMsg = '';\n                let clashWinner = null;\n                if (shouldClash) {\n                    previewPlayerDice.value = pClashPoint;\n                    previewEnemyDice.value = eClashPoint;\n                    showClashAnimation.value = true;\n                    await wait(600);\n                    screenShake.value = true;\n                    setTimeout(() => (screenShake.value = false), scaleDuration(500));\n                    // \n                    applyBloodbladeAttachOnClash('player', 'enemy');\n                    applyBloodbladeAttachOnClash('enemy', 'player');\n                    let successfulDodger = null;\n                    if (resolvedPlayerCard.type === resolvedEnemyCard.type) {\n                        if (pClashPoint > eClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                        else if (eClashPoint > pClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                        else {\n                            pSuccess = false;\n                            eSuccess = false;\n                            clashWinner = 'tie';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedPlayerCard.type === CardType.DODGE) {\n                        if (eClashPoint > pClashPoint) {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                            successfulDodger = 'player';\n                        }\n                        else {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                        }\n                    }\n                    else if (resolvedEnemyCard.type === CardType.DODGE) {\n                        if (pClashPoint > eClashPoint) {\n                            pSuccess = false;\n                            clashWinner = 'enemy';\n                            resultMsg = '';\n                            successfulDodger = 'enemy';\n                        }\n                        else {\n                            eSuccess = false;\n                            clashWinner = 'player';\n                            resultMsg = '';\n                        }\n                    }\n                    if (clashWinner === 'player')\n                        shatteringTarget.value = 'enemy';\n                    else if (clashWinner === 'enemy')\n                        shatteringTarget.value = 'player';\n                    else if (clashWinner === 'tie') {\n                        shatteringTarget.value = 'both';\n                    }\n                    if (resultMsg) {\n                        log(`<span class=\"text-gray-300\">${resultMsg}</span>`);\n                    }\n                    if (clashWinner === 'enemy') {\n                        changeRerollCharges('player', 1);\n                        log('<span class=\"text-amber-300\"> +1</span>');\n                    }\n                    if (clashWinner === 'player') {\n                        clearBurnForSide('player', '');\n                    }\n                    else if (clashWinner === 'enemy') {\n                        clearBurnForSide('enemy', '');\n                    }\n                    if (successfulDodger === 'player') {\n                        applyLightningAttachOnDodge('player', 'enemy');\n                        applyDodgeSuccessCardBonus('player', resolvedPlayerCard, pClashPoint);\n                    }\n                    else if (successfulDodger === 'enemy') {\n                        applyLightningAttachOnDodge('enemy', 'player');\n                        applyDodgeSuccessCardBonus('enemy', resolvedEnemyCard, eClashPoint);\n                    }\n                    if (clashWinner === 'player' && resolvedPlayerCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('player', resolvedEnemyCard);\n                    }\n                    else if (clashWinner === 'enemy' && resolvedEnemyCard.traits.destroyOnClashWin) {\n                        destroyOpponentCardByTrait('enemy', resolvedPlayerCard);\n                    }\n                    await wait(650);\n                    showClashAnimation.value = false;\n                    clearDicePreview();\n                }\n                else {\n                    await wait(500);\n                    log('<span class=\"text-gray-400\"></span>');\n                    pSuccess = true;\n                    eSuccess = true;\n                }\n                // \n                if (!pSuccess && resolvedPlayerCard.traits.purgeOnUse && resolvedPlayerCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('player', resolvedPlayerCard);\n                }\n                if (!eSuccess && resolvedEnemyCard.traits.purgeOnUse && resolvedEnemyCard.id !== PASS_CARD.id) {\n                    applyPurgeTraitAfterUse('enemy', resolvedEnemyCard);\n                }\n                // Execution Phase - use algorithms.ts for proper damage calculation\n                const executeCard = async (source, card, baseDice) => {\n                    if (endCombatPending.value)\n                        return;\n                    const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n                    const defender = source === 'player' ? enemyStats.value : playerStats.value;\n                    const label = source === 'player' ? '' : '';\n                    const defenderSide = source === 'player' ? 'enemy' : 'player';\n                    const opponentSkippedTurn = source === 'player' ? enemySkippedTurn : playerSkippedTurn;\n                    if (source === 'enemy' && card.id !== PASS_CARD.id) {\n                        enemyIntentConsumedThisTurn.value = true;\n                    }\n                    if (source === 'enemy' && card.type === CardType.MAGIC && card.id !== PASS_CARD.id) {\n                        const canSpend = spendManaWithShock('enemy', card.manaCost, `${card.name}`);\n                        if (!canSpend) {\n                            notifyEnemyManaInsufficient();\n                            return;\n                        }\n                    }\n                    if (source === 'player') {\n                        clearPlayerPlayedCard();\n                    }\n                    await playResolvedCardAnimation(source, card);\n                    if (endCombatPending.value)\n                        return;\n                    // Calculate final point for this card\n                    const finalPoint = getCardFinalPoint(source, card, baseDice);\n                    const finalizeCardExecution = () => {\n                        applyInsertTrait(source, card);\n                        applyPurgeTraitAfterUse(source, card);\n                    };\n                    const syncCurrentPointForUi = () => {\n                        if (card.type !== CardType.FUNCTION || card.id === PASS_CARD.id)\n                            return;\n                        const nextPoint = Math.max(0, Math.floor(finalPoint));\n                        if (source === 'player') {\n                            if (combatState.value.playerBaseDice !== nextPoint) {\n                                combatState.value.playerBaseDice = nextPoint;\n                                log(`<span class=\"text-dungeon-gold/80\"> ${nextPoint}</span>`);\n                            }\n                        }\n                        else if (combatState.value.enemyBaseDice !== nextPoint) {\n                            combatState.value.enemyBaseDice = nextPoint;\n                        }\n                    };\n                    const applyCardEffects = () => {\n                        let hasEffect = false;\n                        for (const ce of card.cardEffects) {\n                            const targetKey = ce.target ?? 'self';\n                            const targetEntity = targetKey === 'self' ? attacker : defender;\n                            const targetSide = resolveTargetSide(source, targetKey);\n                            if (ce.kind === 'heal') {\n                                const healAmount = ce.valueMode === 'point_scale'\n                                    ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                    : Math.floor(ce.fixedValue ?? 0);\n                                const beforeHp = targetEntity.hp;\n                                targetEntity.hp = Math.min(targetEntity.maxHp, targetEntity.hp + healAmount);\n                                const actualHeal = targetEntity.hp - beforeHp;\n                                if (actualHeal > 0) {\n                                    pushFloatingNumber(targetSide, actualHeal, 'heal', '+');\n                                }\n                                log(`<span class=\"text-green-400\">${label}${card.name} ${healAmount} </span>`);\n                                hasEffect = true;\n                            }\n                            else if (ce.kind === 'apply_buff') {\n                                const stacks = ce.valueMode === 'point_scale'\n                                    ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                    : Math.floor(ce.fixedValue ?? 1);\n                                applyStatusEffectWithRelics(targetSide, ce.effectType, stacks, {\n                                    restrictedTypes: ce.restrictedTypes,\n                                    source: card.id,\n                                    lockDecayThisTurn: ce.effectType === ET.BIND,\n                                });\n                                if (ce.effectType === ET.ARMOR) {\n                                    pushFloatingNumber(targetSide, stacks, 'shield', '+');\n                                }\n                                log(`<span class=\"text-yellow-400\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[ce.effectType]?.name ?? ce.effectType}</span>`);\n                                hasEffect = true;\n                            }\n                            else if (ce.kind === 'restore_mana') {\n                                const restoreAmount = ce.valueMode === 'point_scale'\n                                    ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                    : Math.floor(ce.fixedValue ?? 0);\n                                const manaResult = changeManaWithShock(targetSide, restoreAmount, `${label}${card.name}`, { showPositiveFloating: true });\n                                const actualRestore = Math.max(0, manaResult.actualDelta);\n                                if (actualRestore > 0) {\n                                    log(`<span class=\"text-blue-400\">${label}${card.name} ${actualRestore} </span>`);\n                                    hasEffect = true;\n                                }\n                                else if (manaResult.actualDelta < 0) {\n                                    log(`<span class=\"text-blue-400\">${label}${card.name} ${Math.abs(manaResult.actualDelta)} </span>`);\n                                    hasEffect = true;\n                                }\n                                else if (restoreAmount !== 0) {\n                                    log(`<span class=\"text-blue-400\">${label}${card.name}</span>`);\n                                    hasEffect = true;\n                                }\n                            }\n                            else if (ce.kind === 'cleanse') {\n                                const cleanseTargets = ce.cleanseTypes && ce.cleanseTypes.length > 0\n                                    ? ce.cleanseTypes\n                                    : targetEntity.effects.map((eff) => eff.type);\n                                for (const et of cleanseTargets) {\n                                    removeEffect(targetEntity, et);\n                                }\n                                log(`<span class=\"text-cyan-300\">${label}${card.name}</span>`);\n                                hasEffect = true;\n                            }\n                        }\n                        return hasEffect;\n                    };\n                    if (card.id === 'enemy_muxinlan_liquidation') {\n                        const cleanseTargets = [...ELEMENTAL_DEBUFF_TYPES];\n                        let removedStacks = 0;\n                        for (const et of cleanseTargets) {\n                            const stacks = getEffectStacks(defender, et);\n                            if (stacks > 0) {\n                                removedStacks += stacks;\n                                removeEffect(defender, et);\n                            }\n                        }\n                        const trueDamage = removedStacks * 2;\n                        if (trueDamage > 0) {\n                            defender.hp = Math.max(0, defender.hp - trueDamage);\n                            pushFloatingNumber(defenderSide, trueDamage, 'true', '-');\n                            log(`<span class=\"text-zinc-300\">${label}${card.name} ${removedStacks}  ${trueDamage} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(defender);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${reviveLog}</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_liquid_fire') {\n                        const coldStacks = getEffectStacks(defender, ET.COLD);\n                        if (coldStacks > 0) {\n                            removeEffect(defender, ET.COLD);\n                            applyStatusEffectWithRelics(defenderSide, ET.BURN, coldStacks, { source: card.id });\n                            log(`<span class=\"text-orange-300\">${label}${card.name} ${coldStacks} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_activated_slime') {\n                        const currentElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((et) => ({ type: et, stacks: getEffectStacks(defender, et) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (currentElementals.length > 0) {\n                            const picked = currentElementals[Math.floor(Math.random() * currentElementals.length)];\n                            applyStatusEffectWithRelics(defenderSide, picked.type, picked.stacks, { source: card.id });\n                            log(`<span class=\"text-teal-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        applyHitAttachEffects(source, card, attacker, defenderSide);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_premium_shield') {\n                        const x = Math.max(0, Math.floor(defender.mp));\n                        if (x > 0) {\n                            applyStatusEffectWithRelics(source, ET.STURDY, x, { source: card.id });\n                            attacker.mp += x;\n                            pushFloatingNumber(source, x, 'shield', '+');\n                            pushFloatingNumber(source, x, 'mana', '+');\n                        }\n                        log(`<span class=\"text-cyan-300\">${label}${card.name} ${x}  ${x} </span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_set_ambush') {\n                        if (opponentSkippedTurn) {\n                            applyStatusEffectWithRelics(defenderSide, ET.MANA_DRAIN, 1, { source: card.id });\n                            log(`<span class=\"text-indigo-300\">${label}${card.name}1</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_muxinlan_cunning') {\n                        applyStatusEffectWithRelics(defenderSide, ET.PEEP_FORBIDDEN, 1, { source: card.id });\n                        applyStatusEffectWithRelics(defenderSide, ET.COGNITIVE_INTERFERENCE, 1, { source: card.id });\n                        log(`<span class=\"text-violet-300\">${label}${card.name}</span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_mimicbubble_iridescent_float') {\n                        if (opponentSkippedTurn) {\n                            applyStatusEffectWithRelics(defenderSide, ET.BIND, 1, {\n                                source: card.id,\n                                restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n                                lockDecayThisTurn: true,\n                            });\n                            log(`<span class=\"text-indigo-300\">${label}${card.name} 1 </span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_mist_sprite_illusion_lure') {\n                        if (opponentSkippedTurn) {\n                            applyLifeMaxReduction(defenderSide, 2, card.id, `${label}${card.name}`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_vinewalker_lubricated_shrink') {\n                        if (opponentSkippedTurn) {\n                            const chargeStacks = Math.max(0, Math.floor(finalPoint));\n                            if (chargeStacks > 0) {\n                                applyStatusEffectWithRelics(source, ET.CHARGE, chargeStacks, { source: card.id });\n                            }\n                            log(`<span class=\"text-cyan-300\">${label}${card.name} ${chargeStacks} </span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_internal_manipulation') {\n                        const currentCorrosion = Math.max(0, getEffectStacks(defender, ET.CORROSION));\n                        const addStacks = Math.min(10, currentCorrosion);\n                        if (addStacks > 0) {\n                            applyStatusEffectWithRelics(defenderSide, ET.CORROSION, addStacks, { source: card.id });\n                            log(`<span class=\"text-emerald-300\">${label}${card.name} +${addStacks}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.id === 'enemy_springspirit_undead_condense') {\n                        const selfElementals = ELEMENTAL_DEBUFF_TYPES\n                            .map((type) => ({ type, stacks: getEffectStacks(attacker, type) }))\n                            .filter((entry) => entry.stacks > 0);\n                        if (selfElementals.length > 0) {\n                            const picked = selfElementals[Math.floor(Math.random() * selfElementals.length)];\n                            removeEffect(attacker, picked.type);\n                            log(`<span class=\"text-cyan-300\">${label}${card.name}${EFFECT_REGISTRY[picked.type]?.name ?? picked.type}</span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}debuff</span>`);\n                        }\n                        const healAmount = Math.max(0, Math.floor(finalPoint));\n                        const { healed } = healForSide(source, healAmount);\n                        log(`<span class=\"text-green-300\">${label}${card.name} ${healed} </span>`);\n                        finalizeCardExecution();\n                        return;\n                    }\n                    if (card.type === CardType.FUNCTION) {\n                        if (card.id === 'burn_char_convert') {\n                            const burned = getEffectStacks(attacker, ET.BURN);\n                            syncCurrentPointForUi();\n                            if (burned > 0) {\n                                removeEffect(attacker, ET.BURN);\n                                attacker.mp += burned;\n                                pushFloatingNumber(source, burned, 'mana', '+');\n                                log(`<span class=\"text-blue-400\">${label}${card.name} ${burned}  ${burned} </span>`);\n                            }\n                            else {\n                                log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                            }\n                            finalizeCardExecution();\n                            return;\n                        }\n                        // Process card effects (heal, apply_buff, restore_mana, cleanse)\n                        syncCurrentPointForUi();\n                        const hasEffect = applyCardEffects();\n                        if (!hasEffect) {\n                            // Fallback for special function cards (e.g. MP recovery)\n                            if (card.id === 'c5') {\n                                attacker.mp += 5;\n                                pushFloatingNumber(source, 5, 'mana', '+');\n                            }\n                            log(`${label}${card.name}`);\n                        }\n                        finalizeCardExecution();\n                    }\n                    else if (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC) {\n                        const burnStacksOnDefender = getEffectStacks(defender, ET.BURN);\n                        const baseHitCount = Math.max(1, Math.floor(card.hitCount ?? 1));\n                        const extraHitCount = card.id === 'enemy_moth_swarm_burst'\n                            ? Math.max(0, getEffectStacks(attacker, ET.SWARM))\n                            : 0;\n                        const totalHitCount = baseHitCount + extraHitCount;\n                        if (totalHitCount > 1) {\n                            log(`<span class=\"text-violet-300\">${label}${card.name} ${totalHitCount} </span>`);\n                        }\n                        for (let hit = 0; hit < totalHitCount; hit++) {\n                            // Attack card: calculate damage through the full pipeline\n                            let cardForCalculation = card;\n                            const customDamage = card.id === 'burn_scorch_wind'\n                                ? Math.floor(finalPoint * 0.5) + burnStacksOnDefender\n                                : card.id === 'burn_detonation'\n                                    ? Math.floor(burnStacksOnDefender)\n                                    : null;\n                            if (customDamage !== null) {\n                                cardForCalculation = {\n                                    ...card,\n                                    damageLogic: { mode: 'fixed', value: Math.floor(customDamage) },\n                                };\n                            }\n                            const { damage, isTrueDamage, logs: dmgLogs } = calculateFinalDamage({\n                                finalPoint,\n                                card: cardForCalculation,\n                                attackerEffects: attacker.effects,\n                                defenderEffects: defender.effects,\n                                relicModifiers: NO_RELIC_MOD,\n                            });\n                            const { actualDamage, logs: applyLogs } = applyDamageToEntity(defender, damage, isTrueDamage);\n                            const hitPrefix = totalHitCount > 1 ? `${hit + 1}` : '';\n                            const damageLogColorClass = isTrueDamage ? 'text-zinc-500' : 'text-red-400';\n                            log(`${label}${card.name}${hitPrefix}${finalPoint} <span class=\"${damageLogColorClass} font-bold\">${actualDamage}</span> `);\n                            if (actualDamage > 0) {\n                                const damageKind = isTrueDamage\n                                    ? 'true'\n                                    : (card.type === CardType.MAGIC ? 'magic' : 'physical');\n                                pushFloatingNumber(defenderSide, actualDamage, damageKind, '-');\n                            }\n                            const coldLogs = consumeColdAfterDealingDamage(attacker, actualDamage);\n                            for (const coldLog of coldLogs) {\n                                log(`<span class=\"text-sky-300 text-[9px]\">${label}: ${coldLog}</span>`);\n                            }\n                            for (const dl of [...dmgLogs, ...applyLogs]) {\n                                log(`<span class=\"text-gray-500 text-[9px]\">${dl}</span>`);\n                            }\n                            triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, hit + 1, totalHitCount, damage, actualDamage);\n                            applyHitAttachEffects(source, card, attacker, defenderSide);\n                            if (defender.hp <= 0)\n                                break;\n                        }\n                        // \n                        applyCardEffects();\n                        if (card.id === 'enemy_muxinlan_unstable_reagent') {\n                            const stacks = Math.max(0, Math.floor(finalPoint * 0.5));\n                            if (stacks > 0) {\n                                const picked = ELEMENTAL_DEBUFF_TYPES[Math.floor(Math.random() * ELEMENTAL_DEBUFF_TYPES.length)];\n                                applyStatusEffectWithRelics(defenderSide, picked, stacks, { source: card.id });\n                                log(`<span class=\"text-fuchsia-300\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[picked]?.name ?? picked}</span>`);\n                            }\n                        }\n                        finalizeCardExecution();\n                    }\n                    else {\n                        finalizeCardExecution();\n                    }\n                };\n                const queue = [];\n                let deferredEnemyAction = null;\n                if (pSuccess)\n                    queue.push({ source: 'player', card: resolvedPlayerCard, type: resolvedPlayerCard.type, baseDice: resolvedPlayerDice });\n                if (eSuccess) {\n                    const enemyAction = { source: 'enemy', card: resolvedEnemyCard, type: resolvedEnemyCard.type, baseDice: resolvedEnemyDice };\n                    if (resolvedPlayerCard.traits.combo) {\n                        // \n                        deferredEnemyAction = enemyAction;\n                    }\n                    else {\n                        queue.push(enemyAction);\n                    }\n                }\n                const typePriority = (t) => {\n                    if (t === CardType.FUNCTION)\n                        return 3;\n                    if (t === CardType.MAGIC)\n                        return 2;\n                    if (t === CardType.PHYSICAL)\n                        return 1;\n                    return 0;\n                };\n                queue.sort((a, b) => typePriority(b.type) - typePriority(a.type));\n                const shouldRunSimultaneousVisuals = (queue.length === 2\n                    && queue.every((action) => action.type === CardType.DODGE || action.type === CardType.FUNCTION));\n                if (shouldRunSimultaneousVisuals) {\n                    await Promise.all(queue.map((action) => executeCard(action.source, action.card, action.baseDice)));\n                    if (endCombatPending.value)\n                        return;\n                    await wait(630);\n                }\n                else {\n                    for (const action of queue) {\n                        if (endCombatPending.value)\n                            break;\n                        await executeCard(action.source, action.card, action.baseDice);\n                        if (endCombatPending.value)\n                            break;\n                        await wait(630);\n                    }\n                }\n                stopAllCardAnimations();\n                if (endCombatPending.value)\n                    return;\n                //  draw  1 \n                if (resolvedPlayerCard.traits.combo) {\n                    if (resolvedPlayerCard.traits.draw) {\n                        const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                        combatState.value.playerDeck = newDeck;\n                        combatState.value.discardPile = newDiscard;\n                        combatState.value.playerHand = [...combatState.value.playerHand, ...drawn];\n                    }\n                    if (combatState.value.playerHand.length > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        combatState.value.playerSelectedCard = null;\n                        combatState.value.phase = CombatPhase.PLAYER_INPUT;\n                        log('<span class=\"text-dungeon-gold/80\"></span>');\n                        return;\n                    }\n                    // \n                    if (deferredEnemyAction && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                        if (endCombatPending.value)\n                            return;\n                        await executeCard(deferredEnemyAction.source, deferredEnemyAction.card, deferredEnemyAction.baseDice);\n                        if (endCombatPending.value)\n                            return;\n                        await wait(630);\n                    }\n                }\n                if (playerStats.value.hp <= 0 || enemyStats.value.hp <= 0)\n                    return;\n                // End-of-turn effect processing (armor halving, stun clear, etc.)\n                const pEndLogs = processOnTurnEnd(playerStats.value);\n                const eEndLogs = processOnTurnEnd(enemyStats.value);\n                for (const l of [...pEndLogs, ...eEndLogs]) {\n                    log(`<span class=\"text-gray-500 text-[9px]\">${l}</span>`);\n                }\n                triggerPlayerRelicLifecycleHooks('onTurnEnd');\n                // Cleanup\n                combatState.value.discardPile = [...combatState.value.discardPile, ...combatState.value.playerHand];\n                combatState.value.playerHand = [];\n                combatState.value.turn += 1;\n                combatState.value.phase = CombatPhase.TURN_START;\n            }\n            finally {\n                comboUiMaskBridge.value = false;\n            }\n        };\n        // Watch for RESOLUTION phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.RESOLUTION &&\n                combatState.value.playerSelectedCard &&\n                combatState.value.enemyIntentCard &&\n                !showClashAnimation.value) {\n                resolveCombat(combatState.value.playerSelectedCard, combatState.value.enemyIntentCard, combatState.value.playerBaseDice, combatState.value.enemyBaseDice);\n            }\n        });\n        const runEndCombatSequence = async (win) => {\n            const token = ++endCombatSequenceToken;\n            await wait(HP_BAR_ANIMATION_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            await wait(RESULT_DELAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            stopAllCardAnimations();\n            battleResultBanner.value = win ? 'win' : 'lose';\n            combatState.value.phase = win ? CombatPhase.WIN : CombatPhase.LOSE;\n            await wait(RESULT_BANNER_STAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            emit('endCombat', win, playerStats.value, [...combatState.value.logs]);\n        };\n        // /\n        watch([\n            () => playerStats.value.hp,\n            () => enemyStats.value.hp,\n            () => getEffectStacks(playerStats.value, ET.POISON_AMOUNT),\n            () => getEffectStacks(enemyStats.value, ET.POISON_AMOUNT),\n        ], () => {\n            if (endCombatPending.value || poisonAmountImmediateCheckRunning)\n                return;\n            poisonAmountImmediateCheckRunning = true;\n            try {\n                applyImmediatePoisonAmountLethalCheck('player');\n                applyImmediatePoisonAmountLethalCheck('enemy');\n            }\n            finally {\n                poisonAmountImmediateCheckRunning = false;\n            }\n        });\n        // Win/Lose check\n        watch([() => playerStats.value.hp, () => enemyStats.value.hp], ([pHp, eHp]) => {\n            if (endCombatPending.value)\n                return;\n            let win = null;\n            if (pHp <= 0)\n                win = false;\n            else if (eHp <= 0)\n                win = true;\n            if (win === null)\n                return;\n            endCombatPending.value = true;\n            void runEndCombatSequence(win);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"combatRootEl\",\n                ref: combatRootEl,\n                class: _normalizeClass([\"combat-root w-full h-full bg-[#1a1a22] text-dungeon-paper font-ui relative overflow-hidden select-none\", [_unref(screenShake) ? 'animate-shake' : '', _unref(impactShake) ? 'animate-impact-shake' : '']]),\n                style: _normalizeStyle(_unref(combatRootStyle))\n            }, [\n                _createCommentVNode(\" Background \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Dynamic background image \"),\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Fallback gradient \"),\n                    _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(40,35,50,0.5),_#0e0e14_90%)]\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\" Darken overlay for readability \"),\n                    _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/40\" }, null, -1 /* CACHED */))\n                ]),\n                _cache[48] || (_cache[48] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-20 z-0 mix-blend-overlay bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Top Left: Settings \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (settingsOpen.value = !_unref(settingsOpen)))\n                    }, [\n                        _createVNode(_unref(Settings2), { class: \"size-5\" }),\n                        _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (emit('openDeck')))\n                    }, [\n                        _createVNode(_unref(Scroll), { class: \"size-5\" }),\n                        _cache[28] || (_cache[28] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (emit('openRelics')))\n                    }, [\n                        _createVNode(_unref(Box), { class: \"size-5\" }),\n                        _cache[29] || (_cache[29] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    (_unref(settingsOpen))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => (_isRef(battleSpeedUp) ? (battleSpeedUp).value = $event : null)),\n                                        type: \"checkbox\",\n                                        class: \"accent-dungeon-gold\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(battleSpeedUp)]\n                                    ]),\n                                    _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, \"2x\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"h-8 rounded-lg border border-white/20 bg-[#252030]/80 px-2 text-xs text-dungeon-gold hover:border-dungeon-gold/60 hover:bg-[#352a40] transition-colors\",\n                                    onClick: _cache[4] || (_cache[4] =\n                                        //@ts-ignore\n                                        (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                }, \"  \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" Top Center: Turn Counter \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"text-xs text-white/60 tracking-widest\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(combatState).turn), 1 /* TEXT */)\n                    ])\n                ]),\n                _createCommentVNode(\" Battlefield Layer \"),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _createCommentVNode(\" Enemy Position: Top Right \"),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _createCommentVNode(\" Enemy Intent Card \"),\n                        (_unref(showEnemyIntentCard) && _unref(combatState).enemyIntentCard)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"absolute -top-5 left-0 text-amber-200/80 text-[10px] px-2 py-0.5 rounded\" }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _createVNode(DungeonCard, {\n                                            card: _unref(combatState).enemyIntentCard,\n                                            \"mask-level\": _unref(enemyIntentMaskLevel),\n                                            \"is-enemy\": \"\",\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\", \"mask-level\"])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 1,\n                                class: \"absolute -left-24 bottom-20 z-20 animate-float pointer-events-auto\",\n                                onMouseenter: handleEnemyDiceHoverStart,\n                                onMouseleave: handleEnemyDiceHoverEnd,\n                                onTouchstartPassive: handleEnemyDiceTouchStart,\n                                onTouchend: handleEnemyDiceTouchEnd,\n                                onTouchcancel: handleEnemyDiceTouchEnd\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayEnemyDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(enemyStats).minDice,\n                                    \"rolling-max\": _unref(enemyStats).maxDice,\n                                    \"number-class\": _unref(enemyDiceNumberClass),\n                                    color: \"red\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(enemyDicePreviewChanged) && !_unref(isEnemyDiceObscured))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                        _createElementVNode(\"span\", _hoisted_16, \" \" + _toDisplayString(_unref(enemyTurnRawDice)), 1 /* TEXT */),\n                                        _cache[33] || (_cache[33] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_17, \" \" + _toDisplayString(_unref(displayEnemyDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createCommentVNode(\" Placeholder icon (shown when portrait fails to load) \"),\n                                (_unref(enemyPortraitError))\n                                    ? (_openBlock(), _createBlock(_unref(Skull), {\n                                        key: 0,\n                                        class: \"w-48 h-48 text-red-900/20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n                                    }))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Enemy portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(enemyPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"enemy portrait\",\n                                            onError: _cache[5] || (_cache[5] = ($event) => (enemyPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_20)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Enemy Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(enemyDisplayName)), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('enemy'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(enemyArmor) > 0 || _unref(enemyPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                    (_unref(enemyArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[6] || (_cache[6] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[7] || (_cache[7] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[8] || (_cache[8] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[34] || (_cache[34] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_26, _toDisplayString(_unref(enemyArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_25))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(enemyPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[10] || (_cache[10] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[11] || (_cache[11] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(enemyPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_27))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _cache[36] || (_cache[36] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_30, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyStats).maxHp > 0 ? (_unref(enemyStats).hp / _unref(enemyStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_31, _toDisplayString(_unref(enemyStats).hp) + \"/\" + _toDisplayString(_unref(enemyStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_32, [\n                                _cache[37] || (_cache[37] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_33, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(enemyStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_34, _toDisplayString(_unref(enemyStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_35, [\n                                _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_unref(enemyStats).minDice) + \" ~ \" + _toDisplayString(_unref(enemyStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(enemyVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(enemyVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `enemy-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff)),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff)),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff)),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_39, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_38));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Player Position: Bottom Left \"),\n                    _createElementVNode(\"div\", _hoisted_40, [\n                        _createCommentVNode(\" Player Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: _normalizeClass([\"absolute -top-[1rem] left-[140%] -translate-x-1/2 z-20 animate-float pointer-events-auto\", _unref(canPlayerRerollDice) ? 'cursor-pointer' : 'cursor-default']),\n                                title: _unref(playerDiceRerollHint),\n                                style: { \"animation-delay\": \"1s\" },\n                                onClick: handlePlayerDiceClick\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayPlayerDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(playerStats).minDice,\n                                    \"rolling-max\": _unref(playerStats).maxDice,\n                                    \"number-class\": _unref(playerDiceNumberClass),\n                                    color: \"gold\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(playerDicePreviewChanged) && !_unref(isPlayerDiceObscured))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_42, [\n                                        _createElementVNode(\"span\", _hoisted_43, \" \" + _toDisplayString(_unref(playerTurnRawDice)), 1 /* TEXT */),\n                                        _cache[39] || (_cache[39] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_44, \" \" + _toDisplayString(_unref(displayPlayerDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(playerDiceRerollCharges) > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 1,\n                                        class: _normalizeClass([\"absolute left-1/2 top-[5.9rem] -translate-x-1/2 rounded-md border border-amber-300/35 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap\", _unref(canPlayerRerollDice) ? 'text-amber-200' : 'text-amber-200/70'])\n                                    }, \" \" + _toDisplayString(_unref(playerDiceRerollCharges)), 3 /* TEXT, CLASS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 10 /* CLASS, PROPS */, _hoisted_41))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Player Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_45, [\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _createCommentVNode(\" Placeholder glow (shown when portrait fails to load) \"),\n                                (_unref(playerPortraitError))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Player portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(playerPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"player portrait\",\n                                            onError: _cache[12] || (_cache[12] = ($event) => (playerPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_48)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Player Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_49, [\n                            _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"flex justify-between text-xs text-white/80 font-bold mb-1.5\" }, [\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_50, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('player'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(playerArmor) > 0 || _unref(playerPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_51, [\n                                    (_unref(playerArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[13] || (_cache[13] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[14] || (_cache[14] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[15] || (_cache[15] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[40] || (_cache[40] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_53, _toDisplayString(_unref(playerArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_52))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(playerPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[16] || (_cache[16] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[17] || (_cache[17] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[18] || (_cache[18] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[41] || (_cache[41] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(playerPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_54))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_56, [\n                                _cache[42] || (_cache[42] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_57, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerStats).maxHp > 0 ? (_unref(playerStats).hp / _unref(playerStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_58, _toDisplayString(_unref(playerStats).hp) + \"/\" + _toDisplayString(_unref(playerStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_59, [\n                                _cache[43] || (_cache[43] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_60, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(playerStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_61, _toDisplayString(_unref(playerStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_62, [\n                                _cache[44] || (_cache[44] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_63, _toDisplayString(_unref(playerStats).minDice) + \" ~ \" + _toDisplayString(_unref(playerStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(playerVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_64, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `player-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff, 'right')),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_66, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_65));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Card Animation Layer \"),\n                _createElementVNode(\"div\", _hoisted_67, [\n                    (_unref(playerPlayedCardVisual))\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"absolute player-played-card\",\n                            style: _normalizeStyle(_unref(playerPlayedCardStyle))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass(_unref(playerPlayedCardVisual).entered ? 'player-played-card-bob' : '')\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: _unref(playerPlayedCardVisual).card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 4 /* STYLE */))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedCardVisualEntries), (visual) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: visual.id,\n                            class: _normalizeClass([\"resolved-card-visual\", visual.source === 'player' ? 'resolved-card-visual--player' : 'resolved-card-visual--enemy'])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"resolved-card-visual-inner\", resolvedCardVisualInnerClass(visual)])\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: visual.card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\" UI Layer (HUD) \"),\n                _createElementVNode(\"div\", _hoisted_68, [\n                    _createCommentVNode(\" Center: Clash Zone \"),\n                    _createElementVNode(\"div\", _hoisted_69, [\n                        _createCommentVNode(\" Clash Animation Stage \"),\n                        (_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_70, [\n                                _createCommentVNode(\" Player Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute right-1/2 mr-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'player' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-left']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayPlayerDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(playerStats).minDice,\n                                        \"rolling-max\": _unref(playerStats).maxDice,\n                                        color: \"gold\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */),\n                                _createCommentVNode(\" Enemy Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute left-1/2 ml-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'enemy' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-right']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayEnemyDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(enemyStats).minDice,\n                                        \"rolling-max\": _unref(enemyStats).maxDice,\n                                        color: \"red\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" Bottom Bar: Hand & Piles \"),\n                    _createElementVNode(\"div\", _hoisted_71, [\n                        _createCommentVNode(\" Center: Hand Cards \"),\n                        _createElementVNode(\"div\", _hoisted_72, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).playerHand, (card, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: handCardKey(card),\n                                    class: _normalizeClass([\"transition-all duration-500 origin-bottom\", [handCardClass(card), isCardShaking(card) ? 'invalid-card-shake' : '']]),\n                                    style: _normalizeStyle(transitionStyle(500)),\n                                    onMouseenter: ($event) => (handlePlayerCardHoverStart(card)),\n                                    onMouseleave: handlePlayerCardHoverEnd,\n                                    onTouchstartPassive: ($event) => (handlePlayerCardTouchStart(card)),\n                                    onTouchend: handlePlayerCardTouchEnd,\n                                    onTouchcancel: handlePlayerCardTouchEnd\n                                }, [\n                                    _createVNode(DungeonCard, {\n                                        card: card,\n                                        \"mask-level\": _unref(playerHandMaskLevel),\n                                        disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT && _unref(combatState).playerSelectedCard !== card,\n                                        onClick: ($event) => (handleCardSelect(card, idx))\n                                    }, null, 8 /* PROPS */, [\"card\", \"mask-level\", \"disabled\", \"onClick\"])\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_73));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Right Corner: Skip + Deck/Discard \"),\n                        _createElementVNode(\"div\", _hoisted_74, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-5 bg-[#252030]/90 border border-white/15 rounded-lg text-xs text-white/80 hover:border-amber-400 hover:text-amber-200 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed\",\n                                disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT,\n                                onClick: handleSkipTurn\n                            }, \"  \", 8 /* PROPS */, _hoisted_75),\n                            _createElementVNode(\"div\", _hoisted_76, [\n                                _createElementVNode(\"div\", _hoisted_77, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-dungeon-gold active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[19] || (_cache[19] = ($event) => (overlayOpen.value = 'deck'))\n                                    }, [\n                                        _createVNode(_unref(Layers), { class: \"size-5 text-dungeon-gold\" }),\n                                        _createElementVNode(\"span\", _hoisted_78, _toDisplayString(_unref(combatState).playerDeck.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_79, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[20] || (_cache[20] = ($event) => (overlayOpen.value = 'discard'))\n                                    }, [\n                                        _createVNode(_unref(Trash2), { class: \"size-5 text-gray-400\" }),\n                                        _createElementVNode(\"span\", _hoisted_80, _toDisplayString(_unref(combatState).discardPile.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" Log Feed Overlay: top-right, below parent \\\"\\\" button \"),\n                    _createElementVNode(\"div\", _hoisted_81, [\n                        _createElementVNode(\"div\", _hoisted_82, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors\",\n                                title: _unref(logsCollapsed) ? '' : '',\n                                onClick: _cache[21] || (_cache[21] = ($event) => (logsCollapsed.value = !_unref(logsCollapsed)))\n                            }, _toDisplayString(_unref(logsCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_83),\n                            (!_unref(logsCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_84, [\n                                    _createCommentVNode(\" eslint-disable-next-line vue/no-v-html \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).logs, (l, i) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: i,\n                                            class: \"bg-black/60 p-1 rounded border-l-2 border-gray-700\",\n                                            innerHTML: l\n                                        }, null, 8 /* PROPS */, _hoisted_85));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                (_unref(battleResultBanner))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_86, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"px-12 py-5 rounded-2xl border-2 text-5xl md:text-6xl font-heading tracking-[0.2em] drop-shadow-[0_0_30px_rgba(0,0,0,0.9)] animate-pulse backdrop-blur-md\", _unref(battleResultBanner) === 'win'\n                                    ? 'bg-emerald-950/70 border-emerald-400/60 text-emerald-300'\n                                    : 'bg-red-950/70 border-red-500/60 text-red-300'])\n                        }, _toDisplayString(_unref(battleResultBanner) === 'win' ? '' : ''), 3 /* TEXT, CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(effectTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"effect-tooltip absolute z-[72] pointer-events-none\", _unref(effectTooltip).align === 'right' ? 'effect-tooltip--right text-right' : 'effect-tooltip--center']),\n                        style: _normalizeStyle({ left: `${_unref(effectTooltip).x}px`, top: `${_unref(effectTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_87, _toDisplayString(_unref(effectTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_88, _toDisplayString(_unref(effectTooltip).description), 1 /* TEXT */),\n                        (_unref(effectTooltip).stacks > 1)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_89, \": \" + _toDisplayString(_unref(effectTooltip).stacks), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Deck/Discard Overlay \"),\n                (_unref(overlayOpen))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8\",\n                        onClick: _cache[24] || (_cache[24] = ($event) => (overlayOpen.value = null))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"bg-[#18141e] border border-white/10 p-6 rounded-2xl max-w-2xl w-full max-h-[80%] flex flex-col relative shadow-2xl\",\n                            onClick: _cache[23] || (_cache[23] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_90, [\n                                _createElementVNode(\"h3\", _hoisted_91, _toDisplayString(_unref(overlayOpen) === 'deck' ? '' : ''), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    onClick: _cache[22] || (_cache[22] = ($event) => (overlayOpen.value = null))\n                                }, [\n                                    _createVNode(_unref(XIcon), { class: \"size-6 hover:text-red-500\" })\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_92, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overlayOpen) === 'deck' ? _unref(combatState).playerDeck : _unref(combatState).discardPile, (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"scale-75 origin-top-left\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatView.vue?vue&type=style&index=0&id=778f469a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-778f469a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, renderSlot as _renderSlot, normalizeClass as _normalizeClass, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"flex items-center justify-between px-6 py-4 border-b border-dungeon-gold/20 bg-[#1a0f08] rounded-t-lg shrink-0\" };\nconst _hoisted_2 = { class: \"text-xl font-heading text-dungeon-gold tracking-widest\" };\nconst _hoisted_3 = { class: \"p-8 flex-1 overflow-y-auto custom-scrollbar text-dungeon-paper/60 bg-dungeon-brown\" };\nimport { X } from 'lucide-vue-next';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonModal',\n    props: {\n        title: {},\n        isOpen: { type: Boolean },\n        panelClass: {}\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                (__props.isOpen)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm\",\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\n                                'relative w-full max-w-3xl p-1 bg-dungeon-brown rounded-lg shadow-2xl border border-dungeon-gold/40 mx-4 flex flex-col max-h-[90%]',\n                                __props.panelClass,\n                            ])\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"h2\", _hoisted_2, _toDisplayString(__props.title), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    class: \"text-dungeon-gold-dim hover:text-dungeon-gold transition-colors\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                                }, [\n                                    _createVNode(_unref(X), { class: \"size-6\" })\n                                ])\n                            ]),\n                            _createCommentVNode(\" Body \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"text-center py-12\" }, [\n                                        _createElementVNode(\"div\", { class: \"mb-4 text-4xl opacity-20 animate-pulse\" }, \"\"),\n                                        _createElementVNode(\"p\", { class: \"font-ui text-sm uppercase tracking-widest\" }, \" // \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Ornamental Corners \"),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-dungeon-gold -mt-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-dungeon-gold -mt-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-dungeon-gold -mb-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-dungeon-gold -mb-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */))\n                        ], 2 /* CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"text-center py-8\"\n};\nconst _hoisted_2 = {\n    key: 1,\n    class: \"flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"flex items-start gap-3\" };\nconst _hoisted_5 = { class: \"shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors\" };\nconst _hoisted_6 = { class: \"text-dungeon-gold font-heading text-sm\" };\nconst _hoisted_7 = { class: \"text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors\" };\nconst _hoisted_8 = { class: \"mt-4 pt-4 border-t border-dungeon-gold/15\" };\nconst _hoisted_9 = { class: \"flex gap-3\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 2,\n    class: \"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n};\nconst _hoisted_13 = { class: \"glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30\" };\nconst _hoisted_14 = { class: \"text-dungeon-paper/70 font-ui text-sm mb-6\" };\nconst _hoisted_15 = { class: \"text-dungeon-gold font-bold\" };\nconst _hoisted_16 = { class: \"flex gap-3 justify-end\" };\nimport { BookOpen, Pencil, RefreshCw, RotateCcw } from 'lucide-vue-next';\nimport { useGameStore } from '../gameStore';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SaveLoadPanel',\n    props: {\n        isOpen: { type: Boolean },\n        entries: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const confirmTarget = ref(null);\n        function handleRollback(messageId) {\n            confirmTarget.value = messageId;\n        }\n        async function doRollback() {\n            if (confirmTarget.value !== null) {\n                await gameStore.rollbackTo(confirmTarget.value);\n                confirmTarget.value = null;\n            }\n        }\n        function handleReroll() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.rerollCurrent();\n        }\n        function handleEdit() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.startEdit();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                onClose: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    (__props.entries.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _createVNode(_unref(BookOpen), { class: \"size-12 mx-auto text-dungeon-gold/30 mb-4\" }),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"text-gray-500 font-ui\" }, \"\", -1 /* CACHED */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.entries, (entry) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: entry.messageId,\n                                    class: \"group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]\",\n                                    onClick: ($event) => (handleRollback(entry.messageId))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\" Floor Number Badge \"),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createElementVNode(\"span\", _hoisted_6, \"#\" + _toDisplayString(entry.messageId), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" Summary Text \"),\n                                        _createElementVNode(\"p\", _hoisted_7, _toDisplayString(entry.summary), 1 /* TEXT */),\n                                        _createCommentVNode(\" Arrow Icon \"),\n                                        _createVNode(_unref(RotateCcw), { class: \"size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors\" })\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])),\n                    _createCommentVNode(\" Bottom Action Buttons: Reroll & Edit \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleReroll\n                            }, [\n                                _createVNode(_unref(RefreshCw), { class: \"size-4\" }),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"Roll\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_10),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\", _unref(gameStore).isEditing ? 'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20' : '']),\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleEdit\n                            }, [\n                                _createVNode(_unref(Pencil), { class: \"size-4\" }),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"\", -1 /* CACHED */))\n                            ], 10 /* CLASS, PROPS */, _hoisted_11)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Confirm Dialog \"),\n                    (_unref(confirmTarget) !== null)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-lg mb-3\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_14, [\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(confirmTarget)), 1 /* TEXT */),\n                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"text-red-400/80 text-xs\" }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (confirmTarget.value = null))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors\",\n                                        onClick: doRollback\n                                    }, \"  \")\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, Transition as _Transition, withCtx as _withCtx, createTextVNode as _createTextVNode, isRef as _isRef, withKeys as _withKeys, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative\" };\nconst _hoisted_2 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = { class: \"absolute top-6 left-6 z-50 flex flex-col space-y-4\" };\nconst _hoisted_5 = { class: \"absolute top-6 right-4 z-50 flex flex-col space-y-4\" };\nconst _hoisted_6 = { class: \"h-full w-full flex flex-col items-center\" };\nconst _hoisted_7 = { class: \"flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"flex flex-col h-full\"\n};\nconst _hoisted_10 = { class: \"flex justify-end gap-3 mt-4\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"whitespace-pre-wrap text-dungeon-paper/60\"\n};\nconst _hoisted_12 = { class: \"story-rich-text\" };\nconst _hoisted_13 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_14 = {\n    key: 0,\n    class: \"story-tucao-section-list\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    key: 0,\n    class: \"story-tucao-panel\"\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"story-line-empty\"\n};\nconst _hoisted_18 = {\n    key: 0,\n    class: \"mt-8 flex flex-col space-y-3\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"text-xl mr-2\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"mt-4\"\n};\nconst _hoisted_22 = { class: \"flex justify-center gap-4\" };\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_25 = {\n    key: 2,\n    class: \"mt-4\"\n};\nconst _hoisted_26 = { class: \"flex justify-center\" };\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n    key: 1,\n    class: \"mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm\"\n};\nconst _hoisted_29 = { class: \"bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 shrink-0\" };\nconst _hoisted_30 = { class: \"relative w-full\" };\nconst _hoisted_31 = [\"disabled\", \"placeholder\"];\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = { class: \"absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none\" };\nconst _hoisted_34 = [\"title\"];\nconst _hoisted_35 = {\n    key: 0,\n    class: \"relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]\"\n};\nconst _hoisted_36 = { class: \"flex items-end gap-4 mb-3\" };\nconst _hoisted_37 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_38 = [\"title\"];\nconst _hoisted_39 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_40 = { \"clip-path\": \"url(#heartClip)\" };\nconst _hoisted_41 = [\"y\", \"height\"];\nconst _hoisted_42 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_43 = { class: \"text-[#cc3333] font-bold\" };\nconst _hoisted_44 = { class: \"text-gray-600\" };\nconst _hoisted_45 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_46 = [\"title\"];\nconst _hoisted_47 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_48 = { \"clip-path\": \"url(#manaClip)\" };\nconst _hoisted_49 = [\"y\", \"height\"];\nconst _hoisted_50 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_51 = { class: \"text-blue-400 font-bold\" };\nconst _hoisted_52 = { class: \"flex items-center justify-between px-1 mb-2\" };\nconst _hoisted_53 = { class: \"flex items-center gap-2 text-dungeon-paper/70\" };\nconst _hoisted_54 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_55 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_56 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_57 = { class: \"flex items-center justify-between px-1\" };\nconst _hoisted_58 = { class: \"flex items-center gap-2 text-dungeon-gold\" };\nconst _hoisted_59 = { class: \"font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm\" };\nconst _hoisted_60 = {\n    key: 0,\n    class: \"grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4\"\n};\nconst _hoisted_61 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_62 = { class: \"w-full max-w-[90rem] mx-auto flex flex-col gap-4\" };\nconst _hoisted_63 = {\n    key: 0,\n    class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-h-[72vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_64 = [\"disabled\", \"onClick\"];\nconst _hoisted_65 = [\"src\", \"alt\"];\nconst _hoisted_66 = { class: \"absolute inset-x-2 top-2 z-10\" };\nconst _hoisted_67 = { class: \"magic-book-title text-center truncate text-[22px]\" };\nconst _hoisted_68 = {\n    key: 1,\n    class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 py-8 text-center text-sm text-dungeon-paper/50\"\n};\nconst _hoisted_69 = {\n    key: 0,\n    class: \"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-6 gap-y-6 p-4 overflow-y-auto max-h-[60%]\"\n};\nconst _hoisted_70 = [\"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_71 = { class: \"relative\" };\nconst _hoisted_72 = { class: \"absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight\" };\nconst _hoisted_73 = { class: \"font-heading text-dungeon-gold text-[11px] text-center mt-1 leading-relaxed truncate w-full\" };\nconst _hoisted_74 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_75 = { class: \"relic-tooltip-name\" };\nconst _hoisted_76 = { class: \"relic-tooltip-desc\" };\nconst _hoisted_77 = { class: \"flex flex-col space-y-6 w-full max-w-lg mx-auto\" };\nconst _hoisted_78 = { class: \"space-y-4\" };\nconst _hoisted_79 = { class: \"flex items-center justify-between\" };\nconst _hoisted_80 = { class: \"flex items-center gap-2\" };\nconst _hoisted_81 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_82 = { class: \"flex items-center justify-between\" };\nconst _hoisted_83 = { class: \"flex items-center gap-2\" };\nconst _hoisted_84 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_85 = { class: \"flex items-center justify-between\" };\nconst _hoisted_86 = { class: \"flex items-center justify-between\" };\nconst _hoisted_87 = { class: \"flex items-center gap-2\" };\nconst _hoisted_88 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_89 = { class: \"flex items-center justify-between\" };\nconst _hoisted_90 = { class: \"flex items-center gap-2\" };\nconst _hoisted_91 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_92 = { class: \"flex items-center justify-between\" };\nconst _hoisted_93 = { class: \"inline-flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_94 = { class: \"text-dungeon-paper text-sm font-ui\" };\nconst _hoisted_95 = { class: \"grid grid-cols-2 gap-4\" };\nconst _hoisted_96 = { class: \"flex flex-col gap-4 w-full max-w-4xl\" };\nconst _hoisted_97 = { class: \"flex items-center justify-between\" };\nconst _hoisted_98 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_99 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/50 p-3\" };\nconst _hoisted_100 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_101 = { class: \"text-[11px] text-dungeon-gold/80\" };\nconst _hoisted_102 = { class: \"max-h-52 overflow-y-auto custom-scrollbar pr-1 space-y-1.5\" };\nconst _hoisted_103 = [\"onClick\"];\nconst _hoisted_104 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_105 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_106 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_107 = { class: \"text-[10px] px-1 rounded border border-white/15 text-dungeon-paper/60\" };\nconst _hoisted_108 = [\"title\"];\nconst _hoisted_109 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_110 = { class: \"mt-2 grid grid-cols-9 gap-1\" };\nconst _hoisted_111 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar\" };\nconst _hoisted_112 = { class: \"space-y-3\" };\nconst _hoisted_113 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_114 = [\"onClick\"];\nconst _hoisted_115 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_116 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_117 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_118 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4\" };\nconst _hoisted_119 = [\"disabled\", \"onClick\"];\nconst _hoisted_120 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_121 = { class: \"flex justify-end gap-3\" };\nconst _hoisted_122 = [\"disabled\"];\nconst _hoisted_123 = { class: \"flex items-center justify-between\" };\nconst _hoisted_124 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_125 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar\" };\nconst _hoisted_126 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-2\" };\nconst _hoisted_127 = [\"onClick\"];\nconst _hoisted_128 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3\" };\nconst _hoisted_129 = { class: \"max-h-[28vh] overflow-y-auto custom-scrollbar pr-1\" };\nconst _hoisted_130 = { class: \"space-y-2\" };\nconst _hoisted_131 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_132 = [\"onClick\"];\nconst _hoisted_133 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_134 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_135 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_136 = { class: \"grid grid-cols-1 md:grid-cols-2 gap-2\" };\nconst _hoisted_137 = { class: \"flex items-start justify-between gap-2\" };\nconst _hoisted_138 = { class: \"min-w-0\" };\nconst _hoisted_139 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_140 = { class: \"text-[10px] text-dungeon-paper/60\" };\nconst _hoisted_141 = { class: \"flex items-center gap-1 shrink-0\" };\nconst _hoisted_142 = [\"onClick\"];\nconst _hoisted_143 = { class: \"w-6 text-center text-xs text-dungeon-gold\" };\nconst _hoisted_144 = [\"onClick\"];\nconst _hoisted_145 = { class: \"mt-1 text-[10px] text-dungeon-paper/70 leading-relaxed\" };\nconst _hoisted_146 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_147 = { class: \"flex items-center gap-2 px-3 py-2 rounded border border-dungeon-brown/60 bg-dungeon-dark/40 text-sm text-dungeon-paper/80\" };\nconst _hoisted_148 = { class: \"flex justify-between gap-3\" };\nconst _hoisted_149 = [\"disabled\"];\nconst _hoisted_150 = {\n    key: 0,\n    class: \"custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4\"\n};\nconst _hoisted_151 = { class: \"text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap\" };\nconst _hoisted_152 = {\n    key: 1,\n    class: \"text-dungeon-paper/60 font-ui py-8 text-center text-sm\"\n};\nconst _hoisted_153 = {\n    key: 0,\n    class: \"absolute inset-0 z-[94] bg-black\"\n};\nconst _hoisted_154 = [\"src\"];\nconst _hoisted_155 = [\"src\"];\nconst _hoisted_156 = { class: \"shop-layout absolute inset-y-0 right-0 z-[96] flex items-center px-4 md:px-7\" };\nconst _hoisted_157 = { class: \"shop-panel ml-auto w-full max-w-[48rem] h-[84vh] max-h-[860px]\" };\nconst _hoisted_158 = { class: \"shop-goods-grid custom-scrollbar\" };\nconst _hoisted_159 = [\"disabled\", \"onClick\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_160 = { class: \"shop-item-icon-wrap\" };\nconst _hoisted_161 = { class: \"shop-item-price\" };\nconst _hoisted_162 = {\n    key: 0,\n    class: \"rounded border border-amber-200/15 bg-black/25 py-10 text-center text-sm text-amber-100/65\"\n};\nconst _hoisted_163 = { class: \"shop-panel-foot\" };\nconst _hoisted_164 = [\"disabled\"];\nconst _hoisted_165 = [\"disabled\"];\nconst _hoisted_166 = {\n    key: 0,\n    class: \"absolute inset-0 z-[95] bg-black\"\n};\nconst _hoisted_167 = [\"src\"];\nconst _hoisted_168 = {\n    key: 0,\n    class: \"pointer-events-none absolute inset-0\"\n};\nconst _hoisted_169 = { class: \"chest-reward-anchor\" };\nconst _hoisted_170 = [\"disabled\"];\nconst _hoisted_171 = { class: \"pointer-events-auto chest-portals-anchor w-full\" };\nconst _hoisted_172 = { class: \"flex justify-center gap-4 flex-wrap\" };\nconst _hoisted_173 = [\"disabled\", \"onClick\"];\nconst _hoisted_174 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_175 = [\"disabled\"];\nconst _hoisted_176 = {\n    key: 0,\n    class: \"absolute inset-0 z-[102] bg-black/90\"\n};\nconst _hoisted_177 = { class: \"absolute inset-0 p-6 md:p-10 flex items-center justify-center\" };\nconst _hoisted_178 = { class: \"w-full max-w-6xl rounded-xl border border-dungeon-gold/35 bg-[#0f0906]/95 p-5 md:p-7 shadow-[0_0_28px_rgba(212,175,55,0.2)]\" };\nconst _hoisted_179 = { class: \"mb-4 flex items-center justify-between gap-3\" };\nconst _hoisted_180 = { class: \"text-xs text-dungeon-paper/65 mt-1\" };\nconst _hoisted_181 = [\"disabled\"];\nconst _hoisted_182 = {\n    key: 0,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-5\"\n};\nconst _hoisted_183 = [\"onClick\"];\nconst _hoisted_184 = { class: \"flex justify-center\" };\nconst _hoisted_185 = { class: \"mb-4 rounded border border-dungeon-gold/25 bg-black/20 p-3\" };\nconst _hoisted_186 = { class: \"flex justify-center\" };\nconst _hoisted_187 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/50 bg-black/20 p-4 text-center\"\n};\nconst _hoisted_188 = [\"disabled\"];\nconst _hoisted_189 = {\n    key: 1,\n    class: \"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-[52vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_190 = [\"disabled\", \"onClick\"];\nconst _hoisted_191 = { class: \"text-[11px] text-dungeon-paper/65 mb-2\" };\nconst _hoisted_192 = { class: \"flex justify-center\" };\nconst _hoisted_193 = {\n    key: 1,\n    class: \"w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55\"\n};\nconst _hoisted_194 = {\n    key: 0,\n    class: \"absolute inset-0 z-[100] bg-black\"\n};\nimport { Activity, Book, BookOpen, Box, ChevronDown, Coins, Dices, FileText, Lock, Map as MapIcon, Maximize, Scroll, Send, Settings as SettingsIcon, } from 'lucide-vue-next';\nimport { getAllCards, resolveCardNames } from '../battle/cardRegistry';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { getAllRelics, getRelicByName } from '../battle/relicRegistry';\nimport { FLOOR_MAP, getFloorForArea, getNextFloor } from '../floor';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { CardType, EffectType } from '../types';\nimport CombatView from './CombatView.vue';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonModal from './DungeonModal.vue';\nimport SaveLoadPanel from './SaveLoadPanel.vue';\n\nimport { defineComponent, h, ref, computed, watch, reactive, onBeforeUnmount } from 'vue';\n// --- Dynamic Background ---\nconst HF_BG_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst BG_OPACITY_KEY = 'dungeon.bg_overlay_opacity';\nconst CHEST_BG_CLOSED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B11.png';\nconst CHEST_BG_OPENED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B12.png';\nconst CHEST_BG_MIMIC = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B13.png';\nconst SHOP_BG_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%95%86%E5%BA%97.png';\nconst SHOP_MERCHANT_PORTRAIT_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/%E6%B2%90%E8%8A%AF%E5%85%B0/%E6%B2%90%E8%8A%AF%E5%85%B04.png';\nconst MAGIC_BOOK_COVER_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E6%B3%95%E4%B9%A6%E5%B0%81%E9%9D%A2';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameView',\n    emits: [\"backToSplash\"],\n    setup(__props) {\n        const SidebarIcon = defineComponent({\n            props: {\n                icon: { type: Object, required: true },\n                active: { type: Boolean, default: false },\n                label: { type: String, default: '' },\n                tooltipSide: { type: String, default: 'right' },\n                disabled: { type: Boolean, default: false },\n            },\n            emits: ['click'],\n            setup(props, { emit }) {\n                return () => h('button', {\n                    disabled: props.disabled,\n                    class: [\n                        'w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group disabled:cursor-not-allowed',\n                        props.disabled\n                            ? 'bg-[#120d0a] text-dungeon-paper/35 border-dungeon-brown/70'\n                            : props.active\n                                ? 'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]'\n                                : 'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50',\n                    ],\n                    onClick: () => {\n                        if (!props.disabled) {\n                            emit('click');\n                        }\n                    },\n                }, [\n                    h(props.icon, { class: 'size-6' }),\n                    props.label\n                        ? h('div', {\n                            class: [\n                                'absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none',\n                                props.tooltipSide === 'left' ? 'right-14' : 'left-14',\n                            ],\n                        }, props.label)\n                        : null,\n                ]);\n            },\n        });\n        const gameStore = useGameStore();\n        const activeModal = ref(null);\n        const inputText = ref('');\n        const isVariableUpdateOpen = ref(false);\n        const isStatusOpen = ref(true);\n        const showCombat = ref(false);\n        const combatEnemyName = ref('');\n        const showShopView = ref(false);\n        const shopProducts = ref([]);\n        const shopBuying = ref(false);\n        const shopSpentGold = ref(0);\n        const shopPurchasedItems = ref([]);\n        const shopRobClickCount = ref(0);\n        const shopRobbing = ref(false);\n        const showChestView = ref(false);\n        const chestStage = ref('closed');\n        const chestRolling = ref(false);\n        const chestRewardRelic = ref(null);\n        const chestRewardCollected = ref(false);\n        const chestCollecting = ref(false);\n        const chestRewardVisible = ref(false);\n        const chestOpenedBgReady = ref(false);\n        const chestPortalChoices = ref([]);\n        const combatTestStep = ref('deck');\n        const selectedTestDeck = ref([]);\n        const selectedTestEnemy = ref('');\n        const selectedTestRelicCounts = ref({});\n        const selectedCardCategoryTab = ref('');\n        const selectedRelicCategoryTab = ref('');\n        const activeCombatContext = ref('normal');\n        const pendingCombatNarrative = ref(null);\n        const dispatchedCombatNarrativeIds = new Set();\n        const showVictoryRewardView = ref(false);\n        const victoryRewardStage = ref('pick');\n        const victoryRewardOptions = ref([]);\n        const selectedVictoryRewardCard = ref(null);\n        const rewardApplying = ref(false);\n        const relicTooltip = ref(null);\n        const combatTestStartAt999 = ref(false);\n        const combatTestStartAt999CurrentBattle = ref(false);\n        let chestMimicTimer = null;\n        let chestRewardFadeTimer = null;\n        let shopRobTimer = null;\n        let relicTooltipLongPressTimer = null;\n        let relicTooltipAutoHideTimer = null;\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const bgArea = computed(() => gameStore.statData._ || '');\n        const bgRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!bgArea.value || bgImageError.value)\n                return '';\n            const isLord = bgRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${bgArea.value}_` : bgArea.value;\n            return `${HF_BG_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (bgRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true;\n            }\n            else {\n                bgImageError.value = true;\n            }\n        }\n        const bgOverlayOpacity = ref(parseFloat(localStorage.getItem(BG_OPACITY_KEY) ?? '0.5'));\n        watch(bgOverlayOpacity, (v) => localStorage.setItem(BG_OPACITY_KEY, String(v)));\n        const shopBackgroundUrl = SHOP_BG_URL;\n        const shopMerchantPortraitUrl = SHOP_MERCHANT_PORTRAIT_URL;\n        const chestBackgroundUrl = computed(() => {\n            if (chestStage.value === 'opened')\n                return CHEST_BG_OPENED;\n            if (chestStage.value === 'mimic')\n                return CHEST_BG_MIMIC;\n            return CHEST_BG_CLOSED;\n        });\n        const allCardsForTest = computed(() => getAllCards().filter(card => card.category !== ''));\n        const CATEGORY_ORDER = {\n            : 0,\n            : 1,\n        };\n        const compareCategory = (a, b) => {\n            const orderA = CATEGORY_ORDER[a] ?? 999;\n            const orderB = CATEGORY_ORDER[b] ?? 999;\n            if (orderA !== orderB)\n                return orderA - orderB;\n            return a.localeCompare(b, 'zh-Hans-CN');\n        };\n        const cardCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const card of allCardsForTest.value) {\n                if (!grouped.has(card.category)) {\n                    grouped.set(card.category, []);\n                }\n                grouped.get(card.category).push(card);\n            }\n            return Array.from(grouped.entries())\n                .sort(([a], [b]) => compareCategory(a, b))\n                .map(([category, cards]) => ({\n                category,\n                cards: [...cards].sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN')),\n            }));\n        });\n        const cardCategoryTabsForTest = computed(() => [\n            '',\n            ...cardCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredCardCategoryGroupsForTest = computed(() => {\n            if (selectedCardCategoryTab.value === '')\n                return cardCategoryGroupsForTest.value;\n            return cardCategoryGroupsForTest.value.filter((group) => group.category === selectedCardCategoryTab.value);\n        });\n        const getMagicBookCoverUrl = (bookName) => `${MAGIC_BOOK_COVER_BASE}/${encodeURIComponent(bookName)}.png`;\n        const carryableMagicBookNames = computed(() => (cardCategoryGroupsForTest.value\n            .map((group) => group.category)\n            .filter((category) => category !== '')));\n        const rawCarriedMagicBooks = computed(() => {\n            const raw = gameStore.statData._;\n            if (!Array.isArray(raw))\n                return [];\n            return raw.filter((name) => typeof name === 'string' && name.trim().length > 0);\n        });\n        const carriedMagicBooks = computed(() => {\n            const available = new Set(carryableMagicBookNames.value);\n            return rawCarriedMagicBooks.value.filter((name) => available.has(name));\n        });\n        const carriedMagicBookSet = computed(() => new Set(carriedMagicBooks.value));\n        const selectableRelicPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            let pool = getAllRelics().filter((relic) => categorySet.has(relic.category));\n            if (pool.length === 0) {\n                pool = getAllRelics().filter((relic) => relic.category === '');\n            }\n            return [...pool];\n        });\n        const muxinlanFavor = computed(() => {\n            const roles = (gameStore.statData. ?? {});\n            const raw = Number(roles?.['']?.[''] ?? 0);\n            const safe = Number.isFinite(raw) ? raw : 0;\n            return Math.max(-1000, Math.min(1000, safe));\n        });\n        const shopDiscountRate = computed(() => Math.max(0, Math.min(1000, muxinlanFavor.value)) * 0.0002);\n        const shopRobBtnOpacity = computed(() => {\n            const revealed = Math.min(5, shopRobClickCount.value);\n            return (0.32 + revealed * 0.13).toFixed(2);\n        });\n        const parseMerchantDefeatedValue = (value) => {\n            if (value === true || value === 1)\n                return true;\n            if (typeof value === 'string') {\n                const normalized = value.trim().toLowerCase();\n                return normalized === 'true' || normalized === '1';\n            }\n            return false;\n        };\n        const isMerchantDefeated = computed(() => parseMerchantDefeatedValue(gameStore.statData._));\n        const canEditMagicBooks = computed(() => ((gameStore.statData._ || '') === ''));\n        const magicBookSidebarIcon = computed(() => (canEditMagicBooks.value ? Book : Lock));\n        const isUpdatingMagicBooks = ref(false);\n        const openMagicBookModal = () => {\n            if (!canEditMagicBooks.value)\n                return;\n            activeModal.value = 'magicBooks';\n        };\n        const toggleMagicBook = async (bookName) => {\n            if (isUpdatingMagicBooks.value)\n                return;\n            const current = rawCarriedMagicBooks.value;\n            const nextBooks = current.includes(bookName)\n                ? current.filter((name) => name !== bookName)\n                : [...current, bookName];\n            isUpdatingMagicBooks.value = true;\n            await gameStore.updateStatDataFields({\n                _: Array.from(new Set(nextBooks)),\n            });\n            isUpdatingMagicBooks.value = false;\n        };\n        const cardByNameForTest = computed(() => {\n            const map = new Map();\n            for (const card of allCardsForTest.value) {\n                map.set(card.name, card);\n            }\n            return map;\n        });\n        const rewardCardPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            const filtered = allCardsForTest.value.filter((card) => categorySet.has(card.category));\n            if (filtered.length > 0)\n                return filtered;\n            return [...allCardsForTest.value];\n        });\n        const rewardReplaceEntries = computed(() => {\n            const raw = Array.isArray(gameStore.statData._) ? gameStore.statData._ : [];\n            return raw.slice(0, 9).map((name, idx) => ({\n                idx,\n                name,\n                card: cardByNameForTest.value.get(name) ?? null,\n            }));\n        });\n        const selectedTestDeckCards = computed(() => selectedTestDeck.value\n            .map((cardName, idx) => ({ idx, card: cardByNameForTest.value.get(cardName) }))\n            .filter((entry) => entry.card !== undefined));\n        const allEnemyNamesForTest = computed(() => getAllEnemyNames());\n        const baseRelicsForTest = computed(() => ([...getAllRelics()].sort((a, b) => {\n            const categoryDiff = compareCategory(a.category, b.category);\n            if (categoryDiff !== 0)\n                return categoryDiff;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const relicCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const relic of baseRelicsForTest.value) {\n                if (!grouped.has(relic.category)) {\n                    grouped.set(relic.category, []);\n                }\n                grouped.get(relic.category).push(relic);\n            }\n            return Array.from(grouped.entries()).map(([category, relics]) => ({\n                category,\n                relics,\n            }));\n        });\n        const relicCategoryTabsForTest = computed(() => [\n            '',\n            ...relicCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredRelicCategoryGroupsForTest = computed(() => {\n            if (selectedRelicCategoryTab.value === '')\n                return relicCategoryGroupsForTest.value;\n            return relicCategoryGroupsForTest.value.filter((group) => group.category === selectedRelicCategoryTab.value);\n        });\n        watch(cardCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedCardCategoryTab.value)) {\n                selectedCardCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        watch(relicCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedRelicCategoryTab.value)) {\n                selectedRelicCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        const getCardTypeBadgeClass = (type) => {\n            switch (type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-500/50 text-red-300 bg-red-900/20';\n                case CardType.MAGIC:\n                    return 'border-blue-500/50 text-blue-300 bg-blue-900/20';\n                case CardType.FUNCTION:\n                    return 'border-yellow-500/50 text-yellow-300 bg-yellow-900/20';\n                case CardType.DODGE:\n                    return 'border-emerald-500/50 text-emerald-300 bg-emerald-900/20';\n                case CardType.CURSE:\n                    return 'border-violet-500/50 text-violet-300 bg-violet-900/20';\n                default:\n                    return 'border-white/30 text-dungeon-paper/80 bg-white/5';\n            }\n        };\n        const getCardCategoryStripClass = (category) => {\n            switch (category) {\n                case '':\n                    return 'bg-dungeon-gold/80';\n                case '':\n                    return 'bg-orange-500/85';\n                default:\n                    return 'bg-indigo-400/80';\n            }\n        };\n        //  Resolved deck from MVU _ via card registry \n        const resolvedDeck = computed(() => {\n            const skills = gameStore.statData._ ?? [];\n            return resolveCardNames(skills.filter((s) => s !== ''));\n        });\n        //  Resolved relics from MVU _ \n        // Format: { relicName: count } e.g. { \"\": 2, \"\": 3 }\n        const relicEntries = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            return Object.entries(raw)\n                .filter(([name, count]) => name && count > 0)\n                .map(([name, count]) => {\n                const relic = getRelicByName(name);\n                return {\n                    name,\n                    count,\n                    rarity: relic?.rarity ?? '',\n                    category: relic?.category ?? '',\n                    effect: relic?.effect ?? '',\n                    description: relic?.description ?? relic?.effect ?? '',\n                };\n            })\n                .sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN'));\n        });\n        const chestRewardEntry = computed(() => {\n            const relic = chestRewardRelic.value;\n            if (!relic)\n                return null;\n            return {\n                name: relic.name,\n                count: 1,\n                rarity: relic.rarity,\n                category: relic.category,\n                effect: relic.effect,\n                description: relic.description ?? relic.effect ?? '',\n            };\n        });\n        const clearRelicTooltipTimers = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n            if (relicTooltipAutoHideTimer) {\n                clearTimeout(relicTooltipAutoHideTimer);\n                relicTooltipAutoHideTimer = null;\n            }\n        };\n        const showRelicTooltipForTarget = (target, relic) => {\n            const rect = target.getBoundingClientRect();\n            const tooltipWidth = 240;\n            const margin = 8;\n            const x = Math.max(margin, Math.min(rect.left + rect.width / 2, window.innerWidth - tooltipWidth - margin));\n            const y = Math.max(margin, rect.top - margin);\n            relicTooltip.value = {\n                x,\n                y,\n                name: relic.name,\n                rarity: relic.rarity,\n                category: relic.category,\n                count: relic.count,\n                effect: relic.effect,\n                description: relic.description,\n            };\n        };\n        const showRelicTooltip = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            showRelicTooltipForTarget(target, relic);\n        };\n        const hideRelicTooltip = () => {\n            clearRelicTooltipTimers();\n            relicTooltip.value = null;\n        };\n        const handleRelicTouchStart = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            relicTooltipLongPressTimer = setTimeout(() => {\n                showRelicTooltipForTarget(target, relic);\n                relicTooltipAutoHideTimer = setTimeout(() => {\n                    relicTooltip.value = null;\n                    relicTooltipAutoHideTimer = null;\n                }, 1800);\n            }, 320);\n        };\n        const handleRelicTouchEnd = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n        };\n        const showChestRewardTooltip = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            showRelicTooltip(event, chestRewardEntry.value);\n        };\n        const handleChestRewardTouchStart = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            handleRelicTouchStart(event, chestRewardEntry.value);\n        };\n        const combatRelicMap = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            const normalized = {};\n            for (const [name, value] of Object.entries(raw)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                normalized[name] = count;\n            }\n            return normalized;\n        });\n        watch(activeModal, (modal) => {\n            if (modal === 'magicBooks') {\n                gameStore.loadStatData();\n            }\n            if (modal !== 'relics') {\n                hideRelicTooltip();\n            }\n        });\n        watch(canEditMagicBooks, (editable) => {\n            if (!editable && activeModal.value === 'magicBooks') {\n                activeModal.value = null;\n            }\n        });\n        const selectedRelicTotalCount = computed(() => (Object.values(selectedTestRelicCounts.value).reduce((sum, value) => sum + Math.max(0, Math.floor(value)), 0)));\n        //  Text display settings (reactive, persisted) \n        const textSettings = reactive({\n            fontSize: 21,\n            lineHeight: 2.0,\n            fontFamily: \"'Cinzel', serif\",\n            containerWidth: 1300,\n        });\n        const isStreamingEnabled = computed({\n            get: () => gameStore.useStreaming,\n            set: (value) => gameStore.setUseStreaming(value),\n        });\n        //  Computed display values from MVU stat_data \n        const displayText = computed(() => gameStore.mainText || '/');\n        const inlineMarkRegex = /(\\*[^*\\r\\n]+\\*|[^\\r\\n]+|[^\\r\\n]+|\"[^\"\\r\\n]+\"|'[^'\\r\\n]+')/g;\n        const headerMarkRegex = /^(#{1,4})\\s*(.*)$/;\n        const tucaoOpenTagRegex = /<\\s*tucao(?:\\s+[^>]*)?>/gi;\n        const tucaoCloseTagRegex = /<\\s*\\/\\s*tucao\\s*>/gi;\n        const tucaoExpandedState = ref({});\n        function isQuotedText(text) {\n            const value = text.trim();\n            if (value.length < 2)\n                return false;\n            return (/^[^\\r\\n]+$/.test(value)\n                || /^[^\\r\\n]+$/.test(value)\n                || /^\"[^\"\\r\\n]+\"$/.test(value)\n                || /^'[^'\\r\\n]+'$/.test(value));\n        }\n        function normalizeTucaoMarkers(text) {\n            return text\n                // HTML entity forms: &lt;tucao&gt;...&lt;/tucao&gt;\n                .replace(/&lt;\\s*tucao(?:\\s+[^&]*?)?&gt;/gi, '<tucao>')\n                .replace(/&lt;\\s*\\/\\s*tucao\\s*&gt;/gi, '</tucao>')\n                // Alternate bracket forms: [tucao]...[/tucao]\n                .replace(/\\[\\s*tucao\\s*]/gi, '<tucao>')\n                .replace(/\\[\\s*\\/\\s*tucao\\s*]/gi, '</tucao>')\n                // Chinese tag alias: <>...</>\n                .replace(/<\\s*(?:\\s+[^>]*)?>/gi, '<tucao>')\n                .replace(/<\\s*\\/\\s*\\s*>/gi, '</tucao>');\n        }\n        function parseInlineSegments(line, keyPrefix) {\n            if (!line)\n                return [];\n            const segments = [];\n            let lastIndex = 0;\n            let segmentIndex = 0;\n            let match;\n            inlineMarkRegex.lastIndex = 0;\n            while ((match = inlineMarkRegex.exec(line)) !== null) {\n                if (match.index > lastIndex) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'text',\n                        text: line.slice(lastIndex, match.index),\n                    });\n                    segmentIndex += 1;\n                }\n                const markedText = match[0];\n                if (markedText.startsWith('*') && markedText.endsWith('*')) {\n                    const innerText = markedText.slice(1, -1);\n                    if (isQuotedText(innerText)) {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'quote',\n                            text: innerText,\n                        });\n                    }\n                    else {\n                        segments.push({\n                            key: `${keyPrefix}-seg-${segmentIndex}`,\n                            type: 'muted',\n                            text: innerText,\n                        });\n                    }\n                }\n                else if (isQuotedText(markedText)) {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                else {\n                    segments.push({\n                        key: `${keyPrefix}-seg-${segmentIndex}`,\n                        type: 'quote',\n                        text: markedText,\n                    });\n                }\n                segmentIndex += 1;\n                lastIndex = inlineMarkRegex.lastIndex;\n            }\n            if (lastIndex < line.length) {\n                segments.push({\n                    key: `${keyPrefix}-seg-${segmentIndex}`,\n                    type: 'text',\n                    text: line.slice(lastIndex),\n                });\n            }\n            return segments;\n        }\n        function parseStoryLine(line, key) {\n            const match = headerMarkRegex.exec(line);\n            let level = 0;\n            let content = line;\n            if (match) {\n                level = match[1].length;\n                content = match[2];\n            }\n            return {\n                type: 'line',\n                key,\n                level,\n                segments: parseInlineSegments(content, key),\n            };\n        }\n        function parseTextLines(text, keyPrefix) {\n            if (text.length === 0)\n                return [];\n            return text.split('\\n').map((line, index) => parseStoryLine(line, `${keyPrefix}-line-${index}`));\n        }\n        function parseStoryContent(text) {\n            const normalized = normalizeTucaoMarkers(text).replace(/\\r\\n/g, '\\n');\n            const lines = [];\n            const tucaoSections = [];\n            let cursor = 0;\n            let sectionIndex = 0;\n            let openMatch;\n            tucaoOpenTagRegex.lastIndex = 0;\n            while ((openMatch = tucaoOpenTagRegex.exec(normalized)) !== null) {\n                const openStart = openMatch.index;\n                const openEnd = tucaoOpenTagRegex.lastIndex;\n                const plainPart = normalized.slice(cursor, openStart);\n                lines.push(...parseTextLines(plainPart, `story-${sectionIndex}-plain-${cursor}`));\n                tucaoCloseTagRegex.lastIndex = openEnd;\n                const closeMatch = tucaoCloseTagRegex.exec(normalized);\n                const contentEnd = closeMatch ? closeMatch.index : normalized.length;\n                const nextCursor = closeMatch ? tucaoCloseTagRegex.lastIndex : normalized.length;\n                const tucaoContent = normalized.slice(openEnd, contentEnd).replace(/^\\n+/, '').replace(/\\n+$/, '');\n                const tucaoKey = `story-tucao-${sectionIndex}-${openStart}`;\n                const parsedTucaoLines = parseTextLines(tucaoContent, tucaoKey);\n                if (parsedTucaoLines.length > 0) {\n                    tucaoSections.push({\n                        key: tucaoKey,\n                        lines: parsedTucaoLines,\n                    });\n                }\n                cursor = nextCursor;\n                tucaoOpenTagRegex.lastIndex = cursor;\n                sectionIndex += 1;\n                // Missing closing tag: consume to end once.\n                if (!closeMatch) {\n                    break;\n                }\n            }\n            const tail = normalized.slice(cursor);\n            lines.push(...parseTextLines(tail, `story-tail-${cursor}`));\n            return {\n                lines,\n                tucaoSections,\n            };\n        }\n        const storyContentState = computed(() => parseStoryContent(displayText.value));\n        const storyMainLines = computed(() => storyContentState.value.lines);\n        const storyTucaoSections = computed(() => storyContentState.value.tucaoSections);\n        watch(storyTucaoSections, (sections) => {\n            const validKeys = new Set(sections.map(section => section.key));\n            const nextState = {};\n            for (const [key, value] of Object.entries(tucaoExpandedState.value)) {\n                if (validKeys.has(key)) {\n                    nextState[key] = value;\n                }\n            }\n            tucaoExpandedState.value = nextState;\n        }, { immediate: true });\n        const isTucaoExpanded = (key) => Boolean(tucaoExpandedState.value[key]);\n        const toggleTucao = (key) => {\n            tucaoExpandedState.value[key] = !isTucaoExpanded(key);\n        };\n        // HP: _ / _, HP \n        const displayHp = computed(() => {\n            const hp = gameStore.statData._ ?? 10;\n            const maxHp = gameStore.statData._ ?? 10;\n            return Math.min(hp, maxHp);\n        });\n        const displayMaxHp = computed(() => gameStore.statData._ ?? 10);\n        // MP: _ only, no max variable. Visual cap at 20.\n        const displayMp = computed(() => gameStore.statData._ ?? 1);\n        // Gold\n        const displayGold = computed(() => gameStore.statData._ ?? 0);\n        // Dice range\n        const displayMinDice = computed(() => gameStore.statData.$ ?? 0);\n        const displayMaxDice = computed(() => gameStore.statData.$ ?? 0);\n        const hpPercent = computed(() => {\n            const max = displayMaxHp.value;\n            return max > 0 ? Math.min((displayHp.value / max) * 100, 100) : 100;\n        });\n        // MP visual fill: cap at 20 for display\n        const mpPercent = computed(() => {\n            const mp = displayMp.value;\n            const visualMax = 20;\n            return Math.min((mp / visualMax) * 100, 100);\n        });\n        //  Actions \n        const handleSendInput = () => {\n            if (!inputText.value.trim() || gameStore.isGenerating)\n                return;\n            gameStore.sendAction(inputText.value);\n            inputText.value = '';\n        };\n        const handleOptionClick = (option) => {\n            if (gameStore.isGenerating)\n                return;\n            // Strip the \"A. \" / \"B. \" / etc. prefix, paste content into input box\n            const stripped = option.replace(/^[A-D]\\.\\s*/i, '');\n            inputText.value = stripped;\n        };\n        const REBIRTH_STARTER_DECK = [\n            '', '', '',\n            '', '',\n            '', '',\n            '', '',\n        ];\n        const toNonNegativeInt = (value, fallback) => {\n            const n = Number(value);\n            if (!Number.isFinite(n))\n                return fallback;\n            return Math.max(0, Math.floor(n));\n        };\n        const buildRebirthResetFields = () => {\n            const initialMaxHp = Math.max(1, toNonNegativeInt(gameStore.statData.$, 10));\n            const initialMp = toNonNegativeInt(gameStore.statData.$, 1);\n            const initialGold = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentSkillPoints = toNonNegativeInt(gameStore.statData.$, 0);\n            const currentFloor = Math.max(1, toNonNegativeInt(gameStore.statData._, 1));\n            const rebirthSkillPointGain = Math.floor((currentFloor * (currentFloor + 1)) / 2);\n            return {\n                _: initialMaxHp,\n                _: initialMaxHp,\n                _: initialMp,\n                _: initialGold,\n                $: currentSkillPoints + rebirthSkillPointGain,\n                _: [...REBIRTH_STARTER_DECK],\n                _: [],\n                $: '',\n                $: ['', ''],\n                _: {},\n                $: 6,\n                $: 1,\n                _: 1,\n                _: '',\n                _: '',\n                _: '',\n                _: '',\n                _: false,\n                $: {\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                    : 0,\n                },\n            };\n        };\n        const handleRebirthClick = () => {\n            if (gameStore.isGenerating)\n                return;\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            closeShopView();\n            closeChestView();\n            pendingCombatNarrative.value = null;\n            gameStore.setPendingCombatMvuChanges(null);\n            gameStore.setPendingStatDataChanges(buildRebirthResetFields());\n            gameStore.sendAction('<user>');\n        };\n        //  Room type config for E option \n        const ROOM_TYPE_CONFIG = {\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.25)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#dc262680' },\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.3)', borderColor: '#ef4444', textColor: '#fca5a5', glowColor: '#ef444480' },\n            '': { label: '', icon: '', bgColor: 'rgba(161,98,7,0.25)', borderColor: '#eab308', textColor: '#fde68a', glowColor: '#eab30880' },\n            '': { label: '', icon: '', bgColor: 'rgba(21,128,61,0.25)', borderColor: '#22c55e', textColor: '#bbf7d0', glowColor: '#22c55e80' },\n            '': { label: '', icon: '', bgColor: 'rgba(8,145,178,0.25)', borderColor: '#06b6d4', textColor: '#a5f3fc', glowColor: '#06b6d480' },\n            '': { label: '', icon: '', bgColor: 'rgba(126,34,206,0.25)', borderColor: '#a855f7', textColor: '#e9d5ff', glowColor: '#a855f780' },\n        };\n        // E option: no button for  / \n        const specialOptionConfig = computed(() => {\n            if (!gameStore.hasOptionE)\n                return null;\n            if (isTreasureRoomContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            if (isShopContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            const roomType = gameStore.statData._;\n            if (!roomType)\n                return null;\n            if (roomType === '' || roomType === '')\n                return null;\n            return ROOM_TYPE_CONFIG[roomType] ?? null;\n        });\n        const isTreasureRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '' || area === '';\n        });\n        const isShopContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '';\n        });\n        const isCombatRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            return roomType === '' || roomType === '';\n        });\n        const sanitizeCombatLogLine = (line) => {\n            return line\n                .replace(/<[^>]*>/g, '')\n                .replace(/&nbsp;/g, ' ')\n                .replace(/\\s+/g, ' ')\n                .trim();\n        };\n        const formatCombatLogs = (logs) => {\n            const ordered = [...logs]\n                .reverse()\n                .map(sanitizeCombatLogLine)\n                .filter((line) => line.length > 0);\n            if (ordered.length === 0)\n                return '1. ';\n            return ordered.map((line, idx) => `${idx + 1}. ${line}`).join('\\n');\n        };\n        const buildCombatNarrative = (win, enemyName, context, logs) => {\n            const outcomeLine = win\n                ? `<user>[]<user>${enemyName}`\n                : `<user>[]<user>${enemyName}`;\n            const contextLine = context === 'shopRobbery'\n                ? '<user>'\n                : context === 'chestMimic'\n                    ? '<user>'\n                    : context === 'combatTest'\n                        ? '<user>'\n                        : '<user>';\n            const followupLine = win\n                ? '<user>'\n                : '<user>';\n            return `${outcomeLine}\\n${contextLine}\\n${followupLine}\\n<user>\\n${formatCombatLogs(logs)}`;\n        };\n        const sendCombatNarrativeOnce = (narrative, text) => {\n            if (dispatchedCombatNarrativeIds.has(narrative.id))\n                return;\n            if (gameStore.isGenerating)\n                return;\n            dispatchedCombatNarrativeIds.add(narrative.id);\n            gameStore.sendAction(text);\n        };\n        const queueCombatMvuSync = (win, finalStats) => {\n            const hpRaw = Number(finalStats?.hp);\n            const hasHp = Number.isFinite(hpRaw);\n            const floorRaw = Number(gameStore.statData._ ?? 1);\n            const floor = Number.isFinite(floorRaw) ? Math.max(1, Math.floor(floorRaw)) : 1;\n            const goldReward = 3 + (2 * floor);\n            gameStore.setPendingCombatMvuChanges({\n                hp: hasHp ? Math.max(0, Math.floor(hpRaw)) : undefined,\n                addDefeatMark: !win,\n                goldDelta: win ? goldReward : undefined,\n            });\n        };\n        const applyMerchantDefeatedShopState = () => {\n            for (const item of shopProducts.value) {\n                item.finalPrice = 0;\n            }\n        };\n        const startVictoryRewardFlow = () => {\n            const pool = shuffle(rewardCardPool.value);\n            const options = pool.slice(0, Math.min(3, pool.length));\n            if (options.length === 0)\n                return false;\n            victoryRewardOptions.value = options;\n            selectedVictoryRewardCard.value = null;\n            victoryRewardStage.value = 'pick';\n            showVictoryRewardView.value = true;\n            return true;\n        };\n        const finalizeVictoryRewardFlow = () => {\n            showVictoryRewardView.value = false;\n            victoryRewardStage.value = 'pick';\n            victoryRewardOptions.value = [];\n            selectedVictoryRewardCard.value = null;\n            rewardApplying.value = false;\n            const narrative = pendingCombatNarrative.value;\n            if (!narrative)\n                return;\n            if (narrative.context === 'shopRobbery')\n                return;\n            pendingCombatNarrative.value = null;\n            sendCombatNarrativeOnce(narrative, narrative.text);\n        };\n        const exitVictoryRewardFlow = () => {\n            finalizeVictoryRewardFlow();\n        };\n        const pickVictoryRewardCard = (card) => {\n            selectedVictoryRewardCard.value = card;\n            victoryRewardStage.value = 'replace';\n        };\n        const replaceDeckCardWithReward = async (idx) => {\n            if (!selectedVictoryRewardCard.value || rewardApplying.value)\n                return;\n            const raw = Array.isArray(gameStore.statData._)\n                ? [...gameStore.statData._].slice(0, 9)\n                : [];\n            if (raw.length === 0) {\n                raw.push(selectedVictoryRewardCard.value.name);\n            }\n            else if (idx >= 0 && idx < raw.length) {\n                raw[idx] = selectedVictoryRewardCard.value.name;\n            }\n            else {\n                return;\n            }\n            rewardApplying.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: raw });\n            rewardApplying.value = false;\n            if (!ok)\n                return;\n            finalizeVictoryRewardFlow();\n        };\n        const getRarityBasePrice = (rarity) => {\n            if (rarity === '')\n                return 15;\n            if (rarity === '')\n                return 10;\n            return 5;\n        };\n        const formatRarityLabel = (rarity) => (rarity === '' ? '' : rarity);\n        const rollShopRarity = () => {\n            const r = Math.random();\n            if (r < 0.8)\n                return '';\n            if (r < 0.95)\n                return '';\n            return '';\n        };\n        const toRelicTooltipEntry = (relic) => ({\n            name: relic.name,\n            count: 1,\n            rarity: relic.rarity,\n            category: relic.category,\n            effect: relic.effect,\n            description: relic.description ?? relic.effect ?? '',\n        });\n        const showShopProductTooltip = (event, item) => {\n            showRelicTooltip(event, toRelicTooltipEntry(item.relic));\n        };\n        const handleShopProductTouchStart = (event, item) => {\n            handleRelicTouchStart(event, toRelicTooltipEntry(item.relic));\n        };\n        const generateShopProducts = () => {\n            const pool = [...selectableRelicPool.value];\n            const favorForCount = Math.max(0, muxinlanFavor.value);\n            const targetCount = Math.max(0, 3 + Math.floor(favorForCount / 200));\n            const count = Math.min(targetCount, pool.length);\n            const usedNames = new Set();\n            const discountRate = shopDiscountRate.value;\n            const next = [];\n            for (let i = 0; i < count; i++) {\n                const targetRarity = rollShopRarity();\n                let candidates = pool.filter((relic) => !usedNames.has(relic.name) && relic.rarity === targetRarity);\n                if (candidates.length === 0) {\n                    candidates = pool.filter((relic) => !usedNames.has(relic.name));\n                }\n                if (candidates.length === 0)\n                    break;\n                const relic = pickOne(candidates);\n                if (!relic)\n                    break;\n                usedNames.add(relic.name);\n                const basePrice = getRarityBasePrice(relic.rarity);\n                const finalPrice = isMerchantDefeated.value ? 0 : Math.max(1, Math.ceil(basePrice * (1 - discountRate)));\n                next.push({\n                    key: `${relic.id}-${i}`,\n                    relic,\n                    basePrice,\n                    finalPrice,\n                    sold: false,\n                });\n            }\n            shopProducts.value = next;\n        };\n        const openShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopSpentGold.value = 0;\n            shopPurchasedItems.value = [];\n            shopRobClickCount.value = 0;\n            shopRobbing.value = false;\n            generateShopProducts();\n            if (isMerchantDefeated.value) {\n                applyMerchantDefeatedShopState();\n            }\n            showShopView.value = true;\n        };\n        const closeShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopRobbing.value = false;\n            showShopView.value = false;\n        };\n        const buildNextRelicInventory = (pickedRelic) => {\n            const rawRelics = gameStore.statData._ ?? {};\n            const nextRelics = {};\n            for (const [name, value] of Object.entries(rawRelics)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                nextRelics[name] = count;\n            }\n            nextRelics[pickedRelic.name] = (nextRelics[pickedRelic.name] ?? 0) + 1;\n            return nextRelics;\n        };\n        const buyShopProduct = async (item) => {\n            if (shopBuying.value || item.sold)\n                return;\n            const currentGold = Math.max(0, Math.floor(Number(gameStore.statData._ ?? 0)));\n            if (currentGold < item.finalPrice) {\n                return;\n            }\n            shopBuying.value = true;\n            const nextGold = currentGold - item.finalPrice;\n            const nextRelics = buildNextRelicInventory(item.relic);\n            const ok = await gameStore.updateStatDataFields({\n                _: nextGold,\n                _: nextRelics,\n            });\n            shopBuying.value = false;\n            if (!ok)\n                return;\n            item.sold = true;\n            shopSpentGold.value += item.finalPrice;\n            shopPurchasedItems.value.push({\n                name: item.relic.name,\n                rarity: formatRarityLabel(item.relic.rarity),\n                price: item.finalPrice,\n            });\n            hideRelicTooltip();\n        };\n        const exitShop = () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value)\n                return;\n            const purchased = [...shopPurchasedItems.value];\n            const total = shopSpentGold.value;\n            const narrative = pendingCombatNarrative.value;\n            closeShopView();\n            if (narrative && narrative.context === 'shopRobbery' && narrative.win) {\n                const lootedText = purchased.length > 0\n                    ? `<user>${purchased.map((item) => `${item.name}${item.rarity}`).join('')}`\n                    : '<user>';\n                const report = `${narrative.text}\\n${lootedText}\\n<user>`;\n                pendingCombatNarrative.value = null;\n                sendCombatNarrativeOnce(narrative, report);\n                return;\n            }\n            if (purchased.length === 0)\n                return;\n            const purchasedText = purchased.map((item) => `${item.name}${item.rarity}`).join('');\n            gameStore.sendAction(`<user>${purchasedText}${total}`);\n        };\n        const handleShopRobClick = async () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value || isMerchantDefeated.value)\n                return;\n            if (shopRobClickCount.value < 5) {\n                shopRobClickCount.value += 1;\n                return;\n            }\n            shopRobbing.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: '' });\n            if (!ok) {\n                shopRobbing.value = false;\n                return;\n            }\n            clearShopRobTimer();\n            shopRobTimer = setTimeout(() => {\n                closeShopView();\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'shopRobbery';\n                showCombat.value = true;\n                shopRobTimer = null;\n            }, 1000);\n        };\n        const clearShopRobTimer = () => {\n            if (!shopRobTimer)\n                return;\n            clearTimeout(shopRobTimer);\n            shopRobTimer = null;\n        };\n        const clearChestMimicTimer = () => {\n            if (!chestMimicTimer)\n                return;\n            clearTimeout(chestMimicTimer);\n            chestMimicTimer = null;\n        };\n        const clearChestRewardFadeTimer = () => {\n            if (!chestRewardFadeTimer)\n                return;\n            clearTimeout(chestRewardFadeTimer);\n            chestRewardFadeTimer = null;\n        };\n        const handleChestBgLoaded = () => {\n            if (!showChestView.value)\n                return;\n            if (chestStage.value !== 'opened')\n                return;\n            if (chestBackgroundUrl.value !== CHEST_BG_OPENED)\n                return;\n            chestOpenedBgReady.value = true;\n            if (chestRewardRelic.value && !chestRewardCollected.value) {\n                chestRewardVisible.value = true;\n            }\n        };\n        const openChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            chestStage.value = 'closed';\n            chestRolling.value = false;\n            chestRewardRelic.value = null;\n            chestRewardCollected.value = false;\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n            chestPortalChoices.value = [];\n            showChestView.value = true;\n        };\n        const closeChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            hideRelicTooltip();\n            showChestView.value = false;\n            chestRolling.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n        };\n        const pickChestRewardRelic = () => {\n            const candidatePool = [...selectableRelicPool.value];\n            if (candidatePool.length === 0)\n                return null;\n            const rarityRoll = Math.random();\n            const targetRarity = rarityRoll < 0.6 ? '' : rarityRoll < 0.9 ? '' : '';\n            let rarityPool = candidatePool.filter((relic) => relic.rarity === targetRarity);\n            if (rarityPool.length === 0) {\n                rarityPool = candidatePool;\n            }\n            return pickOne(rarityPool);\n        };\n        const collectChestReward = () => {\n            if (!chestRewardRelic.value || chestRewardCollected.value || chestCollecting.value)\n                return;\n            chestCollecting.value = true;\n            //  MVU user \n            chestRewardCollected.value = true;\n            chestCollecting.value = false;\n            clearChestRewardFadeTimer();\n            chestRewardFadeTimer = setTimeout(() => {\n                chestRewardVisible.value = false;\n                hideRelicTooltip();\n                chestRewardFadeTimer = null;\n            }, 260);\n        };\n        const handleChestCenterClick = async () => {\n            if (chestRolling.value || chestStage.value !== 'closed')\n                return;\n            chestRolling.value = true;\n            const openSuccess = Math.random() < 0.9;\n            if (openSuccess) {\n                chestStage.value = 'opened';\n                chestOpenedBgReady.value = false;\n                chestRewardVisible.value = false;\n                const reward = pickChestRewardRelic();\n                if (!reward) {\n                    chestRolling.value = false;\n                    return;\n                }\n                chestRewardRelic.value = reward;\n                chestRewardCollected.value = false;\n                chestCollecting.value = false;\n                chestPortalChoices.value = generateChestLeavePortals();\n                if (chestOpenedBgReady.value) {\n                    chestRewardVisible.value = true;\n                }\n                chestRolling.value = false;\n                return;\n            }\n            chestStage.value = 'mimic';\n            await gameStore.updateStatDataFields({ _: '' });\n            clearChestMimicTimer();\n            chestMimicTimer = setTimeout(() => {\n                showChestView.value = false;\n                combatEnemyName.value = '';\n                activeCombatContext.value = 'chestMimic';\n                showCombat.value = true;\n                chestMimicTimer = null;\n            }, 1000);\n        };\n        const startCombatFromSpecialOption = async () => {\n            let enemyName = (gameStore.statData._ || '').trim();\n            if (!enemyName) {\n                const area = (gameStore.statData._ || '').trim();\n                enemyName = pickBattleMonsterByArea(area) ?? '';\n                if (!enemyName) {\n                    toastr.warning('');\n                    return;\n                }\n                const ok = await gameStore.updateStatDataFields({ _: enemyName });\n                if (!ok)\n                    return;\n            }\n            combatEnemyName.value = enemyName;\n            activeCombatContext.value = 'normal';\n            showCombat.value = true;\n        };\n        const handleSpecialOption = async () => {\n            if (isTreasureRoomContext.value) {\n                openChestView();\n                return;\n            }\n            if (isShopContext.value) {\n                openShopView();\n                return;\n            }\n            if (isCombatRoomContext.value) {\n                await startCombatFromSpecialOption();\n                return;\n            }\n            toastr.info('...');\n        };\n        // \n        //  [Leave] Portal System  Floor/Area Logic\n        // \n        const FLOOR_MONSTER_CONFIG = {\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', '', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': [''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': [''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n        };\n        // 70% 30% \n        const COMMON_MONSTER_RATE_BY_FLOOR = {\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n        };\n        function pickOne(arr) {\n            if (!arr.length)\n                return null;\n            return arr[Math.floor(Math.random() * arr.length)];\n        }\n        function pickBattleMonsterByArea(area) {\n            const floor = getFloorForArea(area) ?? '';\n            const config = FLOOR_MONSTER_CONFIG[floor];\n            if (!config)\n                return null;\n            const commonPool = config.common;\n            const uniquePool = config.uniqueByArea[area] ?? [];\n            const commonRate = COMMON_MONSTER_RATE_BY_FLOOR[floor] ?? 0.7;\n            let pool = [];\n            if (commonPool.length === 0 && uniquePool.length === 0)\n                return null;\n            if (commonPool.length === 0) {\n                pool = uniquePool;\n            }\n            else if (uniquePool.length === 0) {\n                pool = commonPool;\n            }\n            else {\n                pool = Math.random() < commonRate ? commonPool : uniquePool;\n            }\n            return pickOne(pool);\n        }\n        //  Portal visuals \n        const PORTAL_ROOM_TYPES = ['', '', '', '', '', '', ''];\n        const TRAP_POOL_BY_AREA = {\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            // \n            '': ['', '', ''],\n            '': [''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n            '': ['', '', ''],\n        };\n        const ALL_TRAPS = Object.values(TRAP_POOL_BY_AREA).flat();\n        const pickTrapByArea = (area) => {\n            const pool = TRAP_POOL_BY_AREA[area] ?? [];\n            if (pool.length > 0)\n                return pickOne(pool);\n            if (ALL_TRAPS.length > 0)\n                return pickOne(ALL_TRAPS);\n            return null;\n        };\n        const getAvailablePortalRoomTypes = (currentArea) => {\n            if (parseMerchantDefeatedValue(gameStore.statData._)) {\n                const withoutShop = PORTAL_ROOM_TYPES.filter((type) => type !== '');\n                if (currentArea === '') {\n                    return withoutShop.filter((type) => type !== '');\n                }\n                return withoutShop;\n            }\n            if (currentArea === '') {\n                return PORTAL_ROOM_TYPES.filter((type) => type !== '');\n            }\n            return [...PORTAL_ROOM_TYPES];\n        };\n        const PORTAL_ROOM_VISUALS = {\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.5)', borderColor: '#991b1b', textColor: '#fca5a5', glowColor: '#dc2626' },\n            '': { icon: '', bgColor: 'rgba(113,63,18,0.5)', borderColor: '#a16207', textColor: '#fde68a', glowColor: '#eab308' },\n            '': { icon: '', bgColor: 'rgba(20,83,45,0.5)', borderColor: '#166534', textColor: '#bbf7d0', glowColor: '#22c55e' },\n            '': { icon: '', bgColor: 'rgba(22,78,99,0.5)', borderColor: '#155e75', textColor: '#a5f3fc', glowColor: '#06b6d4' },\n            '': { icon: '', bgColor: 'rgba(88,28,135,0.5)', borderColor: '#7e22ce', textColor: '#e9d5ff', glowColor: '#a855f7' },\n            '': { icon: '', bgColor: 'rgba(63,63,70,0.5)', borderColor: '#52525b', textColor: '#d4d4d8', glowColor: '#71717a' },\n            '': { icon: '', bgColor: 'rgba(124,45,18,0.5)', borderColor: '#9a3412', textColor: '#fed7aa', glowColor: '#ea580c' },\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.6)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#ef4444' },\n        };\n        const AREA_PORTAL_VISUAL = {\n            icon: '', bgColor: 'rgba(79,70,229,0.5)', borderColor: '#6366f1', textColor: '#c7d2fe', glowColor: '#818cf8',\n        };\n        let cachedPortals = [];\n        let cachedPortalFingerprint = '';\n        function shuffle(arr) {\n            const a = [...arr];\n            for (let i = a.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                [a[i], a[j]] = [a[j], a[i]];\n            }\n            return a;\n        }\n        function generatePortals() {\n            const currentArea = gameStore.statData._ || '';\n            const currentRoomType = gameStore.statData._ || '';\n            const stats = gameStore.statData.$ || {};\n            const roomsPassed = stats. ?? 0;\n            const isStartArea = currentArea === '';\n            const isBossRoom = currentRoomType === '';\n            //  Special:  or   next floor area portals \n            if (isStartArea || isBossRoom) {\n                let targetFloor = null;\n                if (isStartArea) {\n                    targetFloor = '';\n                }\n                else {\n                    const currentFloor = getFloorForArea(currentArea);\n                    if (currentFloor)\n                        targetFloor = getNextFloor(currentFloor);\n                }\n                if (targetFloor && FLOOR_MAP[targetFloor]) {\n                    const candidates = FLOOR_MAP[targetFloor].filter(a => a !== currentArea);\n                    const picked = shuffle(candidates).slice(0, 3);\n                    return picked.map(areaName => ({\n                        label: areaName,\n                        roomType: '',\n                        areaName,\n                        floorName: targetFloor,\n                        isFloorTransition: true,\n                        ...AREA_PORTAL_VISUAL,\n                    }));\n                }\n            }\n            //  Boss room probability: rooms >= 5  (rooms - 4) * 10% \n            if (roomsPassed >= 5) {\n                const bossChance = (roomsPassed - 4) * 0.1;\n                if (Math.random() < bossChance) {\n                    const vis = PORTAL_ROOM_VISUALS[''];\n                    return [{ label: '', roomType: '', isFloorTransition: false, ...vis }];\n                }\n            }\n            //  Normal: 1-3 random room portals (20%/40%/40%) \n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const roll = Math.random();\n            const count = Math.min(availableRoomTypes.length, roll < 0.2 ? 1 : roll < 0.6 ? 2 : 3);\n            const picked = shuffle(availableRoomTypes).slice(0, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        // //hasLeave \n        const portalChoices = computed(() => {\n            if (!gameStore.hasLeave) {\n                cachedPortals = [];\n                cachedPortalFingerprint = '';\n                return [];\n            }\n            //  +  + \n            const area = gameStore.statData._ || '';\n            const roomType = gameStore.statData._ || '';\n            const rooms = (gameStore.statData.$?. ?? 0);\n            const merchantDefeated = parseMerchantDefeatedValue(gameStore.statData._);\n            const fingerprint = `${area}|${roomType}|${rooms}|${merchantDefeated ? 1 : 0}`;\n            if (fingerprint !== cachedPortalFingerprint) {\n                cachedPortalFingerprint = fingerprint;\n                cachedPortals = generatePortals();\n            }\n            return cachedPortals;\n        });\n        //  Room type  $ field mapping \n        const ROOM_STAT_KEY = {\n            '': '', '': '', '': '',\n            '': '', '': '', '': '', '': '',\n        };\n        const buildQueuedPortalAction = (portal) => {\n            if (portal.isFloorTransition) {\n                // \n                gameStore.setPendingPortalChanges({\n                    area: portal.areaName,\n                    roomType: '',\n                    resetRoomCounter: true,\n                    //  +1 +1 +1\n                    incrementKeys: ['', '', ''],\n                    enemyName: '',\n                });\n                console.info(`[Portal] Floor transition queued  area: ${portal.areaName}, first room: `);\n                const enterText = `${portal.areaName}`;\n                return {\n                    enterText,\n                    actionText: `<user>${enterText}`,\n                };\n            }\n            // \n            const incrementKeys = ['', ''];\n            const statKey = ROOM_STAT_KEY[portal.roomType];\n            if (statKey)\n                incrementKeys.push(statKey);\n            const currentArea = gameStore.statData._ || '';\n            const encounterMonster = portal.roomType === ''\n                ? pickBattleMonsterByArea(currentArea)\n                : null;\n            const trapName = portal.roomType === ''\n                ? pickTrapByArea(currentArea)\n                : null;\n            const trapHpAfterDamage = portal.roomType === ''\n                ? Math.max(1, toNonNegativeInt(gameStore.statData._, 1) - 5)\n                : undefined;\n            const pendingStatDataFields = portal.roomType === ''\n                ? {\n                    _: trapName ?? '',\n                    _: trapHpAfterDamage,\n                }\n                : undefined;\n            gameStore.setPendingPortalChanges({\n                roomType: portal.roomType,\n                incrementKeys,\n                enemyName: encounterMonster ?? '',\n            });\n            console.info(`[Portal] Room transition queued  type: ${portal.roomType}`);\n            const enterText = portal.roomType === '' && encounterMonster\n                ? `${portal.roomType}${encounterMonster}`\n                : portal.roomType === '' && trapName\n                    ? `${portal.roomType}${trapName}`\n                    : `${portal.roomType}`;\n            return {\n                enterText,\n                actionText: `<user>${enterText}`,\n                pendingStatDataFields,\n            };\n        };\n        function generateChestLeavePortals() {\n            const generated = generatePortals();\n            if (generated.length > 0)\n                return generated;\n            const currentArea = gameStore.statData._ || '';\n            const availableRoomTypes = getAvailablePortalRoomTypes(currentArea);\n            if (availableRoomTypes.length === 0)\n                return [];\n            const roll = Math.random();\n            const count = Math.min(availableRoomTypes.length, roll < 0.2 ? 1 : roll < 0.6 ? 2 : 3);\n            const picked = shuffle(availableRoomTypes).slice(0, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        const handlePortalClick = async (portal) => {\n            if (gameStore.isGenerating)\n                return;\n            const { actionText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            gameStore.setPendingStatDataChanges(pendingStatDataFields ?? null);\n            gameStore.sendAction(actionText);\n        };\n        const handleChestPortalClick = async (portal) => {\n            if (gameStore.isGenerating || chestCollecting.value || chestStage.value !== 'opened')\n                return;\n            const { actionText, enterText, pendingStatDataFields } = buildQueuedPortalAction(portal);\n            const collectedRelic = chestRewardCollected.value ? chestRewardRelic.value : null;\n            const mergedPendingStatDataFields = {\n                ...(pendingStatDataFields ?? {}),\n            };\n            if (collectedRelic) {\n                //  user \n                const nextRelics = buildNextRelicInventory(collectedRelic);\n                mergedPendingStatDataFields._ = nextRelics;\n            }\n            gameStore.setPendingStatDataChanges(Object.keys(mergedPendingStatDataFields).length > 0 ? mergedPendingStatDataFields : null);\n            const relicName = collectedRelic?.name ?? '';\n            closeChestView();\n            if (relicName) {\n                gameStore.sendAction(`<user>${relicName}${enterText}`);\n                return;\n            }\n            gameStore.sendAction(actionText);\n        };\n        const openSaveLoad = () => {\n            gameStore.loadSaveEntries();\n            gameStore.isSaveLoadOpen = !gameStore.isSaveLoadOpen;\n        };\n        const openVariableUpdate = () => {\n            isVariableUpdateOpen.value = !isVariableUpdateOpen.value;\n        };\n        // toggleFullScreen imported from '../fullscreen'\n        //  Combat Test \n        const getSelectedTestRelicCount = (name) => {\n            return Math.max(0, Math.floor(selectedTestRelicCounts.value[name] ?? 0));\n        };\n        const setSelectedTestRelicCount = (name, next) => {\n            const value = Math.max(0, Math.floor(next));\n            if (value <= 0) {\n                delete selectedTestRelicCounts.value[name];\n                return;\n            }\n            selectedTestRelicCounts.value[name] = value;\n        };\n        const increaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) + 1);\n        };\n        const decreaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) - 1);\n        };\n        const buildSelectedRelicPayload = () => {\n            const next = {};\n            for (const relic of baseRelicsForTest.value) {\n                const count = getSelectedTestRelicCount(relic.name);\n                if (count > 0) {\n                    next[relic.name] = count;\n                }\n            }\n            return next;\n        };\n        const openCombatTestBuilder = () => {\n            gameStore.loadStatData();\n            const availableCardNames = new Set(allCardsForTest.value.map(c => c.name));\n            const availableRelicNames = new Set(baseRelicsForTest.value.map((relic) => relic.name));\n            const presetDeck = Array.isArray(gameStore.statData._)\n                ? gameStore.statData._.filter((name) => availableCardNames.has(name)).slice(0, 9)\n                : [];\n            const presetRelicsRaw = gameStore.statData._ ?? {};\n            const presetRelics = {};\n            for (const [name, value] of Object.entries(presetRelicsRaw)) {\n                if (!availableRelicNames.has(name))\n                    continue;\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (count <= 0)\n                    continue;\n                presetRelics[name] = count;\n            }\n            selectedTestDeck.value = [...presetDeck];\n            selectedTestEnemy.value = '';\n            selectedTestRelicCounts.value = presetRelics;\n            selectedCardCategoryTab.value = '';\n            selectedRelicCategoryTab.value = '';\n            combatTestStartAt999.value = false;\n            combatTestStep.value = 'deck';\n            activeModal.value = 'combatTestBuilder';\n        };\n        const addCardToTestDeck = (cardName) => {\n            if (selectedTestDeck.value.length >= 9)\n                return;\n            selectedTestDeck.value.push(cardName);\n        };\n        const removeCardFromTestDeck = (index) => {\n            if (index < 0 || index >= selectedTestDeck.value.length)\n                return;\n            selectedTestDeck.value.splice(index, 1);\n        };\n        const confirmCombatTestDeck = async () => {\n            if (selectedTestDeck.value.length !== 9) {\n                gameStore.error = '9';\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: [...selectedTestDeck.value],\n            });\n            if (!ok)\n                return;\n            if (allEnemyNamesForTest.value.length === 0) {\n                gameStore.error = ' enemyRegistry ';\n                return;\n            }\n            combatTestStep.value = 'enemy';\n        };\n        const confirmCombatTestEnemyAndStart = async () => {\n            if (!selectedTestEnemy.value) {\n                gameStore.error = '';\n                return;\n            }\n            const enemyDef = getEnemyByName(selectedTestEnemy.value);\n            if (!enemyDef) {\n                gameStore.error = `${selectedTestEnemy.value}`;\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: selectedTestEnemy.value,\n                _: buildSelectedRelicPayload(),\n            });\n            if (!ok)\n                return;\n            activeModal.value = null;\n            combatEnemyName.value = selectedTestEnemy.value;\n            activeCombatContext.value = 'combatTest';\n            combatTestStartAt999CurrentBattle.value = combatTestStartAt999.value;\n            showCombat.value = true;\n        };\n        const handleCombatEnd = async (win, finalStats, logs) => {\n            const context = activeCombatContext.value;\n            const enemyName = combatEnemyName.value || (gameStore.statData._ || '');\n            pendingCombatNarrative.value = {\n                id: `${Date.now()}-${Math.random().toString(36).slice(2, 10)}`,\n                context,\n                win,\n                enemyName,\n                text: buildCombatNarrative(win, enemyName, context, logs ?? []),\n            };\n            queueCombatMvuSync(win, finalStats);\n            showCombat.value = false;\n            showVictoryRewardView.value = false;\n            combatTestStartAt999CurrentBattle.value = false;\n            activeCombatContext.value = 'normal';\n            if (!win) {\n                closeShopView();\n                const narrative = pendingCombatNarrative.value;\n                pendingCombatNarrative.value = null;\n                if (narrative) {\n                    sendCombatNarrativeOnce(narrative, narrative.text);\n                }\n                console.log('[Combat] Result:', 'LOSE');\n                return;\n            }\n            if (context === 'shopRobbery' && enemyName === '') {\n                const ok = await gameStore.updateStatDataFields({ _: true });\n                if (ok) {\n                    shopRobbing.value = false;\n                    showShopView.value = true;\n                    applyMerchantDefeatedShopState();\n                }\n                else if (pendingCombatNarrative.value) {\n                    pendingCombatNarrative.value.context = 'normal';\n                }\n            }\n            const hasRewardOptions = startVictoryRewardFlow();\n            if (!hasRewardOptions) {\n                finalizeVictoryRewardFlow();\n            }\n            console.log('[Combat] Result:', 'WIN');\n        };\n        onBeforeUnmount(() => {\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Dynamic Background \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_3))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createElementVNode(\"div\", {\n                        class: \"absolute inset-0\",\n                        style: _normalizeStyle({ backgroundColor: `rgba(0,0,0,${_unref(bgOverlayOpacity)})` })\n                    }, null, 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Sidebar: Individual Icons Top-Left (no back button, settings already has exit) \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(SettingsIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'settings',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeModal.value = 'settings'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Scroll),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'deck',\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeModal.value = 'deck'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Box),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'relics',\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeModal.value = 'relics'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(MapIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'map',\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeModal.value = 'map'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(magicBookSidebarIcon),\n                        label: _unref(canEditMagicBooks) ? '' : '',\n                        \"tooltip-side\": \"right\",\n                        active: _unref(canEditMagicBooks) && _unref(activeModal) === 'magicBooks',\n                        disabled: !_unref(canEditMagicBooks),\n                        onClick: openMagicBookModal\n                    }, null, 8 /* PROPS */, [\"icon\", \"label\", \"active\", \"disabled\"])\n                ]),\n                _createCommentVNode(\" Right sidebar: save/load only (reroll & edit moved into panel) \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Maximize),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        onClick: _unref(toggleFullScreen)\n                    }, null, 8 /* PROPS */, [\"icon\", \"onClick\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(BookOpen),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(gameStore).isSaveLoadOpen,\n                        onClick: openSaveLoad\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(FileText),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(isVariableUpdateOpen),\n                        onClick: openVariableUpdate\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"div\", {\n                        class: \"w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full\",\n                        style: _normalizeStyle({ maxWidth: _unref(textSettings).containerWidth + 'px' })\n                    }, [\n                        _createCommentVNode(\" Story Text Area \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createCommentVNode(\" Decorative Corners \"),\n                            _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _cache[40] || (_cache[40] = _createElementVNode(\"div\", { class: \"absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Loading Indicator \"),\n                            (_unref(gameStore).isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[34] || (_cache[34] = [\n                                        _createStaticVNode(\"<div class=\\\"flex gap-1\\\" data-v-d89a51be><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0s;\\\" data-v-d89a51be></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.2s;\\\" data-v-d89a51be></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.4s;\\\" data-v-d89a51be></span></div><span class=\\\"text-dungeon-gold/60 font-ui text-sm\\\" data-v-d89a51be>...</span>\", 2)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Edit Mode \"),\n                            (_unref(gameStore).isEditing)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(gameStore).editingText) = $event)),\n                                        class: \"flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, null, 4 /* STYLE */), [\n                                        [_vModelText, _unref(gameStore).editingText]\n                                    ]),\n                                    _createCommentVNode(\" Edit Actions \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                            onClick: _cache[5] || (_cache[5] = ($event) => (_unref(gameStore).cancelEdit()))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(gameStore).saveEdit()))\n                                        }, \"  \")\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" Normal View (not editing) \"),\n                                    _createCommentVNode(\" Story Content \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, [\n                                        _createCommentVNode(\" Streaming text (during generation) \"),\n                                        (_unref(isStreamingEnabled) && _unref(gameStore).isGenerating && _unref(gameStore).streamingText)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString(_unref(gameStore).streamingText), 1 /* TEXT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" Final main text \"),\n                                                _createElementVNode(\"div\", _hoisted_12, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyMainLines), (line) => {\n                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                            key: line.key,\n                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                        }, [\n                                                            (line.segments.length > 0)\n                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                        key: segment.key,\n                                                                        class: _normalizeClass({\n                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                        })\n                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"\"))\n                                                        ], 2 /* CLASS */));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    (_unref(storyTucaoSections).length > 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(storyTucaoSections), (section, sectionIndex) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: section.key,\n                                                                    class: \"story-tucao-wrap\"\n                                                                }, [\n                                                                    _createElementVNode(\"button\", {\n                                                                        class: \"story-tucao-toggle\",\n                                                                        type: \"button\",\n                                                                        onClick: ($event) => (toggleTucao(section.key))\n                                                                    }, _toDisplayString(isTucaoExpanded(section.key)\n                                                                        ? ` ${sectionIndex + 1}`\n                                                                        : `  ${sectionIndex + 1}`), 9 /* TEXT, PROPS */, _hoisted_15),\n                                                                    _createVNode(_Transition, { name: \"tucao-expand\" }, {\n                                                                        default: _withCtx(() => [\n                                                                            (isTucaoExpanded(section.key))\n                                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(section.lines, (line) => {\n                                                                                        return (_openBlock(), _createElementBlock(\"p\", {\n                                                                                            key: line.key,\n                                                                                            class: _normalizeClass(['story-line', `story-line-level-${line.level}`])\n                                                                                        }, [\n                                                                                            (line.segments.length > 0)\n                                                                                                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(line.segments, (segment) => {\n                                                                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                                        key: segment.key,\n                                                                                                        class: _normalizeClass({\n                                                                                                            'story-segment-muted': segment.type === 'muted',\n                                                                                                            'story-segment-quote': segment.type === 'quote',\n                                                                                                        })\n                                                                                                    }, _toDisplayString(segment.text), 3 /* TEXT, CLASS */));\n                                                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \"\"))\n                                                                                        ], 2 /* CLASS */));\n                                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                                ]))\n                                                                                : _createCommentVNode(\"v-if\", true)\n                                                                        ]),\n                                                                        _: 2 /* DYNAMIC */\n                                                                    }, 1024 /* DYNAMIC_SLOTS */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ], 4 /* STYLE */),\n                                    _createCommentVNode(\" Options Section \"),\n                                    (!_unref(gameStore).isGenerating && (_unref(gameStore).options.length > 0 || _unref(gameStore).hasOptionE || _unref(gameStore).hasLeave || _unref(gameStore).hasRebirth))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                            _cache[38] || (_cache[38] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2\" }, null, -1 /* CACHED */)),\n                                            _createCommentVNode(\" A-D Normal Options \"),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameStore).options, (option, i) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 'opt-' + i,\n                                                    class: \"w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1\",\n                                                    onClick: ($event) => (handleOptionClick(option))\n                                                }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_19));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createCommentVNode(\" E Option: Special Room Action Button \"),\n                                            (_unref(gameStore).hasOptionE && _unref(specialOptionConfig))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]\",\n                                                    style: _normalizeStyle({\n                                                        backgroundColor: _unref(specialOptionConfig).bgColor,\n                                                        borderColor: _unref(specialOptionConfig).borderColor,\n                                                        color: _unref(specialOptionConfig).textColor,\n                                                        boxShadow: `0 0 20px ${_unref(specialOptionConfig).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`,\n                                                    }),\n                                                    onClick: handleSpecialOption\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_20, _toDisplayString(_unref(specialOptionConfig).icon), 1 /* TEXT */),\n                                                    _createTextVNode(\" \" + _toDisplayString(_unref(specialOptionConfig).label), 1 /* TEXT */)\n                                                ], 4 /* STYLE */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Leave] Portal System \"),\n                                            (_unref(gameStore).hasLeave && _unref(portalChoices).length > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                                    _cache[35] || (_cache[35] = _createElementVNode(\"div\", { class: \"text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_22, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(portalChoices), (portal, i) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 'portal-' + i,\n                                                                class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95\",\n                                                                style: _normalizeStyle({\n                                                                    backgroundColor: portal.bgColor,\n                                                                    borderColor: portal.borderColor,\n                                                                    boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                                }),\n                                                                onClick: ($event) => (handlePortalClick(portal))\n                                                            }, [\n                                                                _createCommentVNode(\" Portal glow ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                                    style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                                }, null, 4 /* STYLE */),\n                                                                _createCommentVNode(\" Portal icon \"),\n                                                                _createElementVNode(\"span\", _hoisted_24, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                                _createCommentVNode(\" Portal label \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                                    style: _normalizeStyle({ color: portal.textColor })\n                                                                }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                                _createCommentVNode(\" Animated ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                                    style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                                }, null, 4 /* STYLE */)\n                                                            ], 12 /* STYLE, PROPS */, _hoisted_23));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Rebirth] Reset Button \"),\n                                            (_unref(gameStore).hasRebirth)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                                    _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"text-center text-red-300/70 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_26, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"group relative px-7 py-3 rounded-lg border-2 font-heading text-sm tracking-wider transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] bg-red-950/45 border-red-500/60 text-red-100 shadow-[0_0_14px_rgba(239,68,68,0.35)] hover:shadow-[0_0_20px_rgba(248,113,113,0.5)]\",\n                                                            disabled: _unref(gameStore).isGenerating,\n                                                            onClick: handleRebirthClick\n                                                        }, [...(_cache[36] || (_cache[36] = [\n                                                                _createElementVNode(\"span\", { class: \"text-base mr-2\" }, \"\", -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_27)\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" Error Display \"),\n                                    (_unref(gameStore).error)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, _toDisplayString(_unref(gameStore).error), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Input Area \"),\n                        _createElementVNode(\"div\", _hoisted_29, [\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => (_isRef(inputText) ? (inputText).value = $event : null)),\n                                    type: \"text\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    placeholder: _unref(gameStore).isGenerating ? '...' : '...',\n                                    class: \"w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 pr-14 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    onKeydown: _withKeys(handleSendInput, [\"enter\"])\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_31), [\n                                    [_vModelText, _unref(inputText)]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: handleSendInput\n                                }, [\n                                    _createVNode(_unref(Send), { class: \"size-5\" })\n                                ], 8 /* PROPS */, _hoisted_32)\n                            ])\n                        ])\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Player Status HUD (Bottom Left) - Collapsible \"),\n                _createElementVNode(\"div\", _hoisted_33, [\n                    _createCommentVNode(\" Toggle Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md\",\n                        title: _unref(isStatusOpen) ? '' : '',\n                        onClick: _cache[8] || (_cache[8] = ($event) => (isStatusOpen.value = !_unref(isStatusOpen)))\n                    }, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(isStatusOpen) ? _unref(ChevronDown) : _unref(Activity)), { class: \"size-5\" }))\n                    ], 8 /* PROPS */, _hoisted_34),\n                    _createCommentVNode(\" Expandable Status Panel \"),\n                    _createVNode(_Transition, { name: \"status-slide\" }, {\n                        default: _withCtx(() => [\n                            (_unref(isStatusOpen))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                    _createCommentVNode(\" Decorative Elements \"),\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"div\", { class: \"absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[51] || (_cache[51] = _createElementVNode(\"div\", { class: \"absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" HP & MP: Container-fill style \"),\n                                    _createElementVNode(\"div\", _hoisted_36, [\n                                        _createCommentVNode(\" HP Heart Container \"),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-heart\",\n                                                title: `HP: ${_unref(displayHp)}/${_unref(displayMaxHp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_39, [\n                                                    _cache[41] || (_cache[41] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"heartClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"hpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"hpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#8a0e0e\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#cc2222\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#ee4444\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Heart outline (dark) \"),\n                                                    _cache[42] || (_cache[42] = _createElementVNode(\"path\", {\n                                                        d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\",\n                                                        fill: \"#1a0808\",\n                                                        stroke: \"#5c1a1a\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level (clipped to heart) \"),\n                                                    _createElementVNode(\"g\", _hoisted_40, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(hpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(hpPercent) / 100) * 60,\n                                                            fill: \"url(#hpGradient)\",\n                                                            filter: \"url(#hpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_41)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[43] || (_cache[43] = _createElementVNode(\"ellipse\", {\n                                                        cx: \"22\",\n                                                        cy: \"18\",\n                                                        rx: \"5\",\n                                                        ry: \"4\",\n                                                        fill: \"rgba(255,255,255,0.12)\",\n                                                        transform: \"rotate(-20,22,18)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_38),\n                                            _createElementVNode(\"span\", _hoisted_42, [\n                                                _createElementVNode(\"span\", _hoisted_43, _toDisplayString(_unref(displayHp)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_44, \"/\" + _toDisplayString(_unref(displayMaxHp)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\" MP Crystal Container \"),\n                                        _createElementVNode(\"div\", _hoisted_45, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-mana\",\n                                                title: `MP: ${_unref(displayMp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_47, [\n                                                    _cache[44] || (_cache[44] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"manaClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 4 L54 24 L32 60 L10 24 Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"mpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"mpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#1a1a8a\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#3344cc\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#5566ee\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Crystal outline \"),\n                                                    _cache[45] || (_cache[45] = _createElementVNode(\"path\", {\n                                                        d: \"M32 4 L54 24 L32 60 L10 24 Z\",\n                                                        fill: \"#080818\",\n                                                        stroke: \"#1a1a5c\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level \"),\n                                                    _createElementVNode(\"g\", _hoisted_48, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(mpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(mpPercent) / 100) * 60,\n                                                            fill: \"url(#mpGradient)\",\n                                                            filter: \"url(#mpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_49)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[46] || (_cache[46] = _createElementVNode(\"polygon\", {\n                                                        points: \"26,14 32,8 38,14 32,20\",\n                                                        fill: \"rgba(255,255,255,0.1)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_46),\n                                            _createElementVNode(\"span\", _hoisted_50, [\n                                                _createElementVNode(\"span\", _hoisted_51, _toDisplayString(_unref(displayMp)), 1 /* TEXT */)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Divider \"),\n                                    _cache[53] || (_cache[53] = _createElementVNode(\"div\", { class: \"my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" Dice Range Row \"),\n                                    _createElementVNode(\"div\", _hoisted_52, [\n                                        _createElementVNode(\"div\", _hoisted_53, [\n                                            _createVNode(_unref(Dices), { class: \"size-4 text-dungeon-gold-dim drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_54, [\n                                                _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(displayMinDice)), 1 /* TEXT */),\n                                                _cache[47] || (_cache[47] = _createElementVNode(\"span\", { class: \"text-gray-500\" }, \"~\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_56, _toDisplayString(_unref(displayMaxDice)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _cache[48] || (_cache[48] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Dice\", -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\" Gold Row \"),\n                                    _createElementVNode(\"div\", _hoisted_57, [\n                                        _createElementVNode(\"div\", _hoisted_58, [\n                                            _createVNode(_unref(Coins), { class: \"size-4 drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_59, _toDisplayString(_unref(displayGold)), 1 /* TEXT */)\n                                        ]),\n                                        _cache[49] || (_cache[49] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Gold\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\" Modals \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'map',\n                    onClose: _cache[9] || (_cache[9] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [...(_cache[54] || (_cache[54] = [\n                            _createElementVNode(\"div\", { class: \"w-full h-64 bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center rounded\" }, [\n                                _createElementVNode(\"span\", { class: \"font-heading text-dungeon-gold/30 text-2xl\" }, \"MAP_RENDER_TARGET\")\n                            ], -1 /* CACHED */)\n                        ]))]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'deck',\n                    onClose: _cache[10] || (_cache[10] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(resolvedDeck).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_60, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedDeck), (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"hover:scale-105 transition-transform flex justify-center\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_61, [\n                                _createVNode(_unref(Scroll), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[55] || (_cache[55] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"  \", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'magicBooks',\n                    \"panel-class\": \"max-w-[92rem] max-h-[94%]\",\n                    onClose: _cache[11] || (_cache[11] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_62, [\n                            (_unref(carryableMagicBookNames).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_63, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(carryableMagicBookNames), (bookName) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `magic-book-${bookName}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"relative rounded-lg border p-3 text-left transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[#130c08]/80\", _unref(carriedMagicBookSet).has(bookName)\n                                                    ? 'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.45)] ring-1 ring-dungeon-gold/70'\n                                                    : 'border-dungeon-brown/70 hover:border-dungeon-gold/45']),\n                                            disabled: _unref(isUpdatingMagicBooks),\n                                            onClick: ($event) => (toggleMagicBook(bookName))\n                                        }, [\n                                            _createElementVNode(\"div\", {\n                                                class: _normalizeClass([\"relative w-full overflow-hidden rounded-md border\", _unref(carriedMagicBookSet).has(bookName) ? 'border-dungeon-gold/60' : 'border-dungeon-brown/60'])\n                                            }, [\n                                                _createElementVNode(\"img\", {\n                                                    src: getMagicBookCoverUrl(bookName),\n                                                    alt: `${bookName} `,\n                                                    class: _normalizeClass([\"w-full [aspect-ratio:832/1216] object-cover transition-all duration-300\", _unref(carriedMagicBookSet).has(bookName)\n                                                            ? 'brightness-100 saturate-110'\n                                                            : 'brightness-50 saturate-60']),\n                                                    loading: \"lazy\"\n                                                }, null, 10 /* CLASS, PROPS */, _hoisted_65),\n                                                _cache[56] || (_cache[56] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-black/55 via-black/10 to-black/38\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_66, [\n                                                    _createElementVNode(\"div\", _hoisted_67, _toDisplayString(bookName) + \"\", 1 /* TEXT */)\n                                                ])\n                                            ], 2 /* CLASS */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_64));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_68, \"  \"))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'relics',\n                    onClose: _cache[12] || (_cache[12] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(relicEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_69, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicEntries), (relic) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: relic.name,\n                                        type: \"button\",\n                                        class: \"relative flex flex-col items-center p-1.5 rounded border border-dungeon-brown/30 bg-[#1a0f08]/35 hover:border-dungeon-gold/40 transition-colors focus:outline-none focus:border-dungeon-gold/60\",\n                                        onMouseenter: ($event) => (showRelicTooltip($event, relic)),\n                                        onMouseleave: hideRelicTooltip,\n                                        onFocus: ($event) => (showRelicTooltip($event, relic)),\n                                        onBlur: hideRelicTooltip,\n                                        onTouchstartPassive: ($event) => (handleRelicTouchStart($event, relic)),\n                                        onTouchend: handleRelicTouchEnd,\n                                        onTouchcancel: handleRelicTouchEnd\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_71, [\n                                            _createVNode(_unref(Box), { class: \"size-9 text-dungeon-gold/75\" }),\n                                            _createElementVNode(\"span\", _hoisted_72, \"x\" + _toDisplayString(relic.count), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_73, _toDisplayString(relic.name), 1 /* TEXT */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_70));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_74, [\n                                _createVNode(_unref(Box), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[57] || (_cache[57] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                (_unref(relicTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed z-[220] pointer-events-none relic-tooltip\",\n                        style: _normalizeStyle({ left: `${_unref(relicTooltip).x}px`, top: `${_unref(relicTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_75, _toDisplayString(_unref(relicTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_76, _toDisplayString(_unref(relicTooltip).description), 1 /* TEXT */)\n                    ], 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Settings Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'settings',\n                    onClose: _cache[23] || (_cache[23] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_77, [\n                            _createCommentVNode(\" Text Display Settings Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[65] || (_cache[65] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_78, [\n                                    _createCommentVNode(\" Font Size \"),\n                                    _createElementVNode(\"div\", _hoisted_79, [\n                                        _cache[58] || (_cache[58] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_80, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[13] || (_cache[13] = ($event) => (_unref(textSettings).fontSize = Math.max(12, _unref(textSettings).fontSize - 1)))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_81, _toDisplayString(_unref(textSettings).fontSize) + \"px\", 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[14] || (_cache[14] = ($event) => (_unref(textSettings).fontSize = Math.min(28, _unref(textSettings).fontSize + 1)))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Line Height \"),\n                                    _createElementVNode(\"div\", _hoisted_82, [\n                                        _cache[59] || (_cache[59] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_83, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[15] || (_cache[15] = ($event) => (_unref(textSettings).lineHeight = Math.max(1.2, +(_unref(textSettings).lineHeight - 0.1).toFixed(1))))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_84, _toDisplayString(_unref(textSettings).lineHeight), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[16] || (_cache[16] = ($event) => (_unref(textSettings).lineHeight = Math.min(3.0, +(_unref(textSettings).lineHeight + 0.1).toFixed(1))))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Font Family \"),\n                                    _createElementVNode(\"div\", _hoisted_85, [\n                                        _cache[61] || (_cache[61] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(textSettings).fontFamily) = $event)),\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui\"\n                                        }, [...(_cache[60] || (_cache[60] = [\n                                                _createElementVNode(\"option\", { value: \"'Cinzel', serif\" }, \"Cinzel ()\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Inter', sans-serif\" }, \"Inter\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MedievalSharp', cursive\" }, \"MedievalSharp\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MaShanZheng', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MagicBookTitle', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"serif\" }, \"Serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"sans-serif\" }, \"Sans-serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Microsoft YaHei', sans-serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'SimSun', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'KaiTi', serif\" }, \"\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(textSettings).fontFamily]\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Container Width \"),\n                                    _createElementVNode(\"div\", _hoisted_86, [\n                                        _cache[62] || (_cache[62] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_87, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event) => ((_unref(textSettings).containerWidth) = $event)),\n                                                type: \"range\",\n                                                min: \"600\",\n                                                max: \"1600\",\n                                                step: \"50\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(textSettings).containerWidth,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_88, _toDisplayString(_unref(textSettings).containerWidth) + \"px\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Background Clarity \"),\n                                    _createElementVNode(\"div\", _hoisted_89, [\n                                        _cache[63] || (_cache[63] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_90, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => (_isRef(bgOverlayOpacity) ? (bgOverlayOpacity).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"0.8\",\n                                                step: \"0.05\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgOverlayOpacity),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_91, _toDisplayString(Math.round((1 - _unref(bgOverlayOpacity)) * 100)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_92, [\n                                        _cache[64] || (_cache[64] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"label\", _hoisted_93, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event) => (_isRef(isStreamingEnabled) ? (isStreamingEnabled).value = $event : null)),\n                                                type: \"checkbox\",\n                                                class: \"h-4 w-4 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelCheckbox, _unref(isStreamingEnabled)]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_94, _toDisplayString(_unref(isStreamingEnabled) ? '' : ''), 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _cache[67] || (_cache[67] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-dungeon-gold/20\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" System Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[66] || (_cache[66] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_95, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded\",\n                                        onClick: _cache[21] || (_cache[21] =\n                                            //@ts-ignore\n                                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded\",\n                                        onClick: _cache[22] || (_cache[22] = ($event) => (_ctx.$emit('backToSplash')))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2\",\n                                        onClick: openCombatTestBuilder\n                                    }, \"   \")\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Test Builder Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'combatTestBuilder',\n                    onClose: _cache[27] || (_cache[27] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_96, [\n                            (_unref(combatTestStep) === 'deck')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_97, [\n                                        _cache[68] || (_cache[68] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"19\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_98, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_99, [\n                                        _createElementVNode(\"div\", _hoisted_100, [\n                                            _cache[69] || (_cache[69] = _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_101, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_102, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(selectedTestDeckCards), (entry) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `selected-card-${entry.idx}`,\n                                                    class: \"w-full text-left flex items-stretch gap-2 rounded border border-dungeon-gold/20 bg-[#1a0f08]/70 px-2 py-2 hover:border-dungeon-gold/50 transition-colors\",\n                                                    onClick: ($event) => (removeCardFromTestDeck(entry.idx))\n                                                }, [\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"w-1.5 rounded\", getCardCategoryStripClass(entry.card.category)])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createElementVNode(\"div\", _hoisted_104, [\n                                                        _createElementVNode(\"div\", _hoisted_105, [\n                                                            _createElementVNode(\"span\", _hoisted_106, _toDisplayString(entry.card.name), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: _normalizeClass([\"text-[10px] px-1 rounded border\", getCardTypeBadgeClass(entry.card.type)])\n                                                            }, _toDisplayString(entry.card.type), 3 /* TEXT, CLASS */),\n                                                            _createElementVNode(\"span\", _hoisted_107, _toDisplayString(entry.card.category), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"mt-1 text-[10px] text-dungeon-paper/70 truncate\",\n                                                            title: entry.card.description\n                                                        }, _toDisplayString(entry.card.description), 9 /* TEXT, PROPS */, _hoisted_108)\n                                                    ]),\n                                                    _cache[70] || (_cache[70] = _createElementVNode(\"span\", { class: \"text-[10px] text-red-300/85 shrink-0 self-center\" }, \"\", -1 /* CACHED */))\n                                                ], 8 /* PROPS */, _hoisted_103));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(selectedTestDeckCards).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_109, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_110, [\n                                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(9, (idx) => {\n                                                return _createElementVNode(\"div\", {\n                                                    key: `deck-slot-${idx}`,\n                                                    class: _normalizeClass([\"h-2 rounded border\", idx <= _unref(selectedTestDeck).length\n                                                            ? 'bg-dungeon-gold/70 border-dungeon-gold/60'\n                                                            : 'bg-black/20 border-dungeon-brown/40'])\n                                                }, null, 2 /* CLASS */);\n                                            }), 64 /* STABLE_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_111, [\n                                        _createElementVNode(\"div\", _hoisted_112, [\n                                            _createElementVNode(\"div\", _hoisted_113, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(cardCategoryTabsForTest), (category) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `card-tab-${category}`,\n                                                        class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedCardCategoryTab) === category\n                                                                ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                        onClick: ($event) => (selectedCardCategoryTab.value = category)\n                                                    }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_114));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredCardCategoryGroupsForTest), (group) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: `card-category-${group.category}`,\n                                                    class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_115, [\n                                                        _createElementVNode(\"h4\", _hoisted_116, _toDisplayString(group.category), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_117, _toDisplayString(group.cards.length) + \" \", 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_118, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.cards, (card) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `all-card-${group.category}-${card.id}`,\n                                                                class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(selectedTestDeck).length >= 9,\n                                                                onClick: ($event) => (addCardToTestDeck(card.name))\n                                                            }, [\n                                                                _createVNode(DungeonCard, {\n                                                                    card: card,\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]),\n                                                                _cache[71] || (_cache[71] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-dungeon-gold/80\" }, \"\", -1 /* CACHED */))\n                                                            ], 8 /* PROPS */, _hoisted_119));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(filteredCardCategoryGroupsForTest).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_120, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_121, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[24] || (_cache[24] = ($event) => (activeModal.value = null))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: _unref(selectedTestDeck).length !== 9,\n                                            onClick: confirmCombatTestDeck\n                                        }, \"  \", 8 /* PROPS */, _hoisted_122)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createElementVNode(\"div\", _hoisted_123, [\n                                        _cache[72] || (_cache[72] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"2\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_124, \": 9: \" + _toDisplayString(_unref(selectedRelicTotalCount)) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_125, [\n                                        _createElementVNode(\"div\", _hoisted_126, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allEnemyNamesForTest), (enemyName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `enemy-${enemyName}`,\n                                                    class: _normalizeClass([\"text-left px-3 py-2 rounded border text-xs transition-colors\", _unref(selectedTestEnemy) === enemyName\n                                                            ? 'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold'\n                                                            : 'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),\n                                                    onClick: ($event) => (selectedTestEnemy.value = enemyName)\n                                                }, _toDisplayString(enemyName), 11 /* TEXT, CLASS, PROPS */, _hoisted_127));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_128, [\n                                        _cache[73] || (_cache[73] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center justify-between\" }, [\n                                            _createElementVNode(\"h4\", { class: \"font-heading text-dungeon-gold text-xs tracking-wider uppercase\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/60\" }, \" MVU `_`\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_129, [\n                                            _createElementVNode(\"div\", _hoisted_130, [\n                                                _createElementVNode(\"div\", _hoisted_131, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicCategoryTabsForTest), (category) => {\n                                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: `relic-tab-${category}`,\n                                                            class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedRelicCategoryTab) === category\n                                                                    ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                    : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                            onClick: ($event) => (selectedRelicCategoryTab.value = category)\n                                                        }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_132));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredRelicCategoryGroupsForTest), (group) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: `relic-category-${group.category}`,\n                                                        class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_133, [\n                                                            _createElementVNode(\"h5\", _hoisted_134, _toDisplayString(group.category), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_135, _toDisplayString(group.relics.length) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_136, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.relics, (relic) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: `test-relic-${group.category}-${relic.id}`,\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#1a0f08]/70 p-2\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_137, [\n                                                                        _createElementVNode(\"div\", _hoisted_138, [\n                                                                            _createElementVNode(\"div\", _hoisted_139, _toDisplayString(relic.name), 1 /* TEXT */),\n                                                                            _createElementVNode(\"div\", _hoisted_140, _toDisplayString(relic.rarity), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_141, [\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold\",\n                                                                                onClick: ($event) => (decreaseSelectedRelic(relic.name))\n                                                                            }, \" - \", 8 /* PROPS */, _hoisted_142),\n                                                                            _createElementVNode(\"span\", _hoisted_143, _toDisplayString(getSelectedTestRelicCount(relic.name)), 1 /* TEXT */),\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown\",\n                                                                                onClick: ($event) => (increaseSelectedRelic(relic.name))\n                                                                            }, \" + \", 8 /* PROPS */, _hoisted_144)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_145, _toDisplayString(relic.effect), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (_unref(filteredRelicCategoryGroupsForTest).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_146, \"  \"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"label\", _hoisted_147, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event) => (_isRef(combatTestStartAt999) ? (combatTestStartAt999).value = $event : null)),\n                                            type: \"checkbox\",\n                                            class: \"accent-amber-500\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelCheckbox, _unref(combatTestStartAt999)]\n                                        ]),\n                                        _cache[74] || (_cache[74] = _createElementVNode(\"span\", null, \" 999  HP/MP=999\", -1 /* CACHED */))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_148, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[26] || (_cache[26] = ($event) => (combatTestStep.value = 'deck'))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: !_unref(selectedTestEnemy),\n                                            onClick: confirmCombatTestEnemyAndStart\n                                        }, \"  \", 8 /* PROPS */, _hoisted_149)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Save/Load Panel \"),\n                _createVNode(SaveLoadPanel, {\n                    \"is-open\": _unref(gameStore).isSaveLoadOpen,\n                    entries: _unref(gameStore).saveEntries,\n                    onClose: _cache[28] || (_cache[28] = ($event) => (_unref(gameStore).isSaveLoadOpen = false))\n                }, null, 8 /* PROPS */, [\"is-open\", \"entries\"]),\n                _createCommentVNode(\" Variable Update Viewer \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(isVariableUpdateOpen),\n                    onClose: _cache[29] || (_cache[29] = ($event) => (isVariableUpdateOpen.value = false))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(gameStore).variableUpdateText)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_150, [\n                                _createElementVNode(\"pre\", _hoisted_151, _toDisplayString(_unref(gameStore).variableUpdateText), 1 /* TEXT */)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_152, \" <UpdateVariable>  <update> \"))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Shop Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showShopView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_153, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(shopBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_154),\n                                _cache[76] || (_cache[76] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/22\" }, null, -1 /* CACHED */)),\n                                (!_unref(isMerchantDefeated))\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 0,\n                                        src: _unref(shopMerchantPortraitUrl),\n                                        class: \"pointer-events-none absolute left-0 bottom-0 z-[99] h-[92vh] max-h-[1216px] w-auto object-contain\",\n                                        alt: \"\"\n                                    }, null, 8 /* PROPS */, _hoisted_155))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"div\", _hoisted_156, [\n                                    _createElementVNode(\"div\", _hoisted_157, [\n                                        _cache[75] || (_cache[75] = _createElementVNode(\"div\", { class: \"shop-panel-head\" }, [\n                                            _createElementVNode(\"div\", { class: \"font-heading text-xl text-amber-100\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_158, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(shopProducts), (item) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: item.key,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"shop-item-card\", { 'is-sold': item.sold }]),\n                                                    disabled: item.sold || _unref(shopBuying),\n                                                    onClick: ($event) => (buyShopProduct(item)),\n                                                    onMouseenter: ($event) => (showShopProductTooltip($event, item)),\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: ($event) => (showShopProductTooltip($event, item)),\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: ($event) => (handleShopProductTouchStart($event, item)),\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_160, [\n                                                        _createVNode(_unref(Box), { class: \"shop-item-icon\" })\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_161, [\n                                                        _createVNode(_unref(Coins), { class: \"size-3.5\" }),\n                                                        _createElementVNode(\"span\", null, _toDisplayString(item.finalPrice), 1 /* TEXT */)\n                                                    ])\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_159));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(shopProducts).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_162, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_163, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-rob-btn px-5 py-2 font-ui text-xs tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing) || _unref(isMerchantDefeated),\n                                                style: _normalizeStyle({ opacity: _unref(shopRobBtnOpacity) }),\n                                                onClick: handleShopRobClick\n                                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_164),\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-exit-btn px-7 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing),\n                                                onClick: exitShop\n                                            }, \"  \", 8 /* PROPS */, _hoisted_165)\n                                        ])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Treasure Chest Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showChestView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_166, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(chestBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\",\n                                    onLoad: handleChestBgLoaded\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_167),\n                                (_unref(chestStage) === 'opened')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_168, [\n                                        _createElementVNode(\"div\", _hoisted_169, [\n                                            (_unref(chestRewardRelic) && _unref(chestRewardVisible))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"pointer-events-auto chest-reward-btn\", { 'is-collected': _unref(chestRewardCollected) }]),\n                                                    disabled: _unref(chestCollecting) || _unref(chestRewardCollected),\n                                                    onClick: collectChestReward,\n                                                    onMouseenter: showChestRewardTooltip,\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: showChestRewardTooltip,\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: handleChestRewardTouchStart,\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createVNode(_unref(Box), { class: \"chest-reward-icon\" })\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_170))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_171, [\n                                            _createElementVNode(\"div\", _hoisted_172, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(chestPortalChoices), (portal, i) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `chest-portal-${i}`,\n                                                        class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                        style: _normalizeStyle({\n                                                            backgroundColor: portal.bgColor,\n                                                            borderColor: portal.borderColor,\n                                                            boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                        }),\n                                                        disabled: _unref(chestCollecting),\n                                                        onClick: ($event) => (handleChestPortalClick(portal))\n                                                    }, [\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                            style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                        }, null, 4 /* STYLE */),\n                                                        _createElementVNode(\"span\", _hoisted_174, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                            style: _normalizeStyle({ color: portal.textColor })\n                                                        }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                            style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                        }, null, 4 /* STYLE */)\n                                                    ], 12 /* STYLE, PROPS */, _hoisted_173));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(chestStage) === 'closed')\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 1,\n                                        type: \"button\",\n                                        \"aria-label\": \"\",\n                                        class: \"absolute left-1/2 top-1/2 h-[42vh] max-h-[360px] min-h-[220px] w-[36vw] max-w-[540px] min-w-[260px] -translate-x-1/2 -translate-y-1/2 cursor-pointer rounded-2xl border-0 bg-transparent p-0 opacity-0\",\n                                        disabled: _unref(chestRolling),\n                                        onClick: handleChestCenterClick\n                                    }, null, 8 /* PROPS */, _hoisted_175))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Victory Card Reward Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showVictoryRewardView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_176, [\n                                _createElementVNode(\"div\", _hoisted_177, [\n                                    _createElementVNode(\"div\", _hoisted_178, [\n                                        _createElementVNode(\"div\", _hoisted_179, [\n                                            _createElementVNode(\"div\", null, [\n                                                _cache[77] || (_cache[77] = _createElementVNode(\"div\", { class: \"font-heading text-xl text-dungeon-gold\" }, \"\", -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_180, _toDisplayString(_unref(victoryRewardStage) === 'pick' ? ' 1 ' : '9'), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/75 hover:border-dungeon-gold/50\",\n                                                disabled: _unref(rewardApplying),\n                                                onClick: exitVictoryRewardFlow\n                                            }, \"  \", 8 /* PROPS */, _hoisted_181)\n                                        ]),\n                                        (_unref(victoryRewardStage) === 'pick')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_182, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(victoryRewardOptions), (card) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `reward-option-${card.id}`,\n                                                        type: \"button\",\n                                                        class: \"rounded-lg border border-dungeon-brown/50 bg-[#160d08]/75 p-3 transition-all hover:border-dungeon-gold/60 hover:scale-[1.01]\",\n                                                        onClick: ($event) => (pickVictoryRewardCard(card))\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_184, [\n                                                            _createVNode(DungeonCard, {\n                                                                card: card,\n                                                                disabled: \"\"\n                                                            }, null, 8 /* PROPS */, [\"card\"])\n                                                        ]),\n                                                        _cache[78] || (_cache[78] = _createElementVNode(\"div\", { class: \"mt-2 text-center text-xs text-dungeon-gold/90\" }, \"\", -1 /* CACHED */))\n                                                    ], 8 /* PROPS */, _hoisted_183));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createElementVNode(\"div\", _hoisted_185, [\n                                                    _cache[79] || (_cache[79] = _createElementVNode(\"div\", { class: \"text-xs text-dungeon-paper/70 mb-2\" }, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_186, [\n                                                        (_unref(selectedVictoryRewardCard))\n                                                            ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                key: 0,\n                                                                card: _unref(selectedVictoryRewardCard),\n                                                                disabled: \"\"\n                                                            }, null, 8 /* PROPS */, [\"card\"]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                (_unref(rewardReplaceEntries).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_187, [\n                                                        _cache[80] || (_cache[80] = _createElementVNode(\"div\", { class: \"text-sm text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"button\", {\n                                                            type: \"button\",\n                                                            class: \"mt-3 px-4 py-2 rounded border border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10 disabled:opacity-50\",\n                                                            disabled: _unref(rewardApplying),\n                                                            onClick: _cache[30] || (_cache[30] = ($event) => (replaceDeckCardWithReward(0)))\n                                                        }, \"  \", 8 /* PROPS */, _hoisted_188)\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                (_unref(rewardReplaceEntries).length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_189, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(rewardReplaceEntries), (entry) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `reward-replace-${entry.idx}`,\n                                                                type: \"button\",\n                                                                class: \"rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(rewardApplying),\n                                                                onClick: ($event) => (replaceDeckCardWithReward(entry.idx))\n                                                            }, [\n                                                                _createElementVNode(\"div\", _hoisted_191, \" \" + _toDisplayString(entry.idx + 1), 1 /* TEXT */),\n                                                                _createElementVNode(\"div\", _hoisted_192, [\n                                                                    (entry.card)\n                                                                        ? (_openBlock(), _createBlock(DungeonCard, {\n                                                                            key: 0,\n                                                                            card: entry.card,\n                                                                            disabled: \"\"\n                                                                        }, null, 8 /* PROPS */, [\"card\"]))\n                                                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_193, _toDisplayString(entry.name || ''), 1 /* TEXT */))\n                                                                ])\n                                                            ], 8 /* PROPS */, _hoisted_190));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Combat Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showCombat))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_194, [\n                                _createVNode(CombatView, {\n                                    class: \"w-full h-full\",\n                                    \"enemy-name\": _unref(combatEnemyName),\n                                    \"player-deck\": _unref(resolvedDeck),\n                                    \"player-relics\": _unref(combatRelicMap),\n                                    \"test-start-at-999\": _unref(combatTestStartAt999CurrentBattle),\n                                    \"initial-player-stats\": {\n                                        hp: _unref(displayHp),\n                                        maxHp: _unref(displayMaxHp),\n                                        mp: _unref(displayMp),\n                                        minDice: _unref(displayMinDice) || 1,\n                                        maxDice: _unref(displayMaxDice) || 6,\n                                        effects: [{ type: _unref(EffectType).MANA_SPRING, stacks: 1, polarity: 'buff' }],\n                                    },\n                                    onEndCombat: handleCombatEnd,\n                                    onOpenDeck: _cache[31] || (_cache[31] = ($event) => (activeModal.value = 'deck')),\n                                    onOpenRelics: _cache[32] || (_cache[32] = ($event) => (activeModal.value = 'relics'))\n                                }, null, 8 /* PROPS */, [\"enemy-name\", \"player-deck\", \"player-relics\", \"test-start-at-999\", \"initial-player-stats\"]),\n                                _createCommentVNode(\" Exit combat button \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm\",\n                                    onClick: _cache[33] || (_cache[33] = ($event) => (showCombat.value = false))\n                                }, \"   \")\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameView.vue?vue&type=style&index=0&id=d89a51be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d89a51be\"]])\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"play\", [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"z-10 flex flex-col items-center space-y-12\" };\nconst _hoisted_2 = { class: \"flex flex-col space-y-4 w-64\" };\nconst _hoisted_3 = {\n    disabled: \"\",\n    class: \"group px-8 py-3 bg-black/50 border border-dungeon-brown text-gray-600 font-heading tracking-widest cursor-not-allowed flex items-center justify-center space-x-2\"\n};\nimport { Maximize, Play, Star } from 'lucide-vue-next';\n\nimport { ref, nextTick, onMounted, onBeforeUnmount } from 'vue';\nconst BACKGROUND_FADE_MS = 700;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    emits: [\"start\", \"toggleFullscreen\"],\n    setup(__props) {\n        const isVisible = ref(false);\n        const splashBackgrounds = [\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF1.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF2.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF3.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF4.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF5.png',\n        ];\n        const currentBackgroundUrl = ref(splashBackgrounds[0]);\n        const incomingBackgroundUrl = ref(null);\n        const outgoingBackgroundUrl = ref(null);\n        const isIncomingVisible = ref(false);\n        const isOutgoingVisible = ref(true);\n        const isBackgroundTransitioning = ref(false);\n        let backgroundFadeTimer = null;\n        let backgroundTransitionToken = 0;\n        const pickRandomBackground = (exclude) => {\n            const candidates = exclude\n                ? splashBackgrounds.filter((url) => url !== exclude)\n                : splashBackgrounds;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? splashBackgrounds[0];\n        };\n        const preloadImage = (url) => new Promise((resolve) => {\n            let settled = false;\n            const finish = () => {\n                if (settled)\n                    return;\n                settled = true;\n                resolve();\n            };\n            const img = new Image();\n            img.onload = finish;\n            img.onerror = finish;\n            img.src = url;\n            setTimeout(finish, 1200);\n        });\n        const switchBackground = async () => {\n            if (isBackgroundTransitioning.value)\n                return;\n            const nextUrl = pickRandomBackground(currentBackgroundUrl.value);\n            if (nextUrl === currentBackgroundUrl.value)\n                return;\n            const token = ++backgroundTransitionToken;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n            await preloadImage(nextUrl);\n            if (token !== backgroundTransitionToken)\n                return;\n            isBackgroundTransitioning.value = true;\n            outgoingBackgroundUrl.value = currentBackgroundUrl.value;\n            incomingBackgroundUrl.value = nextUrl;\n            isOutgoingVisible.value = true;\n            isIncomingVisible.value = false;\n            await nextTick();\n            await new Promise((resolve) => requestAnimationFrame(() => requestAnimationFrame(() => resolve())));\n            if (token !== backgroundTransitionToken)\n                return;\n            isIncomingVisible.value = true;\n            isOutgoingVisible.value = false;\n            backgroundFadeTimer = setTimeout(() => {\n                if (token !== backgroundTransitionToken)\n                    return;\n                currentBackgroundUrl.value = nextUrl;\n                incomingBackgroundUrl.value = null;\n                outgoingBackgroundUrl.value = null;\n                isBackgroundTransitioning.value = false;\n                backgroundFadeTimer = null;\n            }, BACKGROUND_FADE_MS);\n        };\n        onMounted(() => {\n            currentBackgroundUrl.value = pickRandomBackground();\n            isVisible.value = true;\n        });\n        onBeforeUnmount(() => {\n            backgroundTransitionToken += 1;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000\", _unref(isVisible) ? 'opacity-100' : 'opacity-0']),\n                style: { aspectRatio: '16/9' }\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat\",\n                    style: _normalizeStyle({ backgroundImage: `url('${_unref(currentBackgroundUrl)}')` })\n                }, null, 4 /* STYLE */),\n                (_unref(incomingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isIncomingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(incomingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(outgoingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isOutgoingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(outgoingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"button\", {\n                    type: \"button\",\n                    class: \"absolute inset-0 z-[1] bg-transparent cursor-pointer focus:outline-none\",\n                    \"aria-label\": \"\",\n                    onClick: switchBackground\n                }),\n                _createCommentVNode(\" Dynamic Background \"),\n                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Ornamental Frame \"),\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Fullscreen Button (Top Right, Small) \"),\n                _createElementVNode(\"button\", {\n                    class: \"absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggleFullscreen')))\n                }, [\n                    _createVNode(_unref(Maximize), { class: \"size-4\" })\n                ]),\n                _createCommentVNode(\" Main Content \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Title Section \"),\n                    _cache[5] || (_cache[5] = _createStaticVNode(\"<div class=\\\"text-center space-y-4 relative\\\"><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50\\\"></div><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50\\\"></div><h1 class=\\\"text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide\\\">  </h1><h2 class=\\\"text-xl md:text-2xl font-body text-[#f9e6a0] tracking-[0.35em] uppercase border-t border-dungeon-brown pt-4 mt-2\\\"> Created by Vin </h2></div>\", 1)),\n                    _createCommentVNode(\" Menu Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('start')))\n                        }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full\" }, null, -1 /* CACHED */)),\n                            _createVNode(_unref(Play), { class: \"size-5 text-dungeon-gold group-hover:scale-110 transition-transform\" }),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold\" }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"button\", _hoisted_3, [\n                            _createVNode(_unref(Star), { class: \"size-4\" }),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"w-full relative\" };\nimport GameView from './components/GameView.vue';\nimport SplashScreen from './components/SplashScreen.vue';\nimport { toggleFullScreen } from './fullscreen';\nimport { useGameStore } from './gameStore';\n\nimport { ref, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const appState = ref('SPLASH');\n        const gameStore = useGameStore();\n        /**\n         *  gameStoreMVU\n         */\n        async function startGame() {\n            appState.value = 'GAME';\n            await nextTick();\n            await gameStore.initialize();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Splash Screen \"),\n                _createVNode(_Transition, {\n                    name: \"scene-fade\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(appState) === 'SPLASH')\n                            ? (_openBlock(), _createBlock(SplashScreen, {\n                                key: \"splash\",\n                                onStart: startGame,\n                                onToggleFullscreen: _unref(toggleFullScreen)\n                            }, null, 8 /* PROPS */, [\"onToggleFullscreen\"]))\n                            : (_openBlock(), _createBlock(GameView, {\n                                key: \"game\",\n                                onBackToSplash: _cache[0] || (_cache[0] = ($event) => (appState.value = 'SPLASH'))\n                            }))\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=329e49cc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-329e49cc\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './styles.css';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","hasA11yProp","prop","startsWith","isEmptyString","value","mergeClasses","classes","filter","className","index","array","Boolean","trim","indexOf","join","toKebabCase","string","replace","toLowerCase","toPascalCase","camelCase","match","p1","p2","toUpperCase","toCamelCase","charAt","slice","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","slots","h","Number","class","default","map","child","createLucideIcon","iconName","attrs","Book","d","Lock","x","y","rx","ry","Settings","cx","cy","r","Scroll","Box","Maximize","BookOpen","FileText","Send","ChevronDown","Activity","Dices","Coins","CardType","EffectType","GamePhase","CombatPhase","id","type","PHYSICAL","category","rarity","manaCost","calculation","multiplier","addition","damageLogic","mode","scale","scaleAddition","hitCount","traits","combo","reroll","draw","cardEffects","description","MAGIC","FUNCTION","kind","effectType","ARMOR","valueMode","DODGE","BURN","fixedValue","VULNERABLE","BARRIER","BIND","restrictedTypes","DEVOUR","POISON","COLD","CHARGE","AMBUSH","SHOCK","CORROSION","CURSE","destroyOnClashWin","insertCardsToEnemyDeck","CARD_REGISTRY","Map","getCardByName","get","getAllCards","values","EFFECT_REGISTRY","polarity","timings","stackable","maxStacks","POISON_AMOUNT","BLEED","REGEN","IGNITE_AURA","STUN","NON_LIVING","NON_ENTITY","MAX_HP_REDUCTION","POINT_GROWTH_BIG","POINT_GROWTH_SMALL","MANA_DRAIN","MANA_SPRING","SWARM","INDOMITABLE","PEEP_FORBIDDEN","BLIND_ASH","COGNITIVE_INTERFERENCE","MEMORY_FOG","SILENCE","STURDY","FLAME_ATTACH","POISON_ATTACH","TOXIN_SPREAD","FROST_ATTACH","BLOODBLADE_ATTACH","LIGHTNING_ATTACH","ELEMENTAL_DEBUFF_TYPES","findEffect","entity","effects","find","e","hasEffect","some","stacks","getEffectStacks","effect","applyEffect","options","normalizedStacks","Math","max","floor","def","existing","nextStacks","maxReducible","maxHp","min","hp","lockDecayThisTurn","instance","undefined","source","push","removeEffect","reduceEffectStacks","amount","processOnTurnStart","result","hpChange","mpChange","trueDamage","isStunned","logs","applyToOpponent","mp","poisonAmount","burnStacks","burnDamage","vulnerableStacks","regenStacks","manaSpringStacks","frostAttachStacks","processOnTurnEnd","poisonStacks","bindEffect","armorEffect","canPlayCard","card","baseRawDice","unplayable","allowed","reason","length","includes","pickCardById","ctx","deck","c","weightedRandom","total","reduce","s","o","weight","roll","random","opt","CARD_BY_ID","buildDeckById","ids","Error","requireCardById","MUXINLAN_CARD","MIMIC_CARD","SWAMP_LURKER_CARD","MIMIC_BUBBLE_CARD","MIST_SPRITE_CARD","VINEWALKER_CARD","SPRING_SPIRIT_CARD","currentFloor","stats","minDice","maxDice","selectCard","flags","muxinlanOpenedWithCunning","sum","t","playerStats","enemyStats","highMpPool","chosen","lowMpPool","hasUsedHeal","normalCards","pool","vinewalkerOpenedWithLurk","STATIC_ENEMY_REGISTRY","ENEMY_NAME_ORDER","keys","getEnemyByName","devourPool","normalPool","getStacks","eff","RELIC_LIST","hooks","onBattleStart","count","self","addLog","modifyFinalPoint","currentPoint","onTurnEnd","side","restoreMana","restored","addStatusEffect","onTurnStart","addArmor","gained","addRerollCharges","getRerollCharges","onDiceClick","consumeRerollCharge","onDeckShuffle","heal","healed","overflow","overflowToArmor","onAfterHitDealt","targetSide","actualDamage","state","onBeforeApplyEffect","onAfterHitTaken","sourceSide","onBeforeBurnDamage","damage","opponent","current","minimum","need","onAfterBurnDamageTaken","add","isPreview","bonus","isTrueDamage","hasRelic","minDamage","turn","RELIC_BY_ID","relic","RELIC_BY_NAME","getAllRelics","FLOOR_MAP","FLOOR_ORDER","FLOOR_NUMBER_MAP","getFloorForArea","area","floorName","areas","Object","entries","toggleFullScreen","document","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","catch","err","console","warn","message","isLeaveOptionLine","line","test","isRebirthOptionLine","extractTag","text","tagName","escapedTagName","regex","RegExp","exec","fullMatch","openTagEnd","firstChar","trimStart","extractTagByPriority","tagNames","content","removeThinkBlock","thinkTagRegex","depth","lastIndex","isClosing","tagStart","tagEnd","filterStreamingTextAfterThinkEnd","closeMatch","removeHtmlComments","extractTucaoBlocks","normalized","normalizeTucaoMarkers","openRegex","closeRegex","cursor","openEnd","contentEnd","parseOptions","optionText","split","parseResponse","cleanText","mainTextRaw","mainText","fallbackTucao","block","part","optionRaw","summary","updateVarBlock","jsonPatch","variableUpdate","allOptions","hasOptionE","hasLeave","hasRebirth","rawText","extractSummary","messageText","useGameStore","STREAMING_ENABLED_KEY","ref","currentSummary","isGenerating","streamingText","useStreaming","raw","localStorage","getItem","readStreamingEnabledSetting","error","isInitialized","variableUpdateText","isEditing","editingText","statData","saveEntries","isSaveLoadOpen","pendingPortalChanges","pendingCombatMvuChanges","pendingStatDataChanges","loadLatestAssistantState","lastId","getLastMessageId","messages","getChatMessages","role","clean","extractMainText","detectOptionE","detectLeave","detectRebirth","extractVariableUpdate","loadStatData","mvuData","Mvu","getMvuData","message_id","_","info","applyParsedResponse","parsed","refreshLocalStatData","JSON","stringify","initialize","async","waitGlobalInitialized","msg","String","sendAction","userInput","oldMvuData","currentPendingPortalChanges","currentPendingCombatChanges","currentPendingStatDataChanges","userMvuDataAfterPortal","baseMvuData","changes","cloneDeep","stat_data","sd","roomType","enemyName","stat","resetRoomCounter","incrementKeys","applyPendingPortalChangesToMvu","userMvuDataAfterCombat","isFinite","addDefeatMark","base","Array","isArray","item","goldDelta","currentGold","delta","applyPendingCombatChangesToMvu","userMvuData","fields","assign","applyPendingStatDataChangesToMvu","createChatMessages","data","refresh","streamListener","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_generation_id","generate","user_input","should_stream","stop","newMvuData","parseMessage","display_data","delta_data","setUseStreaming","enabled","nextEnabled","setItem","persistStreamingEnabledSetting","setPendingPortalChanges","setPendingCombatMvuChanges","setPendingStatDataChanges","loadSaveEntries","messageId","rollbackTo","targetMessageId","idsToDelete","i","deleteChatMessages","toastr","success","rerollCurrent","lastUserMsg","reverse","m","startEdit","saveEdit","currentMvuData","prevMvuData","setChatMessages","replaceMvuData","cancelEdit","updateStatDataFields","nextMvuData","ShieldCheck","Shield","Link2","x1","x2","y1","y2","Skull","Bug","Droplet","Flame","TriangleAlert","Heart","Sparkles","Ban","Zap","Snowflake","Bone","Layers","Battery","Waves","Eye","EyeOff","Brain","Settings2","Trash2","X","calculateFinalDamage","finalPoint","dl","baseValue","calculateRawDamage","cold","attackerEffects","defenderEffects","vuln","sturdy","armor","triggerSwarmReviveIfNeeded","revived","consumeColdAfterDealingDamage","attacker","before","applyDamageToEntity","ae","actual","reviveResult","CircleQuestionMark","Sword","RefreshCcw","Footprints","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","disabled","selected","faceDown","isEnemy","maskLevel","emits","setup","__props","typeColorClass","computed","typeIcon","typeIconColor","typeGradient","displayName","displayDescription","displayTypeText","displayInitial","showManaBadge","_ctx","_cache","onClick","$event","$emit","style","rolling","rollingMin","rollingMax","numberClass","displayValue","interval","gradientId","toString","substr","sizeClass","sm","md","lg","numberSizeClass","borderColor","textColor","numberTextClass","rollRandomInRange","getRollingRange","watch","clearInterval","setInterval","immediate","onUnmounted","offset","points","opacity","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","HF_DATASET_REPO","HF_USER_DIR","HF_MONSTER_DIR","SPEED_SETTING_KEY","initialPlayerStats","playerDeck","playerRelics","testStartAt999","emit","__emit","gameStore","currentFloorNumber","floorFromArea","getFloorNumberForArea","fallback","resolveCurrentFloorNumber","enemyDef","enemyDisplayName","HF_RESOLVE_ROOT","HF_TREE_API_ROOT","IMAGE_EXT_RE","BOSS_FOLDER_NAMES","Set","folderImageCache","folderImagePromiseCache","normalizeRepoPath","path","encodeRepoPath","seg","encodeURIComponent","toResolveUrl","repoPath","pickRandom","items","parseNextLink","linkHeader","fetchFolderImages","repoFolderPath","folder","cached","pending","task","images","nextUrl","response","fetch","ok","json","entry","headers","set","delete","playerPortraitUrl","enemyPortraitUrl","playerPortraitError","enemyPortraitError","portraitLoaderDisposed","resolveRandomPortrait","folderPath","fallbackFilePath","randomPath","bgIsLordFallback","bgImageError","currentArea","currentRoomType","bgImageUrl","suffix","onBgError","aiFlags","reactive","normalizeTestStartStats","cloned","cloneEntityStats","getEffectName","getEffectDescription","createStatusEffectPreview","EFFECT_ICON_COMPONENTS","getEffectIconComponent","effectIconBoxClass","playerArmor","enemyArmor","playerPoisonAmount","enemyPoisonAmount","playerPoisonAmountPercent","enemyPoisonAmountPercent","playerVisibleEffects","enemyVisibleEffects","cloneCardForBattle","ce","cleanseTypes","toBattleDeck","cards","enemyDeck","PASS_CARD","combatState","phase","TURN_START","actionsRemaining","playerBaseDice","enemyBaseDice","playerHand","sort","discardPile","enemyDiscard","enemyIntentCard","enemyPredictedPoint","playerSelectedCard","lastPlayedCard","playerTurnRawDice","enemyTurnRawDice","isRolling","showClashAnimation","shatteringTarget","screenShake","impactShake","overlayOpen","settingsOpen","battleSpeedUp","logsCollapsed","battleResultBanner","endCombatPending","enemyIntentConsumedThisTurn","combatRootEl","effectTooltip","speedMultiplier","combatRootStyle","floatingNumbers","lightningAmbushFirstUseConsumed","player","enemy","previewPlayerDice","previewEnemyDice","playerDiceUiNoise","enemyDiceUiNoise","comboUiMaskBridge","isUiMaskingActive","PLAYER_INPUT","isPlayerDiceObscured","isEnemyDiceObscured","rerollUiNoise","displayPlayerDice","displayEnemyDice","canPlayerRerollDice","playerDiceRerollCharges","playerDiceRerollHint","playerDicePreviewChanged","enemyDicePreviewChanged","playerDiceNumberClass","enemyDiceNumberClass","enemyIntentMaskLevel","playerHandMaskLevel","playerPlayedCardVisual","resolvedPlayerCardVisual","resolvedEnemyCardVisual","resolvedCardVisualEntries","visual","hoverPreviewTimer","enemyDicePreviewTimer","effectTooltipLongPressTimer","effectTooltipAutoHideTimer","floatingNumberId","handCardKeySeed","playerPlayedCardVisualId","resolvedCardVisualId","animationStopToken","endCombatSequenceToken","enemyManaLackHintTurn","handCardKeys","WeakMap","invalidCardShakeKeys","NO_RELIC_MOD","globalMultiplier","globalAddition","activePlayerRelics","aggregated","from","a","b","localeCompare","resolveRelicMap","relicRuntimeState","getEntityBySide","getRelicRuntimeState","relicId","hasActiveRelic","getActiveRelicCount","changeRerollCharges","forEachPlayerRelic","callback","logRelicMessage","log","addArmorForSide","added","pushFloatingNumber","restoreManaForSide","healForSide","overflowRaw","applyStatusEffectWithRelics","hook","getRelicCount","targetEffectType","targetStacks","applyOptions","shouldAllowStatusEffectWithRelics","createPlayerLifecycleContext","triggerPlayerRelicLifecycleHooks","hookName","triggerPlayerRelicBeforeBurnDamageHooks","currentDamage","triggerPlayerRelicAfterBurnDamageTakenHooks","triggerPlayerRelicHitHooks","hitIndex","attemptedDamage","scaleDuration","ms","wait","Promise","resolve","setTimeout","transitionStyle","transitionDuration","withTransition","playerPlayedCardStyle","entered","left","top","transform","transitionProperty","transitionTimingFunction","resolvedCardVisualInnerClass","variant","showEnemyIntentCard","floatingColors","physical","magic","shield","mana","true","floatingNumbersFor","handCardKey","isCardShaking","has","triggerInvalidCardShake","withoutKey","requestAnimationFrame","next","removed","resolveTargetSide","removeCardsById","cardId","removeSingleCardById","insertCardIntoDeckRandomly","applyPurgeTraitAfterUse","purgeOnUse","destroyOpponentCardByTrait","winnerSide","loserCard","changeManaWithShock","actualDelta","requireEnoughForDecrease","showPositiveFloating","lostMp","label","shockStacks","shockEffect","applyShockOnManaLoss","spendManaWithShock","cost","applyBloodbladeAttachOnClash","applyLightningAttachOnDodge","dodgerSide","applyLifeMaxReduction","sourceTag","sourceLabel","beforeMaxHp","beforeHp","applied","targetLabel","hpLossByCap","applyDodgeSuccessCardBonus","dodgeCard","dodgePoint","dodger","point","actualHeal","beforeMp","actualRestore","applyToxinSpreadOnPhysicalPlay","spreadOwnerSide","spreadStacks","applyAmbushOnCardPlay","ambushOwnerSide","ambushOwner","withFirstUseLightningAmbushBonus","shouldConsume","consume","shouldAnnounce","announce","boosted","poisonAmountImmediateCheckRunning","applyImmediatePoisonAmountLethalCheck","poisonLogs","poisonLog","applyHitAttachEffects","defenderSide","flameStacks","consumeChargeOnRoll","rolled","chargeStacks","clearDicePreview","clearTimeout","clearPlayerPlayedCard","stopAllCardAnimations","getCardFinalPoint","baseDice","defender","relicModifiers","calculateFinalPoint","entityEffects","getCardPreviewPoint","handlePlayerCardHoverEnd","handlePlayerCardTouchEnd","rollDiceInRange","low","high","handlePlayerDiceClick","chargesBeforeHooks","rerolled","currentDice","after","showEnemyDicePreview","preview","previewCard","getEnemyIntentFinalPoint","hideEnemyDicePreview","handleEnemyDiceHoverStart","handleEnemyDiceHoverEnd","handleEnemyDiceTouchStart","handleEnemyDiceTouchEnd","clearEffectTooltipTimers","showEffectTooltipForTarget","align","rootRect","getBoundingClientRect","rect","right","showEffectTooltip","event","currentTarget","hideEffectTooltip","handleEffectTouchStart","handleEffectTouchEnd","sign","duration","colorClass","leftOffset","topOffset","notifyEnemyManaInsufficient","pushFloatingText","relicSummary","onMounted","playerUrl","enemyFolderPath","enemyFallback","shouldPreferFolder","enemyUrl","folderImages","randomEnemy","initPortraitUrls","drawCards","currentDeck","currentDiscard","discard","drawn","pop","newDeck","newDiscard","handCardClass","isSelected","opponentSide","turnStartLogs","burnDamageTaken","shownTrueDamage","burnIsTrueDamage","growthBigStacks","growthSmallStacks","burnLog","burnMatch","rawBurnDamage","burnResult","pendingBurnDamage","armorStacks","absorbed","hpBefore","hpDelta","pendingTrueDamage","reviveLog","l","DRAW_PHASE","pRawRoll","eRawRoll","pRoll","eRoll","eCard","selectedCard","idx","check","selectEnemyCard","handleCardSelect","handIdx","played","splice","token","showPlayerPlayedCard","RESOLUTION","handleSkipTurn","resolveCombat","pCard","pDice","eDice","t1","t2","resolvedPlayerCard","resolvedEnemyCard","shouldClash","playerSkippedTurn","enemySkippedTurn","resolvedPlayerDice","resolvedEnemyDice","rerollByTrait","targetStats","pClashPoint","eClashPoint","clearBurnForSide","pSuccess","eSuccess","resultMsg","clashWinner","successfulDodger","executeCard","opponentSkippedTurn","slot","impactDelay","animDuration","playResolvedCardAnimation","finalizeCardExecution","toInsert","cardName","inserted","battleCard","applyInsertTrait","syncCurrentPointForUi","nextPoint","applyCardEffects","targetKey","targetEntity","healAmount","restoreAmount","manaResult","abs","cleanseTargets","et","removedStacks","coldStacks","currentElementals","picked","currentCorrosion","addStacks","selfElementals","burned","burnStacksOnDefender","totalHitCount","hit","cardForCalculation","customDamage","dmgLogs","applyLogs","hitPrefix","damageLogColorClass","damageKind","coldLogs","coldLog","queue","deferredEnemyAction","enemyAction","typePriority","every","action","all","pEndLogs","eEndLogs","pHp","eHp","win","WIN","LOSE","runEndCombatSequence","ref_key","src","alt","onError","args","DungeonCard","onMouseenter","onMouseleave","onTouchstartPassive","onTouchend","onTouchcancel","DungeonDice","popup","animationDuration","onFocus","onBlur","title","innerHTML","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","isOpen","panelClass","to","$slots","RotateCcw","RefreshCw","Pencil","confirmTarget","doRollback","handleReroll","handleEdit","DungeonModal","onClose","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137","_hoisted_138","_hoisted_139","_hoisted_140","_hoisted_141","_hoisted_142","_hoisted_143","_hoisted_144","_hoisted_145","_hoisted_146","_hoisted_147","_hoisted_148","_hoisted_149","_hoisted_150","_hoisted_151","_hoisted_152","_hoisted_153","_hoisted_154","_hoisted_155","_hoisted_156","_hoisted_157","_hoisted_158","_hoisted_159","_hoisted_160","_hoisted_161","_hoisted_162","_hoisted_163","_hoisted_164","_hoisted_165","_hoisted_166","_hoisted_167","_hoisted_168","_hoisted_169","_hoisted_170","_hoisted_171","_hoisted_172","_hoisted_173","_hoisted_174","_hoisted_175","_hoisted_176","_hoisted_177","_hoisted_178","_hoisted_179","_hoisted_180","_hoisted_181","_hoisted_182","_hoisted_183","_hoisted_184","_hoisted_185","_hoisted_186","_hoisted_187","_hoisted_188","_hoisted_189","_hoisted_190","_hoisted_191","_hoisted_192","_hoisted_193","_hoisted_194","BG_OPACITY_KEY","CHEST_BG_OPENED","SidebarIcon","defineComponent","icon","required","active","tooltipSide","activeModal","inputText","isVariableUpdateOpen","isStatusOpen","showCombat","combatEnemyName","showShopView","shopProducts","shopBuying","shopSpentGold","shopPurchasedItems","shopRobClickCount","shopRobbing","showChestView","chestStage","chestRolling","chestRewardRelic","chestRewardCollected","chestCollecting","chestRewardVisible","chestOpenedBgReady","chestPortalChoices","combatTestStep","selectedTestDeck","selectedTestEnemy","selectedTestRelicCounts","selectedCardCategoryTab","selectedRelicCategoryTab","activeCombatContext","pendingCombatNarrative","dispatchedCombatNarrativeIds","showVictoryRewardView","victoryRewardStage","victoryRewardOptions","selectedVictoryRewardCard","rewardApplying","relicTooltip","combatTestStartAt999","combatTestStartAt999CurrentBattle","chestMimicTimer","chestRewardFadeTimer","shopRobTimer","relicTooltipLongPressTimer","relicTooltipAutoHideTimer","bgArea","bgRoomType","bgOverlayOpacity","parseFloat","v","chestBackgroundUrl","allCardsForTest","CATEGORY_ORDER","compareCategory","orderA","orderB","cardCategoryGroupsForTest","grouped","cardCategoryTabsForTest","group","filteredCardCategoryGroupsForTest","getMagicBookCoverUrl","bookName","carryableMagicBookNames","rawCarriedMagicBooks","carriedMagicBooks","available","carriedMagicBookSet","selectableRelicPool","categorySet","muxinlanFavor","roles","safe","shopDiscountRate","shopRobBtnOpacity","toFixed","parseMerchantDefeatedValue","isMerchantDefeated","canEditMagicBooks","magicBookSidebarIcon","isUpdatingMagicBooks","openMagicBookModal","cardByNameForTest","rewardCardPool","filtered","rewardReplaceEntries","selectedTestDeckCards","allEnemyNamesForTest","baseRelicsForTest","categoryDiff","relicCategoryGroupsForTest","relics","relicCategoryTabsForTest","filteredRelicCategoryGroupsForTest","tabs","getCardTypeBadgeClass","getCardCategoryStripClass","resolvedDeck","skills","n","relicEntries","getRelicByName","chestRewardEntry","clearRelicTooltipTimers","showRelicTooltipForTarget","window","innerWidth","showRelicTooltip","hideRelicTooltip","handleRelicTouchStart","handleRelicTouchEnd","showChestRewardTooltip","handleChestRewardTouchStart","combatRelicMap","modal","editable","selectedRelicTotalCount","textSettings","fontSize","lineHeight","fontFamily","containerWidth","isStreamingEnabled","displayText","inlineMarkRegex","headerMarkRegex","tucaoOpenTagRegex","tucaoCloseTagRegex","tucaoExpandedState","isQuotedText","parseInlineSegments","keyPrefix","segments","segmentIndex","markedText","endsWith","innerText","parseTextLines","level","parseStoryLine","storyContentState","lines","tucaoSections","openMatch","sectionIndex","openStart","plainPart","nextCursor","tucaoKey","parsedTucaoLines","tail","parseStoryContent","storyMainLines","storyTucaoSections","sections","validKeys","section","nextState","isTucaoExpanded","displayHp","displayMaxHp","displayMp","displayGold","displayMinDice","displayMaxDice","hpPercent","mpPercent","handleSendInput","REBIRTH_STARTER_DECK","toNonNegativeInt","handleRebirthClick","closeShopView","closeChestView","initialMaxHp","initialMp","initialGold","currentSkillPoints","buildRebirthResetFields","ROOM_TYPE_CONFIG","bgColor","glowColor","specialOptionConfig","isTreasureRoomContext","isShopContext","isCombatRoomContext","sanitizeCombatLogLine","buildCombatNarrative","context","ordered","formatCombatLogs","sendCombatNarrativeOnce","narrative","applyMerchantDefeatedShopState","finalPrice","finalizeVictoryRewardFlow","exitVictoryRewardFlow","replaceDeckCardWithReward","getRarityBasePrice","rollShopRarity","toRelicTooltipEntry","showShopProductTooltip","openShopView","clearShopRobTimer","favorForCount","targetCount","usedNames","discountRate","targetRarity","candidates","pickOne","basePrice","ceil","sold","generateShopProducts","buildNextRelicInventory","pickedRelic","rawRelics","nextRelics","exitShop","purchased","lootedText","report","purchasedText","handleShopRobClick","clearChestMimicTimer","clearChestRewardFadeTimer","handleChestBgLoaded","collectChestReward","handleChestCenterClick","reward","candidatePool","rarityRoll","rarityPool","pickChestRewardRelic","generated","generatePortals","availableRoomTypes","getAvailablePortalRoomTypes","shuffle","rt","isFloorTransition","PORTAL_ROOM_VISUALS","generateChestLeavePortals","handleSpecialOption","pickBattleMonsterByArea","warning","startCombatFromSpecialOption","FLOOR_MONSTER_CONFIG","common","uniqueByArea","COMMON_MONSTER_RATE_BY_FLOOR","arr","config","commonPool","uniquePool","commonRate","PORTAL_ROOM_TYPES","TRAP_POOL_BY_AREA","ALL_TRAPS","flat","withoutShop","AREA_PORTAL_VISUAL","cachedPortals","cachedPortalFingerprint","j","roomsPassed","isStartArea","targetFloor","getNextFloor","areaName","bossChance","portalChoices","fingerprint","ROOM_STAT_KEY","buildQueuedPortalAction","portal","enterText","actionText","statKey","encounterMonster","trapName","pickTrapByArea","trapHpAfterDamage","pendingStatDataFields","openSaveLoad","openVariableUpdate","getSelectedTestRelicCount","setSelectedTestRelicCount","buildSelectedRelicPayload","openCombatTestBuilder","availableCardNames","availableRelicNames","presetDeck","presetRelicsRaw","presetRelics","confirmCombatTestDeck","confirmCombatTestEnemyAndStart","handleCombatEnd","finalStats","Date","now","hpRaw","hasHp","floorRaw","goldReward","queueCombatMvuSync","startVictoryRewardFlow","onBeforeUnmount","backgroundColor","maxWidth","segment","option","stripped","boxShadow","placeholder","onKeydown","stdDeviation","in","nextBooks","loading","step","number","round","SaveLoadPanel","nextGold","price","onLoad","collectedRelic","mergedPendingStatDataFields","relicName","CombatView","onEndCombat","onOpenDeck","onOpenRelics","Play","Star","isVisible","splashBackgrounds","currentBackgroundUrl","incomingBackgroundUrl","outgoingBackgroundUrl","isIncomingVisible","isOutgoingVisible","isBackgroundTransitioning","backgroundFadeTimer","backgroundTransitionToken","pickRandomBackground","exclude","url","switchBackground","settled","finish","img","Image","onload","onerror","nextTick","aspectRatio","backgroundImage","appState","startGame","SplashScreen","onStart","onToggleFullscreen","GameView","onBackToSplash","$","app","createApp","App","use","mount","on","unmount"],"sourceRoot":""}