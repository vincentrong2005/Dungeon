{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/hasA11yProp.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/isEmptyString.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/mergeClasses.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toKebabCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toPascalCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toCamelCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/Icon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/lock.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/scroll.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/box.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/map.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/maximize.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book-open.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/file-text.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/send.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/activity.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/dices.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/coins.js","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//battle/cardRegistry.ts","src://tavern_helper_template/src//battle/enemyRegistry.ts","src://tavern_helper_template/src//battle/relicRegistry.ts","src://tavern_helper_template/src//fullscreen.ts","src://tavern_helper_template/src//responseParser.ts","src://tavern_helper_template/src//gameStore.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/shield.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/link-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/skull.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bug.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/droplet.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/flame.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/triangle-alert.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/heart.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/ban.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/zap.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/snowflake.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/bone.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/battery.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/waves.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/layers.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/trash-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/x.js","src://tavern_helper_template/src//battle/effects.ts","src://tavern_helper_template/src//battle/algorithms.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sword.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/footprints.js","src://tavern_helper_template/src//components/DungeonCard.vue","webpack://tavern_helper_template/src//components/DungeonCard.vue?fd36","src://tavern_helper_template/src//components/DungeonDice.vue","webpack://tavern_helper_template/src//components/DungeonDice.vue?4d80","webpack://tavern_helper_template/./src//components/CombatView.vue?260e","webpack://tavern_helper_template/src//components/CombatView.vue?359a","src://tavern_helper_template/src//components/DungeonModal.vue","webpack://tavern_helper_template/src//components/DungeonModal.vue?bc30","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/pencil.js","src://tavern_helper_template/src//components/SaveLoadPanel.vue","webpack://tavern_helper_template/src//components/SaveLoadPanel.vue?6d12","webpack://tavern_helper_template/./src//components/GameView.vue?fd3b","webpack://tavern_helper_template/src//components/GameView.vue?b90d","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/play.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/star.js","src://tavern_helper_template/src//components/SplashScreen.vue","webpack://tavern_helper_template/src//components/SplashScreen.vue?b8bd","webpack://tavern_helper_template/./src//App.vue?40f8","webpack://tavern_helper_template/src//App.vue?bf93","src://tavern_helper_template/src//index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasA11yProp };\n//# sourceMappingURL=hasA11yProp.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString };\n//# sourceMappingURL=isEmptyString.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses };\n//# sourceMappingURL=mergeClasses.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { toKebabCase };\n//# sourceMappingURL=toKebabCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { toCamelCase } from './toCamelCase.js';\n\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\n\nexport { toPascalCase };\n//# sourceMappingURL=toPascalCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\n\nexport { toCamelCase };\n//# sourceMappingURL=toCamelCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { hasA11yProp } from './shared/src/utils/hasA11yProp.js';\nimport { isEmptyString } from './shared/src/utils/isEmptyString.js';\nimport { mergeClasses } from './shared/src/utils/mergeClasses.js';\nimport { toKebabCase } from './shared/src/utils/toKebabCase.js';\nimport { toPascalCase } from './shared/src/utils/toPascalCase.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      ),\n      ...!slots.default && !hasA11yProp(props) && { \"aria-hidden\": \"true\" }\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Book = createLucideIcon(\"book\", [\n  [\n    \"path\",\n    {\n      d: \"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20\",\n      key: \"k3hazp\"\n    }\n  ]\n]);\n\nexport { Book as default };\n//# sourceMappingURL=book.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scroll = createLucideIcon(\"scroll\", [\n  [\"path\", { d: \"M19 17V5a2 2 0 0 0-2-2H4\", key: \"zz82l3\" }],\n  [\n    \"path\",\n    {\n      d: \"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3\",\n      key: \"1ph1d7\"\n    }\n  ]\n]);\n\nexport { Scroll as default };\n//# sourceMappingURL=scroll.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Box = createLucideIcon(\"box\", [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"book-open\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"file-text\", [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dices = createLucideIcon(\"dices\", [\n  [\"rect\", { width: \"12\", height: \"12\", x: \"2\", y: \"10\", rx: \"2\", ry: \"2\", key: \"6agr2n\" }],\n  [\n    \"path\",\n    { d: \"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6\", key: \"1o487t\" }\n  ],\n  [\"path\", { d: \"M6 18h.01\", key: \"uhywen\" }],\n  [\"path\", { d: \"M10 14h.01\", key: \"ssrbsk\" }],\n  [\"path\", { d: \"M15 6h.01\", key: \"cblpky\" }],\n  [\"path\", { d: \"M18 9h.01\", key: \"2061c0\" }]\n]);\n\nexport { Dices as default };\n//# sourceMappingURL=dices.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coins = createLucideIcon(\"coins\", [\n  [\"circle\", { cx: \"8\", cy: \"8\", r: \"6\", key: \"3yglwk\" }],\n  [\"path\", { d: \"M18.09 10.37A6 6 0 1 1 10.34 18\", key: \"t5s6rm\" }],\n  [\"path\", { d: \"M7 6h1v4\", key: \"1obek4\" }],\n  [\"path\", { d: \"m16.71 13.88.7.71-2.82 2.82\", key: \"1rbuyh\" }]\n]);\n\nexport { Coins as default };\n//# sourceMappingURL=coins.js.map\n","// \n//    \n// \n\n//   \nexport enum CardType {\n  PHYSICAL = '',\n  MAGIC = '',\n  FUNCTION = '',\n  DODGE = '',\n}\n\nexport type CardRarity = '' | '';\n\n//   \n/**  */\nexport type DamageMode = 'relative' | 'fixed' | 'mixed';\n\n/**\n * \n * - relative:  = FinalPoint * scale + scaleAddition\n * - fixed:     = value\n * - mixed:     = baseValue + FinalPoint * scale + scaleAddition\n */\nexport interface DamageLogic {\n  mode: DamageMode;\n  /** relative / mixed:  += FinalPoint * scale */\n  scale?: number;\n  /** relative / mixed:  += scaleAddition */\n  scaleAddition?: number;\n  /** fixed:  */\n  value?: number;\n  /** mixed:  */\n  baseValue?: number;\n}\n\n//   \nexport type RerollTarget = 'self' | 'enemy' | 'none';\n\nexport interface CardTraits {\n  /**  */\n  combo: boolean;\n  /**  */\n  reroll: RerollTarget;\n  /**  */\n  draw: boolean;\n}\n\n//   \nexport interface CardCalculation {\n  /**  1.0 */\n  multiplier: number;\n  /**  0 */\n  addition: number;\n}\n\n//   \n\n/**  */\nexport type EffectValueMode = 'fixed' | 'point_scale';\n\n/**  */\nexport interface CardEffect {\n  /**  */\n  kind:\n    | 'apply_buff'     //  Buff/Debuff\n    | 'heal'           // \n    | 'restore_mana'   // \n    | 'cleanse';       //  Debuff\n\n  //  apply_buff  \n  /** kind = apply_buff  */\n  effectType?: EffectType;\n  /** self = enemy =  */\n  target?: 'self' | 'enemy';\n  /**  */\n  restrictedTypes?: CardType[];\n\n  //   \n  /** fixed = point_scale = FinalPoint * scale */\n  valueMode: EffectValueMode;\n  /** fixed  */\n  fixedValue?: number;\n  /** point_scale / = FinalPoint * scale */\n  scale?: number;\n\n  //  cleanse  \n  /**  Debuff kind = cleanse  */\n  cleanseTypes?: EffectType[];\n}\n\n//   \nexport interface CardData {\n  id: string;\n  name: string;\n  type: CardType;\n  /**  */\n  category: string;\n  /**  */\n  rarity: CardRarity;\n  /**  Type ==   0 */\n  manaCost: number;\n  /**  */\n  calculation: CardCalculation;\n  /**  */\n  damageLogic: DamageLogic;\n  /** 1 */\n  hitCount?: number;\n  /**  */\n  traits: CardTraits;\n  /**  */\n  cardEffects: CardEffect[];\n  /**  */\n  description: string;\n  /**  */\n  image?: string;\n}\n\n//  /Buff  \nexport enum EffectType {\n  /**    -1 */\n  BARRIER = '',\n  /**    */\n  ARMOR = '',\n  /**    */\n  BIND = '',\n  /**    3 / */\n  DEVOUR = '',\n  /**    */\n  POISON = '',\n  /**    */\n  POISON_AMOUNT = '\\u4e2d\\u6bd2\\u91cf',\n  /**    */\n  BURN = '',\n  /**    */\n  BLEED = '',\n  /**    */\n  VULNERABLE = '',\n  /**    */\n  REGEN = '',\n  /**    */\n  IGNITE_AURA = '',\n  /**    */\n  STUN = '',\n  /**    */\n  CHARGE = '',\n  /**    */\n  COLD = '',\n  /**    */\n  NON_LIVING = '',\n  /**    */\n  MANA_DRAIN = '',\n  /**   + */\n  MANA_SPRING = '',\n  /**   1 */\n  SWARM = '',\n  /**   11 */\n  INDOMITABLE = '',\n}\n\n/**  */\nexport type EffectPolarity = 'buff' | 'debuff' | 'mixed' | 'trait' | 'special';\n\n//   \nexport interface EffectInstance {\n  type: EffectType;\n  /**  /  */\n  stacks: number;\n  /**  */\n  polarity: EffectPolarity;\n  /**  */\n  lockDecayThisTurn?: boolean;\n  /**\n   * \n   *  ['', ''] \n   */\n  restrictedTypes?: CardType[];\n  /** / */\n  source?: string;\n}\n\n//   \nexport enum GamePhase {\n  EXPLORE = 'EXPLORE',\n  COMBAT = 'COMBAT',\n}\n\n//   \nexport enum CombatPhase {\n  /**  */\n  TURN_START = 'TURN_START',\n  /**  */\n  DRAW_PHASE = 'DRAW_PHASE',\n  /**  */\n  INTENT_PREVIEW = 'INTENT_PREVIEW',\n  /**  */\n  PLAYER_INPUT = 'PLAYER_INPUT',\n  /**  */\n  RESOLUTION = 'RESOLUTION',\n  /**  */\n  DISCARD_PHASE = 'DISCARD_PHASE',\n  /**  */\n  TURN_END = 'TURN_END',\n  /**  */\n  WIN = 'WIN',\n  /**  */\n  LOSE = 'LOSE',\n}\n\n//   \nexport interface EntityStats {\n  hp: number;\n  maxHp: number;\n  mp: number;\n  /**  */\n  minDice: number;\n  maxDice: number;\n  /**  */\n  effects: EffectInstance[];\n}\n\n//   \nexport type ClashOutcome = 'player_win' | 'enemy_win' | 'draw' | 'dodge_success' | 'no_clash';\n\nexport interface ClashResult {\n  outcome: ClashOutcome;\n  playerFinalPoint: number;\n  enemyFinalPoint: number;\n  message: string;\n}\n\n//   \nexport interface CombatState {\n  turn: number;\n  phase: CombatPhase;\n  /**  */\n  actionsRemaining: number;\n\n  // \n  playerBaseDice: number;\n  enemyBaseDice: number;\n\n  // \n  playerHand: CardData[];\n  playerDeck: CardData[];\n  discardPile: CardData[];\n\n  // \n  enemyDeck: CardData[];\n  enemyDiscard: CardData[];\n  enemyIntentCard: CardData | null;\n  enemyPredictedPoint: number;\n\n  // \n  playerSelectedCard: CardData | null;\n\n  // \"\"\n  lastPlayedCard: CardData | null;\n\n  // \n  logs: string[];\n}\n\n//   \nexport interface RelicModifiers {\n  /**  */\n  globalMultiplier: number;\n  /**  */\n  globalAddition: number;\n}\n\n//   \nexport interface PointCalculationContext {\n  baseDice: number;\n  card: CardData;\n  entityEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n}\n\n//   \nexport interface DamageCalculationContext {\n  finalPoint: number;\n  card: CardData;\n  attackerEffects: EffectInstance[];\n  defenderEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n  /**  */\n  isTrueDamage?: boolean;\n}\n\n//   AI  \n\n/**  AI    */\nexport interface EnemyAIContext {\n  /**  effects */\n  enemyStats: Readonly<EntityStats>;\n  /**  effects */\n  playerStats: Readonly<EntityStats>;\n  /**  */\n  deck: CardData[];\n  /**  */\n  turn: number;\n  /**\n   * \n   *  { hasUsedHeal: false } \n   */\n  flags: Record<string, any>;\n}\n\n/**\n * \n * \n * \n */\nexport type EnemyAISelectCard = (ctx: EnemyAIContext) => CardData;\n\n/**  */\nexport interface EnemyDefinition {\n  /**  */\n  name: string;\n  /**  */\n  stats: EntityStats;\n  /**  */\n  deck: CardData[];\n  /**  AI  */\n  selectCard: EnemyAISelectCard;\n}\n","// \n//    \n//  UI  MVU  _string[]\n//   getCardByName()  CardData\n// \n\nimport { CardType, EffectType, type CardData } from '../types';\n\n/**\n * =====================================================================\n * /\n * =====================================================================\n * 1) \n *    -  `CardType.MAGIC`  `manaCost`\n *    - PHYSICAL / FUNCTION / DODGE `manaCost: 0`\n *\n * 2) \n *    - `calculation = { multiplier, addition }`\n *      FinalPoint = floor(BaseDice * multiplier + addition + )\n *    - `damageLogic`\n *      relative: damage = floor(FinalPoint * scale + scaleAddition)\n *      fixed:    damage = floor(value)\n *      mixed:    damage = floor(baseValue + FinalPoint * scale + scaleAddition)\n *\n * 3) +N\n *    - +N `calculation.addition = N`\n *    - +N `damageLogic.scaleAddition = N`\n *       mixed/fixed\n *\n * 4) \n *    - floor\n *\n * 5) \n *    -  `hitCount` 1\n *    -  `hitCount`  UI \n *\n * 6) \n *    - description +N  +N\n * =====================================================================\n */\n\n//   \n\n/**  */\nconst : CardData = {\n  id: 'basic_physical',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +2 */\nconst 2: CardData = {\n  id: 'basic_physical_plus_2',\n  name: '+2',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** +4 */\nconst 4: CardData = {\n  id: 'basic_physical_plus_4',\n  name: '+4',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 4 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+41',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_magic',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'focus_magic_attack',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '3MP*1.51',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.ARMOR,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** +1-2 */\nconst : CardData = {\n  id: 'burn_spark_mark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+1-2',\n};\n\n/** +1+2 */\nconst : CardData = {\n  id: 'burn_tar_splash',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+1+2',\n};\n\n/** 0.5+ */\nconst : CardData = {\n  id: 'burn_scorch_wind',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** -21+1 */\nconst : CardData = {\n  id: 'burn_scorch',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '-21+1',\n};\n\n/** 1+1 */\nconst : CardData = {\n  id: 'burn_flame_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'burn_soul_bolt',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '1+2',\n};\n\n/** *20.6+1 */\nconst : CardData = {\n  id: 'burn_body_lunge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '*20.6+1',\n};\n\n/** *0.81 */\nconst : CardData = {\n  id: 'burn_detonation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 0.8, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*0.81',\n};\n\n/** 2+11 */\nconst : CardData = {\n  id: 'burn_inferno_judgement',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2+11',\n};\n\n/** +2+1 */\nconst : CardData = {\n  id: 'burn_hell_waves',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BARRIER, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+2+1',\n};\n\n/**  CombatView  */\nconst : CardData = {\n  id: 'burn_char_convert',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** 0.5+1 */\nconst : CardData = {\n  id: 'enemy_moth_aphro_powder',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '0.5+1',\n};\n\n/** 0.51 */\nconst : CardData = {\n  id: 'enemy_moth_sensitive_mark',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.COLD, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '0.51',\n};\n\n/** 1 */\nconst : CardData = {\n  id: 'enemy_moth_pheromone',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.CHARGE, target: 'self', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '1',\n};\n\n/** 1 CombatView */\nconst : CardData = {\n  id: 'enemy_moth_swarm_burst',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  rarity: '',\n  manaCost: 6,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '6MP11',\n};\n\n/** 2 */\nconst : CardData = {\n  id: 'enemy_root_tremor_sense',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.ARMOR, target: 'self', valueMode: 'point_scale', scale: 2.0 },\n  ],\n  description: '2',\n};\n\n/** 0.5 */\nconst : CardData = {\n  id: 'enemy_root_lube_secretion',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.POISON, target: 'enemy', valueMode: 'point_scale', scale: 0.5 },\n  ],\n  description: '0.5',\n};\n\n/** 11 */\nconst : CardData = {\n  id: 'enemy_root_infiltrate_climb',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.BIND,\n      target: 'enemy',\n      restrictedTypes: [CardType.PHYSICAL, CardType.DODGE],\n      valueMode: 'fixed',\n      fixedValue: 1,\n    },\n  ],\n  description: '11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_charge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1, scaleAddition: 0 },\n  hitCount: 1,\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_slime_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_heal',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  rarity: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst CARD_REGISTRY: ReadonlyMap<string, CardData> = new Map<string, CardData>([\n  [.name, ],\n  [2.name, 2],\n  [4.name, 4],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getCardByName(name: string): CardData | undefined {\n  return CARD_REGISTRY.get(name);\n}\n\n/**  CardData  */\nexport function resolveCardNames(names: string[]): CardData[] {\n  return names\n    .map((n) => CARD_REGISTRY.get(n))\n    .filter((c): c is CardData => c !== undefined);\n}\n\n/**  */\nexport function getAllCardNames(): string[] {\n  return [...CARD_REGISTRY.keys()];\n}\n\n/**  */\nexport function getAllCards(): CardData[] {\n  return [...CARD_REGISTRY.values()];\n}\n","// \n//    \n//   MVU  _ \n//   getEnemyByName()  EnemyDefinition\n// \n\nimport { EffectType, type EnemyAIContext, type EnemyDefinition } from '../types';\nimport { getCardByName } from './cardRegistry';\n\n//   \n\n/**  */\nfunction pickCard(ctx: EnemyAIContext, name: string) {\n  return ctx.deck.find(c => c.name === name) ?? ctx.deck[0]!;\n}\n\n/**  */\nfunction weightedRandom<T>(options: { value: T; weight: number }[]): T {\n  const total = options.reduce((s, o) => s + o.weight, 0);\n  let roll = Math.random() * total;\n  for (const opt of options) {\n    roll -= opt.weight;\n    if (roll <= 0) return opt.value;\n  }\n  return options[options.length - 1]!.value;\n}\n\n// \n//  \n// \n\n//   \n\nconst : EnemyDefinition = {\n  name: '',\n\n  stats: {\n    hp: 12,\n    maxHp: 12,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.REGEN, stacks: 1, polarity: 'buff' },\n    ],\n  },\n\n  deck: [\n    getCardByName('')!,\n    getCardByName('')!,\n    getCardByName('')!,\n  ],\n\n  /**\n   * AI \n   * - HP > 40%70%  / 30% \n   * - HP   40%flags.hasUsedHeal !== true\n   * - HP  40% /\n   */\n  selectCard(ctx: EnemyAIContext) {\n    const hpRatio = ctx.enemyStats.hp / ctx.enemyStats.maxHp;\n\n    if (hpRatio <= 0.4 && !ctx.flags.hasUsedHeal) {\n      ctx.flags.hasUsedHeal = true;\n      return pickCard(ctx, '');\n    }\n\n    const chosen = weightedRandom([\n      { value: '', weight: 70 },\n      { value: '', weight: 30 },\n    ]);\n    return pickCard(ctx, chosen);\n  },\n};\n\n//   \n\nconst : EnemyDefinition = {\n  name: '',\n\n  stats: {\n    hp: 5,\n    maxHp: 5,\n    mp: 1,\n    minDice: 1,\n    maxDice: 4,\n    effects: [\n      { type: EffectType.MANA_SPRING, stacks: 2, polarity: 'buff' },\n      { type: EffectType.SWARM, stacks: 3, polarity: 'buff' },\n    ],\n  },\n\n  deck: [\n    getCardByName('')!,\n    getCardByName('')!,\n    getCardByName('')!,\n    getCardByName('')!,\n  ],\n\n  /**\n   * AI \n   * - MP >= 6\n   * - MP < 6 /  / \n   */\n  selectCard(ctx: EnemyAIContext) {\n    if (ctx.enemyStats.mp >= 6) {\n      return pickCard(ctx, '');\n    }\n\n    const normalCards = ['', '', ''] as const;\n    const chosen = normalCards[Math.floor(Math.random() * normalCards.length)]!;\n    return pickCard(ctx, chosen);\n  },\n};\n\n//   \n\nconst : EnemyDefinition = {\n  name: '',\n\n  stats: {\n    hp: 8,\n    maxHp: 8,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.SWARM, stacks: 2, polarity: 'buff' },\n    ],\n  },\n\n  deck: [\n    getCardByName('')!,\n    getCardByName('')!,\n    getCardByName('')!,\n  ],\n\n  /** AI  */\n  selectCard(ctx: EnemyAIContext) {\n    const pool = ['', '', ''] as const;\n    const chosen = pool[Math.floor(Math.random() * pool.length)]!;\n    return pickCard(ctx, chosen);\n  },\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst ENEMY_REGISTRY: ReadonlyMap<string, EnemyDefinition> = new Map<string, EnemyDefinition>([\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getEnemyByName(name: string): EnemyDefinition | undefined {\n  return ENEMY_REGISTRY.get(name);\n}\n\n/**  */\nexport function getAllEnemyNames(): string[] {\n  return [...ENEMY_REGISTRY.keys()];\n}\n","import { CardType, EffectType, type CardData, type EntityStats } from '../types';\n\nexport type RelicRarity = '' | '' | '';\nexport type RelicCategory = '' | '';\n\nexport type RelicSide = 'player' | 'enemy';\nexport type RelicFloatKind = 'shield' | 'mana' | 'heal';\n\nexport interface RelicApplyEffectOptions {\n  restrictedTypes?: CardType[];\n  source?: string;\n  lockDecayThisTurn?: boolean;\n}\n\ninterface RelicSharedHookContext {\n  count: number;\n  side: RelicSide;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n  addStatusEffect: (\n    side: RelicSide,\n    effectType: EffectType,\n    stacks: number,\n    options?: RelicApplyEffectOptions,\n  ) => boolean;\n  addArmor: (side: RelicSide, amount: number) => number;\n  restoreMana: (side: RelicSide, amount: number) => number;\n  heal: (\n    side: RelicSide,\n    amount: number,\n    options?: { overflowToArmor?: boolean },\n  ) => { healed: number; overflow: number };\n  addRerollCharges: (side: RelicSide, amount: number) => void;\n  getRerollCharges: (side: RelicSide) => number;\n}\n\nexport interface RelicLifecycleHookContext extends RelicSharedHookContext {}\n\nexport interface RelicPointHookContext {\n  count: number;\n  side: RelicSide;\n  card: CardData;\n  baseDice: number;\n  currentPoint: number;\n  self: EntityStats;\n  opponent: EntityStats;\n  state: Record<string, unknown>;\n  isPreview: boolean;\n  addLog: (message: string) => void;\n  hasRelic: (id: string) => boolean;\n  getRelicCount: (id: string) => number;\n}\n\nexport interface RelicDiceClickHookContext {\n  count: number;\n  side: RelicSide;\n  currentDice: number;\n  minDice: number;\n  maxDice: number;\n  state: Record<string, unknown>;\n  roll: (min: number, max: number) => number;\n  consumeRerollCharge: (side: RelicSide, amount?: number) => boolean;\n  getRerollCharges: (side: RelicSide) => number;\n  addLog: (message: string) => void;\n}\n\nexport interface RelicBeforeApplyEffectHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  effectType: EffectType;\n  stacks: number;\n  source?: string;\n  restrictedTypes?: CardType[];\n}\n\nexport interface RelicBurnDamageHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicAfterBurnDamageTakenHookContext extends RelicSharedHookContext {\n  targetSide: RelicSide;\n  target: EntityStats;\n  turn: number;\n  burnStacks: number;\n  damage: number;\n  isTrueDamage: boolean;\n}\n\nexport interface RelicHitHookContext extends RelicSharedHookContext {\n  sourceSide: RelicSide;\n  targetSide: RelicSide;\n  source: EntityStats;\n  target: EntityStats;\n  card: CardData;\n  finalPoint: number;\n  hitIndex: number;\n  hitCount: number;\n  attemptedDamage: number;\n  actualDamage: number;\n}\n\nexport interface RelicHooks {\n  onBattleStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnStart?: (ctx: RelicLifecycleHookContext) => void;\n  onTurnEnd?: (ctx: RelicLifecycleHookContext) => void;\n  onDeckShuffle?: (ctx: RelicLifecycleHookContext) => void;\n  modifyFinalPoint?: (ctx: RelicPointHookContext) => number;\n  onDiceClick?: (ctx: RelicDiceClickHookContext) => number | null;\n  onBeforeApplyEffect?: (ctx: RelicBeforeApplyEffectHookContext) => boolean | void;\n  onBeforeBurnDamage?: (ctx: RelicBurnDamageHookContext) => void;\n  onAfterBurnDamageTaken?: (ctx: RelicAfterBurnDamageTakenHookContext) => void;\n  onAfterHitDealt?: (ctx: RelicHitHookContext) => void;\n  onAfterHitTaken?: (ctx: RelicHitHookContext) => void;\n}\n\nexport interface RelicData {\n  id: string;\n  name: string;\n  rarity: RelicRarity;\n  category: RelicCategory;\n  effect: string;\n  description: string;\n  hooks?: RelicHooks;\n}\n\nexport interface ResolvedRelicEntry {\n  relic: RelicData;\n  count: number;\n}\n\nconst getStacks = (entity: EntityStats, effectType: EffectType) => (\n  entity.effects.find((eff) => eff.type === effectType)?.stacks ?? 0\n);\n\nconst RELIC_LIST: readonly RelicData[] = [\n  {\n    id: 'lucky_coin_small',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.minDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'lucky_coin_large',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onBattleStart: ({ count, self, addLog }) => {\n        self.maxDice += count;\n        addLog(`[]  +${count}`);\n      },\n    },\n  },\n  {\n    id: 'red_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.PHYSICAL) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'blue_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.MAGIC) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'yellow_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.FUNCTION) return currentPoint;\n        return currentPoint + count;\n      },\n    },\n  },\n  {\n    id: 'green_notebook',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' -1',\n    description: ' -1',\n    hooks: {\n      modifyFinalPoint: ({ card, currentPoint, count }) => {\n        if (card.type !== CardType.DODGE) return currentPoint;\n        return currentPoint - count;\n      },\n    },\n  },\n  {\n    id: 'mana_residue',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 0 +1',\n    description: ' 0 1 ',\n    hooks: {\n      onTurnEnd: ({ count, side, self, restoreMana, addLog }) => {\n        if (self.mp !== 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  0 ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sanctuary_amulet',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        if (addStatusEffect(side, EffectType.INDOMITABLE, count, { source: 'relic:sanctuary_amulet' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onTurnStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'reset_button',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 6 ',\n    description: ' 6 ',\n    hooks: {\n      onBattleStart: ({ count, side, addRerollCharges, getRerollCharges, addLog }) => {\n        const gained = count * 6;\n        addRerollCharges(side, gained);\n        addLog(`[]  ${gained}  ${getRerollCharges(side)}`);\n      },\n      onDiceClick: ({ count, side, minDice, maxDice, roll, consumeRerollCharge, getRerollCharges, addLog }) => {\n        if (count <= 0) return null;\n        if (!consumeRerollCharge(side, 1)) return null;\n        const value = roll(minDice, maxDice);\n        addLog(`[]  ${getRerollCharges(side)} `);\n        return value;\n      },\n    },\n  },\n  {\n    id: 'energy_candy',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onDeckShuffle: ({ count, side, restoreMana, addLog }) => {\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'simple_shield',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 10 ',\n    description: ' 10 ',\n    hooks: {\n      onBattleStart: ({ count, side, addArmor, addLog }) => {\n        const gained = addArmor(side, 10 * count);\n        if (gained > 0) {\n          addLog(`[]  ${gained} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'pure_water',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 8 ',\n    description: ' 8 ',\n    hooks: {\n      onBattleStart: ({ count, side, heal, addLog }) => {\n        const { healed, overflow } = heal(side, 8 * count, { overflowToArmor: true });\n        addLog(`[]  ${healed}  ${overflow} `);\n      },\n    },\n  },\n  {\n    id: 'oily_grease',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2 ',\n    description: ' 2 ',\n    hooks: {\n      onAfterHitDealt: ({ count, side, targetSide, actualDamage, state, addStatusEffect, addLog }) => {\n        if (targetSide === side) return;\n        if (actualDamage <= 0) return;\n        if (state['triggered'] === true) return;\n        state['triggered'] = true;\n        const stacks = 2 * count;\n        if (addStatusEffect(targetSide, EffectType.BURN, stacks, { source: 'relic:oily_grease' })) {\n          addLog(`[]  ${stacks} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'sunglasses',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: ' 1 ',\n    hooks: {\n      onBattleStart: ({ count, side, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        if (addStatusEffect(targetSide, EffectType.STUN, Math.max(1, count), { source: 'relic:sunglasses' })) {\n          addLog('[] ');\n        }\n      },\n      onBeforeApplyEffect: ({ side, targetSide, effectType, addLog }) => {\n        if (targetSide !== side) return;\n        if (effectType !== EffectType.STUN) return;\n        addLog('[] ');\n        return false;\n      },\n    },\n  },\n  {\n    id: 'flame_ring',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterHitTaken: ({ count, side, sourceSide, targetSide, card, addStatusEffect, addLog }) => {\n        if (targetSide !== side) return;\n        if (sourceSide === side) return;\n        if (card.type !== CardType.PHYSICAL) return;\n        if (addStatusEffect(sourceSide, EffectType.BURN, count, { source: 'relic:flame_ring' })) {\n          addLog(`[]  ${count} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'fire_slime',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 2',\n    description: ' 2',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide !== ctx.side) return;\n        if (ctx.damage === 2) return;\n        ctx.damage = 2;\n      },\n    },\n  },\n  {\n    id: 'ember_seed',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBattleStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n      onTurnStart: ({ count, side, opponent, addStatusEffect, addLog }) => {\n        const targetSide: RelicSide = side === 'player' ? 'enemy' : 'player';\n        const current = getStacks(opponent, EffectType.BURN);\n        const minimum = Math.max(1, count);\n        const need = minimum - current;\n        if (need > 0 && addStatusEffect(targetSide, EffectType.BURN, need, { source: 'relic:ember_seed' })) {\n          addLog(`[]  ${minimum} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'phoenix_feather',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' +1',\n    description: ' +1',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, state, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const current = Number(state['nextCardPointBonus'] ?? 0);\n        const add = 1 * count;\n        state['nextCardPointBonus'] = current + add;\n        addLog(`[]  +${current + add}`);\n      },\n      modifyFinalPoint: ({ side, currentPoint, state, isPreview, addLog }) => {\n        if (side !== 'player') return currentPoint;\n        const bonus = Math.max(0, Math.floor(Number(state['nextCardPointBonus'] ?? 0)));\n        if (bonus <= 0) return currentPoint;\n        if (!isPreview) {\n          state['nextCardPointBonus'] = 0;\n          addLog(`[]  +${bonus}`);\n        }\n        return currentPoint + bonus;\n      },\n    },\n  },\n  {\n    id: 'rekindle_core',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: ' 1 ',\n    description: ' 1 ',\n    hooks: {\n      onAfterBurnDamageTaken: ({ count, side, targetSide, damage, restoreMana, addLog }) => {\n        if (targetSide !== side) return;\n        if (damage <= 0) return;\n        const restored = restoreMana(side, count);\n        if (restored > 0) {\n          addLog(`[]  ${restored} `);\n        }\n      },\n    },\n  },\n  {\n    id: 'everlasting_fuel',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.damage <= 0) return;\n        ctx.isTrueDamage = true;\n      },\n    },\n  },\n  {\n    id: 'sun_charm',\n    name: '',\n    rarity: '',\n    category: '',\n    effect: '',\n    description: '*',\n    hooks: {\n      onBeforeBurnDamage: (ctx) => {\n        if (ctx.targetSide === ctx.side && ctx.hasRelic('fire_slime')) {\n          return;\n        }\n        const minDamage = Math.max(1, ctx.turn * Math.max(1, ctx.count));\n        if (ctx.damage >= minDamage) return;\n        ctx.damage = minDamage;\n      },\n    },\n  },\n];\n\nconst RELIC_BY_ID = new Map(RELIC_LIST.map((relic) => [relic.id, relic]));\nconst RELIC_BY_NAME = new Map(RELIC_LIST.map((relic) => [relic.name, relic]));\n\nexport function getAllRelics(): readonly RelicData[] {\n  return RELIC_LIST;\n}\n\nexport function getRelicById(id: string): RelicData | undefined {\n  return RELIC_BY_ID.get(id);\n}\n\nexport function getRelicByName(name: string): RelicData | undefined {\n  return RELIC_BY_NAME.get(name);\n}\n\nexport function getRelicsByCategory(category: RelicCategory): readonly RelicData[] {\n  return RELIC_LIST.filter((relic) => relic.category === category);\n}\n\nexport function resolveRelicMap(raw: Record<string, number> | null | undefined): ResolvedRelicEntry[] {\n  if (!raw || typeof raw !== 'object') return [];\n\n  const aggregated = new Map<string, ResolvedRelicEntry>();\n\n  for (const [key, value] of Object.entries(raw)) {\n    const count = Math.max(0, Math.floor(Number(value ?? 0)));\n    if (!key || count <= 0) continue;\n\n    const relic = RELIC_BY_ID.get(key) ?? RELIC_BY_NAME.get(key);\n    if (!relic) continue;\n\n    const existing = aggregated.get(relic.id);\n    if (existing) {\n      existing.count += count;\n    } else {\n      aggregated.set(relic.id, { relic, count });\n    }\n  }\n\n  return Array.from(aggregated.values()).sort((a, b) => a.relic.name.localeCompare(b.relic.name, 'zh-Hans-CN'));\n}\n","/**  F11 */\nexport function toggleFullScreen(): void {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen().catch((err: Error) => {\n      console.warn(`Fullscreen error: ${err.message}`);\n    });\n  } else {\n    document.exitFullscreen();\n  }\n}\n","/**\n * LLM \n *  AI  XML \n */\n\nexport interface ParsedResponse {\n  /**  <maintext>/<maintxt>/<content>/<> */\n  mainText: string;\n  /** <option>...</option> A-D E  [Leave] */\n  options: string[];\n  /** <sum>...</sum>  */\n  summary: string;\n  /** <UpdateVariable>/<update>  */\n  variableUpdate: string;\n  /** <UpdateVariable>  <JSONPatch>...</JSONPatch>  */\n  jsonPatch: string;\n  /**  */\n  rawText: string;\n  /**  E  */\n  hasOptionE: boolean;\n  /**  [Leave]  */\n  hasLeave: boolean;\n}\n\n/**\n *  XML \n */\nfunction extractTag(text: string, tagName: string): string {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  // \n  const regex = new RegExp(`(?:^|[\\\\r\\\\n]|>)\\\\s*<${escapedTagName}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)</${escapedTagName}>`, 'ig');\n  let match: RegExpExecArray | null;\n\n  while ((match = regex.exec(text)) !== null) {\n    const fullMatch = match[0];\n    const openTagEnd = fullMatch.indexOf('>');\n    if (openTagEnd >= 0) {\n      //  \"<maintext>, <option>\"\n      const afterOpen = fullMatch.slice(openTagEnd + 1).trimStart();\n      const firstChar = afterOpen[0];\n      if (firstChar === ',' || firstChar === '') continue;\n    }\n    return match[1].trim();\n  }\n\n  return '';\n}\n\n/**\n * \n */\nfunction extractTagByPriority(text: string, tagNames: string[]): string {\n  for (const tagName of tagNames) {\n    const content = extractTag(text, tagName);\n    if (content) return content;\n  }\n  return '';\n}\n\n/**\n * \n * <think>, <thinking>, <Think>, <Thinking> \n *  <thinking> ... </think>\n * \n */\nfunction removeThinkBlock(text: string): string {\n  const thinkTagRegex = /<\\s*(\\/?)\\s*(think|thinking)\\b[^>]*>/gi;\n\n  let result = '';\n  let depth = 0;\n  let lastIndex = 0;\n  let match: RegExpExecArray | null;\n\n  while ((match = thinkTagRegex.exec(text)) !== null) {\n    const isClosing = match[1] === '/';\n    const tagStart = match.index;\n    const tagEnd = thinkTagRegex.lastIndex;\n\n    // \n    //  </think>/< /thinking> \n    if (depth === 0 && !isClosing) {\n      result += text.slice(lastIndex, tagStart);\n    }\n\n    if (isClosing) {\n      //  think/thinking \n      if (depth > 0) depth -= 1;\n    } else {\n      depth += 1;\n    }\n\n    lastIndex = tagEnd;\n  }\n\n  // \n  if (depth === 0) {\n    result += text.slice(lastIndex);\n  }\n\n  return result.trim();\n}\n\n/**\n *  HTML \n */\nfunction removeHtmlComments(text: string): string {\n  return text.replace(/<!--[\\s\\S]*?(?:-->|$)/g, '').trim();\n}\n\n/**\n * \n *  \"A. xxx\", \"B. xxx\" \n */\nfunction parseOptions(optionText: string): string[] {\n  if (!optionText) return [];\n  return optionText\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n *  LLM \n */\nexport function parseResponse(text: string): ParsedResponse {\n  // \n  const cleanText = removeThinkBlock(text);\n\n  // \n  const mainTextRaw = extractTagByPriority(cleanText, ['maintext', 'maintxt', 'content', '']);\n  const mainText = removeHtmlComments(mainTextRaw);\n  const optionRaw = extractTag(cleanText, 'option');\n  const summary = extractTag(cleanText, 'sum');\n\n  //  UpdateVariable / update \n  const updateVarBlock = extractTagByPriority(cleanText, ['UpdateVariable', 'update']);\n  const jsonPatch = extractTag(updateVarBlock, 'JSONPatch');\n  const variableUpdate = updateVarBlock || jsonPatch;\n\n  // \n  const allOptions = parseOptions(optionRaw);\n\n  //  E  [Leave]\n  const hasOptionE = allOptions.some(line => /^E\\.\\s/i.test(line));\n  const hasLeave = allOptions.some(line => /leave/i.test(line));\n\n  //  E  [Leave] A-D \n  const normalOptions = allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (/leave/i.test(line)) return false;\n    return true;\n  });\n\n  return {\n    mainText,\n    options: normalOptions,\n    summary,\n    variableUpdate,\n    jsonPatch,\n    rawText: cleanText,\n    hasOptionE,\n    hasLeave,\n  };\n}\n\n/**\n *  <sum> \n * \n */\nexport function extractSummary(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTag(clean, 'sum');\n}\n\n/**\n *  <maintext> \n */\nexport function extractMainText(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  const mainTextRaw = extractTagByPriority(clean, ['maintext', 'maintxt', 'content', '']);\n  return removeHtmlComments(mainTextRaw);\n}\n\n/**\n * <UpdateVariable> / <update>\n */\nexport function extractVariableUpdate(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTagByPriority(clean, ['UpdateVariable', 'update']);\n}\n\n/**\n *  <option>  A-D \n */\nexport function extractOptions(messageText: string): string[] {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (/leave/i.test(line)) return false;\n    return true;\n  });\n}\n\n/**\n *  E \n */\nexport function detectOptionE(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /^E\\.\\s/i.test(line));\n}\n\n/**\n *  [Leave]\n */\nexport function detectLeave(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /leave/i.test(line));\n}\n","// Schema import removed - using raw MVU data directly\nimport { detectLeave, detectOptionE, extractMainText, extractOptions, extractSummary, extractVariableUpdate, parseResponse } from './responseParser';\n/**\n *  Store\n *    user   generate     assistant \n */\nexport const useGameStore = defineStore('game', () => {\n    //   \n    const mainText = ref('');\n    const options = ref([]);\n    const currentSummary = ref('');\n    const isGenerating = ref(false);\n    const streamingText = ref('');\n    const error = ref(null);\n    const isInitialized = ref(false);\n    //   \n    const hasOptionE = ref(false);\n    const hasLeave = ref(false);\n    const variableUpdateText = ref('');\n    //   \n    const isEditing = ref(false);\n    const editingText = ref('');\n    //  MVU  stat_data\n    const statData = ref({});\n    //   \n    const saveEntries = ref([]);\n    const isSaveLoadOpen = ref(false);\n    const pendingPortalChanges = ref(null);\n    function setPendingPortalChanges(changes) {\n        pendingPortalChanges.value = changes;\n    }\n    /**\n     *  MVU  user \n     */\n    function applyPendingPortalChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!changes)\n            return result;\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (changes.area !== undefined)\n            sd._ = changes.area;\n        sd._ = changes.roomType;\n        if (changes.enemyName !== undefined)\n            sd._ = changes.enemyName;\n        if (!sd.$ || typeof sd.$ !== 'object') {\n            sd.$ = {};\n        }\n        const stat = sd.$;\n        if (changes.resetRoomCounter) {\n            stat. = 0;\n        }\n        if (changes.incrementKeys) {\n            for (const key of changes.incrementKeys) {\n                stat[key] = (Number(stat[key]) || 0) + 1;\n            }\n        }\n        return result;\n    }\n    /**\n     *  assistant \n     */\n    async function initialize() {\n        try {\n            await waitGlobalInitialized('Mvu');\n            console.info('[GameStore] MVU initialized');\n            //  assistant \n            const lastId = getLastMessageId();\n            if (lastId >= 0) {\n                loadLatestAssistantState();\n                loadStatData();\n            }\n            isInitialized.value = true;\n            console.info('[GameStore] Initialized successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Init error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     *  assistant \n     */\n    function loadLatestAssistantState() {\n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        if (messages.length > 0) {\n            const lastMsg = messages[messages.length - 1];\n            const text = lastMsg.message;\n            mainText.value = extractMainText(text);\n            options.value = extractOptions(text);\n            currentSummary.value = extractSummary(text);\n            hasOptionE.value = detectOptionE(text);\n            hasLeave.value = detectLeave(text);\n            variableUpdateText.value = extractVariableUpdate(text);\n        }\n    }\n    /**\n     *  MVU stat_data\n     */\n    function loadStatData() {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const mvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema /\n                statData.value = raw;\n                console.info('[GameStore] stat_data loaded from message', lastId);\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] Failed to load stat_data:', err);\n        }\n    }\n    /**\n     * \n     * 1.  MVU \n     * 2.  user \n     * 3.  generate  LLM \n     * 4.  +  MVU \n     * 5.  assistant  MVU \n     * 6. \n     */\n    async function sendAction(userInput) {\n        if (isGenerating.value || !userInput.trim())\n            return;\n        error.value = null;\n        isGenerating.value = true;\n        streamingText.value = '';\n        try {\n            // 1.  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            const currentPendingChanges = pendingPortalChanges.value;\n            // 2.  user  MVU \n            const userMvuData = applyPendingPortalChangesToMvu(oldMvuData, currentPendingChanges);\n            // 3.  user  MVU \n            console.info('[GameStore] Creating user message:', userInput);\n            await createChatMessages([{ role: 'user', message: userInput, data: userMvuData }], { refresh: 'none' });\n            // user \n            pendingPortalChanges.value = null;\n            // 4. \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, _generation_id) => {\n                streamingText.value = text;\n            });\n            // 5.  generate \n            console.info('[GameStore] Generating LLM response...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: true,\n            });\n            console.info('[GameStore] LLM response received, length:', result.length);\n            // \n            streamListener.stop();\n            streamingText.value = '';\n            // 6. \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            // 7.  MVU  user \n            let newMvuData = await Mvu.parseMessage(result, _.cloneDeep(userMvuData));\n            if (!newMvuData) {\n                newMvuData = _.cloneDeep(userMvuData);\n            }\n            else if (!newMvuData.stat_data && userMvuData?.stat_data) {\n                newMvuData.stat_data = _.cloneDeep(userMvuData.stat_data);\n            }\n            // 8.  MVU \n            if (newMvuData) {\n                delete newMvuData.display_data;\n                delete newMvuData.delta_data;\n            }\n            // 9.  assistant  MVU \n            console.info('[GameStore] Creating assistant message with MVU data');\n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            // 10.  stat_data\n            refreshLocalStatData(newMvuData);\n            console.info('[GameStore] Action completed successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] sendAction error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function applyParsedResponse(parsed) {\n        mainText.value = parsed.mainText;\n        options.value = parsed.options;\n        currentSummary.value = parsed.summary;\n        hasOptionE.value = parsed.hasOptionE;\n        hasLeave.value = parsed.hasLeave;\n        variableUpdateText.value = parsed.variableUpdate;\n    }\n    /**\n     *  MVU  stat_data \n     */\n    function refreshLocalStatData(mvuData) {\n        try {\n            if (!mvuData)\n                return;\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema.safeParse /\n                statData.value = raw;\n                console.info('[GameStore] Local stat_data refreshed:', JSON.stringify(raw.$));\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] refreshLocalStatData error:', err);\n        }\n    }\n    /**\n     *  <sum> \n     */\n    function loadSaveEntries() {\n        const entries = [];\n        const lastId = getLastMessageId();\n        if (lastId < 0) {\n            saveEntries.value = entries;\n            return;\n        }\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        for (const msg of messages) {\n            const summary = extractSummary(msg.message);\n            if (summary) {\n                entries.push({\n                    messageId: msg.message_id,\n                    summary,\n                });\n            }\n        }\n        saveEntries.value = entries;\n    }\n    /**\n     * \n     */\n    async function rollbackTo(targetMessageId) {\n        try {\n            const lastId = getLastMessageId();\n            if (targetMessageId >= lastId) {\n                console.warn('[GameStore] Cannot rollback: target is current or future');\n                return;\n            }\n            //  target \n            const idsToDelete = [];\n            for (let i = targetMessageId + 1; i <= lastId; i++) {\n                idsToDelete.push(i);\n            }\n            console.info(`[GameStore] Rolling back: deleting messages ${targetMessageId + 1} to ${lastId}`);\n            await deleteChatMessages(idsToDelete, { refresh: 'none' });\n            //  assistant \n            loadLatestAssistantState();\n            //  MVU  getLastMessageId\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: targetMessageId });\n                const raw = _.get(mvuData, 'stat_data');\n                if (raw && typeof raw === 'object') {\n                    statData.value = raw;\n                    console.info('[GameStore] Rollback: loaded stat_data from message', targetMessageId);\n                }\n            }\n            catch (e) {\n                console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back', e);\n                loadStatData();\n            }\n            // \n            isSaveLoadOpen.value = false;\n            toastr.success('');\n            console.info('[GameStore] Rollback completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Rollback error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * Roll assistant+user \n     */\n    async function rerollCurrent() {\n        if (isGenerating.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 1) {\n                console.warn('[GameStore] Cannot reroll: not enough messages');\n                return;\n            }\n            isGenerating.value = true;\n            error.value = null;\n            streamingText.value = '';\n            //  user  re-generate \n            const allMessages = getChatMessages(`0-${lastId}`);\n            const lastUserMsg = [...allMessages].reverse().find(m => m.role === 'user');\n            const userInput = lastUserMsg ? lastUserMsg.message : '';\n            //  assistant \n            console.info('[GameStore] Reroll: deleting message', lastId);\n            await deleteChatMessages([lastId], { refresh: 'none' });\n            //  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            // \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text) => {\n                streamingText.value = text;\n            });\n            // \n            console.info('[GameStore] Reroll: regenerating...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: true,\n            });\n            streamListener.stop();\n            streamingText.value = '';\n            // \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            //  MVU \n            const newMvuData = await Mvu.parseMessage(result, _.cloneDeep(oldMvuData));\n            //  assistant  MVU \n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            toastr.success('');\n            console.info('[GameStore] Reroll completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Reroll error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function startEdit() {\n        if (isEditing.value || isGenerating.value)\n            return;\n        //  SillyTavern  assistant \n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`${lastId}-${lastId}`);\n        if (messages.length === 0)\n            return;\n        editingText.value = messages[0].message;\n        isEditing.value = true;\n    }\n    /**\n     *  assistant \n     */\n    async function saveEdit() {\n        if (!isEditing.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            //  MVU \n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            //  MVU \n            const prevMvuData = lastId > 0\n                ? Mvu.getMvuData({ type: 'message', message_id: lastId - 1 })\n                : Mvu.getMvuData({ type: 'message', message_id: 0 });\n            //  MVU \n            let newMvuData = await Mvu.parseMessage(editingText.value, _.cloneDeep(prevMvuData));\n            //  stat_data / display_data\n            //  MVU \n            if (newMvuData && currentMvuData) {\n                if (!newMvuData.stat_data && currentMvuData.stat_data) {\n                    newMvuData.stat_data = currentMvuData.stat_data;\n                }\n                if (!newMvuData.display_data && currentMvuData.display_data) {\n                    newMvuData.display_data = currentMvuData.display_data;\n                }\n            }\n            else if (!newMvuData && currentMvuData) {\n                // parseMessage \n                newMvuData = currentMvuData;\n            }\n            // \n            await setChatMessages([{ message_id: lastId, message: editingText.value }], { refresh: 'none' });\n            //  MVU \n            if (newMvuData) {\n                await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id: lastId });\n            }\n            // \n            const parsed = parseResponse(editingText.value);\n            applyParsedResponse(parsed);\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            isEditing.value = false;\n            editingText.value = '';\n            toastr.success('');\n            console.info('[GameStore] Edit saved');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Save edit error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * \n     */\n    function cancelEdit() {\n        isEditing.value = false;\n        editingText.value = '';\n    }\n    /**\n     *  stat_data \n     */\n    async function updateStatDataFields(fields) {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0) {\n                error.value = '';\n                return false;\n            }\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const nextMvuData = _.cloneDeep(currentMvuData ?? {});\n            if (!nextMvuData.stat_data || typeof nextMvuData.stat_data !== 'object') {\n                nextMvuData.stat_data = {};\n            }\n            Object.assign(nextMvuData.stat_data, _.cloneDeep(fields));\n            await Mvu.replaceMvuData(nextMvuData, { type: 'message', message_id: lastId });\n            refreshLocalStatData(nextMvuData);\n            return true;\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] updateStatDataFields error:', msg);\n            error.value = `: ${msg}`;\n            return false;\n        }\n    }\n    return {\n        // State\n        mainText,\n        options,\n        currentSummary,\n        isGenerating,\n        streamingText,\n        error,\n        isInitialized,\n        statData,\n        saveEntries,\n        isSaveLoadOpen,\n        isEditing,\n        editingText,\n        hasOptionE,\n        hasLeave,\n        variableUpdateText,\n        // Actions\n        initialize,\n        sendAction,\n        setPendingPortalChanges,\n        loadStatData,\n        loadSaveEntries,\n        rollbackTo,\n        rerollCurrent,\n        startEdit,\n        saveEdit,\n        cancelEdit,\n        updateStatDataFields,\n    };\n});\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"shield\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link2 = createLucideIcon(\"link-2\", [\n  [\"path\", { d: \"M9 17H7A5 5 0 0 1 7 7h2\", key: \"8i5ue5\" }],\n  [\"path\", { d: \"M15 7h2a5 5 0 1 1 0 10h-2\", key: \"1b9ql8\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"12\", y2: \"12\", key: \"1jonct\" }]\n]);\n\nexport { Link2 as default };\n//# sourceMappingURL=link-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Skull = createLucideIcon(\"skull\", [\n  [\"path\", { d: \"m12.5 17-.5-1-.5 1h1z\", key: \"3me087\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z\",\n      key: \"1o5pge\"\n    }\n  ],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }]\n]);\n\nexport { Skull as default };\n//# sourceMappingURL=skull.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bug = createLucideIcon(\"bug\", [\n  [\"path\", { d: \"M12 20v-9\", key: \"1qisl0\" }],\n  [\"path\", { d: \"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z\", key: \"uouzyp\" }],\n  [\"path\", { d: \"M14.12 3.88 16 2\", key: \"qol33r\" }],\n  [\"path\", { d: \"M21 21a4 4 0 0 0-3.81-4\", key: \"1b0z45\" }],\n  [\"path\", { d: \"M21 5a4 4 0 0 1-3.55 3.97\", key: \"5cxbf6\" }],\n  [\"path\", { d: \"M22 13h-4\", key: \"1jl80f\" }],\n  [\"path\", { d: \"M3 21a4 4 0 0 1 3.81-4\", key: \"1fjd4g\" }],\n  [\"path\", { d: \"M3 5a4 4 0 0 0 3.55 3.97\", key: \"1d7oge\" }],\n  [\"path\", { d: \"M6 13H2\", key: \"82j7cp\" }],\n  [\"path\", { d: \"m8 2 1.88 1.88\", key: \"fmnt4t\" }],\n  [\"path\", { d: \"M9 7.13V6a3 3 0 1 1 6 0v1.13\", key: \"1vgav8\" }]\n]);\n\nexport { Bug as default };\n//# sourceMappingURL=bug.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Droplet = createLucideIcon(\"droplet\", [\n  [\n    \"path\",\n    {\n      d: \"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z\",\n      key: \"c7niix\"\n    }\n  ]\n]);\n\nexport { Droplet as default };\n//# sourceMappingURL=droplet.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Flame = createLucideIcon(\"flame\", [\n  [\n    \"path\",\n    {\n      d: \"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4\",\n      key: \"1slcih\"\n    }\n  ]\n]);\n\nexport { Flame as default };\n//# sourceMappingURL=flame.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TriangleAlert = createLucideIcon(\"triangle-alert\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3\",\n      key: \"wmoenq\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { TriangleAlert as default };\n//# sourceMappingURL=triangle-alert.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"heart\", [\n  [\n    \"path\",\n    {\n      d: \"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5\",\n      key: \"mvr1a0\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Ban = createLucideIcon(\"ban\", [\n  [\"path\", { d: \"M4.929 4.929 19.07 19.071\", key: \"196cmz\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Ban as default };\n//# sourceMappingURL=ban.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"zap\", [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Snowflake = createLucideIcon(\"snowflake\", [\n  [\"path\", { d: \"m10 20-1.25-2.5L6 18\", key: \"18frcb\" }],\n  [\"path\", { d: \"M10 4 8.75 6.5 6 6\", key: \"7mghy3\" }],\n  [\"path\", { d: \"m14 20 1.25-2.5L18 18\", key: \"1chtki\" }],\n  [\"path\", { d: \"m14 4 1.25 2.5L18 6\", key: \"1b4wsy\" }],\n  [\"path\", { d: \"m17 21-3-6h-4\", key: \"15hhxa\" }],\n  [\"path\", { d: \"m17 3-3 6 1.5 3\", key: \"11697g\" }],\n  [\"path\", { d: \"M2 12h6.5L10 9\", key: \"kv9z4n\" }],\n  [\"path\", { d: \"m20 10-1.5 2 1.5 2\", key: \"1swlpi\" }],\n  [\"path\", { d: \"M22 12h-6.5L14 15\", key: \"1mxi28\" }],\n  [\"path\", { d: \"m4 10 1.5 2L4 14\", key: \"k9enpj\" }],\n  [\"path\", { d: \"m7 21 3-6-1.5-3\", key: \"j8hb9u\" }],\n  [\"path\", { d: \"m7 3 3 6h4\", key: \"1otusx\" }]\n]);\n\nexport { Snowflake as default };\n//# sourceMappingURL=snowflake.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bone = createLucideIcon(\"bone\", [\n  [\n    \"path\",\n    {\n      d: \"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z\",\n      key: \"w610uw\"\n    }\n  ]\n]);\n\nexport { Bone as default };\n//# sourceMappingURL=bone.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Battery = createLucideIcon(\"battery\", [\n  [\"path\", { d: \"M 22 14 L 22 10\", key: \"nqc4tb\" }],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"16\", height: \"12\", rx: \"2\", key: \"13zb55\" }]\n]);\n\nexport { Battery as default };\n//# sourceMappingURL=battery.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Waves = createLucideIcon(\"waves\", [\n  [\n    \"path\",\n    {\n      d: \"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"knzxuh\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"2jd2cc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1\",\n      key: \"rd2r6e\"\n    }\n  ]\n]);\n\nexport { Waves as default };\n//# sourceMappingURL=waves.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"settings-2\", [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"trash-2\", [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"x\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","// \n//  /Buff   \n// \n\nimport {\n  type CardData,\n  type CardType,\n  type EffectInstance,\n  type EffectPolarity,\n  type EntityStats,\n  EffectType,\n} from '../types';\n\n//   \n\n/**  */\nexport type EffectTiming =\n  | 'onTurnStart'    // \n  | 'onTurnEnd'      // \n  | 'onBeforeDamage'  // \n  | 'onAfterDamage'  // \n  | 'onBeforeAttack' // \n  | 'onAfterAttack'  // \n  | 'onClash'        // \n  | 'onDiceRoll'     // \n  | 'onCardPlay'     // \n  | 'passive';       // \n\n/**  */\nexport interface EffectDefinition {\n  type: EffectType;\n  name: string;\n  polarity: EffectPolarity;\n  /**  */\n  timings: EffectTiming[];\n  /**  */\n  stackable: boolean;\n  /** 0 =  */\n  maxStacks: number;\n  /**  */\n  description: string;\n}\n\n//   \n\nexport const EFFECT_REGISTRY: Record<EffectType, EffectDefinition> = {\n  [EffectType.BARRIER]: {\n    type: EffectType.BARRIER,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.ARMOR]: {\n    type: EffectType.ARMOR,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BIND]: {\n    type: EffectType.BIND,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.DEVOUR]: {\n    type: EffectType.DEVOUR,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay'],\n    stackable: false,\n    maxStacks: 1,\n    description: '3//',\n  },\n  [EffectType.POISON]: {\n    type: EffectType.POISON,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.POISON_AMOUNT]: {\n    type: EffectType.POISON_AMOUNT,\n    name: '',\n    polarity: 'special',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BURN]: {\n    type: EffectType.BURN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLEED]: {\n    type: EffectType.BLEED,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onClash', 'onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.VULNERABLE]: {\n    type: EffectType.VULNERABLE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.REGEN]: {\n    type: EffectType.REGEN,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.IGNITE_AURA]: {\n    type: EffectType.IGNITE_AURA,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.STUN]: {\n    type: EffectType.STUN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onTurnEnd'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.CHARGE]: {\n    type: EffectType.CHARGE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onDiceRoll'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.COLD]: {\n    type: EffectType.COLD,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeAttack', 'onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.NON_LIVING]: {\n    type: EffectType.NON_LIVING,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.MANA_DRAIN]: {\n    type: EffectType.MANA_DRAIN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.MANA_SPRING]: {\n    type: EffectType.MANA_SPRING,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.SWARM]: {\n    type: EffectType.SWARM,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '01',\n  },\n  [EffectType.INDOMITABLE]: {\n    type: EffectType.INDOMITABLE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onAfterDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '011',\n  },\n};\n\n// \n//  \n// \n\n/**\n * \n */\nexport function findEffect(entity: EntityStats, type: EffectType): EffectInstance | undefined {\n  return entity.effects.find(e => e.type === type);\n}\n\n/**\n * \n */\nexport function hasEffect(entity: EntityStats, type: EffectType): boolean {\n  return entity.effects.some(e => e.type === type && e.stacks > 0);\n}\n\n/**\n *  0\n */\nexport function getEffectStacks(entity: EntityStats, type: EffectType): number {\n  const effect = findEffect(entity, type);\n  return effect ? effect.stacks : 0;\n}\n\n/**\n * \n * /\n */\nexport function applyEffect(\n  entity: EntityStats,\n  type: EffectType,\n  stacks: number = 1,\n  options?: { restrictedTypes?: CardType[]; source?: string; lockDecayThisTurn?: boolean },\n): boolean {\n  // \n  if (hasEffect(entity, EffectType.NON_LIVING)) {\n    if (type === EffectType.POISON || type === EffectType.BLEED) {\n      return false; // \n    }\n  }\n\n  const def = EFFECT_REGISTRY[type];\n  const existing = findEffect(entity, type);\n\n  if (existing) {\n    if (def.stackable) {\n      existing.stacks += stacks;\n      if (def.maxStacks > 0) {\n        existing.stacks = Math.min(existing.stacks, def.maxStacks);\n      }\n    }\n    // \n    if (type === EffectType.BIND && options?.restrictedTypes) {\n      existing.restrictedTypes = options.restrictedTypes;\n    }\n    if (type === EffectType.BIND && options?.lockDecayThisTurn) {\n      existing.lockDecayThisTurn = true;\n    }\n    return true;\n  }\n\n  // \n  const instance: EffectInstance = {\n    type,\n    stacks: def.maxStacks > 0 ? Math.min(stacks, def.maxStacks) : stacks,\n    polarity: def.polarity,\n    lockDecayThisTurn: type === EffectType.BIND ? !!options?.lockDecayThisTurn : undefined,\n    restrictedTypes: options?.restrictedTypes,\n    source: options?.source,\n  };\n  entity.effects.push(instance);\n  return true;\n}\n\n/**\n * \n */\nexport function removeEffect(entity: EntityStats, type: EffectType): void {\n  entity.effects = entity.effects.filter(e => e.type !== type);\n}\n\n/**\n *  0 \n */\nexport function reduceEffectStacks(entity: EntityStats, type: EffectType, amount: number = 1): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  effect.stacks -= amount;\n  if (effect.stacks <= 0) {\n    removeEffect(entity, type);\n  }\n}\n\n// \n//  \n// \n\n/**  */\nexport interface TurnStartResult {\n  hpChange: number;\n  mpChange: number;\n  trueDamage: number;\n  isStunned: boolean;\n  logs: string[];\n  /**  */\n  applyToOpponent: Array<{ type: EffectType; stacks: number }>;\n}\n\n/**\n * \n *       (-1)      \n */\nexport function processOnTurnStart(entity: EntityStats): TurnStartResult {\n  const result: TurnStartResult = {\n    hpChange: 0,\n    mpChange: 0,\n    trueDamage: 0,\n    isStunned: false,\n    logs: [],\n    applyToOpponent: [],\n  };\n\n  // \n  if (hasEffect(entity, EffectType.MANA_DRAIN)) {\n    result.mpChange = -entity.mp;\n    result.logs.push(`[] `);\n    reduceEffectStacks(entity, EffectType.MANA_DRAIN);\n  }\n\n  // \n  const poisonAmount = getEffectStacks(entity, EffectType.POISON_AMOUNT);\n  if (poisonAmount > 0) {\n    if (poisonAmount >= entity.hp) {\n      result.trueDamage += poisonAmount;\n      removeEffect(entity, EffectType.POISON_AMOUNT);\n      result.logs.push(`[] (${poisonAmount})  (${entity.hp}) ${poisonAmount} `);\n    }\n  }\n\n  // \n  const burnStacks = getEffectStacks(entity, EffectType.BURN);\n  if (burnStacks > 0) {\n    let burnDamage = burnStacks;\n    const vulnerableStacks = getEffectStacks(entity, EffectType.VULNERABLE);\n    if (vulnerableStacks > 0) {\n      burnDamage += vulnerableStacks;\n      result.logs.push(`[]  +${vulnerableStacks}`);\n    }\n    result.hpChange -= burnDamage;\n    result.logs.push(`[]  ${burnDamage} `);\n  }\n\n  //  -1\n  if (hasEffect(entity, EffectType.BLEED)) {\n    reduceEffectStacks(entity, EffectType.BLEED);\n    result.logs.push(`[] `);\n  }\n\n  // \n  const regenStacks = getEffectStacks(entity, EffectType.REGEN);\n  if (regenStacks > 0) {\n    result.hpChange += regenStacks;\n    result.logs.push(`[]  ${regenStacks} `);\n  }\n\n  //   \n  const igniteStacks = getEffectStacks(entity, EffectType.IGNITE_AURA);\n  if (igniteStacks > 0) {\n    applyEffect(entity, EffectType.BURN, 1);\n    result.applyToOpponent.push({ type: EffectType.BURN, stacks: 1 });\n    result.logs.push(`[]  1 `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    result.isStunned = true;\n    result.logs.push(`[] `);\n  }\n\n  // \n  const manaSpringStacks = getEffectStacks(entity, EffectType.MANA_SPRING);\n  if (manaSpringStacks > 0) {\n    result.mpChange += manaSpringStacks;\n    result.logs.push(`[]  +${manaSpringStacks}`);\n  }\n\n  return result;\n}\n\n/**\n * \n * (-1)  ()  ()\n */\nexport function processOnTurnEnd(entity: EntityStats): string[] {\n  const logs: string[] = [];\n\n  // -1\n  const poisonStacks = getEffectStacks(entity, EffectType.POISON);\n  if (poisonStacks > 0) {\n    applyEffect(entity, EffectType.POISON_AMOUNT, poisonStacks);\n    reduceEffectStacks(entity, EffectType.POISON, 1);\n    logs.push(`[]  +${poisonStacks} 1`);\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect && bindEffect.stacks > 0) {\n    if (bindEffect.lockDecayThisTurn) {\n      bindEffect.lockDecayThisTurn = false;\n      if (bindEffect.stacks <= 1) {\n        logs.push(`[] 1`);\n      } else {\n        reduceEffectStacks(entity, EffectType.BIND);\n        logs.push(`[] 1`);\n      }\n    } else {\n      reduceEffectStacks(entity, EffectType.BIND);\n      logs.push(`[] `);\n    }\n  }\n\n  // \n  const armorEffect = findEffect(entity, EffectType.ARMOR);\n  if (armorEffect && armorEffect.stacks > 0) {\n    armorEffect.stacks = Math.floor(armorEffect.stacks / 2);\n    if (armorEffect.stacks <= 0) {\n      removeEffect(entity, EffectType.ARMOR);\n    }\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    removeEffect(entity, EffectType.STUN);\n    logs.push(`[] `);\n  }\n\n  return logs;\n}\n\n// \n//  \n// \n\n/**\n * \n */\nexport function canPlayCard(\n  entity: EntityStats,\n  card: CardData,\n  baseDice: number,\n): { allowed: boolean; reason?: string } {\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect) {\n    const restrictedTypes = bindEffect.restrictedTypes && bindEffect.restrictedTypes.length > 0\n      ? bindEffect.restrictedTypes\n      : (['', ''] as CardType[]);\n    if (restrictedTypes.includes(card.type)) {\n      return { allowed: false, reason: `${card.type}` };\n    }\n  }\n\n  // 3 /\n  if (hasEffect(entity, EffectType.DEVOUR) && baseDice <= 3) {\n    if (card.type === '' as CardType || card.type === '' as CardType) {\n      return { allowed: false, reason: `3${card.type}` };\n    }\n  }\n\n  // \n  if (card.type === ('' as CardType) && card.manaCost > entity.mp) {\n    return { allowed: false, reason: `${card.manaCost}${entity.mp}` };\n  }\n\n  return { allowed: true };\n}\n","// \n//     &  & \n// \n\nimport {\n    type CardData,\n    CardType,\n    type ClashResult,\n    type DamageCalculationContext,\n    EffectType,\n    type EntityStats,\n    type PointCalculationContext,\n} from '../types';\nimport {\n    findEffect,\n    getEffectStacks,\n    hasEffect,\n    reduceEffectStacks,\n    removeEffect,\n} from './effects';\n\n// \n//  A. \n// \n\n/**\n * \n * FinalPoint = (BaseDice * Multiplier + Addition) * BuffMod * RelicMod + BuffAdd + RelicAdd\n */\nexport function calculateFinalPoint(ctx: PointCalculationContext): number {\n  const { baseDice, card, relicModifiers } = ctx;\n\n  // Step 1-2: \n  let point = baseDice * card.calculation.multiplier + card.calculation.addition;\n\n  // Step 3-4: \n  point *= relicModifiers.globalMultiplier;\n\n  // Step 5-6: \n  point += relicModifiers.globalAddition;\n\n  return Math.max(0, Math.floor(point));\n}\n\n// \n//  B. \n// \n\n/**\n * \n * 1.  vs   2.  vs   3.  vs (|)  4. \n */\nexport function shouldClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  forceClashFunction: boolean = false,\n): boolean {\n  const p = playerCard.type;\n  const e = enemyCard.type;\n\n  if (p === CardType.FUNCTION || e === CardType.FUNCTION) return forceClashFunction;\n  if (p === e) return true;\n  if (p === CardType.DODGE && (e === CardType.PHYSICAL || e === CardType.MAGIC)) return true;\n  if (e === CardType.DODGE && (p === CardType.PHYSICAL || p === CardType.MAGIC)) return true;\n\n  return false;\n}\n\n/**\n * \n *  <  = \n */\nexport function resolveClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  playerPoint: number,\n  enemyPoint: number,\n): ClashResult {\n  const isPlayerDodge = playerCard.type === CardType.DODGE;\n  const isEnemyDodge = enemyCard.type === CardType.DODGE;\n\n  // \n  if (isPlayerDodge && !isEnemyDodge) {\n    if (playerPoint < enemyPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n    }\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint}  ${enemyPoint})` };\n  }\n  // \n  if (isEnemyDodge && !isPlayerDodge) {\n    if (enemyPoint < playerPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint} < ${playerPoint})` };\n    }\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint}  ${playerPoint})` };\n  }\n  // \n  if (playerPoint > enemyPoint) {\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} > ${enemyPoint})` };\n  } else if (enemyPoint > playerPoint) {\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n  }\n  return { outcome: 'draw', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint})` };\n}\n\n// \n//  C. \n// \n\n/**\n * \n * relative: FinalPoint * scale + scaleAddition\n * fixed:    value\n * mixed:    baseValue + FinalPoint * scale + scaleAddition\n */\nexport function calculateRawDamage(finalPoint: number, card: CardData): number {\n  const dl = card.damageLogic;\n  switch (dl.mode) {\n    case 'relative': return finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    case 'fixed':    return dl.value ?? 0;\n    case 'mixed':    return (dl.baseValue ?? 0) + finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    default:         return 0;\n  }\n}\n\n/**\n * \n *           \n */\nexport function calculateFinalDamage(ctx: DamageCalculationContext): { damage: number; isTrueDamage: boolean; logs: string[] } {\n  const logs: string[] = [];\n  let damage = calculateRawDamage(ctx.finalPoint, ctx.card);\n  logs.push(`: ${Math.floor(damage)}`);\n\n  const isTrueDamage = ctx.isTrueDamage ?? false;\n\n  // \n  const cold = ctx.attackerEffects.find(e => e.type === EffectType.COLD)?.stacks ?? 0;\n  if (cold > 0) { damage -= cold; logs.push(`[] -${cold}`); }\n\n  if (isTrueDamage) {\n    logs.push(``);\n    return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: true, logs };\n  }\n\n  // \n  const vuln = ctx.defenderEffects.find(e => e.type === EffectType.VULNERABLE)?.stacks ?? 0;\n  if (vuln > 0) { damage += vuln; logs.push(`[] +${vuln}`); }\n\n  //  applyDamageToEntity \n  if (ctx.defenderEffects.some(e => e.type === EffectType.BARRIER && e.stacks > 0)) {\n    logs.push(`[] `);\n  }\n\n  //  applyDamageToEntity \n  const armor = ctx.defenderEffects.find(e => e.type === EffectType.ARMOR)?.stacks ?? 0;\n  if (armor > 0) { logs.push(`[]  ${armor} `); }\n\n  return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: false, logs };\n}\n\n/**\n * \n */\nexport function triggerSwarmReviveIfNeeded(target: EntityStats): { revived: boolean; logs: string[] } {\n  const logs: string[] = [];\n  if (target.hp > 0) return { revived: false, logs };\n\n  const swarmStacks = getEffectStacks(target, EffectType.SWARM);\n  if (swarmStacks > 0) {\n    reduceEffectStacks(target, EffectType.SWARM, 1);\n    target.hp = target.maxHp;\n    logs.push(`[] 1${target.maxHp}`);\n    return { revived: true, logs };\n  }\n\n  const indomitableStacks = getEffectStacks(target, EffectType.INDOMITABLE);\n  if (indomitableStacks > 0) {\n    reduceEffectStacks(target, EffectType.INDOMITABLE, 1);\n    target.hp = 1;\n    logs.push(`[] 11`);\n    return { revived: true, logs };\n  }\n\n  return { revived: false, logs };\n}\n\n/**\n * \n *  0 \n */\nexport function consumeColdAfterDealingDamage(attacker: EntityStats, actualDamage: number): string[] {\n  const logs: string[] = [];\n  void actualDamage;\n\n  const cold = findEffect(attacker, EffectType.COLD);\n  if (!cold || cold.stacks <= 0) return logs;\n\n  const before = cold.stacks;\n  cold.stacks = Math.floor(cold.stacks / 2);\n  if (cold.stacks <= 0) {\n    removeEffect(attacker, EffectType.COLD);\n    logs.push(`[] ${before} -> 0`);\n  } else {\n    logs.push(`[] ${before} -> ${cold.stacks}`);\n  }\n  return logs;\n}\n\n/**\n * ///\n */\nexport function applyDamageToEntity(target: EntityStats, damage: number, isTrueDamage: boolean): { actualDamage: number; logs: string[] } {\n  const logs: string[] = [];\n  if (!isTrueDamage) {\n    if (hasEffect(target, EffectType.BARRIER) && damage > 0) {\n      reduceEffectStacks(target, EffectType.BARRIER);\n      logs.push(`[] -1`);\n      return { actualDamage: 0, logs };\n    }\n    const ae = findEffect(target, EffectType.ARMOR);\n    if (ae && ae.stacks > 0 && damage > 0) {\n      const c = Math.min(ae.stacks, damage);\n      ae.stacks -= c; damage -= c;\n      if (ae.stacks <= 0) removeEffect(target, EffectType.ARMOR);\n      logs.push(`[] ${c}${damage}`);\n    }\n  }\n  const actual = Math.min(damage, target.hp);\n  target.hp -= actual;\n  logs.push(`${actual}(HP: ${target.hp}/${target.maxHp})`);\n  const reviveResult = triggerSwarmReviveIfNeeded(target);\n  logs.push(...reviveResult.logs);\n  return { actualDamage: actual, logs };\n}\n\n// \n//  D.  & \n// \n\n/** (), () */\nexport function processClashEffects(winner: EntityStats, loser: EntityStats): string[] {\n  const logs: string[] = [];\n  const bleed = getEffectStacks(loser, EffectType.BLEED);\n  if (bleed > 0) { loser.hp -= bleed; logs.push(`[] ${bleed}`); }\n  if (hasEffect(winner, EffectType.BURN)) { removeEffect(winner, EffectType.BURN); logs.push(`[] `); }\n  return logs;\n}\n\n/** ,  */\nexport function processPostAttackEffects(attacker: EntityStats): string[] {\n  const logs: string[] = [];\n  // \n  return logs;\n}\n\n// \n//  E. \n// \n\nexport function rollDice(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sword = createLucideIcon(\"sword\", [\n  [\"path\", { d: \"m11 19-6-6\", key: \"s7kpr\" }],\n  [\"path\", { d: \"m5 21-2-2\", key: \"1kw20b\" }],\n  [\"path\", { d: \"m8 16-4 4\", key: \"1oqv8h\" }],\n  [\"path\", { d: \"M9.5 17.5 21 6V3h-3L6.5 14.5\", key: \"pkxemp\" }]\n]);\n\nexport { Sword as default };\n//# sourceMappingURL=sword.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"refresh-ccw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Footprints = createLucideIcon(\"footprints\", [\n  [\n    \"path\",\n    {\n      d: \"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z\",\n      key: \"1dudjm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z\",\n      key: \"l2t8xc\"\n    }\n  ],\n  [\"path\", { d: \"M16 17h4\", key: \"1dejxt\" }],\n  [\"path\", { d: \"M4 13h4\", key: \"1bwh8b\" }]\n]);\n\nexport { Footprints as default };\n//# sourceMappingURL=footprints.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_2 = { class: \"bg-black/60 p-1 rounded-full border border-white/10\" };\nconst _hoisted_3 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_4 = { class: \"absolute font-heading text-white/20 text-4xl select-none\" };\nconst _hoisted_5 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_6 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_7 = { class: \"bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_8 = { class: \"mt-1 text-center text-white/50 font-bold text-[10px] font-ui tracking-wider\" };\nimport { Footprints, RefreshCcw, Sparkles, Sword } from 'lucide-vue-next';\nimport { CardType } from '../types';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonCard',\n    props: {\n        card: {},\n        disabled: { type: Boolean, default: false },\n        selected: { type: Boolean, default: false },\n        faceDown: { type: Boolean, default: false },\n        isEnemy: { type: Boolean, default: false },\n        className: { default: '' }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        const props = __props;\n        const typeColorClass = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-900 bg-red-950/30';\n                case CardType.MAGIC:\n                    return 'border-purple-900 bg-purple-950/30';\n                case CardType.FUNCTION:\n                    return 'border-yellow-800 bg-yellow-950/30';\n                case CardType.DODGE:\n                    return 'border-emerald-900 bg-emerald-950/30';\n                default:\n                    return 'border-gray-700 bg-gray-800';\n            }\n        });\n        const typeIcon = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return Sword;\n                case CardType.MAGIC:\n                    return Sparkles;\n                case CardType.FUNCTION:\n                    return RefreshCcw;\n                case CardType.DODGE:\n                    return Footprints;\n                default:\n                    return Sword;\n            }\n        });\n        const typeIconColor = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'text-red-400';\n                case CardType.MAGIC:\n                    return 'text-purple-400';\n                case CardType.FUNCTION:\n                    return 'text-yellow-400';\n                case CardType.DODGE:\n                    return 'text-emerald-400';\n                default:\n                    return 'text-gray-400';\n            }\n        });\n        const cardStrengthLabel = computed(() => {\n            const dl = props.card.damageLogic;\n            switch (dl.mode) {\n                case 'relative': return ` ${dl.scale ?? 1}x`;\n                case 'fixed': return dl.value ? ` ${dl.value}` : '';\n                case 'mixed': return `${dl.baseValue ?? 0}+${dl.scale ?? 1}x`;\n                default: return '';\n            }\n        });\n        const typeGradient = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'bg-gradient-to-tr from-red-900 to-black';\n                case CardType.MAGIC:\n                    return 'bg-gradient-to-tr from-purple-900 to-black';\n                case CardType.FUNCTION:\n                    return 'bg-gradient-to-tr from-yellow-900 to-black';\n                case CardType.DODGE:\n                    return 'bg-gradient-to-tr from-emerald-900 to-black';\n                default:\n                    return 'bg-gradient-to-tr from-gray-800 to-black';\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" Face Down Card \"),\n                (__props.faceDown)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"w-40 h-60 rounded-xl bg-[#252030] border-2 border-[#3a3040] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2\", __props.className])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"div\", { class: \"absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50\" }, [\n                                _createElementVNode(\"div\", { class: \"size-16 rounded-full border-2 border-[#5c3a21] opacity-30\" })\n                            ], -1 /* CACHED */)\n                        ]))], 2 /* CLASS */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Face Up Card \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"relative w-40 h-60 rounded-xl shadow-2xl transition-all duration-300 transform bg-[#16121e] border-2 cursor-pointer\", [\n                                    _unref(typeColorClass),\n                                    __props.selected ? 'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20' : 'hover:-translate-y-2 hover:z-10',\n                                    __props.disabled ? 'opacity-80 !cursor-default' : '',\n                                    __props.className,\n                                ]]),\n                            onClick: _cache[0] || (_cache[0] = ($event) => (!__props.disabled && _ctx.$emit('click')))\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-400/40 shadow-md\", __props.card.type !== _unref(CardType).MAGIC || __props.card.manaCost === 0 ? 'opacity-0' : ''])\n                                }, _toDisplayString(__props.card.manaCost), 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(typeIcon)), {\n                                        class: _normalizeClass([\"size-5\", _unref(typeIconColor)])\n                                    }, null, 8 /* PROPS */, [\"class\"]))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Image Placeholder \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"size-full opacity-60\", _unref(typeGradient)])\n                                }, null, 2 /* CLASS */),\n                                _createElementVNode(\"span\", _hoisted_4, _toDisplayString(__props.card.name[0]), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"h3\", _hoisted_6, _toDisplayString(__props.card.name), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(__props.card.description), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(__props.card.type), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */)\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\n\nimport { ref, computed, watch, onUnmounted } from 'vue';\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    class: \"absolute inset-0 size-full\",\n    style: { \"filter\": \"drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))\" }\n};\nconst _hoisted_2 = [\"fill\", \"stroke\"];\nconst _hoisted_3 = [\"stroke\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonDice',\n    props: {\n        value: {},\n        rolling: { type: Boolean },\n        color: { default: 'gold' },\n        size: { default: 'md' },\n        className: { default: '' },\n        rollingMin: { default: 1 },\n        rollingMax: { default: 6 },\n        numberClass: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayValue = ref(1);\n        let interval = null;\n        const gradientId = `grad-${props.color}-${Math.random().toString(36).substr(2, 9)}`;\n        const sizeClass = computed(() => {\n            const map = { sm: 'w-12 h-12', md: 'w-20 h-20', lg: 'w-32 h-32' };\n            return map[props.size];\n        });\n        const numberSizeClass = computed(() => {\n            const map = { sm: 'text-xl', md: 'text-3xl', lg: 'text-6xl' };\n            return map[props.size];\n        });\n        const borderColor = computed(() => (props.color === 'gold' ? '#4d331f' : '#2a0505'));\n        const textColor = computed(() => (props.color === 'gold' ? 'text-[#2c1a0e]' : 'text-[#2c0e0e]'));\n        const numberTextClass = computed(() => props.numberClass || textColor.value);\n        const getRollingRange = () => {\n            const min = Math.floor(Math.min(props.rollingMin, props.rollingMax));\n            const max = Math.floor(Math.max(props.rollingMin, props.rollingMax));\n            return {\n                min: Number.isFinite(min) ? min : 1,\n                max: Number.isFinite(max) ? max : 6,\n            };\n        };\n        const rollRandomInRange = () => {\n            const { min, max } = getRollingRange();\n            if (max <= min)\n                return min;\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        };\n        watch(() => [props.rolling, props.value, props.rollingMin, props.rollingMax], ([rolling]) => {\n            if (interval) {\n                clearInterval(interval);\n                interval = null;\n            }\n            if (rolling) {\n                interval = setInterval(() => {\n                    displayValue.value = rollRandomInRange();\n                }, 80);\n            }\n            else {\n                displayValue.value = props.value;\n            }\n        }, { immediate: true });\n        onUnmounted(() => {\n            if (interval)\n                clearInterval(interval);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative flex items-center justify-center drop-shadow-xl transition-all duration-300\", [__props.rolling ? 'animate-bounce' : '', __props.className]])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"relative flex items-center justify-center\", _unref(sizeClass)])\n                }, [\n                    (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [\n                        _createElementVNode(\"defs\", null, [\n                            _createElementVNode(\"linearGradient\", {\n                                id: gradientId,\n                                x1: \"0%\",\n                                y1: \"0%\",\n                                x2: \"100%\",\n                                y2: \"100%\"\n                            }, [\n                                (__props.color === 'gold')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[0] || (_cache[0] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#f9e6a0\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#d4af37\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#8a7122\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#fca5a5\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#ef4444\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#7f1d1d\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ]),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 2, 93 25, 93 75, 50 98, 7 75, 7 25\",\n                            fill: `url(#${gradientId})`,\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"3\"\n                        }, null, 8 /* PROPS */, _hoisted_2),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 8, 87 29, 87 71, 50 92, 13 71, 13 29\",\n                            fill: \"none\",\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"1\",\n                            opacity: \"0.4\"\n                        }, null, 8 /* PROPS */, _hoisted_3)\n                    ])),\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"relative z-10 font-heading font-bold drop-shadow-sm\", [_unref(numberTextClass), _unref(numberSizeClass)]])\n                    }, _toDisplayString(_unref(displayValue)), 3 /* TEXT, CLASS */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createVNode as _createVNode, isRef as _isRef, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createBlock as _createBlock, Fragment as _Fragment, renderList as _renderList, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = { class: \"absolute top-4 left-4 z-50 pointer-events-auto flex flex-col gap-2 scale-[1.1] origin-top-left\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"mt-1 w-52 bg-[#1a1520]/95 border border-white/10 rounded-xl p-3 text-xs text-dungeon-paper shadow-xl backdrop-blur-md\"\n};\nconst _hoisted_5 = { class: \"flex flex-col gap-3\" };\nconst _hoisted_6 = { class: \"flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_7 = { class: \"absolute top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-none scale-[1.1] origin-top\" };\nconst _hoisted_8 = { class: \"flex flex-col items-center\" };\nconst _hoisted_9 = { class: \"text-lg font-heading font-bold text-white/90\" };\nconst _hoisted_10 = { class: \"absolute inset-0 z-10 pointer-events-none\" };\nconst _hoisted_11 = { class: \"absolute top-[3%] right-[2%] md:top-[5%] md:right-[3%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000 scale-[1.1] origin-top-right\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"absolute -left-48 top-8\"\n};\nconst _hoisted_13 = { class: \"relative\" };\nconst _hoisted_14 = { class: \"rotate-[-3deg] shadow-[0_0_20px_rgba(200,120,0,0.15)]\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_16 = { class: \"text-white/70\" };\nconst _hoisted_17 = { class: \"font-bold text-[#b08a2e]\" };\nconst _hoisted_18 = { class: \"relative w-full h-full\" };\nconst _hoisted_19 = { class: \"absolute bottom-0 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_20 = [\"src\"];\nconst _hoisted_21 = { class: \"relative overflow-visible mt-3 w-72 scale-[1.2] origin-top bg-[#18141e]/90 border border-white/8 p-3 rounded-xl shadow-lg backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_22 = { class: \"flex justify-between text-sm text-white/90 font-bold mb-1.5\" };\nconst _hoisted_23 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_25 = [\"aria-label\"];\nconst _hoisted_26 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_27 = [\"aria-label\"];\nconst _hoisted_28 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_29 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_30 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_31 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_32 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_33 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_34 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_35 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_36 = { class: \"text-[10px] text-red-300\" };\nconst _hoisted_37 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_38 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_39 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_40 = { class: \"absolute bottom-[18%] left-[3%] md:bottom-[22%] md:left-[6%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32 scale-[1.1] origin-bottom-left\" };\nconst _hoisted_41 = [\"title\"];\nconst _hoisted_42 = {\n    key: 0,\n    class: \"absolute left-1/2 top-[4.6rem] -translate-x-1/2 rounded-md border border-white/15 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap pointer-events-none\"\n};\nconst _hoisted_43 = { class: \"text-white/70\" };\nconst _hoisted_44 = { class: \"font-bold text-red-800\" };\nconst _hoisted_45 = { class: \"relative w-full h-full\" };\nconst _hoisted_46 = { class: \"absolute bottom-4 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden\" };\nconst _hoisted_47 = {\n    key: 0,\n    class: \"size-20 bg-dungeon-gold/15 blur-2xl rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n};\nconst _hoisted_48 = { class: \"relative overflow-visible mt-2 w-60 scale-[1.2] origin-bottom bg-[#18141e]/90 border border-white/8 p-2.5 rounded-xl shadow-xl backdrop-blur-sm z-10 pointer-events-auto\" };\nconst _hoisted_49 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_50 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-1\"\n};\nconst _hoisted_51 = [\"aria-label\"];\nconst _hoisted_52 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_53 = [\"aria-label\"];\nconst _hoisted_54 = { class: \"text-[10px] text-green-300 font-bold\" };\nconst _hoisted_55 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_56 = { class: \"relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20\" };\nconst _hoisted_57 = { class: \"text-[10px] text-white/70 w-14 text-right\" };\nconst _hoisted_58 = { class: \"flex items-center gap-2 mb-1.5\" };\nconst _hoisted_59 = { class: \"flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20\" };\nconst _hoisted_60 = { class: \"text-[10px] text-white/60 w-14 text-right\" };\nconst _hoisted_61 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_62 = { class: \"text-[10px] text-dungeon-gold\" };\nconst _hoisted_63 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto\"\n};\nconst _hoisted_64 = [\"aria-label\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_65 = {\n    key: 0,\n    class: \"effect-stack-badge\"\n};\nconst _hoisted_66 = { class: \"absolute inset-0 z-[45] pointer-events-none overflow-hidden\" };\nconst _hoisted_67 = { class: \"absolute inset-0 z-30 flex flex-col pointer-events-none\" };\nconst _hoisted_68 = { class: \"flex-1 flex items-center justify-center relative\" };\nconst _hoisted_69 = {\n    key: 0,\n    class: \"relative w-full h-64 flex items-center justify-center z-50\"\n};\nconst _hoisted_70 = { class: \"pointer-events-none min-h-[200px] w-full flex items-end justify-center pb-6 px-4 space-x-4 relative\" };\nconst _hoisted_71 = { class: \"flex space-x-4 items-end mb-2 z-40 scale-[1.1] origin-bottom pointer-events-auto\" };\nconst _hoisted_72 = [\"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_73 = { class: \"absolute right-6 bottom-6 flex flex-col items-end gap-2.5 z-50 scale-[1.1] origin-bottom-right pointer-events-auto\" };\nconst _hoisted_74 = [\"disabled\"];\nconst _hoisted_75 = { class: \"flex space-x-3\" };\nconst _hoisted_76 = { class: \"relative group\" };\nconst _hoisted_77 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_78 = { class: \"relative group\" };\nconst _hoisted_79 = { class: \"text-[9px] text-white/40 mt-0.5\" };\nconst _hoisted_80 = { class: \"absolute right-0 top-14 z-40 pointer-events-auto select-none scale-[1.1] origin-top-right\" };\nconst _hoisted_81 = { class: \"flex items-start\" };\nconst _hoisted_82 = [\"title\"];\nconst _hoisted_83 = {\n    key: 0,\n    class: \"w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-1 text-[10px] font-mono text-gray-300\"\n};\nconst _hoisted_84 = [\"innerHTML\"];\nconst _hoisted_85 = {\n    key: 0,\n    class: \"absolute inset-0 z-[70] flex items-center justify-center pointer-events-none\"\n};\nconst _hoisted_86 = { class: \"effect-tooltip-name\" };\nconst _hoisted_87 = { class: \"effect-tooltip-desc\" };\nconst _hoisted_88 = {\n    key: 0,\n    class: \"effect-tooltip-stacks\"\n};\nconst _hoisted_89 = { class: \"flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2\" };\nconst _hoisted_90 = { class: \"font-heading text-xl text-dungeon-gold\" };\nconst _hoisted_91 = { class: \"overflow-y-auto grid grid-cols-4 gap-4 p-2\" };\nimport { Ban, Battery, Bone, Box, Bug, Droplet, Flame, Heart, Layers, Link2, Scroll, Settings2, Shield, ShieldCheck, Skull, Snowflake, Sparkles, Trash2, TriangleAlert, Waves, X as XIcon, Zap, } from 'lucide-vue-next';\nimport { applyDamageToEntity, calculateFinalDamage, calculateFinalPoint, consumeColdAfterDealingDamage, triggerSwarmReviveIfNeeded } from '../battle/algorithms';\nimport { EFFECT_REGISTRY, applyEffect, canPlayCard, getEffectStacks, processOnTurnEnd, processOnTurnStart, reduceEffectStacks, removeEffect } from '../battle/effects';\nimport { getEnemyByName } from '../battle/enemyRegistry';\nimport { resolveRelicMap, } from '../battle/relicRegistry';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { CardType, CombatPhase, EffectType as ET } from '../types';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\n\nimport { computed, ref, reactive, onMounted, onUnmounted, watch } from 'vue';\nconst playerPortraitUrl = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/user/%E7%AB%8B%E7%BB%98.png';\nconst HF_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst SPEED_SETTING_KEY = 'dungeon.combat.speed_up';\nconst HP_BAR_ANIMATION_MS = 500;\nconst RESULT_DELAY_MS = 500;\nconst RESULT_BANNER_STAY_MS = 1500;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatView',\n    props: {\n        initialPlayerStats: {},\n        enemyName: {},\n        playerDeck: {},\n        playerRelics: { default: () => ({}) },\n        testStartAt999: { type: Boolean, default: false }\n    },\n    emits: [\"endCombat\", \"openDeck\", \"openRelics\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // --- Enemy Loading ---\n        const enemyDef = getEnemyByName(props.enemyName);\n        const enemyDisplayName = enemyDef?.name ?? props.enemyName;\n        // --- Portrait URLs ---\n        const enemyPortraitUrl = computed(() => `https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/${encodeURIComponent(enemyDisplayName)}.png`);\n        const playerPortraitError = ref(false);\n        const enemyPortraitError = ref(false);\n        // --- Dynamic Background ---\n        const gameStore = useGameStore();\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const currentArea = computed(() => gameStore.statData._ || '');\n        const currentRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!currentArea.value || bgImageError.value)\n                return '';\n            const isLord = currentRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${currentArea.value}_` : currentArea.value;\n            return `${HF_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (currentRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true; // fallback to normal area bg\n            }\n            else {\n                bgImageError.value = true; // give up, show gradient\n            }\n        }\n        // AI flags - mutable state for enemy AI decisions (e.g. hasUsedHeal)\n        const aiFlags = reactive({});\n        // --- State ---\n        const cloneEntityStats = (stats) => ({\n            ...stats,\n            effects: stats.effects.map((eff) => ({\n                ...eff,\n                restrictedTypes: eff.restrictedTypes ? [...eff.restrictedTypes] : undefined,\n            })),\n        });\n        const normalizeTestStartStats = (stats) => {\n            const cloned = cloneEntityStats(stats);\n            if (!props.testStartAt999)\n                return cloned;\n            return { ...cloned, hp: 999, maxHp: 999, mp: 999 };\n        };\n        const playerStats = ref(normalizeTestStartStats(props.initialPlayerStats));\n        const enemyStats = ref(normalizeTestStartStats(enemyDef\n            ? enemyDef.stats\n            : { hp: 1, maxHp: 1, mp: 0, minDice: 1, maxDice: 1, effects: [] }));\n        // --- Effect display helpers ---\n        const getEffectName = (type) => {\n            return EFFECT_REGISTRY[type]?.name ?? String(type);\n        };\n        const getEffectDescription = (type) => {\n            return EFFECT_REGISTRY[type]?.description ?? '';\n        };\n        const createStatusEffectPreview = (type, stacks) => ({\n            type,\n            stacks: Math.max(1, Math.floor(stacks)),\n            polarity: EFFECT_REGISTRY[type]?.polarity ?? 'special',\n        });\n        const EFFECT_ICON_COMPONENTS = {\n            [ET.BARRIER]: ShieldCheck,\n            [ET.ARMOR]: Shield,\n            [ET.BIND]: Link2,\n            [ET.DEVOUR]: Skull,\n            [ET.POISON]: Bug,\n            [ET.POISON_AMOUNT]: Droplet,\n            [ET.BURN]: Flame,\n            [ET.BLEED]: Droplet,\n            [ET.VULNERABLE]: TriangleAlert,\n            [ET.REGEN]: Heart,\n            [ET.IGNITE_AURA]: Sparkles,\n            [ET.STUN]: Ban,\n            [ET.CHARGE]: Zap,\n            [ET.COLD]: Snowflake,\n            [ET.NON_LIVING]: Bone,\n            [ET.MANA_DRAIN]: Battery,\n            [ET.MANA_SPRING]: Waves,\n            [ET.SWARM]: Bug,\n            [ET.INDOMITABLE]: Heart,\n        };\n        const getEffectIconComponent = (type) => {\n            return EFFECT_ICON_COMPONENTS[type] ?? Sparkles;\n        };\n        const effectIconBoxClass = (polarity) => {\n            switch (polarity) {\n                case 'buff': return 'bg-emerald-900/65 border-emerald-400/50 text-emerald-200';\n                case 'debuff': return 'bg-red-900/65 border-red-400/55 text-red-200';\n                case 'trait': return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n                case 'mixed': return 'bg-indigo-900/70 border-indigo-400/55 text-indigo-200';\n                case 'special': return 'bg-amber-900/70 border-amber-400/55 text-amber-200';\n                default: return 'bg-slate-800/70 border-slate-400/45 text-slate-200';\n            }\n        };\n        // --- Armor computed ---\n        const playerArmor = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyArmor = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmount = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const enemyPoisonAmount = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.POISON_AMOUNT);\n            return eff?.stacks ?? 0;\n        });\n        const playerPoisonAmountPercent = computed(() => {\n            if (playerStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((playerPoisonAmount.value / playerStats.value.maxHp) * 100, 100));\n        });\n        const enemyPoisonAmountPercent = computed(() => {\n            if (enemyStats.value.maxHp <= 0)\n                return 0;\n            return Math.max(0, Math.min((enemyPoisonAmount.value / enemyStats.value.maxHp) * 100, 100));\n        });\n        const playerVisibleEffects = computed(() => playerStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const enemyVisibleEffects = computed(() => enemyStats.value.effects.filter(e => e.type !== ET.ARMOR && e.type !== ET.POISON_AMOUNT));\n        const cloneCardForBattle = (card) => ({\n            ...card,\n            calculation: { ...card.calculation },\n            damageLogic: { ...card.damageLogic },\n            traits: { ...card.traits },\n            cardEffects: card.cardEffects.map((ce) => ({\n                ...ce,\n                restrictedTypes: ce.restrictedTypes ? [...ce.restrictedTypes] : undefined,\n                cleanseTypes: ce.cleanseTypes ? [...ce.cleanseTypes] : undefined,\n            })),\n        });\n        const toBattleDeck = (cards) => cards.map(cloneCardForBattle);\n        const enemyDeck = enemyDef ? toBattleDeck(enemyDef.deck) : [];\n        // dummy card to prevent crash if enemy has no cards\n        const PASS_CARD = {\n            id: 'pass', name: '', type: CardType.FUNCTION, category: '', rarity: '', manaCost: 0,\n            calculation: { multiplier: 0, addition: 0 }, damageLogic: { mode: 'fixed', value: 0 },\n            traits: { combo: false, reroll: 'none', draw: false }, cardEffects: [], description: '',\n        };\n        const combatState = ref({\n            turn: 1,\n            phase: CombatPhase.TURN_START,\n            actionsRemaining: 1,\n            playerBaseDice: 1,\n            enemyBaseDice: 1,\n            playerHand: [],\n            playerDeck: toBattleDeck(props.playerDeck).sort(() => Math.random() - 0.5),\n            discardPile: [],\n            enemyDeck: [...enemyDeck],\n            enemyDiscard: [],\n            enemyIntentCard: null,\n            enemyPredictedPoint: 0,\n            playerSelectedCard: null,\n            lastPlayedCard: null,\n            logs: [` <span class=\"text-red-500 font-bold\">${enemyDisplayName}</span>`],\n        });\n        const isRolling = ref(false);\n        const showClashAnimation = ref(false);\n        const shatteringTarget = ref(null);\n        const screenShake = ref(false);\n        const impactShake = ref(false);\n        const overlayOpen = ref(null);\n        const settingsOpen = ref(false);\n        const battleSpeedUp = ref(false);\n        const logsCollapsed = ref(true);\n        const battleResultBanner = ref(null);\n        const endCombatPending = ref(false);\n        const enemyIntentConsumedThisTurn = ref(false);\n        const combatRootEl = ref(null);\n        const effectTooltip = ref(null);\n        const speedMultiplier = computed(() => (battleSpeedUp.value ? 2 : 1));\n        const combatRootStyle = computed(() => ({ '--combat-speed-multiplier': String(speedMultiplier.value) }));\n        const floatingNumbers = ref([]);\n        const previewPlayerDice = ref(null);\n        const previewEnemyDice = ref(null);\n        const displayPlayerDice = computed(() => previewPlayerDice.value ?? combatState.value.playerBaseDice);\n        const displayEnemyDice = computed(() => previewEnemyDice.value ?? combatState.value.enemyBaseDice);\n        const canPlayerRerollDice = computed(() => (playerDiceRerollCharges.value > 0\n            && combatState.value.phase === CombatPhase.PLAYER_INPUT\n            && !isRolling.value\n            && !showClashAnimation.value\n            && !endCombatPending.value));\n        const playerDiceRerollHint = computed(() => {\n            if (playerDiceRerollCharges.value <= 0)\n                return '';\n            return `${playerDiceRerollCharges.value}`;\n        });\n        const playerDicePreviewChanged = computed(() => (previewPlayerDice.value !== null && previewPlayerDice.value !== combatState.value.playerBaseDice));\n        const enemyDicePreviewChanged = computed(() => (previewEnemyDice.value !== null && previewEnemyDice.value !== combatState.value.enemyBaseDice));\n        const playerPlayedCardVisual = ref(null);\n        const resolvedCardVisual = ref(null);\n        let hoverPreviewTimer = null;\n        let enemyDicePreviewTimer = null;\n        let effectTooltipLongPressTimer = null;\n        let effectTooltipAutoHideTimer = null;\n        let floatingNumberId = 0;\n        let handCardKeySeed = 0;\n        let playerPlayedCardVisualId = 0;\n        let resolvedCardVisualId = 0;\n        let animationStopToken = 0;\n        let endCombatSequenceToken = 0;\n        const handCardKeys = new WeakMap();\n        const invalidCardShakeKeys = ref(new Set());\n        // Default relic modifiers (no relics yet)\n        const NO_RELIC_MOD = { globalMultiplier: 1, globalAddition: 0 };\n        const activePlayerRelics = resolveRelicMap(props.playerRelics);\n        const playerDiceRerollCharges = ref(0);\n        const relicRuntimeState = reactive({});\n        const getEntityBySide = (side) => (side === 'player' ? playerStats.value : enemyStats.value);\n        const getRelicRuntimeState = (relicId) => {\n            if (!relicRuntimeState[relicId]) {\n                relicRuntimeState[relicId] = {};\n            }\n            return relicRuntimeState[relicId];\n        };\n        const hasActiveRelic = (id) => activePlayerRelics.some((entry) => entry.relic.id === id && entry.count > 0);\n        const getActiveRelicCount = (id) => (activePlayerRelics.find((entry) => entry.relic.id === id)?.count ?? 0);\n        const changeRerollCharges = (side, delta) => {\n            if (side !== 'player')\n                return;\n            playerDiceRerollCharges.value = Math.max(0, playerDiceRerollCharges.value + Math.floor(delta));\n        };\n        const consumeRerollCharge = (side, amount = 1) => {\n            if (side !== 'player')\n                return false;\n            const need = Math.max(1, Math.floor(amount));\n            if (playerDiceRerollCharges.value < need)\n                return false;\n            playerDiceRerollCharges.value -= need;\n            return true;\n        };\n        const getRerollCharges = (side) => {\n            if (side !== 'player')\n                return 0;\n            return playerDiceRerollCharges.value;\n        };\n        const forEachPlayerRelic = (callback) => {\n            for (const entry of activePlayerRelics) {\n                callback(entry, entry.relic, getRelicRuntimeState(entry.relic.id));\n            }\n        };\n        const logRelicMessage = (message) => {\n            log(`<span class=\"text-amber-300 text-[9px]\">[] ${message}</span>`);\n        };\n        const addArmorForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const added = applyEffect(target, ET.ARMOR, value, { source: 'relic' }) ? value : 0;\n            if (added > 0) {\n                pushFloatingNumber(side, added, 'shield', '+');\n            }\n            return added;\n        };\n        const restoreManaForSide = (side, amount) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return 0;\n            const target = getEntityBySide(side);\n            const before = target.mp;\n            target.mp = Math.max(0, target.mp + value);\n            const delta = target.mp - before;\n            if (delta > 0) {\n                pushFloatingNumber(side, delta, 'mana', '+');\n            }\n            return delta;\n        };\n        const healForSide = (side, amount, options) => {\n            const value = Math.max(0, Math.floor(amount));\n            if (value <= 0)\n                return { healed: 0, overflow: 0 };\n            const target = getEntityBySide(side);\n            const before = target.hp;\n            target.hp = Math.max(0, Math.min(target.maxHp, target.hp + value));\n            const healed = target.hp - before;\n            const overflowRaw = Math.max(0, value - healed);\n            if (healed > 0) {\n                pushFloatingNumber(side, healed, 'heal', '+');\n            }\n            if (options?.overflowToArmor && overflowRaw > 0) {\n                addArmorForSide(side, overflowRaw);\n            }\n            return { healed, overflow: overflowRaw };\n        };\n        const shouldAllowStatusEffectWithRelics = (targetSide, effectType, stacks, options) => {\n            let allowed = true;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                if (!allowed)\n                    return;\n                const hook = relic.hooks?.onBeforeApplyEffect;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    self: playerStats.value,\n                    opponent: enemyStats.value,\n                    state,\n                    addLog: logRelicMessage,\n                    hasRelic: hasActiveRelic,\n                    getRelicCount: getActiveRelicCount,\n                    addStatusEffect: (side, targetEffectType, targetStacks, applyOptions) => (applyStatusEffectWithRelics(side, targetEffectType, targetStacks, applyOptions)),\n                    addArmor: addArmorForSide,\n                    restoreMana: restoreManaForSide,\n                    heal: healForSide,\n                    addRerollCharges: changeRerollCharges,\n                    getRerollCharges,\n                    targetSide,\n                    target,\n                    effectType,\n                    stacks,\n                    source: options?.source,\n                    restrictedTypes: options?.restrictedTypes,\n                };\n                const result = hook(ctx);\n                if (result === false) {\n                    allowed = false;\n                }\n            });\n            return allowed;\n        };\n        const applyStatusEffectWithRelics = (side, effectType, stacks, options) => {\n            const value = Math.max(0, Math.floor(stacks));\n            if (value <= 0)\n                return false;\n            if (!shouldAllowStatusEffectWithRelics(side, effectType, value, options))\n                return false;\n            const target = getEntityBySide(side);\n            return applyEffect(target, effectType, value, {\n                restrictedTypes: options?.restrictedTypes,\n                source: options?.source,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            });\n        };\n        const createPlayerLifecycleContext = (relic, count, state) => ({\n            count,\n            side: 'player',\n            self: playerStats.value,\n            opponent: enemyStats.value,\n            state,\n            addLog: logRelicMessage,\n            hasRelic: hasActiveRelic,\n            getRelicCount: getActiveRelicCount,\n            addStatusEffect: (side, effectType, stacks, options) => (applyStatusEffectWithRelics(side, effectType, stacks, {\n                source: options?.source ?? `relic:${relic.id}`,\n                restrictedTypes: options?.restrictedTypes,\n                lockDecayThisTurn: options?.lockDecayThisTurn,\n            })),\n            addArmor: addArmorForSide,\n            restoreMana: restoreManaForSide,\n            heal: healForSide,\n            addRerollCharges: changeRerollCharges,\n            getRerollCharges,\n        });\n        const triggerPlayerRelicLifecycleHooks = (hookName) => {\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.[hookName];\n                if (!hook)\n                    return;\n                hook(createPlayerLifecycleContext(relic, entry.count, state));\n            });\n        };\n        const triggerPlayerRelicBeforeBurnDamageHooks = (targetSide, burnStacks, damage, turn) => {\n            let currentDamage = Math.max(0, Math.floor(damage));\n            let isTrueDamage = false;\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onBeforeBurnDamage;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: currentDamage,\n                    isTrueDamage,\n                };\n                hook(ctx);\n                currentDamage = Math.max(0, Math.floor(ctx.damage));\n                isTrueDamage = !!ctx.isTrueDamage;\n            });\n            return { damage: currentDamage, isTrueDamage };\n        };\n        const triggerPlayerRelicAfterBurnDamageTakenHooks = (targetSide, burnStacks, damage, isTrueDamage, turn) => {\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const hook = relic.hooks?.onAfterBurnDamageTaken;\n                if (!hook)\n                    return;\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    targetSide,\n                    target,\n                    turn,\n                    burnStacks,\n                    damage: Math.max(0, Math.floor(damage)),\n                    isTrueDamage,\n                };\n                hook(ctx);\n            });\n        };\n        const triggerPlayerRelicHitHooks = (sourceSide, targetSide, card, finalPoint, hitIndex, hitCount, attemptedDamage, actualDamage) => {\n            const source = getEntityBySide(sourceSide);\n            const target = getEntityBySide(targetSide);\n            forEachPlayerRelic((entry, relic, state) => {\n                const shared = createPlayerLifecycleContext(relic, entry.count, state);\n                const ctx = {\n                    ...shared,\n                    sourceSide,\n                    targetSide,\n                    source,\n                    target,\n                    card,\n                    finalPoint,\n                    hitIndex,\n                    hitCount,\n                    attemptedDamage: Math.max(0, Math.floor(attemptedDamage)),\n                    actualDamage: Math.max(0, Math.floor(actualDamage)),\n                };\n                relic.hooks?.onAfterHitDealt?.(ctx);\n                relic.hooks?.onAfterHitTaken?.(ctx);\n            });\n        };\n        // --- Helpers ---\n        const scaleDuration = (ms) => Math.max(60, Math.floor(ms / speedMultiplier.value));\n        const wait = (ms) => new Promise((resolve) => setTimeout(resolve, scaleDuration(ms)));\n        const transitionStyle = (ms) => ({ transitionDuration: `${scaleDuration(ms)}ms` });\n        const withTransition = (style, ms) => ({\n            ...style,\n            transitionDuration: `${scaleDuration(ms)}ms`,\n        });\n        const playerPlayedCardStyle = computed(() => {\n            const visual = playerPlayedCardVisual.value;\n            const entered = !!visual?.entered;\n            return {\n                left: entered ? '29%' : '50%',\n                top: entered ? '23%' : '84%',\n                transform: `translate(-50%, -50%) scale(${entered ? 1 : 0.96})`,\n                opacity: entered ? '1' : '0',\n                transitionProperty: 'left, top, transform, opacity',\n                transitionDuration: `${scaleDuration(540)}ms`,\n                transitionTimingFunction: 'cubic-bezier(0.22, 0.9, 0.2, 1)',\n            };\n        });\n        const resolvedCardVisualInnerClass = computed(() => {\n            if (!resolvedCardVisual.value)\n                return '';\n            const sideClass = resolvedCardVisual.value.source === 'player'\n                ? 'resolved-card-visual-inner--player'\n                : 'resolved-card-visual-inner--enemy';\n            const variantClass = resolvedCardVisual.value.variant === 'attack'\n                ? 'resolved-card-visual-inner--attack'\n                : (resolvedCardVisual.value.variant === 'self'\n                    ? 'resolved-card-visual-inner--self'\n                    : 'resolved-card-visual-inner--fade');\n            return `${sideClass} ${variantClass}`;\n        });\n        const showEnemyIntentCard = computed(() => {\n            if (!combatState.value.enemyIntentCard)\n                return false;\n            if (enemyIntentConsumedThisTurn.value)\n                return false;\n            return !(resolvedCardVisual.value && resolvedCardVisual.value.source === 'enemy');\n        });\n        const floatingColors = {\n            physical: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            magic: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            shield: 'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',\n            heal: 'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',\n            mana: 'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',\n            true: 'text-zinc-500 drop-shadow-[0_0_8px_rgba(39,39,42,0.9)]',\n        };\n        const floatingNumbersFor = (side) => floatingNumbers.value.filter((entry) => entry.side === side);\n        const handCardKey = (card) => {\n            let key = handCardKeys.get(card);\n            if (!key) {\n                handCardKeySeed += 1;\n                key = `hand-${handCardKeySeed}`;\n                handCardKeys.set(card, key);\n            }\n            return key;\n        };\n        const isCardShaking = (card) => invalidCardShakeKeys.value.has(handCardKey(card));\n        const triggerInvalidCardShake = (card) => {\n            const key = handCardKey(card);\n            const withoutKey = new Set(invalidCardShakeKeys.value);\n            withoutKey.delete(key);\n            invalidCardShakeKeys.value = withoutKey;\n            requestAnimationFrame(() => {\n                const next = new Set(invalidCardShakeKeys.value);\n                next.add(key);\n                invalidCardShakeKeys.value = next;\n                setTimeout(() => {\n                    const removed = new Set(invalidCardShakeKeys.value);\n                    removed.delete(key);\n                    invalidCardShakeKeys.value = removed;\n                }, scaleDuration(360));\n            });\n        };\n        const resolveTargetSide = (source, target) => {\n            if (target === 'self')\n                return source;\n            return source === 'player' ? 'enemy' : 'player';\n        };\n        const consumeChargeOnRoll = (stats, label, rolled) => {\n            const chargeStacks = getEffectStacks(stats, ET.CHARGE);\n            if (chargeStacks <= 0)\n                return rolled;\n            removeEffect(stats, ET.CHARGE);\n            const boosted = Math.max(0, Math.floor(rolled + chargeStacks));\n            log(`<span class=\"text-cyan-300\">${label}[] +${chargeStacks} ${rolled}  ${boosted}</span>`);\n            return boosted;\n        };\n        const clearDicePreview = () => {\n            previewPlayerDice.value = null;\n            previewEnemyDice.value = null;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n        };\n        const clearPlayerPlayedCard = () => {\n            playerPlayedCardVisual.value = null;\n        };\n        const clearResolvedCardVisual = () => {\n            resolvedCardVisual.value = null;\n        };\n        const stopAllCardAnimations = () => {\n            animationStopToken += 1;\n            clearPlayerPlayedCard();\n            clearResolvedCardVisual();\n            impactShake.value = false;\n            showClashAnimation.value = false;\n            shatteringTarget.value = null;\n        };\n        const showPlayerPlayedCard = (card) => {\n            if (endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const id = ++playerPlayedCardVisualId;\n            playerPlayedCardVisual.value = { id, card, entered: false };\n            requestAnimationFrame(() => {\n                if (token !== animationStopToken || endCombatPending.value)\n                    return;\n                if (playerPlayedCardVisual.value?.id === id) {\n                    playerPlayedCardVisual.value.entered = true;\n                }\n            });\n        };\n        const playResolvedCardAnimation = async (source, card) => {\n            if (card.id === PASS_CARD.id || endCombatPending.value)\n                return;\n            const token = animationStopToken;\n            const variant = (card.type === CardType.PHYSICAL || card.type === CardType.MAGIC)\n                ? 'attack'\n                : (card.type === CardType.DODGE ? 'fade' : 'self');\n            const id = ++resolvedCardVisualId;\n            resolvedCardVisual.value = { id, source, card, variant };\n            if (variant === 'attack') {\n                const impactDelay = scaleDuration(720);\n                setTimeout(() => {\n                    if (token !== animationStopToken || endCombatPending.value)\n                        return;\n                    impactShake.value = true;\n                    setTimeout(() => {\n                        if (token !== animationStopToken)\n                            return;\n                        impactShake.value = false;\n                    }, scaleDuration(220));\n                }, impactDelay);\n            }\n            const animDuration = variant === 'attack' ? 930 : 570;\n            await wait(animDuration);\n            if (token !== animationStopToken || endCombatPending.value)\n                return;\n            if (resolvedCardVisual.value?.id === id) {\n                resolvedCardVisual.value = null;\n            }\n        };\n        const getCardFinalPoint = (source, card, baseDice, isPreview = false) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            // 2+1\n            if (card.id === 'burn_inferno_judgement') {\n                finalPoint += Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n            }\n            if (source === 'player') {\n                forEachPlayerRelic((entry, relic, state) => {\n                    const hook = relic.hooks?.modifyFinalPoint;\n                    if (!hook)\n                        return;\n                    const ctx = {\n                        count: entry.count,\n                        side: 'player',\n                        card,\n                        baseDice,\n                        currentPoint: finalPoint,\n                        self: attacker,\n                        opponent: defender,\n                        state,\n                        isPreview,\n                        addLog: logRelicMessage,\n                        hasRelic: hasActiveRelic,\n                        getRelicCount: getActiveRelicCount,\n                    };\n                    finalPoint = hook(ctx);\n                });\n            }\n            return Math.max(0, Math.floor(finalPoint));\n        };\n        const getCardPreviewPoint = (source, card, baseDice) => {\n            return getCardFinalPoint(source, card, baseDice, true);\n        };\n        const handlePlayerCardHoverStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n        };\n        const handlePlayerCardHoverEnd = () => {\n            previewPlayerDice.value = null;\n        };\n        const handlePlayerCardTouchStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (hoverPreviewTimer)\n                clearTimeout(hoverPreviewTimer);\n            hoverPreviewTimer = setTimeout(() => {\n                previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n            }, 260);\n        };\n        const handlePlayerCardTouchEnd = () => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            previewPlayerDice.value = null;\n        };\n        const rollDiceInRange = (min, max) => {\n            const low = Math.floor(Math.min(min, max));\n            const high = Math.floor(Math.max(min, max));\n            if (high <= low)\n                return low;\n            return Math.floor(Math.random() * (high - low + 1)) + low;\n        };\n        const handlePlayerDiceClick = () => {\n            if (!canPlayerRerollDice.value)\n                return;\n            let rerolled = null;\n            forEachPlayerRelic((entry, relic, state) => {\n                if (rerolled !== null)\n                    return;\n                const hook = relic.hooks?.onDiceClick;\n                if (!hook)\n                    return;\n                const ctx = {\n                    count: entry.count,\n                    side: 'player',\n                    currentDice: combatState.value.playerBaseDice,\n                    minDice: playerStats.value.minDice,\n                    maxDice: playerStats.value.maxDice,\n                    state,\n                    roll: rollDiceInRange,\n                    consumeRerollCharge,\n                    getRerollCharges,\n                    addLog: logRelicMessage,\n                };\n                rerolled = hook(ctx);\n            });\n            if (rerolled === null)\n                return;\n            const before = combatState.value.playerBaseDice;\n            const after = consumeChargeOnRoll(playerStats.value, '', Math.max(0, Math.floor(rerolled)));\n            combatState.value.playerBaseDice = after;\n            previewPlayerDice.value = null;\n            log(`<span class=\"text-amber-200\">${before}  ${after}</span>`);\n        };\n        const canPreviewEnemyDice = () => {\n            return (combatState.value.phase === CombatPhase.PLAYER_INPUT &&\n                !isRolling.value &&\n                !showClashAnimation.value &&\n                !!combatState.value.enemyIntentCard);\n        };\n        const getEnemyIntentFinalPoint = () => {\n            const card = combatState.value.enemyIntentCard;\n            if (!card)\n                return null;\n            return getCardPreviewPoint('enemy', card, combatState.value.enemyBaseDice);\n        };\n        const showEnemyDicePreview = () => {\n            if (!canPreviewEnemyDice())\n                return;\n            const preview = getEnemyIntentFinalPoint();\n            if (preview === null)\n                return;\n            previewEnemyDice.value = preview;\n        };\n        const hideEnemyDicePreview = () => {\n            if (showClashAnimation.value)\n                return;\n            previewEnemyDice.value = null;\n        };\n        const handleEnemyDiceHoverStart = () => {\n            showEnemyDicePreview();\n        };\n        const handleEnemyDiceHoverEnd = () => {\n            hideEnemyDicePreview();\n        };\n        const handleEnemyDiceTouchStart = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            enemyDicePreviewTimer = setTimeout(() => {\n                showEnemyDicePreview();\n            }, 260);\n        };\n        const handleEnemyDiceTouchEnd = () => {\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            hideEnemyDicePreview();\n        };\n        const clearEffectTooltipTimers = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n            if (effectTooltipAutoHideTimer) {\n                clearTimeout(effectTooltipAutoHideTimer);\n                effectTooltipAutoHideTimer = null;\n            }\n        };\n        const showEffectTooltipForTarget = (target, effect, align = 'center') => {\n            const rootRect = combatRootEl.value?.getBoundingClientRect();\n            if (!rootRect)\n                return;\n            const rect = target.getBoundingClientRect();\n            const top = Math.max(8, rect.top - rootRect.top - 8);\n            const tooltipMaxWidth = 256;\n            const x = align === 'right'\n                ? Math.max(8, Math.min(rect.right - rootRect.left + 10, rootRect.width - tooltipMaxWidth - 8))\n                : Math.max(100, Math.min(rect.left + rect.width / 2 - rootRect.left, rootRect.width - 100));\n            effectTooltip.value = {\n                x,\n                y: top,\n                name: getEffectName(effect.type),\n                description: getEffectDescription(effect.type),\n                stacks: effect.stacks,\n                align,\n            };\n        };\n        const showEffectTooltip = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            showEffectTooltipForTarget(target, effect, align);\n        };\n        const hideEffectTooltip = () => {\n            clearEffectTooltipTimers();\n            effectTooltip.value = null;\n        };\n        const handleEffectTouchStart = (event, effect, align = 'center') => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearEffectTooltipTimers();\n            effectTooltipLongPressTimer = setTimeout(() => {\n                showEffectTooltipForTarget(target, effect, align);\n                effectTooltipAutoHideTimer = setTimeout(() => {\n                    effectTooltip.value = null;\n                    effectTooltipAutoHideTimer = null;\n                }, scaleDuration(1800));\n            }, scaleDuration(320));\n        };\n        const handleEffectTouchEnd = () => {\n            if (effectTooltipLongPressTimer) {\n                clearTimeout(effectTooltipLongPressTimer);\n                effectTooltipLongPressTimer = null;\n            }\n        };\n        const pushFloatingNumber = (side, value, kind, sign = '+') => {\n            const amount = Math.max(0, Math.floor(value));\n            if (amount <= 0)\n                return;\n            const id = ++floatingNumberId;\n            // Extend popup lifetime by ~50% for better readability.\n            const duration = scaleDuration(1350);\n            floatingNumbers.value.push({\n                id,\n                side,\n                text: `${sign}${amount}`,\n                colorClass: floatingColors[kind],\n                leftOffset: Math.floor((Math.random() - 0.5) * 120),\n                topOffset: 24 + Math.floor(Math.random() * 20),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const log = (msg) => {\n            combatState.value.logs = [msg, ...combatState.value.logs].slice(0, 240);\n        };\n        if (activePlayerRelics.length > 0) {\n            const relicSummary = activePlayerRelics\n                .map((entry) => (entry.count > 1 ? `${entry.relic.name}x${entry.count}` : entry.relic.name))\n                .join('');\n            log(`<span class=\"text-amber-300\">${relicSummary}</span>`);\n        }\n        triggerPlayerRelicLifecycleHooks('onBattleStart');\n        onMounted(() => {\n            battleSpeedUp.value = localStorage.getItem(SPEED_SETTING_KEY) === '1';\n        });\n        onUnmounted(() => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            if (enemyDicePreviewTimer) {\n                clearTimeout(enemyDicePreviewTimer);\n                enemyDicePreviewTimer = null;\n            }\n            clearEffectTooltipTimers();\n        });\n        watch(battleSpeedUp, (enabled) => {\n            localStorage.setItem(SPEED_SETTING_KEY, enabled ? '1' : '0');\n        });\n        const drawCards = (count, currentDeck, currentDiscard) => {\n            let deck = [...currentDeck];\n            let discard = [...currentDiscard];\n            const drawn = [];\n            for (let i = 0; i < count; i++) {\n                if (deck.length === 0) {\n                    if (discard.length === 0)\n                        break;\n                    deck = [...discard].sort(() => Math.random() - 0.5);\n                    discard = [];\n                    log('<span class=\"text-yellow-500\"></span>');\n                    triggerPlayerRelicLifecycleHooks('onDeckShuffle');\n                }\n                const card = deck.pop();\n                if (card)\n                    drawn.push(card);\n            }\n            return { drawn, newDeck: deck, newDiscard: discard };\n        };\n        const handCardClass = (card) => {\n            const selected = combatState.value.playerSelectedCard;\n            const isSelected = selected === card;\n            const isNotSelected = selected && !isSelected;\n            const isActionPhase = combatState.value.phase === CombatPhase.PLAYER_INPUT;\n            return [\n                isSelected ? '-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]' : '',\n                isNotSelected ? 'opacity-30 scale-90 translate-y-8 grayscale' : 'hover:scale-110 hover:-translate-y-4 hover:z-50',\n                !isActionPhase && !isSelected ? 'opacity-50 grayscale cursor-not-allowed' : 'cursor-pointer',\n            ];\n        };\n        // --- Enemy AI Card Selection ---\n        function selectEnemyCard() {\n            // \n            if (getEffectStacks(enemyStats.value, ET.STUN) > 0) {\n                log('<span class=\"text-gray-400\"></span>');\n                return PASS_CARD;\n            }\n            if (combatState.value.enemyDeck.length === 0) {\n                if (combatState.value.enemyDiscard.length === 0)\n                    return PASS_CARD; // Fallback\n                combatState.value.enemyDeck = [...combatState.value.enemyDiscard].sort(() => Math.random() - 0.5);\n                combatState.value.enemyDiscard = [];\n            }\n            let selectedCard;\n            if (enemyDef) {\n                // Use the enemy's custom AI logic\n                const ctx = {\n                    enemyStats: enemyStats.value,\n                    playerStats: playerStats.value,\n                    deck: combatState.value.enemyDeck,\n                    turn: combatState.value.turn,\n                    flags: aiFlags,\n                };\n                selectedCard = enemyDef.selectCard(ctx);\n            }\n            else {\n                // Fallback: random selection (should never happen with proper registry)\n                const idx = Math.floor(Math.random() * combatState.value.enemyDeck.length);\n                selectedCard = combatState.value.enemyDeck[idx];\n            }\n            const check = canPlayCard(enemyStats.value, selectedCard, combatState.value.enemyBaseDice);\n            if (!check.allowed) {\n                log(`<span class=\"text-gray-400\">${check.reason ?? ''}</span>`);\n                return PASS_CARD;\n            }\n            return selectedCard;\n        }\n        // --- Phase Management ---\n        const startTurn = () => {\n            if (endCombatPending.value)\n                return;\n            clearDicePreview();\n            stopAllCardAnimations();\n            combatState.value.phase = CombatPhase.DRAW_PHASE;\n            combatState.value.playerSelectedCard = null;\n            combatState.value.enemyIntentCard = null;\n            enemyIntentConsumedThisTurn.value = false;\n            isRolling.value = true;\n            shatteringTarget.value = null;\n            showClashAnimation.value = false;\n            triggerPlayerRelicLifecycleHooks('onTurnStart');\n            setTimeout(() => {\n                if (endCombatPending.value)\n                    return;\n                const pRawRoll = Math.floor(Math.random() * (playerStats.value.maxDice - playerStats.value.minDice + 1)) + playerStats.value.minDice;\n                const eRawRoll = Math.floor(Math.random() * (enemyStats.value.maxDice - enemyStats.value.minDice + 1)) + enemyStats.value.minDice;\n                const pRoll = consumeChargeOnRoll(playerStats.value, '', pRawRoll);\n                const eRoll = consumeChargeOnRoll(enemyStats.value, '', eRawRoll);\n                isRolling.value = false;\n                combatState.value.playerBaseDice = pRoll;\n                combatState.value.enemyBaseDice = eRoll;\n                combatState.value.phase = CombatPhase.DRAW_PHASE;\n                log(` [${pRoll}] vs  [${eRoll}]`);\n            }, scaleDuration(1500));\n        };\n        // Watch for INIT phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.TURN_START) {\n                // Process turn-start effects (poison, burn, mana spring, etc.)\n                if (combatState.value.turn > 1) {\n                    for (const [side, label, stats] of [['player', '', playerStats], ['enemy', '', enemyStats]]) {\n                        const targetSide = side;\n                        const opponentSide = side === 'player' ? 'enemy' : 'player';\n                        const result = processOnTurnStart(stats.value);\n                        let turnStartLogs = [...result.logs];\n                        let burnDamageTaken = 0;\n                        let shownTrueDamage = 0;\n                        let burnIsTrueDamage = false;\n                        for (const pending of result.applyToOpponent) {\n                            applyStatusEffectWithRelics(opponentSide, pending.type, pending.stacks, { source: 'effect:ignite_aura' });\n                        }\n                        // \n                        const burnLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (burnLog) {\n                            const burnMatch = burnLog.match(/\\s+(\\d+)\\s+/);\n                            const rawBurnDamage = burnMatch ? Number(burnMatch[1]) : 0;\n                            const burnStacks = getEffectStacks(stats.value, ET.BURN);\n                            turnStartLogs = turnStartLogs.filter((entry) => entry !== burnLog);\n                            if (rawBurnDamage > 0) {\n                                const burnResult = triggerPlayerRelicBeforeBurnDamageHooks(targetSide, burnStacks, rawBurnDamage, combatState.value.turn);\n                                result.hpChange += rawBurnDamage; //  processOnTurnStart \n                                if (burnResult.damage > 0) {\n                                    if (burnResult.isTrueDamage) {\n                                        pushFloatingNumber(side, burnResult.damage, 'true', '-');\n                                        burnDamageTaken = burnResult.damage;\n                                        shownTrueDamage += burnResult.damage;\n                                        burnIsTrueDamage = true;\n                                        result.trueDamage += burnResult.damage;\n                                        turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                    }\n                                    else if (getEffectStacks(stats.value, ET.BARRIER) > 0) {\n                                        reduceEffectStacks(stats.value, ET.BARRIER, 1);\n                                        turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                    }\n                                    else {\n                                        burnDamageTaken = burnResult.damage;\n                                        result.hpChange -= burnResult.damage;\n                                        pushFloatingNumber(side, burnResult.damage, 'magic', '-');\n                                        turnStartLogs.push(`[]  ${burnResult.damage} `);\n                                    }\n                                }\n                                else {\n                                    turnStartLogs.push('[]  0');\n                                }\n                            }\n                        }\n                        if (result.hpChange !== 0) {\n                            const hpBefore = stats.value.hp;\n                            stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + result.hpChange));\n                            const hpDelta = stats.value.hp - hpBefore;\n                            if (hpDelta > 0) {\n                                pushFloatingNumber(side, hpDelta, 'heal', '+');\n                            }\n                        }\n                        if (result.mpChange !== 0) {\n                            const mpBefore = stats.value.mp;\n                            stats.value.mp = Math.max(0, stats.value.mp + result.mpChange);\n                            const mpDelta = stats.value.mp - mpBefore;\n                            if (mpDelta > 0) {\n                                pushFloatingNumber(side, mpDelta, 'mana', '+');\n                            }\n                        }\n                        if (result.trueDamage > 0) {\n                            stats.value.hp = Math.max(0, stats.value.hp - result.trueDamage);\n                            const pendingTrueDamage = Math.max(0, result.trueDamage - shownTrueDamage);\n                            if (pendingTrueDamage > 0) {\n                                pushFloatingNumber(side, pendingTrueDamage, 'true', '-');\n                            }\n                        }\n                        if (burnDamageTaken > 0) {\n                            triggerPlayerRelicAfterBurnDamageTakenHooks(targetSide, getEffectStacks(stats.value, ET.BURN), burnDamageTaken, burnIsTrueDamage, combatState.value.turn);\n                        }\n                        const reviveResult = triggerSwarmReviveIfNeeded(stats.value);\n                        for (const reviveLog of reviveResult.logs) {\n                            log(`<span class=\"text-violet-300 text-[9px]\">${label}: ${reviveLog}</span>`);\n                        }\n                        for (const l of turnStartLogs) {\n                            log(`<span class=\"text-gray-400 text-[9px]\">${label}: ${l}</span>`);\n                        }\n                    }\n                }\n                setTimeout(() => {\n                    if (endCombatPending.value)\n                        return;\n                    startTurn();\n                }, scaleDuration(1000));\n            }\n        }, { immediate: true });\n        // Watch for DRAW_PHASE\n        watch([() => combatState.value.phase, isRolling], ([phase, rolling]) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.DRAW_PHASE && !rolling) {\n                // Use enemy AI to select card\n                const eCard = selectEnemyCard();\n                const { drawn, newDeck, newDiscard } = drawCards(3, combatState.value.playerDeck, combatState.value.discardPile);\n                combatState.value.enemyIntentCard = eCard;\n                enemyIntentConsumedThisTurn.value = false;\n                combatState.value.playerHand = drawn;\n                combatState.value.playerDeck = newDeck;\n                combatState.value.discardPile = newDiscard;\n                combatState.value.phase = CombatPhase.PLAYER_INPUT;\n            }\n        });\n        // Handle Card Select\n        const handleCardSelect = (card, handIdx) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (handIdx < 0 || handIdx >= combatState.value.playerHand.length)\n                return;\n            if (combatState.value.playerHand[handIdx] !== card)\n                return;\n            const check = canPlayCard(playerStats.value, card, combatState.value.playerBaseDice);\n            if (!check.allowed) {\n                triggerInvalidCardShake(card);\n                log(`<span class=\"text-red-400\">${check.reason ?? ''}</span>`);\n                return;\n            }\n            if (card.type === CardType.MAGIC) {\n                playerStats.value.mp -= card.manaCost;\n            }\n            // \n            const [played] = combatState.value.playerHand.splice(handIdx, 1);\n            if (!played)\n                return;\n            clearDicePreview();\n            showPlayerPlayedCard(played);\n            combatState.value.discardPile.push(played);\n            combatState.value.playerSelectedCard = played;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n        };\n        const handleSkipTurn = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (!combatState.value.enemyIntentCard)\n                return;\n            clearDicePreview();\n            clearPlayerPlayedCard();\n            combatState.value.playerSelectedCard = PASS_CARD;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n            log('<span class=\"text-gray-400\"></span>');\n        };\n        // Clashable check\n        const isClashable = (t1, t2) => {\n            if (t1 === CardType.PHYSICAL && t2 === CardType.PHYSICAL)\n                return true;\n            if (t1 === CardType.MAGIC && t2 === CardType.MAGIC)\n                return true;\n            if (t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC))\n                return true;\n            if (t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                return true;\n            return false;\n        };\n        // Resolution\n        const resolveCombat = async (pCard, eCard, pDice, eDice) => {\n            if (endCombatPending.value)\n                return;\n            let resolvedEnemyCard = eCard;\n            if (resolvedEnemyCard.type === CardType.MAGIC && resolvedEnemyCard.id !== PASS_CARD.id) {\n                if (enemyStats.value.mp >= resolvedEnemyCard.manaCost) {\n                    enemyStats.value.mp -= resolvedEnemyCard.manaCost;\n                }\n                else {\n                    resolvedEnemyCard = PASS_CARD;\n                    log('<span class=\"text-gray-400\"></span>');\n                }\n            }\n            const shouldClash = isClashable(pCard.type, resolvedEnemyCard.type);\n            const playerSkippedTurn = pCard.id === PASS_CARD.id;\n            const enemySkippedTurn = resolvedEnemyCard.id === PASS_CARD.id;\n            const pClashPoint = getCardPreviewPoint('player', pCard, pDice);\n            const eClashPoint = getCardPreviewPoint('enemy', resolvedEnemyCard, eDice);\n            const clearBurnForSide = (side, reason) => {\n                const target = side === 'player' ? playerStats.value : enemyStats.value;\n                const label = side === 'player' ? '' : '';\n                const burnStacks = getEffectStacks(target, ET.BURN);\n                if (burnStacks <= 0)\n                    return;\n                removeEffect(target, ET.BURN);\n                log(`<span class=\"text-orange-300\">${reason} ${label}${burnStacks}</span>`);\n            };\n            if (enemySkippedTurn) {\n                clearBurnForSide('player', '');\n            }\n            if (playerSkippedTurn) {\n                clearBurnForSide('enemy', '');\n            }\n            let pSuccess = true;\n            let eSuccess = true;\n            let resultMsg = '';\n            let clashWinner = null;\n            if (shouldClash) {\n                previewPlayerDice.value = pClashPoint;\n                previewEnemyDice.value = eClashPoint;\n                showClashAnimation.value = true;\n                await wait(600);\n                screenShake.value = true;\n                setTimeout(() => (screenShake.value = false), scaleDuration(500));\n                if (pCard.type === resolvedEnemyCard.type) {\n                    if (pClashPoint > eClashPoint) {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                    else if (eClashPoint > pClashPoint) {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                    else {\n                        pSuccess = false;\n                        eSuccess = false;\n                        clashWinner = 'tie';\n                        resultMsg = '';\n                    }\n                }\n                else if (pCard.type === CardType.DODGE) {\n                    if (eClashPoint > pClashPoint) {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                    else {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                }\n                else if (resolvedEnemyCard.type === CardType.DODGE) {\n                    if (pClashPoint > eClashPoint) {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                    else {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                }\n                if (clashWinner === 'player')\n                    shatteringTarget.value = 'enemy';\n                else if (clashWinner === 'enemy')\n                    shatteringTarget.value = 'player';\n                else if (clashWinner === 'tie') {\n                    shatteringTarget.value = 'both';\n                }\n                if (resultMsg) {\n                    log(`<span class=\"text-gray-300\">${resultMsg}</span>`);\n                }\n                if (clashWinner === 'enemy') {\n                    changeRerollCharges('player', 1);\n                    log('<span class=\"text-amber-300\"> +1</span>');\n                }\n                if (clashWinner === 'player') {\n                    clearBurnForSide('player', '');\n                }\n                else if (clashWinner === 'enemy') {\n                    clearBurnForSide('enemy', '');\n                }\n                await wait(650);\n                showClashAnimation.value = false;\n                clearDicePreview();\n            }\n            else {\n                await wait(500);\n                log('<span class=\"text-gray-400\"></span>');\n                pSuccess = true;\n                eSuccess = true;\n            }\n            // Execution Phase - use algorithms.ts for proper damage calculation\n            const executeCard = async (source, card, baseDice) => {\n                if (endCombatPending.value)\n                    return;\n                const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n                const defender = source === 'player' ? enemyStats.value : playerStats.value;\n                const label = source === 'player' ? '' : '';\n                const defenderSide = source === 'player' ? 'enemy' : 'player';\n                if (source === 'enemy' && card.id !== PASS_CARD.id) {\n                    enemyIntentConsumedThisTurn.value = true;\n                }\n                if (source === 'player') {\n                    clearPlayerPlayedCard();\n                }\n                await playResolvedCardAnimation(source, card);\n                if (endCombatPending.value)\n                    return;\n                // Calculate final point for this card\n                const finalPoint = getCardFinalPoint(source, card, baseDice);\n                const syncCurrentPointForUi = () => {\n                    if (card.type !== CardType.FUNCTION || card.id === PASS_CARD.id)\n                        return;\n                    const nextPoint = Math.max(0, Math.floor(finalPoint));\n                    if (source === 'player') {\n                        if (combatState.value.playerBaseDice !== nextPoint) {\n                            combatState.value.playerBaseDice = nextPoint;\n                            log(`<span class=\"text-dungeon-gold/80\"> ${nextPoint}</span>`);\n                        }\n                    }\n                    else if (combatState.value.enemyBaseDice !== nextPoint) {\n                        combatState.value.enemyBaseDice = nextPoint;\n                    }\n                };\n                const applyCardEffects = () => {\n                    let hasEffect = false;\n                    for (const ce of card.cardEffects) {\n                        const targetKey = ce.target ?? 'self';\n                        const targetEntity = targetKey === 'self' ? attacker : defender;\n                        const targetSide = resolveTargetSide(source, targetKey);\n                        if (ce.kind === 'heal') {\n                            const healAmount = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 0);\n                            const beforeHp = targetEntity.hp;\n                            targetEntity.hp = Math.min(targetEntity.maxHp, targetEntity.hp + healAmount);\n                            const actualHeal = targetEntity.hp - beforeHp;\n                            if (actualHeal > 0) {\n                                pushFloatingNumber(targetSide, actualHeal, 'heal', '+');\n                            }\n                            log(`<span class=\"text-green-400\">${label}${card.name} ${healAmount} </span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'apply_buff') {\n                            const stacks = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 1);\n                            applyStatusEffectWithRelics(targetSide, ce.effectType, stacks, {\n                                restrictedTypes: ce.restrictedTypes,\n                                source: card.id,\n                                lockDecayThisTurn: ce.effectType === ET.BIND,\n                            });\n                            if (ce.effectType === ET.ARMOR) {\n                                pushFloatingNumber(targetSide, stacks, 'shield', '+');\n                            }\n                            log(`<span class=\"text-yellow-400\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[ce.effectType]?.name ?? ce.effectType}</span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'restore_mana') {\n                            const restoreAmount = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 0);\n                            const beforeMp = targetEntity.mp;\n                            targetEntity.mp = Math.max(0, targetEntity.mp + restoreAmount);\n                            const actualRestore = targetEntity.mp - beforeMp;\n                            if (actualRestore > 0) {\n                                pushFloatingNumber(targetSide, actualRestore, 'mana', '+');\n                            }\n                            log(`<span class=\"text-blue-400\">${label}${card.name} ${restoreAmount} </span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'cleanse') {\n                            const cleanseTargets = ce.cleanseTypes && ce.cleanseTypes.length > 0\n                                ? ce.cleanseTypes\n                                : targetEntity.effects.map((eff) => eff.type);\n                            for (const et of cleanseTargets) {\n                                removeEffect(targetEntity, et);\n                            }\n                            log(`<span class=\"text-cyan-300\">${label}${card.name}</span>`);\n                            hasEffect = true;\n                        }\n                    }\n                    return hasEffect;\n                };\n                if (card.type === CardType.FUNCTION) {\n                    if (card.id === 'burn_char_convert') {\n                        const burned = getEffectStacks(attacker, ET.BURN);\n                        syncCurrentPointForUi();\n                        if (burned > 0) {\n                            removeEffect(attacker, ET.BURN);\n                            attacker.mp += burned;\n                            pushFloatingNumber(source, burned, 'mana', '+');\n                            log(`<span class=\"text-blue-400\">${label}${card.name} ${burned}  ${burned} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        return;\n                    }\n                    // Process card effects (heal, apply_buff, restore_mana, cleanse)\n                    syncCurrentPointForUi();\n                    const hasEffect = applyCardEffects();\n                    if (!hasEffect) {\n                        // Fallback for special function cards (e.g. MP recovery)\n                        if (card.id === 'c5') {\n                            attacker.mp += 5;\n                            pushFloatingNumber(source, 5, 'mana', '+');\n                        }\n                        log(`${label}${card.name}`);\n                    }\n                }\n                else if (card.type !== CardType.DODGE) {\n                    const burnStacksOnDefender = getEffectStacks(defender, ET.BURN);\n                    const baseHitCount = Math.max(1, Math.floor(card.hitCount ?? 1));\n                    const extraHitCount = card.id === 'enemy_moth_swarm_burst'\n                        ? Math.max(0, getEffectStacks(attacker, ET.SWARM))\n                        : 0;\n                    const totalHitCount = baseHitCount + extraHitCount;\n                    if (totalHitCount > 1) {\n                        log(`<span class=\"text-violet-300\">${label}${card.name} ${totalHitCount} </span>`);\n                    }\n                    for (let hit = 0; hit < totalHitCount; hit++) {\n                        // Attack card: calculate damage through the full pipeline\n                        let cardForCalculation = card;\n                        const customDamage = card.id === 'burn_scorch_wind'\n                            ? Math.floor(finalPoint * 0.5) + burnStacksOnDefender\n                            : card.id === 'burn_detonation'\n                                ? Math.floor(burnStacksOnDefender)\n                                : null;\n                        if (customDamage !== null) {\n                            cardForCalculation = {\n                                ...card,\n                                damageLogic: { mode: 'fixed', value: Math.floor(customDamage) },\n                            };\n                        }\n                        const { damage, isTrueDamage, logs: dmgLogs } = calculateFinalDamage({\n                            finalPoint,\n                            card: cardForCalculation,\n                            attackerEffects: attacker.effects,\n                            defenderEffects: defender.effects,\n                            relicModifiers: NO_RELIC_MOD,\n                        });\n                        const { actualDamage, logs: applyLogs } = applyDamageToEntity(defender, damage, isTrueDamage);\n                        const hitPrefix = totalHitCount > 1 ? `${hit + 1}` : '';\n                        const damageLogColorClass = isTrueDamage ? 'text-zinc-500' : 'text-red-400';\n                        log(`${label}${card.name}${hitPrefix}${finalPoint} <span class=\"${damageLogColorClass} font-bold\">${actualDamage}</span> `);\n                        if (actualDamage > 0) {\n                            const damageKind = isTrueDamage\n                                ? 'true'\n                                : (card.type === CardType.MAGIC ? 'magic' : 'physical');\n                            pushFloatingNumber(defenderSide, actualDamage, damageKind, '-');\n                        }\n                        const coldLogs = consumeColdAfterDealingDamage(attacker, actualDamage);\n                        for (const coldLog of coldLogs) {\n                            log(`<span class=\"text-sky-300 text-[9px]\">${label}: ${coldLog}</span>`);\n                        }\n                        for (const dl of [...dmgLogs, ...applyLogs]) {\n                            log(`<span class=\"text-gray-500 text-[9px]\">${dl}</span>`);\n                        }\n                        triggerPlayerRelicHitHooks(source, defenderSide, card, finalPoint, hit + 1, totalHitCount, damage, actualDamage);\n                        if (defender.hp <= 0)\n                            break;\n                    }\n                    // \n                    applyCardEffects();\n                }\n            };\n            const queue = [];\n            let deferredEnemyAction = null;\n            if (pSuccess)\n                queue.push({ source: 'player', card: pCard, type: pCard.type, baseDice: pDice });\n            if (eSuccess) {\n                const enemyAction = { source: 'enemy', card: resolvedEnemyCard, type: resolvedEnemyCard.type, baseDice: eDice };\n                if (pCard.traits.combo) {\n                    // \n                    deferredEnemyAction = enemyAction;\n                }\n                else {\n                    queue.push(enemyAction);\n                }\n            }\n            const typePriority = (t) => {\n                if (t === CardType.FUNCTION)\n                    return 3;\n                if (t === CardType.MAGIC)\n                    return 2;\n                if (t === CardType.PHYSICAL)\n                    return 1;\n                return 0;\n            };\n            queue.sort((a, b) => typePriority(b.type) - typePriority(a.type));\n            for (const action of queue) {\n                if (endCombatPending.value)\n                    break;\n                await executeCard(action.source, action.card, action.baseDice);\n                if (endCombatPending.value)\n                    break;\n                await wait(630);\n            }\n            stopAllCardAnimations();\n            if (endCombatPending.value)\n                return;\n            //  draw  1 \n            if (pCard.traits.combo) {\n                if (pCard.traits.draw) {\n                    const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                    combatState.value.playerDeck = newDeck;\n                    combatState.value.discardPile = newDiscard;\n                    combatState.value.playerHand = [...combatState.value.playerHand, ...drawn];\n                }\n                if (combatState.value.playerHand.length > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                    combatState.value.playerSelectedCard = null;\n                    combatState.value.phase = CombatPhase.PLAYER_INPUT;\n                    log('<span class=\"text-dungeon-gold/80\"></span>');\n                    return;\n                }\n                // \n                if (deferredEnemyAction && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                    if (endCombatPending.value)\n                        return;\n                    await executeCard(deferredEnemyAction.source, deferredEnemyAction.card, deferredEnemyAction.baseDice);\n                    if (endCombatPending.value)\n                        return;\n                    await wait(630);\n                }\n            }\n            if (playerStats.value.hp <= 0 || enemyStats.value.hp <= 0)\n                return;\n            // End-of-turn effect processing (armor halving, stun clear, etc.)\n            const pEndLogs = processOnTurnEnd(playerStats.value);\n            const eEndLogs = processOnTurnEnd(enemyStats.value);\n            for (const l of [...pEndLogs, ...eEndLogs]) {\n                log(`<span class=\"text-gray-500 text-[9px]\">${l}</span>`);\n            }\n            triggerPlayerRelicLifecycleHooks('onTurnEnd');\n            // Cleanup\n            combatState.value.discardPile = [...combatState.value.discardPile, ...combatState.value.playerHand];\n            combatState.value.playerHand = [];\n            combatState.value.turn += 1;\n            combatState.value.phase = CombatPhase.TURN_START;\n        };\n        // Watch for RESOLUTION phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (endCombatPending.value)\n                return;\n            if (phase === CombatPhase.RESOLUTION &&\n                combatState.value.playerSelectedCard &&\n                combatState.value.enemyIntentCard &&\n                !showClashAnimation.value) {\n                resolveCombat(combatState.value.playerSelectedCard, combatState.value.enemyIntentCard, combatState.value.playerBaseDice, combatState.value.enemyBaseDice);\n            }\n        });\n        const runEndCombatSequence = async (win) => {\n            const token = ++endCombatSequenceToken;\n            await wait(HP_BAR_ANIMATION_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            await wait(RESULT_DELAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            stopAllCardAnimations();\n            battleResultBanner.value = win ? 'win' : 'lose';\n            combatState.value.phase = win ? CombatPhase.WIN : CombatPhase.LOSE;\n            await wait(RESULT_BANNER_STAY_MS);\n            if (token !== endCombatSequenceToken)\n                return;\n            emit('endCombat', win, playerStats.value);\n        };\n        // Win/Lose check\n        watch([() => playerStats.value.hp, () => enemyStats.value.hp], ([pHp, eHp]) => {\n            if (endCombatPending.value)\n                return;\n            let win = null;\n            if (pHp <= 0)\n                win = false;\n            else if (eHp <= 0)\n                win = true;\n            if (win === null)\n                return;\n            endCombatPending.value = true;\n            void runEndCombatSequence(win);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"combatRootEl\",\n                ref: combatRootEl,\n                class: _normalizeClass([\"combat-root w-full h-full bg-[#1a1a22] text-dungeon-paper font-ui relative overflow-hidden select-none\", [_unref(screenShake) ? 'animate-shake' : '', _unref(impactShake) ? 'animate-impact-shake' : '']]),\n                style: _normalizeStyle(_unref(combatRootStyle))\n            }, [\n                _createCommentVNode(\" Background \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Dynamic background image \"),\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Fallback gradient \"),\n                    _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(40,35,50,0.5),_#0e0e14_90%)]\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\" Darken overlay for readability \"),\n                    _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/40\" }, null, -1 /* CACHED */))\n                ]),\n                _cache[48] || (_cache[48] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-20 z-0 mix-blend-overlay bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Top Left: Settings \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (settingsOpen.value = !_unref(settingsOpen)))\n                    }, [\n                        _createVNode(_unref(Settings2), { class: \"size-5\" }),\n                        _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (emit('openDeck')))\n                    }, [\n                        _createVNode(_unref(Scroll), { class: \"size-5\" }),\n                        _cache[28] || (_cache[28] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (emit('openRelics')))\n                    }, [\n                        _createVNode(_unref(Box), { class: \"size-5\" }),\n                        _cache[29] || (_cache[29] = _createElementVNode(\"span\", { class: \"sr-only\" }, \"\", -1 /* CACHED */))\n                    ]),\n                    (_unref(settingsOpen))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => (_isRef(battleSpeedUp) ? (battleSpeedUp).value = $event : null)),\n                                        type: \"checkbox\",\n                                        class: \"accent-dungeon-gold\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(battleSpeedUp)]\n                                    ]),\n                                    _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, \"2x\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"h-8 rounded-lg border border-white/20 bg-[#252030]/80 px-2 text-xs text-dungeon-gold hover:border-dungeon-gold/60 hover:bg-[#352a40] transition-colors\",\n                                    onClick: _cache[4] || (_cache[4] =\n                                        //@ts-ignore\n                                        (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                }, \"  \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" Top Center: Turn Counter \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"text-xs text-white/60 tracking-widest\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(combatState).turn), 1 /* TEXT */)\n                    ])\n                ]),\n                _createCommentVNode(\" Battlefield Layer \"),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _createCommentVNode(\" Enemy Position: Top Right \"),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _createCommentVNode(\" Enemy Intent Card \"),\n                        (_unref(showEnemyIntentCard) && _unref(combatState).enemyIntentCard)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"absolute -top-5 left-0 text-amber-200/80 text-[10px] px-2 py-0.5 rounded\" }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _createVNode(DungeonCard, {\n                                            card: _unref(combatState).enemyIntentCard,\n                                            \"is-enemy\": \"\",\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 1,\n                                class: \"absolute -left-24 bottom-20 z-20 animate-float pointer-events-auto\",\n                                onMouseenter: handleEnemyDiceHoverStart,\n                                onMouseleave: handleEnemyDiceHoverEnd,\n                                onTouchstartPassive: handleEnemyDiceTouchStart,\n                                onTouchend: handleEnemyDiceTouchEnd,\n                                onTouchcancel: handleEnemyDiceTouchEnd\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayEnemyDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(enemyStats).minDice,\n                                    \"rolling-max\": _unref(enemyStats).maxDice,\n                                    \"number-class\": _unref(enemyDicePreviewChanged) ? 'text-[#b08a2e]' : '',\n                                    color: \"red\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(enemyDicePreviewChanged))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                        _createElementVNode(\"span\", _hoisted_16, \" \" + _toDisplayString(_unref(combatState).enemyBaseDice), 1 /* TEXT */),\n                                        _cache[33] || (_cache[33] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_17, \" \" + _toDisplayString(_unref(displayEnemyDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createCommentVNode(\" Placeholder icon (shown when portrait fails to load) \"),\n                                (_unref(enemyPortraitError))\n                                    ? (_openBlock(), _createBlock(_unref(Skull), {\n                                        key: 0,\n                                        class: \"w-48 h-48 text-red-900/20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\"\n                                    }))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Enemy portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: _unref(enemyPortraitUrl),\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"enemy portrait\",\n                                            onError: _cache[5] || (_cache[5] = ($event) => (enemyPortraitError.value = true))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_20)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Enemy Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(enemyDisplayName)), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('enemy'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(enemyArmor) > 0 || _unref(enemyPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                    (_unref(enemyArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[6] || (_cache[6] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[7] || (_cache[7] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[8] || (_cache[8] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(enemyArmor))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[34] || (_cache[34] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_26, _toDisplayString(_unref(enemyArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_25))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(enemyPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(enemyPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[10] || (_cache[10] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[11] || (_cache[11] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(enemyPoisonAmount))))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(enemyPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_27))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _cache[36] || (_cache[36] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_30, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyStats).maxHp > 0 ? (_unref(enemyStats).hp / _unref(enemyStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_31, _toDisplayString(_unref(enemyStats).hp) + \"/\" + _toDisplayString(_unref(enemyStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_32, [\n                                _cache[37] || (_cache[37] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_33, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(enemyStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_34, _toDisplayString(_unref(enemyStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_35, [\n                                _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_unref(enemyStats).minDice) + \" ~ \" + _toDisplayString(_unref(enemyStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(enemyVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(enemyVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `enemy-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff)),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff)),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff)),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_39, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_38));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Player Position: Bottom Left \"),\n                    _createElementVNode(\"div\", _hoisted_40, [\n                        _createCommentVNode(\" Player Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: _normalizeClass([\"absolute -top-[1rem] left-[140%] -translate-x-1/2 z-20 animate-float pointer-events-auto\", _unref(canPlayerRerollDice) ? 'cursor-pointer' : 'cursor-default']),\n                                title: _unref(playerDiceRerollHint),\n                                style: { \"animation-delay\": \"1s\" },\n                                onClick: handlePlayerDiceClick\n                            }, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayPlayerDice),\n                                    rolling: _unref(isRolling),\n                                    \"rolling-min\": _unref(playerStats).minDice,\n                                    \"rolling-max\": _unref(playerStats).maxDice,\n                                    \"number-class\": _unref(playerDicePreviewChanged) ? 'text-red-800' : '',\n                                    color: \"gold\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\", \"rolling-min\", \"rolling-max\", \"number-class\"]),\n                                (_unref(playerDicePreviewChanged))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_42, [\n                                        _createElementVNode(\"span\", _hoisted_43, \" \" + _toDisplayString(_unref(combatState).playerBaseDice), 1 /* TEXT */),\n                                        _cache[39] || (_cache[39] = _createElementVNode(\"span\", { class: \"mx-1 text-white/45\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_44, \" \" + _toDisplayString(_unref(displayPlayerDice)), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(playerDiceRerollCharges) > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 1,\n                                        class: _normalizeClass([\"absolute left-1/2 top-[5.9rem] -translate-x-1/2 rounded-md border border-amber-300/35 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap\", _unref(canPlayerRerollDice) ? 'text-amber-200' : 'text-amber-200/70'])\n                                    }, \" \" + _toDisplayString(_unref(playerDiceRerollCharges)), 3 /* TEXT, CLASS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 10 /* CLASS, PROPS */, _hoisted_41))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Player Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_45, [\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _createCommentVNode(\" Placeholder glow (shown when portrait fails to load) \"),\n                                (_unref(playerPortraitError))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Player portrait image \"),\n                                        _createElementVNode(\"img\", {\n                                            src: playerPortraitUrl,\n                                            class: \"w-full h-full object-contain object-bottom\",\n                                            alt: \"player portrait\",\n                                            onError: _cache[12] || (_cache[12] = ($event) => (playerPortraitError.value = true))\n                                        }, null, 32 /* NEED_HYDRATION */)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Player Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_48, [\n                            _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"flex justify-between text-xs text-white/80 font-bold mb-1.5\" }, [\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_49, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('player'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(playerArmor) > 0 || _unref(playerPoisonAmount) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                                    (_unref(playerArmor) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerArmor)}. ${getEffectDescription(_unref(ET).ARMOR)}`,\n                                            onMouseenter: _cache[13] || (_cache[13] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[14] || (_cache[14] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[15] || (_cache[15] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).ARMOR, _unref(playerArmor)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[40] || (_cache[40] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_52, _toDisplayString(_unref(playerArmor)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_51))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    (_unref(playerPoisonAmount) > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 1,\n                                            type: \"button\",\n                                            class: \"status-effect-value-btn flex items-center gap-1\",\n                                            \"aria-label\": `: ${_unref(playerPoisonAmount)}. ${getEffectDescription(_unref(ET).POISON_AMOUNT)}`,\n                                            onMouseenter: _cache[16] || (_cache[16] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: _cache[17] || (_cache[17] = ($event) => (showEffectTooltip($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: _cache[18] || (_cache[18] = ($event) => (handleEffectTouchStart($event, createStatusEffectPreview(_unref(ET).POISON_AMOUNT, _unref(playerPoisonAmount)), 'right'))),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            _cache[41] || (_cache[41] = _createElementVNode(\"span\", { class: \"text-[10px] text-green-400\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_54, _toDisplayString(_unref(playerPoisonAmount)), 1 /* TEXT */)\n                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_53))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_55, [\n                                _cache[42] || (_cache[42] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#ff6666] font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_56, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerStats).maxHp > 0 ? (_unref(playerStats).hp / _unref(playerStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerPoisonAmountPercent)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_57, _toDisplayString(_unref(playerStats).hp) + \"/\" + _toDisplayString(_unref(playerStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_58, [\n                                _cache[43] || (_cache[43] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#55aaff] font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_59, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(playerStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_60, _toDisplayString(_unref(playerStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_61, [\n                                _cache[44] || (_cache[44] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_62, _toDisplayString(_unref(playerStats).minDice) + \" ~ \" + _toDisplayString(_unref(playerStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(playerVisibleEffects).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_63, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerVisibleEffects), (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `player-${eff.type}-${i}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"effect-icon-btn\", effectIconBoxClass(eff.polarity)]),\n                                            \"aria-label\": `${getEffectName(eff.type)}: ${getEffectDescription(eff.type)}`,\n                                            onMouseenter: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onMouseleave: hideEffectTooltip,\n                                            onFocus: ($event) => (showEffectTooltip($event, eff, 'right')),\n                                            onBlur: hideEffectTooltip,\n                                            onTouchstartPassive: ($event) => (handleEffectTouchStart($event, eff, 'right')),\n                                            onTouchend: handleEffectTouchEnd,\n                                            onTouchcancel: handleEffectTouchEnd\n                                        }, [\n                                            (_openBlock(), _createBlock(_resolveDynamicComponent(getEffectIconComponent(eff.type)), { class: \"size-3.5\" })),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_65, _toDisplayString(eff.stacks), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_64));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Card Animation Layer \"),\n                _createElementVNode(\"div\", _hoisted_66, [\n                    (_unref(playerPlayedCardVisual))\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"absolute player-played-card\",\n                            style: _normalizeStyle(_unref(playerPlayedCardStyle))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass(_unref(playerPlayedCardVisual).entered ? 'player-played-card-bob' : '')\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: _unref(playerPlayedCardVisual).card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 4 /* STYLE */))\n                        : _createCommentVNode(\"v-if\", true),\n                    (_unref(resolvedCardVisual))\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 1,\n                            class: _normalizeClass([\"resolved-card-visual\", _unref(resolvedCardVisual).source === 'player' ? 'resolved-card-visual--player' : 'resolved-card-visual--enemy'])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"resolved-card-visual-inner\", _unref(resolvedCardVisualInnerClass)])\n                            }, [\n                                _createVNode(DungeonCard, {\n                                    card: _unref(resolvedCardVisual).card,\n                                    disabled: \"\"\n                                }, null, 8 /* PROPS */, [\"card\"])\n                            ], 2 /* CLASS */)\n                        ], 2 /* CLASS */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" UI Layer (HUD) \"),\n                _createElementVNode(\"div\", _hoisted_67, [\n                    _createCommentVNode(\" Center: Clash Zone \"),\n                    _createElementVNode(\"div\", _hoisted_68, [\n                        _createCommentVNode(\" Clash Animation Stage \"),\n                        (_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_69, [\n                                _createCommentVNode(\" Player Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute right-1/2 mr-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'player' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-left']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayPlayerDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(playerStats).minDice,\n                                        \"rolling-max\": _unref(playerStats).maxDice,\n                                        color: \"gold\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */),\n                                _createCommentVNode(\" Enemy Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute left-1/2 ml-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'enemy' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-right']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayEnemyDice),\n                                        rolling: false,\n                                        \"rolling-min\": _unref(enemyStats).minDice,\n                                        \"rolling-max\": _unref(enemyStats).maxDice,\n                                        color: \"red\",\n                                        size: \"lg\"\n                                    }, null, 8 /* PROPS */, [\"value\", \"rolling-min\", \"rolling-max\"])\n                                ], 6 /* CLASS, STYLE */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" Bottom Bar: Hand & Piles \"),\n                    _createElementVNode(\"div\", _hoisted_70, [\n                        _createCommentVNode(\" Center: Hand Cards \"),\n                        _createElementVNode(\"div\", _hoisted_71, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).playerHand, (card, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: handCardKey(card),\n                                    class: _normalizeClass([\"transition-all duration-500 origin-bottom\", [handCardClass(card), isCardShaking(card) ? 'invalid-card-shake' : '']]),\n                                    style: _normalizeStyle(transitionStyle(500)),\n                                    onMouseenter: ($event) => (handlePlayerCardHoverStart(card)),\n                                    onMouseleave: handlePlayerCardHoverEnd,\n                                    onTouchstartPassive: ($event) => (handlePlayerCardTouchStart(card)),\n                                    onTouchend: handlePlayerCardTouchEnd,\n                                    onTouchcancel: handlePlayerCardTouchEnd\n                                }, [\n                                    _createVNode(DungeonCard, {\n                                        card: card,\n                                        disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT && _unref(combatState).playerSelectedCard !== card,\n                                        onClick: ($event) => (handleCardSelect(card, idx))\n                                    }, null, 8 /* PROPS */, [\"card\", \"disabled\", \"onClick\"])\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_72));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Right Corner: Skip + Deck/Discard \"),\n                        _createElementVNode(\"div\", _hoisted_73, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-5 bg-[#252030]/90 border border-white/15 rounded-lg text-xs text-white/80 hover:border-amber-400 hover:text-amber-200 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed\",\n                                disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT,\n                                onClick: handleSkipTurn\n                            }, \"  \", 8 /* PROPS */, _hoisted_74),\n                            _createElementVNode(\"div\", _hoisted_75, [\n                                _createElementVNode(\"div\", _hoisted_76, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-dungeon-gold active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[19] || (_cache[19] = ($event) => (overlayOpen.value = 'deck'))\n                                    }, [\n                                        _createVNode(_unref(Layers), { class: \"size-5 text-dungeon-gold\" }),\n                                        _createElementVNode(\"span\", _hoisted_77, _toDisplayString(_unref(combatState).playerDeck.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_78, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 active:scale-95 transition-all shadow-lg\",\n                                        onClick: _cache[20] || (_cache[20] = ($event) => (overlayOpen.value = 'discard'))\n                                    }, [\n                                        _createVNode(_unref(Trash2), { class: \"size-5 text-gray-400\" }),\n                                        _createElementVNode(\"span\", _hoisted_79, _toDisplayString(_unref(combatState).discardPile.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" Log Feed Overlay: top-right, below parent \\\"\\\" button \"),\n                    _createElementVNode(\"div\", _hoisted_80, [\n                        _createElementVNode(\"div\", _hoisted_81, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors\",\n                                title: _unref(logsCollapsed) ? '' : '',\n                                onClick: _cache[21] || (_cache[21] = ($event) => (logsCollapsed.value = !_unref(logsCollapsed)))\n                            }, _toDisplayString(_unref(logsCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_82),\n                            (!_unref(logsCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_83, [\n                                    _createCommentVNode(\" eslint-disable-next-line vue/no-v-html \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).logs, (l, i) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: i,\n                                            class: \"bg-black/60 p-1 rounded border-l-2 border-gray-700\",\n                                            innerHTML: l\n                                        }, null, 8 /* PROPS */, _hoisted_84));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                (_unref(battleResultBanner))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_85, [\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"px-12 py-5 rounded-2xl border-2 text-5xl md:text-6xl font-heading tracking-[0.2em] drop-shadow-[0_0_30px_rgba(0,0,0,0.9)] animate-pulse backdrop-blur-md\", _unref(battleResultBanner) === 'win'\n                                    ? 'bg-emerald-950/70 border-emerald-400/60 text-emerald-300'\n                                    : 'bg-red-950/70 border-red-500/60 text-red-300'])\n                        }, _toDisplayString(_unref(battleResultBanner) === 'win' ? '' : ''), 3 /* TEXT, CLASS */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(effectTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"effect-tooltip absolute z-[72] pointer-events-none\", _unref(effectTooltip).align === 'right' ? 'effect-tooltip--right text-right' : 'effect-tooltip--center']),\n                        style: _normalizeStyle({ left: `${_unref(effectTooltip).x}px`, top: `${_unref(effectTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_86, _toDisplayString(_unref(effectTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_87, _toDisplayString(_unref(effectTooltip).description), 1 /* TEXT */),\n                        (_unref(effectTooltip).stacks > 1)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_88, \": \" + _toDisplayString(_unref(effectTooltip).stacks), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Deck/Discard Overlay \"),\n                (_unref(overlayOpen))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8\",\n                        onClick: _cache[24] || (_cache[24] = ($event) => (overlayOpen.value = null))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"bg-[#18141e] border border-white/10 p-6 rounded-2xl max-w-2xl w-full max-h-[80%] flex flex-col relative shadow-2xl\",\n                            onClick: _cache[23] || (_cache[23] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_89, [\n                                _createElementVNode(\"h3\", _hoisted_90, _toDisplayString(_unref(overlayOpen) === 'deck' ? '' : ''), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    onClick: _cache[22] || (_cache[22] = ($event) => (overlayOpen.value = null))\n                                }, [\n                                    _createVNode(_unref(XIcon), { class: \"size-6 hover:text-red-500\" })\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_91, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overlayOpen) === 'deck' ? _unref(combatState).playerDeck : _unref(combatState).discardPile, (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"scale-75 origin-top-left\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatView.vue?vue&type=style&index=0&id=48ecbcdc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48ecbcdc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, renderSlot as _renderSlot, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"relative w-full max-w-3xl p-1 bg-dungeon-brown rounded-lg shadow-2xl border border-dungeon-gold/40 mx-4 flex flex-col max-h-[90%]\" };\nconst _hoisted_2 = { class: \"flex items-center justify-between px-6 py-4 border-b border-dungeon-gold/20 bg-[#1a0f08] rounded-t-lg shrink-0\" };\nconst _hoisted_3 = { class: \"text-xl font-heading text-dungeon-gold tracking-widest\" };\nconst _hoisted_4 = { class: \"p-8 flex-1 overflow-y-auto custom-scrollbar text-dungeon-paper/60 bg-dungeon-brown\" };\nimport { X } from 'lucide-vue-next';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonModal',\n    props: {\n        title: {},\n        isOpen: { type: Boolean }\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                (__props.isOpen)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm\",\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _createElementVNode(\"h2\", _hoisted_3, _toDisplayString(__props.title), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    class: \"text-dungeon-gold-dim hover:text-dungeon-gold transition-colors\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                                }, [\n                                    _createVNode(_unref(X), { class: \"size-6\" })\n                                ])\n                            ]),\n                            _createCommentVNode(\" Body \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"text-center py-12\" }, [\n                                        _createElementVNode(\"div\", { class: \"mb-4 text-4xl opacity-20 animate-pulse\" }, \"\"),\n                                        _createElementVNode(\"p\", { class: \"font-ui text-sm uppercase tracking-widest\" }, \" // \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Ornamental Corners \"),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-dungeon-gold -mt-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-dungeon-gold -mt-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-dungeon-gold -mb-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-dungeon-gold -mb-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */))\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"text-center py-8\"\n};\nconst _hoisted_2 = {\n    key: 1,\n    class: \"flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"flex items-start gap-3\" };\nconst _hoisted_5 = { class: \"shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors\" };\nconst _hoisted_6 = { class: \"text-dungeon-gold font-heading text-sm\" };\nconst _hoisted_7 = { class: \"text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors\" };\nconst _hoisted_8 = { class: \"mt-4 pt-4 border-t border-dungeon-gold/15\" };\nconst _hoisted_9 = { class: \"flex gap-3\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 2,\n    class: \"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n};\nconst _hoisted_13 = { class: \"glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30\" };\nconst _hoisted_14 = { class: \"text-dungeon-paper/70 font-ui text-sm mb-6\" };\nconst _hoisted_15 = { class: \"text-dungeon-gold font-bold\" };\nconst _hoisted_16 = { class: \"flex gap-3 justify-end\" };\nimport { BookOpen, Pencil, RefreshCw, RotateCcw } from 'lucide-vue-next';\nimport { useGameStore } from '../gameStore';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SaveLoadPanel',\n    props: {\n        isOpen: { type: Boolean },\n        entries: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const confirmTarget = ref(null);\n        function handleRollback(messageId) {\n            confirmTarget.value = messageId;\n        }\n        async function doRollback() {\n            if (confirmTarget.value !== null) {\n                await gameStore.rollbackTo(confirmTarget.value);\n                confirmTarget.value = null;\n            }\n        }\n        function handleReroll() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.rerollCurrent();\n        }\n        function handleEdit() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.startEdit();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                onClose: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    (__props.entries.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _createVNode(_unref(BookOpen), { class: \"size-12 mx-auto text-dungeon-gold/30 mb-4\" }),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"text-gray-500 font-ui\" }, \"\", -1 /* CACHED */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.entries, (entry) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: entry.messageId,\n                                    class: \"group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]\",\n                                    onClick: ($event) => (handleRollback(entry.messageId))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\" Floor Number Badge \"),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createElementVNode(\"span\", _hoisted_6, \"#\" + _toDisplayString(entry.messageId), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" Summary Text \"),\n                                        _createElementVNode(\"p\", _hoisted_7, _toDisplayString(entry.summary), 1 /* TEXT */),\n                                        _createCommentVNode(\" Arrow Icon \"),\n                                        _createVNode(_unref(RotateCcw), { class: \"size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors\" })\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])),\n                    _createCommentVNode(\" Bottom Action Buttons: Reroll & Edit \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleReroll\n                            }, [\n                                _createVNode(_unref(RefreshCw), { class: \"size-4\" }),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"Roll\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_10),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\", _unref(gameStore).isEditing ? 'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20' : '']),\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleEdit\n                            }, [\n                                _createVNode(_unref(Pencil), { class: \"size-4\" }),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"\", -1 /* CACHED */))\n                            ], 10 /* CLASS, PROPS */, _hoisted_11)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Confirm Dialog \"),\n                    (_unref(confirmTarget) !== null)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-lg mb-3\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_14, [\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(confirmTarget)), 1 /* TEXT */),\n                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"text-red-400/80 text-xs\" }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (confirmTarget.value = null))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors\",\n                                        onClick: doRollback\n                                    }, \"  \")\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, Fragment as _Fragment, renderList as _renderList, createTextVNode as _createTextVNode, isRef as _isRef, withKeys as _withKeys, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, normalizeClass as _normalizeClass, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative\" };\nconst _hoisted_2 = { class: \"absolute inset-0 z-0\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = { class: \"absolute top-6 left-6 z-50 flex flex-col space-y-4\" };\nconst _hoisted_5 = { class: \"absolute top-4 right-4 z-50 flex items-center gap-2\" };\nconst _hoisted_6 = { class: \"absolute top-14 right-4 z-50 flex flex-col space-y-4\" };\nconst _hoisted_7 = { class: \"h-full w-full flex flex-col items-center\" };\nconst _hoisted_8 = { class: \"flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_10 = {\n    key: 1,\n    class: \"flex flex-col h-full\"\n};\nconst _hoisted_11 = { class: \"flex justify-end gap-3 mt-4\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"whitespace-pre-wrap text-dungeon-paper/60\"\n};\nconst _hoisted_13 = { class: \"whitespace-pre-wrap\" };\nconst _hoisted_14 = {\n    key: 0,\n    class: \"mt-8 flex flex-col space-y-3\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = { class: \"text-xl mr-2\" };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"mt-4\"\n};\nconst _hoisted_18 = { class: \"flex justify-center gap-4\" };\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm\"\n};\nconst _hoisted_22 = { class: \"bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 shrink-0\" };\nconst _hoisted_23 = { class: \"relative w-full\" };\nconst _hoisted_24 = [\"disabled\", \"placeholder\"];\nconst _hoisted_25 = [\"disabled\"];\nconst _hoisted_26 = { class: \"absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none\" };\nconst _hoisted_27 = [\"title\"];\nconst _hoisted_28 = {\n    key: 0,\n    class: \"relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]\"\n};\nconst _hoisted_29 = { class: \"flex items-end gap-4 mb-3\" };\nconst _hoisted_30 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_31 = [\"title\"];\nconst _hoisted_32 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_33 = { \"clip-path\": \"url(#heartClip)\" };\nconst _hoisted_34 = [\"y\", \"height\"];\nconst _hoisted_35 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_36 = { class: \"text-[#cc3333] font-bold\" };\nconst _hoisted_37 = { class: \"text-gray-600\" };\nconst _hoisted_38 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_39 = [\"title\"];\nconst _hoisted_40 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_41 = { \"clip-path\": \"url(#manaClip)\" };\nconst _hoisted_42 = [\"y\", \"height\"];\nconst _hoisted_43 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_44 = { class: \"text-blue-400 font-bold\" };\nconst _hoisted_45 = { class: \"flex items-center justify-between px-1 mb-2\" };\nconst _hoisted_46 = { class: \"flex items-center gap-2 text-dungeon-paper/70\" };\nconst _hoisted_47 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_48 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_49 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_50 = { class: \"flex items-center justify-between px-1\" };\nconst _hoisted_51 = { class: \"flex items-center gap-2 text-dungeon-gold\" };\nconst _hoisted_52 = { class: \"font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm\" };\nconst _hoisted_53 = {\n    key: 0,\n    class: \"grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4\"\n};\nconst _hoisted_54 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_55 = { class: \"w-full max-w-[90rem] mx-auto flex flex-col gap-4\" };\nconst _hoisted_56 = {\n    key: 0,\n    class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-h-[72vh] overflow-y-auto custom-scrollbar pr-1\"\n};\nconst _hoisted_57 = [\"disabled\", \"onClick\"];\nconst _hoisted_58 = [\"src\", \"alt\"];\nconst _hoisted_59 = { class: \"absolute inset-x-2 top-2 z-10\" };\nconst _hoisted_60 = { class: \"magic-book-title text-center truncate text-[22px]\" };\nconst _hoisted_61 = {\n    key: 1,\n    class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 py-8 text-center text-sm text-dungeon-paper/50\"\n};\nconst _hoisted_62 = {\n    key: 0,\n    class: \"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-6 gap-y-6 p-4 overflow-y-auto max-h-[60%]\"\n};\nconst _hoisted_63 = [\"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_64 = { class: \"relative\" };\nconst _hoisted_65 = { class: \"absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight\" };\nconst _hoisted_66 = { class: \"font-heading text-dungeon-gold text-[11px] text-center mt-1 leading-relaxed truncate w-full\" };\nconst _hoisted_67 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_68 = { class: \"relic-tooltip-name\" };\nconst _hoisted_69 = { class: \"relic-tooltip-desc\" };\nconst _hoisted_70 = { class: \"flex flex-col space-y-6 w-full max-w-lg mx-auto\" };\nconst _hoisted_71 = { class: \"space-y-4\" };\nconst _hoisted_72 = { class: \"flex items-center justify-between\" };\nconst _hoisted_73 = { class: \"flex items-center gap-2\" };\nconst _hoisted_74 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_75 = { class: \"flex items-center justify-between\" };\nconst _hoisted_76 = { class: \"flex items-center gap-2\" };\nconst _hoisted_77 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_78 = { class: \"flex items-center justify-between\" };\nconst _hoisted_79 = { class: \"flex items-center justify-between\" };\nconst _hoisted_80 = { class: \"flex items-center gap-2\" };\nconst _hoisted_81 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_82 = { class: \"flex items-center justify-between\" };\nconst _hoisted_83 = { class: \"flex items-center gap-2\" };\nconst _hoisted_84 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_85 = { class: \"grid grid-cols-2 gap-4\" };\nconst _hoisted_86 = { class: \"flex flex-col gap-4 w-full max-w-4xl\" };\nconst _hoisted_87 = { class: \"flex items-center justify-between\" };\nconst _hoisted_88 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_89 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/50 p-3\" };\nconst _hoisted_90 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_91 = { class: \"text-[11px] text-dungeon-gold/80\" };\nconst _hoisted_92 = { class: \"max-h-52 overflow-y-auto custom-scrollbar pr-1 space-y-1.5\" };\nconst _hoisted_93 = [\"onClick\"];\nconst _hoisted_94 = { class: \"min-w-0 flex-1\" };\nconst _hoisted_95 = { class: \"flex items-center gap-1.5\" };\nconst _hoisted_96 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_97 = { class: \"text-[10px] px-1 rounded border border-white/15 text-dungeon-paper/60\" };\nconst _hoisted_98 = [\"title\"];\nconst _hoisted_99 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_100 = { class: \"mt-2 grid grid-cols-9 gap-1\" };\nconst _hoisted_101 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar\" };\nconst _hoisted_102 = { class: \"space-y-3\" };\nconst _hoisted_103 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_104 = [\"onClick\"];\nconst _hoisted_105 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_106 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_107 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_108 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4\" };\nconst _hoisted_109 = [\"disabled\", \"onClick\"];\nconst _hoisted_110 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_111 = { class: \"flex justify-end gap-3\" };\nconst _hoisted_112 = [\"disabled\"];\nconst _hoisted_113 = { class: \"flex items-center justify-between\" };\nconst _hoisted_114 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_115 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar\" };\nconst _hoisted_116 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-2\" };\nconst _hoisted_117 = [\"onClick\"];\nconst _hoisted_118 = { class: \"rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3\" };\nconst _hoisted_119 = { class: \"max-h-[28vh] overflow-y-auto custom-scrollbar pr-1\" };\nconst _hoisted_120 = { class: \"space-y-2\" };\nconst _hoisted_121 = { class: \"flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar\" };\nconst _hoisted_122 = [\"onClick\"];\nconst _hoisted_123 = { class: \"mb-2 flex items-center justify-between\" };\nconst _hoisted_124 = { class: \"font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90\" };\nconst _hoisted_125 = { class: \"text-[10px] text-dungeon-paper/50\" };\nconst _hoisted_126 = { class: \"grid grid-cols-1 md:grid-cols-2 gap-2\" };\nconst _hoisted_127 = { class: \"flex items-start justify-between gap-2\" };\nconst _hoisted_128 = { class: \"min-w-0\" };\nconst _hoisted_129 = { class: \"text-xs font-heading text-dungeon-gold truncate\" };\nconst _hoisted_130 = { class: \"text-[10px] text-dungeon-paper/60\" };\nconst _hoisted_131 = { class: \"flex items-center gap-1 shrink-0\" };\nconst _hoisted_132 = [\"onClick\"];\nconst _hoisted_133 = { class: \"w-6 text-center text-xs text-dungeon-gold\" };\nconst _hoisted_134 = [\"onClick\"];\nconst _hoisted_135 = { class: \"mt-1 text-[10px] text-dungeon-paper/70 leading-relaxed\" };\nconst _hoisted_136 = {\n    key: 0,\n    class: \"rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40\"\n};\nconst _hoisted_137 = { class: \"flex items-center gap-2 px-3 py-2 rounded border border-dungeon-brown/60 bg-dungeon-dark/40 text-sm text-dungeon-paper/80\" };\nconst _hoisted_138 = { class: \"flex justify-between gap-3\" };\nconst _hoisted_139 = [\"disabled\"];\nconst _hoisted_140 = {\n    key: 0,\n    class: \"custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4\"\n};\nconst _hoisted_141 = { class: \"text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap\" };\nconst _hoisted_142 = {\n    key: 1,\n    class: \"text-dungeon-paper/60 font-ui py-8 text-center text-sm\"\n};\nconst _hoisted_143 = {\n    key: 0,\n    class: \"absolute inset-0 z-[94] bg-black\"\n};\nconst _hoisted_144 = [\"src\"];\nconst _hoisted_145 = [\"src\"];\nconst _hoisted_146 = { class: \"shop-layout absolute inset-y-0 right-0 z-[96] flex items-center px-4 md:px-7\" };\nconst _hoisted_147 = { class: \"shop-panel ml-auto w-full max-w-[48rem] h-[84vh] max-h-[860px]\" };\nconst _hoisted_148 = { class: \"shop-goods-grid custom-scrollbar\" };\nconst _hoisted_149 = [\"disabled\", \"onClick\", \"onMouseenter\", \"onFocus\", \"onTouchstartPassive\"];\nconst _hoisted_150 = { class: \"shop-item-icon-wrap\" };\nconst _hoisted_151 = { class: \"shop-item-price\" };\nconst _hoisted_152 = {\n    key: 0,\n    class: \"rounded border border-amber-200/15 bg-black/25 py-10 text-center text-sm text-amber-100/65\"\n};\nconst _hoisted_153 = { class: \"shop-panel-foot\" };\nconst _hoisted_154 = [\"disabled\"];\nconst _hoisted_155 = [\"disabled\"];\nconst _hoisted_156 = {\n    key: 0,\n    class: \"absolute inset-0 z-[95] bg-black\"\n};\nconst _hoisted_157 = [\"src\"];\nconst _hoisted_158 = {\n    key: 0,\n    class: \"pointer-events-none absolute inset-0\"\n};\nconst _hoisted_159 = { class: \"chest-reward-anchor\" };\nconst _hoisted_160 = [\"disabled\"];\nconst _hoisted_161 = { class: \"pointer-events-auto chest-portals-anchor w-full\" };\nconst _hoisted_162 = { class: \"flex justify-center gap-4 flex-wrap\" };\nconst _hoisted_163 = [\"disabled\", \"onClick\"];\nconst _hoisted_164 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_165 = [\"disabled\"];\nconst _hoisted_166 = {\n    key: 0,\n    class: \"absolute inset-0 z-[100] bg-black\"\n};\nimport { Activity, Book, BookOpen, Box, ChevronDown, Coins, Dices, FileText, Lock, Map as MapIcon, Maximize, Scroll, Send, Settings as SettingsIcon, } from 'lucide-vue-next';\nimport { getAllCards, resolveCardNames } from '../battle/cardRegistry';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { getAllRelics, getRelicByName } from '../battle/relicRegistry';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { CardType, EffectType } from '../types';\nimport CombatView from './CombatView.vue';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonModal from './DungeonModal.vue';\nimport SaveLoadPanel from './SaveLoadPanel.vue';\n\nimport { defineComponent, h, ref, computed, watch, reactive, onBeforeUnmount } from 'vue';\n// --- Dynamic Background ---\nconst HF_BG_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF';\nconst BG_OPACITY_KEY = 'dungeon.bg_overlay_opacity';\nconst CHEST_BG_CLOSED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B11.png';\nconst CHEST_BG_OPENED = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B12.png';\nconst CHEST_BG_MIMIC = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B13.png';\nconst SHOP_BG_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%95%86%E5%BA%97.png';\nconst SHOP_MERCHANT_PORTRAIT_URL = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/%E6%B2%90%E8%8A%AF%E5%85%B0/%E6%B2%90%E8%8A%AF%E5%85%B04.png';\nconst MAGIC_BOOK_COVER_BASE = 'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E9%AD%94%E6%B3%95%E4%B9%A6%E5%B0%81%E9%9D%A2';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameView',\n    emits: [\"backToSplash\"],\n    setup(__props) {\n        const SidebarIcon = defineComponent({\n            props: {\n                icon: { type: Object, required: true },\n                active: { type: Boolean, default: false },\n                label: { type: String, default: '' },\n                tooltipSide: { type: String, default: 'right' },\n                disabled: { type: Boolean, default: false },\n            },\n            emits: ['click'],\n            setup(props, { emit }) {\n                return () => h('button', {\n                    disabled: props.disabled,\n                    class: [\n                        'w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group disabled:cursor-not-allowed',\n                        props.disabled\n                            ? 'bg-[#120d0a] text-dungeon-paper/35 border-dungeon-brown/70'\n                            : props.active\n                                ? 'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]'\n                                : 'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50',\n                    ],\n                    onClick: () => {\n                        if (!props.disabled) {\n                            emit('click');\n                        }\n                    },\n                }, [\n                    h(props.icon, { class: 'size-6' }),\n                    props.label\n                        ? h('div', {\n                            class: [\n                                'absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none',\n                                props.tooltipSide === 'left' ? 'right-14' : 'left-14',\n                            ],\n                        }, props.label)\n                        : null,\n                ]);\n            },\n        });\n        const gameStore = useGameStore();\n        const activeModal = ref(null);\n        const inputText = ref('');\n        const isVariableUpdateOpen = ref(false);\n        const isStatusOpen = ref(true);\n        const showCombat = ref(false);\n        const combatEnemyName = ref('');\n        const showShopView = ref(false);\n        const shopProducts = ref([]);\n        const shopBuying = ref(false);\n        const shopSpentGold = ref(0);\n        const shopPurchasedItems = ref([]);\n        const shopRobClickCount = ref(0);\n        const shopRobbing = ref(false);\n        const showChestView = ref(false);\n        const chestStage = ref('closed');\n        const chestRolling = ref(false);\n        const chestRewardRelic = ref(null);\n        const chestRewardCollected = ref(false);\n        const chestCollecting = ref(false);\n        const chestRewardVisible = ref(false);\n        const chestOpenedBgReady = ref(false);\n        const chestPortalChoices = ref([]);\n        const combatTestStep = ref('deck');\n        const selectedTestDeck = ref([]);\n        const selectedTestEnemy = ref('');\n        const selectedTestRelicCounts = ref({});\n        const selectedCardCategoryTab = ref('');\n        const selectedRelicCategoryTab = ref('');\n        const relicTooltip = ref(null);\n        const combatTestStartAt999 = ref(false);\n        const combatTestStartAt999CurrentBattle = ref(false);\n        let chestMimicTimer = null;\n        let chestRewardFadeTimer = null;\n        let shopRobTimer = null;\n        let relicTooltipLongPressTimer = null;\n        let relicTooltipAutoHideTimer = null;\n        const bgIsLordFallback = ref(false);\n        const bgImageError = ref(false);\n        const bgArea = computed(() => gameStore.statData._ || '');\n        const bgRoomType = computed(() => gameStore.statData._ || '');\n        const bgImageUrl = computed(() => {\n            if (!bgArea.value || bgImageError.value)\n                return '';\n            const isLord = bgRoomType.value === '' && !bgIsLordFallback.value;\n            const suffix = isLord ? `${bgArea.value}_` : bgArea.value;\n            return `${HF_BG_BASE}/${encodeURIComponent(suffix)}.png`;\n        });\n        function onBgError() {\n            if (bgRoomType.value === '' && !bgIsLordFallback.value) {\n                bgIsLordFallback.value = true;\n            }\n            else {\n                bgImageError.value = true;\n            }\n        }\n        const bgOverlayOpacity = ref(parseFloat(localStorage.getItem(BG_OPACITY_KEY) ?? '0.5'));\n        watch(bgOverlayOpacity, (v) => localStorage.setItem(BG_OPACITY_KEY, String(v)));\n        const shopBackgroundUrl = SHOP_BG_URL;\n        const shopMerchantPortraitUrl = SHOP_MERCHANT_PORTRAIT_URL;\n        const chestBackgroundUrl = computed(() => {\n            if (chestStage.value === 'opened')\n                return CHEST_BG_OPENED;\n            if (chestStage.value === 'mimic')\n                return CHEST_BG_MIMIC;\n            return CHEST_BG_CLOSED;\n        });\n        const allCardsForTest = computed(() => getAllCards().filter(card => card.category !== ''));\n        const CATEGORY_ORDER = {\n            : 0,\n            : 1,\n        };\n        const compareCategory = (a, b) => {\n            const orderA = CATEGORY_ORDER[a] ?? 999;\n            const orderB = CATEGORY_ORDER[b] ?? 999;\n            if (orderA !== orderB)\n                return orderA - orderB;\n            return a.localeCompare(b, 'zh-Hans-CN');\n        };\n        const cardCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const card of allCardsForTest.value) {\n                if (!grouped.has(card.category)) {\n                    grouped.set(card.category, []);\n                }\n                grouped.get(card.category).push(card);\n            }\n            return Array.from(grouped.entries())\n                .sort(([a], [b]) => compareCategory(a, b))\n                .map(([category, cards]) => ({\n                category,\n                cards: [...cards].sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN')),\n            }));\n        });\n        const cardCategoryTabsForTest = computed(() => [\n            '',\n            ...cardCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredCardCategoryGroupsForTest = computed(() => {\n            if (selectedCardCategoryTab.value === '')\n                return cardCategoryGroupsForTest.value;\n            return cardCategoryGroupsForTest.value.filter((group) => group.category === selectedCardCategoryTab.value);\n        });\n        const getMagicBookCoverUrl = (bookName) => `${MAGIC_BOOK_COVER_BASE}/${encodeURIComponent(bookName)}.png`;\n        const carryableMagicBookNames = computed(() => (cardCategoryGroupsForTest.value\n            .map((group) => group.category)\n            .filter((category) => category !== '')));\n        const rawCarriedMagicBooks = computed(() => {\n            const raw = gameStore.statData._;\n            if (!Array.isArray(raw))\n                return [];\n            return raw.filter((name) => typeof name === 'string' && name.trim().length > 0);\n        });\n        const carriedMagicBooks = computed(() => {\n            const available = new Set(carryableMagicBookNames.value);\n            return rawCarriedMagicBooks.value.filter((name) => available.has(name));\n        });\n        const carriedMagicBookSet = computed(() => new Set(carriedMagicBooks.value));\n        const selectableRelicPool = computed(() => {\n            const categorySet = new Set(['', ...carriedMagicBooks.value]);\n            let pool = getAllRelics().filter((relic) => categorySet.has(relic.category));\n            if (pool.length === 0) {\n                pool = getAllRelics().filter((relic) => relic.category === '');\n            }\n            return [...pool];\n        });\n        const muxinlanFavor = computed(() => {\n            const roles = (gameStore.statData. ?? {});\n            const raw = Number(roles?.['']?.[''] ?? 0);\n            const safe = Number.isFinite(raw) ? raw : 0;\n            return Math.max(-1000, Math.min(1000, safe));\n        });\n        const muxinlanFavorDisplay = computed(() => Math.max(0, muxinlanFavor.value));\n        const shopDiscountRate = computed(() => Math.max(0, Math.min(1000, muxinlanFavor.value)) * 0.0002);\n        const shopDiscountPercentText = computed(() => `${(shopDiscountRate.value * 100).toFixed(2)}%`);\n        const shopRobBtnOpacity = computed(() => {\n            const revealed = Math.min(5, shopRobClickCount.value);\n            return (0.32 + revealed * 0.13).toFixed(2);\n        });\n        const canEditMagicBooks = computed(() => ((gameStore.statData._ || '') === ''));\n        const magicBookSidebarIcon = computed(() => (canEditMagicBooks.value ? Book : Lock));\n        const isUpdatingMagicBooks = ref(false);\n        const openMagicBookModal = () => {\n            if (!canEditMagicBooks.value)\n                return;\n            activeModal.value = 'magicBooks';\n        };\n        const toggleMagicBook = async (bookName) => {\n            if (isUpdatingMagicBooks.value)\n                return;\n            const current = rawCarriedMagicBooks.value;\n            const nextBooks = current.includes(bookName)\n                ? current.filter((name) => name !== bookName)\n                : [...current, bookName];\n            isUpdatingMagicBooks.value = true;\n            await gameStore.updateStatDataFields({\n                _: Array.from(new Set(nextBooks)),\n            });\n            isUpdatingMagicBooks.value = false;\n        };\n        const cardByNameForTest = computed(() => {\n            const map = new Map();\n            for (const card of allCardsForTest.value) {\n                map.set(card.name, card);\n            }\n            return map;\n        });\n        const selectedTestDeckCards = computed(() => selectedTestDeck.value\n            .map((cardName, idx) => ({ idx, card: cardByNameForTest.value.get(cardName) }))\n            .filter((entry) => entry.card !== undefined));\n        const allEnemyNamesForTest = computed(() => getAllEnemyNames());\n        const baseRelicsForTest = computed(() => ([...getAllRelics()].sort((a, b) => {\n            const categoryDiff = compareCategory(a.category, b.category);\n            if (categoryDiff !== 0)\n                return categoryDiff;\n            return a.name.localeCompare(b.name, 'zh-Hans-CN');\n        })));\n        const relicCategoryGroupsForTest = computed(() => {\n            const grouped = new Map();\n            for (const relic of baseRelicsForTest.value) {\n                if (!grouped.has(relic.category)) {\n                    grouped.set(relic.category, []);\n                }\n                grouped.get(relic.category).push(relic);\n            }\n            return Array.from(grouped.entries()).map(([category, relics]) => ({\n                category,\n                relics,\n            }));\n        });\n        const relicCategoryTabsForTest = computed(() => [\n            '',\n            ...relicCategoryGroupsForTest.value.map((group) => group.category),\n        ]);\n        const filteredRelicCategoryGroupsForTest = computed(() => {\n            if (selectedRelicCategoryTab.value === '')\n                return relicCategoryGroupsForTest.value;\n            return relicCategoryGroupsForTest.value.filter((group) => group.category === selectedRelicCategoryTab.value);\n        });\n        watch(cardCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedCardCategoryTab.value)) {\n                selectedCardCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        watch(relicCategoryTabsForTest, (tabs) => {\n            if (!tabs.includes(selectedRelicCategoryTab.value)) {\n                selectedRelicCategoryTab.value = '';\n            }\n        }, { immediate: true });\n        const getCardTypeBadgeClass = (type) => {\n            switch (type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-500/50 text-red-300 bg-red-900/20';\n                case CardType.MAGIC:\n                    return 'border-blue-500/50 text-blue-300 bg-blue-900/20';\n                case CardType.FUNCTION:\n                    return 'border-yellow-500/50 text-yellow-300 bg-yellow-900/20';\n                case CardType.DODGE:\n                    return 'border-emerald-500/50 text-emerald-300 bg-emerald-900/20';\n                default:\n                    return 'border-white/30 text-dungeon-paper/80 bg-white/5';\n            }\n        };\n        const getCardCategoryStripClass = (category) => {\n            switch (category) {\n                case '':\n                    return 'bg-dungeon-gold/80';\n                case '':\n                    return 'bg-orange-500/85';\n                default:\n                    return 'bg-indigo-400/80';\n            }\n        };\n        //  Resolved deck from MVU _ via card registry \n        const resolvedDeck = computed(() => {\n            const skills = gameStore.statData._ ?? [];\n            return resolveCardNames(skills.filter((s) => s !== ''));\n        });\n        //  Resolved relics from MVU _ \n        // Format: { relicName: count } e.g. { \"\": 2, \"\": 3 }\n        const relicEntries = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            return Object.entries(raw)\n                .filter(([name, count]) => name && count > 0)\n                .map(([name, count]) => {\n                const relic = getRelicByName(name);\n                return {\n                    name,\n                    count,\n                    rarity: relic?.rarity ?? '',\n                    category: relic?.category ?? '',\n                    effect: relic?.effect ?? '',\n                    description: relic?.description ?? relic?.effect ?? '',\n                };\n            })\n                .sort((a, b) => a.name.localeCompare(b.name, 'zh-Hans-CN'));\n        });\n        const chestRewardEntry = computed(() => {\n            const relic = chestRewardRelic.value;\n            if (!relic)\n                return null;\n            return {\n                name: relic.name,\n                count: 1,\n                rarity: relic.rarity,\n                category: relic.category,\n                effect: relic.effect,\n                description: relic.description ?? relic.effect ?? '',\n            };\n        });\n        const clearRelicTooltipTimers = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n            if (relicTooltipAutoHideTimer) {\n                clearTimeout(relicTooltipAutoHideTimer);\n                relicTooltipAutoHideTimer = null;\n            }\n        };\n        const showRelicTooltipForTarget = (target, relic) => {\n            const rect = target.getBoundingClientRect();\n            const tooltipWidth = 240;\n            const margin = 8;\n            const x = Math.max(margin, Math.min(rect.left + rect.width / 2, window.innerWidth - tooltipWidth - margin));\n            const y = Math.max(margin, rect.top - margin);\n            relicTooltip.value = {\n                x,\n                y,\n                name: relic.name,\n                rarity: relic.rarity,\n                category: relic.category,\n                count: relic.count,\n                effect: relic.effect,\n                description: relic.description,\n            };\n        };\n        const showRelicTooltip = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            showRelicTooltipForTarget(target, relic);\n        };\n        const hideRelicTooltip = () => {\n            clearRelicTooltipTimers();\n            relicTooltip.value = null;\n        };\n        const handleRelicTouchStart = (event, relic) => {\n            const target = event.currentTarget;\n            if (!target)\n                return;\n            clearRelicTooltipTimers();\n            relicTooltipLongPressTimer = setTimeout(() => {\n                showRelicTooltipForTarget(target, relic);\n                relicTooltipAutoHideTimer = setTimeout(() => {\n                    relicTooltip.value = null;\n                    relicTooltipAutoHideTimer = null;\n                }, 1800);\n            }, 320);\n        };\n        const handleRelicTouchEnd = () => {\n            if (relicTooltipLongPressTimer) {\n                clearTimeout(relicTooltipLongPressTimer);\n                relicTooltipLongPressTimer = null;\n            }\n        };\n        const showChestRewardTooltip = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            showRelicTooltip(event, chestRewardEntry.value);\n        };\n        const handleChestRewardTouchStart = (event) => {\n            if (!chestRewardEntry.value)\n                return;\n            handleRelicTouchStart(event, chestRewardEntry.value);\n        };\n        const combatRelicMap = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            const normalized = {};\n            for (const [name, value] of Object.entries(raw)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                normalized[name] = count;\n            }\n            return normalized;\n        });\n        watch(activeModal, (modal) => {\n            if (modal === 'magicBooks') {\n                gameStore.loadStatData();\n            }\n            if (modal !== 'relics') {\n                hideRelicTooltip();\n            }\n        });\n        watch(canEditMagicBooks, (editable) => {\n            if (!editable && activeModal.value === 'magicBooks') {\n                activeModal.value = null;\n            }\n        });\n        const selectedRelicTotalCount = computed(() => (Object.values(selectedTestRelicCounts.value).reduce((sum, value) => sum + Math.max(0, Math.floor(value)), 0)));\n        //  Text display settings (reactive, persisted) \n        const textSettings = reactive({\n            fontSize: 21,\n            lineHeight: 2.0,\n            fontFamily: \"'Cinzel', serif\",\n            containerWidth: 1300,\n        });\n        //  Computed display values from MVU stat_data \n        const displayText = computed(() => gameStore.mainText || '...\\n\\n');\n        // HP: _ / _, HP \n        const displayHp = computed(() => {\n            const hp = gameStore.statData._ ?? 10;\n            const maxHp = gameStore.statData._ ?? 10;\n            return Math.min(hp, maxHp);\n        });\n        const displayMaxHp = computed(() => gameStore.statData._ ?? 10);\n        // MP: _ only, no max variable. Visual cap at 20.\n        const displayMp = computed(() => gameStore.statData._ ?? 1);\n        // Gold\n        const displayGold = computed(() => gameStore.statData._ ?? 0);\n        // Dice range\n        const displayMinDice = computed(() => gameStore.statData.$ ?? 0);\n        const displayMaxDice = computed(() => gameStore.statData.$ ?? 0);\n        const hpPercent = computed(() => {\n            const max = displayMaxHp.value;\n            return max > 0 ? Math.min((displayHp.value / max) * 100, 100) : 100;\n        });\n        // MP visual fill: cap at 20 for display\n        const mpPercent = computed(() => {\n            const mp = displayMp.value;\n            const visualMax = 20;\n            return Math.min((mp / visualMax) * 100, 100);\n        });\n        //  Actions \n        const handleSendInput = () => {\n            if (!inputText.value.trim() || gameStore.isGenerating)\n                return;\n            gameStore.sendAction(inputText.value);\n            inputText.value = '';\n        };\n        const handleOptionClick = (option) => {\n            if (gameStore.isGenerating)\n                return;\n            // Strip the \"A. \" / \"B. \" / etc. prefix, paste content into input box\n            const stripped = option.replace(/^[A-D]\\.\\s*/i, '');\n            inputText.value = stripped;\n        };\n        //  Room type config for E option \n        const ROOM_TYPE_CONFIG = {\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.25)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#dc262680' },\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.3)', borderColor: '#ef4444', textColor: '#fca5a5', glowColor: '#ef444480' },\n            '': { label: '', icon: '', bgColor: 'rgba(161,98,7,0.25)', borderColor: '#eab308', textColor: '#fde68a', glowColor: '#eab30880' },\n            '': { label: '', icon: '', bgColor: 'rgba(21,128,61,0.25)', borderColor: '#22c55e', textColor: '#bbf7d0', glowColor: '#22c55e80' },\n            '': { label: '', icon: '', bgColor: 'rgba(8,145,178,0.25)', borderColor: '#06b6d4', textColor: '#a5f3fc', glowColor: '#06b6d480' },\n            '': { label: '', icon: '', bgColor: 'rgba(126,34,206,0.25)', borderColor: '#a855f7', textColor: '#e9d5ff', glowColor: '#a855f780' },\n        };\n        // E option: no button for  / \n        const specialOptionConfig = computed(() => {\n            if (!gameStore.hasOptionE)\n                return null;\n            if (isTreasureRoomContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            if (isShopContext.value)\n                return ROOM_TYPE_CONFIG[''];\n            const roomType = gameStore.statData._;\n            if (!roomType)\n                return null;\n            if (roomType === '' || roomType === '')\n                return null;\n            return ROOM_TYPE_CONFIG[roomType] ?? null;\n        });\n        const isTreasureRoomContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '' || area === '';\n        });\n        const isShopContext = computed(() => {\n            const roomType = (gameStore.statData._ || '').trim();\n            const area = (gameStore.statData._ || '').trim();\n            return roomType === '' || area === '';\n        });\n        const getRarityBasePrice = (rarity) => {\n            if (rarity === '')\n                return 15;\n            if (rarity === '')\n                return 10;\n            return 5;\n        };\n        const formatRarityLabel = (rarity) => (rarity === '' ? '' : rarity);\n        const rollShopRarity = () => {\n            const r = Math.random();\n            if (r < 0.8)\n                return '';\n            if (r < 0.95)\n                return '';\n            return '';\n        };\n        const toRelicTooltipEntry = (relic) => ({\n            name: relic.name,\n            count: 1,\n            rarity: relic.rarity,\n            category: relic.category,\n            effect: relic.effect,\n            description: relic.description ?? relic.effect ?? '',\n        });\n        const showShopProductTooltip = (event, item) => {\n            showRelicTooltip(event, toRelicTooltipEntry(item.relic));\n        };\n        const handleShopProductTouchStart = (event, item) => {\n            handleRelicTouchStart(event, toRelicTooltipEntry(item.relic));\n        };\n        const generateShopProducts = () => {\n            const pool = [...selectableRelicPool.value];\n            const favorForCount = Math.max(0, muxinlanFavor.value);\n            const targetCount = Math.max(0, 3 + Math.floor(favorForCount / 200));\n            const count = Math.min(targetCount, pool.length);\n            const usedNames = new Set();\n            const discountRate = shopDiscountRate.value;\n            const next = [];\n            for (let i = 0; i < count; i++) {\n                const targetRarity = rollShopRarity();\n                let candidates = pool.filter((relic) => !usedNames.has(relic.name) && relic.rarity === targetRarity);\n                if (candidates.length === 0) {\n                    candidates = pool.filter((relic) => !usedNames.has(relic.name));\n                }\n                if (candidates.length === 0)\n                    break;\n                const relic = pickOne(candidates);\n                if (!relic)\n                    break;\n                usedNames.add(relic.name);\n                const basePrice = getRarityBasePrice(relic.rarity);\n                const finalPrice = Math.max(1, Math.ceil(basePrice * (1 - discountRate)));\n                next.push({\n                    key: `${relic.id}-${i}`,\n                    relic,\n                    basePrice,\n                    finalPrice,\n                    sold: false,\n                });\n            }\n            shopProducts.value = next;\n        };\n        const openShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopSpentGold.value = 0;\n            shopPurchasedItems.value = [];\n            shopRobClickCount.value = 0;\n            shopRobbing.value = false;\n            generateShopProducts();\n            showShopView.value = true;\n        };\n        const closeShopView = () => {\n            hideRelicTooltip();\n            clearShopRobTimer();\n            shopBuying.value = false;\n            shopRobbing.value = false;\n            showShopView.value = false;\n        };\n        const buildNextRelicInventory = (pickedRelic) => {\n            const rawRelics = gameStore.statData._ ?? {};\n            const nextRelics = {};\n            for (const [name, value] of Object.entries(rawRelics)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                nextRelics[name] = count;\n            }\n            nextRelics[pickedRelic.name] = (nextRelics[pickedRelic.name] ?? 0) + 1;\n            return nextRelics;\n        };\n        const buyShopProduct = async (item) => {\n            if (shopBuying.value || item.sold)\n                return;\n            const currentGold = Math.max(0, Math.floor(Number(gameStore.statData._ ?? 0)));\n            if (currentGold < item.finalPrice) {\n                return;\n            }\n            shopBuying.value = true;\n            const nextGold = currentGold - item.finalPrice;\n            const nextRelics = buildNextRelicInventory(item.relic);\n            const ok = await gameStore.updateStatDataFields({\n                _: nextGold,\n                _: nextRelics,\n            });\n            shopBuying.value = false;\n            if (!ok)\n                return;\n            item.sold = true;\n            shopSpentGold.value += item.finalPrice;\n            shopPurchasedItems.value.push({\n                name: item.relic.name,\n                rarity: formatRarityLabel(item.relic.rarity),\n                price: item.finalPrice,\n            });\n            hideRelicTooltip();\n        };\n        const exitShop = () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value)\n                return;\n            const purchased = [...shopPurchasedItems.value];\n            const total = shopSpentGold.value;\n            closeShopView();\n            if (purchased.length === 0)\n                return;\n            const purchasedText = purchased.map((item) => `${item.name}${item.rarity}`).join('');\n            gameStore.sendAction(`<user>${purchasedText}${total}`);\n        };\n        const handleShopRobClick = async () => {\n            if (shopBuying.value || gameStore.isGenerating || shopRobbing.value)\n                return;\n            if (shopRobClickCount.value < 5) {\n                shopRobClickCount.value += 1;\n                return;\n            }\n            shopRobbing.value = true;\n            const ok = await gameStore.updateStatDataFields({ _: '' });\n            if (!ok) {\n                shopRobbing.value = false;\n                return;\n            }\n            clearShopRobTimer();\n            shopRobTimer = setTimeout(() => {\n                closeShopView();\n                combatEnemyName.value = '';\n                showCombat.value = true;\n                shopRobTimer = null;\n            }, 1000);\n        };\n        const clearShopRobTimer = () => {\n            if (!shopRobTimer)\n                return;\n            clearTimeout(shopRobTimer);\n            shopRobTimer = null;\n        };\n        const clearChestMimicTimer = () => {\n            if (!chestMimicTimer)\n                return;\n            clearTimeout(chestMimicTimer);\n            chestMimicTimer = null;\n        };\n        const clearChestRewardFadeTimer = () => {\n            if (!chestRewardFadeTimer)\n                return;\n            clearTimeout(chestRewardFadeTimer);\n            chestRewardFadeTimer = null;\n        };\n        const handleChestBgLoaded = () => {\n            if (!showChestView.value)\n                return;\n            if (chestStage.value !== 'opened')\n                return;\n            if (chestBackgroundUrl.value !== CHEST_BG_OPENED)\n                return;\n            chestOpenedBgReady.value = true;\n            if (chestRewardRelic.value && !chestRewardCollected.value) {\n                chestRewardVisible.value = true;\n            }\n        };\n        const openChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            chestStage.value = 'closed';\n            chestRolling.value = false;\n            chestRewardRelic.value = null;\n            chestRewardCollected.value = false;\n            chestCollecting.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n            chestPortalChoices.value = [];\n            showChestView.value = true;\n        };\n        const closeChestView = () => {\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n            hideRelicTooltip();\n            showChestView.value = false;\n            chestRolling.value = false;\n            chestRewardVisible.value = false;\n            chestOpenedBgReady.value = false;\n        };\n        const pickChestRewardRelic = () => {\n            const candidatePool = [...selectableRelicPool.value];\n            if (candidatePool.length === 0)\n                return null;\n            const rarityRoll = Math.random();\n            const targetRarity = rarityRoll < 0.6 ? '' : rarityRoll < 0.9 ? '' : '';\n            let rarityPool = candidatePool.filter((relic) => relic.rarity === targetRarity);\n            if (rarityPool.length === 0) {\n                rarityPool = candidatePool;\n            }\n            return pickOne(rarityPool);\n        };\n        const grantRelicToPlayer = async (relic) => {\n            const rawRelics = gameStore.statData._ ?? {};\n            const nextRelics = {};\n            for (const [name, value] of Object.entries(rawRelics)) {\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (!name || count <= 0)\n                    continue;\n                nextRelics[name] = count;\n            }\n            nextRelics[relic.name] = (nextRelics[relic.name] ?? 0) + 1;\n            return gameStore.updateStatDataFields({ _: nextRelics });\n        };\n        const collectChestReward = async () => {\n            if (!chestRewardRelic.value || chestRewardCollected.value || chestCollecting.value)\n                return;\n            chestCollecting.value = true;\n            const ok = await grantRelicToPlayer(chestRewardRelic.value);\n            chestCollecting.value = false;\n            if (!ok)\n                return;\n            chestRewardCollected.value = true;\n            clearChestRewardFadeTimer();\n            chestRewardFadeTimer = setTimeout(() => {\n                chestRewardVisible.value = false;\n                hideRelicTooltip();\n                chestRewardFadeTimer = null;\n            }, 260);\n        };\n        const handleChestCenterClick = async () => {\n            if (chestRolling.value || chestStage.value !== 'closed')\n                return;\n            chestRolling.value = true;\n            const openSuccess = Math.random() < 0.9;\n            if (openSuccess) {\n                chestStage.value = 'opened';\n                chestOpenedBgReady.value = false;\n                chestRewardVisible.value = false;\n                const reward = pickChestRewardRelic();\n                if (!reward) {\n                    chestRolling.value = false;\n                    return;\n                }\n                chestRewardRelic.value = reward;\n                chestRewardCollected.value = false;\n                chestCollecting.value = false;\n                chestPortalChoices.value = generateChestLeavePortals();\n                if (chestOpenedBgReady.value) {\n                    chestRewardVisible.value = true;\n                }\n                chestRolling.value = false;\n                return;\n            }\n            chestStage.value = 'mimic';\n            await gameStore.updateStatDataFields({ _: '' });\n            clearChestMimicTimer();\n            chestMimicTimer = setTimeout(() => {\n                showChestView.value = false;\n                combatEnemyName.value = '';\n                showCombat.value = true;\n                chestMimicTimer = null;\n            }, 1000);\n        };\n        const handleSpecialOption = () => {\n            if (isTreasureRoomContext.value) {\n                openChestView();\n                return;\n            }\n            if (isShopContext.value) {\n                openShopView();\n                return;\n            }\n            toastr.info('...');\n        };\n        // \n        //  [Leave] Portal System  Floor/Area Logic\n        // \n        const FLOOR_MAP = {\n            '': ['', '', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n        };\n        const FLOOR_ORDER = ['', '', '', '', ''];\n        function getFloorForArea(area) {\n            for (const [floor, areas] of Object.entries(FLOOR_MAP)) {\n                if (areas.includes(area))\n                    return floor;\n            }\n            return null;\n        }\n        function getNextFloor(currentFloor) {\n            const idx = FLOOR_ORDER.indexOf(currentFloor);\n            if (idx < 0 || idx >= FLOOR_ORDER.length - 1)\n                return null;\n            return FLOOR_ORDER[idx + 1];\n        }\n        const FLOOR_MONSTER_CONFIG = {\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', '', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': [''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': [''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n        };\n        // 70% 30% \n        const COMMON_MONSTER_RATE_BY_FLOOR = {\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n        };\n        function pickOne(arr) {\n            if (!arr.length)\n                return null;\n            return arr[Math.floor(Math.random() * arr.length)];\n        }\n        function pickBattleMonsterByArea(area) {\n            const floor = getFloorForArea(area) ?? '';\n            const config = FLOOR_MONSTER_CONFIG[floor];\n            if (!config)\n                return null;\n            const commonPool = config.common;\n            const uniquePool = config.uniqueByArea[area] ?? [];\n            const commonRate = COMMON_MONSTER_RATE_BY_FLOOR[floor] ?? 0.7;\n            let pool = [];\n            if (commonPool.length === 0 && uniquePool.length === 0)\n                return null;\n            if (commonPool.length === 0) {\n                pool = uniquePool;\n            }\n            else if (uniquePool.length === 0) {\n                pool = commonPool;\n            }\n            else {\n                pool = Math.random() < commonRate ? commonPool : uniquePool;\n            }\n            return pickOne(pool);\n        }\n        //  Portal visuals \n        const PORTAL_ROOM_TYPES = ['', '', '', '', '', '', ''];\n        const PORTAL_ROOM_VISUALS = {\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.5)', borderColor: '#991b1b', textColor: '#fca5a5', glowColor: '#dc2626' },\n            '': { icon: '', bgColor: 'rgba(113,63,18,0.5)', borderColor: '#a16207', textColor: '#fde68a', glowColor: '#eab308' },\n            '': { icon: '', bgColor: 'rgba(20,83,45,0.5)', borderColor: '#166534', textColor: '#bbf7d0', glowColor: '#22c55e' },\n            '': { icon: '', bgColor: 'rgba(22,78,99,0.5)', borderColor: '#155e75', textColor: '#a5f3fc', glowColor: '#06b6d4' },\n            '': { icon: '', bgColor: 'rgba(88,28,135,0.5)', borderColor: '#7e22ce', textColor: '#e9d5ff', glowColor: '#a855f7' },\n            '': { icon: '', bgColor: 'rgba(63,63,70,0.5)', borderColor: '#52525b', textColor: '#d4d4d8', glowColor: '#71717a' },\n            '': { icon: '', bgColor: 'rgba(124,45,18,0.5)', borderColor: '#9a3412', textColor: '#fed7aa', glowColor: '#ea580c' },\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.6)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#ef4444' },\n        };\n        const AREA_PORTAL_VISUAL = {\n            icon: '', bgColor: 'rgba(79,70,229,0.5)', borderColor: '#6366f1', textColor: '#c7d2fe', glowColor: '#818cf8',\n        };\n        let cachedPortals = [];\n        let cachedPortalFingerprint = '';\n        function shuffle(arr) {\n            const a = [...arr];\n            for (let i = a.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                [a[i], a[j]] = [a[j], a[i]];\n            }\n            return a;\n        }\n        function generatePortals() {\n            const currentArea = gameStore.statData._ || '';\n            const currentRoomType = gameStore.statData._ || '';\n            const stats = gameStore.statData.$ || {};\n            const roomsPassed = stats. ?? 0;\n            const isStartArea = currentArea === '';\n            const isBossRoom = currentRoomType === '';\n            //  Special:  or   next floor area portals \n            if (isStartArea || isBossRoom) {\n                let targetFloor = null;\n                if (isStartArea) {\n                    targetFloor = '';\n                }\n                else {\n                    const currentFloor = getFloorForArea(currentArea);\n                    if (currentFloor)\n                        targetFloor = getNextFloor(currentFloor);\n                }\n                if (targetFloor && FLOOR_MAP[targetFloor]) {\n                    const candidates = FLOOR_MAP[targetFloor].filter(a => a !== currentArea);\n                    const picked = shuffle(candidates).slice(0, 3);\n                    return picked.map(areaName => ({\n                        label: areaName,\n                        roomType: '',\n                        areaName,\n                        floorName: targetFloor,\n                        isFloorTransition: true,\n                        ...AREA_PORTAL_VISUAL,\n                    }));\n                }\n            }\n            //  Boss room probability: rooms >= 5  (rooms - 4) * 10% \n            if (roomsPassed >= 5) {\n                const bossChance = (roomsPassed - 4) * 0.1;\n                if (Math.random() < bossChance) {\n                    const vis = PORTAL_ROOM_VISUALS[''];\n                    return [{ label: '', roomType: '', isFloorTransition: false, ...vis }];\n                }\n            }\n            //  Normal: 1-3 random room portals (20%/40%/40%) \n            const roll = Math.random();\n            const count = roll < 0.2 ? 1 : roll < 0.6 ? 2 : 3;\n            const picked = shuffle(PORTAL_ROOM_TYPES).slice(0, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        // //hasLeave \n        const portalChoices = computed(() => {\n            if (!gameStore.hasLeave) {\n                cachedPortals = [];\n                cachedPortalFingerprint = '';\n                return [];\n            }\n            //  +  + \n            const area = gameStore.statData._ || '';\n            const roomType = gameStore.statData._ || '';\n            const rooms = (gameStore.statData.$?. ?? 0);\n            const fingerprint = `${area}|${roomType}|${rooms}`;\n            if (fingerprint !== cachedPortalFingerprint) {\n                cachedPortalFingerprint = fingerprint;\n                cachedPortals = generatePortals();\n            }\n            return cachedPortals;\n        });\n        //  Room type  $ field mapping \n        const ROOM_STAT_KEY = {\n            '': '', '': '', '': '',\n            '': '', '': '', '': '', '': '',\n        };\n        const buildQueuedPortalAction = (portal) => {\n            if (portal.isFloorTransition) {\n                // \n                gameStore.setPendingPortalChanges({\n                    area: portal.areaName,\n                    roomType: '',\n                    resetRoomCounter: true,\n                    //  +1 +1 +1\n                    incrementKeys: ['', '', ''],\n                    enemyName: '',\n                });\n                console.info(`[Portal] Floor transition queued  area: ${portal.areaName}, first room: `);\n                const enterText = `${portal.areaName}`;\n                return {\n                    enterText,\n                    actionText: `<user>${enterText}`,\n                };\n            }\n            // \n            const incrementKeys = ['', ''];\n            const statKey = ROOM_STAT_KEY[portal.roomType];\n            if (statKey)\n                incrementKeys.push(statKey);\n            const currentArea = gameStore.statData._ || '';\n            const encounterMonster = portal.roomType === ''\n                ? pickBattleMonsterByArea(currentArea)\n                : null;\n            gameStore.setPendingPortalChanges({\n                roomType: portal.roomType,\n                incrementKeys,\n                enemyName: encounterMonster ?? '',\n            });\n            console.info(`[Portal] Room transition queued  type: ${portal.roomType}`);\n            const enterText = portal.roomType === '' && encounterMonster\n                ? `${portal.roomType}${encounterMonster}`\n                : `${portal.roomType}`;\n            return {\n                enterText,\n                actionText: `<user>${enterText}`,\n            };\n        };\n        function generateChestLeavePortals() {\n            const generated = generatePortals();\n            if (generated.length > 0)\n                return generated;\n            const roll = Math.random();\n            const count = roll < 0.2 ? 1 : roll < 0.6 ? 2 : 3;\n            const picked = shuffle(PORTAL_ROOM_TYPES).slice(0, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        const handlePortalClick = async (portal) => {\n            if (gameStore.isGenerating)\n                return;\n            const { actionText } = buildQueuedPortalAction(portal);\n            gameStore.sendAction(actionText);\n        };\n        const handleChestPortalClick = async (portal) => {\n            if (gameStore.isGenerating || chestCollecting.value || chestStage.value !== 'opened')\n                return;\n            const { actionText, enterText } = buildQueuedPortalAction(portal);\n            const relicName = chestRewardCollected.value ? chestRewardRelic.value?.name : '';\n            closeChestView();\n            if (relicName) {\n                gameStore.sendAction(`<user>${relicName}${enterText}`);\n                return;\n            }\n            gameStore.sendAction(actionText);\n        };\n        const openSaveLoad = () => {\n            gameStore.loadSaveEntries();\n            gameStore.isSaveLoadOpen = !gameStore.isSaveLoadOpen;\n        };\n        const openVariableUpdate = () => {\n            isVariableUpdateOpen.value = !isVariableUpdateOpen.value;\n        };\n        // toggleFullScreen imported from '../fullscreen'\n        //  Combat Test \n        const getSelectedTestRelicCount = (name) => {\n            return Math.max(0, Math.floor(selectedTestRelicCounts.value[name] ?? 0));\n        };\n        const setSelectedTestRelicCount = (name, next) => {\n            const value = Math.max(0, Math.floor(next));\n            if (value <= 0) {\n                delete selectedTestRelicCounts.value[name];\n                return;\n            }\n            selectedTestRelicCounts.value[name] = value;\n        };\n        const increaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) + 1);\n        };\n        const decreaseSelectedRelic = (name) => {\n            setSelectedTestRelicCount(name, getSelectedTestRelicCount(name) - 1);\n        };\n        const buildSelectedRelicPayload = () => {\n            const next = {};\n            for (const relic of baseRelicsForTest.value) {\n                const count = getSelectedTestRelicCount(relic.name);\n                if (count > 0) {\n                    next[relic.name] = count;\n                }\n            }\n            return next;\n        };\n        const openCombatTestBuilder = () => {\n            gameStore.loadStatData();\n            const availableCardNames = new Set(allCardsForTest.value.map(c => c.name));\n            const availableRelicNames = new Set(baseRelicsForTest.value.map((relic) => relic.name));\n            const presetDeck = Array.isArray(gameStore.statData._)\n                ? gameStore.statData._.filter((name) => availableCardNames.has(name)).slice(0, 9)\n                : [];\n            const presetRelicsRaw = gameStore.statData._ ?? {};\n            const presetRelics = {};\n            for (const [name, value] of Object.entries(presetRelicsRaw)) {\n                if (!availableRelicNames.has(name))\n                    continue;\n                const count = Math.max(0, Math.floor(Number(value ?? 0)));\n                if (count <= 0)\n                    continue;\n                presetRelics[name] = count;\n            }\n            selectedTestDeck.value = [...presetDeck];\n            selectedTestEnemy.value = '';\n            selectedTestRelicCounts.value = presetRelics;\n            selectedCardCategoryTab.value = '';\n            selectedRelicCategoryTab.value = '';\n            combatTestStartAt999.value = false;\n            combatTestStep.value = 'deck';\n            activeModal.value = 'combatTestBuilder';\n        };\n        const addCardToTestDeck = (cardName) => {\n            if (selectedTestDeck.value.length >= 9)\n                return;\n            selectedTestDeck.value.push(cardName);\n        };\n        const removeCardFromTestDeck = (index) => {\n            if (index < 0 || index >= selectedTestDeck.value.length)\n                return;\n            selectedTestDeck.value.splice(index, 1);\n        };\n        const confirmCombatTestDeck = async () => {\n            if (selectedTestDeck.value.length !== 9) {\n                gameStore.error = '9';\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: [...selectedTestDeck.value],\n            });\n            if (!ok)\n                return;\n            if (allEnemyNamesForTest.value.length === 0) {\n                gameStore.error = ' enemyRegistry ';\n                return;\n            }\n            combatTestStep.value = 'enemy';\n        };\n        const confirmCombatTestEnemyAndStart = async () => {\n            if (!selectedTestEnemy.value) {\n                gameStore.error = '';\n                return;\n            }\n            const enemyDef = getEnemyByName(selectedTestEnemy.value);\n            if (!enemyDef) {\n                gameStore.error = `${selectedTestEnemy.value}`;\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: selectedTestEnemy.value,\n                _: buildSelectedRelicPayload(),\n            });\n            if (!ok)\n                return;\n            activeModal.value = null;\n            combatEnemyName.value = selectedTestEnemy.value;\n            combatTestStartAt999CurrentBattle.value = combatTestStartAt999.value;\n            showCombat.value = true;\n        };\n        const handleCombatEnd = (win) => {\n            showCombat.value = false;\n            combatTestStartAt999CurrentBattle.value = false;\n            console.log('[Combat] Result:', win ? 'WIN' : 'LOSE');\n        };\n        onBeforeUnmount(() => {\n            clearShopRobTimer();\n            clearChestMimicTimer();\n            clearChestRewardFadeTimer();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Dynamic Background \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_unref(bgImageUrl))\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: _unref(bgImageUrl),\n                            class: \"absolute inset-0 w-full h-full object-cover\",\n                            alt: \"\",\n                            onError: onBgError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_3))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createElementVNode(\"div\", {\n                        class: \"absolute inset-0\",\n                        style: _normalizeStyle({ backgroundColor: `rgba(0,0,0,${_unref(bgOverlayOpacity)})` })\n                    }, null, 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Sidebar: Individual Icons Top-Left (no back button, settings already has exit) \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(SettingsIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'settings',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeModal.value = 'settings'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Scroll),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'deck',\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeModal.value = 'deck'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Box),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'relics',\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeModal.value = 'relics'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(MapIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'map',\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeModal.value = 'map'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(magicBookSidebarIcon),\n                        label: _unref(canEditMagicBooks) ? '' : '',\n                        \"tooltip-side\": \"right\",\n                        active: _unref(canEditMagicBooks) && _unref(activeModal) === 'magicBooks',\n                        disabled: !_unref(canEditMagicBooks),\n                        onClick: openMagicBookModal\n                    }, null, 8 /* PROPS */, [\"icon\", \"label\", \"active\", \"disabled\"])\n                ]),\n                _createCommentVNode(\" Sidebar: Right side icons (top right) \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\" Fullscreen (small) \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                        title: \"\",\n                        onClick: _cache[4] || (_cache[4] =\n                            //@ts-ignore\n                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                    }, [\n                        _createVNode(_unref(Maximize), { class: \"size-4\" })\n                    ])\n                ]),\n                _createCommentVNode(\" Right sidebar: save/load only (reroll & edit moved into panel) \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(BookOpen),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(gameStore).isSaveLoadOpen,\n                        onClick: openSaveLoad\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(FileText),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(isVariableUpdateOpen),\n                        onClick: openVariableUpdate\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", {\n                        class: \"w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full\",\n                        style: _normalizeStyle({ maxWidth: _unref(textSettings).containerWidth + 'px' })\n                    }, [\n                        _createCommentVNode(\" Story Text Area \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createCommentVNode(\" Decorative Corners \"),\n                            _cache[36] || (_cache[36] = _createElementVNode(\"div\", { class: \"absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Loading Indicator \"),\n                            (_unref(gameStore).isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [...(_cache[33] || (_cache[33] = [\n                                        _createStaticVNode(\"<div class=\\\"flex gap-1\\\" data-v-d51785bc><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0s;\\\" data-v-d51785bc></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.2s;\\\" data-v-d51785bc></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.4s;\\\" data-v-d51785bc></span></div><span class=\\\"text-dungeon-gold/60 font-ui text-sm\\\" data-v-d51785bc>...</span>\", 2)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Edit Mode \"),\n                            (_unref(gameStore).isEditing)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(gameStore).editingText) = $event)),\n                                        class: \"flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, null, 4 /* STYLE */), [\n                                        [_vModelText, _unref(gameStore).editingText]\n                                    ]),\n                                    _createCommentVNode(\" Edit Actions \"),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(gameStore).cancelEdit()))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]\",\n                                            onClick: _cache[7] || (_cache[7] = ($event) => (_unref(gameStore).saveEdit()))\n                                        }, \"  \")\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" Normal View (not editing) \"),\n                                    _createCommentVNode(\" Story Content \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, [\n                                        _createCommentVNode(\" Streaming text (during generation) \"),\n                                        (_unref(gameStore).isGenerating && _unref(gameStore).streamingText)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_12, _toDisplayString(_unref(gameStore).streamingText), 1 /* TEXT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" Final main text \"),\n                                                _createElementVNode(\"p\", _hoisted_13, _toDisplayString(_unref(displayText)), 1 /* TEXT */)\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ], 4 /* STYLE */),\n                                    _createCommentVNode(\" Options Section \"),\n                                    (!_unref(gameStore).isGenerating && (_unref(gameStore).options.length > 0 || _unref(gameStore).hasOptionE || _unref(gameStore).hasLeave))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2\" }, null, -1 /* CACHED */)),\n                                            _createCommentVNode(\" A-D Normal Options \"),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameStore).options, (option, i) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 'opt-' + i,\n                                                    class: \"w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1\",\n                                                    onClick: ($event) => (handleOptionClick(option))\n                                                }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_15));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createCommentVNode(\" E Option: Special Room Action Button \"),\n                                            (_unref(gameStore).hasOptionE && _unref(specialOptionConfig))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]\",\n                                                    style: _normalizeStyle({\n                                                        backgroundColor: _unref(specialOptionConfig).bgColor,\n                                                        borderColor: _unref(specialOptionConfig).borderColor,\n                                                        color: _unref(specialOptionConfig).textColor,\n                                                        boxShadow: `0 0 20px ${_unref(specialOptionConfig).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`,\n                                                    }),\n                                                    onClick: handleSpecialOption\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(_unref(specialOptionConfig).icon), 1 /* TEXT */),\n                                                    _createTextVNode(\" \" + _toDisplayString(_unref(specialOptionConfig).label), 1 /* TEXT */)\n                                                ], 4 /* STYLE */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Leave] Portal System \"),\n                                            (_unref(gameStore).hasLeave && _unref(portalChoices).length > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                                    _cache[34] || (_cache[34] = _createElementVNode(\"div\", { class: \"text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_18, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(portalChoices), (portal, i) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 'portal-' + i,\n                                                                class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95\",\n                                                                style: _normalizeStyle({\n                                                                    backgroundColor: portal.bgColor,\n                                                                    borderColor: portal.borderColor,\n                                                                    boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                                }),\n                                                                onClick: ($event) => (handlePortalClick(portal))\n                                                            }, [\n                                                                _createCommentVNode(\" Portal glow ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                                    style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                                }, null, 4 /* STYLE */),\n                                                                _createCommentVNode(\" Portal icon \"),\n                                                                _createElementVNode(\"span\", _hoisted_20, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                                _createCommentVNode(\" Portal label \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                                    style: _normalizeStyle({ color: portal.textColor })\n                                                                }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                                _createCommentVNode(\" Animated ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                                    style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                                }, null, 4 /* STYLE */)\n                                                            ], 12 /* STYLE, PROPS */, _hoisted_19));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" Error Display \"),\n                                    (_unref(gameStore).error)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, _toDisplayString(_unref(gameStore).error), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Input Area \"),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => (_isRef(inputText) ? (inputText).value = $event : null)),\n                                    type: \"text\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    placeholder: _unref(gameStore).isGenerating ? '...' : '...',\n                                    class: \"w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 pr-14 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    onKeydown: _withKeys(handleSendInput, [\"enter\"])\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_24), [\n                                    [_vModelText, _unref(inputText)]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    onClick: handleSendInput\n                                }, [\n                                    _createVNode(_unref(Send), { class: \"size-5\" })\n                                ], 8 /* PROPS */, _hoisted_25)\n                            ])\n                        ])\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Player Status HUD (Bottom Left) - Collapsible \"),\n                _createElementVNode(\"div\", _hoisted_26, [\n                    _createCommentVNode(\" Toggle Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md\",\n                        title: _unref(isStatusOpen) ? '' : '',\n                        onClick: _cache[9] || (_cache[9] = ($event) => (isStatusOpen.value = !_unref(isStatusOpen)))\n                    }, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(isStatusOpen) ? _unref(ChevronDown) : _unref(Activity)), { class: \"size-5\" }))\n                    ], 8 /* PROPS */, _hoisted_27),\n                    _createCommentVNode(\" Expandable Status Panel \"),\n                    _createVNode(_Transition, { name: \"status-slide\" }, {\n                        default: _withCtx(() => [\n                            (_unref(isStatusOpen))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                    _createCommentVNode(\" Decorative Elements \"),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[48] || (_cache[48] = _createElementVNode(\"div\", { class: \"absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[49] || (_cache[49] = _createElementVNode(\"div\", { class: \"absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" HP & MP: Container-fill style \"),\n                                    _createElementVNode(\"div\", _hoisted_29, [\n                                        _createCommentVNode(\" HP Heart Container \"),\n                                        _createElementVNode(\"div\", _hoisted_30, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-heart\",\n                                                title: `HP: ${_unref(displayHp)}/${_unref(displayMaxHp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_32, [\n                                                    _cache[38] || (_cache[38] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"heartClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"hpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"hpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#8a0e0e\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#cc2222\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#ee4444\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Heart outline (dark) \"),\n                                                    _cache[39] || (_cache[39] = _createElementVNode(\"path\", {\n                                                        d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\",\n                                                        fill: \"#1a0808\",\n                                                        stroke: \"#5c1a1a\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level (clipped to heart) \"),\n                                                    _createElementVNode(\"g\", _hoisted_33, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(hpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(hpPercent) / 100) * 60,\n                                                            fill: \"url(#hpGradient)\",\n                                                            filter: \"url(#hpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_34)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[40] || (_cache[40] = _createElementVNode(\"ellipse\", {\n                                                        cx: \"22\",\n                                                        cy: \"18\",\n                                                        rx: \"5\",\n                                                        ry: \"4\",\n                                                        fill: \"rgba(255,255,255,0.12)\",\n                                                        transform: \"rotate(-20,22,18)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_31),\n                                            _createElementVNode(\"span\", _hoisted_35, [\n                                                _createElementVNode(\"span\", _hoisted_36, _toDisplayString(_unref(displayHp)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_37, \"/\" + _toDisplayString(_unref(displayMaxHp)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\" MP Crystal Container \"),\n                                        _createElementVNode(\"div\", _hoisted_38, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-mana\",\n                                                title: `MP: ${_unref(displayMp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_40, [\n                                                    _cache[41] || (_cache[41] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"manaClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 4 L54 24 L32 60 L10 24 Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"mpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"mpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#1a1a8a\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#3344cc\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#5566ee\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Crystal outline \"),\n                                                    _cache[42] || (_cache[42] = _createElementVNode(\"path\", {\n                                                        d: \"M32 4 L54 24 L32 60 L10 24 Z\",\n                                                        fill: \"#080818\",\n                                                        stroke: \"#1a1a5c\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level \"),\n                                                    _createElementVNode(\"g\", _hoisted_41, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(mpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(mpPercent) / 100) * 60,\n                                                            fill: \"url(#mpGradient)\",\n                                                            filter: \"url(#mpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_42)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[43] || (_cache[43] = _createElementVNode(\"polygon\", {\n                                                        points: \"26,14 32,8 38,14 32,20\",\n                                                        fill: \"rgba(255,255,255,0.1)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_39),\n                                            _createElementVNode(\"span\", _hoisted_43, [\n                                                _createElementVNode(\"span\", _hoisted_44, _toDisplayString(_unref(displayMp)), 1 /* TEXT */)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Divider \"),\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"div\", { class: \"my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" Dice Range Row \"),\n                                    _createElementVNode(\"div\", _hoisted_45, [\n                                        _createElementVNode(\"div\", _hoisted_46, [\n                                            _createVNode(_unref(Dices), { class: \"size-4 text-dungeon-gold-dim drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_47, [\n                                                _createElementVNode(\"span\", _hoisted_48, _toDisplayString(_unref(displayMinDice)), 1 /* TEXT */),\n                                                _cache[44] || (_cache[44] = _createElementVNode(\"span\", { class: \"text-gray-500\" }, \"~\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_49, _toDisplayString(_unref(displayMaxDice)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _cache[45] || (_cache[45] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Dice\", -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\" Gold Row \"),\n                                    _createElementVNode(\"div\", _hoisted_50, [\n                                        _createElementVNode(\"div\", _hoisted_51, [\n                                            _createVNode(_unref(Coins), { class: \"size-4 drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_52, _toDisplayString(_unref(displayGold)), 1 /* TEXT */)\n                                        ]),\n                                        _cache[46] || (_cache[46] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Gold\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\" Modals \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'map',\n                    onClose: _cache[10] || (_cache[10] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [...(_cache[51] || (_cache[51] = [\n                            _createElementVNode(\"div\", { class: \"w-full h-64 bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center rounded\" }, [\n                                _createElementVNode(\"span\", { class: \"font-heading text-dungeon-gold/30 text-2xl\" }, \"MAP_RENDER_TARGET\")\n                            ], -1 /* CACHED */)\n                        ]))]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'deck',\n                    onClose: _cache[11] || (_cache[11] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(resolvedDeck).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedDeck), (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"hover:scale-105 transition-transform flex justify-center\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_54, [\n                                _createVNode(_unref(Scroll), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[52] || (_cache[52] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"  \", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'magicBooks',\n                    \"panel-class\": \"max-w-[92rem] max-h-[94%]\",\n                    onClose: _cache[12] || (_cache[12] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_55, [\n                            (_unref(carryableMagicBookNames).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(carryableMagicBookNames), (bookName) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: `magic-book-${bookName}`,\n                                            type: \"button\",\n                                            class: _normalizeClass([\"relative rounded-lg border p-3 text-left transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[#130c08]/80\", _unref(carriedMagicBookSet).has(bookName)\n                                                    ? 'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.45)] ring-1 ring-dungeon-gold/70'\n                                                    : 'border-dungeon-brown/70 hover:border-dungeon-gold/45']),\n                                            disabled: _unref(isUpdatingMagicBooks),\n                                            onClick: ($event) => (toggleMagicBook(bookName))\n                                        }, [\n                                            _createElementVNode(\"div\", {\n                                                class: _normalizeClass([\"relative w-full overflow-hidden rounded-md border\", _unref(carriedMagicBookSet).has(bookName) ? 'border-dungeon-gold/60' : 'border-dungeon-brown/60'])\n                                            }, [\n                                                _createElementVNode(\"img\", {\n                                                    src: getMagicBookCoverUrl(bookName),\n                                                    alt: `${bookName} `,\n                                                    class: _normalizeClass([\"w-full [aspect-ratio:832/1216] object-cover transition-all duration-300\", _unref(carriedMagicBookSet).has(bookName)\n                                                            ? 'brightness-100 saturate-110'\n                                                            : 'brightness-50 saturate-60']),\n                                                    loading: \"lazy\"\n                                                }, null, 10 /* CLASS, PROPS */, _hoisted_58),\n                                                _cache[53] || (_cache[53] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-black/55 via-black/10 to-black/38\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_59, [\n                                                    _createElementVNode(\"div\", _hoisted_60, _toDisplayString(bookName) + \"\", 1 /* TEXT */)\n                                                ])\n                                            ], 2 /* CLASS */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_57));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_61, \"  \"))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'relics',\n                    onClose: _cache[13] || (_cache[13] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(relicEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_62, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicEntries), (relic) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: relic.name,\n                                        type: \"button\",\n                                        class: \"relative flex flex-col items-center p-1.5 rounded border border-dungeon-brown/30 bg-[#1a0f08]/35 hover:border-dungeon-gold/40 transition-colors focus:outline-none focus:border-dungeon-gold/60\",\n                                        onMouseenter: ($event) => (showRelicTooltip($event, relic)),\n                                        onMouseleave: hideRelicTooltip,\n                                        onFocus: ($event) => (showRelicTooltip($event, relic)),\n                                        onBlur: hideRelicTooltip,\n                                        onTouchstartPassive: ($event) => (handleRelicTouchStart($event, relic)),\n                                        onTouchend: handleRelicTouchEnd,\n                                        onTouchcancel: handleRelicTouchEnd\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_64, [\n                                            _createVNode(_unref(Box), { class: \"size-9 text-dungeon-gold/75\" }),\n                                            _createElementVNode(\"span\", _hoisted_65, \"x\" + _toDisplayString(relic.count), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_66, _toDisplayString(relic.name), 1 /* TEXT */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_63));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_67, [\n                                _createVNode(_unref(Box), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[54] || (_cache[54] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                (_unref(relicTooltip))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed z-[220] pointer-events-none relic-tooltip\",\n                        style: _normalizeStyle({ left: `${_unref(relicTooltip).x}px`, top: `${_unref(relicTooltip).y}px` })\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_68, _toDisplayString(_unref(relicTooltip).name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_69, _toDisplayString(_unref(relicTooltip).description), 1 /* TEXT */)\n                    ], 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Settings Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'settings',\n                    onClose: _cache[23] || (_cache[23] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_70, [\n                            _createCommentVNode(\" Text Display Settings Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[61] || (_cache[61] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_71, [\n                                    _createCommentVNode(\" Font Size \"),\n                                    _createElementVNode(\"div\", _hoisted_72, [\n                                        _cache[55] || (_cache[55] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_73, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[14] || (_cache[14] = ($event) => (_unref(textSettings).fontSize = Math.max(12, _unref(textSettings).fontSize - 1)))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_74, _toDisplayString(_unref(textSettings).fontSize) + \"px\", 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[15] || (_cache[15] = ($event) => (_unref(textSettings).fontSize = Math.min(28, _unref(textSettings).fontSize + 1)))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Line Height \"),\n                                    _createElementVNode(\"div\", _hoisted_75, [\n                                        _cache[56] || (_cache[56] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_76, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[16] || (_cache[16] = ($event) => (_unref(textSettings).lineHeight = Math.max(1.2, +(_unref(textSettings).lineHeight - 0.1).toFixed(1))))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_77, _toDisplayString(_unref(textSettings).lineHeight), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[17] || (_cache[17] = ($event) => (_unref(textSettings).lineHeight = Math.min(3.0, +(_unref(textSettings).lineHeight + 0.1).toFixed(1))))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Font Family \"),\n                                    _createElementVNode(\"div\", _hoisted_78, [\n                                        _cache[58] || (_cache[58] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event) => ((_unref(textSettings).fontFamily) = $event)),\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui\"\n                                        }, [...(_cache[57] || (_cache[57] = [\n                                                _createElementVNode(\"option\", { value: \"'Cinzel', serif\" }, \"Cinzel ()\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Inter', sans-serif\" }, \"Inter\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MedievalSharp', cursive\" }, \"MedievalSharp\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MaShanZheng', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MagicBookTitle', 'KaiTi', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"serif\" }, \"Serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"sans-serif\" }, \"Sans-serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Microsoft YaHei', sans-serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'SimSun', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'KaiTi', serif\" }, \"\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(textSettings).fontFamily]\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Container Width \"),\n                                    _createElementVNode(\"div\", _hoisted_79, [\n                                        _cache[59] || (_cache[59] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_80, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((_unref(textSettings).containerWidth) = $event)),\n                                                type: \"range\",\n                                                min: \"600\",\n                                                max: \"1600\",\n                                                step: \"50\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(textSettings).containerWidth,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_81, _toDisplayString(_unref(textSettings).containerWidth) + \"px\", 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Background Clarity \"),\n                                    _createElementVNode(\"div\", _hoisted_82, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_83, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event) => (_isRef(bgOverlayOpacity) ? (bgOverlayOpacity).value = $event : null)),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"0.8\",\n                                                step: \"0.05\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(bgOverlayOpacity),\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_84, _toDisplayString(Math.round((1 - _unref(bgOverlayOpacity)) * 100)) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _cache[63] || (_cache[63] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-dungeon-gold/20\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" System Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[62] || (_cache[62] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_85, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded\",\n                                        onClick: _cache[21] || (_cache[21] =\n                                            //@ts-ignore\n                                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded\",\n                                        onClick: _cache[22] || (_cache[22] = ($event) => (_ctx.$emit('backToSplash')))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2\",\n                                        onClick: openCombatTestBuilder\n                                    }, \"   \")\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Test Builder Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'combatTestBuilder',\n                    onClose: _cache[27] || (_cache[27] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_86, [\n                            (_unref(combatTestStep) === 'deck')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_87, [\n                                        _cache[64] || (_cache[64] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"19\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_88, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_89, [\n                                        _createElementVNode(\"div\", _hoisted_90, [\n                                            _cache[65] || (_cache[65] = _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/70\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_91, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_92, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(selectedTestDeckCards), (entry) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `selected-card-${entry.idx}`,\n                                                    class: \"w-full text-left flex items-stretch gap-2 rounded border border-dungeon-gold/20 bg-[#1a0f08]/70 px-2 py-2 hover:border-dungeon-gold/50 transition-colors\",\n                                                    onClick: ($event) => (removeCardFromTestDeck(entry.idx))\n                                                }, [\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"w-1.5 rounded\", getCardCategoryStripClass(entry.card.category)])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createElementVNode(\"div\", _hoisted_94, [\n                                                        _createElementVNode(\"div\", _hoisted_95, [\n                                                            _createElementVNode(\"span\", _hoisted_96, _toDisplayString(entry.card.name), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: _normalizeClass([\"text-[10px] px-1 rounded border\", getCardTypeBadgeClass(entry.card.type)])\n                                                            }, _toDisplayString(entry.card.type), 3 /* TEXT, CLASS */),\n                                                            _createElementVNode(\"span\", _hoisted_97, _toDisplayString(entry.card.category), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"mt-1 text-[10px] text-dungeon-paper/70 truncate\",\n                                                            title: entry.card.description\n                                                        }, _toDisplayString(entry.card.description), 9 /* TEXT, PROPS */, _hoisted_98)\n                                                    ]),\n                                                    _cache[66] || (_cache[66] = _createElementVNode(\"span\", { class: \"text-[10px] text-red-300/85 shrink-0 self-center\" }, \"\", -1 /* CACHED */))\n                                                ], 8 /* PROPS */, _hoisted_93));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(selectedTestDeckCards).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_99, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_100, [\n                                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(9, (idx) => {\n                                                return _createElementVNode(\"div\", {\n                                                    key: `deck-slot-${idx}`,\n                                                    class: _normalizeClass([\"h-2 rounded border\", idx <= _unref(selectedTestDeck).length\n                                                            ? 'bg-dungeon-gold/70 border-dungeon-gold/60'\n                                                            : 'bg-black/20 border-dungeon-brown/40'])\n                                                }, null, 2 /* CLASS */);\n                                            }), 64 /* STABLE_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_101, [\n                                        _createElementVNode(\"div\", _hoisted_102, [\n                                            _createElementVNode(\"div\", _hoisted_103, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(cardCategoryTabsForTest), (category) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `card-tab-${category}`,\n                                                        class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedCardCategoryTab) === category\n                                                                ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                        onClick: ($event) => (selectedCardCategoryTab.value = category)\n                                                    }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_104));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredCardCategoryGroupsForTest), (group) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: `card-category-${group.category}`,\n                                                    class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_105, [\n                                                        _createElementVNode(\"h4\", _hoisted_106, _toDisplayString(group.category), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_107, _toDisplayString(group.cards.length) + \" \", 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_108, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.cards, (card) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: `all-card-${group.category}-${card.id}`,\n                                                                class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                                disabled: _unref(selectedTestDeck).length >= 9,\n                                                                onClick: ($event) => (addCardToTestDeck(card.name))\n                                                            }, [\n                                                                _createVNode(DungeonCard, {\n                                                                    card: card,\n                                                                    disabled: \"\"\n                                                                }, null, 8 /* PROPS */, [\"card\"]),\n                                                                _cache[67] || (_cache[67] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-dungeon-gold/80\" }, \"\", -1 /* CACHED */))\n                                                            ], 8 /* PROPS */, _hoisted_109));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(filteredCardCategoryGroupsForTest).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_110, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_111, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[24] || (_cache[24] = ($event) => (activeModal.value = null))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: _unref(selectedTestDeck).length !== 9,\n                                            onClick: confirmCombatTestDeck\n                                        }, \"  \", 8 /* PROPS */, _hoisted_112)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createElementVNode(\"div\", _hoisted_113, [\n                                        _cache[68] || (_cache[68] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"2\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_114, \": 9: \" + _toDisplayString(_unref(selectedRelicTotalCount)) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_115, [\n                                        _createElementVNode(\"div\", _hoisted_116, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allEnemyNamesForTest), (enemyName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `enemy-${enemyName}`,\n                                                    class: _normalizeClass([\"text-left px-3 py-2 rounded border text-xs transition-colors\", _unref(selectedTestEnemy) === enemyName\n                                                            ? 'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold'\n                                                            : 'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),\n                                                    onClick: ($event) => (selectedTestEnemy.value = enemyName)\n                                                }, _toDisplayString(enemyName), 11 /* TEXT, CLASS, PROPS */, _hoisted_117));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_118, [\n                                        _cache[69] || (_cache[69] = _createElementVNode(\"div\", { class: \"mb-2 flex items-center justify-between\" }, [\n                                            _createElementVNode(\"h4\", { class: \"font-heading text-dungeon-gold text-xs tracking-wider uppercase\" }, \"\"),\n                                            _createElementVNode(\"span\", { class: \"text-[11px] text-dungeon-paper/60\" }, \" MVU `_`\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_119, [\n                                            _createElementVNode(\"div\", _hoisted_120, [\n                                                _createElementVNode(\"div\", _hoisted_121, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicCategoryTabsForTest), (category) => {\n                                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: `relic-tab-${category}`,\n                                                            class: _normalizeClass([\"h-7 px-3 rounded border text-xs shrink-0 transition-colors\", _unref(selectedRelicCategoryTab) === category\n                                                                    ? 'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold'\n                                                                    : 'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),\n                                                            onClick: ($event) => (selectedRelicCategoryTab.value = category)\n                                                        }, _toDisplayString(category), 11 /* TEXT, CLASS, PROPS */, _hoisted_122));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredRelicCategoryGroupsForTest), (group) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: `relic-category-${group.category}`,\n                                                        class: \"rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_123, [\n                                                            _createElementVNode(\"h5\", _hoisted_124, _toDisplayString(group.category), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", _hoisted_125, _toDisplayString(group.relics.length) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_126, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.relics, (relic) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: `test-relic-${group.category}-${relic.id}`,\n                                                                    class: \"rounded border border-dungeon-brown/50 bg-[#1a0f08]/70 p-2\"\n                                                                }, [\n                                                                    _createElementVNode(\"div\", _hoisted_127, [\n                                                                        _createElementVNode(\"div\", _hoisted_128, [\n                                                                            _createElementVNode(\"div\", _hoisted_129, _toDisplayString(relic.name), 1 /* TEXT */),\n                                                                            _createElementVNode(\"div\", _hoisted_130, _toDisplayString(relic.rarity), 1 /* TEXT */)\n                                                                        ]),\n                                                                        _createElementVNode(\"div\", _hoisted_131, [\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold\",\n                                                                                onClick: ($event) => (decreaseSelectedRelic(relic.name))\n                                                                            }, \" - \", 8 /* PROPS */, _hoisted_132),\n                                                                            _createElementVNode(\"span\", _hoisted_133, _toDisplayString(getSelectedTestRelicCount(relic.name)), 1 /* TEXT */),\n                                                                            _createElementVNode(\"button\", {\n                                                                                class: \"h-6 w-6 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown\",\n                                                                                onClick: ($event) => (increaseSelectedRelic(relic.name))\n                                                                            }, \" + \", 8 /* PROPS */, _hoisted_134)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_135, _toDisplayString(relic.effect), 1 /* TEXT */)\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */)),\n                                                (_unref(filteredRelicCategoryGroupsForTest).length === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_136, \"  \"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"label\", _hoisted_137, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event) => (_isRef(combatTestStartAt999) ? (combatTestStartAt999).value = $event : null)),\n                                            type: \"checkbox\",\n                                            class: \"accent-amber-500\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelCheckbox, _unref(combatTestStartAt999)]\n                                        ]),\n                                        _cache[70] || (_cache[70] = _createElementVNode(\"span\", null, \" 999  HP/MP=999\", -1 /* CACHED */))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_138, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[26] || (_cache[26] = ($event) => (combatTestStep.value = 'deck'))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: !_unref(selectedTestEnemy),\n                                            onClick: confirmCombatTestEnemyAndStart\n                                        }, \"  \", 8 /* PROPS */, _hoisted_139)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Save/Load Panel \"),\n                _createVNode(SaveLoadPanel, {\n                    \"is-open\": _unref(gameStore).isSaveLoadOpen,\n                    entries: _unref(gameStore).saveEntries,\n                    onClose: _cache[28] || (_cache[28] = ($event) => (_unref(gameStore).isSaveLoadOpen = false))\n                }, null, 8 /* PROPS */, [\"is-open\", \"entries\"]),\n                _createCommentVNode(\" Variable Update Viewer \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(isVariableUpdateOpen),\n                    onClose: _cache[29] || (_cache[29] = ($event) => (isVariableUpdateOpen.value = false))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(gameStore).variableUpdateText)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_140, [\n                                _createElementVNode(\"pre\", _hoisted_141, _toDisplayString(_unref(gameStore).variableUpdateText), 1 /* TEXT */)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_142, \" <UpdateVariable>  <update> \"))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Shop Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showShopView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_143, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(shopBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_144),\n                                _cache[72] || (_cache[72] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-black/22\" }, null, -1 /* CACHED */)),\n                                _createElementVNode(\"img\", {\n                                    src: _unref(shopMerchantPortraitUrl),\n                                    class: \"pointer-events-none absolute left-0 bottom-0 z-[99] h-[92vh] max-h-[1216px] w-auto object-contain\",\n                                    alt: \"\"\n                                }, null, 8 /* PROPS */, _hoisted_145),\n                                _createElementVNode(\"div\", _hoisted_146, [\n                                    _createElementVNode(\"div\", _hoisted_147, [\n                                        _cache[71] || (_cache[71] = _createElementVNode(\"div\", { class: \"shop-panel-head\" }, [\n                                            _createElementVNode(\"div\", { class: \"font-heading text-xl text-amber-100\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_148, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(shopProducts), (item) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: item.key,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"shop-item-card\", { 'is-sold': item.sold }]),\n                                                    disabled: item.sold || _unref(shopBuying),\n                                                    onClick: ($event) => (buyShopProduct(item)),\n                                                    onMouseenter: ($event) => (showShopProductTooltip($event, item)),\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: ($event) => (showShopProductTooltip($event, item)),\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: ($event) => (handleShopProductTouchStart($event, item)),\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_150, [\n                                                        _createVNode(_unref(Box), { class: \"shop-item-icon\" })\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_151, [\n                                                        _createVNode(_unref(Coins), { class: \"size-3.5\" }),\n                                                        _createElementVNode(\"span\", null, _toDisplayString(item.finalPrice), 1 /* TEXT */)\n                                                    ])\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_149));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (_unref(shopProducts).length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_152, \"  \"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_153, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-rob-btn px-5 py-2 font-ui text-xs tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing),\n                                                style: _normalizeStyle({ opacity: _unref(shopRobBtnOpacity) }),\n                                                onClick: handleShopRobClick\n                                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_154),\n                                            _createElementVNode(\"button\", {\n                                                class: \"shop-exit-btn px-7 py-3 font-ui text-sm tracking-wider text-amber-50\",\n                                                disabled: _unref(shopBuying) || _unref(gameStore).isGenerating || _unref(shopRobbing),\n                                                onClick: exitShop\n                                            }, \"  \", 8 /* PROPS */, _hoisted_155)\n                                        ])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Treasure Chest Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showChestView))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_156, [\n                                _createElementVNode(\"img\", {\n                                    src: _unref(chestBackgroundUrl),\n                                    class: \"absolute inset-0 h-full w-full object-cover\",\n                                    alt: \"\",\n                                    onLoad: handleChestBgLoaded\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_157),\n                                (_unref(chestStage) === 'opened')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_158, [\n                                        _createElementVNode(\"div\", _hoisted_159, [\n                                            (_unref(chestRewardRelic) && _unref(chestRewardVisible))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    type: \"button\",\n                                                    class: _normalizeClass([\"pointer-events-auto chest-reward-btn\", { 'is-collected': _unref(chestRewardCollected) }]),\n                                                    disabled: _unref(chestCollecting) || _unref(chestRewardCollected),\n                                                    onClick: collectChestReward,\n                                                    onMouseenter: showChestRewardTooltip,\n                                                    onMouseleave: hideRelicTooltip,\n                                                    onFocus: showChestRewardTooltip,\n                                                    onBlur: hideRelicTooltip,\n                                                    onTouchstartPassive: handleChestRewardTouchStart,\n                                                    onTouchend: handleRelicTouchEnd,\n                                                    onTouchcancel: handleRelicTouchEnd\n                                                }, [\n                                                    _createVNode(_unref(Box), { class: \"chest-reward-icon\" })\n                                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_160))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_161, [\n                                            _createElementVNode(\"div\", _hoisted_162, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(chestPortalChoices), (portal, i) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: `chest-portal-${i}`,\n                                                        class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                        style: _normalizeStyle({\n                                                            backgroundColor: portal.bgColor,\n                                                            borderColor: portal.borderColor,\n                                                            boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                        }),\n                                                        disabled: _unref(chestCollecting),\n                                                        onClick: ($event) => (handleChestPortalClick(portal))\n                                                    }, [\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                            style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                        }, null, 4 /* STYLE */),\n                                                        _createElementVNode(\"span\", _hoisted_164, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", {\n                                                            class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                            style: _normalizeStyle({ color: portal.textColor })\n                                                        }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                        _createElementVNode(\"div\", {\n                                                            class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                            style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                        }, null, 4 /* STYLE */)\n                                                    ], 12 /* STYLE, PROPS */, _hoisted_163));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_unref(chestStage) === 'closed')\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 1,\n                                        type: \"button\",\n                                        \"aria-label\": \"\",\n                                        class: \"absolute left-1/2 top-1/2 h-[42vh] max-h-[360px] min-h-[220px] w-[36vw] max-w-[540px] min-w-[260px] -translate-x-1/2 -translate-y-1/2 cursor-pointer rounded-2xl border-0 bg-transparent p-0 opacity-0\",\n                                        disabled: _unref(chestRolling),\n                                        onClick: handleChestCenterClick\n                                    }, null, 8 /* PROPS */, _hoisted_165))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Combat Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showCombat))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_166, [\n                                _createVNode(CombatView, {\n                                    class: \"w-full h-full\",\n                                    \"enemy-name\": _unref(combatEnemyName),\n                                    \"player-deck\": _unref(resolvedDeck),\n                                    \"player-relics\": _unref(combatRelicMap),\n                                    \"test-start-at-999\": _unref(combatTestStartAt999CurrentBattle),\n                                    \"initial-player-stats\": {\n                                        hp: _unref(displayHp),\n                                        maxHp: _unref(displayMaxHp),\n                                        mp: _unref(displayMp),\n                                        minDice: _unref(displayMinDice) || 1,\n                                        maxDice: _unref(displayMaxDice) || 6,\n                                        effects: [{ type: _unref(EffectType).MANA_SPRING, stacks: 1, polarity: 'buff' }],\n                                    },\n                                    onEndCombat: handleCombatEnd,\n                                    onOpenDeck: _cache[30] || (_cache[30] = ($event) => (activeModal.value = 'deck')),\n                                    onOpenRelics: _cache[31] || (_cache[31] = ($event) => (activeModal.value = 'relics'))\n                                }, null, 8 /* PROPS */, [\"enemy-name\", \"player-deck\", \"player-relics\", \"test-start-at-999\", \"initial-player-stats\"]),\n                                _createCommentVNode(\" Exit combat button \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm\",\n                                    onClick: _cache[32] || (_cache[32] = ($event) => (showCombat.value = false))\n                                }, \"   \")\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameView.vue?vue&type=style&index=0&id=d51785bc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d51785bc\"]])\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"play\", [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"z-10 flex flex-col items-center space-y-12\" };\nconst _hoisted_2 = { class: \"flex flex-col space-y-4 w-64\" };\nconst _hoisted_3 = {\n    disabled: \"\",\n    class: \"group px-8 py-3 bg-black/50 border border-dungeon-brown text-gray-600 font-heading tracking-widest cursor-not-allowed flex items-center justify-center space-x-2\"\n};\nimport { Maximize, Play, Star } from 'lucide-vue-next';\n\nimport { ref, nextTick, onMounted, onBeforeUnmount } from 'vue';\nconst BACKGROUND_FADE_MS = 700;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    emits: [\"start\", \"toggleFullscreen\"],\n    setup(__props) {\n        const isVisible = ref(false);\n        const splashBackgrounds = [\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF1.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF2.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF3.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF4.png',\n            'https://huggingface.co/datasets/Vin05/AI-Gallery/resolve/main/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF5.png',\n        ];\n        const currentBackgroundUrl = ref(splashBackgrounds[0]);\n        const incomingBackgroundUrl = ref(null);\n        const outgoingBackgroundUrl = ref(null);\n        const isIncomingVisible = ref(false);\n        const isOutgoingVisible = ref(true);\n        const isBackgroundTransitioning = ref(false);\n        let backgroundFadeTimer = null;\n        let backgroundTransitionToken = 0;\n        const pickRandomBackground = (exclude) => {\n            const candidates = exclude\n                ? splashBackgrounds.filter((url) => url !== exclude)\n                : splashBackgrounds;\n            return candidates[Math.floor(Math.random() * candidates.length)] ?? splashBackgrounds[0];\n        };\n        const preloadImage = (url) => new Promise((resolve) => {\n            let settled = false;\n            const finish = () => {\n                if (settled)\n                    return;\n                settled = true;\n                resolve();\n            };\n            const img = new Image();\n            img.onload = finish;\n            img.onerror = finish;\n            img.src = url;\n            setTimeout(finish, 1200);\n        });\n        const switchBackground = async () => {\n            if (isBackgroundTransitioning.value)\n                return;\n            const nextUrl = pickRandomBackground(currentBackgroundUrl.value);\n            if (nextUrl === currentBackgroundUrl.value)\n                return;\n            const token = ++backgroundTransitionToken;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n            await preloadImage(nextUrl);\n            if (token !== backgroundTransitionToken)\n                return;\n            isBackgroundTransitioning.value = true;\n            outgoingBackgroundUrl.value = currentBackgroundUrl.value;\n            incomingBackgroundUrl.value = nextUrl;\n            isOutgoingVisible.value = true;\n            isIncomingVisible.value = false;\n            await nextTick();\n            await new Promise((resolve) => requestAnimationFrame(() => requestAnimationFrame(() => resolve())));\n            if (token !== backgroundTransitionToken)\n                return;\n            isIncomingVisible.value = true;\n            isOutgoingVisible.value = false;\n            backgroundFadeTimer = setTimeout(() => {\n                if (token !== backgroundTransitionToken)\n                    return;\n                currentBackgroundUrl.value = nextUrl;\n                incomingBackgroundUrl.value = null;\n                outgoingBackgroundUrl.value = null;\n                isBackgroundTransitioning.value = false;\n                backgroundFadeTimer = null;\n            }, BACKGROUND_FADE_MS);\n        };\n        onMounted(() => {\n            currentBackgroundUrl.value = pickRandomBackground();\n            isVisible.value = true;\n        });\n        onBeforeUnmount(() => {\n            backgroundTransitionToken += 1;\n            if (backgroundFadeTimer) {\n                clearTimeout(backgroundFadeTimer);\n                backgroundFadeTimer = null;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000\", _unref(isVisible) ? 'opacity-100' : 'opacity-0']),\n                style: { aspectRatio: '16/9' }\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat\",\n                    style: _normalizeStyle({ backgroundImage: `url('${_unref(currentBackgroundUrl)}')` })\n                }, null, 4 /* STYLE */),\n                (_unref(incomingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isIncomingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(incomingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(outgoingBackgroundUrl))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out\", _unref(isOutgoingVisible) ? 'opacity-100' : 'opacity-0']),\n                        style: _normalizeStyle({ backgroundImage: `url('${_unref(outgoingBackgroundUrl)}')` })\n                    }, null, 6 /* CLASS, STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"button\", {\n                    type: \"button\",\n                    class: \"absolute inset-0 z-[1] bg-transparent cursor-pointer focus:outline-none\",\n                    \"aria-label\": \"\",\n                    onClick: switchBackground\n                }),\n                _createCommentVNode(\" Dynamic Background \"),\n                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Ornamental Frame \"),\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Fullscreen Button (Top Right, Small) \"),\n                _createElementVNode(\"button\", {\n                    class: \"absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggleFullscreen')))\n                }, [\n                    _createVNode(_unref(Maximize), { class: \"size-4\" })\n                ]),\n                _createCommentVNode(\" Main Content \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Title Section \"),\n                    _cache[5] || (_cache[5] = _createStaticVNode(\"<div class=\\\"text-center space-y-4 relative\\\"><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50\\\"></div><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50\\\"></div><h1 class=\\\"text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide\\\">  </h1><h2 class=\\\"text-xl md:text-2xl font-body text-[#f9e6a0] tracking-[0.35em] uppercase border-t border-dungeon-brown pt-4 mt-2\\\"> Created by Vin </h2></div>\", 1)),\n                    _createCommentVNode(\" Menu Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('start')))\n                        }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full\" }, null, -1 /* CACHED */)),\n                            _createVNode(_unref(Play), { class: \"size-5 text-dungeon-gold group-hover:scale-110 transition-transform\" }),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold\" }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"button\", _hoisted_3, [\n                            _createVNode(_unref(Star), { class: \"size-4\" }),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"w-full relative\" };\nimport GameView from './components/GameView.vue';\nimport SplashScreen from './components/SplashScreen.vue';\nimport { toggleFullScreen } from './fullscreen';\nimport { useGameStore } from './gameStore';\n\nimport { ref, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const appState = ref('SPLASH');\n        const gameStore = useGameStore();\n        /**\n         *  gameStoreMVU\n         */\n        async function startGame() {\n            appState.value = 'GAME';\n            await nextTick();\n            await gameStore.initialize();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Splash Screen \"),\n                _createVNode(_Transition, {\n                    name: \"scene-fade\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(appState) === 'SPLASH')\n                            ? (_openBlock(), _createBlock(SplashScreen, {\n                                key: \"splash\",\n                                onStart: startGame,\n                                onToggleFullscreen: _unref(toggleFullScreen)\n                            }, null, 8 /* PROPS */, [\"onToggleFullscreen\"]))\n                            : (_openBlock(), _createBlock(GameView, {\n                                key: \"game\",\n                                onBackToSplash: _cache[0] || (_cache[0] = ($event) => (appState.value = 'SPLASH'))\n                            }))\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=329e49cc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-329e49cc\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './styles.css';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","hasA11yProp","prop","startsWith","isEmptyString","value","mergeClasses","classes","filter","className","index","array","Boolean","trim","indexOf","join","toKebabCase","string","replace","toLowerCase","toPascalCase","camelCase","match","p1","p2","toUpperCase","toCamelCase","charAt","slice","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","slots","h","Number","class","default","map","child","createLucideIcon","iconName","attrs","Book","d","Lock","x","y","rx","ry","Settings","cx","cy","r","Scroll","Box","Maximize","BookOpen","FileText","Send","ChevronDown","Activity","Dices","Coins","CardType","EffectType","GamePhase","CombatPhase","id","type","PHYSICAL","category","rarity","manaCost","calculation","multiplier","addition","damageLogic","mode","scale","scaleAddition","hitCount","traits","combo","reroll","draw","cardEffects","description","MAGIC","FUNCTION","kind","effectType","ARMOR","valueMode","DODGE","BURN","fixedValue","VULNERABLE","BARRIER","COLD","CHARGE","POISON","BIND","restrictedTypes","CARD_REGISTRY","Map","getCardByName","get","pickCard","ctx","deck","find","c","stats","hp","maxHp","mp","minDice","maxDice","effects","REGEN","stacks","polarity","selectCard","enemyStats","flags","hasUsedHeal","options","total","reduce","s","o","weight","roll","Math","random","opt","length","weightedRandom","MANA_SPRING","SWARM","normalCards","floor","pool","ENEMY_REGISTRY","getEnemyByName","getStacks","entity","eff","RELIC_LIST","effect","hooks","onBattleStart","count","self","addLog","modifyFinalPoint","card","currentPoint","onTurnEnd","side","restoreMana","restored","addStatusEffect","INDOMITABLE","source","onTurnStart","addArmor","gained","addRerollCharges","getRerollCharges","onDiceClick","consumeRerollCharge","onDeckShuffle","heal","healed","overflow","overflowToArmor","onAfterHitDealt","targetSide","actualDamage","state","STUN","max","onBeforeApplyEffect","onAfterHitTaken","sourceSide","onBeforeBurnDamage","damage","opponent","current","minimum","need","onAfterBurnDamageTaken","add","isPreview","bonus","isTrueDamage","hasRelic","minDamage","turn","RELIC_BY_ID","relic","RELIC_BY_NAME","getAllRelics","toggleFullScreen","document","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","catch","err","console","warn","message","extractTag","text","tagName","escapedTagName","regex","RegExp","exec","fullMatch","openTagEnd","firstChar","trimStart","extractTagByPriority","tagNames","content","removeThinkBlock","thinkTagRegex","result","depth","lastIndex","isClosing","tagStart","tagEnd","removeHtmlComments","parseOptions","optionText","split","line","parseResponse","cleanText","mainText","optionRaw","summary","updateVarBlock","jsonPatch","variableUpdate","allOptions","hasOptionE","some","test","hasLeave","rawText","extractSummary","messageText","useGameStore","ref","currentSummary","isGenerating","streamingText","error","isInitialized","variableUpdateText","isEditing","editingText","statData","saveEntries","isSaveLoadOpen","pendingPortalChanges","loadLatestAssistantState","lastId","getLastMessageId","messages","getChatMessages","role","extractOptions","detectOptionE","detectLeave","extractVariableUpdate","loadStatData","mvuData","Mvu","getMvuData","message_id","raw","_","info","applyParsedResponse","parsed","refreshLocalStatData","JSON","stringify","initialize","async","waitGlobalInitialized","msg","Error","String","sendAction","userInput","oldMvuData","userMvuData","baseMvuData","changes","cloneDeep","stat_data","sd","undefined","area","roomType","enemyName","stat","resetRoomCounter","incrementKeys","applyPendingPortalChangesToMvu","createChatMessages","data","refresh","streamListener","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_generation_id","generate","user_input","should_stream","stop","newMvuData","parseMessage","display_data","delta_data","setPendingPortalChanges","loadSaveEntries","entries","push","messageId","rollbackTo","targetMessageId","idsToDelete","i","deleteChatMessages","e","toastr","success","rerollCurrent","lastUserMsg","reverse","m","startEdit","saveEdit","currentMvuData","prevMvuData","setChatMessages","replaceMvuData","cancelEdit","updateStatDataFields","fields","nextMvuData","Object","assign","ShieldCheck","Shield","Link2","x1","x2","y1","y2","Skull","Bug","Droplet","Flame","TriangleAlert","Heart","Sparkles","Ban","Zap","Snowflake","Bone","Battery","Waves","Settings2","Layers","Trash2","X","EFFECT_REGISTRY","timings","stackable","maxStacks","DEVOUR","POISON_AMOUNT","BLEED","IGNITE_AURA","NON_LIVING","MANA_DRAIN","findEffect","hasEffect","getEffectStacks","applyEffect","def","existing","min","lockDecayThisTurn","instance","removeEffect","reduceEffectStacks","amount","processOnTurnStart","hpChange","mpChange","trueDamage","isStunned","logs","applyToOpponent","poisonAmount","burnStacks","burnDamage","vulnerableStacks","regenStacks","manaSpringStacks","processOnTurnEnd","poisonStacks","bindEffect","armorEffect","canPlayCard","baseDice","allowed","reason","includes","calculateFinalDamage","finalPoint","dl","baseValue","calculateRawDamage","cold","attackerEffects","vuln","defenderEffects","armor","triggerSwarmReviveIfNeeded","revived","consumeColdAfterDealingDamage","attacker","before","applyDamageToEntity","ae","actual","reviveResult","Sword","RefreshCcw","Footprints","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","disabled","selected","faceDown","isEnemy","emits","setup","__props","typeColorClass","computed","typeIcon","typeIconColor","typeGradient","_ctx","_cache","onClick","$event","$emit","style","rolling","rollingMin","rollingMax","numberClass","displayValue","interval","gradientId","toString","substr","sizeClass","sm","md","lg","numberSizeClass","borderColor","textColor","numberTextClass","rollRandomInRange","isFinite","getRollingRange","watch","clearInterval","setInterval","immediate","onUnmounted","offset","points","opacity","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","SPEED_SETTING_KEY","initialPlayerStats","playerDeck","playerRelics","testStartAt999","emit","__emit","enemyDef","enemyDisplayName","enemyPortraitUrl","encodeURIComponent","playerPortraitError","enemyPortraitError","gameStore","bgIsLordFallback","bgImageError","currentArea","currentRoomType","bgImageUrl","suffix","onBgError","aiFlags","reactive","normalizeTestStartStats","cloned","cloneEntityStats","playerStats","getEffectName","getEffectDescription","createStatusEffectPreview","EFFECT_ICON_COMPONENTS","getEffectIconComponent","effectIconBoxClass","playerArmor","enemyArmor","playerPoisonAmount","enemyPoisonAmount","playerPoisonAmountPercent","enemyPoisonAmountPercent","playerVisibleEffects","enemyVisibleEffects","cloneCardForBattle","ce","cleanseTypes","toBattleDeck","cards","enemyDeck","PASS_CARD","combatState","phase","TURN_START","actionsRemaining","playerBaseDice","enemyBaseDice","playerHand","sort","discardPile","enemyDiscard","enemyIntentCard","enemyPredictedPoint","playerSelectedCard","lastPlayedCard","isRolling","showClashAnimation","shatteringTarget","screenShake","impactShake","overlayOpen","settingsOpen","battleSpeedUp","logsCollapsed","battleResultBanner","endCombatPending","enemyIntentConsumedThisTurn","combatRootEl","effectTooltip","speedMultiplier","combatRootStyle","floatingNumbers","previewPlayerDice","previewEnemyDice","displayPlayerDice","displayEnemyDice","canPlayerRerollDice","playerDiceRerollCharges","PLAYER_INPUT","playerDiceRerollHint","playerDicePreviewChanged","enemyDicePreviewChanged","playerPlayedCardVisual","resolvedCardVisual","hoverPreviewTimer","enemyDicePreviewTimer","effectTooltipLongPressTimer","effectTooltipAutoHideTimer","floatingNumberId","handCardKeySeed","playerPlayedCardVisualId","resolvedCardVisualId","animationStopToken","endCombatSequenceToken","handCardKeys","WeakMap","invalidCardShakeKeys","Set","NO_RELIC_MOD","globalMultiplier","globalAddition","activePlayerRelics","aggregated","set","Array","from","values","a","b","localeCompare","resolveRelicMap","relicRuntimeState","getEntityBySide","getRelicRuntimeState","relicId","hasActiveRelic","entry","getActiveRelicCount","changeRerollCharges","delta","forEachPlayerRelic","callback","logRelicMessage","log","addArmorForSide","added","pushFloatingNumber","restoreManaForSide","healForSide","overflowRaw","applyStatusEffectWithRelics","hook","getRelicCount","targetEffectType","targetStacks","applyOptions","shouldAllowStatusEffectWithRelics","createPlayerLifecycleContext","triggerPlayerRelicLifecycleHooks","hookName","triggerPlayerRelicBeforeBurnDamageHooks","currentDamage","triggerPlayerRelicAfterBurnDamageTakenHooks","triggerPlayerRelicHitHooks","hitIndex","attemptedDamage","scaleDuration","ms","wait","Promise","resolve","setTimeout","transitionStyle","transitionDuration","withTransition","playerPlayedCardStyle","visual","entered","left","top","transform","transitionProperty","transitionTimingFunction","resolvedCardVisualInnerClass","variant","showEnemyIntentCard","floatingColors","physical","magic","shield","mana","true","floatingNumbersFor","handCardKey","isCardShaking","has","resolveTargetSide","consumeChargeOnRoll","label","rolled","chargeStacks","boosted","clearDicePreview","clearTimeout","clearPlayerPlayedCard","stopAllCardAnimations","getCardFinalPoint","defender","relicModifiers","point","calculateFinalPoint","entityEffects","getCardPreviewPoint","handlePlayerCardHoverEnd","handlePlayerCardTouchEnd","rollDiceInRange","low","high","handlePlayerDiceClick","rerolled","currentDice","after","showEnemyDicePreview","preview","getEnemyIntentFinalPoint","hideEnemyDicePreview","handleEnemyDiceHoverStart","handleEnemyDiceHoverEnd","handleEnemyDiceTouchStart","handleEnemyDiceTouchEnd","clearEffectTooltipTimers","showEffectTooltipForTarget","align","rootRect","getBoundingClientRect","rect","right","showEffectTooltip","event","currentTarget","hideEffectTooltip","handleEffectTouchStart","handleEffectTouchEnd","sign","duration","colorClass","leftOffset","topOffset","relicSummary","onMounted","localStorage","getItem","enabled","setItem","drawCards","currentDeck","currentDiscard","discard","drawn","pop","newDeck","newDiscard","handCardClass","isSelected","opponentSide","turnStartLogs","burnDamageTaken","shownTrueDamage","burnIsTrueDamage","pending","burnLog","burnMatch","rawBurnDamage","burnResult","hpBefore","hpDelta","mpBefore","mpDelta","pendingTrueDamage","reviveLog","l","DRAW_PHASE","pRawRoll","eRawRoll","pRoll","eRoll","eCard","selectedCard","idx","check","selectEnemyCard","handleCardSelect","handIdx","withoutKey","delete","requestAnimationFrame","next","removed","triggerInvalidCardShake","played","splice","token","showPlayerPlayedCard","RESOLUTION","handleSkipTurn","resolveCombat","pCard","pDice","eDice","resolvedEnemyCard","shouldClash","t1","t2","playerSkippedTurn","enemySkippedTurn","pClashPoint","eClashPoint","clearBurnForSide","pSuccess","eSuccess","resultMsg","clashWinner","executeCard","defenderSide","impactDelay","animDuration","playResolvedCardAnimation","syncCurrentPointForUi","nextPoint","applyCardEffects","targetKey","targetEntity","healAmount","beforeHp","actualHeal","restoreAmount","beforeMp","actualRestore","cleanseTargets","et","burned","burnStacksOnDefender","totalHitCount","hit","cardForCalculation","customDamage","dmgLogs","applyLogs","hitPrefix","damageLogColorClass","damageKind","coldLogs","coldLog","queue","deferredEnemyAction","enemyAction","typePriority","t","action","pEndLogs","eEndLogs","pHp","eHp","win","WIN","LOSE","runEndCombatSequence","ref_key","src","alt","onError","args","DungeonCard","onMouseenter","onMouseleave","onTouchstartPassive","onTouchend","onTouchcancel","DungeonDice","popup","animationDuration","onFocus","onBlur","title","innerHTML","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","isOpen","to","$slots","RotateCcw","RefreshCw","Pencil","confirmTarget","doRollback","handleReroll","handleEdit","DungeonModal","onClose","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","_hoisted_131","_hoisted_132","_hoisted_133","_hoisted_134","_hoisted_135","_hoisted_136","_hoisted_137","_hoisted_138","_hoisted_139","_hoisted_140","_hoisted_141","_hoisted_142","_hoisted_143","_hoisted_144","_hoisted_145","_hoisted_146","_hoisted_147","_hoisted_148","_hoisted_149","_hoisted_150","_hoisted_151","_hoisted_152","_hoisted_153","_hoisted_154","_hoisted_155","_hoisted_156","_hoisted_157","_hoisted_158","_hoisted_159","_hoisted_160","_hoisted_161","_hoisted_162","_hoisted_163","_hoisted_164","_hoisted_165","_hoisted_166","BG_OPACITY_KEY","CHEST_BG_OPENED","SidebarIcon","defineComponent","icon","required","active","tooltipSide","activeModal","inputText","isVariableUpdateOpen","isStatusOpen","showCombat","combatEnemyName","showShopView","shopProducts","shopBuying","shopSpentGold","shopPurchasedItems","shopRobClickCount","shopRobbing","showChestView","chestStage","chestRolling","chestRewardRelic","chestRewardCollected","chestCollecting","chestRewardVisible","chestOpenedBgReady","chestPortalChoices","combatTestStep","selectedTestDeck","selectedTestEnemy","selectedTestRelicCounts","selectedCardCategoryTab","selectedRelicCategoryTab","relicTooltip","combatTestStartAt999","combatTestStartAt999CurrentBattle","chestMimicTimer","chestRewardFadeTimer","shopRobTimer","relicTooltipLongPressTimer","relicTooltipAutoHideTimer","bgArea","bgRoomType","bgOverlayOpacity","parseFloat","v","chestBackgroundUrl","allCardsForTest","CATEGORY_ORDER","compareCategory","orderA","orderB","cardCategoryGroupsForTest","grouped","cardCategoryTabsForTest","group","filteredCardCategoryGroupsForTest","getMagicBookCoverUrl","bookName","carryableMagicBookNames","rawCarriedMagicBooks","isArray","carriedMagicBooks","available","carriedMagicBookSet","selectableRelicPool","categorySet","muxinlanFavor","roles","safe","shopDiscountRate","shopRobBtnOpacity","toFixed","canEditMagicBooks","magicBookSidebarIcon","isUpdatingMagicBooks","openMagicBookModal","cardByNameForTest","selectedTestDeckCards","cardName","allEnemyNamesForTest","keys","baseRelicsForTest","categoryDiff","relicCategoryGroupsForTest","relics","relicCategoryTabsForTest","filteredRelicCategoryGroupsForTest","tabs","getCardTypeBadgeClass","getCardCategoryStripClass","resolvedDeck","skills","n","relicEntries","getRelicByName","chestRewardEntry","clearRelicTooltipTimers","showRelicTooltipForTarget","window","innerWidth","showRelicTooltip","hideRelicTooltip","handleRelicTouchStart","handleRelicTouchEnd","showChestRewardTooltip","handleChestRewardTouchStart","combatRelicMap","normalized","modal","editable","selectedRelicTotalCount","sum","textSettings","fontSize","lineHeight","fontFamily","containerWidth","displayText","displayHp","displayMaxHp","displayMp","displayGold","displayMinDice","displayMaxDice","hpPercent","mpPercent","handleSendInput","ROOM_TYPE_CONFIG","bgColor","glowColor","specialOptionConfig","isTreasureRoomContext","isShopContext","getRarityBasePrice","rollShopRarity","toRelicTooltipEntry","showShopProductTooltip","item","openShopView","clearShopRobTimer","favorForCount","targetCount","usedNames","discountRate","targetRarity","candidates","pickOne","basePrice","finalPrice","ceil","sold","generateShopProducts","closeShopView","buyShopProduct","currentGold","nextGold","nextRelics","pickedRelic","rawRelics","buildNextRelicInventory","ok","price","exitShop","purchased","purchasedText","handleShopRobClick","clearChestMimicTimer","clearChestRewardFadeTimer","handleChestBgLoaded","collectChestReward","grantRelicToPlayer","handleChestCenterClick","reward","candidatePool","rarityRoll","rarityPool","pickChestRewardRelic","generated","generatePortals","shuffle","PORTAL_ROOM_TYPES","rt","isFloorTransition","PORTAL_ROOM_VISUALS","generateChestLeavePortals","handleSpecialOption","FLOOR_MAP","FLOOR_ORDER","getFloorForArea","areas","FLOOR_MONSTER_CONFIG","common","uniqueByArea","COMMON_MONSTER_RATE_BY_FLOOR","arr","AREA_PORTAL_VISUAL","cachedPortals","cachedPortalFingerprint","j","roomsPassed","isStartArea","targetFloor","currentFloor","getNextFloor","areaName","floorName","bossChance","portalChoices","fingerprint","ROOM_STAT_KEY","buildQueuedPortalAction","portal","enterText","actionText","statKey","encounterMonster","config","commonPool","uniquePool","commonRate","pickBattleMonsterByArea","handleChestPortalClick","relicName","openSaveLoad","openVariableUpdate","getSelectedTestRelicCount","setSelectedTestRelicCount","buildSelectedRelicPayload","openCombatTestBuilder","availableCardNames","availableRelicNames","presetDeck","presetRelicsRaw","presetRelics","confirmCombatTestDeck","confirmCombatTestEnemyAndStart","handleCombatEnd","onBeforeUnmount","backgroundColor","maxWidth","option","stripped","boxShadow","placeholder","onKeydown","stdDeviation","in","nextBooks","loading","step","number","round","SaveLoadPanel","onLoad","CombatView","onEndCombat","onOpenDeck","onOpenRelics","Play","Star","isVisible","splashBackgrounds","currentBackgroundUrl","incomingBackgroundUrl","outgoingBackgroundUrl","isIncomingVisible","isOutgoingVisible","isBackgroundTransitioning","backgroundFadeTimer","backgroundTransitionToken","pickRandomBackground","exclude","url","switchBackground","nextUrl","settled","finish","img","Image","onload","onerror","nextTick","aspectRatio","backgroundImage","appState","startGame","SplashScreen","onStart","onToggleFullscreen","GameView","onBackToSplash","$","app","createApp","App","use","mount","on","unmount"],"sourceRoot":""}