{"version":3,"file":"index.js","mappings":";6GAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,E,GCRPI,EAA2B,CAAC,ECDhC,MAAM,EAA+BC,ICO/BC,EAAeP,IACnB,IAAK,MAAMQ,KAAQR,EACjB,GAAIQ,EAAKC,WAAW,UAAqB,SAATD,GAA4B,UAATA,EACjD,OAAO,EAGX,OAAO,GCNHE,EAAiBC,GAAoB,KAAVA,ECA3BC,EAAe,IAAIC,IAAYA,EAAQC,OAAO,CAACC,EAAWC,EAAOC,IAC9DC,QAAQH,IAAmC,KAArBA,EAAUI,QAAiBF,EAAMG,QAAQL,KAAeC,GACpFK,KAAK,KAAKF,OCFPG,EAAeC,GAAWA,EAAOC,QAAQ,qBAAsB,SAASC,cCExEC,EAAgBH,IACpB,MAAMI,ECHY,CAACJ,GAAWA,EAAOC,QACrC,wBACA,CAACI,EAAOC,EAAIC,IAAOA,EAAKA,EAAGC,cAAgBF,EAAGJ,eDC5BO,CAAYT,GAC9B,OAAOI,EAAUM,OAAO,GAAGF,cAAgBJ,EAAUO,MAAM,IEJ7D,IAAIC,EAAoB,CACtBC,MAAO,6BACPC,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,KAAM,OACNC,OAAQ,eACR,eAAgB,EAChB,iBAAkB,QAClB,kBAAmB,SCDrB,MAAMC,EAAO,EACXC,OACAC,WACAC,sBACA,wBAAyBC,EACzBC,cACA,eAAgBC,EAChBC,OAAOd,EAAkBE,MACzBa,QAAQf,EAAkBM,UACvBzC,IACAmD,YACI,IAAAC,GACL,MACA,IACKjB,KACAnC,EACHqC,MAAOY,EACPX,OAAQW,EACRR,OAAQS,EACR,eAAgBxC,EAAcmC,IAAwBnC,EAAcoC,KAAyD,IAAxBD,IAAiE,IAAjCC,EAA2H,GAAnFO,OAAON,GAAeC,GAAwBb,EAAkB,iBAAwBkB,OAAOJ,GAAQF,GAAeC,GAAwBb,EAAkB,gBAC7UmB,MAAO1C,EACL,SACAZ,EAAMsD,SACHX,EAAO,CAAC,UAAUrB,EAAYI,EAAaiB,WAAe,UAAUrB,EAAYqB,MAAW,CAAC,oBAE7FQ,EAAMI,UAAYhD,EAAYP,IAAU,CAAE,cAAe,SAE/D,IAAI4C,EAASY,IAAKC,IAAU,IAAAL,MAAKK,OAAYN,EAAMI,QAAU,CAACJ,EAAMI,WAAa,KChC/EG,EAAmB,CAACC,EAAUf,IAAa,CAAC5C,GAASmD,QAAOS,YAAY,IAAAR,GAC5EV,EACA,IACKkB,KACA5D,EACH4C,WACAD,KAAMgB,GAERR,GCTI,EAAMO,EAAiB,MAAO,CAClC,CACE,OACA,CACEG,EAAG,gPACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,eAAgB1D,IAAK,WACnC,CAAC,OAAQ,CAAE0D,EAAG,cAAe1D,IAAK,aCT9B2D,EAASJ,EAAiB,SAAU,CACxC,CAAC,OAAQ,CAAEG,EAAG,2BAA4B1D,IAAK,WAC/C,CACE,OACA,CACE0D,EAAG,6GACH1D,IAAK,aCNL4D,EAAML,EAAiB,MAAO,CAClC,CACE,OACA,CACEG,EAAG,yHACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,qBAAsB1D,IAAK,WACzC,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,aCT5B6D,EAAWN,EAAiB,WAAY,CAC5C,CACE,OACA,CACEG,EAAG,0UACH1D,IAAK,WAGT,CAAC,SAAU,CAAE8D,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKhE,IAAK,aCR1CiE,EAAWV,EAAiB,WAAY,CAC5C,CAAC,OAAQ,CAAEG,EAAG,yBAA0B1D,IAAK,WAC7C,CAAC,OAAQ,CAAE0D,EAAG,2BAA4B1D,IAAK,WAC/C,CAAC,OAAQ,CAAE0D,EAAG,0BAA2B1D,IAAK,WAC9C,CAAC,OAAQ,CAAE0D,EAAG,4BAA6B1D,IAAK,aCJ5CkE,EAAWX,EAAiB,YAAa,CAC7C,CAAC,OAAQ,CAAEG,EAAG,WAAY1D,IAAK,WAC/B,CACE,OACA,CACE0D,EAAG,qIACH1D,IAAK,YCNLmE,EAAWZ,EAAiB,YAAa,CAC7C,CACE,OACA,CACEG,EAAG,iHACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,0BAA2B1D,IAAK,WAC9C,CAAC,OAAQ,CAAE0D,EAAG,UAAW1D,IAAK,WAC9B,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,aCX3BoE,EAAOb,EAAiB,OAAQ,CACpC,CACE,OACA,CACEG,EAAG,kIACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,6BAA8B1D,IAAK,aCR7CqE,EAAcd,EAAiB,eAAgB,CACnD,CAAC,OAAQ,CAAEG,EAAG,eAAgB1D,IAAK,aCD/BsE,EAAWf,EAAiB,WAAY,CAC5C,CACE,OACA,CACEG,EAAG,6HACH1D,IAAK,aCLLuE,EAAQhB,EAAiB,QAAS,CACtC,CAAC,OAAQ,CAAErB,MAAO,KAAMC,OAAQ,KAAMqC,EAAG,IAAKC,EAAG,KAAMC,GAAI,IAAKC,GAAI,IAAK3E,IAAK,WAC9E,CACE,OACA,CAAE0D,EAAG,yEAA0E1D,IAAK,WAEtF,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,WAChC,CAAC,OAAQ,CAAE0D,EAAG,aAAc1D,IAAK,WACjC,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,WAChC,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,aCT5B4E,EAAQrB,EAAiB,QAAS,CACtC,CAAC,SAAU,CAAEO,GAAI,IAAKC,GAAI,IAAKC,EAAG,IAAKhE,IAAK,WAC5C,CAAC,OAAQ,CAAE0D,EAAG,kCAAmC1D,IAAK,WACtD,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,8BAA+B1D,IAAK,aCRpD,IAAY6E,EA4GAC,EAuDAC,EAMAC,GAzKZ,SAAYH,GACV,gBACA,aACA,gBACA,YACD,CALD,CAAYA,IAAAA,EAAQ,KA4GpB,SAAYC,GAEV,eAEA,aAEA,YAEA,cAEA,cAEA,YAEA,aAEA,kBAEA,eAEA,qBAEA,YAEA,cAEA,YAEA,mBAEA,oBAEA,oBACD,CAjCD,CAAYA,IAAAA,EAAU,KAuDtB,SAAYC,GACV,oBACA,iBACD,CAHD,CAAYA,IAAAA,EAAS,KAMrB,SAAYC,GAEV,0BAEA,0BAEA,kCAEA,8BAEA,0BAEA,gCAEA,sBAEA,YAEA,aACD,CAnBD,CAAYA,IAAAA,EAAW,KCnKvB,MAAM,EAAmB,CACvBC,GAAI,iBACJzC,KAAM,SACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,aAIT,EAAqB,CACzBjB,GAAI,wBACJzC,KAAM,WACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,oBAIT,EAAqB,CACzBjB,GAAI,wBACJzC,KAAM,WACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,oBAIT,EAAmB,CACvBjB,GAAI,cACJzC,KAAM,SACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,IAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,qBAIT,EAAmB,CACvBjB,GAAI,qBACJzC,KAAM,SACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,IAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,qBAIT,EAAiB,CACrBjB,GAAI,eACJzC,KAAM,OACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CACEI,KAAM,aACNC,WAAYxB,EAAWyB,MACvBzG,OAAQ,OACR0G,UAAW,cACXb,MAAO,IAGXO,YAAa,aAIT,EAAiB,CACrBjB,GAAI,cACJzC,KAAM,OACN0C,KAAML,EAAS4B,MACfrB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,uBAMT,EAAiB,CACrBjB,GAAI,kBACJzC,KAAM,OACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,UAAW,GAC3CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAMC,OAAQ,OAAQC,MAAM,GAC7CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,IAEtGT,YAAa,oBAIT,EAAiB,CACrBjB,GAAI,kBACJzC,KAAM,OACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAMC,OAAQ,OAAQC,MAAM,GAC7CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,GACpG,CAAEN,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,OAAQ0G,UAAW,QAASG,WAAY,IAErGT,YAAa,oBAIT,EAAgB,CACpBjB,GAAI,mBACJzC,KAAM,MACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,GAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,8BAIT,EAAe,CACnBjB,GAAI,cACJzC,KAAM,KACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,UAAW,GAC3CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW8B,WAAY9G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,IAE5GT,YAAa,0BAIT,EAAiB,CACrBjB,GAAI,oBACJzC,KAAM,OACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,IAEtGT,YAAa,qBAIT,EAAiB,CACrBjB,GAAI,iBACJzC,KAAM,OACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,IAEtGT,YAAa,qBAIT,EAAiB,CACrBjB,GAAI,kBACJzC,KAAM,OACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,GAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,IAEtGT,YAAa,4BAIT,EAAgB,CACpBjB,GAAI,kBACJzC,KAAM,MACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,GAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,cAAeb,MAAO,IAEvGO,YAAa,kCAIT,EAAiB,CACrBjB,GAAI,yBACJzC,KAAM,OACN0C,KAAML,EAASsB,MACff,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAKC,cAAe,GAC5DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,+BAIT,EAAiB,CACrBjB,GAAI,kBACJzC,KAAM,OACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CAAEI,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,QAAS0G,UAAW,QAASG,WAAY,GACpG,CAAEN,KAAM,aAAcC,WAAYxB,EAAW4B,KAAM5G,OAAQ,OAAQ0G,UAAW,QAASG,WAAY,GACnG,CAAEN,KAAM,aAAcC,WAAYxB,EAAW+B,QAAS/G,OAAQ,OAAQ0G,UAAW,QAASG,WAAY,IAExGT,YAAa,iBAIT,EAAiB,CACrBjB,GAAI,oBACJzC,KAAM,OACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,kBAMT,EAAe,CACnBjB,GAAI,eACJzC,KAAM,KACN0C,KAAML,EAASM,SACfC,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAGC,SAAU,GACxCC,YAAa,CAAEC,KAAM,WAAYC,MAAO,EAAGC,cAAe,GAC1DC,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,oBAIT,EAAiB,CACrBjB,GAAI,oBACJzC,KAAM,OACN0C,KAAML,EAAS4B,MACfrB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,GACbC,YAAa,uBAIT,EAAe,CACnBjB,GAAI,aACJzC,KAAM,KACN0C,KAAML,EAASuB,SACfhB,SAAU,KACVC,SAAU,EACVC,YAAa,CAAEC,WAAY,EAAKC,SAAU,GAC1CC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GACrCqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAC9CC,YAAa,CACX,CACEI,KAAM,OACNvG,OAAQ,OACR0G,UAAW,cACXb,MAAO,IAGXO,YAAa,cASTY,EAA+C,IAAIC,IAAsB,CAC7E,CAAC,EAAOvE,KAAM,GACd,CAAC,EAASA,KAAM,GAChB,CAAC,EAASA,KAAM,GAChB,CAAC,EAAOA,KAAM,GACd,CAAC,EAAOA,KAAM,GACd,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAIA,KAAM,GACX,CAAC,EAAGA,KAAM,GACV,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAIA,KAAM,GACX,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAGA,KAAM,GACV,CAAC,EAAKA,KAAM,GACZ,CAAC,EAAGA,KAAM,KAML,SAASwE,GAAcxE,GAC5B,OAAOsE,EAAcG,IAAIzE,EAC3B,CC7WA,SAAS0E,GAASC,EAAqB3E,GACrC,OAAO2E,EAAIC,KAAKC,KAAKC,GAAKA,EAAE9E,OAASA,IAAS2E,EAAIC,KAAK,EACzD,CAmBA,MAAM,GAAyB,CAC7B5E,KAAM,QAEN+E,MAAO,CACLC,GAAI,GACJC,MAAO,GACPC,GAAI,EACJC,QAAS,EACTC,QAAS,EACTC,QAAS,CACP,CAAE3C,KAAMJ,EAAWgD,MAAOC,OAAQ,EAAGC,SAAU,UAInDZ,KAAM,CACJJ,GAAc,MACdA,GAAc,QACdA,GAAc,OAShB,UAAAiB,CAAWd,GAGT,GAFgBA,EAAIe,WAAWV,GAAKL,EAAIe,WAAWT,OAEpC,KAAQN,EAAIgB,MAAMC,YAE/B,OADAjB,EAAIgB,MAAMC,aAAc,EACjBlB,GAASC,EAAK,MAOvB,OAAOD,GAASC,EAtDpB,SAA2BkB,GACzB,MAAMC,EAAQD,EAAQE,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAEC,OAAQ,GACrD,IAAIC,EAAOC,KAAKC,SAAWP,EAC3B,IAAK,MAAMQ,KAAOT,EAEhB,GADAM,GAAQG,EAAIJ,OACRC,GAAQ,EAAG,OAAOG,EAAItI,MAE5B,OAAO6H,EAAQA,EAAQU,OAAS,GAAIvI,KACtC,CA0CmBwI,CAAe,CAC5B,CAAExI,MAAO,KAAMkI,OAAQ,IACvB,CAAElI,MAAO,OAAQkI,OAAQ,MAG7B,GASIO,GAAuD,IAAIlC,IAA6B,CAC5F,CAAC,GAAMvE,KAAM,MAMR,SAAS0G,GAAe1G,GAC7B,OAAOyG,GAAehC,IAAIzE,EAC5B,CCzFO,SAAS2G,KACTC,SAASC,kBAKZD,SAASE,iBAJTF,SAASG,gBAAgBC,oBAAoBC,MAAOC,IAClDC,QAAQC,KAAK,qBAAqBF,EAAIG,YAK5C,CCkBA,SAASC,GAAWC,EAAcC,GAChC,MAAMC,EAAiBD,EAAQ3I,QAAQ,sBAAuB,QAExD6I,EAAQ,IAAIC,OAAO,wBAAwBF,gCAA6CA,KAAmB,MACjH,IAAIxI,EAEJ,KAAsC,QAA9BA,EAAQyI,EAAME,KAAKL,KAAiB,CAC1C,MAAMM,EAAY5I,EAAM,GAClB6I,EAAaD,EAAUpJ,QAAQ,KACrC,GAAIqJ,GAAc,EAAG,CAEnB,MACMC,EADYF,EAAUtI,MAAMuI,EAAa,GAAGE,YACtB,GAC5B,GAAkB,MAAdD,GAAmC,MAAdA,EAAmB,QAC9C,CACA,OAAO9I,EAAM,GAAGT,MAClB,CAEA,MAAO,EACT,CAKA,SAASyJ,GAAqBV,EAAcW,GAC1C,IAAK,MAAMV,KAAWU,EAAU,CAC9B,MAAMC,EAAUb,GAAWC,EAAMC,GACjC,GAAIW,EAAS,OAAOA,CACtB,CACA,MAAO,EACT,CAQA,SAASC,GAAiBb,GACxB,MAAMc,EAAgB,yCAEtB,IAGIpJ,EAHAqJ,EAAS,GACTC,EAAQ,EACRC,EAAY,EAGhB,KAA8C,QAAtCvJ,EAAQoJ,EAAcT,KAAKL,KAAiB,CAClD,MAAMkB,EAAyB,MAAbxJ,EAAM,GAClByJ,EAAWzJ,EAAMZ,MACjBsK,EAASN,EAAcG,UAIf,IAAVD,GAAgBE,IAClBH,GAAUf,EAAKhI,MAAMiJ,EAAWE,IAG9BD,EAEEF,EAAQ,IAAGA,GAAS,GAExBA,GAAS,EAGXC,EAAYG,CACd,CAOA,OAJc,IAAVJ,IACFD,GAAUf,EAAKhI,MAAMiJ,IAGhBF,EAAO9J,MAChB,CAKA,SAASoK,GAAmBrB,GAC1B,OAAOA,EAAK1I,QAAQ,yBAA0B,IAAIL,MACpD,CAMA,SAASqK,GAAaC,GACpB,OAAKA,EACEA,EACJC,MAAM,MACNlI,IAAImI,GAAQA,EAAKxK,QACjBL,OAAO6K,GAAQA,EAAKzC,OAAS,GAJR,EAK1B,CAKO,SAAS0C,GAAc1B,GAE5B,MAAM2B,EAAYd,GAAiBb,GAI7B4B,EAAWP,GADGX,GAAqBiB,EAAW,CAAC,WAAY,UAAW,UAAW,QAEjFE,EAAY9B,GAAW4B,EAAW,UAClCG,EAAU/B,GAAW4B,EAAW,OAGhCI,EAAiBrB,GAAqBiB,EAAW,CAAC,iBAAkB,WACpEK,EAAYjC,GAAWgC,EAAgB,aACvCE,EAAiBF,GAAkBC,EAGnCE,EAAaZ,GAAaO,GAG1BM,EAAaD,EAAWE,KAAKX,GAAQ,UAAUY,KAAKZ,IACpDa,EAAWJ,EAAWE,KAAKX,GAAQ,SAASY,KAAKZ,IASvD,MAAO,CACLG,WACAtD,QARoB4D,EAAWtL,OAAO6K,IAClC,UAAUY,KAAKZ,KACf,SAASY,KAAKZ,IAOlBK,UACAG,iBACAD,YACAO,QAASZ,EACTQ,aACAG,WAEJ,CAMO,SAASE,GAAeC,GAE7B,OAAO1C,GADOc,GAAiB4B,GACN,MAC3B,CCtKO,MAAMC,GAAe,EAAY,OAAQ,KAE5C,MAAMd,GAAW,IAAAe,KAAI,IACfrE,GAAU,IAAAqE,KAAI,IACdC,GAAiB,IAAAD,KAAI,IACrBE,GAAe,IAAAF,MAAI,GACnBG,GAAgB,IAAAH,KAAI,IACpBI,GAAQ,IAAAJ,KAAI,MACZK,GAAgB,IAAAL,MAAI,GAEpBR,GAAa,IAAAQ,MAAI,GACjBL,GAAW,IAAAK,MAAI,GACfM,GAAqB,IAAAN,KAAI,IAEzBO,GAAY,IAAAP,MAAI,GAChBQ,GAAc,IAAAR,KAAI,IAElBS,GAAW,IAAAT,KAAI,CAAC,GAEhBU,GAAc,IAAAV,KAAI,IAClBW,GAAiB,IAAAX,MAAI,GACrBY,GAAuB,IAAAZ,KAAI,MA2DjC,SAASa,IACL,MAAMC,EAASC,mBACf,GAAID,EAAS,EACT,OACJ,MAAME,EAAWC,gBAAgB,KAAKH,IAAU,CAAEI,KAAM,cACxD,GAAIF,EAAS3E,OAAS,EAAG,CACrB,MACMgB,EADU2D,EAASA,EAAS3E,OAAS,GACtBc,QACrB8B,EAASnL,MDsFZ4K,GADaX,GADNG,GCpF6Bb,GDqFK,CAAC,WAAY,UAAW,UAAW,QCpFzE1B,EAAQ7H,MDmGb,SAAwBgM,GAG7B,OADmBnB,GAAavB,GADlBc,GAAiB4B,GACmB,WAChC7L,OAAO6K,IACnB,UAAUY,KAAKZ,KACf,SAASY,KAAKZ,GAGtB,CC3G4BqC,CAAe9D,GAC/B4C,EAAenM,MAAQ+L,GAAexC,GACtCmC,EAAW1L,MD8GhB,SAAuBgM,GAG5B,OADmBnB,GAAavB,GADlBc,GAAiB4B,GACmB,WAChCL,KAAKX,GAAQ,UAAUY,KAAKZ,GAChD,CClH+BsC,CAAc/D,GACjCsC,EAAS7L,MDsHd,SAAqBgM,GAG1B,OADmBnB,GAAavB,GADlBc,GAAiB4B,GACmB,WAChCL,KAAKX,GAAQ,SAASY,KAAKZ,GAC/C,CC1H6BuC,CAAYhE,GAC7BiD,EAAmBxM,MDuFxB,SAA+BgM,GAEpC,OAAO/B,GADOG,GAAiB4B,GACI,CAAC,iBAAkB,UACxD,CC1FuCwB,CAAsBjE,EACrD,CACJ,CAIA,SAASkE,IACL,IACI,MAAMT,EAASC,mBACf,GAAID,EAAS,EACT,OACJ,MAAMU,EAAUC,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYb,IACxDc,EAAMC,EAAEtH,IAAIiH,EAAS,aACvBI,GAAsB,iBAARA,IAEdnB,EAAS3M,MAAQ8N,EACjB3E,QAAQ6E,KAAK,4CAA6ChB,GAElE,CACA,MAAO9D,GACHC,QAAQC,KAAK,wCAAyCF,EAC1D,CACJ,CA4EA,SAAS+E,EAAoBC,GACzB/C,EAASnL,MAAQkO,EAAO/C,SACxBtD,EAAQ7H,MAAQkO,EAAOrG,QACvBsE,EAAenM,MAAQkO,EAAO7C,QAC9BK,EAAW1L,MAAQkO,EAAOxC,WAC1BG,EAAS7L,MAAQkO,EAAOrC,SACxBW,EAAmBxM,MAAQkO,EAAO1C,cACtC,CAIA,SAAS2C,EAAqBT,GAC1B,IACI,IAAKA,EACD,OACJ,MAAMI,EAAMC,EAAEtH,IAAIiH,EAAS,aACvBI,GAAsB,iBAARA,IAEdnB,EAAS3M,MAAQ8N,EACjB3E,QAAQ6E,KAAK,yCAA0CI,KAAKC,UAAUP,EAAI,MAElF,CACA,MAAO5E,GACHC,QAAQC,KAAK,0CAA2CF,EAC5D,CACJ,CAmOA,MAAO,CAEHiC,WACAtD,UACAsE,iBACAC,eACAC,gBACAC,QACAC,gBACAI,WACAC,cACAC,iBACAJ,YACAC,cACAhB,aACAG,WACAW,qBAEA8B,WAnZJC,iBACI,UACUC,sBAAsB,OAC5BrF,QAAQ6E,KAAK,+BAEEf,oBACD,IACVF,IACAU,KAEJlB,EAAcvM,OAAQ,EACtBmJ,QAAQ6E,KAAK,uCACjB,CACA,MAAO9E,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GACxDC,QAAQmD,MAAM,0BAA2BmC,GACzCnC,EAAMtM,MAAQ,UAAUyO,GAC5B,CACJ,EAkYIG,WAjVJL,eAA0BM,GACtB,IAAIzC,EAAapM,OAAU6O,EAAUrO,OAArC,CAEA8L,EAAMtM,MAAQ,KACdoM,EAAapM,OAAQ,EACrBqM,EAAcrM,MAAQ,GACtB,IAEI,MAAM8O,EAAanB,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYZ,qBAG3D8B,EA5Gd,SAAwCC,EAAaC,GACjD,MAAM3E,EAASyD,EAAEmB,UAAUF,GAAe,CAAC,GAC3C,IAAKC,EACD,OAAO3E,EACNA,EAAO6E,WAAyC,iBAArB7E,EAAO6E,YACnC7E,EAAO6E,UAAY,CAAC,GAExB,MAAMC,EAAK9E,EAAO6E,eACGE,IAAjBJ,EAAQK,OACRF,EAAG,MAAQH,EAAQK,MACvBF,EAAG,QAAUH,EAAQM,cACKF,IAAtBJ,EAAQO,YACRJ,EAAG,MAAQH,EAAQO,WAClBJ,EAAG,KAAyB,iBAAXA,EAAG,MACrBA,EAAG,IAAM,CAAC,GAEd,MAAMK,EAAOL,EAAG,IAIhB,GAHIH,EAAQS,mBACRD,EAAK,QAAU,GAEfR,EAAQU,cACR,IAAK,MAAMnQ,KAAOyP,EAAQU,cACtBF,EAAKjQ,IAAQkD,OAAO+M,EAAKjQ,KAAS,GAAK,EAG/C,OAAO8K,CACX,CAkF4BsF,CAA+Bd,EAFrBhC,EAAqB9M,OAInDmJ,QAAQ6E,KAAK,qCAAsCa,SAC7CgB,mBAAmB,CAAC,CAAEzC,KAAM,OAAQ/D,QAASwF,EAAWiB,KAAMf,IAAgB,CAAEgB,QAAS,SAE/FjD,EAAqB9M,MAAQ,KAE7B,MAAMgQ,EAAiBC,QAAQC,cAAcC,4BAA6B,CAAC5G,EAAM6G,KAC7E/D,EAAcrM,MAAQuJ,IAG1BJ,QAAQ6E,KAAK,0CACb,MAAM1D,QAAe+F,SAAS,CAC1BC,WAAYzB,EACZ0B,eAAe,IAEnBpH,QAAQ6E,KAAK,6CAA8C1D,EAAO/B,QAElEyH,EAAeQ,OACfnE,EAAcrM,MAAQ,GAGtBiO,EADehD,GAAcX,IAG7B,IAAImG,QAAmB9C,IAAI+C,aAAapG,EAAQyD,EAAEmB,UAAUH,IACvD0B,GAGKA,EAAWtB,WAAaJ,GAAaI,YAC3CsB,EAAWtB,UAAYpB,EAAEmB,UAAUH,EAAYI,YAH/CsB,EAAa1C,EAAEmB,UAAUH,GAMzB0B,WACOA,EAAWE,oBACXF,EAAWG,YAGtBzH,QAAQ6E,KAAK,8DACP6B,mBAAmB,CAAC,CAAEzC,KAAM,YAAa/D,QAASiB,EAAQwF,KAAMW,IAAe,CAAEV,QAAS,SAEhG5B,EAAqBsC,GACrBtH,QAAQ6E,KAAK,4CACjB,CACA,MAAO9E,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GACxDC,QAAQmD,MAAM,gCAAiCmC,GAC/CnC,EAAMtM,MAAQ,SAASyO,GAC3B,CACA,QACIrC,EAAapM,OAAQ,CACzB,CA3DU,CA4Dd,EAoRI6Q,wBAzbJ,SAAiC5B,GAC7BnC,EAAqB9M,MAAQiP,CACjC,EAwbIxB,eACAqD,gBArPJ,WACI,MAAMC,EAAU,GACV/D,EAASC,mBACf,GAAID,EAAS,EAET,YADAJ,EAAY5M,MAAQ+Q,GAGxB,MAAM7D,EAAWC,gBAAgB,KAAKH,IAAU,CAAEI,KAAM,cACxD,IAAK,MAAMqB,KAAOvB,EAAU,CACxB,MAAM7B,EAAUU,GAAe0C,EAAIpF,SAC/BgC,GACA0F,EAAQC,KAAK,CACTC,UAAWxC,EAAIZ,WACfxC,WAGZ,CACAuB,EAAY5M,MAAQ+Q,CACxB,EAoOIG,WAhOJ3C,eAA0B4C,GACtB,IACI,MAAMnE,EAASC,mBACf,GAAIkE,GAAmBnE,EAEnB,YADA7D,QAAQC,KAAK,4DAIjB,MAAMgI,EAAc,GACpB,IAAK,IAAIC,EAAIF,EAAkB,EAAGE,GAAKrE,EAAQqE,IAC3CD,EAAYJ,KAAKK,GAErBlI,QAAQ6E,KAAK,+CAA+CmD,EAAkB,QAAQnE,WAChFsE,mBAAmBF,EAAa,CAAErB,QAAS,SAEjDhD,IAEA,IACI,MAAMW,EAAUC,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYsD,IACxDrD,EAAMC,EAAEtH,IAAIiH,EAAS,aACvBI,GAAsB,iBAARA,IACdnB,EAAS3M,MAAQ8N,EACjB3E,QAAQ6E,KAAK,sDAAuDmD,GAE5E,CACA,MAAOI,GACHpI,QAAQC,KAAK,2EAA4EmI,GACzF9D,GACJ,CAEAZ,EAAe7M,OAAQ,EACvBwR,OAAOC,QAAQ,SACftI,QAAQ6E,KAAK,iCACjB,CACA,MAAO9E,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GACxDC,QAAQmD,MAAM,8BAA+BmC,GAC7CnC,EAAMtM,MAAQ,SAASyO,GAC3B,CACJ,EA0LIiD,cAtLJnD,iBACI,IAAInC,EAAapM,MAEjB,IACI,MAAMgN,EAASC,mBACf,GAAID,EAAS,EAET,YADA7D,QAAQC,KAAK,kDAGjBgD,EAAapM,OAAQ,EACrBsM,EAAMtM,MAAQ,KACdqM,EAAcrM,MAAQ,GAEtB,MACM2R,EAAc,IADAxE,gBAAgB,KAAKH,MACJ4E,UAAU/K,KAAKgL,GAAgB,SAAXA,EAAEzE,MACrDyB,EAAY8C,EAAcA,EAAYtI,QAAU,GAEtDF,QAAQ6E,KAAK,uCAAwChB,SAC/CsE,mBAAmB,CAACtE,GAAS,CAAE+C,QAAS,SAE9C,MAAMjB,EAAanB,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYZ,qBAE3D+C,EAAiBC,QAAQC,cAAcC,4BAA8B5G,IACvE8C,EAAcrM,MAAQuJ,IAG1BJ,QAAQ6E,KAAK,uCACb,MAAM1D,QAAe+F,SAAS,CAC1BC,WAAYzB,EACZ0B,eAAe,IAEnBP,EAAeQ,OACfnE,EAAcrM,MAAQ,GAGtBiO,EADehD,GAAcX,IAG7B,MAAMmG,QAAmB9C,IAAI+C,aAAapG,EAAQyD,EAAEmB,UAAUJ,UAExDe,mBAAmB,CAAC,CAAEzC,KAAM,YAAa/D,QAASiB,EAAQwF,KAAMW,IAAe,CAAEV,QAAS,SAEhG5B,EAAqBsC,GACrBe,OAAOC,QAAQ,WACftI,QAAQ6E,KAAK,+BACjB,CACA,MAAO9E,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GACxDC,QAAQmD,MAAM,4BAA6BmC,GAC3CnC,EAAMtM,MAAQ,WAAWyO,GAC7B,CACA,QACIrC,EAAapM,OAAQ,CACzB,CACJ,EAkII8R,UA9HJ,WACI,GAAIrF,EAAUzM,OAASoM,EAAapM,MAChC,OAEJ,MAAMgN,EAASC,mBACf,GAAID,EAAS,EACT,OACJ,MAAME,EAAWC,gBAAgB,GAAGH,KAAUA,KACtB,IAApBE,EAAS3E,SAEbmE,EAAY1M,MAAQkN,EAAS,GAAG7D,QAChCoD,EAAUzM,OAAQ,EACtB,EAmHI+R,SA/GJxD,iBACI,GAAK9B,EAAUzM,MAEf,IACI,MAAMgN,EAASC,mBACf,GAAID,EAAS,EACT,OAEJ,MAAMgF,EAAiBrE,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYb,IAE/DiF,EAAcjF,EAAS,EACvBW,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYb,EAAS,IACvDW,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAY,IAEpD,IAAI4C,QAAmB9C,IAAI+C,aAAahE,EAAY1M,MAAO+N,EAAEmB,UAAU+C,IAGnExB,GAAcuB,IACTvB,EAAWtB,WAAa6C,EAAe7C,YACxCsB,EAAWtB,UAAY6C,EAAe7C,YAErCsB,EAAWE,cAAgBqB,EAAerB,eAC3CF,EAAWE,aAAeqB,EAAerB,gBAGvCF,GAAcuB,IAEpBvB,EAAauB,SAGXE,gBAAgB,CAAC,CAAErE,WAAYb,EAAQ3D,QAASqD,EAAY1M,QAAU,CAAE+P,QAAS,SAEnFU,SACM9C,IAAIwE,eAAe1B,EAAY,CAAE/L,KAAM,UAAWmJ,WAAYb,IAIxEiB,EADehD,GAAcyB,EAAY1M,QAGzCmO,EAAqBsC,GACrBhE,EAAUzM,OAAQ,EAClB0M,EAAY1M,MAAQ,GACpBwR,OAAOC,QAAQ,UACftI,QAAQ6E,KAAK,yBACjB,CACA,MAAO9E,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GACxDC,QAAQmD,MAAM,+BAAgCmC,GAC9CnC,EAAMtM,MAAQ,WAAWyO,GAC7B,CACJ,EA8DI2D,WA1DJ,WACI3F,EAAUzM,OAAQ,EAClB0M,EAAY1M,MAAQ,EACxB,EAwDIqS,qBApDJ9D,eAAoC+D,GAChC,IACI,MAAMtF,EAASC,mBACf,GAAID,EAAS,EAET,OADAV,EAAMtM,MAAQ,eACP,EAEX,MAAMgS,EAAiBrE,IAAIC,WAAW,CAAElJ,KAAM,UAAWmJ,WAAYb,IAC/DuF,EAAcxE,EAAEmB,UAAU8C,GAAkB,CAAC,GAOnD,OANKO,EAAYpD,WAA8C,iBAA1BoD,EAAYpD,YAC7CoD,EAAYpD,UAAY,CAAC,GAE7BqD,OAAOC,OAAOF,EAAYpD,UAAWpB,EAAEmB,UAAUoD,UAC3C3E,IAAIwE,eAAeI,EAAa,CAAE7N,KAAM,UAAWmJ,WAAYb,IACrEmB,EAAqBoE,IACd,CACX,CACA,MAAOrJ,GACH,MAAMuF,EAAMvF,aAAewF,MAAQxF,EAAIG,QAAUsF,OAAOzF,GAGxD,OAFAC,QAAQmD,MAAM,0CAA2CmC,GACzDnC,EAAMtM,MAAQ,WAAWyO,KAClB,CACX,CACJ,KCvbEiE,GAAY3P,EAAiB,aAAc,CAC/C,CAAC,OAAQ,CAAEG,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,UAC/B,CAAC,SAAU,CAAE8D,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKhE,IAAK,WAC9C,CAAC,SAAU,CAAE8D,GAAI,IAAKC,GAAI,IAAKC,EAAG,IAAKhE,IAAK,aCJxCmT,GAAQ5P,EAAiB,QAAS,CACtC,CAAC,OAAQ,CAAEG,EAAG,wBAAyB1D,IAAK,WAC5C,CACE,OACA,CACE0D,EAAG,gGACH1D,IAAK,WAGT,CAAC,SAAU,CAAE8D,GAAI,KAAMC,GAAI,KAAMC,EAAG,IAAKhE,IAAK,WAC9C,CAAC,SAAU,CAAE8D,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKhE,IAAK,aCVzCoT,GAAS7P,EAAiB,SAAU,CACxC,CACE,OACA,CACEG,EAAG,+GACH1D,IAAK,UAGT,CACE,OACA,CACE0D,EAAG,4EACH1D,IAAK,WAGT,CACE,OACA,CACE0D,EAAG,4EACH1D,IAAK,aCnBLqT,GAAS9P,EAAiB,UAAW,CACzC,CAAC,OAAQ,CAAEG,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,2CAA4C1D,IAAK,WAC/D,CAAC,OAAQ,CAAE0D,EAAG,UAAW1D,IAAK,WAC9B,CAAC,OAAQ,CAAE0D,EAAG,yCAA0C1D,IAAK,aCLzDsT,GAAI/P,EAAiB,IAAK,CAC9B,CAAC,OAAQ,CAAEG,EAAG,aAAc1D,IAAK,WACjC,CAAC,OAAQ,CAAE0D,EAAG,aAAc1D,IAAK,aCkC5B,MAAMuT,GAAwD,CACnE,CAACzO,EAAW+B,SAAU,CACpB3B,KAAMJ,EAAW+B,QACjBrE,KAAM,KACNwF,SAAU,OACVwL,QAAS,CAAC,kBACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,6BAEf,CAACpB,EAAWyB,OAAQ,CAClBrB,KAAMJ,EAAWyB,MACjB/D,KAAM,KACNwF,SAAU,OACVwL,QAAS,CAAC,iBAAkB,aAC5BC,WAAW,EACXC,UAAW,EACXxN,YAAa,yBAEf,CAACpB,EAAW6O,MAAO,CACjBzO,KAAMJ,EAAW6O,KACjBnR,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,aAAc,aACxBC,WAAW,EACXC,UAAW,EACXxN,YAAa,8BAEf,CAACpB,EAAW8O,QAAS,CACnB1O,KAAMJ,EAAW8O,OACjBpR,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,cACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,6BAEf,CAACpB,EAAW+O,QAAS,CACnB3O,KAAMJ,EAAW+O,OACjBrR,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,eACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,2CAEf,CAACpB,EAAW4B,MAAO,CACjBxB,KAAMJ,EAAW4B,KACjBlE,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,cAAe,WACzBC,WAAW,EACXC,UAAW,EACXxN,YAAa,gCAEf,CAACpB,EAAWgP,OAAQ,CAClB5O,KAAMJ,EAAWgP,MACjBtR,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,UAAW,eACrBC,WAAW,EACXC,UAAW,EACXxN,YAAa,8BAEf,CAACpB,EAAW8B,YAAa,CACvB1B,KAAMJ,EAAW8B,WACjBpE,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,kBACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,yBAEf,CAACpB,EAAWgD,OAAQ,CAClB5C,KAAMJ,EAAWgD,MACjBtF,KAAM,OACNwF,SAAU,OACVwL,QAAS,CAAC,eACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,yBAEf,CAACpB,EAAWiP,aAAc,CACxB7O,KAAMJ,EAAWiP,YACjBvR,KAAM,OACNwF,SAAU,QACVwL,QAAS,CAAC,eACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,2BAEf,CAACpB,EAAWkP,MAAO,CACjB9O,KAAMJ,EAAWkP,KACjBxR,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,cAAe,aACzBC,WAAW,EACXC,UAAW,EACXxN,YAAa,8BAEf,CAACpB,EAAWmP,QAAS,CACnB/O,KAAMJ,EAAWmP,OACjBzR,KAAM,KACNwF,SAAU,OACVwL,QAAS,CAAC,aAAc,aACxBC,WAAW,EACXC,UAAW,EACXxN,YAAa,mCAEf,CAACpB,EAAWoP,MAAO,CACjBhP,KAAMJ,EAAWoP,KACjB1R,KAAM,KACNwF,SAAU,SACVwL,QAAS,CAAC,iBAAkB,iBAC5BC,WAAW,EACXC,UAAW,EACXxN,YAAa,6BAEf,CAACpB,EAAWqP,YAAa,CACvBjP,KAAMJ,EAAWqP,WACjB3R,KAAM,MACNwF,SAAU,QACVwL,QAAS,CAAC,WACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,qBAEf,CAACpB,EAAWsP,YAAa,CACvBlP,KAAMJ,EAAWsP,WACjB5R,KAAM,OACNwF,SAAU,SACVwL,QAAS,CAAC,eACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,gCAEf,CAACpB,EAAWuP,aAAc,CACxBnP,KAAMJ,EAAWuP,YACjB7R,KAAM,OACNwF,SAAU,OACVwL,QAAS,CAAC,eACVC,WAAW,EACXC,UAAW,EACXxN,YAAa,uBAWV,SAASoO,GAAWC,EAAqBrP,GAC9C,OAAOqP,EAAO1M,QAAQR,KAAK0K,GAAKA,EAAE7M,OAASA,EAC7C,CAKO,SAASsP,GAAUD,EAAqBrP,GAC7C,OAAOqP,EAAO1M,QAAQsE,KAAK4F,GAAKA,EAAE7M,OAASA,GAAQ6M,EAAEhK,OAAS,EAChE,CAKO,SAAS0M,GAAgBF,EAAqBrP,GACnD,MAAMwP,EAASJ,GAAWC,EAAQrP,GAClC,OAAOwP,EAASA,EAAO3M,OAAS,CAClC,CAMO,SAAS4M,GACdJ,EACArP,EACA6C,EAAiB,EACjBM,GAGA,GAAImM,GAAUD,EAAQzP,EAAWqP,cAC3BjP,IAASJ,EAAW+O,QAAU3O,IAASJ,EAAWgP,OACpD,OAAO,EAIX,MAAMc,EAAMrB,GAAgBrO,GACtB2P,EAAWP,GAAWC,EAAQrP,GAEpC,GAAI2P,EAWF,OAVID,EAAInB,YACNoB,EAAS9M,QAAUA,EACf6M,EAAIlB,UAAY,IAClBmB,EAAS9M,OAASa,KAAKkM,IAAID,EAAS9M,OAAQ6M,EAAIlB,aAIhDxO,IAASJ,EAAW6O,MAAQtL,GAAS0M,kBACvCF,EAASE,gBAAkB1M,EAAQ0M,kBAE9B,EAIT,MAAMC,EAA2B,CAC/B9P,OACA6C,OAAQ6M,EAAIlB,UAAY,EAAI9K,KAAKkM,IAAI/M,EAAQ6M,EAAIlB,WAAa3L,EAC9DC,SAAU4M,EAAI5M,SACd+M,gBAAiB1M,GAAS0M,gBAC1BE,OAAQ5M,GAAS4M,QAGnB,OADAV,EAAO1M,QAAQ2J,KAAKwD,IACb,CACT,CAKO,SAASE,GAAaX,EAAqBrP,GAChDqP,EAAO1M,QAAU0M,EAAO1M,QAAQlH,OAAOoR,GAAKA,EAAE7M,OAASA,EACzD,CAKO,SAASiQ,GAAmBZ,EAAqBrP,EAAkBkQ,EAAiB,GACzF,MAAMV,EAASJ,GAAWC,EAAQrP,GAC7BwP,IACLA,EAAO3M,QAAUqN,EACbV,EAAO3M,QAAU,GACnBmN,GAAaX,EAAQrP,GAEzB,CAqBO,SAASmQ,GAAmBd,GACjC,MAAMzJ,EAA0B,CAC9BwK,SAAU,EACVC,SAAU,EACVC,WAAY,EACZC,WAAW,EACXC,KAAM,GACNC,gBAAiB,IAIfnB,GAAUD,EAAQzP,EAAWsP,cAC/BtJ,EAAOyK,UAAYhB,EAAO7M,GAC1BoD,EAAO4K,KAAKlE,KAAK,kBACjB2D,GAAmBZ,EAAQzP,EAAWsP,aAIxC,MAAMwB,EAAenB,GAAgBF,EAAQzP,EAAW+O,QACpD+B,EAAe,IACbA,GAAgBrB,EAAO/M,KACzBsD,EAAO0K,YAAcI,EACrB9K,EAAO4K,KAAKlE,KAAK,YAAYoE,aAAwBrB,EAAO/M,UAAUoO,YAExET,GAAmBZ,EAAQzP,EAAW+O,SAIxC,MAAMgC,EAAapB,GAAgBF,EAAQzP,EAAW4B,MACtD,GAAImP,EAAa,EAAG,CAClB,IAAIC,EAAaD,EACjB,MAAME,EAAmBtB,GAAgBF,EAAQzP,EAAW8B,YACxDmP,EAAmB,IACrBD,GAAcC,EACdjL,EAAO4K,KAAKlE,KAAK,cAAcuE,OAEjCjL,EAAOwK,UAAYQ,EACnBhL,EAAO4K,KAAKlE,KAAK,WAAWsE,SAC9B,CAGItB,GAAUD,EAAQzP,EAAWgP,SAC/BqB,GAAmBZ,EAAQzP,EAAWgP,OACtChJ,EAAO4K,KAAKlE,KAAK,eAInB,MAAMwE,EAAcvB,GAAgBF,EAAQzP,EAAWgD,OACnDkO,EAAc,IAChBlL,EAAOwK,UAAYU,EACnBlL,EAAO4K,KAAKlE,KAAK,aAAawE,WAIXvB,GAAgBF,EAAQzP,EAAWiP,aACrC,IACjBY,GAAYJ,EAAQzP,EAAW4B,KAAM,GACrCoE,EAAO6K,gBAAgBnE,KAAK,CAAEtM,KAAMJ,EAAW4B,KAAMqB,OAAQ,IAC7D+C,EAAO4K,KAAKlE,KAAK,2BAIfgD,GAAUD,EAAQzP,EAAWkP,QAC/BlJ,EAAO2K,WAAY,EACnB3K,EAAO4K,KAAKlE,KAAK,kBAInB,MAAMyE,EAAmBxB,GAAgBF,EAAQzP,EAAWuP,aAM5D,OALI4B,EAAmB,IACrBnL,EAAOyK,UAAYU,EACnBnL,EAAO4K,KAAKlE,KAAK,cAAcyE,OAG1BnL,CACT,CAMO,SAASoL,GAAiB3B,GAC/B,MAAMmB,EAAiB,GAGnBlB,GAAUD,EAAQzP,EAAW6O,QAC/BwB,GAAmBZ,EAAQzP,EAAW6O,MACtC+B,EAAKlE,KAAK,eAIZ,MAAM2E,EAAc7B,GAAWC,EAAQzP,EAAWyB,OAqBlD,OApBI4P,GAAeA,EAAYpO,OAAS,IACtCoO,EAAYpO,OAASa,KAAKwN,MAAMD,EAAYpO,OAAS,GACjDoO,EAAYpO,QAAU,GACxBmN,GAAaX,EAAQzP,EAAWyB,OAElCmP,EAAKlE,KAAK,eAIRgD,GAAUD,EAAQzP,EAAWmP,UAC/BiB,GAAaX,EAAQzP,EAAWmP,QAChCyB,EAAKlE,KAAK,eAIRgD,GAAUD,EAAQzP,EAAWkP,QAC/BkB,GAAaX,EAAQzP,EAAWkP,MAChC0B,EAAKlE,KAAK,eAGLkE,CACT,CCtZA,MAAMW,GAAQ9S,EAAiB,QAAS,CACtC,CAAC,OAAQ,CAAEG,EAAG,aAAc1D,IAAK,UACjC,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,WAChC,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,WAChC,CAAC,OAAQ,CAAE0D,EAAG,+BAAgC1D,IAAK,aCJ/CsW,GAAW/S,EAAiB,WAAY,CAC5C,CACE,OACA,CACEG,EAAG,yQACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,UAAW1D,IAAK,WAC9B,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,SAAU,CAAE8D,GAAI,IAAKC,GAAI,KAAMC,EAAG,IAAKhE,IAAK,aCVzCuW,GAAahT,EAAiB,cAAe,CACjD,CAAC,OAAQ,CAAEG,EAAG,qDAAsD1D,IAAK,WACzE,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,sDAAuD1D,IAAK,WAC1E,CAAC,OAAQ,CAAE0D,EAAG,aAAc1D,IAAK,aCJ7BwW,GAAajT,EAAiB,aAAc,CAChD,CACE,OACA,CACEG,EAAG,qHACH1D,IAAK,WAGT,CACE,OACA,CACE0D,EAAG,0HACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,WAC/B,CAAC,OAAQ,CAAE0D,EAAG,UAAW1D,IAAK,aCvB1ByW,GAAa,CAAEtT,MAAO,0EACtBuT,GAAa,CAAEvT,MAAO,uDACtBwT,GAAa,CAAExT,MAAO,iIACtByT,GAAa,CAAEzT,MAAO,4DACtB0T,GAAa,CAAE1T,MAAO,sEACtB2T,GAAa,CAAE3T,MAAO,mGACtB4T,GAAa,CAAE5T,MAAO,uKACtB6T,GAAa,CAAE7T,MAAO,gECJ5B,IDS6B,qBAAiB,CAC1C8T,OAAQ,cACRpX,MAAO,CACHqX,KAAM,CAAC,EACPC,SAAU,CAAEjS,KAAMnE,QAASqC,SAAS,GACpCgU,SAAU,CAAElS,KAAMnE,QAASqC,SAAS,GACpCiU,SAAU,CAAEnS,KAAMnE,QAASqC,SAAS,GACpCkU,QAAS,CAAEpS,KAAMnE,QAASqC,SAAS,GACnCxC,UAAW,CAAEwC,QAAS,KAE1BmU,MAAO,CAAC,SACR,KAAAC,CAAMC,GACF,MAAM5X,EAAQ4X,EACRC,GAAiB,IAAAC,UAAS,KAC5B,OAAQ9X,EAAMqX,KAAKhS,MACf,KAAKL,EAASM,SACV,MAAO,+BACX,KAAKN,EAASsB,MACV,MAAO,qCACX,KAAKtB,EAASuB,SACV,MAAO,uCACX,KAAKvB,EAAS4B,MACV,MAAO,iCACX,QACI,MAAO,iCAGbmR,GAAW,IAAAD,UAAS,KACtB,OAAQ9X,EAAMqX,KAAKhS,MACf,KAAKL,EAASM,SACV,OAAOkR,GACX,KAAKxR,EAASsB,MACV,OAAOmQ,GACX,KAAKzR,EAASuB,SACV,OAAOmQ,GACX,KAAK1R,EAAS4B,MACV,OAAO+P,GACX,QACI,OAAOH,MAGbwB,GAAgB,IAAAF,UAAS,KAC3B,OAAQ9X,EAAMqX,KAAKhS,MACf,KAAKL,EAASM,SACV,MAAO,eACX,KAAKN,EAASsB,MACV,MAAO,kBACX,KAAKtB,EAASuB,SACV,MAAO,mBACX,KAAKvB,EAAS4B,MACV,MAAO,gBACX,QACI,MAAO,mBAYbqR,IAToB,IAAAH,UAAS,KAC/B,MAAMI,EAAKlY,EAAMqX,KAAKzR,YACtB,OAAQsS,EAAGrS,MACP,IAAK,WAAY,MAAO,MAAMqS,EAAGpS,OAAS,KAC1C,IAAK,QAAS,OAAOoS,EAAGvX,MAAQ,MAAMuX,EAAGvX,QAAU,KACnD,IAAK,QAAS,MAAO,GAAGuX,EAAGC,WAAa,KAAKD,EAAGpS,OAAS,KACzD,QAAS,MAAO,SAGH,IAAAgS,UAAS,KAC1B,OAAQ9X,EAAMqX,KAAKhS,MACf,KAAKL,EAASM,SACV,MAAO,0CACX,KAAKN,EAASsB,MACV,MAAO,6CACX,KAAKtB,EAAS4B,MACV,MAAO,2CACX,QACI,MAAO,kDAGnB,MAAO,CAACwR,EAAMC,MACF,kBAAc,wBAAoB,WAAW,KAAM,EACvD,wBAAoB,oBACnBT,EAAgB,WACV,kBAAc,wBAAoB,MAAO,CACxCzX,IAAK,EACLmD,OAAO,oBAAgB,CAAC,kKAAmKsU,EAAQ7W,aACpM,IAAKsX,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,MAAO,CAAE/U,MAAO,wFAA0F,EAC1H,wBAAoB,MAAO,CAAEA,MAAO,gEACpC,MACF,MACP,kBAAc,wBAAoB,WAAW,CAAEnD,IAAK,GAAK,EACxD,wBAAoB,mBACpB,wBAAoB,MAAO,CACvBmD,OAAO,oBAAgB,CAAC,sHAAuH,EACvI,WAAOuU,GACPD,EAAQL,SAAW,yDAA2D,kCAC9EK,EAAQN,SAAW,6BAA+B,GAClDM,EAAQ7W,aAEhBuX,QAASD,EAAO,KAAOA,EAAO,GAAME,IAAaX,EAAQN,UAAYc,EAAKI,MAAM,WACjF,EACC,wBAAoB,aACpB,wBAAoB,MAAO5B,GAAY,EACnC,wBAAoB,MAAO,CACvBtT,OAAO,oBAAgB,CAAC,iHAAkHsU,EAAQP,KAAKhS,QAAS,WAAOL,GAAUsB,OAAmC,IAA1BsR,EAAQP,KAAK7R,SAAiB,YAAc,MACvO,QAAS,qBAAiBoS,EAAQP,KAAK7R,UAAW,IACrD,wBAAoB,MAAOqR,GAAY,GAClC,kBAAc,kBAAa,8BAAyB,WAAOkB,IAAY,CACpEzU,OAAO,oBAAgB,CAAC,UAAU,WAAO0U,MAC1C,KAAM,EAAe,CAAC,gBAGjC,wBAAoB,wBACpB,wBAAoB,MAAOlB,GAAY,EACnC,wBAAoB,MAAO,CACvBxT,OAAO,oBAAgB,CAAC,wBAAwB,WAAO2U,MACxD,KAAM,IACT,wBAAoB,OAAQlB,IAAY,qBAAiBa,EAAQP,KAAK1U,KAAK,IAAK,MAEpF,wBAAoB,cACpB,wBAAoB,MAAOqU,GAAY,EACnC,wBAAoB,KAAMC,IAAY,qBAAiBW,EAAQP,KAAK1U,MAAO,IAC3E,wBAAoB,MAAOuU,IAAY,qBAAiBU,EAAQP,KAAKhR,aAAc,IACnF,wBAAoB,MAAO8Q,IAAY,qBAAiBS,EAAQP,KAAKhS,MAAO,MAEjF,IACJ,QACR,MAEX,IEzIE,GAAa,CACf9C,QAAS,cACTe,MAAO,6BACPmV,MAAO,CAAE,OAAU,8CAEjB,GAAa,CAAC,OAAQ,UACtB,GAAa,CAAC,UCLpB,IDM6B,qBAAiB,CAC1CrB,OAAQ,cACRpX,MAAO,CACHW,MAAO,CAAC,EACR+X,QAAS,CAAErT,KAAMnE,SACjBgC,MAAO,CAAEK,QAAS,QAClBN,KAAM,CAAEM,QAAS,MACjBxC,UAAW,CAAEwC,QAAS,KAE1B,KAAAoU,CAAMC,GACF,MAAM5X,EAAQ4X,EACRe,GAAe,IAAA9L,KAAI,GACzB,IAAI+L,EAAW,KACf,MAAMC,EAAa,QAAQ7Y,EAAMkD,SAAS6F,KAAKC,SAAS8P,SAAS,IAAIC,OAAO,EAAG,KACzEC,GAAY,IAAAlB,UAAS,KACX,CAAEmB,GAAI,YAAaC,GAAI,YAAaC,GAAI,aACzCnZ,EAAMiD,QAEfmW,GAAkB,IAAAtB,UAAS,KACjB,CAAEmB,GAAI,UAAWC,GAAI,WAAYC,GAAI,YACtCnZ,EAAMiD,QAEfoW,GAAc,IAAAvB,UAAS,IAAuB,SAAhB9X,EAAMkD,MAAmB,UAAY,WACnEoW,GAAY,IAAAxB,UAAS,IAAuB,SAAhB9X,EAAMkD,MAAmB,iBAAmB,kBAmB9E,OAlBA,IAAAqW,OAAM,IAAM,CAACvZ,EAAM0Y,QAAS1Y,EAAMW,OAAQ,EAAE+X,MACpCE,IACAY,cAAcZ,GACdA,EAAW,MAEXF,EACAE,EAAWa,YAAY,KACnBd,EAAahY,MAAQoI,KAAKwN,MAAsB,EAAhBxN,KAAKC,UAAgB,GACtD,IAGH2P,EAAahY,MAAQX,EAAMW,OAEhC,CAAE+Y,WAAW,KAChB,IAAAC,aAAY,KACJf,GACAY,cAAcZ,KAEf,CAACR,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C/U,OAAO,oBAAgB,CAAC,uFAAwF,CAACsU,EAAQc,QAAU,iBAAmB,GAAId,EAAQ7W,cACnK,EACC,wBAAoB,MAAO,CACvBuC,OAAO,oBAAgB,CAAC,6CAA6C,WAAO0V,MAC7E,GACE,kBAAc,wBAAoB,MAAO,GAAY,EAClD,wBAAoB,OAAQ,KAAM,EAC9B,wBAAoB,iBAAkB,CAClC5T,GAAIyT,EACJe,GAAI,KACJC,GAAI,KACJC,GAAI,OACJC,GAAI,QACL,CACoB,SAAlBnC,EAAQ1U,QACF,kBAAc,wBAAoB,WAAW,CAAE/C,IAAK,GAAK,CACxDkY,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,KACR,aAAc,WACf,MAAO,IACV3B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,MACR,aAAc,WACf,MAAO,IACV3B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,OACR,aAAc,WACf,MAAO,KACX,OACA,kBAAc,wBAAoB,WAAW,CAAE7Z,IAAK,GAAK,CACxDkY,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,KACR,aAAc,WACf,MAAO,IACV3B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,MACR,aAAc,WACf,MAAO,IACV3B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAClD2B,OAAQ,OACR,aAAc,WACf,MAAO,KACX,UAGf,wBAAoB,UAAW,CAC3BC,OAAQ,wCACRzX,KAAM,QAAQqW,KACdpW,QAAQ,WAAO4W,GACf,eAAgB,KACjB,KAAM,EAAe,KACxB,wBAAoB,UAAW,CAC3BY,OAAQ,0CACRzX,KAAM,OACNC,QAAQ,WAAO4W,GACf,eAAgB,IAChBa,QAAS,OACV,KAAM,EAAe,QAE5B,wBAAoB,OAAQ,CACxB5W,OAAO,oBAAgB,CAAC,sDAAuD,EAAC,WAAOgW,IAAY,WAAOF,QAC3G,sBAAiB,WAAOT,IAAgB,IAC5C,IACJ,GAEX,IEtHE,GAAa,CAAErV,MAAO,kDACtB,GAAa,CACfnD,IAAK,EACLmD,MAAO,8FAEL,GAAa,CAAEA,MAAO,sDACtB,GAAa,CAAEA,MAAO,6CACtB,GAAa,CAAEA,MAAO,0JACtB,GAAa,CACfnD,IAAK,EACLmD,MAAO,4BAEL,GAAa,CAAEA,MAAO,YACtB,GAAa,CAAEA,MAAO,+DACtB6W,GAAa,CACfha,IAAK,EACLmD,MAAO,kDAEL8W,GAAc,CAAE9W,MAAO,0BACvB+W,GAAc,CAAE/W,MAAO,wKACvBgX,GAAc,CAAEhX,MAAO,wHACvBiX,GAAc,CAAEjX,MAAO,4DACvBkX,GAAc,CAAElX,MAAO,8DACvBmX,GAAc,CAChBta,IAAK,EACLmD,MAAO,gCAELoX,GAAc,CAAEpX,MAAO,yCACvBqX,GAAc,CAAErX,MAAO,gCACvBsX,GAAc,CAAEtX,MAAO,uDACvBuX,GAAc,CAAEvX,MAAO,4CACvBwX,GAAc,CAAExX,MAAO,gCACvByX,GAAc,CAAEzX,MAAO,yDACvB0X,GAAc,CAAE1X,MAAO,6CACvB2X,GAAc,CAAE3X,MAAO,gCACvB4X,GAAc,CAAE5X,MAAO,4BACvB6X,GAAc,CAChBhb,IAAK,EACLmD,MAAO,6BAEL8X,GAAc,CAAC,SACfC,GAAc,CAAE/X,MAAO,wJACvBgY,GAAc,CAChBnb,IAAK,EACLmD,MAAO,gEACPmV,MAAO,CAAE,kBAAmB,OAE1B8C,GAAc,CAAEjY,MAAO,6HACvBkY,GAAc,CAAElY,MAAO,8DACvBmY,GAAc,CAChBtb,IAAK,EACLmD,MAAO,gCAELoY,GAAc,CAAEpY,MAAO,yCACvBqY,GAAc,CAAErY,MAAO,gCACvBsY,GAAc,CAAEtY,MAAO,yDACvBuY,GAAc,CAAEvY,MAAO,kDACvBwY,GAAc,CAAExY,MAAO,gCACvByY,GAAc,CAAEzY,MAAO,uDACvB0Y,GAAc,CAAE1Y,MAAO,6CACvB2Y,GAAc,CAAE3Y,MAAO,gCACvB4Y,GAAc,CAAE5Y,MAAO,iCACvB6Y,GAAc,CAChBhc,IAAK,EACLmD,MAAO,6BAEL8Y,GAAc,CAAC,SACfC,GAAc,CAAE/Y,MAAO,2DACvBgZ,GAAc,CAAEhZ,MAAO,oDACvBiZ,GAAc,CAChBpc,IAAK,EACLmD,MAAO,8DAELkZ,GAAc,CAAElZ,MAAO,uGACvBmZ,GAAc,CAAEnZ,MAAO,sCACvBoZ,GAAc,CAAC,eAAgB,uBAC/BC,GAAc,CAAErZ,MAAO,gEACvBsZ,GAAc,CAAC,YACfC,GAAc,CAAEvZ,MAAO,kBACvBwZ,GAAc,CAAExZ,MAAO,kBACvByZ,GAAc,CAAEzZ,MAAO,kCACvB0Z,GAAc,CAAE1Z,MAAO,kBACvB2Z,GAAc,CAAE3Z,MAAO,kCACvB4Z,GAAc,CAAE5Z,MAAO,gEACvB6Z,GAAc,CAAE7Z,MAAO,oBACvB8Z,GAAc,CAAC,SACfC,GAAc,CAChBld,IAAK,EACLmD,MAAO,iIAELga,GAAc,CAAC,aACfC,GAAc,CAAEja,MAAO,6EACvBka,GAAc,CAAEla,MAAO,0CACvBma,GAAc,CAAEna,MAAO,8CAUvBoa,GAAoB,0BAC1B,IAA6B,qBAAiB,CAC1CtG,OAAQ,aACRpX,MAAO,CACH2d,mBAAoB,CAAC,EACrBxN,UAAW,CAAC,EACZyN,WAAY,CAAC,GAEjBlG,MAAO,CAAC,aACR,KAAAC,CAAMC,GAAWiG,KAAMC,IACnB,MAAM9d,EAAQ4X,EACRiG,EAAOC,EAEPC,EAAW1U,GAAerJ,EAAMmQ,WAChC6N,EAAmBD,GAAUpb,MAAQ3C,EAAMmQ,UAE3C8N,GAAU,IAAAC,UAAS,CAAC,GAEpBC,GAAc,IAAAtR,KAAI,IAAK7M,EAAM2d,qBAC7BtV,GAAa,IAAAwE,KAAIkR,EACjB,IAAKA,EAASrW,MAAOM,QAAS,IAAI+V,EAASrW,MAAMM,UACjD,CAAEL,GAAI,EAAGC,MAAO,EAAGC,GAAI,EAAGC,QAAS,EAAGC,QAAS,EAAGC,QAAS,KAE3DoW,EAAiB/Y,GACZqO,GAAgBrO,IAAO1C,MAAQ2M,OAAOjK,GAE3CgZ,EAAwBhZ,GACnBqO,GAAgBrO,IAAOgB,aAAe,GAE3CiY,EAAmBnW,IACrB,OAAQA,GACJ,IAAK,OAAQ,MAAO,qDACpB,IAAK,SAAU,MAAO,+CACtB,IAAK,QAGL,QAAS,MAAO,kDAFhB,IAAK,QAAS,MAAO,wDACrB,IAAK,UAAW,MAAO,0DAKzBoW,GAAc,IAAAzG,UAAS,KACzB,MAAM0G,EAAML,EAAYxd,MAAMqH,QAAQR,KAAK0K,GAAKA,EAAE7M,OAAS,EAAGqB,OAC9D,OAAO8X,GAAKtW,QAAU,IAEpBuW,GAAa,IAAA3G,UAAS,KACxB,MAAM0G,EAAMnW,EAAW1H,MAAMqH,QAAQR,KAAK0K,GAAKA,EAAE7M,OAAS,EAAGqB,OAC7D,OAAO8X,GAAKtW,QAAU,IAEpBwW,EAAYX,EAAW,IAAIA,EAASxW,MAAQ,GAE5CoX,EAAY,CACdvZ,GAAI,OAAQzC,KAAM,KAAM0C,KAAML,EAASuB,SAAUhB,SAAU,KAAMC,SAAU,EAC3EC,YAAa,CAAEC,WAAY,EAAGC,SAAU,GAAKC,YAAa,CAAEC,KAAM,QAASlF,MAAO,GAClFqF,OAAQ,CAAEC,OAAO,EAAOC,OAAQ,OAAQC,MAAM,GAASC,YAAa,GAAIC,YAAa,OAEnFuY,GAAc,IAAA/R,KAAI,CACpBgS,KAAM,EACNC,MAAO3Z,EAAY4Z,WACnBC,iBAAkB,EAClBC,eAAgB,EAChBC,cAAe,EACfC,WAAY,GACZvB,WAAY,IAAI5d,EAAM4d,YAAYwB,KAAK,IAAMrW,KAAKC,SAAW,IAC7DqW,YAAa,GACbX,UAAW,IAAIA,GACfY,aAAc,GACdC,gBAAiB,KACjBC,oBAAqB,EACrBC,mBAAoB,KACpBC,eAAgB,KAChB7J,KAAM,CAAC,iDAAiDmI,cAEtD2B,GAAY,IAAA9S,MAAI,GAChB+S,GAAqB,IAAA/S,MAAI,GACzBgT,GAAmB,IAAAhT,KAAI,MACvBiT,GAAc,IAAAjT,MAAI,GAClBkT,GAAc,IAAAlT,KAAI,MAClBmT,GAAe,IAAAnT,MAAI,GACnBoT,GAAgB,IAAApT,MAAI,GACpBqT,GAAgB,IAAArT,MAAI,GACpBsT,GAAkB,IAAArI,UAAS,IAAOmI,EAActf,MAAQ,EAAI,GAC5Dyf,GAAkB,IAAAtI,UAAS,KAAM,CAAG,4BAA6BxI,OAAO6Q,EAAgBxf,UACxF0f,GAAkB,IAAAxT,KAAI,IACtByT,GAAoB,IAAAzT,KAAI,MACxB0T,GAAmB,IAAA1T,KAAI,MACvB2T,GAAoB,IAAA1I,UAAS,IAAMwI,EAAkB3f,OAASie,EAAYje,MAAMse,gBAChFwB,GAAmB,IAAA3I,UAAS,IAAMyI,EAAiB5f,OAASie,EAAYje,MAAMue,eACpF,IAAIwB,EAAoB,KACpBC,EAAmB,EAEvB,MAAMC,EAAe,CAAEC,iBAAkB,EAAGC,eAAgB,GAEtDC,EAAiBC,GAAOjY,KAAKkY,IAAI,GAAIlY,KAAKwN,MAAMyK,EAAKb,EAAgBxf,QACrEugB,EAAQF,GAAO,IAAIG,QAASC,GAAYC,WAAWD,EAASL,EAAcC,KAC1EM,EAAmBN,IAAO,CAAGO,mBAAoB,GAAGR,EAAcC,SAClEQ,EAAiB,CAAC/I,EAAOuI,KAAO,IAC/BvI,EACH8I,mBAAoB,GAAGR,EAAcC,SAEnCS,EAAiB,CACnBC,SAAU,4DACVC,MAAO,4DACPC,OAAQ,6DACRC,KAAM,6DACNC,KAAM,6DAEJC,EAAsBC,GAAS3B,EAAgB1f,MAAMG,OAAQmhB,GAAUA,EAAMD,OAASA,GACtFE,EAAoB,CAAC9M,EAAQnV,IAChB,SAAXA,EACOmV,EACO,WAAXA,EAAsB,QAAU,SAErC+M,EAAmB,KACrB7B,EAAkB3f,MAAQ,KAC1B4f,EAAiB5f,MAAQ,KACrB+f,IACA0B,aAAa1B,GACbA,EAAoB,OAGtB2B,EAAoB,CAACjN,EAAQiC,EAAMiL,KACrC,MAAMC,EAAsB,WAAXnN,EAAsB+I,EAAYxd,MAAQ0H,EAAW1H,MAChE6hB,EAAsB,WAAXpN,EAAsB/M,EAAW1H,MAAQwd,EAAYxd,MACtE,IAAI8hB,ECvMT,SAA6Bnb,GAClC,MAAM,SAAEgb,EAAQ,KAAEjL,EAAI,cAAEqL,EAAa,eAAEC,GAAmBrb,EAG1D,IAAIsb,EAAQN,EAAWjL,EAAK5R,YAAYC,WAAa2R,EAAK5R,YAAYE,SAGtE,MAAMkd,EAAeH,EAAclb,KAAK0K,GAAKA,EAAE7M,OAASJ,EAAWmP,SAASlM,QAAU,EAStF,OARI2a,EAAe,IAAGD,GAASC,GAG/BD,GAASD,EAAe9B,iBAGxB+B,GAASD,EAAe7B,eAEjB/X,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAMqM,GAChC,CDsL6BE,CAAoB,CACjCR,WACAjL,OACAqL,cAAeH,EAASva,QACxB2a,eAAgB/B,IAMpB,MAHgB,2BAAZvJ,EAAKjS,KACLqd,GAAc1Z,KAAKwN,MAAM3B,GAAgB4N,EAAU,EAAG3b,MAAQ,IAE3DkC,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAMkM,KAE5BM,EAAsB,CAAC3N,EAAQiC,EAAMiL,IAChCD,EAAkBjN,EAAQiC,EAAMiL,GAOrCU,EAA2B,KAC7B1C,EAAkB3f,MAAQ,MAWxBsiB,EAA2B,KACzBvC,IACA0B,aAAa1B,GACbA,EAAoB,MAExBJ,EAAkB3f,MAAQ,MAExBuiB,GAAqB,CAAClB,EAAMrhB,EAAO6F,EAAM2c,EAAO,OAClD,MAAM5N,EAASxM,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAM5V,IACtC,GAAI4U,GAAU,EACV,OACJ,MAAMnQ,IAAOub,EAEPyC,EAAWrC,EAAc,MAC/BV,EAAgB1f,MAAMgR,KAAK,CACvBvM,KACA4c,OACA9X,KAAM,GAAGiZ,IAAO5N,IAChB8N,WAAY5B,EAAejb,GAC3B8c,WAAYva,KAAKwN,MAA8B,KAAvBxN,KAAKC,SAAW,KACxCua,UAAW,GAAKxa,KAAKwN,MAAsB,GAAhBxN,KAAKC,UAChCoa,aAEJ/B,WAAW,KACPhB,EAAgB1f,MAAQ0f,EAAgB1f,MAAMG,OAAQmhB,GAAUA,EAAM7c,KAAOA,IAC9Ege,IAEDI,GAAOpU,IACTwP,EAAYje,MAAMkV,KAAO,CAACzG,KAAQwP,EAAYje,MAAMkV,MAAM3T,MAAM,EAAG,KAEvE,IAAAuhB,WAAU,KACNxD,EAActf,MAAoD,MAA5C+iB,aAAaC,QAAQjG,OAE/C,IAAAnE,OAAM0G,EAAgB2D,IAClBF,aAAaG,QAAQnG,GAAmBkG,EAAU,IAAM,OAE5D,MAAME,GAAY,CAACC,EAAOC,EAAaC,KACnC,IAAI1c,EAAO,IAAIyc,GACXE,EAAU,IAAID,GAClB,MAAME,EAAQ,GACd,IAAK,IAAInS,EAAI,EAAGA,EAAI+R,EAAO/R,IAAK,CAC5B,GAAoB,IAAhBzK,EAAK2B,OAAc,CACnB,GAAuB,IAAnBgb,EAAQhb,OACR,MACJ3B,EAAO,IAAI2c,GAAS9E,KAAK,IAAMrW,KAAKC,SAAW,IAC/Ckb,EAAU,GACVV,GAAI,iDACR,CACA,MAAMnM,EAAO9P,EAAK6c,MACd/M,GACA8M,EAAMxS,KAAK0F,EACnB,CACA,MAAO,CAAE8M,QAAOE,QAAS9c,EAAM+c,WAAYJ,IAEzCK,GAAiBlN,IACnB,MAAME,EAAWqH,EAAYje,MAAM8e,mBAC7B+E,EAAajN,IAAaF,EAGhC,MAAO,CACHmN,EAAa,+FAAiG,GAH5FjN,IAAaiN,EAIf,8CAAgD,kDAH9C5F,EAAYje,MAAMme,QAAU3Z,EAAYsf,cAIvCD,EAAyD,iBAA5C,6CAmDxC,IAAAjL,OAAM,IAAMqF,EAAYje,MAAMme,MAAQA,IAClC,GAAIA,IAAU3Z,EAAY4Z,WAAY,CAElC,GAAIH,EAAYje,MAAMke,KAAO,EACzB,IAAK,MAAOmD,EAAM0C,EAAOhd,IAAU,CAAC,CAAC,SAAU,KAAMyW,GAAc,CAAC,QAAS,KAAM9V,IAAc,CAC7F,MAAM4C,EAASuK,GAAmB9N,EAAM/G,OACxC,IAAIgkB,EAAgB1Z,EAAO4K,KAE3B,MAAM+O,EAAU3Z,EAAO4K,KAAKrO,KAAMya,GAAUA,EAAM4C,SAAS,SAC3D,GAAID,EAAS,CACT,MAAME,EAAYF,EAAQhjB,MAAM,oBAC1BqU,EAAa6O,EAAYzhB,OAAOyhB,EAAU,IAAM,EAClD7O,EAAa,GAAKrB,GAAgBlN,EAAM/G,MAAO,EAAGqG,SAAW,GAC7DsO,GAAmB5N,EAAM/G,MAAO,EAAGqG,QAAS,GAC5CiE,EAAOwK,UAAYQ,EACnB0O,EAAgB1Z,EAAO4K,KAAK/U,OAAQmhB,GAAUA,IAAU2C,GACxDpB,GAAI,0CAA0CkB,eAAmBzO,oBAE5DA,EAAa,GAClBiN,GAAmBlB,EAAM/L,EAAY,QAAS,IAEtD,CACA,GAAwB,IAApBhL,EAAOwK,SAAgB,CACvB,MAAMsP,EAAWrd,EAAM/G,MAAMgH,GAC7BD,EAAM/G,MAAMgH,GAAKoB,KAAKkY,IAAI,EAAGlY,KAAKkM,IAAIvN,EAAM/G,MAAMiH,MAAOF,EAAM/G,MAAMgH,GAAKsD,EAAOwK,WACjF,MAAMuP,EAAUtd,EAAM/G,MAAMgH,GAAKod,EAC7BC,EAAU,GACV9B,GAAmBlB,EAAMgD,EAAS,OAAQ,IAElD,CACA,GAAwB,IAApB/Z,EAAOyK,SAAgB,CACvB,MAAMuP,EAAWvd,EAAM/G,MAAMkH,GAC7BH,EAAM/G,MAAMkH,GAAKkB,KAAKkY,IAAI,EAAGvZ,EAAM/G,MAAMkH,GAAKoD,EAAOyK,UACrD,MAAMwP,EAAUxd,EAAM/G,MAAMkH,GAAKod,EAC7BC,EAAU,GACVhC,GAAmBlB,EAAMkD,EAAS,OAAQ,IAElD,CACIja,EAAO0K,WAAa,IACpBjO,EAAM/G,MAAMgH,GAAKoB,KAAKkY,IAAI,EAAGvZ,EAAM/G,MAAMgH,GAAKsD,EAAO0K,aACzD,IAAK,MAAMwP,KAAKR,EACZnB,GAAI,0CAA0CkB,MAAUS,WAEhE,CAEJ9D,WAAW,KA/Dfc,IACAvD,EAAYje,MAAMme,MAAQ3Z,EAAYigB,WACtCxG,EAAYje,MAAM8e,mBAAqB,KACvCb,EAAYje,MAAM4e,gBAAkB,KACpCI,EAAUhf,OAAQ,EAClBkf,EAAiBlf,MAAQ,KACzBif,EAAmBjf,OAAQ,OAC3B0gB,WAAW,KACP,MAAMgE,EAAQtc,KAAKwN,MAAMxN,KAAKC,UAAYmV,EAAYxd,MAAMoH,QAAUoW,EAAYxd,MAAMmH,QAAU,IAAMqW,EAAYxd,MAAMmH,QACpHwd,EAAQvc,KAAKwN,MAAMxN,KAAKC,UAAYX,EAAW1H,MAAMoH,QAAUM,EAAW1H,MAAMmH,QAAU,IAAMO,EAAW1H,MAAMmH,QACvH6X,EAAUhf,OAAQ,EAClBie,EAAYje,MAAMse,eAAiBoG,EACnCzG,EAAYje,MAAMue,cAAgBoG,EAClC1G,EAAYje,MAAMme,MAAQ3Z,EAAYigB,WACtC5B,GAAI,YAAY6B,aAAiBC,OAClCvE,EAAc,QAgDiBA,EAAc,KAChD,GACD,CAAErH,WAAW,KAEhB,IAAAH,OAAM,CAAC,IAAMqF,EAAYje,MAAMme,MAAOa,GAAY,EAAEb,EAAOpG,MACvD,GAAIoG,IAAU3Z,EAAYigB,aAAe1M,EAAS,CAE9C,MAAM6M,EAnGd,WAEI,GAAI3Q,GAAgBvM,EAAW1H,MAAO,EAAGwT,MAAQ,EAE7C,OADAqP,GAAI,mDACG7E,EAEX,GAA2C,IAAvCC,EAAYje,MAAM+d,UAAUxV,OAAc,CAC1C,GAA8C,IAA1C0V,EAAYje,MAAM2e,aAAapW,OAC/B,OAAOyV,EACXC,EAAYje,MAAM+d,UAAY,IAAIE,EAAYje,MAAM2e,cAAcF,KAAK,IAAMrW,KAAKC,SAAW,IAC7F4V,EAAYje,MAAM2e,aAAe,EACrC,CACA,GAAIvB,EAAU,CAEV,MAAMzW,EAAM,CACRe,WAAYA,EAAW1H,MACvBwd,YAAaA,EAAYxd,MACzB4G,KAAMqX,EAAYje,MAAM+d,UACxBG,KAAMD,EAAYje,MAAMke,KACxBvW,MAAO2V,GAEX,OAAOF,EAAS3V,WAAWd,EAC/B,CAEA,MAAMke,EAAMzc,KAAKwN,MAAMxN,KAAKC,SAAW4V,EAAYje,MAAM+d,UAAUxV,QACnE,OAAO0V,EAAYje,MAAM+d,UAAU8G,EACvC,CAyEsBC,IACR,MAAEtB,EAAK,QAAEE,EAAO,WAAEC,GAAeR,GAAU,EAAGlF,EAAYje,MAAMid,WAAYgB,EAAYje,MAAM0e,aACpGT,EAAYje,MAAM4e,gBAAkBgG,EACpC3G,EAAYje,MAAMwe,WAAagF,EAC/BvF,EAAYje,MAAMid,WAAayG,EAC/BzF,EAAYje,MAAM0e,YAAciF,EAChC1F,EAAYje,MAAMme,MAAQ3Z,EAAYsf,YAC1C,IAGJ,MAuBMiB,GAAiB,KACf9G,EAAYje,MAAMme,QAAU3Z,EAAYsf,cAEvC7F,EAAYje,MAAM4e,kBAEvB4C,IACAvD,EAAYje,MAAM8e,mBAAqBd,EACvCC,EAAYje,MAAMme,MAAQ3Z,EAAYwgB,WACtCnC,GAAI,oDAeFoC,GAAgB1W,MAAO2W,EAAON,EAAOO,EAAOC,KAC9C,MAAMC,GAbWC,EAaeJ,EAAMxgB,KAbjB6gB,EAauBX,EAAMlgB,KAZ9C4gB,IAAOjhB,EAASM,UAAY4gB,IAAOlhB,EAASM,UAE5C2gB,IAAOjhB,EAASsB,OAAS4f,IAAOlhB,EAASsB,OAEzC2f,IAAOjhB,EAAS4B,QAAUsf,IAAOlhB,EAASM,UAAY4gB,IAAOlhB,EAASsB,QAEtE4f,IAAOlhB,EAAS4B,QAAUqf,IAAOjhB,EAASM,UAAY2gB,IAAOjhB,EAASsB,QAP1D,IAAC2f,EAAIC,EAcrB,MAAMC,EAAmBZ,EAAMngB,KAAOuZ,EAAUvZ,GAC1CghB,EAAcrD,EAAoB,SAAU8C,EAAOC,GACnDO,EAActD,EAAoB,QAASwC,EAAOQ,GAClDO,EAAmBC,IACrB,MAAMvQ,EAAapB,GAAgBuJ,EAAYxd,MAAO,EAAGkG,MACrDmP,GAAc,IAElBX,GAAa8I,EAAYxd,MAAO,EAAGkG,MACnC2c,GAAI,iCAAiC+C,YAAiBvQ,iBAEtDmQ,GACAG,EAAgB,WAEpB,IAAIE,GAAW,EACXC,GAAW,EACXC,EAAY,GACZC,EAAc,KACdX,GACA1F,EAAkB3f,MAAQylB,EAC1B7F,EAAiB5f,MAAQ0lB,EACzBzG,EAAmBjf,OAAQ,QACrBugB,EAAK,KACXpB,EAAYnf,OAAQ,EACpB0gB,WAAW,IAAOvB,EAAYnf,OAAQ,EAAQogB,EAAc,MACxD8E,EAAMxgB,OAASkgB,EAAMlgB,KACjB+gB,EAAcC,GACdI,GAAW,EACXE,EAAc,SACdD,EAAY,SAEPL,EAAcD,GACnBI,GAAW,EACXG,EAAc,QACdD,EAAY,UAGZF,GAAW,EACXC,GAAW,EACXE,EAAc,MACdD,EAAY,SAGXb,EAAMxgB,OAASL,EAAS4B,MACzByf,EAAcD,GACdK,GAAW,EACXE,EAAc,SACdD,EAAY,UAGZF,GAAW,EACXG,EAAc,QACdD,EAAY,SAGXnB,EAAMlgB,OAASL,EAAS4B,QACzBwf,EAAcC,GACdG,GAAW,EACXG,EAAc,QACdD,EAAY,WAGZD,GAAW,EACXE,EAAc,SACdD,EAAY,YAGA,WAAhBC,EACA9G,EAAiBlf,MAAQ,QACJ,UAAhBgmB,EACL9G,EAAiBlf,MAAQ,SACJ,QAAhBgmB,IACL9G,EAAiBlf,MAAQ,QAEzB+lB,GACAlD,GAAI,+BAA+BkD,YAEnB,WAAhBC,GACAL,EAAgB,eAEdpF,EAAK,KACXtB,EAAmBjf,OAAQ,EAC3BwhB,YAGMjB,EAAK,KACXsC,GAAI,qDACJgD,GAAW,EACXC,GAAW,GAGf,MAAMG,EAAc,CAACxR,EAAQiC,EAAMiL,KAC/B,MAAMC,EAAsB,WAAXnN,EAAsB+I,EAAYxd,MAAQ0H,EAAW1H,MAChE6hB,EAAsB,WAAXpN,EAAsB/M,EAAW1H,MAAQwd,EAAYxd,MAChE+jB,EAAmB,WAAXtP,EAAsB,KAAO,KACrCyR,EAA0B,WAAXzR,EAAsB,QAAU,SAE/CqN,EAAaJ,EAAkBjN,EAAQiC,EAAMiL,GAC7CwE,EAAwB,KAC1B,GAAIzP,EAAKhS,OAASL,EAASuB,UAAY8Q,EAAKjS,KAAOuZ,EAAUvZ,GACzD,OACJ,MAAM2hB,EAAYhe,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAMkM,IAC1B,WAAXrN,EACIwJ,EAAYje,MAAMse,iBAAmB8H,IACrCnI,EAAYje,MAAMse,eAAiB8H,EACnCvD,GAAI,gDAAgDuD,aAGnDnI,EAAYje,MAAMue,gBAAkB6H,IACzCnI,EAAYje,MAAMue,cAAgB6H,IAGpCC,EAAmB,KACrB,IAAIrS,GAAY,EAChB,IAAK,MAAMsS,KAAM5P,EAAKjR,YAAa,CAC/B,MAAM8gB,EAAYD,EAAGhnB,QAAU,OACzBknB,EAA6B,SAAdD,EAAuB3E,EAAWC,EACjD4E,EAAalF,EAAkB9M,EAAQ8R,GAC7C,GAAgB,SAAZD,EAAGzgB,KAAiB,CACpB,MAAM6gB,EAA8B,gBAAjBJ,EAAGtgB,UAChBoC,KAAKwN,MAAMkM,GAAcwE,EAAGnhB,OAAS,IACrCiD,KAAKwN,MAAM0Q,EAAGngB,YAAc,GAC5BwgB,EAAWH,EAAaxf,GAC9Bwf,EAAaxf,GAAKoB,KAAKkM,IAAIkS,EAAavf,MAAOuf,EAAaxf,GAAK0f,GACjE,MAAME,EAAaJ,EAAaxf,GAAK2f,EACjCC,EAAa,GACbrE,GAAmBkE,EAAYG,EAAY,OAAQ,KAEvD/D,GAAI,gCAAgCkB,KAASrN,EAAK1U,YAAY0kB,gBAC9D1S,GAAY,CAChB,MACK,GAAgB,eAAZsS,EAAGzgB,KAAuB,CAC/B,MAAM0B,EAA0B,gBAAjB+e,EAAGtgB,UACZoC,KAAKwN,MAAMkM,GAAcwE,EAAGnhB,OAAS,IACrCiD,KAAKwN,MAAM0Q,EAAGngB,YAAc,GAClCgO,GAAYqS,EAAcF,EAAGxgB,WAAYyB,GACrC+e,EAAGxgB,aAAe,EAAGC,OACrBwc,GAAmBkE,EAAYlf,EAAQ,SAAU,KAErDsb,GAAI,iCAAiCkB,KAASrN,EAAK1U,YAAYuF,MAAWwL,GAAgBuT,EAAGxgB,aAAa9D,MAAQskB,EAAGxgB,qBACrHkO,GAAY,CAChB,MACK,GAAgB,iBAAZsS,EAAGzgB,KAAyB,CACjC,MAAMghB,EAAiC,gBAAjBP,EAAGtgB,UACnBoC,KAAKwN,MAAMkM,GAAcwE,EAAGnhB,OAAS,IACrCiD,KAAKwN,MAAM0Q,EAAGngB,YAAc,GAC5B2gB,EAAWN,EAAatf,GAC9Bsf,EAAatf,GAAKkB,KAAKkY,IAAI,EAAGkG,EAAatf,GAAK2f,GAChD,MAAME,EAAgBP,EAAatf,GAAK4f,EACpCC,EAAgB,GAChBxE,GAAmBkE,EAAYM,EAAe,OAAQ,KAE1DlE,GAAI,+BAA+BkB,KAASrN,EAAK1U,YAAY6kB,gBAC7D7S,GAAY,CAChB,MACK,GAAgB,YAAZsS,EAAGzgB,KAAoB,CAC5B,MAAMmhB,EAAiBV,EAAGW,cAAgBX,EAAGW,aAAa1e,OAAS,EAC7D+d,EAAGW,aACHT,EAAanf,QAAQxE,IAAKgb,GAAQA,EAAInZ,MAC5C,IAAK,MAAMwiB,KAAMF,EACbtS,GAAa8R,EAAcU,GAE/BrE,GAAI,+BAA+BkB,KAASrN,EAAK1U,uBACjDgS,GAAY,CAChB,CACJ,CACA,OAAOA,GAEX,GAAI0C,EAAKhS,OAASL,EAASuB,SAAU,CACjC,GAAgB,sBAAZ8Q,EAAKjS,GAA4B,CACjC,MAAM0iB,EAASlT,GAAgB2N,EAAU,EAAG1b,MAW5C,OAVAigB,SACIgB,EAAS,GACTzS,GAAakN,EAAU,EAAG1b,MAC1B0b,EAAS1a,IAAMigB,EACf5E,GAAmB9N,EAAQ0S,EAAQ,OAAQ,KAC3CtE,GAAI,+BAA+BkB,KAASrN,EAAK1U,YAAYmlB,aAAkBA,iBAG/EtE,GAAI,+BAA+BkB,KAASrN,EAAK1U,wBAGzD,CAEAmkB,IACkBE,MAGE,OAAZ3P,EAAKjS,KACLmd,EAAS1a,IAAM,EACfqb,GAAmB9N,EAAQ,EAAG,OAAQ,MAE1CoO,GAAI,GAAGkB,QAAYrN,EAAK1U,SAEhC,MACK,GAAI0U,EAAKhS,OAASL,EAAS4B,MAAO,CACnC,MAAMmhB,EAAuBnT,GAAgB4N,EAAU,EAAG3b,MAE1D,IAAImhB,EAAqB3Q,EACzB,MAAM4Q,EAA2B,qBAAZ5Q,EAAKjS,GACpB2D,KAAKwN,MAAmB,GAAbkM,GAAoBsF,EACnB,oBAAZ1Q,EAAKjS,GACD2D,KAAKwN,MAAMwR,GACX,KACW,OAAjBE,IACAD,EAAqB,IACd3Q,EACHzR,YAAa,CAAEC,KAAM,QAASlF,MAAOoI,KAAKwN,MAAM0R,MAGxD,MAAM,OAAEC,EAAQrS,KAAMsS,GChjBnC,SAA8B7gB,GACnC,MAAMuO,EAAiB,GACvB,IAAIqS,EAhBC,SAA4BzF,EAAoBpL,GACrD,MAAMa,EAAKb,EAAKzR,YAChB,OAAQsS,EAAGrS,MACT,IAAK,WAAY,OAAO4c,GAAcvK,EAAGpS,OAAS,IAAMoS,EAAGnS,eAAiB,GAC5E,IAAK,QAAY,OAAOmS,EAAGvX,OAAS,EACpC,IAAK,QAAY,OAAQuX,EAAGC,WAAa,GAAKsK,GAAcvK,EAAGpS,OAAS,IAAMoS,EAAGnS,eAAiB,GAClG,QAAiB,OAAO,EAE5B,CAQeqiB,CAAmB9gB,EAAImb,WAAYnb,EAAI+P,MACpDxB,EAAKlE,KAAK,SAAS5I,KAAKwN,MAAM2R,MAE9B,MAAMG,EAAe/gB,EAAI+gB,eAAgB,EAGnCC,EAAOhhB,EAAIihB,gBAAgB/gB,KAAK0K,GAAKA,EAAE7M,OAASJ,EAAWoP,OAAOnM,QAAU,EAGlF,GAFIogB,EAAO,IAAKJ,GAAUI,EAAMzS,EAAKlE,KAAK,SAAS2W,MAE/CD,EAEF,OADAxS,EAAKlE,KAAK,cACH,CAAEuW,OAAQnf,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAM2R,IAAUG,cAAc,EAAMxS,QAIxE,MAAM2S,EAAOlhB,EAAImhB,gBAAgBjhB,KAAK0K,GAAKA,EAAE7M,OAASJ,EAAW8B,aAAamB,QAAU,EACpFsgB,EAAO,IAAKN,GAAUM,EAAM3S,EAAKlE,KAAK,SAAS6W,MAG/ClhB,EAAImhB,gBAAgBnc,KAAK4F,GAAKA,EAAE7M,OAASJ,EAAW+B,SAAWkL,EAAEhK,OAAS,IAC5E2N,EAAKlE,KAAK,2BAIZ,MAAM+W,EAAQphB,EAAImhB,gBAAgBjhB,KAAK0K,GAAKA,EAAE7M,OAASJ,EAAWyB,QAAQwB,QAAU,EAGpF,OAFIwgB,EAAQ,GAAK7S,EAAKlE,KAAK,YAAY+W,SAEhC,CAAER,OAAQnf,KAAKkY,IAAI,EAAGlY,KAAKwN,MAAM2R,IAAUG,cAAc,EAAOxS,OACzE,CDkhBsD8S,CAAqB,CACnDlG,aACApL,KAAM2Q,EACNO,gBAAiBhG,EAASva,QAC1BygB,gBAAiBjG,EAASxa,QAC1B2a,eAAgB/B,KAEd,aAAEgI,EAAc/S,KAAMgT,GCphBzC,SAA6B5oB,EAAqBioB,EAAgBG,GACvE,MAAMxS,EAAiB,GACvB,IAAKwS,EAAc,CACjB,GAAI1T,GAAU1U,EAAQgF,EAAW+B,UAAYkhB,EAAS,EAGpD,OAFA5S,GAAmBrV,EAAQgF,EAAW+B,SACtC6O,EAAKlE,KAAK,cACH,CAAEiX,aAAc,EAAG/S,QAE5B,MAAMiT,EAAKrU,GAAWxU,EAAQgF,EAAWyB,OACzC,GAAIoiB,GAAMA,EAAG5gB,OAAS,GAAKggB,EAAS,EAAG,CACrC,MAAMzgB,EAAIsB,KAAKkM,IAAI6T,EAAG5gB,OAAQggB,GAC9BY,EAAG5gB,QAAUT,EAAGygB,GAAUzgB,EACtBqhB,EAAG5gB,QAAU,GAAGmN,GAAapV,EAAQgF,EAAWyB,OACpDmP,EAAKlE,KAAK,UAAUlK,SAASygB,KAC/B,CACF,CACA,MAAMa,EAAShgB,KAAKkM,IAAIiT,EAAQjoB,EAAO0H,IAGvC,OAFA1H,EAAO0H,IAAMohB,EACblT,EAAKlE,KAAK,KAAKoX,YAAiB9oB,EAAO0H,MAAM1H,EAAO2H,WAC7C,CAAEghB,aAAcG,EAAQlT,OACjC,CDggB8DmT,CAAoBxG,EAAU0F,GAAQ,GAEhF,GADA1E,GAAI,GAAGkB,KAASrN,EAAK1U,UAAU8f,6CAAsDmG,gBACjFA,EAAe,EAAG,CAClB,MAAMK,EAAa5R,EAAKhS,OAASL,EAASsB,MAAQ,QAAU,WAC5D4c,GAAmB2D,EAAc+B,EAAcK,EAAY,IAC/D,CAEAjC,IACA,IAAK,MAAM9O,IAAM,IAAIiQ,KAAYU,GAC7BrF,GAAI,0CAA0CtL,WAEtD,GAEEgR,EAAQ,GACd,IAAIC,EAAsB,KAG1B,GAFI3C,GACA0C,EAAMvX,KAAK,CAAEyD,OAAQ,SAAUiC,KAAMwO,EAAOxgB,KAAMwgB,EAAMxgB,KAAMid,SAAUwD,IACxEW,EAAU,CACV,MAAM2C,EAAc,CAAEhU,OAAQ,QAASiC,KAAMkO,EAAOlgB,KAAMkgB,EAAMlgB,KAAMid,SAAUyD,GAC5EF,EAAM7f,OAAOC,MAEbkjB,EAAsBC,EAGtBF,EAAMvX,KAAKyX,EAEnB,CACA,MAAMC,EAAgBC,GACdA,IAAMtkB,EAASuB,SACR,EACP+iB,IAAMtkB,EAASsB,MACR,EACPgjB,IAAMtkB,EAASM,SACR,EACJ,EAEX4jB,EAAM9J,KAAK,CAACmK,EAAGC,IAAMH,EAAaG,EAAEnkB,MAAQgkB,EAAaE,EAAElkB,OAC3D,IAAK,MAAMokB,KAAUP,EACjBtC,EAAY6C,EAAOrU,OAAQqU,EAAOpS,KAAMoS,EAAOnH,gBACzCpB,EAAK,KAGf,GAAI2E,EAAM7f,OAAOC,MAAO,CACpB,GAAI4f,EAAM7f,OAAOG,KAAM,CACnB,MAAM,MAAEge,EAAK,QAAEE,EAAO,WAAEC,GAAeR,GAAU,EAAGlF,EAAYje,MAAMid,WAAYgB,EAAYje,MAAM0e,aACpGT,EAAYje,MAAMid,WAAayG,EAC/BzF,EAAYje,MAAM0e,YAAciF,EAChC1F,EAAYje,MAAMwe,WAAa,IAAIP,EAAYje,MAAMwe,cAAegF,EACxE,CACA,GAAIvF,EAAYje,MAAMwe,WAAWjW,OAAS,GAAKiV,EAAYxd,MAAMgH,GAAK,GAAKU,EAAW1H,MAAMgH,GAAK,EAI7F,OAHAiX,EAAYje,MAAM8e,mBAAqB,KACvCb,EAAYje,MAAMme,MAAQ3Z,EAAYsf,kBACtCjB,GAAI,wDAIJ2F,GAAuBhL,EAAYxd,MAAMgH,GAAK,GAAKU,EAAW1H,MAAMgH,GAAK,IACzEif,EAAYuC,EAAoB/T,OAAQ+T,EAAoB9R,KAAM8R,EAAoB7G,gBAChFpB,EAAK,KAEnB,CAEA,MAAMwI,EAAWrT,GAAiB8H,EAAYxd,OACxCgpB,EAAWtT,GAAiBhO,EAAW1H,OAC7C,IAAK,MAAMwkB,IAAK,IAAIuE,KAAaC,GAC7BnG,GAAI,0CAA0C2B,YAGlDvG,EAAYje,MAAM0e,YAAc,IAAIT,EAAYje,MAAM0e,eAAgBT,EAAYje,MAAMwe,YACxFP,EAAYje,MAAMwe,WAAa,GAC/BP,EAAYje,MAAMke,MAAQ,EAC1BD,EAAYje,MAAMme,MAAQ3Z,EAAY4Z,YAkB1C,OAfA,IAAAxF,OAAM,IAAMqF,EAAYje,MAAMme,MAAQA,IAC9BA,IAAU3Z,EAAYwgB,YACtB/G,EAAYje,MAAM8e,oBAClBb,EAAYje,MAAM4e,kBACjBK,EAAmBjf,OACpBilB,GAAchH,EAAYje,MAAM8e,mBAAoBb,EAAYje,MAAM4e,gBAAiBX,EAAYje,MAAMse,eAAgBL,EAAYje,MAAMue,kBAInJ,IAAA3F,OAAM,CAAC,IAAM4E,EAAYxd,MAAMgH,GAAI,IAAMU,EAAW1H,MAAMgH,IAAK,EAAEiiB,EAAKC,MAC9DD,GAAO,EACP/L,EAAK,aAAa,EAAOM,EAAYxd,OAChCkpB,GAAO,GACZhM,EAAK,aAAa,EAAMM,EAAYxd,SAErC,CAACyX,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C/U,OAAO,oBAAgB,CAAC,yGAAyG,WAAOwc,GAAe,gBAAkB,KACzKrH,OAAO,qBAAgB,WAAO2H,KAC/B,EACC,wBAAoB,gBACpB/H,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,iGAAmG,MAAO,IAC1K+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CACnD/U,MAAO,gFACPmV,MAAO,CAAE,mBAAoB,0EAC9B,MAAO,KACV,wBAAoB,yBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BnV,MAAO,gJACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYyH,EAAarf,QAAS,WAAOqf,KAC9E,EACC,kBAAa,WAAO3M,IAAY,CAAE/P,MAAO,WACzC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,KAAM,MAAO,OAEtE,WAAO2H,KACD,kBAAc,wBAAoB,MAAO,GAAY,EACpD,wBAAoB,QAAS,GAAY,EACrC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB3H,EAAO,KAAOA,EAAO,GAAME,IAAY,WAAO0H,GAAiB,EAAgBtf,MAAQ4X,EAAS,MACvHlT,KAAM,WACN/B,MAAO,uBACR,KAAM,KAAuB,CAC5B,CAAC,kBAAiB,WAAO2c,MAE7B5H,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,KAAM,YAAa,UAG/E,wBAAoB,QAAQ,MAEtC,wBAAoB,wBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,gCACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,wBACnB,WAAOuG,GAA4B,kBAC7B,kBAAc,wBAAoB,MAAO,GAAY,EACpD,wBAAoB,MAAO,GAAY,CACnCvG,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,sGAAwG,UAAW,KACnL,wBAAoB,MAAO,GAAY,EACnC,iBAAawmB,GAAa,CACtBzS,MAAM,WAAOuH,GAAaW,gBAC1B,WAAY,GACZjI,SAAU,IACX,KAAM,EAAe,CAAC,iBAInC,wBAAoB,QAAQ,IAClC,wBAAoB,iBAClB,WAAOsI,IASH,wBAAoB,QAAQ,KAR3B,kBAAc,wBAAoB,MAAOzF,GAAY,EACpD,iBAAa4P,GAAa,CACtBppB,OAAO,WAAO8f,GACd/H,SAAS,WAAOiH,GAChBzc,MAAO,MACPD,KAAM,MACP,KAAM,EAAe,CAAC,QAAS,gBAG1C,wBAAoB,qBACpB,wBAAoB,MAAOmX,GAAa,CACpC/B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,6EAA+E,MAAO,KACtJ,wBAAoB,MAAO+W,GAAa,EACpC,kBAAa,WAAO/G,IAAQ,CAAEhQ,MAAO,8BACrC+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,oEAAsE,MAAO,SAGrJ,wBAAoB,uBACpB,wBAAoB,MAAOgX,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,OAAQ,MAAM,sBAAiB,WAAOyD,IAAoB,MAElF,wBAAoB,MAAOxD,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYuH,EAAmB,SAAWiI,KACtF,kBAAc,wBAAoB,MAAO,CAC7C7pB,IAAK6pB,EAAM5kB,GACX9B,OAAO,oBAAgB,CAAC,oEAAqE0mB,EAAM3G,aACnG5K,OAAO,oBAAgB,CACnBwR,KAAM,cAAcD,EAAM1G,gBAC1B4G,IAAK,GAAGF,EAAMzG,cACd4G,kBAAmB,GAAGH,EAAM5G,iBAEjC,qBAAiB4G,EAAM9f,MAAO,KACjC,SAER,wBAAoB,mBACnB,WAAOuU,GAAc,IACf,kBAAc,wBAAoB,MAAOhE,GAAa,CACrDpC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,+BAAiC,OAAQ,KAC1G,wBAAoB,OAAQoX,IAAa,sBAAiB,WAAO+D,IAAc,OAEjF,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,wBAAoB,MAAO9D,GAAa,CACpCtC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,0CAA4C,MAAO,KACpH,wBAAoB,MAAOsX,GAAa,EACpC,wBAAoB,MAAO,CACvBtX,MAAO,gDACPmV,OAAO,oBAAgB+I,EAAe,CAAEnf,QAAU,WAAOgG,GAAYT,MAAQ,GAAK,WAAOS,GAAYV,IAAK,WAAOU,GAAYT,MAAS,IAAM,GAA7F,KAAqG,OACrJ,KAAM,MAEb,wBAAoB,OAAQiT,IAAa,sBAAiB,WAAOxS,GAAYV,IAAM,KAAM,sBAAiB,WAAOU,GAAYT,OAAQ,MAEzI,wBAAoB,aACpB,wBAAoB,MAAOkT,GAAa,CACpCzC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,2CAA6C,MAAO,KACrH,wBAAoB,MAAOyX,GAAa,EACpC,wBAAoB,MAAO,CACvBzX,MAAO,iDACPmV,OAAO,oBAAgB+I,EAAe,CAAEnf,MAAO,GAAG0G,KAAKkM,KAAK,WAAO5M,GAAYR,GAAK,GAAM,IAAK,SAAW,OAC3G,KAAM,MAEb,wBAAoB,OAAQmT,IAAa,sBAAiB,WAAO3S,GAAYR,IAAK,MAEtF,wBAAoB,iBACpB,wBAAoB,MAAOoT,GAAa,CACpC5C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,2CAA6C,MAAO,KACrH,wBAAoB,OAAQ4X,IAAa,sBAAiB,WAAO7S,GAAYP,SAAW,OAAQ,sBAAiB,WAAOO,GAAYN,SAAU,MAElJ,wBAAoB,oBACnB,WAAOM,GAAYL,QAAQkB,OAAS,IAC9B,kBAAc,wBAAoB,MAAOiS,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO9S,GAAYL,QAAS,CAACwW,EAAKxM,MAC1F,kBAAc,wBAAoB,OAAQ,CAC9C7R,IAAK6R,EACL1O,OAAO,oBAAgB,CAAC,yDAA0Dgb,EAAgBE,EAAIrW,YACtGiiB,MAAO/L,EAAqBG,EAAInZ,OACjC,EACC,sBAAiB,qBAAiB+Y,EAAcI,EAAInZ,OAAS,IAAK,GACjEmZ,EAAItW,OAAS,IACP,kBAAc,wBAAoB,WAAW,CAAE/H,IAAK,GAAK,EACxD,qBAAiB,KAAM,qBAAiBqe,EAAItW,QAAS,IACtD,MACD,wBAAoB,QAAQ,IACnC,GAAuBkT,MAC1B,UAEN,wBAAoB,QAAQ,QAG1C,wBAAoB,mCACpB,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,kBAClB,WAAOuE,IASH,wBAAoB,QAAQ,KAR3B,kBAAc,wBAAoB,MAAOtE,GAAa,EACrD,iBAAayO,GAAa,CACtBppB,OAAO,WAAO6f,GACd9H,SAAS,WAAOiH,GAChBzc,MAAO,OACPD,KAAM,MACP,KAAM,EAAe,CAAC,QAAS,gBAG1C,wBAAoB,qBACpBoV,EAAO,MAAQA,EAAO,KAAM,uBAAmB,6jBAAwkB,KACvnB,wBAAoB,wBACpB,wBAAoB,MAAOkD,GAAa,CACpClD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,iEAAmE,EAC/H,wBAAoB,OAAQ,KAAM,SAClC,KACJ,wBAAoB,MAAOkY,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYuG,EAAmB,UAAYiI,KACvF,kBAAc,wBAAoB,MAAO,CAC7C7pB,IAAK6pB,EAAM5kB,GACX9B,OAAO,oBAAgB,CAAC,oEAAqE0mB,EAAM3G,aACnG5K,OAAO,oBAAgB,CACnBwR,KAAM,cAAcD,EAAM1G,gBAC1B4G,IAAK,GAAGF,EAAMzG,cACd4G,kBAAmB,GAAGH,EAAM5G,iBAEjC,qBAAiB4G,EAAM9f,MAAO,KACjC,SAER,wBAAoB,mBACnB,WAAOqU,GAAe,IAChB,kBAAc,wBAAoB,MAAO9C,GAAa,CACrDpD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,+BAAiC,OAAQ,KAC1G,wBAAoB,OAAQoY,IAAa,sBAAiB,WAAO6C,IAAe,OAElF,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,wBAAoB,MAAO5C,GAAa,CACpCtD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,gDAAkD,MAAO,KAC1H,wBAAoB,MAAOsY,GAAa,EACpC,wBAAoB,MAAO,CACvBtY,MAAO,sDACPmV,OAAO,oBAAgB+I,EAAe,CAAEnf,QAAU,WAAO8b,GAAavW,MAAQ,GAAK,WAAOuW,GAAaxW,IAAK,WAAOwW,GAAavW,MAAS,IAAM,GAAhG,KAAwG,OACxJ,KAAM,MAEb,wBAAoB,OAAQiU,IAAa,sBAAiB,WAAOsC,GAAaxW,IAAM,KAAM,sBAAiB,WAAOwW,GAAavW,OAAQ,MAE3I,wBAAoB,aACpB,wBAAoB,MAAOkU,GAAa,CACpCzD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,2CAA6C,MAAO,KACrH,wBAAoB,MAAOyY,GAAa,EACpC,wBAAoB,MAAO,CACvBzY,MAAO,iDACPmV,OAAO,oBAAgB+I,EAAe,CAAEnf,MAAO,GAAG0G,KAAKkM,KAAK,WAAOkJ,GAAatW,GAAK,GAAM,IAAK,SAAW,OAC5G,KAAM,MAEb,wBAAoB,OAAQmU,IAAa,sBAAiB,WAAOmC,GAAatW,IAAK,MAEvF,wBAAoB,iBACpB,wBAAoB,MAAOoU,GAAa,CACpC5D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,2CAA6C,MAAO,KACrH,wBAAoB,OAAQ4Y,IAAa,sBAAiB,WAAOiC,GAAarW,SAAW,OAAQ,sBAAiB,WAAOqW,GAAapW,SAAU,MAEpJ,wBAAoB,oBACnB,WAAOoW,GAAanW,QAAQkB,OAAS,IAC/B,kBAAc,wBAAoB,MAAOiT,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOgC,GAAanW,QAAS,CAACwW,EAAKxM,MAC3F,kBAAc,wBAAoB,OAAQ,CAC9C7R,IAAK6R,EACL1O,OAAO,oBAAgB,CAAC,yDAA0Dgb,EAAgBE,EAAIrW,YACtGiiB,MAAO/L,EAAqBG,EAAInZ,OACjC,EACC,sBAAiB,qBAAiB+Y,EAAcI,EAAInZ,OAAS,IAAK,GACjEmZ,EAAItW,OAAS,IACP,kBAAc,wBAAoB,WAAW,CAAE/H,IAAK,GAAK,EACxD,qBAAiB,KAAM,qBAAiBqe,EAAItW,QAAS,IACtD,MACD,wBAAoB,QAAQ,IACnC,GAAuBkU,MAC1B,UAEN,wBAAoB,QAAQ,UAI9C,wBAAoB,qBACpB,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,yBACpB,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,4BACnB,WAAOsD,KACD,kBAAc,wBAAoB,MAAOrD,GAAa,EACrD,wBAAoB,4BACpB,wBAAoB,MAAO,CACvBjZ,OAAO,oBAAgB,CAAC,8DAA4F,YAA7B,WAAOuc,IAA+D,UAA7B,WAAOA,GAA+B,kBAAoB,uBAC1LpH,OAAO,oBAAgB6I,EAAgB,OACxC,EACC,iBAAayI,GAAa,CACtBppB,OAAO,WAAO6f,GACd9H,SAAS,EACTxV,MAAO,OACPD,KAAM,KACN,aAAc,6BACf,KAAM,EAAe,CAAC,WAC1B,IACH,wBAAoB,2BACpB,wBAAoB,MAAO,CACvBK,OAAO,oBAAgB,CAAC,6DAA2F,WAA7B,WAAOuc,IAA8D,UAA7B,WAAOA,GAA+B,kBAAoB,wBACxLpH,OAAO,oBAAgB6I,EAAgB,OACxC,EACC,iBAAayI,GAAa,CACtBppB,OAAO,WAAO8f,GACd/H,SAAS,EACTxV,MAAO,MACPD,KAAM,KACN,aAAc,6BACf,KAAM,EAAe,CAAC,WAC1B,OAEL,wBAAoB,QAAQ,MAEtC,wBAAoB,+BACpB,wBAAoB,MAAOuZ,GAAa,EACpC,wBAAoB,yBACpB,wBAAoB,MAAOC,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOmC,GAAaO,WAAY,CAAC9H,EAAMmO,MAC/F,kBAAc,wBAAoB,MAAO,CAC7CrlB,IAAK,GAAGkX,EAAKjS,MAAMogB,IACnBliB,OAAO,oBAAgB,CAAC,4CAA6CihB,GAAclN,KACnFoB,OAAO,oBAAgB6I,EAAgB,MACvC+I,aAAe9R,GAzzBR,CAAClB,IAC5BuH,EAAYje,MAAMme,QAAU3Z,EAAYsf,eAE5CnE,EAAkB3f,MAAQoiB,EAAoB,SAAU1L,EAAMuH,EAAYje,MAAMse,kBAszB9B,CAA4B5H,GACtDiT,aAActH,EACduH,oBAAsBhS,GAnzBf,CAAClB,IAC5BuH,EAAYje,MAAMme,QAAU3Z,EAAYsf,eAExC/D,GACA0B,aAAa1B,GACjBA,EAAoBW,WAAW,KAC3Bf,EAAkB3f,MAAQoiB,EAAoB,SAAU1L,EAAMuH,EAAYje,MAAMse,iBACjF,OA4yBsD,CAA4B5H,GAC7DmT,WAAYvH,EACZwH,cAAexH,GAChB,EACC,iBAAa6G,GAAa,CACtBzS,KAAMA,EACNC,UAAU,WAAOsH,GAAaE,SAAU,WAAO3Z,GAAasf,eAAgB,WAAO7F,GAAaa,qBAAuBpI,EACvHiB,QAAUC,GAloBjB,EAAClB,EAAMqT,KAC5B,GAAI9L,EAAYje,MAAMme,QAAU3Z,EAAYsf,aACxC,OACJ,GAAIiG,EAAU,GAAKA,GAAW9L,EAAYje,MAAMwe,WAAWjW,OACvD,OACJ,GAAI0V,EAAYje,MAAMwe,WAAWuL,IAAUtlB,KAAOiS,EAAKjS,GACnD,OACJ,GAAIiS,EAAKhS,OAASL,EAASsB,MAAO,CAC9B,GAAI6X,EAAYxd,MAAMkH,GAAKwP,EAAK7R,SAE5B,YADAge,GAAI,2CAGRrF,EAAYxd,MAAMkH,IAAMwP,EAAK7R,QACjC,CAEA,MAAOmlB,GAAU/L,EAAYje,MAAMwe,WAAWyL,OAAOF,EAAS,GACzDC,IAELxI,IACAvD,EAAYje,MAAM0e,YAAY1N,KAAKgZ,GACnC/L,EAAYje,MAAM8e,mBAAqBkL,EACvC/L,EAAYje,MAAMme,MAAQ3Z,EAAYwgB,aA6mBW,CAAkBtO,EAAMmO,IAC9C,KAAM,EAAe,CAAC,OAAQ,WAAY,aAC9C,GAA8C9I,MACjD,SAER,wBAAoB,wCACpB,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1BrZ,MAAO,yJACPgU,UAAU,WAAOsH,GAAaE,SAAU,WAAO3Z,GAAasf,aAC5DnM,QAASoN,IACV,SAAU,EAAe9I,KAC5B,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1BxZ,MAAO,gKACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYwH,EAAYpf,MAAQ,SACrE,EACC,kBAAa,WAAO4S,IAAS,CAAEjQ,MAAO,8BACtC,wBAAoB,OAAQyZ,IAAa,sBAAiB,WAAO6B,GAAahB,WAAW1U,QAAS,KAEtGmP,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,+KAAiL,QAAS,OAE9P,wBAAoB,MAAO0Z,GAAa,EACpC,wBAAoB,SAAU,CAC1B1Z,MAAO,4JACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYwH,EAAYpf,MAAQ,YACrE,EACC,kBAAa,WAAO6S,IAAS,CAAElQ,MAAO,0BACtC,wBAAoB,OAAQ2Z,IAAa,sBAAiB,WAAO2B,GAAaS,YAAYnW,QAAS,KAEvGmP,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,+KAAiL,SAAU,aAK3Q,wBAAoB,8DACpB,wBAAoB,MAAO4Z,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1B7Z,MAAO,8GACP8mB,OAAO,WAAOlK,GAAiB,OAAS,OACxC5H,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY2H,EAAcvf,QAAS,WAAOuf,MAC/E,sBAAiB,WAAOA,GAAiB,OAAS,QAAS,EAAqB9C,KACjF,WAAO8C,IAWH,wBAAoB,QAAQ,KAV3B,kBAAc,wBAAoB,MAAO7C,GAAa,EACrD,wBAAoB,8CACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOuB,GAAa/I,KAAM,CAACsP,EAAGnT,MACtF,kBAAc,wBAAoB,MAAO,CAC7C7R,IAAK6R,EACL1O,MAAO,qDACPunB,UAAW1F,GACZ,KAAM,EAAe7H,MACxB,gBAMxB,wBAAoB,2BACnB,WAAOyC,KACD,kBAAc,wBAAoB,MAAO,CACxC5f,IAAK,EACLmD,MAAO,0FACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYwH,EAAYpf,MAAQ,OACrE,EACC,wBAAoB,MAAO,CACvB2C,MAAO,gHACPgV,QAASD,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,wBAAoB,MAAOkF,GAAa,EACpC,wBAAoB,KAAMC,IAAa,qBAAyC,UAAxB,WAAOuC,GAA0B,OAAS,OAAQ,IAC1G,wBAAoB,SAAU,CAC1BzH,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYwH,EAAYpf,MAAQ,OACrE,EACC,kBAAa,WAAO8S,IAAQ,CAAEnQ,MAAO,mCAG7C,wBAAoB,MAAOma,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAoC,UAAxB,WAAOsC,IAA0B,WAAOnB,GAAahB,YAAa,WAAOgB,GAAaS,YAAa,CAAChI,EAAMrF,MAClK,kBAAc,wBAAoB,MAAO,CAC7C7R,IAAK6R,EACL1O,MAAO,4BACR,EACC,iBAAawmB,GAAa,CACtBzS,KAAMA,EACNC,SAAU,IACX,KAAM,EAAe,CAAC,aAE7B,cAId,wBAAoB,QAAQ,IACnC,GAEX,I,O3CjpCJ,SAASwT,EAAoBC,GAE5B,IAAIC,EAAe3qB,EAAyB0qB,GAC5C,QAAqB/a,IAAjBgb,EACH,OAAOA,EAAalrB,QAGrB,IAAImrB,EAAS5qB,EAAyB0qB,GAAY,CAGjDjrB,QAAS,CAAC,GAOX,OAHAorB,EAAoBH,GAAUE,EAAQA,EAAOnrB,QAASgrB,GAG/CG,EAAOnrB,OACf,C,M6ChBA,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAEwD,MAAO,qIACtB,GAAa,CAAEA,MAAO,kHACtB,GAAa,CAAEA,MAAO,0DACtB,GAAa,CAAEA,MAAO,sFCA5B,IDE6B,qBAAiB,CAC1C8T,OAAQ,eACRpX,MAAO,CACHoqB,MAAO,CAAC,EACRe,OAAQ,CAAE9lB,KAAMnE,UAEpBwW,MAAO,CAAC,SACRC,MAAMC,GACK,CAACQ,EAAMC,MACF,kBAAc,iBAAa,WAAW,CAAE+S,GAAI,QAAU,CACzDxT,EAAc,SACR,kBAAc,wBAAoB,MAAO,CACxCzX,IAAK,EACLmD,MAAO,mFACPgV,QAASD,EAAO,KAAOA,EAAO,IAAK,mBAAgBE,GAAYH,EAAKI,MAAM,SAAW,CAAC,WACvF,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,KAAM,IAAY,qBAAiBZ,EAAQwS,OAAQ,IACvE,wBAAoB,SAAU,CAC1B9mB,MAAO,kEACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYH,EAAKI,MAAM,WAC5D,EACC,kBAAa,WAAO/E,IAAI,CAAEnQ,MAAO,gBAGzC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,gBAAY8U,EAAKiT,OAAQ,UAAW,CAAC,EAAG,IAAM,CAC1ChT,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,qBAAuB,EACjF,wBAAoB,MAAO,CAAEA,MAAO,0CAA4C,MAChF,wBAAoB,IAAK,CAAEA,MAAO,6CAA+C,qBACjF,SAGZ,wBAAoB,wBACpB+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,2GAA6G,MAAO,IAClL+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,4GAA8G,MAAO,IACnL+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,8GAAgH,MAAO,IACrL+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,+GAAiH,MAAO,UAG5L,wBAAoB,QAAQ,QEzC5CgoB,GAAY5nB,EAAiB,aAAc,CAC/C,CAAC,OAAQ,CAAEG,EAAG,oDAAqD1D,IAAK,WACxE,CAAC,OAAQ,CAAE0D,EAAG,WAAY1D,IAAK,aCF3BorB,GAAY7nB,EAAiB,aAAc,CAC/C,CAAC,OAAQ,CAAEG,EAAG,qDAAsD1D,IAAK,WACzE,CAAC,OAAQ,CAAE0D,EAAG,aAAc1D,IAAK,WACjC,CAAC,OAAQ,CAAE0D,EAAG,sDAAuD1D,IAAK,WAC1E,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,aCJ5BqrB,GAAS9nB,EAAiB,SAAU,CACxC,CACE,OACA,CACEG,EAAG,mIACH1D,IAAK,WAGT,CAAC,OAAQ,CAAE0D,EAAG,YAAa1D,IAAK,aCf5B,GAAa,CACfA,IAAK,EACLmD,MAAO,oBAEL,GAAa,CACfnD,IAAK,EACLmD,MAAO,0EAEL,GAAa,CAAC,WACd,GAAa,CAAEA,MAAO,0BACtB,GAAa,CAAEA,MAAO,4KACtB,GAAa,CAAEA,MAAO,0CACtB,GAAa,CAAEA,MAAO,iHACtB,GAAa,CAAEA,MAAO,6CACtB,GAAa,CAAEA,MAAO,cACtB,GAAc,CAAC,YACf,GAAc,CAAC,YACf,GAAc,CAChBnD,IAAK,EACLmD,MAAO,uFAEL,GAAc,CAAEA,MAAO,0EACvB,GAAc,CAAEA,MAAO,8CACvB,GAAc,CAAEA,MAAO,+BACvB,GAAc,CAAEA,MAAO,0BCrB7B,ID2B6B,qBAAiB,CAC1C8T,OAAQ,gBACRpX,MAAO,CACHmrB,OAAQ,CAAE9lB,KAAMnE,SAChBwQ,QAAS,CAAC,GAEdgG,MAAO,CAAC,SACR,KAAAC,CAAMC,GAAWiG,KAAMC,IACnB,MAAMD,EAAOC,EACP2N,EAAY7e,KACZ8e,GAAgB,IAAA7e,KAAI,MAI1BqC,eAAeyc,IACiB,OAAxBD,EAAc/qB,cACR8qB,EAAU5Z,WAAW6Z,EAAc/qB,OACzC+qB,EAAc/qB,MAAQ,KAE9B,CACA,SAASirB,IACDH,EAAU1e,eAEd8Q,EAAK,SACL4N,EAAUpZ,gBACd,CACA,SAASwZ,IACDJ,EAAU1e,eAEd8Q,EAAK,SACL4N,EAAUhZ,YACd,CACA,MAAO,CAAC2F,EAAMC,MACF,kBAAc,iBAAayT,GAAc,CAC7C1B,MAAO,OACP,UAAWxS,EAAQuT,OACnBY,QAAS1T,EAAO,KAAOA,EAAO,GAAME,GAAYH,EAAKI,MAAM,WAC5D,CACCjV,SAAS,aAAS,IAAM,CACQ,IAA3BqU,EAAQlG,QAAQxI,SACV,kBAAc,wBAAoB,MAAO,GAAY,EACpD,kBAAa,WAAO7E,GAAW,CAAEf,MAAO,8CACxC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE/U,MAAO,yBAA2B,UAAW,SAEnG,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYsU,EAAQlG,QAAUuQ,KAC1E,kBAAc,wBAAoB,SAAU,CAChD9hB,IAAK8hB,EAAMrQ,UACXtO,MAAO,0NACPgV,QAAUC,IAAW,OAtCzB3G,EAsCyCqQ,EAAMrQ,eArCnE8Z,EAAc/qB,MAAQiR,GAD1B,IAAwBA,IAuCG,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,yBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,GAAY,KAAM,qBAAiBqQ,EAAMrQ,WAAY,MAErF,wBAAoB,mBACpB,wBAAoB,IAAK,IAAY,qBAAiBqQ,EAAMjW,SAAU,IACtE,wBAAoB,iBACpB,kBAAa,WAAOsf,IAAY,CAAEhoB,MAAO,iGAE9C,EAAe,MAClB,UAEZ,wBAAoB,2CACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,0SACPgU,UAAU,WAAOmU,GAAW1e,aAC5BuL,QAASsT,GACV,EACC,kBAAa,WAAOL,IAAY,CAAEjoB,MAAO,WACzC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE/U,MAAO,iCAAmC,SAAU,KAC7G,EAAe,KAClB,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,2SAA2S,WAAOmoB,GAAWre,UAAY,+DAAiE,KAClakK,UAAU,WAAOmU,GAAW1e,aAC5BuL,QAASuT,GACV,EACC,kBAAa,WAAOL,IAAS,CAAEloB,MAAO,WACtC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE/U,MAAO,iCAAmC,MAAO,KAC1G,GAAuB,SAGlC,wBAAoB,oBACO,QAA1B,WAAOooB,KACD,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpCrT,EAAO,KAAOA,EAAO,IAAK,wBAAoB,KAAM,CAAE/U,MAAO,+CAAiD,QAAS,KACvH,wBAAoB,IAAK,GAAa,CAClC+U,EAAO,KAAOA,EAAO,IAAK,qBAAiB,SAAU,KACrD,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOqT,IAAiB,GAClFrT,EAAO,KAAOA,EAAO,IAAK,qBAAiB,QAAS,IACpDA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,KAAM,KAAM,MAAO,IACjEA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE/U,MAAO,2BAA6B,kBAAmB,OAEnH,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,6GACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYmT,EAAc/qB,MAAQ,OACvE,SACH,wBAAoB,SAAU,CAC1B2C,MAAO,+HACPgV,QAASqT,GACV,kBAIb,wBAAoB,QAAQ,KAEtCjd,EAAG,GACJ,EAAe,CAAC,YAE3B,IEhJE,GAAa,CAAEpL,MAAO,sFACtB,GAAa,CAAEA,MAAO,sDACtB,GAAa,CAAEA,MAAO,uDACtB,GAAa,CAAEA,MAAO,wDACtB,GAAa,CAAEA,MAAO,4CACtB,GAAa,CAAEA,MAAO,gKACtB,GAAa,CACfnD,IAAK,EACLmD,MAAO,gCAEL,GAAa,CACfnD,IAAK,EACLmD,MAAO,wBAEL,GAAa,CAAEA,MAAO,+BACtB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,6CAEL,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,gCAEL,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,gBACvB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,QAEL,GAAc,CAAEA,MAAO,6BACvB,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,8CACvB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,wFAEL,GAAc,CAAEA,MAAO,6GACvB,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAC,WAAY,eAC3B,GAAc,CAAC,YACf,GAAc,CAAEA,MAAO,iEACvB,GAAc,CAAC,SACf,GAAc,CAChBnD,IAAK,EACLmD,MAAO,+HAEL,GAAc,CAAEA,MAAO,6BACvB,GAAc,CAAEA,MAAO,oCACvB,GAAc,CAAC,SACf,GAAc,CAChBf,QAAS,YACTe,MAAO,aAEL,GAAc,CAAE,YAAa,mBAC7B,GAAc,CAAC,IAAK,UACpB,GAAc,CAAEA,MAAO,2DACvB,GAAc,CAAEA,MAAO,4BACvB,GAAc,CAAEA,MAAO,iBACvB,GAAc,CAAEA,MAAO,oCACvB,GAAc,CAAC,SACf,GAAc,CAChBf,QAAS,YACTe,MAAO,aAEL,GAAc,CAAE,YAAa,kBAC7B,GAAc,CAAC,IAAK,UACpB,GAAc,CAAEA,MAAO,2DACvB,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,+CACvB,GAAc,CAAEA,MAAO,iDACvB,GAAc,CAAEA,MAAO,iCACvB,GAAc,CAAEA,MAAO,gCACvB,GAAc,CAAEA,MAAO,gCACvB,GAAc,CAAEA,MAAO,0CACvB,GAAc,CAAEA,MAAO,6CACvB,GAAc,CAAEA,MAAO,wIACvB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,0DAEL,GAAc,CAChBnD,IAAK,EACLmD,MAAO,yDAEL,GAAc,CAChBnD,IAAK,EACLmD,MAAO,yEAEL,GAAc,CAAC,SACf,GAAc,CAAEA,MAAO,YACvB,GAAc,CAAEA,MAAO,uJACvB,GAAc,CAAEA,MAAO,+FACvB,GAAc,CAChBnD,IAAK,EACLmD,MAAO,yDAEL,GAAc,CAAEA,MAAO,mDACvB,GAAc,CAAEA,MAAO,aACvB,GAAc,CAAEA,MAAO,qCACvB,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,uDACvB0oB,GAAc,CAAE1oB,MAAO,qCACvB2oB,GAAc,CAAE3oB,MAAO,2BACvB4oB,GAAc,CAAE5oB,MAAO,uDACvB6oB,GAAc,CAAE7oB,MAAO,qCACvB8oB,GAAc,CAAE9oB,MAAO,qCACvB+oB,GAAc,CAAE/oB,MAAO,2BACvBgpB,GAAc,CAAEhpB,MAAO,uDACvBipB,GAAc,CAAEjpB,MAAO,0BACvBkpB,GAAc,CAAElpB,MAAO,wCACvBmpB,GAAc,CAAEnpB,MAAO,qCACvBopB,GAAc,CAAEppB,MAAO,yCACvBqpB,GAAc,CAAErpB,MAAO,uGACvBspB,GAAc,CAAC,WACfC,GAAc,CAAEvpB,MAAO,+GACvBwpB,GAAc,CAAExpB,MAAO,yCACvBypB,GAAc,CAAC,WAAY,WAC3BC,GAAc,CAAE1pB,MAAO,0BACvB2pB,GAAc,CAAC,YACfC,GAAc,CAAE5pB,MAAO,+GACvB6pB,GAAc,CAAE7pB,MAAO,yCACvB8pB,GAAc,CAAC,WACfC,GAAc,CAAE/pB,MAAO,8BACvBgqB,GAAc,CAAC,YACfC,GAAc,CAChBptB,IAAK,EACLmD,MAAO,+GAELkqB,GAAc,CAAElqB,MAAO,yEACvBmqB,GAAc,CAChBttB,IAAK,EACLmD,MAAO,0DAELoqB,GAAc,CAChBvtB,IAAK,EACLmD,MAAO,qCAcX,IAA6B,qBAAiB,CAC1C8T,OAAQ,WACRM,MAAO,CAAC,gBACR,KAAAC,CAAMC,GACF,MAAM+V,GAAc,IAAAC,iBAAgB,CAChC5tB,MAAO,CACH6tB,KAAM,CAAExoB,KAAM8N,OAAQ2a,UAAU,GAChCC,OAAQ,CAAE1oB,KAAMnE,QAASqC,SAAS,GAClCmhB,MAAO,CAAErf,KAAMiK,OAAQ/L,QAAS,IAChCyqB,YAAa,CAAE3oB,KAAMiK,OAAQ/L,QAAS,UAE1CmU,MAAO,CAAC,SACRC,MAAK,CAAC3X,GAAO,KAAE6d,KACJ,KAAM,IAAAza,GAAE,SAAU,CACrBE,MAAO,CACH,oHACAtD,EAAM+tB,OACA,4EACA,uIAEVzV,QAAS,IAAMuF,EAAK,UACrB,EACC,IAAAza,GAAEpD,EAAM6tB,KAAM,CAAEvqB,MAAO,WACvBtD,EAAM0kB,OACA,IAAAthB,GAAE,MAAO,CACPE,MAAO,CACH,gMACsB,SAAtBtD,EAAMguB,YAAyB,WAAa,YAEjDhuB,EAAM0kB,OACP,SAIZ+G,EAAY7e,KACZqhB,GAAc,IAAAphB,KAAI,MAClBqhB,GAAY,IAAArhB,KAAI,IAChBshB,GAAuB,IAAAthB,MAAI,GAC3BuhB,GAAe,IAAAvhB,MAAI,GACnBwhB,GAAa,IAAAxhB,MAAI,GACjByhB,GAAkB,IAAAzhB,KAAI,IACtB0hB,GAAiB,IAAA1hB,KAAI,QACrB2hB,GAAmB,IAAA3hB,KAAI,IACvB4hB,GAAoB,IAAA5hB,KAAI,IACxB6hB,GAAkB,IAAA5W,UAAS,I7BqMhC,IAAI7Q,EAAc0nB,U6BrMkC7tB,OAAOuW,GAA0B,OAAlBA,EAAK9R,WACnEqpB,GAAoB,IAAA9W,UAAS,KAC/B,MAAMtU,EAAM,IAAI0D,IAChB,IAAK,MAAMmQ,KAAQqX,EAAgB/tB,MAC/B6C,EAAIqrB,IAAIxX,EAAK1U,KAAM0U,GAEvB,OAAO7T,IAELsrB,GAAwB,IAAAhX,UAAS,IAAM0W,EAAiB7tB,MACzD6C,IAAI,CAACurB,EAAUvJ,KAAQ,CAAGA,MAAKnO,KAAMuX,EAAkBjuB,MAAMyG,IAAI2nB,MACjEjuB,OAAQmhB,QAAyBjS,IAAfiS,EAAM5K,OACvB2X,GAAuB,IAAAlX,UAAS,I5BjHrC,IAAI1O,GAAe6lB,S4BmHdC,GAAe,IAAApX,UAAS,KAC1B,MAAMqX,EAAS1D,EAAUne,SAAS,KAAO,GACzC,OAAwB6hB,EAAOruB,OAAQ6H,GAAY,KAANA,G7B2KpDnF,IAAK4rB,GAAMnoB,EAAcG,IAAIgoB,IAC7BtuB,OAAQ2G,QAA2BuI,IAANvI,K6BxKpB4nB,GAAe,IAAAvX,UAAS,KAC1B,MAAMrJ,EAAMgd,EAAUne,SAAS,MAAQ,CAAC,EACxC,OAAO6F,OAAOzB,QAAQjD,GACjB3N,OAAO,EAAE6B,EAAMohB,KAAWphB,GAAQohB,EAAQ,GAC1CvgB,IAAI,EAAEb,EAAMohB,MAAW,CAAGphB,OAAMohB,aAGnCuL,GAAe,IAAApR,UAAS,CAC1BqR,SAAU,GACVC,WAAY,EACZC,WAAY,oBACZC,eAAgB,OAGdC,GAAc,IAAA7X,UAAS,IAAM2T,EAAU3f,UAAY,sCAEnD8jB,GAAY,IAAA9X,UAAS,KACvB,MAAMnQ,EAAK8jB,EAAUne,SAAS,KAAO,GAC/B1F,EAAQ6jB,EAAUne,SAAS,OAAS,GAC1C,OAAOvE,KAAKkM,IAAItN,EAAIC,KAElBioB,GAAe,IAAA/X,UAAS,IAAM2T,EAAUne,SAAS,OAAS,IAE1DwiB,GAAY,IAAAhY,UAAS,IAAM2T,EAAUne,SAAS,KAAO,GAErDyiB,GAAc,IAAAjY,UAAS,IAAM2T,EAAUne,SAAS,KAAO,GAEvD0iB,GAAiB,IAAAlY,UAAS,IAAM2T,EAAUne,SAAS,OAAS,GAC5D2iB,GAAiB,IAAAnY,UAAS,IAAM2T,EAAUne,SAAS,OAAS,GAC5D4iB,GAAY,IAAApY,UAAS,KACvB,MAAMmJ,EAAM4O,EAAalvB,MACzB,OAAOsgB,EAAM,EAAIlY,KAAKkM,IAAK2a,EAAUjvB,MAAQsgB,EAAO,IAAK,KAAO,MAG9DkP,GAAY,IAAArY,UAAS,KACvB,MAAMjQ,EAAKioB,EAAUnvB,MAErB,OAAOoI,KAAKkM,IAAKpN,EADC,GACiB,IAAK,OAGtCuoB,EAAkB,KACflC,EAAUvtB,MAAMQ,SAAUsqB,EAAU1e,eAEzC0e,EAAUlc,WAAW2e,EAAUvtB,OAC/ButB,EAAUvtB,MAAQ,KAUhB0vB,EAAmB,CACrB,IAAO,CAAE3L,MAAO,KAAMmJ,KAAM,IAAKyC,QAAS,uBAAwBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,aAC3H,IAAO,CAAE7L,MAAO,KAAMmJ,KAAM,IAAKyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,aAC1H,IAAO,CAAE7L,MAAO,OAAQmJ,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,aAC7H,IAAO,CAAE7L,MAAO,OAAQmJ,KAAM,KAAMyC,QAAS,uBAAwBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,aAC9H,IAAO,CAAE7L,MAAO,OAAQmJ,KAAM,KAAMyC,QAAS,uBAAwBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,aAC9H,IAAO,CAAE7L,MAAO,KAAMmJ,KAAM,KAAMyC,QAAS,wBAAyBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,cAG3HC,GAAsB,IAAA1Y,UAAS,KACjC,IAAK2T,EAAUpf,WACX,OAAO,KACX,MAAM6D,EAAWub,EAAUne,SAAS,QACpC,OAAK4C,EAEY,QAAbA,GAAmC,QAAbA,EACf,KACJmgB,EAAiBngB,IAAa,KAH1B,OAKTugB,EAAsB,KACxBte,OAAOxD,KAAK,aAKV+hB,EAAY,CACd,IAAO,CAAC,QAAS,OAAQ,SAAU,OAAQ,OAAQ,UACnD,IAAO,CAAC,QAAS,QAAS,QAAS,QAAS,WAC5C,IAAO,CAAC,OAAQ,QAAS,QAAS,OAAQ,QAC1C,IAAO,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,SACxC,IAAO,CAAC,OAAQ,OAAQ,OAAQ,QAAS,UAEvCC,EAAc,CAAC,MAAO,MAAO,MAAO,MAAO,OACjD,SAASC,EAAgB3gB,GACrB,IAAK,MAAOsG,EAAOsa,KAAU1d,OAAOzB,QAAQgf,GACxC,GAAIG,EAAMhM,SAAS5U,GACf,OAAOsG,EAEf,OAAO,IACX,CAOA,MAAMua,EAAuB,CACzB,IAAO,CACHC,OAAQ,CAAC,QAAS,MAAO,SACzBC,aAAc,CACV,KAAQ,CAAC,QAAS,SAClB,OAAU,CAAC,OAAQ,QACnB,KAAQ,CAAC,OAAQ,SACjB,KAAQ,CAAC,QACT,OAAU,CAAC,OAAQ,WAG3B,IAAO,CACHD,OAAQ,CAAC,OAAQ,MAAO,QACxBC,aAAc,CACV,MAAS,CAAC,KAAM,SAChB,MAAS,CAAC,QAAS,QACnB,MAAS,CAAC,MAAO,SACjB,MAAS,CAAC,OAAQ,QAClB,QAAW,CAAC,OAAQ,UAG5B,IAAO,CACHD,OAAQ,CAAC,OAAQ,QAAS,QAC1BC,aAAc,CACV,KAAQ,CAAC,MAAO,OAAQ,OACxB,MAAS,CAAC,MAAO,KAAM,OACvB,MAAS,CAAC,MAAO,MAAO,QACxB,KAAQ,CAAC,OAAQ,QACjB,KAAQ,CAAC,OAAQ,OAAQ,SAGjC,IAAO,CACHD,OAAQ,CAAC,OAAQ,OAAQ,SACzBC,aAAc,CACV,KAAQ,CAAC,QACT,KAAQ,CAAC,OAAQ,OACjB,KAAQ,CAAC,MAAO,OAChB,KAAQ,CAAC,SACT,MAAS,CAAC,SAGlB,IAAO,CACHD,OAAQ,CAAC,OAAQ,MAAO,QACxBC,aAAc,CACV,KAAQ,CAAC,OAAQ,QACjB,KAAQ,CAAC,OAAQ,OAAQ,QACzB,KAAQ,CAAC,OAAQ,QACjB,MAAS,CAAC,OAAQ,QAClB,MAAS,CAAC,OAAQ,WAKxBC,GAA+B,CACjC,IAAO,GACP,IAAO,GACP,IAAO,GACP,IAAO,GACP,IAAO,IAOX,SAASC,GAAwBjhB,GAC7B,MAAMsG,EAAQqa,EAAgB3gB,IAAS,MACjCkhB,EAASL,EAAqBva,GACpC,IAAK4a,EACD,OAAO,KACX,MAAMC,EAAaD,EAAOJ,OACpBM,EAAaF,EAAOH,aAAa/gB,IAAS,GAC1CqhB,EAAaL,GAA6B1a,IAAU,GAC1D,IAAIgb,EAAO,GACX,OAA0B,IAAtBH,EAAWloB,QAAsC,IAAtBmoB,EAAWnoB,OAC/B,MAEPqoB,EADsB,IAAtBH,EAAWloB,OACJmoB,EAEoB,IAAtBA,EAAWnoB,QAITH,KAAKC,SAAWsoB,EAHhBF,EAG0CC,GAvBxCG,EAyBED,GAxBNroB,OAEFsoB,EAAIzoB,KAAKwN,MAAMxN,KAAKC,SAAWwoB,EAAItoB,SAD/B,MAFf,IAAiBsoB,CA0BjB,CAEA,MAAMC,GAAoB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/DC,GAAsB,CACxB,IAAO,CAAE7D,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC9G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC9G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,qBAAsBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC7G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,qBAAsBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC7G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC9G,IAAO,CAAE1C,KAAM,IAAKyC,QAAS,qBAAsBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC5G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAC9G,IAAO,CAAE1C,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,YAE5GoB,GAAqB,CACvB9D,KAAM,KAAMyC,QAAS,sBAAuBjX,YAAa,UAAWC,UAAW,UAAWiX,UAAW,WAEzG,IAAIqB,GAAgB,GAChBC,GAA0B,GAC9B,SAASC,GAAQN,GACb,MAAMjI,EAAI,IAAIiI,GACd,IAAK,IAAIxf,EAAIuX,EAAErgB,OAAS,EAAG8I,EAAI,EAAGA,IAAK,CACnC,MAAM+f,EAAIhpB,KAAKwN,MAAMxN,KAAKC,UAAYgJ,EAAI,KACzCuX,EAAEvX,GAAIuX,EAAEwI,IAAM,CAACxI,EAAEwI,GAAIxI,EAAEvX,GAC5B,CACA,OAAOuX,CACX,CACA,SAASyI,KACL,MAAMC,EAAcxG,EAAUne,SAAS,OAAS,GAC1C4kB,EAAkBzG,EAAUne,SAAS,SAAW,GAEhD6kB,GADQ1G,EAAUne,SAAS,KAAO,CAAC,GACf,SAAW,EAC/B8kB,EAA8B,UAAhBH,EAGpB,GAAIG,GAFmC,QAApBF,EAEY,CAC3B,IAAIG,EAAc,KAClB,GAAID,EACAC,EAAc,UAEb,CACD,MAAMC,EAAe1B,EAAgBqB,GACjCK,IACAD,EAtIhB,SAAsBC,GAClB,MAAM9M,EAAMmL,EAAYvvB,QAAQkxB,GAChC,OAAI9M,EAAM,GAAKA,GAAOmL,EAAYznB,OAAS,EAChC,KACJynB,EAAYnL,EAAM,EAC7B,CAiI8B+M,CAAaD,GACnC,CACA,GAAID,GAAe3B,EAAU2B,GAAc,CAGvC,OADeP,GADIpB,EAAU2B,GAAavxB,OAAOyoB,GAAKA,IAAM0I,IACzB/vB,MAAM,EAAG,GAC9BsB,IAAIgvB,IAAY,CAC1B9N,MAAO8N,EACPtiB,SAAU,GACVsiB,WACAC,UAAWJ,EACXK,mBAAmB,KAChBf,KAEX,CACJ,CAEA,GAAIQ,GAAe,EAAG,CAClB,MAAMQ,EAAiC,IAAnBR,EAAc,GAClC,GAAIppB,KAAKC,SAAW2pB,EAAY,CAE5B,MAAO,CAAC,CAAEjO,MAAO,MAAOxU,SAAU,MAAOwiB,mBAAmB,KADhDhB,GAAoB,QAEpC,CACJ,CAEA,MAAM5oB,EAAOC,KAAKC,SACZ+a,EAAQjb,EAAO,GAAM,EAAIA,EAAO,GAAM,EAAI,EAEhD,OADegpB,GAAQL,IAAmBvvB,MAAM,EAAG6hB,GACrCvgB,IAAIovB,IAAM,CAAGlO,MAAOkO,EAAI1iB,SAAU0iB,EAAIF,mBAAmB,KAAUhB,GAAoBkB,KACzG,CAEA,MAAMC,IAAgB,IAAA/a,UAAS,KAC3B,IAAK2T,EAAUjf,SAGX,OAFAolB,GAAgB,GAChBC,GAA0B,GACnB,GAGX,MAGMiB,EAAc,GAHPrH,EAAUne,SAAS,OAAS,MACxBme,EAAUne,SAAS,SAAW,MAChCme,EAAUne,SAAS,KAAK,SAAW,IAMlD,OAJIwlB,IAAgBjB,KAChBA,GAA0BiB,EAC1BlB,GAAgBI,MAEbJ,KAGLmB,GAAgB,CAClB,IAAO,SAAU,IAAO,SAAU,IAAO,SACzC,IAAO,SAAU,IAAO,SAAU,IAAO,SAAU,IAAO,UA0CxDC,GAAe,KACjBvH,EAAUha,kBACVga,EAAUje,gBAAkBie,EAAUje,gBAEpCylB,GAAqB,KACvB9E,EAAqBxtB,OAASwtB,EAAqBxtB,OAIjDuyB,GAAwB,KAC1BzH,EAAUrd,eACV,MAAM+kB,EAAqB,IAAIC,IAAI1E,EAAgB/tB,MAAM6C,IAAIiE,GAAKA,EAAE9E,OAC9D0wB,EAAaC,MAAMC,QAAQ9H,EAAUne,SAAS,KAC9Cme,EAAUne,SAAS,IAAIxM,OAAQ6B,GAASwwB,EAAmBK,IAAI7wB,IAAOT,MAAM,EAAG,GAC/E,GACNssB,EAAiB7tB,MAAQ,IAAI0yB,GAC7B5E,EAAkB9tB,MAAQ,GAC1B4tB,EAAe5tB,MAAQ,OACvBstB,EAAYttB,MAAQ,qBAYlB8yB,GAAwBvkB,UAC1B,GAAsC,IAAlCsf,EAAiB7tB,MAAMuI,OAEvB,YADAuiB,EAAUxe,MAAQ,qBAGLwe,EAAUzY,qBAAqB,CAC5C,IAAK,IAAIwb,EAAiB7tB,WAIY,IAAtCquB,EAAqBruB,MAAMuI,OAI/BqlB,EAAe5tB,MAAQ,QAHnB8qB,EAAUxe,MAAQ,qCAKpBymB,GAAiCxkB,UACnC,IAAKuf,EAAkB9tB,MAEnB,YADA8qB,EAAUxe,MAAQ,aAItB,IADiB5D,GAAeolB,EAAkB9tB,OAG9C,YADA8qB,EAAUxe,MAAQ,YAAYwhB,EAAkB9tB,gBAGnC8qB,EAAUzY,qBAAqB,CAC5C,MAAOyb,EAAkB9tB,UAI7BstB,EAAYttB,MAAQ,KACpB2tB,EAAgB3tB,MAAQ8tB,EAAkB9tB,MAC1C0tB,EAAW1tB,OAAQ,IAEjBgzB,GAAmBC,IACrBvF,EAAW1tB,OAAQ,EACnBmJ,QAAQ0Z,IAAI,mBAAoBoQ,EAAM,MAAQ,SAElD,MAAO,CAACxb,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,qFACpB,wBAAoB,MAAO,GAAY,EACnC,kBAAa,WAAOsV,GAAc,CAC9BE,MAAM,WAAO,GACbnJ,MAAO,KACP,eAAgB,QAChBqJ,OAAgC,SAAxB,WAAOE,GACf3V,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY0V,EAAYttB,MAAQ,QACrE,KAAM,EAAe,CAAC,OAAQ,YACjC,kBAAa,WAAOgtB,GAAc,CAC9BE,MAAM,WAAO/pB,GACb4gB,MAAO,KACP,eAAgB,QAChBqJ,OAAgC,UAAxB,WAAOE,GACf3V,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY0V,EAAYttB,MAAQ,SACrE,KAAM,EAAe,CAAC,OAAQ,YACjC,kBAAa,WAAOgtB,GAAc,CAC9BE,MAAM,WAAO9pB,GACb2gB,MAAO,KACP,eAAgB,QAChBqJ,OAAgC,YAAxB,WAAOE,GACf3V,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY0V,EAAYttB,MAAQ,WACrE,KAAM,EAAe,CAAC,OAAQ,YACjC,kBAAa,WAAOgtB,GAAc,CAC9BE,MAAM,WAAO7pB,GACb0gB,MAAO,KACP,eAAgB,QAChBqJ,OAAgC,cAAxB,WAAOE,GACf3V,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY0V,EAAYttB,MAAQ,aACrE,KAAM,EAAe,CAAC,OAAQ,cAErC,wBAAoB,4CACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,yBACpB,wBAAoB,SAAU,CAC1B2C,MAAO,mOACP8mB,MAAO,OACP9R,QAASD,EAAO,KAAOA,EAAO,GAE1B,IAAIwb,KAAU,WAAOvqB,MAAqB,WAAOA,GAAP,IAA4BuqB,KAC3E,EACC,kBAAa,WAAOzvB,GAAW,CAAEd,MAAO,gBAGhD,wBAAoB,qEACpB,wBAAoB,MAAO,GAAY,EACnC,kBAAa,WAAOqqB,GAAc,CAC9BE,MAAM,WAAOxpB,GACbqgB,MAAO,KACP,eAAgB,OAChBqJ,QAAQ,WAAOtC,GAAWje,eAC1B8K,QAAS0a,IACV,KAAM,EAAe,CAAC,OAAQ,YACjC,kBAAa,WAAOrF,GAAc,CAC9BE,MAAM,WAAOvpB,GACbogB,MAAO,OACP,eAAgB,OAChBqJ,QAAQ,WAAOI,GACf7V,QAAS2a,IACV,KAAM,EAAe,CAAC,OAAQ,cAErC,wBAAoB,wBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,CACvB3vB,MAAO,2FACPmV,OAAO,oBAAgB,CAAEqb,UAAU,WAAOxE,GAAcI,eAAiB,QAC1E,EACC,wBAAoB,sBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,wBACpBrX,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,0EAA4E,MAAO,IACnJ+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,2EAA6E,MAAO,KACpJ,wBAAoB,wBACnB,WAAOmoB,GAAuB,eACxB,kBAAc,wBAAoB,MAAO,GAAY,IAAKpT,EAAO,MAAQA,EAAO,IAAM,EACjF,uBAAmB,qeAAsf,SAE/gB,wBAAoB,QAAQ,IAClC,wBAAoB,gBACnB,WAAOoT,GAAoB,YACrB,kBAAc,wBAAoB,MAAO,GAAY,EACpD,qBAAgB,wBAAoB,WAAY,CAC5C,sBAAuBpT,EAAO,KAAOA,EAAO,GAAME,IAAa,WAAOkT,GAAsB,YAAIlT,GAChGjV,MAAO,kNACPmV,OAAO,oBAAgB,CACnB8W,UAAU,WAAOD,GAAcC,SAAW,KAC1CC,YAAY,WAAOF,GAAcE,WACjCC,YAAY,WAAOH,GAAcG,cAEtC,KAAM,GAAgB,CACrB,CAAC,cAAa,WAAOhE,GAAWpe,gBAEpC,wBAAoB,mBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B/J,MAAO,6GACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,IAAY,WAAOkT,GAAW1Y,eACnE,SACH,wBAAoB,SAAU,CAC1BzP,MAAO,sKACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,IAAY,WAAOkT,GAAW/Y,aACnE,iBAGR,kBAAc,wBAAoB,WAAW,CAAEvS,IAAK,GAAK,EACxD,wBAAoB,gCACpB,wBAAoB,oBACpB,wBAAoB,MAAO,CACvBmD,MAAO,yEACPmV,OAAO,oBAAgB,CACnB8W,UAAU,WAAOD,GAAcC,SAAW,KAC1CC,YAAY,WAAOF,GAAcE,WACjCC,YAAY,WAAOH,GAAcG,cAEtC,EACC,wBAAoB,yCACnB,WAAOhE,GAAW1e,eAAgB,WAAO0e,GAAWze,gBAC9C,kBAAc,wBAAoB,IAAK,IAAa,sBAAiB,WAAOye,GAAWze,eAAgB,MACvG,kBAAc,wBAAoB,WAAW,CAAE7M,IAAK,GAAK,EACxD,wBAAoB,sBACpB,wBAAoB,IAAK,IAAa,sBAAiB,WAAOwvB,IAAe,IAC9E,QACR,IACH,wBAAoB,uBAClB,WAAOlE,GAAW1e,gBAAiB,WAAO0e,GAAWjjB,QAAQU,OAAS,IAAK,WAAOuiB,GAAWpf,aAAc,WAAOof,GAAWjf,YACxH,kBAAc,wBAAoB,MAAO,GAAa,CACrD6L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,4FAA8F,MAAO,KACrK,wBAAoB,0BACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOmoB,GAAWjjB,QAAS,CAACurB,EAAQ/hB,MAC5F,kBAAc,wBAAoB,SAAU,CAChD7R,IAAK,OAAS6R,EACd1O,MAAO,yTACPgV,QAAUC,GA7d5B,CAACwb,IACvB,GAAItI,EAAU1e,aACV,OAEJ,MAAMinB,EAAWD,EAAOvyB,QAAQ,eAAgB,IAChD0sB,EAAUvtB,MAAQqzB,GAwd2C,CAAmBD,KACzC,qBAAiBA,GAAS,EAAqB,MAClD,OACJ,wBAAoB,2CACnB,WAAOtI,GAAWpf,aAAc,WAAOmkB,KACjC,kBAAc,wBAAoB,SAAU,CAC3CrwB,IAAK,EACLmD,MAAO,4JACPmV,OAAO,oBAAgB,CACnBwb,iBAAiB,WAAOzD,GAAqBF,QAC7CjX,aAAa,WAAOmX,GAAqBnX,YACzCnW,OAAO,WAAOstB,GAAqBlX,UACnC4a,UAAW,aAAY,WAAO1D,GAAqBD,mDAEvDjY,QAASmY,GACV,EACC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOD,GAAqB3C,MAAO,IAC7F,qBAAiB,KAAM,sBAAiB,WAAO2C,GAAqB9L,OAAQ,IAC7E,KACD,wBAAoB,QAAQ,IAClC,wBAAoB,4BACnB,WAAO+G,GAAWjf,WAAY,WAAOqmB,IAAe3pB,OAAS,IACvD,kBAAc,wBAAoB,MAAO,GAAa,CACrDmP,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,mFAAqF,iBAAkB,KACvK,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOuvB,IAAgB,CAACsB,EAAQniB,MACxF,kBAAc,wBAAoB,SAAU,CAChD7R,IAAK,UAAY6R,EACjB1O,MAAO,iLACPmV,OAAO,oBAAgB,CACnBwb,gBAAiBE,EAAO7D,QACxBjX,YAAa8a,EAAO9a,YACpB6a,UAAW,YAAYC,EAAO5D,uBAAuB4D,EAAO5D,gBAEhEjY,QAAUC,GArRxCrJ,OAAOilB,IAC7B,IAAI1I,EAAU1e,aAEd,GAAIonB,EAAOzB,kBAEPjH,EAAUja,wBAAwB,CAC9BvB,KAAMkkB,EAAO3B,SACbtiB,SAAU,MACVG,kBAAkB,EAElBC,cAAe,CAAC,UAAW,SAAU,UACrCH,UAAW,KAEfrG,QAAQ6E,KAAK,4CAA4CwlB,EAAO3B,6BAChE/G,EAAUlc,WAAW,oBAAoB4kB,EAAO3B,oBAE/C,CAED,MAAMliB,EAAgB,CAAC,UAAW,UAC5B8jB,EAAUrB,GAAcoB,EAAOjkB,UACjCkkB,GACA9jB,EAAcqB,KAAKyiB,GACvB,MAAMnC,EAAcxG,EAAUne,SAAS,OAAS,GAC1C+mB,EAAuC,QAApBF,EAAOjkB,SAC1BghB,GAAwBe,GACxB,KACNxG,EAAUja,wBAAwB,CAC9BtB,SAAUikB,EAAOjkB,SACjBI,gBACAH,UAAWkkB,GAAoB,KAEnCvqB,QAAQ6E,KAAK,2CAA2CwlB,EAAOjkB,YACvC,QAApBikB,EAAOjkB,UAAsBmkB,EAC7B5I,EAAUlc,WAAW,oBAAoB4kB,EAAOjkB,eAAemkB,KAG/D5I,EAAUlc,WAAW,oBAAoB4kB,EAAOjkB,cAExD,GA+OyE,CAAmBikB,IACzC,EACC,wBAAoB,uBACpB,wBAAoB,MAAO,CACvB7wB,MAAO,iGACPmV,OAAO,oBAAgB,CAAEyb,UAAW,kBAAkBC,EAAO5D,iBAC9D,KAAM,IACT,wBAAoB,kBACpB,wBAAoB,OAAQ,IAAa,qBAAiB4D,EAAOtG,MAAO,IACxE,wBAAoB,mBACpB,wBAAoB,OAAQ,CACxBvqB,MAAO,4EACPmV,OAAO,oBAAgB,CAAEvV,MAAOixB,EAAO7a,cACxC,qBAAiB6a,EAAOzP,OAAQ,IACnC,wBAAoB,oBACpB,wBAAoB,MAAO,CACvBphB,MAAO,0IACPmV,OAAO,oBAAgB,CAAEY,YAAa8a,EAAO9a,eAC9C,KAAM,IACV,GAAuB,MAC1B,YAGV,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,IAClC,wBAAoB,oBACnB,WAAOoS,GAAgB,QACjB,kBAAc,wBAAoB,MAAO,IAAa,sBAAiB,WAAOA,GAAWxe,OAAQ,KAClG,wBAAoB,QAAQ,IACnC,QAEX,wBAAoB,iBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBoL,EAAO,KAAOA,EAAO,GAAME,IAAY,WAAO2V,GAAa,EAAYvtB,MAAQ4X,EAAS,MAC/GlT,KAAM,OACNiS,UAAU,WAAOmU,GAAW1e,aAC5BunB,aAAa,WAAO7I,GAAW1e,aAAe,WAAa,YAC3DzJ,MAAO,2QACPixB,WAAW,cAAUnE,EAAiB,CAAC,WACxC,KAAM,GAAgC,IAAc,CACnD,CAAC,cAAa,WAAOlC,SAG7B,wBAAoB,SAAU,CAC1B5qB,MAAO,2LACPgU,UAAU,WAAOmU,GAAW1e,aAC5BuL,QAAS8X,GACV,EACC,kBAAa,WAAO7rB,GAAO,CAAEjB,MAAO,YACrC,EAAe,OAEvB,MAEP,wBAAoB,oDACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,oBACpB,wBAAoB,SAAU,CAC1BA,MAAO,kQACP8mB,OAAO,WAAOgE,GAAgB,QAAU,QACxC9V,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAY6V,EAAaztB,QAAS,WAAOytB,KAC9E,GACE,kBAAc,kBAAa,8BAAyB,WAAOA,IAAgB,WAAO5pB,IAAe,WAAOC,IAAY,CAAEnB,MAAO,aAC/H,EAAe,KAClB,wBAAoB,8BACpB,iBAAa,aAAa,CAAEX,KAAM,gBAAkB,CAChDY,SAAS,aAAS,IAAM,EACnB,WAAO6qB,KACD,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,yBACpB/V,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,gFAAkF,MAAO,IACzJ+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,oFAAsF,MAAO,IAC7J+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,yGAA2G,MAAO,KAClL,wBAAoB,oCACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,yBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBA,MAAO,uBACP8mB,MAAO,QAAO,WAAOwF,OAAc,WAAOC,MAC3C,GACE,kBAAc,wBAAoB,MAAO,GAAa,CACnDxX,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,EAC1D,wBAAoB,WAAY,CAAEjT,GAAI,aAAe,EACjD,wBAAoB,OAAQ,CAAEvB,EAAG,iIAErC,wBAAoB,SAAU,CAAEuB,GAAI,UAAY,EAC5C,wBAAoB,iBAAkB,CAClCovB,aAAc,IACdvpB,OAAQ,UAEZ,wBAAoB,UAAW,KAAM,EACjC,wBAAoB,cAAe,CAAEwpB,GAAI,UACzC,wBAAoB,cAAe,CAAEA,GAAI,uBAGjD,wBAAoB,iBAAkB,CAClCrvB,GAAI,aACJwU,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KACL,EACC,wBAAoB,OAAQ,CACxBC,OAAQ,KACR,aAAc,aAElB,wBAAoB,OAAQ,CACxBA,OAAQ,MACR,aAAc,aAElB,wBAAoB,OAAQ,CACxBA,OAAQ,OACR,aAAc,gBAGtB,KACJ,wBAAoB,0BACpB3B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CACpDxU,EAAG,4HACHrB,KAAM,UACNC,OAAQ,UACR,eAAgB,OACjB,MAAO,KACV,wBAAoB,oCACpB,wBAAoB,IAAK,GAAa,EAClC,wBAAoB,OAAQ,CACxBkC,EAAG,IACHC,EAAG,IAAM,WAAOsrB,GAAa,IAAO,GACpC7tB,MAAO,KACPC,QAAS,WAAO4tB,GAAa,IAAO,GACpC1tB,KAAM,mBACN1B,OAAQ,eACRwC,MAAO,wCACR,KAAM,EAAe,OAE5B,wBAAoB,eACpB+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,UAAW,CACvDpU,GAAI,KACJC,GAAI,KACJW,GAAI,IACJC,GAAI,IACJtC,KAAM,yBACNkyB,UAAW,qBACZ,MAAO,QAEf,EAAe,KAClB,wBAAoB,OAAQ,GAAa,EACrC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAO9E,IAAa,IAC9E,wBAAoB,OAAQ,GAAa,KAAM,sBAAiB,WAAOC,IAAgB,QAG/F,wBAAoB,2BACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBvsB,MAAO,sBACP8mB,MAAO,QAAO,WAAO0F,MACtB,GACE,kBAAc,wBAAoB,MAAO,GAAa,CACnDzX,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,EAC1D,wBAAoB,WAAY,CAAEjT,GAAI,YAAc,EAChD,wBAAoB,OAAQ,CAAEvB,EAAG,oCAErC,wBAAoB,SAAU,CAAEuB,GAAI,UAAY,EAC5C,wBAAoB,iBAAkB,CAClCovB,aAAc,IACdvpB,OAAQ,UAEZ,wBAAoB,UAAW,KAAM,EACjC,wBAAoB,cAAe,CAAEwpB,GAAI,UACzC,wBAAoB,cAAe,CAAEA,GAAI,uBAGjD,wBAAoB,iBAAkB,CAClCrvB,GAAI,aACJwU,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KACL,EACC,wBAAoB,OAAQ,CACxBC,OAAQ,KACR,aAAc,aAElB,wBAAoB,OAAQ,CACxBA,OAAQ,MACR,aAAc,aAElB,wBAAoB,OAAQ,CACxBA,OAAQ,OACR,aAAc,gBAGtB,KACJ,wBAAoB,qBACpB3B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CACpDxU,EAAG,+BACHrB,KAAM,UACNC,OAAQ,UACR,eAAgB,OACjB,MAAO,KACV,wBAAoB,iBACpB,wBAAoB,IAAK,GAAa,EAClC,wBAAoB,OAAQ,CACxBkC,EAAG,IACHC,EAAG,IAAM,WAAOurB,GAAa,IAAO,GACpC9tB,MAAO,KACPC,QAAS,WAAO6tB,GAAa,IAAO,GACpC3tB,KAAM,mBACN1B,OAAQ,eACRwC,MAAO,wCACR,KAAM,EAAe,OAE5B,wBAAoB,eACpB+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,UAAW,CACvD4B,OAAQ,yBACRzX,KAAM,yBACP,MAAO,QAEf,EAAe,KAClB,wBAAoB,OAAQ,GAAa,EACrC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOstB,IAAa,UAI1F,wBAAoB,aACpBzX,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,4FAA8F,MAAO,KACrK,wBAAoB,qBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,kBAAa,WAAOoB,GAAQ,CAAEpB,MAAO,iDACrC,wBAAoB,OAAQ,GAAa,EACrC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAO0sB,IAAkB,GACnF3X,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,iBAAmB,KAAM,KAC1F,wBAAoB,OAAQ,IAAa,sBAAiB,WAAO2sB,IAAkB,OAG3F5X,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,kEAAoE,QAAS,OAElJ,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,kBAAa,WAAOyB,GAAQ,CAAEzB,MAAO,2BACrC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOysB,IAAe,KAEpF1X,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,kEAAoE,QAAS,UAGpJ,wBAAoB,QAAQ,KAEtCoL,EAAG,OAGX,wBAAoB,aACpB,iBAAaod,GAAc,CACvB1B,MAAO,OACP,UAAmC,SAAxB,WAAO6D,GAClBlC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,CACC4C,SAAS,aAAS,IAAM,IAAK8U,EAAO,MAAQA,EAAO,IAAM,EACjD,wBAAoB,MAAO,CAAE/U,MAAO,mGAAqG,EACrI,wBAAoB,OAAQ,CAAEA,MAAO,8CAAgD,uBACrF,OAEZoL,EAAG,GACJ,EAAe,CAAC,aACnB,iBAAaod,GAAc,CACvB1B,MAAO,OACP,UAAmC,UAAxB,WAAO6D,GAClBlC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,CACC4C,SAAS,aAAS,IAAM,EACnB,WAAO2rB,GAAchmB,OAAS,IACxB,kBAAc,wBAAoB,MAAO,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOgmB,GAAe,CAAC7X,EAAMrF,MACrF,kBAAc,wBAAoB,MAAO,CAC7C7R,IAAK6R,EACL1O,MAAO,4DACR,EACC,iBAAawmB,GAAa,CACtBzS,KAAMA,EACNC,SAAU,IACX,KAAM,EAAe,CAAC,aAE7B,WAEL,kBAAc,wBAAoB,MAAO,GAAa,EACrD,kBAAa,WAAOxT,GAAS,CAAER,MAAO,iCACtC+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,yCAA2C,kBAAmB,SAG3IoL,EAAG,GACJ,EAAe,CAAC,aACnB,iBAAaod,GAAc,CACvB1B,MAAO,MACP,UAAmC,YAAxB,WAAO6D,GAClBlC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,CACC4C,SAAS,aAAS,IAAM,EACnB,WAAO8rB,GAAcnmB,OAAS,IACxB,kBAAc,wBAAoB,MAAO,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOmmB,GAAgBsF,KAC/E,kBAAc,wBAAoB,MAAO,CAC7Cx0B,IAAKw0B,EAAMhyB,KACXW,MAAO,0CACP8mB,MAAOuK,EAAMhyB,MACd,EACC,wBAAoB,MAAO,GAAa,EACpC,kBAAa,WAAOoB,GAAM,CAAET,MAAO,iCACnC,wBAAoB,OAAQ,GAAa,KAAM,qBAAiBqxB,EAAM5Q,OAAQ,MAElF,wBAAoB,OAAQ,IAAa,qBAAiB4Q,EAAMhyB,MAAO,IACxE,EAAe,MAClB,WAEL,kBAAc,wBAAoB,MAAO,GAAa,EACrD,kBAAa,WAAOoB,GAAM,CAAET,MAAO,iCACnC+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,yCAA2C,WAAY,SAGpIoL,EAAG,GACJ,EAAe,CAAC,aACnB,wBAAoB,qBACpB,iBAAaod,GAAc,CACvB1B,MAAO,OACP,UAAmC,cAAxB,WAAO6D,GAClBlC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,CACC4C,SAAS,aAAS,IAAM,EACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,oCACpB,wBAAoB,MAAO,KAAM,CAC7B8U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,KAAM,CAAE/U,MAAO,yEAA2E,QAAS,KACnJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpC+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,CAAE/U,MAAO,yCAA2C,QAAS,KACtH,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,8HACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,IAAY,WAAO+W,GAAcC,SAAWxmB,KAAKkY,IAAI,IAAI,WAAOqO,GAAcC,SAAW,KAChI,MACH,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOD,GAAcC,UAAY,KAAM,IACjG,wBAAoB,SAAU,CAC1BjsB,MAAO,8HACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,IAAY,WAAO+W,GAAcC,SAAWxmB,KAAKkM,IAAI,IAAI,WAAOqa,GAAcC,SAAW,KAChI,UAGX,wBAAoB,kBACpB,wBAAoB,MAAOvD,GAAa,CACpC3T,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,CAAE/U,MAAO,yCAA2C,OAAQ,KACrH,wBAAoB,MAAO2oB,GAAa,EACpC,wBAAoB,SAAU,CAC1B3oB,MAAO,8HACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,IAAY,WAAO+W,GAAcE,WAAazmB,KAAKkY,IAAI,OAAO,WAAOqO,GAAcE,WAAa,IAAKoF,QAAQ,MACpJ,MACH,wBAAoB,OAAQ1I,IAAa,sBAAiB,WAAOoD,GAAcE,YAAa,IAC5F,wBAAoB,SAAU,CAC1BlsB,MAAO,8HACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,IAAY,WAAO+W,GAAcE,WAAazmB,KAAKkM,IAAI,KAAO,WAAOqa,GAAcE,WAAa,IAAKoF,QAAQ,MACpJ,UAGX,wBAAoB,kBACpB,wBAAoB,MAAOzI,GAAa,CACpC9T,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,CAAE/U,MAAO,yCAA2C,QAAS,KACtH,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB+U,EAAO,MAAQA,EAAO,IAAOE,IAAa,WAAO+W,GAAwB,WAAI/W,GACpGjV,MAAO,gJACR,IAAK+U,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,SAAU,CAAE1X,MAAO,qBAAqB,eAAgB,IAC5E,wBAAoB,SAAU,CAAEA,MAAO,yBAAyB,SAAU,IAC1E,wBAAoB,SAAU,CAAEA,MAAO,8BAA8B,iBAAkB,IACvF,wBAAoB,SAAU,CAAEA,MAAO,SAAW,SAAU,IAC5D,wBAAoB,SAAU,CAAEA,MAAO,cAAgB,cAAe,IACtE,wBAAoB,SAAU,CAAEA,MAAO,mCAAmC,QAAS,IACnF,wBAAoB,SAAU,CAAEA,MAAO,qBAAqB,MAAO,IACnE,wBAAoB,SAAU,CAAEA,MAAO,oBAAoB,MAAO,MAChE,KAAuB,CAC7B,CAAC,gBAAe,WAAO2uB,GAAcG,iBAG7C,wBAAoB,sBACpB,wBAAoB,MAAOrD,GAAa,CACpC/T,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,CAAE/U,MAAO,yCAA2C,SAAU,KACvH,wBAAoB,MAAO+oB,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBhU,EAAO,MAAQA,EAAO,IAAOE,IAAa,WAAO+W,GAA4B,eAAI/W,GACxGlT,KAAM,QACN4P,IAAK,MACLgM,IAAK,OACL4T,KAAM,KACNvxB,MAAO,4BACR,KAAM,KAAuB,CAC5B,CACI,cACA,WAAOgsB,GAAcI,oBAChB,EACL,CAAEoF,QAAQ,OAGlB,wBAAoB,OAAQxI,IAAa,sBAAiB,WAAOgD,GAAcI,gBAAkB,KAAM,WAKvHrX,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,qCAAuC,MAAO,KAC9G,wBAAoB,qBACpB,wBAAoB,MAAO,KAAM,CAC7B+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,KAAM,CAAE/U,MAAO,yEAA2E,MAAO,KACjJ,wBAAoB,MAAOipB,GAAa,EACpC,wBAAoB,SAAU,CAC1BjpB,MAAO,6FACPgV,QAASD,EAAO,MAAQA,EAAO,IAE3B,IAAIwb,KAAU,WAAOvqB,MAAqB,WAAOA,GAAP,IAA4BuqB,KAC3E,aACH,wBAAoB,SAAU,CAC1BvwB,MAAO,gFACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,GAAYH,EAAKI,MAAM,kBAC9D,YACH,wBAAoB,SAAU,CAC1BlV,MAAO,iGACPgV,QAAS4a,IACV,sBAKnBxkB,EAAG,GACJ,EAAe,CAAC,aACnB,wBAAoB,gCACpB,iBAAaod,GAAc,CACvB1B,MAAO,SACP,UAAmC,uBAAxB,WAAO6D,GAClBlC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,CACC4C,SAAS,aAAS,IAAM,EACpB,wBAAoB,MAAOipB,GAAa,CACR,UAA3B,WAAO+B,KACD,kBAAc,wBAAoB,WAAW,CAAEpuB,IAAK,GAAK,EACxD,wBAAoB,MAAOssB,GAAa,CACpCpU,EAAO,MAAQA,EAAO,KAAM,wBAAoB,KAAM,CAAE/U,MAAO,oEAAsE,gBAAiB,KACtJ,wBAAoB,OAAQopB,IAAa,sBAAiB,WAAO8B,GAAkBtlB,QAAU,KAAM,MAEvG,wBAAoB,MAAOyjB,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAOmC,GAAyB7M,KACxF,kBAAc,wBAAoB,SAAU,CAChD9hB,IAAK,iBAAiB8hB,EAAMuD,MAC5BliB,MAAO,4HACP8mB,MAAO,OACP9R,QAAUC,IA1pBnB,IAACvX,KA0pBqDihB,EAAMuD,KAzpB3E,GAAKxkB,GAASwtB,EAAiB7tB,MAAMuI,QAEjDslB,EAAiB7tB,MAAMiqB,OAAO5pB,EAAO,KAwpBF,EACC,iBAAa8oB,GAAa,CACtBzS,KAAM4K,EAAM5K,KACZC,SAAU,IACX,KAAM,EAAe,CAAC,SACzBe,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,oCAAsC,QAAS,KACjH,EAAespB,MAClB,QACH,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY7jB,KAAKkY,IAAI,EAAG,GAAI,WAAOuN,GAAkBtlB,QAAUsc,KAC3G,kBAAc,wBAAoB,MAAO,CAC7CrlB,IAAK,cAAcqlB,IACnBliB,MAAO,mIACR,UACH,SAER,wBAAoB,MAAOupB,GAAa,EACpC,wBAAoB,MAAOC,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO4B,GAAmBrX,KAClF,kBAAc,wBAAoB,SAAU,CAChDlX,IAAK,YAAYkX,EAAKjS,KACtB9B,MAAO,6KACPgU,UAAU,WAAOkX,GAAkBtlB,QAAU,EAC7CoP,QAAUC,IAAW,OAtrBtCwW,EAsrByD1X,EAAK1U,UArrBjF6rB,EAAiB7tB,MAAMuI,QAAU,GAErCslB,EAAiB7tB,MAAMgR,KAAKod,IAHN,IAACA,IAurBgB,EACC,iBAAajF,GAAa,CACtBzS,KAAMA,EACNC,SAAU,IACX,KAAM,EAAe,CAAC,SACzBe,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE/U,MAAO,yCAA2C,QAAS,KACtH,EAAeypB,MAClB,WAGZ,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1B1pB,MAAO,mGACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,GAAY0V,EAAYttB,MAAQ,OACvE,SACH,wBAAoB,SAAU,CAC1B2C,MAAO,2IACPgU,SAA8C,KAApC,WAAOkX,GAAkBtlB,OACnCoP,QAASmb,IACV,aAAc,EAAexG,OAErC,OACA,kBAAc,wBAAoB,WAAW,CAAE9sB,IAAK,GAAK,CACxDkY,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,qCAAuC,EACnG,wBAAoB,KAAM,CAAEA,MAAO,oEAAsE,aACzG,wBAAoB,OAAQ,CAAEA,MAAO,yCAA2C,cAChF,KACJ,wBAAoB,MAAO4pB,GAAa,EACpC,wBAAoB,MAAOC,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO6B,GAAwB7e,KACvF,kBAAc,wBAAoB,SAAU,CAChDhQ,IAAK,SAASgQ,IACd7M,OAAO,oBAAgB,CAAC,gEAAgE,WAAOmrB,KAAuBte,EAC5G,4DACA,yFACVmI,QAAUC,GAAYkW,EAAkB9tB,MAAQwP,IACjD,qBAAiBA,GAAY,GAA6Bid,MAC7D,WAGZ,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1B/pB,MAAO,mGACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,GAAYgW,EAAe5tB,MAAQ,SAC1E,YACH,wBAAoB,SAAU,CAC1B2C,MAAO,oIACPgU,WAAW,WAAOmX,GAClBnW,QAASob,IACV,WAAY,EAAepG,OAEnC,SAGf5e,EAAG,GACJ,EAAe,CAAC,aACnB,wBAAoB,sBACpB,iBAAaqmB,GAAe,CACxB,WAAW,WAAOtJ,GAAWje,eAC7BkE,SAAS,WAAO+Z,GAAWle,YAC3Bwe,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,IAAY,WAAOkT,GAAWje,gBAAiB,IACtF,KAAM,EAAe,CAAC,UAAW,aACpC,wBAAoB,6BACpB,iBAAase,GAAc,CACvB1B,MAAO,OACP,WAAW,WAAO+D,GAClBpC,QAAS1T,EAAO,MAAQA,EAAO,IAAOE,GAAY4V,EAAqBxtB,OAAQ,IAChF,CACC4C,SAAS,aAAS,IAAM,EACnB,WAAOkoB,GAA6B,qBAC9B,kBAAc,wBAAoB,MAAO8B,GAAa,EACrD,wBAAoB,MAAOC,IAAa,sBAAiB,WAAO/B,GAAWte,oBAAqB,QAEjG,kBAAc,wBAAoB,MAAOsgB,GAAa,sDAEjE/e,EAAG,GACJ,EAAe,CAAC,aACnB,wBAAoB,qBACpB,iBAAa,aAAa,CAAE/L,KAAM,eAAiB,CAC/CY,SAAS,aAAS,IAAM,EACnB,WAAO8qB,KACD,kBAAc,wBAAoB,MAAOX,GAAa,EACrD,iBAAasH,GAAY,CACrB1xB,MAAO,gBACP,cAAc,WAAOgrB,GACrB,eAAe,WAAOY,GACtB,uBAAwB,CACpBvnB,IAAI,WAAOioB,GACXhoB,OAAO,WAAOioB,GACdhoB,IAAI,WAAOioB,GACXhoB,SAAS,WAAOkoB,IAAmB,EACnCjoB,SAAS,WAAOkoB,IAAmB,EACnCjoB,QAAS,CAAC,CAAE3C,MAAM,WAAOJ,GAAYuP,YAAatM,OAAQ,EAAGC,SAAU,UAE3E8sB,YAAatB,IACd,KAAM,EAAe,CAAC,aAAc,cAAe,0BACtD,wBAAoB,yBACpB,wBAAoB,SAAU,CAC1BrwB,MAAO,2LACPgV,QAASD,EAAO,MAAQA,EAAO,IAAOE,GAAY8V,EAAW1tB,OAAQ,IACtE,gBAEL,wBAAoB,QAAQ,KAEtC+N,EAAG,MAInB,ICt0CJ,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCGjEwmB,GAAOxxB,EAAiB,OAAQ,CACpC,CACE,OACA,CACEG,EAAG,qFACH1D,IAAK,aCLLg1B,GAAOzxB,EAAiB,OAAQ,CACpC,CACE,OACA,CACEG,EAAG,+WACH1D,IAAK,aCLLi1B,GAAS1xB,EAAiB,SAAU,CACxC,CACE,OACA,CACEG,EAAG,2PACH1D,IAAK,UAGT,CAAC,OAAQ,CAAE0D,EAAG,wBAAyB1D,IAAK,aCfxC,GAAa,CAAEmD,MAAO,8CACtB,GAAa,CAAEA,MAAO,gCACtB,GAAa,CACfgU,SAAU,GACVhU,MAAO,oKAEL,GAAa,CAAEA,MAAO,+JACtB,GAAa,CAAEA,MAAO,+BCJ5B,IDQ6B,qBAAiB,CAC1C8T,OAAQ,eACRM,MAAO,CAAC,QAAS,oBACjB,KAAAC,CAAMC,GACF,MAAMyd,GAAY,IAAAxoB,MAAI,GAItB,OAHA,IAAA4W,WAAU,KACN4R,EAAU10B,OAAQ,IAEf,CAACyX,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C/U,OAAO,oBAAgB,CAAC,8IAA8I,WAAO+xB,GAAa,cAAgB,cAC1M5c,MAAO,CAAE6c,YAAa,SACvB,EACC,wBAAoB,wBACpBjd,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,iGAAmG,MAAO,IACxK+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CACnD/U,MAAO,mGACPmV,MAAO,CAAE,mBAAoB,0EAC9B,MAAO,KACV,wBAAoB,sBACpBJ,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,yFAA2F,MAAO,IAClK+U,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE/U,MAAO,6FAA+F,MAAO,KACtK,wBAAoB,2CACpB,wBAAoB,SAAU,CAC1BA,MAAO,+PACP8mB,MAAO,OACP9R,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYH,EAAKI,MAAM,sBAC5D,EACC,kBAAa,WAAOpU,GAAW,CAAEd,MAAO,cAE5C,wBAAoB,mBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,mBACpB+U,EAAO,KAAOA,EAAO,IAAK,uBAAmB,kpBAA6pB,KAC1sB,wBAAoB,mBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B/U,MAAO,8MACPgV,QAASD,EAAO,KAAOA,EAAO,GAAME,GAAYH,EAAKI,MAAM,WAC5D,CACCH,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,0FAA4F,MAAO,KACjK,kBAAa,WAAO4xB,IAAO,CAAE5xB,MAAO,wEACpC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE/U,MAAO,yFAA2F,UAAW,OAEzK,wBAAoB,SAAU,GAAY,EACtC,kBAAa,WAAO6xB,IAAO,CAAE7xB,MAAO,WACpC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,KAAM,SAAU,WAIlF,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnCA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE/U,MAAO,sCAAwC,MAAO,IAC7G+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,KAAM,8BAA+B,KACxF,wBAAoB,MAAO,GAAY,EACnC,kBAAa,WAAO+c,IAAS,CAAE9xB,MAAO,WACtC+U,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,KAAM,kBAAmB,SAGxF,GAEX,IExEE,GAAa,CAAE/U,MAAO,mBAO5B,IAA6B,qBAAiB,CAC1C8T,OAAQ,MACR,KAAAO,CAAMC,GACF,MAAM2d,GAAW,IAAA1oB,KAAI,UACf4e,EAAY7e,KAIlBsC,eAAesmB,IACXD,EAAS50B,MAAQ,aACX,IAAA80B,kBACAhK,EAAUxc,YACpB,CACA,MAAO,CAACmJ,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,oBACpB,iBAAa,aAAa,CACtB1V,KAAM,aACNkD,KAAM,UACP,CACCtC,SAAS,aAAS,IAAM,CACE,YAArB,WAAOgyB,KACD,kBAAc,iBAAaG,GAAc,CACxCv1B,IAAK,SACLw1B,QAASH,EACTI,oBAAoB,WAAOtsB,KAC5B,KAAM,EAAe,CAAC,0BACtB,kBAAc,iBAAausB,GAAU,CACpC11B,IAAK,OACL21B,eAAgBzd,EAAO,KAAOA,EAAO,GAAME,GAAYgd,EAAS50B,MAAQ,eAGpF+N,EAAG,MAInB,ICrCJ,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCHvEqnB,EAAE,KACE,MAAMC,GAAM,IAAAC,WAAUC,IAAKC,IAAI,KAC/BH,EAAII,MAAM,QACVL,EAAEM,QAAQC,GAAG,WAAY,IAAMN,EAAIO","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/hasA11yProp.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/isEmptyString.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/mergeClasses.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toKebabCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toPascalCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/shared/src/utils/toCamelCase.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/Icon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/map.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/scroll.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/box.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/maximize.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/book-open.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/file-text.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/send.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/activity.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/dices.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/coins.js","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//battle/cardRegistry.ts","src://tavern_helper_template/src//battle/enemyRegistry.ts","src://tavern_helper_template/src//fullscreen.ts","src://tavern_helper_template/src//responseParser.ts","src://tavern_helper_template/src//gameStore.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/settings-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/skull.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/layers.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/trash-2.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/x.js","src://tavern_helper_template/src//battle/effects.ts","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sword.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/footprints.js","src://tavern_helper_template/src//components/DungeonCard.vue","webpack://tavern_helper_template/src//components/DungeonCard.vue?fd36","src://tavern_helper_template/src//components/DungeonDice.vue","webpack://tavern_helper_template/src//components/DungeonDice.vue?4d80","webpack://tavern_helper_template/./src//components/CombatView.vue?260e","src://tavern_helper_template/src//battle/algorithms.ts","webpack://tavern_helper_template/src//components/CombatView.vue?359a","src://tavern_helper_template/src//components/DungeonModal.vue","webpack://tavern_helper_template/src//components/DungeonModal.vue?bc30","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/pencil.js","src://tavern_helper_template/src//components/SaveLoadPanel.vue","webpack://tavern_helper_template/src//components/SaveLoadPanel.vue?6d12","webpack://tavern_helper_template/./src//components/GameView.vue?fd3b","webpack://tavern_helper_template/src//components/GameView.vue?b90d","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/play.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/star.js","src://tavern_helper_template/node_modules/.pnpm/lucide-vue-next@0.564.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/lucide-vue-next/dist/esm/icons/github.js","src://tavern_helper_template/src//components/SplashScreen.vue","webpack://tavern_helper_template/src//components/SplashScreen.vue?b8bd","webpack://tavern_helper_template/./src//App.vue?40f8","webpack://tavern_helper_template/src//App.vue?bf93","src://tavern_helper_template/src//index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasA11yProp };\n//# sourceMappingURL=hasA11yProp.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString };\n//# sourceMappingURL=isEmptyString.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\n\nexport { mergeClasses };\n//# sourceMappingURL=mergeClasses.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\n\nexport { toKebabCase };\n//# sourceMappingURL=toKebabCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { toCamelCase } from './toCamelCase.js';\n\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\n\nexport { toPascalCase };\n//# sourceMappingURL=toPascalCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\n\nexport { toCamelCase };\n//# sourceMappingURL=toCamelCase.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { hasA11yProp } from './shared/src/utils/hasA11yProp.js';\nimport { isEmptyString } from './shared/src/utils/isEmptyString.js';\nimport { mergeClasses } from './shared/src/utils/mergeClasses.js';\nimport { toKebabCase } from './shared/src/utils/toKebabCase.js';\nimport { toPascalCase } from './shared/src/utils/toPascalCase.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      ),\n      ...!slots.default && !hasA11yProp(props) && { \"aria-hidden\": \"true\" }\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Map = createLucideIcon(\"map\", [\n  [\n    \"path\",\n    {\n      d: \"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z\",\n      key: \"169xi5\"\n    }\n  ],\n  [\"path\", { d: \"M15 5.764v15\", key: \"1pn4in\" }],\n  [\"path\", { d: \"M9 3.236v15\", key: \"1uimfh\" }]\n]);\n\nexport { Map as default };\n//# sourceMappingURL=map.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scroll = createLucideIcon(\"scroll\", [\n  [\"path\", { d: \"M19 17V5a2 2 0 0 0-2-2H4\", key: \"zz82l3\" }],\n  [\n    \"path\",\n    {\n      d: \"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3\",\n      key: \"1ph1d7\"\n    }\n  ]\n]);\n\nexport { Scroll as default };\n//# sourceMappingURL=scroll.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Box = createLucideIcon(\"box\", [\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Box as default };\n//# sourceMappingURL=box.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Maximize = createLucideIcon(\"maximize\", [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n]);\n\nexport { Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BookOpen = createLucideIcon(\"book-open\", [\n  [\"path\", { d: \"M12 7v14\", key: \"1akyts\" }],\n  [\n    \"path\",\n    {\n      d: \"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z\",\n      key: \"ruj8y\"\n    }\n  ]\n]);\n\nexport { BookOpen as default };\n//# sourceMappingURL=book-open.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"file-text\", [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"send\", [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Dices = createLucideIcon(\"dices\", [\n  [\"rect\", { width: \"12\", height: \"12\", x: \"2\", y: \"10\", rx: \"2\", ry: \"2\", key: \"6agr2n\" }],\n  [\n    \"path\",\n    { d: \"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6\", key: \"1o487t\" }\n  ],\n  [\"path\", { d: \"M6 18h.01\", key: \"uhywen\" }],\n  [\"path\", { d: \"M10 14h.01\", key: \"ssrbsk\" }],\n  [\"path\", { d: \"M15 6h.01\", key: \"cblpky\" }],\n  [\"path\", { d: \"M18 9h.01\", key: \"2061c0\" }]\n]);\n\nexport { Dices as default };\n//# sourceMappingURL=dices.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coins = createLucideIcon(\"coins\", [\n  [\"circle\", { cx: \"8\", cy: \"8\", r: \"6\", key: \"3yglwk\" }],\n  [\"path\", { d: \"M18.09 10.37A6 6 0 1 1 10.34 18\", key: \"t5s6rm\" }],\n  [\"path\", { d: \"M7 6h1v4\", key: \"1obek4\" }],\n  [\"path\", { d: \"m16.71 13.88.7.71-2.82 2.82\", key: \"1rbuyh\" }]\n]);\n\nexport { Coins as default };\n//# sourceMappingURL=coins.js.map\n","// \n//    \n// \n\n//   \nexport enum CardType {\n  PHYSICAL = '',\n  MAGIC = '',\n  FUNCTION = '',\n  DODGE = '',\n}\n\n//   \n/**  */\nexport type DamageMode = 'relative' | 'fixed' | 'mixed';\n\n/**\n * \n * - relative:  = FinalPoint * scale + scaleAddition\n * - fixed:     = value\n * - mixed:     = baseValue + FinalPoint * scale + scaleAddition\n */\nexport interface DamageLogic {\n  mode: DamageMode;\n  /** relative / mixed:  += FinalPoint * scale */\n  scale?: number;\n  /** relative / mixed:  += scaleAddition */\n  scaleAddition?: number;\n  /** fixed:  */\n  value?: number;\n  /** mixed:  */\n  baseValue?: number;\n}\n\n//   \nexport type RerollTarget = 'self' | 'enemy' | 'none';\n\nexport interface CardTraits {\n  /**  */\n  combo: boolean;\n  /**  */\n  reroll: RerollTarget;\n  /**  */\n  draw: boolean;\n}\n\n//   \nexport interface CardCalculation {\n  /**  1.0 */\n  multiplier: number;\n  /**  0 */\n  addition: number;\n}\n\n//   \n\n/**  */\nexport type EffectValueMode = 'fixed' | 'point_scale';\n\n/**  */\nexport interface CardEffect {\n  /**  */\n  kind:\n    | 'apply_buff'     //  Buff/Debuff\n    | 'heal'           // \n    | 'restore_mana'   // \n    | 'cleanse';       //  Debuff\n\n  //  apply_buff  \n  /** kind = apply_buff  */\n  effectType?: EffectType;\n  /** self = enemy =  */\n  target?: 'self' | 'enemy';\n  /**  */\n  restrictedTypes?: CardType[];\n\n  //   \n  /** fixed = point_scale = FinalPoint * scale */\n  valueMode: EffectValueMode;\n  /** fixed  */\n  fixedValue?: number;\n  /** point_scale / = FinalPoint * scale */\n  scale?: number;\n\n  //  cleanse  \n  /**  Debuff kind = cleanse  */\n  cleanseTypes?: EffectType[];\n}\n\n//   \nexport interface CardData {\n  id: string;\n  name: string;\n  type: CardType;\n  /**  */\n  category: string;\n  /**  Type ==   0 */\n  manaCost: number;\n  /**  */\n  calculation: CardCalculation;\n  /**  */\n  damageLogic: DamageLogic;\n  /**  */\n  traits: CardTraits;\n  /**  */\n  cardEffects: CardEffect[];\n  /**  */\n  description: string;\n  /**  */\n  image?: string;\n}\n\n//  /Buff  \nexport enum EffectType {\n  /**    -1 */\n  BARRIER = '',\n  /**    */\n  ARMOR = '',\n  /**    */\n  BIND = '',\n  /**    3 / */\n  DEVOUR = '',\n  /**    */\n  POISON = '',\n  /**    */\n  BURN = '',\n  /**    */\n  BLEED = '',\n  /**    */\n  VULNERABLE = '',\n  /**    */\n  REGEN = '',\n  /**    */\n  IGNITE_AURA = '',\n  /**    */\n  STUN = '',\n  /**    */\n  CHARGE = '',\n  /**    */\n  COLD = '',\n  /**    */\n  NON_LIVING = '',\n  /**    */\n  MANA_DRAIN = '',\n  /**   + */\n  MANA_SPRING = '',\n}\n\n/**  */\nexport type EffectPolarity = 'buff' | 'debuff' | 'mixed' | 'trait' | 'special';\n\n//   \nexport interface EffectInstance {\n  type: EffectType;\n  /**  /  */\n  stacks: number;\n  /**  */\n  polarity: EffectPolarity;\n  /**\n   * \n   *  ['', ''] \n   */\n  restrictedTypes?: CardType[];\n  /** / */\n  source?: string;\n}\n\n//   \nexport enum GamePhase {\n  EXPLORE = 'EXPLORE',\n  COMBAT = 'COMBAT',\n}\n\n//   \nexport enum CombatPhase {\n  /**  */\n  TURN_START = 'TURN_START',\n  /**  */\n  DRAW_PHASE = 'DRAW_PHASE',\n  /**  */\n  INTENT_PREVIEW = 'INTENT_PREVIEW',\n  /**  */\n  PLAYER_INPUT = 'PLAYER_INPUT',\n  /**  */\n  RESOLUTION = 'RESOLUTION',\n  /**  */\n  DISCARD_PHASE = 'DISCARD_PHASE',\n  /**  */\n  TURN_END = 'TURN_END',\n  /**  */\n  WIN = 'WIN',\n  /**  */\n  LOSE = 'LOSE',\n}\n\n//   \nexport interface EntityStats {\n  hp: number;\n  maxHp: number;\n  mp: number;\n  /**  */\n  minDice: number;\n  maxDice: number;\n  /**  */\n  effects: EffectInstance[];\n}\n\n//   \nexport type ClashOutcome = 'player_win' | 'enemy_win' | 'draw' | 'dodge_success' | 'no_clash';\n\nexport interface ClashResult {\n  outcome: ClashOutcome;\n  playerFinalPoint: number;\n  enemyFinalPoint: number;\n  message: string;\n}\n\n//   \nexport interface CombatState {\n  turn: number;\n  phase: CombatPhase;\n  /**  */\n  actionsRemaining: number;\n\n  // \n  playerBaseDice: number;\n  enemyBaseDice: number;\n\n  // \n  playerHand: CardData[];\n  playerDeck: CardData[];\n  discardPile: CardData[];\n\n  // \n  enemyDeck: CardData[];\n  enemyDiscard: CardData[];\n  enemyIntentCard: CardData | null;\n  enemyPredictedPoint: number;\n\n  // \n  playerSelectedCard: CardData | null;\n\n  // \"\"\n  lastPlayedCard: CardData | null;\n\n  // \n  logs: string[];\n}\n\n//   \nexport interface RelicModifiers {\n  /**  */\n  globalMultiplier: number;\n  /**  */\n  globalAddition: number;\n}\n\n//   \nexport interface PointCalculationContext {\n  baseDice: number;\n  card: CardData;\n  entityEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n}\n\n//   \nexport interface DamageCalculationContext {\n  finalPoint: number;\n  card: CardData;\n  attackerEffects: EffectInstance[];\n  defenderEffects: EffectInstance[];\n  relicModifiers: RelicModifiers;\n  /**  */\n  isTrueDamage?: boolean;\n}\n\n//   AI  \n\n/**  AI    */\nexport interface EnemyAIContext {\n  /**  effects */\n  enemyStats: Readonly<EntityStats>;\n  /**  effects */\n  playerStats: Readonly<EntityStats>;\n  /**  */\n  deck: CardData[];\n  /**  */\n  turn: number;\n  /**\n   * \n   *  { hasUsedHeal: false } \n   */\n  flags: Record<string, any>;\n}\n\n/**\n * \n * \n * \n */\nexport type EnemyAISelectCard = (ctx: EnemyAIContext) => CardData;\n\n/**  */\nexport interface EnemyDefinition {\n  /**  */\n  name: string;\n  /**  */\n  stats: EntityStats;\n  /**  */\n  deck: CardData[];\n  /**  AI  */\n  selectCard: EnemyAISelectCard;\n}\n","// \n//    \n//  UI  MVU  _string[]\n//   getCardByName()  CardData\n// \n\nimport { CardType, EffectType, type CardData } from '../types';\n\n//   \n\n/**  */\nconst : CardData = {\n  id: 'basic_physical',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '1',\n};\n\n/** +2 */\nconst 2: CardData = {\n  id: 'basic_physical_plus_2',\n  name: '+2',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+21',\n};\n\n/** +4 */\nconst 4: CardData = {\n  id: 'basic_physical_plus_4',\n  name: '+4',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 4 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+41',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_magic',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.5, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'focus_magic_attack',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 3,\n  calculation: { multiplier: 1.5, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '3MP1.5',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_shield',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'apply_buff',\n      effectType: EffectType.ARMOR,\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n/**  */\nconst : CardData = {\n  id: 'basic_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/** +1-1 */\nconst : CardData = {\n  id: 'burn_spark_mark',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: -1 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+1-1',\n};\n\n/** +2+2 */\nconst : CardData = {\n  id: 'burn_tar_splash',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: true, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '+2+2',\n};\n\n/** 0.5+ */\nconst : CardData = {\n  id: 'burn_scorch_wind',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.5, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '0.5',\n};\n\n/** -21+1 */\nconst : CardData = {\n  id: 'burn_scorch',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: -2 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.VULNERABLE, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '-21+1',\n};\n\n/** 1+1 */\nconst : CardData = {\n  id: 'burn_flame_strike',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '1+1',\n};\n\n/** 1+2 */\nconst : CardData = {\n  id: 'burn_soul_bolt',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 2,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n  ],\n  description: '1+2',\n};\n\n/** *20.6+1 */\nconst : CardData = {\n  id: 'burn_body_lunge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 2.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 0.6, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '*20.6+1',\n};\n\n/** *0.81 */\nconst : CardData = {\n  id: 'burn_detonation',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 6,\n  calculation: { multiplier: 0.8, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'point_scale', scale: 1.0 },\n  ],\n  description: '*0.81',\n};\n\n/** 2+11 */\nconst : CardData = {\n  id: 'burn_inferno_judgement',\n  name: '',\n  type: CardType.MAGIC,\n  category: '',\n  manaCost: 4,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'relative', scale: 1.0, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '2+11',\n};\n\n/** +2+1 */\nconst : CardData = {\n  id: 'burn_hell_waves',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'enemy', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BURN, target: 'self', valueMode: 'fixed', fixedValue: 2 },\n    { kind: 'apply_buff', effectType: EffectType.BARRIER, target: 'self', valueMode: 'fixed', fixedValue: 1 },\n  ],\n  description: '+2+1',\n};\n\n/**  CombatView  */\nconst : CardData = {\n  id: 'burn_char_convert',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n//   \n\n/**    */\nconst : CardData = {\n  id: 'enemy_charge',\n  name: '',\n  type: CardType.PHYSICAL,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1, addition: 1 },\n  damageLogic: { mode: 'relative', scale: 1, scaleAddition: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '+11',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_slime_dodge',\n  name: '',\n  type: CardType.DODGE,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [],\n  description: '',\n};\n\n/**    */\nconst : CardData = {\n  id: 'enemy_heal',\n  name: '',\n  type: CardType.FUNCTION,\n  category: '',\n  manaCost: 0,\n  calculation: { multiplier: 1.0, addition: 0 },\n  damageLogic: { mode: 'fixed', value: 0 },\n  traits: { combo: false, reroll: 'none', draw: false },\n  cardEffects: [\n    {\n      kind: 'heal',\n      target: 'self',\n      valueMode: 'point_scale',\n      scale: 1.0,           //  = FinalPoint * 1.0\n    },\n  ],\n  description: '1',\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst CARD_REGISTRY: ReadonlyMap<string, CardData> = new Map<string, CardData>([\n  [.name, ],\n  [2.name, 2],\n  [4.name, 4],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getCardByName(name: string): CardData | undefined {\n  return CARD_REGISTRY.get(name);\n}\n\n/**  CardData  */\nexport function resolveCardNames(names: string[]): CardData[] {\n  return names\n    .map((n) => CARD_REGISTRY.get(n))\n    .filter((c): c is CardData => c !== undefined);\n}\n\n/**  */\nexport function getAllCardNames(): string[] {\n  return [...CARD_REGISTRY.keys()];\n}\n\n/**  */\nexport function getAllCards(): CardData[] {\n  return [...CARD_REGISTRY.values()];\n}\n\n","// \n//    \n//   MVU  _ \n//   getEnemyByName()  EnemyDefinition\n// \n\nimport { EffectType, type EnemyAIContext, type EnemyDefinition } from '../types';\nimport { getCardByName } from './cardRegistry';\n\n//   \n\n/**  */\nfunction pickCard(ctx: EnemyAIContext, name: string) {\n  return ctx.deck.find(c => c.name === name) ?? ctx.deck[0]!;\n}\n\n/**  */\nfunction weightedRandom<T>(options: { value: T; weight: number }[]): T {\n  const total = options.reduce((s, o) => s + o.weight, 0);\n  let roll = Math.random() * total;\n  for (const opt of options) {\n    roll -= opt.weight;\n    if (roll <= 0) return opt.value;\n  }\n  return options[options.length - 1]!.value;\n}\n\n// \n//  \n// \n\n//   \n\nconst : EnemyDefinition = {\n  name: '',\n\n  stats: {\n    hp: 12,\n    maxHp: 12,\n    mp: 0,\n    minDice: 2,\n    maxDice: 5,\n    effects: [\n      { type: EffectType.REGEN, stacks: 1, polarity: 'buff' },\n    ],\n  },\n\n  deck: [\n    getCardByName('')!,\n    getCardByName('')!,\n    getCardByName('')!,\n  ],\n\n  /**\n   * AI \n   * - HP > 40%70%  / 30% \n   * - HP   40%flags.hasUsedHeal !== true\n   * - HP  40% /\n   */\n  selectCard(ctx: EnemyAIContext) {\n    const hpRatio = ctx.enemyStats.hp / ctx.enemyStats.maxHp;\n\n    if (hpRatio <= 0.4 && !ctx.flags.hasUsedHeal) {\n      ctx.flags.hasUsedHeal = true;\n      return pickCard(ctx, '');\n    }\n\n    const chosen = weightedRandom([\n      { value: '', weight: 70 },\n      { value: '', weight: 30 },\n    ]);\n    return pickCard(ctx, chosen);\n  },\n};\n\n//   \n\n/**\n *  name \n * \n */\nconst ENEMY_REGISTRY: ReadonlyMap<string, EnemyDefinition> = new Map<string, EnemyDefinition>([\n  [.name, ],\n]);\n\n//   API \n\n/**  undefined */\nexport function getEnemyByName(name: string): EnemyDefinition | undefined {\n  return ENEMY_REGISTRY.get(name);\n}\n\n/**  */\nexport function getAllEnemyNames(): string[] {\n  return [...ENEMY_REGISTRY.keys()];\n}\n","/**  F11 */\nexport function toggleFullScreen(): void {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen().catch((err: Error) => {\n      console.warn(`Fullscreen error: ${err.message}`);\n    });\n  } else {\n    document.exitFullscreen();\n  }\n}\n","/**\n * LLM \n *  AI  XML \n */\n\nexport interface ParsedResponse {\n  /**  <maintext>/<maintxt>/<content>/<> */\n  mainText: string;\n  /** <option>...</option> A-D E  [Leave] */\n  options: string[];\n  /** <sum>...</sum>  */\n  summary: string;\n  /** <UpdateVariable>/<update>  */\n  variableUpdate: string;\n  /** <UpdateVariable>  <JSONPatch>...</JSONPatch>  */\n  jsonPatch: string;\n  /**  */\n  rawText: string;\n  /**  E  */\n  hasOptionE: boolean;\n  /**  [Leave]  */\n  hasLeave: boolean;\n}\n\n/**\n *  XML \n */\nfunction extractTag(text: string, tagName: string): string {\n  const escapedTagName = tagName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  // \n  const regex = new RegExp(`(?:^|[\\\\r\\\\n]|>)\\\\s*<${escapedTagName}(?:\\\\s[^>]*)?>([\\\\s\\\\S]*?)</${escapedTagName}>`, 'ig');\n  let match: RegExpExecArray | null;\n\n  while ((match = regex.exec(text)) !== null) {\n    const fullMatch = match[0];\n    const openTagEnd = fullMatch.indexOf('>');\n    if (openTagEnd >= 0) {\n      //  \"<maintext>, <option>\"\n      const afterOpen = fullMatch.slice(openTagEnd + 1).trimStart();\n      const firstChar = afterOpen[0];\n      if (firstChar === ',' || firstChar === '') continue;\n    }\n    return match[1].trim();\n  }\n\n  return '';\n}\n\n/**\n * \n */\nfunction extractTagByPriority(text: string, tagNames: string[]): string {\n  for (const tagName of tagNames) {\n    const content = extractTag(text, tagName);\n    if (content) return content;\n  }\n  return '';\n}\n\n/**\n * \n * <think>, <thinking>, <Think>, <Thinking> \n *  <thinking> ... </think>\n * \n */\nfunction removeThinkBlock(text: string): string {\n  const thinkTagRegex = /<\\s*(\\/?)\\s*(think|thinking)\\b[^>]*>/gi;\n\n  let result = '';\n  let depth = 0;\n  let lastIndex = 0;\n  let match: RegExpExecArray | null;\n\n  while ((match = thinkTagRegex.exec(text)) !== null) {\n    const isClosing = match[1] === '/';\n    const tagStart = match.index;\n    const tagEnd = thinkTagRegex.lastIndex;\n\n    // \n    //  </think>/< /thinking> \n    if (depth === 0 && !isClosing) {\n      result += text.slice(lastIndex, tagStart);\n    }\n\n    if (isClosing) {\n      //  think/thinking \n      if (depth > 0) depth -= 1;\n    } else {\n      depth += 1;\n    }\n\n    lastIndex = tagEnd;\n  }\n\n  // \n  if (depth === 0) {\n    result += text.slice(lastIndex);\n  }\n\n  return result.trim();\n}\n\n/**\n *  HTML \n */\nfunction removeHtmlComments(text: string): string {\n  return text.replace(/<!--[\\s\\S]*?(?:-->|$)/g, '').trim();\n}\n\n/**\n * \n *  \"A. xxx\", \"B. xxx\" \n */\nfunction parseOptions(optionText: string): string[] {\n  if (!optionText) return [];\n  return optionText\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line.length > 0);\n}\n\n/**\n *  LLM \n */\nexport function parseResponse(text: string): ParsedResponse {\n  // \n  const cleanText = removeThinkBlock(text);\n\n  // \n  const mainTextRaw = extractTagByPriority(cleanText, ['maintext', 'maintxt', 'content', '']);\n  const mainText = removeHtmlComments(mainTextRaw);\n  const optionRaw = extractTag(cleanText, 'option');\n  const summary = extractTag(cleanText, 'sum');\n\n  //  UpdateVariable / update \n  const updateVarBlock = extractTagByPriority(cleanText, ['UpdateVariable', 'update']);\n  const jsonPatch = extractTag(updateVarBlock, 'JSONPatch');\n  const variableUpdate = updateVarBlock || jsonPatch;\n\n  // \n  const allOptions = parseOptions(optionRaw);\n\n  //  E  [Leave]\n  const hasOptionE = allOptions.some(line => /^E\\.\\s/i.test(line));\n  const hasLeave = allOptions.some(line => /leave/i.test(line));\n\n  //  E  [Leave] A-D \n  const normalOptions = allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (/leave/i.test(line)) return false;\n    return true;\n  });\n\n  return {\n    mainText,\n    options: normalOptions,\n    summary,\n    variableUpdate,\n    jsonPatch,\n    rawText: cleanText,\n    hasOptionE,\n    hasLeave,\n  };\n}\n\n/**\n *  <sum> \n * \n */\nexport function extractSummary(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTag(clean, 'sum');\n}\n\n/**\n *  <maintext> \n */\nexport function extractMainText(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  const mainTextRaw = extractTagByPriority(clean, ['maintext', 'maintxt', 'content', '']);\n  return removeHtmlComments(mainTextRaw);\n}\n\n/**\n * <UpdateVariable> / <update>\n */\nexport function extractVariableUpdate(messageText: string): string {\n  const clean = removeThinkBlock(messageText);\n  return extractTagByPriority(clean, ['UpdateVariable', 'update']);\n}\n\n/**\n *  <option>  A-D \n */\nexport function extractOptions(messageText: string): string[] {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.filter(line => {\n    if (/^E\\.\\s/i.test(line)) return false;\n    if (/leave/i.test(line)) return false;\n    return true;\n  });\n}\n\n/**\n *  E \n */\nexport function detectOptionE(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /^E\\.\\s/i.test(line));\n}\n\n/**\n *  [Leave]\n */\nexport function detectLeave(messageText: string): boolean {\n  const clean = removeThinkBlock(messageText);\n  const allOptions = parseOptions(extractTag(clean, 'option'));\n  return allOptions.some(line => /leave/i.test(line));\n}\n","// Schema import removed - using raw MVU data directly\nimport { detectLeave, detectOptionE, extractMainText, extractOptions, extractSummary, extractVariableUpdate, parseResponse } from './responseParser';\n/**\n *  Store\n *    user   generate     assistant \n */\nexport const useGameStore = defineStore('game', () => {\n    //   \n    const mainText = ref('');\n    const options = ref([]);\n    const currentSummary = ref('');\n    const isGenerating = ref(false);\n    const streamingText = ref('');\n    const error = ref(null);\n    const isInitialized = ref(false);\n    //   \n    const hasOptionE = ref(false);\n    const hasLeave = ref(false);\n    const variableUpdateText = ref('');\n    //   \n    const isEditing = ref(false);\n    const editingText = ref('');\n    //  MVU  stat_data\n    const statData = ref({});\n    //   \n    const saveEntries = ref([]);\n    const isSaveLoadOpen = ref(false);\n    const pendingPortalChanges = ref(null);\n    function setPendingPortalChanges(changes) {\n        pendingPortalChanges.value = changes;\n    }\n    /**\n     *  MVU  user \n     */\n    function applyPendingPortalChangesToMvu(baseMvuData, changes) {\n        const result = _.cloneDeep(baseMvuData ?? {});\n        if (!changes)\n            return result;\n        if (!result.stat_data || typeof result.stat_data !== 'object') {\n            result.stat_data = {};\n        }\n        const sd = result.stat_data;\n        if (changes.area !== undefined)\n            sd._ = changes.area;\n        sd._ = changes.roomType;\n        if (changes.enemyName !== undefined)\n            sd._ = changes.enemyName;\n        if (!sd.$ || typeof sd.$ !== 'object') {\n            sd.$ = {};\n        }\n        const stat = sd.$;\n        if (changes.resetRoomCounter) {\n            stat. = 0;\n        }\n        if (changes.incrementKeys) {\n            for (const key of changes.incrementKeys) {\n                stat[key] = (Number(stat[key]) || 0) + 1;\n            }\n        }\n        return result;\n    }\n    /**\n     *  assistant \n     */\n    async function initialize() {\n        try {\n            await waitGlobalInitialized('Mvu');\n            console.info('[GameStore] MVU initialized');\n            //  assistant \n            const lastId = getLastMessageId();\n            if (lastId >= 0) {\n                loadLatestAssistantState();\n                loadStatData();\n            }\n            isInitialized.value = true;\n            console.info('[GameStore] Initialized successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Init error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     *  assistant \n     */\n    function loadLatestAssistantState() {\n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        if (messages.length > 0) {\n            const lastMsg = messages[messages.length - 1];\n            const text = lastMsg.message;\n            mainText.value = extractMainText(text);\n            options.value = extractOptions(text);\n            currentSummary.value = extractSummary(text);\n            hasOptionE.value = detectOptionE(text);\n            hasLeave.value = detectLeave(text);\n            variableUpdateText.value = extractVariableUpdate(text);\n        }\n    }\n    /**\n     *  MVU stat_data\n     */\n    function loadStatData() {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            const mvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema /\n                statData.value = raw;\n                console.info('[GameStore] stat_data loaded from message', lastId);\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] Failed to load stat_data:', err);\n        }\n    }\n    /**\n     * \n     * 1.  MVU \n     * 2.  user \n     * 3.  generate  LLM \n     * 4.  +  MVU \n     * 5.  assistant  MVU \n     * 6. \n     */\n    async function sendAction(userInput) {\n        if (isGenerating.value || !userInput.trim())\n            return;\n        error.value = null;\n        isGenerating.value = true;\n        streamingText.value = '';\n        try {\n            // 1.  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            const currentPendingChanges = pendingPortalChanges.value;\n            // 2.  user  MVU \n            const userMvuData = applyPendingPortalChangesToMvu(oldMvuData, currentPendingChanges);\n            // 3.  user  MVU \n            console.info('[GameStore] Creating user message:', userInput);\n            await createChatMessages([{ role: 'user', message: userInput, data: userMvuData }], { refresh: 'none' });\n            // user \n            pendingPortalChanges.value = null;\n            // 4. \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, _generation_id) => {\n                streamingText.value = text;\n            });\n            // 5.  generate \n            console.info('[GameStore] Generating LLM response...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: true,\n            });\n            console.info('[GameStore] LLM response received, length:', result.length);\n            // \n            streamListener.stop();\n            streamingText.value = '';\n            // 6. \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            // 7.  MVU  user \n            let newMvuData = await Mvu.parseMessage(result, _.cloneDeep(userMvuData));\n            if (!newMvuData) {\n                newMvuData = _.cloneDeep(userMvuData);\n            }\n            else if (!newMvuData.stat_data && userMvuData?.stat_data) {\n                newMvuData.stat_data = _.cloneDeep(userMvuData.stat_data);\n            }\n            // 8.  MVU \n            if (newMvuData) {\n                delete newMvuData.display_data;\n                delete newMvuData.delta_data;\n            }\n            // 9.  assistant  MVU \n            console.info('[GameStore] Creating assistant message with MVU data');\n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            // 10.  stat_data\n            refreshLocalStatData(newMvuData);\n            console.info('[GameStore] Action completed successfully');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] sendAction error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function applyParsedResponse(parsed) {\n        mainText.value = parsed.mainText;\n        options.value = parsed.options;\n        currentSummary.value = parsed.summary;\n        hasOptionE.value = parsed.hasOptionE;\n        hasLeave.value = parsed.hasLeave;\n        variableUpdateText.value = parsed.variableUpdate;\n    }\n    /**\n     *  MVU  stat_data \n     */\n    function refreshLocalStatData(mvuData) {\n        try {\n            if (!mvuData)\n                return;\n            const raw = _.get(mvuData, 'stat_data');\n            if (raw && typeof raw === 'object') {\n                //  Schema.safeParse /\n                statData.value = raw;\n                console.info('[GameStore] Local stat_data refreshed:', JSON.stringify(raw.$));\n            }\n        }\n        catch (err) {\n            console.warn('[GameStore] refreshLocalStatData error:', err);\n        }\n    }\n    /**\n     *  <sum> \n     */\n    function loadSaveEntries() {\n        const entries = [];\n        const lastId = getLastMessageId();\n        if (lastId < 0) {\n            saveEntries.value = entries;\n            return;\n        }\n        const messages = getChatMessages(`0-${lastId}`, { role: 'assistant' });\n        for (const msg of messages) {\n            const summary = extractSummary(msg.message);\n            if (summary) {\n                entries.push({\n                    messageId: msg.message_id,\n                    summary,\n                });\n            }\n        }\n        saveEntries.value = entries;\n    }\n    /**\n     * \n     */\n    async function rollbackTo(targetMessageId) {\n        try {\n            const lastId = getLastMessageId();\n            if (targetMessageId >= lastId) {\n                console.warn('[GameStore] Cannot rollback: target is current or future');\n                return;\n            }\n            //  target \n            const idsToDelete = [];\n            for (let i = targetMessageId + 1; i <= lastId; i++) {\n                idsToDelete.push(i);\n            }\n            console.info(`[GameStore] Rolling back: deleting messages ${targetMessageId + 1} to ${lastId}`);\n            await deleteChatMessages(idsToDelete, { refresh: 'none' });\n            //  assistant \n            loadLatestAssistantState();\n            //  MVU  getLastMessageId\n            try {\n                const mvuData = Mvu.getMvuData({ type: 'message', message_id: targetMessageId });\n                const raw = _.get(mvuData, 'stat_data');\n                if (raw && typeof raw === 'object') {\n                    statData.value = raw;\n                    console.info('[GameStore] Rollback: loaded stat_data from message', targetMessageId);\n                }\n            }\n            catch (e) {\n                console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back', e);\n                loadStatData();\n            }\n            // \n            isSaveLoadOpen.value = false;\n            toastr.success('');\n            console.info('[GameStore] Rollback completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Rollback error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * Roll assistant+user \n     */\n    async function rerollCurrent() {\n        if (isGenerating.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 1) {\n                console.warn('[GameStore] Cannot reroll: not enough messages');\n                return;\n            }\n            isGenerating.value = true;\n            error.value = null;\n            streamingText.value = '';\n            //  user  re-generate \n            const allMessages = getChatMessages(`0-${lastId}`);\n            const lastUserMsg = [...allMessages].reverse().find(m => m.role === 'user');\n            const userInput = lastUserMsg ? lastUserMsg.message : '';\n            //  assistant \n            console.info('[GameStore] Reroll: deleting message', lastId);\n            await deleteChatMessages([lastId], { refresh: 'none' });\n            //  MVU \n            const oldMvuData = Mvu.getMvuData({ type: 'message', message_id: getLastMessageId() });\n            // \n            const streamListener = eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text) => {\n                streamingText.value = text;\n            });\n            // \n            console.info('[GameStore] Reroll: regenerating...');\n            const result = await generate({\n                user_input: userInput,\n                should_stream: true,\n            });\n            streamListener.stop();\n            streamingText.value = '';\n            // \n            const parsed = parseResponse(result);\n            applyParsedResponse(parsed);\n            //  MVU \n            const newMvuData = await Mvu.parseMessage(result, _.cloneDeep(oldMvuData));\n            //  assistant  MVU \n            await createChatMessages([{ role: 'assistant', message: result, data: newMvuData }], { refresh: 'none' });\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            toastr.success('');\n            console.info('[GameStore] Reroll completed');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Reroll error:', msg);\n            error.value = `: ${msg}`;\n        }\n        finally {\n            isGenerating.value = false;\n        }\n    }\n    /**\n     * \n     */\n    function startEdit() {\n        if (isEditing.value || isGenerating.value)\n            return;\n        //  SillyTavern  assistant \n        const lastId = getLastMessageId();\n        if (lastId < 0)\n            return;\n        const messages = getChatMessages(`${lastId}-${lastId}`);\n        if (messages.length === 0)\n            return;\n        editingText.value = messages[0].message;\n        isEditing.value = true;\n    }\n    /**\n     *  assistant \n     */\n    async function saveEdit() {\n        if (!isEditing.value)\n            return;\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0)\n                return;\n            //  MVU \n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            //  MVU \n            const prevMvuData = lastId > 0\n                ? Mvu.getMvuData({ type: 'message', message_id: lastId - 1 })\n                : Mvu.getMvuData({ type: 'message', message_id: 0 });\n            //  MVU \n            let newMvuData = await Mvu.parseMessage(editingText.value, _.cloneDeep(prevMvuData));\n            //  stat_data / display_data\n            //  MVU \n            if (newMvuData && currentMvuData) {\n                if (!newMvuData.stat_data && currentMvuData.stat_data) {\n                    newMvuData.stat_data = currentMvuData.stat_data;\n                }\n                if (!newMvuData.display_data && currentMvuData.display_data) {\n                    newMvuData.display_data = currentMvuData.display_data;\n                }\n            }\n            else if (!newMvuData && currentMvuData) {\n                // parseMessage \n                newMvuData = currentMvuData;\n            }\n            // \n            await setChatMessages([{ message_id: lastId, message: editingText.value }], { refresh: 'none' });\n            //  MVU \n            if (newMvuData) {\n                await Mvu.replaceMvuData(newMvuData, { type: 'message', message_id: lastId });\n            }\n            // \n            const parsed = parseResponse(editingText.value);\n            applyParsedResponse(parsed);\n            //  stat_data\n            refreshLocalStatData(newMvuData);\n            isEditing.value = false;\n            editingText.value = '';\n            toastr.success('');\n            console.info('[GameStore] Edit saved');\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] Save edit error:', msg);\n            error.value = `: ${msg}`;\n        }\n    }\n    /**\n     * \n     */\n    function cancelEdit() {\n        isEditing.value = false;\n        editingText.value = '';\n    }\n    /**\n     *  stat_data \n     */\n    async function updateStatDataFields(fields) {\n        try {\n            const lastId = getLastMessageId();\n            if (lastId < 0) {\n                error.value = '';\n                return false;\n            }\n            const currentMvuData = Mvu.getMvuData({ type: 'message', message_id: lastId });\n            const nextMvuData = _.cloneDeep(currentMvuData ?? {});\n            if (!nextMvuData.stat_data || typeof nextMvuData.stat_data !== 'object') {\n                nextMvuData.stat_data = {};\n            }\n            Object.assign(nextMvuData.stat_data, _.cloneDeep(fields));\n            await Mvu.replaceMvuData(nextMvuData, { type: 'message', message_id: lastId });\n            refreshLocalStatData(nextMvuData);\n            return true;\n        }\n        catch (err) {\n            const msg = err instanceof Error ? err.message : String(err);\n            console.error('[GameStore] updateStatDataFields error:', msg);\n            error.value = `: ${msg}`;\n            return false;\n        }\n    }\n    return {\n        // State\n        mainText,\n        options,\n        currentSummary,\n        isGenerating,\n        streamingText,\n        error,\n        isInitialized,\n        statData,\n        saveEntries,\n        isSaveLoadOpen,\n        isEditing,\n        editingText,\n        hasOptionE,\n        hasLeave,\n        variableUpdateText,\n        // Actions\n        initialize,\n        sendAction,\n        setPendingPortalChanges,\n        loadStatData,\n        loadSaveEntries,\n        rollbackTo,\n        rerollCurrent,\n        startEdit,\n        saveEdit,\n        cancelEdit,\n        updateStatDataFields,\n    };\n});\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"settings-2\", [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Skull = createLucideIcon(\"skull\", [\n  [\"path\", { d: \"m12.5 17-.5-1-.5 1h1z\", key: \"3me087\" }],\n  [\n    \"path\",\n    {\n      d: \"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z\",\n      key: \"1o5pge\"\n    }\n  ],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }]\n]);\n\nexport { Skull as default };\n//# sourceMappingURL=skull.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"layers\", [\n  [\n    \"path\",\n    {\n      d: \"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z\",\n      key: \"zw3jo\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12\",\n      key: \"1wduqc\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17\",\n      key: \"kqbvx6\"\n    }\n  ]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"trash-2\", [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"x\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","// \n//  /Buff   \n// \n\nimport {\n  type CardData,\n  type CardType,\n  type EffectInstance,\n  type EffectPolarity,\n  type EntityStats,\n  EffectType,\n} from '../types';\n\n//   \n\n/**  */\nexport type EffectTiming =\n  | 'onTurnStart'    // \n  | 'onTurnEnd'      // \n  | 'onBeforeDamage'  // \n  | 'onAfterDamage'  // \n  | 'onBeforeAttack' // \n  | 'onAfterAttack'  // \n  | 'onClash'        // \n  | 'onDiceRoll'     // \n  | 'onCardPlay'     // \n  | 'passive';       // \n\n/**  */\nexport interface EffectDefinition {\n  type: EffectType;\n  name: string;\n  polarity: EffectPolarity;\n  /**  */\n  timings: EffectTiming[];\n  /**  */\n  stackable: boolean;\n  /** 0 =  */\n  maxStacks: number;\n  /**  */\n  description: string;\n}\n\n//   \n\nexport const EFFECT_REGISTRY: Record<EffectType, EffectDefinition> = {\n  [EffectType.BARRIER]: {\n    type: EffectType.BARRIER,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.ARMOR]: {\n    type: EffectType.ARMOR,\n    name: '',\n    polarity: 'buff',\n    timings: ['onBeforeDamage', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BIND]: {\n    type: EffectType.BIND,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.DEVOUR]: {\n    type: EffectType.DEVOUR,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onCardPlay'],\n    stackable: false,\n    maxStacks: 1,\n    description: '3/',\n  },\n  [EffectType.POISON]: {\n    type: EffectType.POISON,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.BURN]: {\n    type: EffectType.BURN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onClash'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.BLEED]: {\n    type: EffectType.BLEED,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onClash', 'onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.VULNERABLE]: {\n    type: EffectType.VULNERABLE,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeDamage'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.REGEN]: {\n    type: EffectType.REGEN,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.IGNITE_AURA]: {\n    type: EffectType.IGNITE_AURA,\n    name: '',\n    polarity: 'mixed',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.STUN]: {\n    type: EffectType.STUN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart', 'onTurnEnd'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.CHARGE]: {\n    type: EffectType.CHARGE,\n    name: '',\n    polarity: 'buff',\n    timings: ['onDiceRoll', 'onTurnEnd'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.COLD]: {\n    type: EffectType.COLD,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onBeforeAttack', 'onAfterAttack'],\n    stackable: true,\n    maxStacks: 0,\n    description: '',\n  },\n  [EffectType.NON_LIVING]: {\n    type: EffectType.NON_LIVING,\n    name: '',\n    polarity: 'trait',\n    timings: ['passive'],\n    stackable: false,\n    maxStacks: 1,\n    description: '',\n  },\n  [EffectType.MANA_DRAIN]: {\n    type: EffectType.MANA_DRAIN,\n    name: '',\n    polarity: 'debuff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '-1',\n  },\n  [EffectType.MANA_SPRING]: {\n    type: EffectType.MANA_SPRING,\n    name: '',\n    polarity: 'buff',\n    timings: ['onTurnStart'],\n    stackable: true,\n    maxStacks: 0,\n    description: '+',\n  },\n};\n\n// \n//  \n// \n\n/**\n * \n */\nexport function findEffect(entity: EntityStats, type: EffectType): EffectInstance | undefined {\n  return entity.effects.find(e => e.type === type);\n}\n\n/**\n * \n */\nexport function hasEffect(entity: EntityStats, type: EffectType): boolean {\n  return entity.effects.some(e => e.type === type && e.stacks > 0);\n}\n\n/**\n *  0\n */\nexport function getEffectStacks(entity: EntityStats, type: EffectType): number {\n  const effect = findEffect(entity, type);\n  return effect ? effect.stacks : 0;\n}\n\n/**\n * \n * /\n */\nexport function applyEffect(\n  entity: EntityStats,\n  type: EffectType,\n  stacks: number = 1,\n  options?: { restrictedTypes?: CardType[]; source?: string },\n): boolean {\n  // \n  if (hasEffect(entity, EffectType.NON_LIVING)) {\n    if (type === EffectType.POISON || type === EffectType.BLEED) {\n      return false; // \n    }\n  }\n\n  const def = EFFECT_REGISTRY[type];\n  const existing = findEffect(entity, type);\n\n  if (existing) {\n    if (def.stackable) {\n      existing.stacks += stacks;\n      if (def.maxStacks > 0) {\n        existing.stacks = Math.min(existing.stacks, def.maxStacks);\n      }\n    }\n    // \n    if (type === EffectType.BIND && options?.restrictedTypes) {\n      existing.restrictedTypes = options.restrictedTypes;\n    }\n    return true;\n  }\n\n  // \n  const instance: EffectInstance = {\n    type,\n    stacks: def.maxStacks > 0 ? Math.min(stacks, def.maxStacks) : stacks,\n    polarity: def.polarity,\n    restrictedTypes: options?.restrictedTypes,\n    source: options?.source,\n  };\n  entity.effects.push(instance);\n  return true;\n}\n\n/**\n * \n */\nexport function removeEffect(entity: EntityStats, type: EffectType): void {\n  entity.effects = entity.effects.filter(e => e.type !== type);\n}\n\n/**\n *  0 \n */\nexport function reduceEffectStacks(entity: EntityStats, type: EffectType, amount: number = 1): void {\n  const effect = findEffect(entity, type);\n  if (!effect) return;\n  effect.stacks -= amount;\n  if (effect.stacks <= 0) {\n    removeEffect(entity, type);\n  }\n}\n\n// \n//  \n// \n\n/**  */\nexport interface TurnStartResult {\n  hpChange: number;\n  mpChange: number;\n  trueDamage: number;\n  isStunned: boolean;\n  logs: string[];\n  /**  */\n  applyToOpponent: Array<{ type: EffectType; stacks: number }>;\n}\n\n/**\n * \n *       (-1)      \n */\nexport function processOnTurnStart(entity: EntityStats): TurnStartResult {\n  const result: TurnStartResult = {\n    hpChange: 0,\n    mpChange: 0,\n    trueDamage: 0,\n    isStunned: false,\n    logs: [],\n    applyToOpponent: [],\n  };\n\n  // \n  if (hasEffect(entity, EffectType.MANA_DRAIN)) {\n    result.mpChange = -entity.mp;\n    result.logs.push(`[] `);\n    reduceEffectStacks(entity, EffectType.MANA_DRAIN);\n  }\n\n  // \n  const poisonStacks = getEffectStacks(entity, EffectType.POISON);\n  if (poisonStacks > 0) {\n    if (poisonStacks >= entity.hp) {\n      result.trueDamage += poisonStacks;\n      result.logs.push(`[] (${poisonStacks})  (${entity.hp}) ${poisonStacks} `);\n    }\n    reduceEffectStacks(entity, EffectType.POISON);\n  }\n\n  // \n  const burnStacks = getEffectStacks(entity, EffectType.BURN);\n  if (burnStacks > 0) {\n    let burnDamage = burnStacks;\n    const vulnerableStacks = getEffectStacks(entity, EffectType.VULNERABLE);\n    if (vulnerableStacks > 0) {\n      burnDamage += vulnerableStacks;\n      result.logs.push(`[]  +${vulnerableStacks}`);\n    }\n    result.hpChange -= burnDamage;\n    result.logs.push(`[]  ${burnDamage} `);\n  }\n\n  //  -1\n  if (hasEffect(entity, EffectType.BLEED)) {\n    reduceEffectStacks(entity, EffectType.BLEED);\n    result.logs.push(`[] `);\n  }\n\n  // \n  const regenStacks = getEffectStacks(entity, EffectType.REGEN);\n  if (regenStacks > 0) {\n    result.hpChange += regenStacks;\n    result.logs.push(`[]  ${regenStacks} `);\n  }\n\n  //   \n  const igniteStacks = getEffectStacks(entity, EffectType.IGNITE_AURA);\n  if (igniteStacks > 0) {\n    applyEffect(entity, EffectType.BURN, 1);\n    result.applyToOpponent.push({ type: EffectType.BURN, stacks: 1 });\n    result.logs.push(`[]  1 `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    result.isStunned = true;\n    result.logs.push(`[] `);\n  }\n\n  // \n  const manaSpringStacks = getEffectStacks(entity, EffectType.MANA_SPRING);\n  if (manaSpringStacks > 0) {\n    result.mpChange += manaSpringStacks;\n    result.logs.push(`[]  +${manaSpringStacks}`);\n  }\n\n  return result;\n}\n\n/**\n * \n * (-1)  ()  ()  ()\n */\nexport function processOnTurnEnd(entity: EntityStats): string[] {\n  const logs: string[] = [];\n\n  // \n  if (hasEffect(entity, EffectType.BIND)) {\n    reduceEffectStacks(entity, EffectType.BIND);\n    logs.push(`[] `);\n  }\n\n  // \n  const armorEffect = findEffect(entity, EffectType.ARMOR);\n  if (armorEffect && armorEffect.stacks > 0) {\n    armorEffect.stacks = Math.floor(armorEffect.stacks / 2);\n    if (armorEffect.stacks <= 0) {\n      removeEffect(entity, EffectType.ARMOR);\n    }\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.CHARGE)) {\n    removeEffect(entity, EffectType.CHARGE);\n    logs.push(`[] `);\n  }\n\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    removeEffect(entity, EffectType.STUN);\n    logs.push(`[] `);\n  }\n\n  return logs;\n}\n\n// \n//  \n// \n\n/**\n * \n */\nexport function canPlayCard(\n  entity: EntityStats,\n  card: CardData,\n  baseDice: number,\n): { allowed: boolean; reason?: string } {\n  // \n  if (hasEffect(entity, EffectType.STUN)) {\n    return { allowed: false, reason: '' };\n  }\n\n  // \n  const bindEffect = findEffect(entity, EffectType.BIND);\n  if (bindEffect && bindEffect.restrictedTypes?.includes(card.type)) {\n    return { allowed: false, reason: `${card.type}` };\n  }\n\n  // 3 /\n  if (hasEffect(entity, EffectType.DEVOUR) && baseDice <= 3) {\n    if (card.type === '' as CardType || card.type === '' as CardType) {\n      return { allowed: false, reason: `3${card.type}` };\n    }\n  }\n\n  // \n  if (card.type === ('' as CardType) && card.manaCost > entity.mp) {\n    return { allowed: false, reason: `${card.manaCost}${entity.mp}` };\n  }\n\n  return { allowed: true };\n}\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sword = createLucideIcon(\"sword\", [\n  [\"path\", { d: \"m11 19-6-6\", key: \"s7kpr\" }],\n  [\"path\", { d: \"m5 21-2-2\", key: \"1kw20b\" }],\n  [\"path\", { d: \"m8 16-4 4\", key: \"1oqv8h\" }],\n  [\"path\", { d: \"M9.5 17.5 21 6V3h-3L6.5 14.5\", key: \"pkxemp\" }]\n]);\n\nexport { Sword as default };\n//# sourceMappingURL=sword.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCcw = createLucideIcon(\"refresh-ccw\", [\n  [\"path\", { d: \"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"14sxne\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }],\n  [\"path\", { d: \"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16\", key: \"1hlbsb\" }],\n  [\"path\", { d: \"M16 16h5v5\", key: \"ccwih5\" }]\n]);\n\nexport { RefreshCcw as default };\n//# sourceMappingURL=refresh-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Footprints = createLucideIcon(\"footprints\", [\n  [\n    \"path\",\n    {\n      d: \"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z\",\n      key: \"1dudjm\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z\",\n      key: \"l2t8xc\"\n    }\n  ],\n  [\"path\", { d: \"M16 17h4\", key: \"1dejxt\" }],\n  [\"path\", { d: \"M4 13h4\", key: \"1bwh8b\" }]\n]);\n\nexport { Footprints as default };\n//# sourceMappingURL=footprints.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10\" };\nconst _hoisted_2 = { class: \"bg-black/60 p-1 rounded-full border border-white/10\" };\nconst _hoisted_3 = { class: \"absolute top-8 left-2 right-2 h-24 bg-black/40 rounded border border-white/5 flex items-center justify-center overflow-hidden\" };\nconst _hoisted_4 = { class: \"absolute font-heading text-white/20 text-4xl select-none\" };\nconst _hoisted_5 = { class: \"absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end\" };\nconst _hoisted_6 = { class: \"text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md\" };\nconst _hoisted_7 = { class: \"bg-[#0f0f0f]/80 border border-dungeon-gold/20 p-2 rounded text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center\" };\nconst _hoisted_8 = { class: \"mt-1 text-center text-dungeon-gold font-bold text-xs font-ui\" };\nimport { Footprints, RefreshCcw, Sparkles, Sword } from 'lucide-vue-next';\nimport { CardType } from '../types';\n\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonCard',\n    props: {\n        card: {},\n        disabled: { type: Boolean, default: false },\n        selected: { type: Boolean, default: false },\n        faceDown: { type: Boolean, default: false },\n        isEnemy: { type: Boolean, default: false },\n        className: { default: '' }\n    },\n    emits: [\"click\"],\n    setup(__props) {\n        const props = __props;\n        const typeColorClass = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'border-red-900 bg-red-950/30';\n                case CardType.MAGIC:\n                    return 'border-purple-900 bg-purple-950/30';\n                case CardType.FUNCTION:\n                    return 'border-emerald-900 bg-emerald-950/30';\n                case CardType.DODGE:\n                    return 'border-blue-900 bg-blue-950/30';\n                default:\n                    return 'border-gray-700 bg-gray-800';\n            }\n        });\n        const typeIcon = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return Sword;\n                case CardType.MAGIC:\n                    return Sparkles;\n                case CardType.FUNCTION:\n                    return RefreshCcw;\n                case CardType.DODGE:\n                    return Footprints;\n                default:\n                    return Sword;\n            }\n        });\n        const typeIconColor = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'text-red-400';\n                case CardType.MAGIC:\n                    return 'text-purple-400';\n                case CardType.FUNCTION:\n                    return 'text-emerald-400';\n                case CardType.DODGE:\n                    return 'text-blue-400';\n                default:\n                    return 'text-gray-400';\n            }\n        });\n        const cardStrengthLabel = computed(() => {\n            const dl = props.card.damageLogic;\n            switch (dl.mode) {\n                case 'relative': return ` ${dl.scale ?? 1}x`;\n                case 'fixed': return dl.value ? ` ${dl.value}` : '';\n                case 'mixed': return `${dl.baseValue ?? 0}+${dl.scale ?? 1}x`;\n                default: return '';\n            }\n        });\n        const typeGradient = computed(() => {\n            switch (props.card.type) {\n                case CardType.PHYSICAL:\n                    return 'bg-gradient-to-tr from-red-900 to-black';\n                case CardType.MAGIC:\n                    return 'bg-gradient-to-tr from-purple-900 to-black';\n                case CardType.DODGE:\n                    return 'bg-gradient-to-tr from-blue-900 to-black';\n                default:\n                    return 'bg-gradient-to-tr from-emerald-900 to-black';\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\" Face Down Card \"),\n                (__props.faceDown)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: _normalizeClass([\"w-40 h-60 rounded-lg bg-dungeon-brown border-2 border-[#5c3a21] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2\", __props.className])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"div\", { class: \"absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50\" }, [\n                                _createElementVNode(\"div\", { class: \"size-16 rounded-full border-2 border-[#5c3a21] opacity-30\" })\n                            ], -1 /* CACHED */)\n                        ]))], 2 /* CLASS */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Face Up Card \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"relative w-40 h-60 rounded-lg shadow-2xl transition-all duration-300 transform bg-[#1a110d] border-2 cursor-pointer\", [\n                                    _unref(typeColorClass),\n                                    __props.selected ? 'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20' : 'hover:-translate-y-2 hover:z-10',\n                                    __props.disabled ? 'opacity-80 !cursor-default' : '',\n                                    __props.className,\n                                ]]),\n                            onClick: _cache[0] || (_cache[0] = ($event) => (!__props.disabled && _ctx.$emit('click')))\n                        }, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"bg-black/60 px-2 py-0.5 rounded text-dungeon-gold font-bold font-heading text-xs border border-dungeon-gold/30\", __props.card.type !== _unref(CardType).MAGIC || __props.card.manaCost === 0 ? 'opacity-0' : ''])\n                                }, \" MP \" + _toDisplayString(__props.card.manaCost), 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(typeIcon)), {\n                                        class: _normalizeClass([\"size-5\", _unref(typeIconColor)])\n                                    }, null, 8 /* PROPS */, [\"class\"]))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Image Placeholder \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"size-full opacity-60\", _unref(typeGradient)])\n                                }, null, 2 /* CLASS */),\n                                _createElementVNode(\"span\", _hoisted_4, _toDisplayString(__props.card.name[0]), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"h3\", _hoisted_6, _toDisplayString(__props.card.name), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(__props.card.description), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(__props.card.type), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */)\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\n\nimport { ref, computed, watch, onUnmounted } from 'vue';\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    class: \"absolute inset-0 size-full\",\n    style: { \"filter\": \"drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))\" }\n};\nconst _hoisted_2 = [\"fill\", \"stroke\"];\nconst _hoisted_3 = [\"stroke\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonDice',\n    props: {\n        value: {},\n        rolling: { type: Boolean },\n        color: { default: 'gold' },\n        size: { default: 'md' },\n        className: { default: '' }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayValue = ref(1);\n        let interval = null;\n        const gradientId = `grad-${props.color}-${Math.random().toString(36).substr(2, 9)}`;\n        const sizeClass = computed(() => {\n            const map = { sm: 'w-12 h-12', md: 'w-20 h-20', lg: 'w-32 h-32' };\n            return map[props.size];\n        });\n        const numberSizeClass = computed(() => {\n            const map = { sm: 'text-xl', md: 'text-3xl', lg: 'text-6xl' };\n            return map[props.size];\n        });\n        const borderColor = computed(() => (props.color === 'gold' ? '#4d331f' : '#2a0505'));\n        const textColor = computed(() => (props.color === 'gold' ? 'text-[#2c1a0e]' : 'text-[#2c0e0e]'));\n        watch(() => [props.rolling, props.value], ([rolling]) => {\n            if (interval) {\n                clearInterval(interval);\n                interval = null;\n            }\n            if (rolling) {\n                interval = setInterval(() => {\n                    displayValue.value = Math.floor(Math.random() * 6) + 1;\n                }, 80);\n            }\n            else {\n                displayValue.value = props.value;\n            }\n        }, { immediate: true });\n        onUnmounted(() => {\n            if (interval)\n                clearInterval(interval);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative flex items-center justify-center drop-shadow-xl transition-all duration-300\", [__props.rolling ? 'animate-bounce' : '', __props.className]])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"relative flex items-center justify-center\", _unref(sizeClass)])\n                }, [\n                    (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [\n                        _createElementVNode(\"defs\", null, [\n                            _createElementVNode(\"linearGradient\", {\n                                id: gradientId,\n                                x1: \"0%\",\n                                y1: \"0%\",\n                                x2: \"100%\",\n                                y2: \"100%\"\n                            }, [\n                                (__props.color === 'gold')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[0] || (_cache[0] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#f9e6a0\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#d4af37\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#8a7122\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"stop\", {\n                                            offset: \"0%\",\n                                            \"stop-color\": \"#fca5a5\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"stop\", {\n                                            offset: \"50%\",\n                                            \"stop-color\": \"#ef4444\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"stop\", {\n                                            offset: \"100%\",\n                                            \"stop-color\": \"#7f1d1d\"\n                                        }, null, -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ]),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 2, 93 25, 93 75, 50 98, 7 75, 7 25\",\n                            fill: `url(#${gradientId})`,\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"3\"\n                        }, null, 8 /* PROPS */, _hoisted_2),\n                        _createElementVNode(\"polygon\", {\n                            points: \"50 8, 87 29, 87 71, 50 92, 13 71, 13 29\",\n                            fill: \"none\",\n                            stroke: _unref(borderColor),\n                            \"stroke-width\": \"1\",\n                            opacity: \"0.4\"\n                        }, null, 8 /* PROPS */, _hoisted_3)\n                    ])),\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"relative z-10 font-heading font-bold drop-shadow-sm\", [_unref(textColor), _unref(numberSizeClass)]])\n                    }, _toDisplayString(_unref(displayValue)), 3 /* TEXT, CLASS */)\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonDice.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, isRef as _isRef, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"absolute top-4 left-4 z-50 pointer-events-auto\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"mt-2 w-48 bg-black/85 border border-dungeon-gold/30 rounded p-3 text-xs text-dungeon-paper\"\n};\nconst _hoisted_3 = { class: \"flex items-center gap-2 cursor-pointer select-none\" };\nconst _hoisted_4 = { class: \"absolute inset-0 z-10 pointer-events-none\" };\nconst _hoisted_5 = { class: \"absolute top-[5%] right-[5%] md:top-[8%] md:right-[10%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"absolute -left-48 top-20\"\n};\nconst _hoisted_7 = { class: \"relative\" };\nconst _hoisted_8 = { class: \"rotate-[-5deg] scale-90 shadow-[0_0_20px_rgba(255,0,0,0.2)]\" };\nconst _hoisted_9 = {\n    key: 1,\n    class: \"absolute -left-12 bottom-32 z-20 animate-float\"\n};\nconst _hoisted_10 = { class: \"relative w-full h-full\" };\nconst _hoisted_11 = { class: \"absolute bottom-4 left-1/2 -translate-x-1/2 w-72 h-96 bg-[#1a0f08] rounded-lg shadow-[0_0_40px_rgba(153,27,27,0.3)] flex items-center justify-center overflow-hidden\" };\nconst _hoisted_12 = { class: \"relative overflow-visible mt-4 w-72 bg-black/80 border border-red-900/30 p-3 rounded shadow-lg backdrop-blur-sm z-10\" };\nconst _hoisted_13 = { class: \"flex justify-between text-sm text-red-400 font-bold mb-1\" };\nconst _hoisted_14 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"flex items-center gap-1 mb-1\"\n};\nconst _hoisted_16 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_17 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_18 = { class: \"flex-1 h-2 bg-gray-900 rounded-full overflow-hidden\" };\nconst _hoisted_19 = { class: \"text-[10px] text-red-300 w-14 text-right\" };\nconst _hoisted_20 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_21 = { class: \"flex-1 h-1.5 bg-gray-900 rounded-full overflow-hidden\" };\nconst _hoisted_22 = { class: \"text-[10px] text-blue-300 w-14 text-right\" };\nconst _hoisted_23 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_24 = { class: \"text-[10px] text-red-300\" };\nconst _hoisted_25 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1 mt-1\"\n};\nconst _hoisted_26 = [\"title\"];\nconst _hoisted_27 = { class: \"absolute bottom-[20%] left-[5%] md:bottom-[25%] md:left-[10%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32\" };\nconst _hoisted_28 = {\n    key: 0,\n    class: \"absolute -top-24 left-1/2 -translate-x-1/2 z-20 animate-float\",\n    style: { \"animation-delay\": \"1s\" }\n};\nconst _hoisted_29 = { class: \"relative overflow-visible mt-2 w-60 bg-black/90 border border-dungeon-gold/50 p-2 rounded shadow-xl backdrop-blur-sm z-10\" };\nconst _hoisted_30 = { class: \"pointer-events-none absolute inset-0 z-30 overflow-visible\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"flex items-center gap-1 mb-1\"\n};\nconst _hoisted_32 = { class: \"text-[10px] text-yellow-300 font-bold\" };\nconst _hoisted_33 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_34 = { class: \"flex-1 h-1.5 bg-gray-900 rounded-full overflow-hidden\" };\nconst _hoisted_35 = { class: \"text-[10px] text-dungeon-blood w-14 text-right\" };\nconst _hoisted_36 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_37 = { class: \"flex-1 h-1 bg-gray-900 rounded-full overflow-hidden\" };\nconst _hoisted_38 = { class: \"text-[10px] text-blue-300 w-14 text-right\" };\nconst _hoisted_39 = { class: \"flex items-center gap-2 mb-1\" };\nconst _hoisted_40 = { class: \"text-[10px] text-dungeon-gold\" };\nconst _hoisted_41 = {\n    key: 1,\n    class: \"flex flex-wrap gap-1 mt-1\"\n};\nconst _hoisted_42 = [\"title\"];\nconst _hoisted_43 = { class: \"absolute inset-0 z-30 flex flex-col pointer-events-none\" };\nconst _hoisted_44 = { class: \"flex-1 flex items-center justify-center relative\" };\nconst _hoisted_45 = {\n    key: 0,\n    class: \"relative w-full h-64 flex items-center justify-center z-50\"\n};\nconst _hoisted_46 = { class: \"pointer-events-auto min-h-[180px] w-full flex items-end justify-center pb-8 px-4 space-x-4 relative\" };\nconst _hoisted_47 = { class: \"flex space-x-6 items-end mb-4 z-40\" };\nconst _hoisted_48 = [\"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_49 = { class: \"absolute right-6 bottom-6 flex flex-col items-end gap-2 z-50\" };\nconst _hoisted_50 = [\"disabled\"];\nconst _hoisted_51 = { class: \"flex space-x-3\" };\nconst _hoisted_52 = { class: \"relative group\" };\nconst _hoisted_53 = { class: \"text-[10px] text-gray-400 mt-1\" };\nconst _hoisted_54 = { class: \"relative group\" };\nconst _hoisted_55 = { class: \"text-[10px] text-gray-400 mt-1\" };\nconst _hoisted_56 = { class: \"absolute right-0 top-16 z-40 pointer-events-auto select-none\" };\nconst _hoisted_57 = { class: \"flex items-start\" };\nconst _hoisted_58 = [\"title\"];\nconst _hoisted_59 = {\n    key: 0,\n    class: \"w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-gray-700 bg-black/70 p-1 text-[10px] font-mono text-gray-300\"\n};\nconst _hoisted_60 = [\"innerHTML\"];\nconst _hoisted_61 = { class: \"flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2\" };\nconst _hoisted_62 = { class: \"font-heading text-xl text-dungeon-gold\" };\nconst _hoisted_63 = { class: \"overflow-y-auto grid grid-cols-4 gap-4 p-2\" };\nimport { Layers, Settings2, Skull, Trash2, X as XIcon } from 'lucide-vue-next';\nimport { applyDamageToEntity, calculateFinalDamage, calculateFinalPoint } from '../battle/algorithms';\nimport { EFFECT_REGISTRY, applyEffect, getEffectStacks, processOnTurnEnd, processOnTurnStart, reduceEffectStacks, removeEffect } from '../battle/effects';\nimport { getEnemyByName } from '../battle/enemyRegistry';\nimport { CardType, CombatPhase, EffectType as ET } from '../types';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonDice from './DungeonDice.vue';\n\nimport { reactive, ref, computed, onMounted, watch } from 'vue';\nconst SPEED_SETTING_KEY = 'dungeon.combat.speed_up';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CombatView',\n    props: {\n        initialPlayerStats: {},\n        enemyName: {},\n        playerDeck: {}\n    },\n    emits: [\"endCombat\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // --- Enemy Loading ---\n        const enemyDef = getEnemyByName(props.enemyName);\n        const enemyDisplayName = enemyDef?.name ?? props.enemyName;\n        // AI flags  mutable state for enemy AI decisions (e.g. hasUsedHeal)\n        const aiFlags = reactive({});\n        // --- State ---\n        const playerStats = ref({ ...props.initialPlayerStats });\n        const enemyStats = ref(enemyDef\n            ? { ...enemyDef.stats, effects: [...enemyDef.stats.effects] }\n            : { hp: 1, maxHp: 1, mp: 0, minDice: 1, maxDice: 1, effects: [] });\n        // --- Effect display helpers ---\n        const getEffectName = (type) => {\n            return EFFECT_REGISTRY[type]?.name ?? String(type);\n        };\n        const getEffectDescription = (type) => {\n            return EFFECT_REGISTRY[type]?.description ?? '';\n        };\n        const effectPillClass = (polarity) => {\n            switch (polarity) {\n                case 'buff': return 'bg-green-900/60 border-green-500/40 text-green-300';\n                case 'debuff': return 'bg-red-900/60 border-red-500/40 text-red-300';\n                case 'trait': return 'bg-gray-800/60 border-gray-500/40 text-gray-300';\n                case 'mixed': return 'bg-purple-900/60 border-purple-500/40 text-purple-300';\n                case 'special': return 'bg-yellow-900/60 border-yellow-500/40 text-yellow-300';\n                default: return 'bg-gray-800/60 border-gray-500/40 text-gray-300';\n            }\n        };\n        // --- Armor computed ---\n        const playerArmor = computed(() => {\n            const eff = playerStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyArmor = computed(() => {\n            const eff = enemyStats.value.effects.find(e => e.type === ET.ARMOR);\n            return eff?.stacks ?? 0;\n        });\n        const enemyDeck = enemyDef ? [...enemyDef.deck] : [];\n        // dummy card to prevent crash if enemy has no cards\n        const PASS_CARD = {\n            id: 'pass', name: '', type: CardType.FUNCTION, category: '', manaCost: 0,\n            calculation: { multiplier: 0, addition: 0 }, damageLogic: { mode: 'fixed', value: 0 },\n            traits: { combo: false, reroll: 'none', draw: false }, cardEffects: [], description: ''\n        };\n        const combatState = ref({\n            turn: 1,\n            phase: CombatPhase.TURN_START,\n            actionsRemaining: 1,\n            playerBaseDice: 1,\n            enemyBaseDice: 1,\n            playerHand: [],\n            playerDeck: [...props.playerDeck].sort(() => Math.random() - 0.5),\n            discardPile: [],\n            enemyDeck: [...enemyDeck],\n            enemyDiscard: [],\n            enemyIntentCard: null,\n            enemyPredictedPoint: 0,\n            playerSelectedCard: null,\n            lastPlayedCard: null,\n            logs: [` <span class=\"text-red-500 font-bold\">${enemyDisplayName}</span>`],\n        });\n        const isRolling = ref(false);\n        const showClashAnimation = ref(false);\n        const shatteringTarget = ref(null);\n        const screenShake = ref(false);\n        const overlayOpen = ref(null);\n        const settingsOpen = ref(false);\n        const battleSpeedUp = ref(false);\n        const logsCollapsed = ref(true);\n        const speedMultiplier = computed(() => (battleSpeedUp.value ? 2 : 1));\n        const combatRootStyle = computed(() => ({ '--combat-speed-multiplier': String(speedMultiplier.value) }));\n        const floatingNumbers = ref([]);\n        const previewPlayerDice = ref(null);\n        const previewEnemyDice = ref(null);\n        const displayPlayerDice = computed(() => previewPlayerDice.value ?? combatState.value.playerBaseDice);\n        const displayEnemyDice = computed(() => previewEnemyDice.value ?? combatState.value.enemyBaseDice);\n        let hoverPreviewTimer = null;\n        let floatingNumberId = 0;\n        // Default relic modifiers (no relics yet)\n        const NO_RELIC_MOD = { globalMultiplier: 1, globalAddition: 0 };\n        // --- Helpers ---\n        const scaleDuration = (ms) => Math.max(60, Math.floor(ms / speedMultiplier.value));\n        const wait = (ms) => new Promise((resolve) => setTimeout(resolve, scaleDuration(ms)));\n        const transitionStyle = (ms) => ({ transitionDuration: `${scaleDuration(ms)}ms` });\n        const withTransition = (style, ms) => ({\n            ...style,\n            transitionDuration: `${scaleDuration(ms)}ms`,\n        });\n        const floatingColors = {\n            physical: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            magic: 'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',\n            shield: 'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',\n            heal: 'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',\n            mana: 'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',\n        };\n        const floatingNumbersFor = (side) => floatingNumbers.value.filter((entry) => entry.side === side);\n        const resolveTargetSide = (source, target) => {\n            if (target === 'self')\n                return source;\n            return source === 'player' ? 'enemy' : 'player';\n        };\n        const clearDicePreview = () => {\n            previewPlayerDice.value = null;\n            previewEnemyDice.value = null;\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n        };\n        const getCardFinalPoint = (source, card, baseDice) => {\n            const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n            const defender = source === 'player' ? enemyStats.value : playerStats.value;\n            let finalPoint = calculateFinalPoint({\n                baseDice,\n                card,\n                entityEffects: attacker.effects,\n                relicModifiers: NO_RELIC_MOD,\n            });\n            // 2+1\n            if (card.id === 'burn_inferno_judgement') {\n                finalPoint += Math.floor(getEffectStacks(defender, ET.BURN) / 2);\n            }\n            return Math.max(0, Math.floor(finalPoint));\n        };\n        const getCardPreviewPoint = (source, card, baseDice) => {\n            return getCardFinalPoint(source, card, baseDice);\n        };\n        const handlePlayerCardHoverStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n        };\n        const handlePlayerCardHoverEnd = () => {\n            previewPlayerDice.value = null;\n        };\n        const handlePlayerCardTouchStart = (card) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (hoverPreviewTimer)\n                clearTimeout(hoverPreviewTimer);\n            hoverPreviewTimer = setTimeout(() => {\n                previewPlayerDice.value = getCardPreviewPoint('player', card, combatState.value.playerBaseDice);\n            }, 260);\n        };\n        const handlePlayerCardTouchEnd = () => {\n            if (hoverPreviewTimer) {\n                clearTimeout(hoverPreviewTimer);\n                hoverPreviewTimer = null;\n            }\n            previewPlayerDice.value = null;\n        };\n        const pushFloatingNumber = (side, value, kind, sign = '+') => {\n            const amount = Math.max(0, Math.floor(value));\n            if (amount <= 0)\n                return;\n            const id = ++floatingNumberId;\n            // Extend popup lifetime by ~50% for better readability.\n            const duration = scaleDuration(1350);\n            floatingNumbers.value.push({\n                id,\n                side,\n                text: `${sign}${amount}`,\n                colorClass: floatingColors[kind],\n                leftOffset: Math.floor((Math.random() - 0.5) * 120),\n                topOffset: 24 + Math.floor(Math.random() * 20),\n                duration,\n            });\n            setTimeout(() => {\n                floatingNumbers.value = floatingNumbers.value.filter((entry) => entry.id !== id);\n            }, duration);\n        };\n        const log = (msg) => {\n            combatState.value.logs = [msg, ...combatState.value.logs].slice(0, 5);\n        };\n        onMounted(() => {\n            battleSpeedUp.value = localStorage.getItem(SPEED_SETTING_KEY) === '1';\n        });\n        watch(battleSpeedUp, (enabled) => {\n            localStorage.setItem(SPEED_SETTING_KEY, enabled ? '1' : '0');\n        });\n        const drawCards = (count, currentDeck, currentDiscard) => {\n            let deck = [...currentDeck];\n            let discard = [...currentDiscard];\n            const drawn = [];\n            for (let i = 0; i < count; i++) {\n                if (deck.length === 0) {\n                    if (discard.length === 0)\n                        break;\n                    deck = [...discard].sort(() => Math.random() - 0.5);\n                    discard = [];\n                    log('<span class=\"text-yellow-500\"></span>');\n                }\n                const card = deck.pop();\n                if (card)\n                    drawn.push(card);\n            }\n            return { drawn, newDeck: deck, newDiscard: discard };\n        };\n        const handCardClass = (card) => {\n            const selected = combatState.value.playerSelectedCard;\n            const isSelected = selected === card;\n            const isNotSelected = selected && !isSelected;\n            const isActionPhase = combatState.value.phase === CombatPhase.PLAYER_INPUT;\n            return [\n                isSelected ? '-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]' : '',\n                isNotSelected ? 'opacity-30 scale-90 translate-y-8 grayscale' : 'hover:scale-110 hover:-translate-y-4 hover:z-50',\n                !isActionPhase && !isSelected ? 'opacity-50 grayscale cursor-not-allowed' : 'cursor-pointer',\n            ];\n        };\n        // --- Enemy AI Card Selection ---\n        function selectEnemyCard() {\n            // \n            if (getEffectStacks(enemyStats.value, ET.STUN) > 0) {\n                log('<span class=\"text-gray-400\"></span>');\n                return PASS_CARD;\n            }\n            if (combatState.value.enemyDeck.length === 0) {\n                if (combatState.value.enemyDiscard.length === 0)\n                    return PASS_CARD; // Fallback\n                combatState.value.enemyDeck = [...combatState.value.enemyDiscard].sort(() => Math.random() - 0.5);\n                combatState.value.enemyDiscard = [];\n            }\n            if (enemyDef) {\n                // Use the enemy's custom AI logic\n                const ctx = {\n                    enemyStats: enemyStats.value,\n                    playerStats: playerStats.value,\n                    deck: combatState.value.enemyDeck,\n                    turn: combatState.value.turn,\n                    flags: aiFlags,\n                };\n                return enemyDef.selectCard(ctx);\n            }\n            // Fallback: random selection (should never happen with proper registry)\n            const idx = Math.floor(Math.random() * combatState.value.enemyDeck.length);\n            return combatState.value.enemyDeck[idx];\n        }\n        // --- Phase Management ---\n        const startTurn = () => {\n            clearDicePreview();\n            combatState.value.phase = CombatPhase.DRAW_PHASE;\n            combatState.value.playerSelectedCard = null;\n            combatState.value.enemyIntentCard = null;\n            isRolling.value = true;\n            shatteringTarget.value = null;\n            showClashAnimation.value = false;\n            setTimeout(() => {\n                const pRoll = Math.floor(Math.random() * (playerStats.value.maxDice - playerStats.value.minDice + 1)) + playerStats.value.minDice;\n                const eRoll = Math.floor(Math.random() * (enemyStats.value.maxDice - enemyStats.value.minDice + 1)) + enemyStats.value.minDice;\n                isRolling.value = false;\n                combatState.value.playerBaseDice = pRoll;\n                combatState.value.enemyBaseDice = eRoll;\n                combatState.value.phase = CombatPhase.DRAW_PHASE;\n                log(` [${pRoll}] vs  [${eRoll}]`);\n            }, scaleDuration(1500));\n        };\n        // Watch for INIT phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (phase === CombatPhase.TURN_START) {\n                // Process turn-start effects (poison, burn, mana spring, etc.)\n                if (combatState.value.turn > 1) {\n                    for (const [side, label, stats] of [['player', '', playerStats], ['enemy', '', enemyStats]]) {\n                        const result = processOnTurnStart(stats.value);\n                        let turnStartLogs = result.logs;\n                        // \n                        const burnLog = result.logs.find((entry) => entry.includes('[]'));\n                        if (burnLog) {\n                            const burnMatch = burnLog.match(/\\s+(\\d+)\\s+/);\n                            const burnDamage = burnMatch ? Number(burnMatch[1]) : 0;\n                            if (burnDamage > 0 && getEffectStacks(stats.value, ET.BARRIER) > 0) {\n                                reduceEffectStacks(stats.value, ET.BARRIER, 1);\n                                result.hpChange += burnDamage;\n                                turnStartLogs = result.logs.filter((entry) => entry !== burnLog);\n                                log(`<span class=\"text-gray-400 text-[9px]\">${label}: []  ${burnDamage} </span>`);\n                            }\n                            else if (burnDamage > 0) {\n                                pushFloatingNumber(side, burnDamage, 'magic', '-');\n                            }\n                        }\n                        if (result.hpChange !== 0) {\n                            const hpBefore = stats.value.hp;\n                            stats.value.hp = Math.max(0, Math.min(stats.value.maxHp, stats.value.hp + result.hpChange));\n                            const hpDelta = stats.value.hp - hpBefore;\n                            if (hpDelta > 0) {\n                                pushFloatingNumber(side, hpDelta, 'heal', '+');\n                            }\n                        }\n                        if (result.mpChange !== 0) {\n                            const mpBefore = stats.value.mp;\n                            stats.value.mp = Math.max(0, stats.value.mp + result.mpChange);\n                            const mpDelta = stats.value.mp - mpBefore;\n                            if (mpDelta > 0) {\n                                pushFloatingNumber(side, mpDelta, 'mana', '+');\n                            }\n                        }\n                        if (result.trueDamage > 0)\n                            stats.value.hp = Math.max(0, stats.value.hp - result.trueDamage);\n                        for (const l of turnStartLogs) {\n                            log(`<span class=\"text-gray-400 text-[9px]\">${label}: ${l}</span>`);\n                        }\n                    }\n                }\n                setTimeout(() => startTurn(), scaleDuration(1000));\n            }\n        }, { immediate: true });\n        // Watch for DRAW_PHASE\n        watch([() => combatState.value.phase, isRolling], ([phase, rolling]) => {\n            if (phase === CombatPhase.DRAW_PHASE && !rolling) {\n                // Use enemy AI to select card\n                const eCard = selectEnemyCard();\n                const { drawn, newDeck, newDiscard } = drawCards(3, combatState.value.playerDeck, combatState.value.discardPile);\n                combatState.value.enemyIntentCard = eCard;\n                combatState.value.playerHand = drawn;\n                combatState.value.playerDeck = newDeck;\n                combatState.value.discardPile = newDiscard;\n                combatState.value.phase = CombatPhase.PLAYER_INPUT;\n            }\n        });\n        // Handle Card Select\n        const handleCardSelect = (card, handIdx) => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (handIdx < 0 || handIdx >= combatState.value.playerHand.length)\n                return;\n            if (combatState.value.playerHand[handIdx]?.id !== card.id)\n                return;\n            if (card.type === CardType.MAGIC) {\n                if (playerStats.value.mp < card.manaCost) {\n                    log('<span class=\"text-red-400\"></span>');\n                    return;\n                }\n                playerStats.value.mp -= card.manaCost;\n            }\n            // \n            const [played] = combatState.value.playerHand.splice(handIdx, 1);\n            if (!played)\n                return;\n            clearDicePreview();\n            combatState.value.discardPile.push(played);\n            combatState.value.playerSelectedCard = played;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n        };\n        const handleSkipTurn = () => {\n            if (combatState.value.phase !== CombatPhase.PLAYER_INPUT)\n                return;\n            if (!combatState.value.enemyIntentCard)\n                return;\n            clearDicePreview();\n            combatState.value.playerSelectedCard = PASS_CARD;\n            combatState.value.phase = CombatPhase.RESOLUTION;\n            log('<span class=\"text-gray-400\"></span>');\n        };\n        // Clashable check\n        const isClashable = (t1, t2) => {\n            if (t1 === CardType.PHYSICAL && t2 === CardType.PHYSICAL)\n                return true;\n            if (t1 === CardType.MAGIC && t2 === CardType.MAGIC)\n                return true;\n            if (t1 === CardType.DODGE && (t2 === CardType.PHYSICAL || t2 === CardType.MAGIC))\n                return true;\n            if (t2 === CardType.DODGE && (t1 === CardType.PHYSICAL || t1 === CardType.MAGIC))\n                return true;\n            return false;\n        };\n        // Resolution\n        const resolveCombat = async (pCard, eCard, pDice, eDice) => {\n            const shouldClash = isClashable(pCard.type, eCard.type);\n            const enemySkippedTurn = eCard.id === PASS_CARD.id;\n            const pClashPoint = getCardPreviewPoint('player', pCard, pDice);\n            const eClashPoint = getCardPreviewPoint('enemy', eCard, eDice);\n            const clearPlayerBurn = (reason) => {\n                const burnStacks = getEffectStacks(playerStats.value, ET.BURN);\n                if (burnStacks <= 0)\n                    return;\n                removeEffect(playerStats.value, ET.BURN);\n                log(`<span class=\"text-orange-300\">${reason} ${burnStacks}</span>`);\n            };\n            if (enemySkippedTurn) {\n                clearPlayerBurn('');\n            }\n            let pSuccess = true;\n            let eSuccess = true;\n            let resultMsg = '';\n            let clashWinner = null;\n            if (shouldClash) {\n                previewPlayerDice.value = pClashPoint;\n                previewEnemyDice.value = eClashPoint;\n                showClashAnimation.value = true;\n                await wait(600);\n                screenShake.value = true;\n                setTimeout(() => (screenShake.value = false), scaleDuration(500));\n                if (pCard.type === eCard.type) {\n                    if (pClashPoint > eClashPoint) {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                    else if (eClashPoint > pClashPoint) {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                    else {\n                        pSuccess = false;\n                        eSuccess = false;\n                        clashWinner = 'tie';\n                        resultMsg = '';\n                    }\n                }\n                else if (pCard.type === CardType.DODGE) {\n                    if (eClashPoint > pClashPoint) {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                    else {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                }\n                else if (eCard.type === CardType.DODGE) {\n                    if (pClashPoint > eClashPoint) {\n                        pSuccess = false;\n                        clashWinner = 'enemy';\n                        resultMsg = '';\n                    }\n                    else {\n                        eSuccess = false;\n                        clashWinner = 'player';\n                        resultMsg = '';\n                    }\n                }\n                if (clashWinner === 'player')\n                    shatteringTarget.value = 'enemy';\n                else if (clashWinner === 'enemy')\n                    shatteringTarget.value = 'player';\n                else if (clashWinner === 'tie') {\n                    shatteringTarget.value = 'both';\n                }\n                if (resultMsg) {\n                    log(`<span class=\"text-gray-300\">${resultMsg}</span>`);\n                }\n                if (clashWinner === 'player') {\n                    clearPlayerBurn('');\n                }\n                await wait(650);\n                showClashAnimation.value = false;\n                clearDicePreview();\n            }\n            else {\n                await wait(500);\n                log('<span class=\"text-gray-400\"></span>');\n                pSuccess = true;\n                eSuccess = true;\n            }\n            // Execution Phase  use algorithms.ts for proper damage calculation\n            const executeCard = (source, card, baseDice) => {\n                const attacker = source === 'player' ? playerStats.value : enemyStats.value;\n                const defender = source === 'player' ? enemyStats.value : playerStats.value;\n                const label = source === 'player' ? '' : '';\n                const defenderSide = source === 'player' ? 'enemy' : 'player';\n                // Calculate final point for this card\n                const finalPoint = getCardFinalPoint(source, card, baseDice);\n                const syncCurrentPointForUi = () => {\n                    if (card.type !== CardType.FUNCTION || card.id === PASS_CARD.id)\n                        return;\n                    const nextPoint = Math.max(0, Math.floor(finalPoint));\n                    if (source === 'player') {\n                        if (combatState.value.playerBaseDice !== nextPoint) {\n                            combatState.value.playerBaseDice = nextPoint;\n                            log(`<span class=\"text-dungeon-gold/80\"> ${nextPoint}</span>`);\n                        }\n                    }\n                    else if (combatState.value.enemyBaseDice !== nextPoint) {\n                        combatState.value.enemyBaseDice = nextPoint;\n                    }\n                };\n                const applyCardEffects = () => {\n                    let hasEffect = false;\n                    for (const ce of card.cardEffects) {\n                        const targetKey = ce.target ?? 'self';\n                        const targetEntity = targetKey === 'self' ? attacker : defender;\n                        const targetSide = resolveTargetSide(source, targetKey);\n                        if (ce.kind === 'heal') {\n                            const healAmount = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 0);\n                            const beforeHp = targetEntity.hp;\n                            targetEntity.hp = Math.min(targetEntity.maxHp, targetEntity.hp + healAmount);\n                            const actualHeal = targetEntity.hp - beforeHp;\n                            if (actualHeal > 0) {\n                                pushFloatingNumber(targetSide, actualHeal, 'heal', '+');\n                            }\n                            log(`<span class=\"text-green-400\">${label}${card.name} ${healAmount} </span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'apply_buff') {\n                            const stacks = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 1);\n                            applyEffect(targetEntity, ce.effectType, stacks);\n                            if (ce.effectType === ET.ARMOR) {\n                                pushFloatingNumber(targetSide, stacks, 'shield', '+');\n                            }\n                            log(`<span class=\"text-yellow-400\">${label}${card.name} ${stacks} ${EFFECT_REGISTRY[ce.effectType]?.name ?? ce.effectType}</span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'restore_mana') {\n                            const restoreAmount = ce.valueMode === 'point_scale'\n                                ? Math.floor(finalPoint * (ce.scale ?? 1))\n                                : Math.floor(ce.fixedValue ?? 0);\n                            const beforeMp = targetEntity.mp;\n                            targetEntity.mp = Math.max(0, targetEntity.mp + restoreAmount);\n                            const actualRestore = targetEntity.mp - beforeMp;\n                            if (actualRestore > 0) {\n                                pushFloatingNumber(targetSide, actualRestore, 'mana', '+');\n                            }\n                            log(`<span class=\"text-blue-400\">${label}${card.name} ${restoreAmount} </span>`);\n                            hasEffect = true;\n                        }\n                        else if (ce.kind === 'cleanse') {\n                            const cleanseTargets = ce.cleanseTypes && ce.cleanseTypes.length > 0\n                                ? ce.cleanseTypes\n                                : targetEntity.effects.map((eff) => eff.type);\n                            for (const et of cleanseTargets) {\n                                removeEffect(targetEntity, et);\n                            }\n                            log(`<span class=\"text-cyan-300\">${label}${card.name}</span>`);\n                            hasEffect = true;\n                        }\n                    }\n                    return hasEffect;\n                };\n                if (card.type === CardType.FUNCTION) {\n                    if (card.id === 'burn_char_convert') {\n                        const burned = getEffectStacks(attacker, ET.BURN);\n                        syncCurrentPointForUi();\n                        if (burned > 0) {\n                            removeEffect(attacker, ET.BURN);\n                            attacker.mp += burned;\n                            pushFloatingNumber(source, burned, 'mana', '+');\n                            log(`<span class=\"text-blue-400\">${label}${card.name} ${burned}  ${burned} </span>`);\n                        }\n                        else {\n                            log(`<span class=\"text-gray-400\">${label}${card.name}</span>`);\n                        }\n                        return;\n                    }\n                    // Process card effects (heal, apply_buff, restore_mana, cleanse)\n                    syncCurrentPointForUi();\n                    const hasEffect = applyCardEffects();\n                    if (!hasEffect) {\n                        // Fallback for special function cards (e.g. MP recovery)\n                        if (card.id === 'c5') {\n                            attacker.mp += 5;\n                            pushFloatingNumber(source, 5, 'mana', '+');\n                        }\n                        log(`${label}${card.name}`);\n                    }\n                }\n                else if (card.type !== CardType.DODGE) {\n                    const burnStacksOnDefender = getEffectStacks(defender, ET.BURN);\n                    // Attack card: calculate damage through the full pipeline\n                    let cardForCalculation = card;\n                    const customDamage = card.id === 'burn_scorch_wind'\n                        ? Math.floor(finalPoint * 0.5) + burnStacksOnDefender\n                        : card.id === 'burn_detonation'\n                            ? Math.floor(burnStacksOnDefender)\n                            : null;\n                    if (customDamage !== null) {\n                        cardForCalculation = {\n                            ...card,\n                            damageLogic: { mode: 'fixed', value: Math.floor(customDamage) },\n                        };\n                    }\n                    const { damage, logs: dmgLogs } = calculateFinalDamage({\n                        finalPoint,\n                        card: cardForCalculation,\n                        attackerEffects: attacker.effects,\n                        defenderEffects: defender.effects,\n                        relicModifiers: NO_RELIC_MOD,\n                    });\n                    const { actualDamage, logs: applyLogs } = applyDamageToEntity(defender, damage, false);\n                    log(`${label}${card.name}${finalPoint} <span class=\"text-red-400 font-bold\">${actualDamage}</span> `);\n                    if (actualDamage > 0) {\n                        const damageKind = card.type === CardType.MAGIC ? 'magic' : 'physical';\n                        pushFloatingNumber(defenderSide, actualDamage, damageKind, '-');\n                    }\n                    // \n                    applyCardEffects();\n                    for (const dl of [...dmgLogs, ...applyLogs]) {\n                        log(`<span class=\"text-gray-500 text-[9px]\">${dl}</span>`);\n                    }\n                }\n            };\n            const queue = [];\n            let deferredEnemyAction = null;\n            if (pSuccess)\n                queue.push({ source: 'player', card: pCard, type: pCard.type, baseDice: pDice });\n            if (eSuccess) {\n                const enemyAction = { source: 'enemy', card: eCard, type: eCard.type, baseDice: eDice };\n                if (pCard.traits.combo) {\n                    // \n                    deferredEnemyAction = enemyAction;\n                }\n                else {\n                    queue.push(enemyAction);\n                }\n            }\n            const typePriority = (t) => {\n                if (t === CardType.FUNCTION)\n                    return 3;\n                if (t === CardType.MAGIC)\n                    return 2;\n                if (t === CardType.PHYSICAL)\n                    return 1;\n                return 0;\n            };\n            queue.sort((a, b) => typePriority(b.type) - typePriority(a.type));\n            for (const action of queue) {\n                executeCard(action.source, action.card, action.baseDice);\n                await wait(500);\n            }\n            //  draw  1 \n            if (pCard.traits.combo) {\n                if (pCard.traits.draw) {\n                    const { drawn, newDeck, newDiscard } = drawCards(1, combatState.value.playerDeck, combatState.value.discardPile);\n                    combatState.value.playerDeck = newDeck;\n                    combatState.value.discardPile = newDiscard;\n                    combatState.value.playerHand = [...combatState.value.playerHand, ...drawn];\n                }\n                if (combatState.value.playerHand.length > 0 && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                    combatState.value.playerSelectedCard = null;\n                    combatState.value.phase = CombatPhase.PLAYER_INPUT;\n                    log('<span class=\"text-dungeon-gold/80\"></span>');\n                    return;\n                }\n                // \n                if (deferredEnemyAction && playerStats.value.hp > 0 && enemyStats.value.hp > 0) {\n                    executeCard(deferredEnemyAction.source, deferredEnemyAction.card, deferredEnemyAction.baseDice);\n                    await wait(500);\n                }\n            }\n            // End-of-turn effect processing (armor halving, stun clear, etc.)\n            const pEndLogs = processOnTurnEnd(playerStats.value);\n            const eEndLogs = processOnTurnEnd(enemyStats.value);\n            for (const l of [...pEndLogs, ...eEndLogs]) {\n                log(`<span class=\"text-gray-500 text-[9px]\">${l}</span>`);\n            }\n            // Cleanup\n            combatState.value.discardPile = [...combatState.value.discardPile, ...combatState.value.playerHand];\n            combatState.value.playerHand = [];\n            combatState.value.turn += 1;\n            combatState.value.phase = CombatPhase.TURN_START;\n        };\n        // Watch for RESOLUTION phase\n        watch(() => combatState.value.phase, (phase) => {\n            if (phase === CombatPhase.RESOLUTION &&\n                combatState.value.playerSelectedCard &&\n                combatState.value.enemyIntentCard &&\n                !showClashAnimation.value) {\n                resolveCombat(combatState.value.playerSelectedCard, combatState.value.enemyIntentCard, combatState.value.playerBaseDice, combatState.value.enemyBaseDice);\n            }\n        });\n        // Win/Lose check\n        watch([() => playerStats.value.hp, () => enemyStats.value.hp], ([pHp, eHp]) => {\n            if (pHp <= 0)\n                emit('endCombat', false, playerStats.value);\n            else if (eHp <= 0)\n                emit('endCombat', true, playerStats.value);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"combat-root w-full h-full bg-black/80 text-dungeon-paper font-ui relative overflow-hidden select-none\", _unref(screenShake) ? 'animate-shake' : '']),\n                style: _normalizeStyle(_unref(combatRootStyle))\n            }, [\n                _createCommentVNode(\" Background \"),\n                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.4),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[26] || (_cache[26] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Top Left: Settings \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"button\", {\n                        class: \"px-3 py-1.5 bg-[#1a0f08]/90 border border-dungeon-gold/40 rounded text-xs text-dungeon-gold flex items-center gap-2 hover:border-dungeon-gold\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (settingsOpen.value = !_unref(settingsOpen)))\n                    }, [\n                        _createVNode(_unref(Settings2), { class: \"size-4\" }),\n                        _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                    ]),\n                    (_unref(settingsOpen))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            _createElementVNode(\"label\", _hoisted_3, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => (_isRef(battleSpeedUp) ? (battleSpeedUp).value = $event : null)),\n                                    type: \"checkbox\",\n                                    class: \"accent-dungeon-gold\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(battleSpeedUp)]\n                                ]),\n                                _cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"2x\", -1 /* CACHED */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\" Battlefield Layer \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\" Enemy Position: Top Right \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createCommentVNode(\" Enemy Intent Card \"),\n                        (_unref(combatState).enemyIntentCard)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                _createElementVNode(\"div\", _hoisted_7, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"absolute -top-6 left-0 bg-red-900/80 text-white text-xs px-2 py-1 rounded border border-red-500/30\" }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createVNode(DungeonCard, {\n                                            card: _unref(combatState).enemyIntentCard,\n                                            \"is-enemy\": \"\",\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayEnemyDice),\n                                    rolling: _unref(isRolling),\n                                    color: \"red\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\"])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Enemy Portrait \"),\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"absolute bottom-0 left-1/2 -translate-x-1/2 w-64 h-12 bg-black/80 blur-xl\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _createVNode(_unref(Skull), { class: \"w-48 h-48 text-red-900/30\" }),\n                                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-gradient-to-t from-red-950/80 to-transparent\" }, null, -1 /* CACHED */))\n                            ])\n                        ]),\n                        _createCommentVNode(\" Enemy Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _createElementVNode(\"span\", null, _toDisplayString(_unref(enemyDisplayName)), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('enemy'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(enemyArmor) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                    _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(_unref(enemyArmor)), 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"text-[10px] text-red-400 font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-red-700 transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(enemyStats).maxHp > 0 ? (_unref(enemyStats).hp / _unref(enemyStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_19, _toDisplayString(_unref(enemyStats).hp) + \"/\" + _toDisplayString(_unref(enemyStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_20, [\n                                _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"text-[10px] text-blue-400 font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-blue-600 transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(enemyStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_22, _toDisplayString(_unref(enemyStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                _cache[16] || (_cache[16] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_24, _toDisplayString(_unref(enemyStats).minDice) + \" ~ \" + _toDisplayString(_unref(enemyStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(enemyStats).effects.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(enemyStats).effects, (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                            key: i,\n                                            class: _normalizeClass([\"text-[9px] px-1.5 py-0.5 rounded-full border font-bold\", effectPillClass(eff.polarity)]),\n                                            title: getEffectDescription(eff.type)\n                                        }, [\n                                            _createTextVNode(_toDisplayString(getEffectName(eff.type)) + \" \", 1 /* TEXT */),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                    _createTextVNode(\"x\" + _toDisplayString(eff.stacks), 1 /* TEXT */)\n                                                ], 64 /* STABLE_FRAGMENT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_26));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Player Position: Bottom Left \"),\n                    _createElementVNode(\"div\", _hoisted_27, [\n                        _createCommentVNode(\" Player Dice \"),\n                        (!_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                _createVNode(DungeonDice, {\n                                    value: _unref(displayPlayerDice),\n                                    rolling: _unref(isRolling),\n                                    color: \"gold\",\n                                    size: \"md\"\n                                }, null, 8 /* PROPS */, [\"value\", \"rolling\"])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" Player Portrait \"),\n                        _cache[22] || (_cache[22] = _createStaticVNode(\"<div class=\\\"relative w-full h-full\\\" data-v-98eb4972><div class=\\\"absolute bottom-0 left-1/2 -translate-x-1/2 w-48 h-8 bg-black/80 blur-xl\\\" data-v-98eb4972></div><div class=\\\"absolute bottom-4 left-1/2 -translate-x-1/2 w-48 h-64 bg-[#1a0f08] rounded-lg shadow-[0_0_30px_rgba(212,175,55,0.2)] flex items-center justify-center overflow-hidden\\\" data-v-98eb4972><div class=\\\"size-20 bg-dungeon-gold/20 blur-2xl rounded-full\\\" data-v-98eb4972></div><div class=\\\"absolute bottom-0 w-full h-2/3 bg-gradient-to-t from-dungeon-gold/10 to-transparent\\\" data-v-98eb4972></div></div></div>\", 1)),\n                        _createCommentVNode(\" Player Status Bar \"),\n                        _createElementVNode(\"div\", _hoisted_29, [\n                            _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"flex justify-between text-xs text-dungeon-gold font-bold mb-1\" }, [\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(floatingNumbersFor('player'), (popup) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: popup.id,\n                                        class: _normalizeClass([\"combat-float-number absolute text-xl font-extrabold tracking-wide\", popup.colorClass]),\n                                        style: _normalizeStyle({\n                                            left: `calc(50% + ${popup.leftOffset}px)`,\n                                            top: `${popup.topOffset}px`,\n                                            animationDuration: `${popup.duration}ms`,\n                                        })\n                                    }, _toDisplayString(popup.text), 7 /* TEXT, CLASS, STYLE */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\" Armor Shield \"),\n                            (_unref(playerArmor) > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"span\", { class: \"text-[10px] text-yellow-400\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_32, _toDisplayString(_unref(playerArmor)), 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" HP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"text-[10px] text-dungeon-blood font-bold w-6\" }, \"HP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_34, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-dungeon-blood transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${_unref(playerStats).maxHp > 0 ? (_unref(playerStats).hp / _unref(playerStats).maxHp) * 100 : 0}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_35, _toDisplayString(_unref(playerStats).hp) + \"/\" + _toDisplayString(_unref(playerStats).maxHp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" MP Bar \"),\n                            _createElementVNode(\"div\", _hoisted_36, [\n                                _cache[19] || (_cache[19] = _createElementVNode(\"span\", { class: \"text-[10px] text-blue-400 font-bold w-6\" }, \"MP\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_37, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"h-full bg-blue-600 transition-all duration-500\",\n                                        style: _normalizeStyle(withTransition({ width: `${Math.min((_unref(playerStats).mp / 20) * 100, 100)}%` }, 500))\n                                    }, null, 4 /* STYLE */)\n                                ]),\n                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(_unref(playerStats).mp), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Dice Range \"),\n                            _createElementVNode(\"div\", _hoisted_39, [\n                                _cache[20] || (_cache[20] = _createElementVNode(\"span\", { class: \"text-[10px] text-gray-400 font-bold w-6\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_40, _toDisplayString(_unref(playerStats).minDice) + \" ~ \" + _toDisplayString(_unref(playerStats).maxDice), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" Buffs/Debuffs \"),\n                            (_unref(playerStats).effects.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(playerStats).effects, (eff, i) => {\n                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                            key: i,\n                                            class: _normalizeClass([\"text-[9px] px-1.5 py-0.5 rounded-full border font-bold\", effectPillClass(eff.polarity)]),\n                                            title: getEffectDescription(eff.type)\n                                        }, [\n                                            _createTextVNode(_toDisplayString(getEffectName(eff.type)) + \" \", 1 /* TEXT */),\n                                            (eff.stacks > 1)\n                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                    _createTextVNode(\"x\" + _toDisplayString(eff.stacks), 1 /* TEXT */)\n                                                ], 64 /* STABLE_FRAGMENT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_42));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" UI Layer (HUD) \"),\n                _createElementVNode(\"div\", _hoisted_43, [\n                    _createCommentVNode(\" Center: Clash Zone \"),\n                    _createElementVNode(\"div\", _hoisted_44, [\n                        _createCommentVNode(\" Clash Animation Stage \"),\n                        (_unref(showClashAnimation))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_45, [\n                                _createCommentVNode(\" Player Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute right-1/2 mr-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'player' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-left']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayPlayerDice),\n                                        rolling: false,\n                                        color: \"gold\",\n                                        size: \"lg\",\n                                        \"class-name\": \"shadow-[0_0_50px_#d4af37]\"\n                                    }, null, 8 /* PROPS */, [\"value\"])\n                                ], 6 /* CLASS, STYLE */),\n                                _createCommentVNode(\" Enemy Dice Flying In \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"absolute left-1/2 ml-[-0.5rem] transition-all duration-300\", _unref(shatteringTarget) === 'enemy' || _unref(shatteringTarget) === 'both' ? 'animate-shatter' : 'animate-clash-right']),\n                                    style: _normalizeStyle(transitionStyle(300))\n                                }, [\n                                    _createVNode(DungeonDice, {\n                                        value: _unref(displayEnemyDice),\n                                        rolling: false,\n                                        color: \"red\",\n                                        size: \"lg\",\n                                        \"class-name\": \"shadow-[0_0_50px_#ff0000]\"\n                                    }, null, 8 /* PROPS */, [\"value\"])\n                                ], 6 /* CLASS, STYLE */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" Bottom Bar: Hand & Piles \"),\n                    _createElementVNode(\"div\", _hoisted_46, [\n                        _createCommentVNode(\" Center: Hand Cards \"),\n                        _createElementVNode(\"div\", _hoisted_47, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).playerHand, (card, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: `${card.id}-${idx}`,\n                                    class: _normalizeClass([\"transition-all duration-500 origin-bottom\", handCardClass(card)]),\n                                    style: _normalizeStyle(transitionStyle(500)),\n                                    onMouseenter: ($event) => (handlePlayerCardHoverStart(card)),\n                                    onMouseleave: handlePlayerCardHoverEnd,\n                                    onTouchstartPassive: ($event) => (handlePlayerCardTouchStart(card)),\n                                    onTouchend: handlePlayerCardTouchEnd,\n                                    onTouchcancel: handlePlayerCardTouchEnd\n                                }, [\n                                    _createVNode(DungeonCard, {\n                                        card: card,\n                                        disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT && _unref(combatState).playerSelectedCard !== card,\n                                        onClick: ($event) => (handleCardSelect(card, idx))\n                                    }, null, 8 /* PROPS */, [\"card\", \"disabled\", \"onClick\"])\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_48));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Right Corner: Skip + Deck/Discard \"),\n                        _createElementVNode(\"div\", _hoisted_49, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-4 bg-[#1a0f08] border border-amber-700/60 rounded text-xs text-amber-300 hover:border-amber-500 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                disabled: _unref(combatState).phase !== _unref(CombatPhase).PLAYER_INPUT,\n                                onClick: handleSkipTurn\n                            }, \"  \", 8 /* PROPS */, _hoisted_50),\n                            _createElementVNode(\"div\", _hoisted_51, [\n                                _createElementVNode(\"div\", _hoisted_52, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-16 h-16 bg-[#1a0f08] border border-dungeon-brown rounded-lg flex flex-col items-center justify-center hover:border-dungeon-gold transition-colors shadow-lg\",\n                                        onClick: _cache[2] || (_cache[2] = ($event) => (overlayOpen.value = 'deck'))\n                                    }, [\n                                        _createVNode(_unref(Layers), { class: \"size-6 text-dungeon-gold\" }),\n                                        _createElementVNode(\"span\", _hoisted_53, _toDisplayString(_unref(combatState).playerDeck.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_54, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"w-16 h-16 bg-[#1a0f08] border border-dungeon-brown rounded-lg flex flex-col items-center justify-center hover:border-gray-500 transition-colors shadow-lg\",\n                                        onClick: _cache[3] || (_cache[3] = ($event) => (overlayOpen.value = 'discard'))\n                                    }, [\n                                        _createVNode(_unref(Trash2), { class: \"size-6 text-gray-500\" }),\n                                        _createElementVNode(\"span\", _hoisted_55, _toDisplayString(_unref(combatState).discardPile.length), 1 /* TEXT */)\n                                    ]),\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" }, \"  \", -1 /* CACHED */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\" Log Feed Overlay: top-right, below parent \\\"\\\" button \"),\n                    _createElementVNode(\"div\", _hoisted_56, [\n                        _createElementVNode(\"div\", _hoisted_57, [\n                            _createElementVNode(\"button\", {\n                                class: \"h-8 px-2 rounded-l border border-r-0 border-gray-700 bg-black/80 text-[10px] text-gray-300 hover:text-white\",\n                                title: _unref(logsCollapsed) ? '' : '',\n                                onClick: _cache[4] || (_cache[4] = ($event) => (logsCollapsed.value = !_unref(logsCollapsed)))\n                            }, _toDisplayString(_unref(logsCollapsed) ? ' ' : ' '), 9 /* TEXT, PROPS */, _hoisted_58),\n                            (!_unref(logsCollapsed))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_59, [\n                                    _createCommentVNode(\" eslint-disable-next-line vue/no-v-html \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(combatState).logs, (l, i) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: i,\n                                            class: \"bg-black/60 p-1 rounded border-l-2 border-gray-700\",\n                                            innerHTML: l\n                                        }, null, 8 /* PROPS */, _hoisted_60));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Deck/Discard Overlay \"),\n                (_unref(overlayOpen))\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8\",\n                        onClick: _cache[7] || (_cache[7] = ($event) => (overlayOpen.value = null))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"bg-[#1a0f08] border border-dungeon-gold/30 p-6 rounded-xl max-w-2xl w-full max-h-[80%] flex flex-col relative\",\n                            onClick: _cache[6] || (_cache[6] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_61, [\n                                _createElementVNode(\"h3\", _hoisted_62, _toDisplayString(_unref(overlayOpen) === 'deck' ? '' : ''), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    onClick: _cache[5] || (_cache[5] = ($event) => (overlayOpen.value = null))\n                                }, [\n                                    _createVNode(_unref(XIcon), { class: \"size-6 hover:text-red-500\" })\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_63, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(overlayOpen) === 'deck' ? _unref(combatState).playerDeck : _unref(combatState).discardPile, (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"scale-75 origin-top-left\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","// \n//     &  & \n// \n\nimport {\n    type CardData,\n    CardType,\n    type ClashResult,\n    type DamageCalculationContext,\n    EffectType,\n    type EntityStats,\n    type PointCalculationContext,\n} from '../types';\nimport {\n    findEffect,\n    getEffectStacks,\n    hasEffect,\n    reduceEffectStacks,\n    removeEffect,\n} from './effects';\n\n// \n//  A. \n// \n\n/**\n * \n * FinalPoint = (BaseDice * Multiplier + Addition) * BuffMod * RelicMod + BuffAdd + RelicAdd\n */\nexport function calculateFinalPoint(ctx: PointCalculationContext): number {\n  const { baseDice, card, entityEffects, relicModifiers } = ctx;\n\n  // Step 1-2: \n  let point = baseDice * card.calculation.multiplier + card.calculation.addition;\n\n  // Step 3: \n  const chargeStacks = entityEffects.find(e => e.type === EffectType.CHARGE)?.stacks ?? 0;\n  if (chargeStacks > 0) point += chargeStacks;\n\n  // Step 4-5: \n  point *= relicModifiers.globalMultiplier;\n\n  // Step 6-7: \n  point += relicModifiers.globalAddition;\n\n  return Math.max(0, Math.floor(point));\n}\n\n// \n//  B. \n// \n\n/**\n * \n * 1.  vs   2.  vs   3.  vs (|)  4. \n */\nexport function shouldClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  forceClashFunction: boolean = false,\n): boolean {\n  const p = playerCard.type;\n  const e = enemyCard.type;\n\n  if (p === CardType.FUNCTION || e === CardType.FUNCTION) return forceClashFunction;\n  if (p === e) return true;\n  if (p === CardType.DODGE && (e === CardType.PHYSICAL || e === CardType.MAGIC)) return true;\n  if (e === CardType.DODGE && (p === CardType.PHYSICAL || p === CardType.MAGIC)) return true;\n\n  return false;\n}\n\n/**\n * \n *  <  = \n */\nexport function resolveClash(\n  playerCard: CardData,\n  enemyCard: CardData,\n  playerPoint: number,\n  enemyPoint: number,\n): ClashResult {\n  const isPlayerDodge = playerCard.type === CardType.DODGE;\n  const isEnemyDodge = enemyCard.type === CardType.DODGE;\n\n  // \n  if (isPlayerDodge && !isEnemyDodge) {\n    if (playerPoint < enemyPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n    }\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint}  ${enemyPoint})` };\n  }\n  // \n  if (isEnemyDodge && !isPlayerDodge) {\n    if (enemyPoint < playerPoint) {\n      return { outcome: 'dodge_success', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint} < ${playerPoint})` };\n    }\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${enemyPoint}  ${playerPoint})` };\n  }\n  // \n  if (playerPoint > enemyPoint) {\n    return { outcome: 'player_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} > ${enemyPoint})` };\n  } else if (enemyPoint > playerPoint) {\n    return { outcome: 'enemy_win', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint} < ${enemyPoint})` };\n  }\n  return { outcome: 'draw', playerFinalPoint: playerPoint, enemyFinalPoint: enemyPoint, message: `(${playerPoint})` };\n}\n\n// \n//  C. \n// \n\n/**\n * \n * relative: FinalPoint * scale + scaleAddition\n * fixed:    value\n * mixed:    baseValue + FinalPoint * scale + scaleAddition\n */\nexport function calculateRawDamage(finalPoint: number, card: CardData): number {\n  const dl = card.damageLogic;\n  switch (dl.mode) {\n    case 'relative': return finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    case 'fixed':    return dl.value ?? 0;\n    case 'mixed':    return (dl.baseValue ?? 0) + finalPoint * (dl.scale ?? 1) + (dl.scaleAddition ?? 0);\n    default:         return 0;\n  }\n}\n\n/**\n * \n *           \n */\nexport function calculateFinalDamage(ctx: DamageCalculationContext): { damage: number; isTrueDamage: boolean; logs: string[] } {\n  const logs: string[] = [];\n  let damage = calculateRawDamage(ctx.finalPoint, ctx.card);\n  logs.push(`: ${Math.floor(damage)}`);\n\n  const isTrueDamage = ctx.isTrueDamage ?? false;\n\n  // \n  const cold = ctx.attackerEffects.find(e => e.type === EffectType.COLD)?.stacks ?? 0;\n  if (cold > 0) { damage -= cold; logs.push(`[] -${cold}`); }\n\n  if (isTrueDamage) {\n    logs.push(``);\n    return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: true, logs };\n  }\n\n  // \n  const vuln = ctx.defenderEffects.find(e => e.type === EffectType.VULNERABLE)?.stacks ?? 0;\n  if (vuln > 0) { damage += vuln; logs.push(`[] +${vuln}`); }\n\n  //  applyDamageToEntity \n  if (ctx.defenderEffects.some(e => e.type === EffectType.BARRIER && e.stacks > 0)) {\n    logs.push(`[] `);\n  }\n\n  //  applyDamageToEntity \n  const armor = ctx.defenderEffects.find(e => e.type === EffectType.ARMOR)?.stacks ?? 0;\n  if (armor > 0) { logs.push(`[]  ${armor} `); }\n\n  return { damage: Math.max(0, Math.floor(damage)), isTrueDamage: false, logs };\n}\n\n/**\n * \n */\nexport function applyDamageToEntity(target: EntityStats, damage: number, isTrueDamage: boolean): { actualDamage: number; logs: string[] } {\n  const logs: string[] = [];\n  if (!isTrueDamage) {\n    if (hasEffect(target, EffectType.BARRIER) && damage > 0) {\n      reduceEffectStacks(target, EffectType.BARRIER);\n      logs.push(`[] -1`);\n      return { actualDamage: 0, logs };\n    }\n    const ae = findEffect(target, EffectType.ARMOR);\n    if (ae && ae.stacks > 0 && damage > 0) {\n      const c = Math.min(ae.stacks, damage);\n      ae.stacks -= c; damage -= c;\n      if (ae.stacks <= 0) removeEffect(target, EffectType.ARMOR);\n      logs.push(`[] ${c}${damage}`);\n    }\n  }\n  const actual = Math.min(damage, target.hp);\n  target.hp -= actual;\n  logs.push(`${actual}(HP: ${target.hp}/${target.maxHp})`);\n  return { actualDamage: actual, logs };\n}\n\n// \n//  D.  & \n// \n\n/** (), () */\nexport function processClashEffects(winner: EntityStats, loser: EntityStats): string[] {\n  const logs: string[] = [];\n  const bleed = getEffectStacks(loser, EffectType.BLEED);\n  if (bleed > 0) { loser.hp -= bleed; logs.push(`[] ${bleed}`); }\n  if (hasEffect(winner, EffectType.BURN)) { removeEffect(winner, EffectType.BURN); logs.push(`[] `); }\n  return logs;\n}\n\n/** ,  */\nexport function processPostAttackEffects(attacker: EntityStats): string[] {\n  const logs: string[] = [];\n  if (hasEffect(attacker, EffectType.CHARGE)) { removeEffect(attacker, EffectType.CHARGE); logs.push(`[] `); }\n  const ce = findEffect(attacker, EffectType.COLD);\n  if (ce && ce.stacks > 0) {\n    ce.stacks = Math.floor(ce.stacks / 2);\n    if (ce.stacks <= 0) removeEffect(attacker, EffectType.COLD);\n    logs.push(`[] `);\n  }\n  return logs;\n}\n\n// \n//  E. \n// \n\nexport function rollDice(min: number, max: number): number {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","/* unplugin-vue-components disabled */import script from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CombatView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CombatView.vue?vue&type=style&index=0&id=98eb4972&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-98eb4972\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, renderSlot as _renderSlot, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"relative w-full max-w-3xl p-1 bg-dungeon-brown rounded-lg shadow-2xl border border-dungeon-gold/40 mx-4 flex flex-col max-h-[90%]\" };\nconst _hoisted_2 = { class: \"flex items-center justify-between px-6 py-4 border-b border-dungeon-gold/20 bg-[#1a0f08] rounded-t-lg shrink-0\" };\nconst _hoisted_3 = { class: \"text-xl font-heading text-dungeon-gold tracking-widest\" };\nconst _hoisted_4 = { class: \"p-8 flex-1 overflow-y-auto custom-scrollbar text-dungeon-paper/60 bg-dungeon-brown\" };\nimport { X } from 'lucide-vue-next';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DungeonModal',\n    props: {\n        title: {},\n        isOpen: { type: Boolean }\n    },\n    emits: [\"close\"],\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                (__props.isOpen)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm\",\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\" Header \"),\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _createElementVNode(\"h2\", _hoisted_3, _toDisplayString(__props.title), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    class: \"text-dungeon-gold-dim hover:text-dungeon-gold transition-colors\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                                }, [\n                                    _createVNode(_unref(X), { class: \"size-6\" })\n                                ])\n                            ]),\n                            _createCommentVNode(\" Body \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"text-center py-12\" }, [\n                                        _createElementVNode(\"div\", { class: \"mb-4 text-4xl opacity-20 animate-pulse\" }, \"\"),\n                                        _createElementVNode(\"p\", { class: \"font-ui text-sm uppercase tracking-widest\" }, \" // \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\" Ornamental Corners \"),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-dungeon-gold -mt-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-dungeon-gold -mt-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-dungeon-gold -mb-1 -ml-1 pointer-events-none\" }, null, -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-dungeon-gold -mb-1 -mr-1 pointer-events-none\" }, null, -1 /* CACHED */))\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DungeonModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pencil = createLucideIcon(\"pencil\", [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ],\n  [\"path\", { d: \"m15 5 4 4\", key: \"1mk7zo\" }]\n]);\n\nexport { Pencil as default };\n//# sourceMappingURL=pencil.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"text-center py-8\"\n};\nconst _hoisted_2 = {\n    key: 1,\n    class: \"flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"flex items-start gap-3\" };\nconst _hoisted_5 = { class: \"shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors\" };\nconst _hoisted_6 = { class: \"text-dungeon-gold font-heading text-sm\" };\nconst _hoisted_7 = { class: \"text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors\" };\nconst _hoisted_8 = { class: \"mt-4 pt-4 border-t border-dungeon-gold/15\" };\nconst _hoisted_9 = { class: \"flex gap-3\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 2,\n    class: \"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n};\nconst _hoisted_13 = { class: \"glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30\" };\nconst _hoisted_14 = { class: \"text-dungeon-paper/70 font-ui text-sm mb-6\" };\nconst _hoisted_15 = { class: \"text-dungeon-gold font-bold\" };\nconst _hoisted_16 = { class: \"flex gap-3 justify-end\" };\nimport { BookOpen, Pencil, RefreshCw, RotateCcw } from 'lucide-vue-next';\nimport { useGameStore } from '../gameStore';\nimport DungeonModal from './DungeonModal.vue';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SaveLoadPanel',\n    props: {\n        isOpen: { type: Boolean },\n        entries: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const confirmTarget = ref(null);\n        function handleRollback(messageId) {\n            confirmTarget.value = messageId;\n        }\n        async function doRollback() {\n            if (confirmTarget.value !== null) {\n                await gameStore.rollbackTo(confirmTarget.value);\n                confirmTarget.value = null;\n            }\n        }\n        function handleReroll() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.rerollCurrent();\n        }\n        function handleEdit() {\n            if (gameStore.isGenerating)\n                return;\n            emit('close');\n            gameStore.startEdit();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(DungeonModal, {\n                title: \"\",\n                \"is-open\": __props.isOpen,\n                onClose: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    (__props.entries.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _createVNode(_unref(BookOpen), { class: \"size-12 mx-auto text-dungeon-gold/30 mb-4\" }),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"text-gray-500 font-ui\" }, \"\", -1 /* CACHED */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.entries, (entry) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: entry.messageId,\n                                    class: \"group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]\",\n                                    onClick: ($event) => (handleRollback(entry.messageId))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\" Floor Number Badge \"),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createElementVNode(\"span\", _hoisted_6, \"#\" + _toDisplayString(entry.messageId), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" Summary Text \"),\n                                        _createElementVNode(\"p\", _hoisted_7, _toDisplayString(entry.summary), 1 /* TEXT */),\n                                        _createCommentVNode(\" Arrow Icon \"),\n                                        _createVNode(_unref(RotateCcw), { class: \"size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors\" })\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])),\n                    _createCommentVNode(\" Bottom Action Buttons: Reroll & Edit \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleReroll\n                            }, [\n                                _createVNode(_unref(RefreshCw), { class: \"size-4\" }),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"Roll\", -1 /* CACHED */))\n                            ], 8 /* PROPS */, _hoisted_10),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed\", _unref(gameStore).isEditing ? 'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20' : '']),\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleEdit\n                            }, [\n                                _createVNode(_unref(Pencil), { class: \"size-4\" }),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"font-ui text-sm tracking-wide\" }, \"\", -1 /* CACHED */))\n                            ], 10 /* CLASS, PROPS */, _hoisted_11)\n                        ])\n                    ]),\n                    _createCommentVNode(\" Confirm Dialog \"),\n                    (_unref(confirmTarget) !== null)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-lg mb-3\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"p\", _hoisted_14, [\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(confirmTarget)), 1 /* TEXT */),\n                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"text-red-400/80 text-xs\" }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                        onClick: _cache[0] || (_cache[0] = ($event) => (confirmTarget.value = null))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors\",\n                                        onClick: doRollback\n                                    }, \"  \")\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"is-open\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SaveLoadPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, normalizeStyle as _normalizeStyle, withDirectives as _withDirectives, toDisplayString as _toDisplayString, Fragment as _Fragment, renderList as _renderList, createTextVNode as _createTextVNode, isRef as _isRef, withKeys as _withKeys, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative\" };\nconst _hoisted_2 = { class: \"absolute top-6 left-6 z-50 flex flex-col space-y-4\" };\nconst _hoisted_3 = { class: \"absolute top-4 right-4 z-50 flex items-center gap-2\" };\nconst _hoisted_4 = { class: \"absolute top-14 right-4 z-50 flex flex-col space-y-4\" };\nconst _hoisted_5 = { class: \"h-full w-full flex flex-col items-center\" };\nconst _hoisted_6 = { class: \"flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"flex items-center gap-3 mb-4\"\n};\nconst _hoisted_8 = {\n    key: 1,\n    class: \"flex flex-col h-full\"\n};\nconst _hoisted_9 = { class: \"flex justify-end gap-3 mt-4\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"whitespace-pre-wrap text-dungeon-paper/60\"\n};\nconst _hoisted_11 = { class: \"whitespace-pre-wrap\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"mt-8 flex flex-col space-y-3\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = { class: \"text-xl mr-2\" };\nconst _hoisted_15 = {\n    key: 1,\n    class: \"mt-4\"\n};\nconst _hoisted_16 = { class: \"flex justify-center gap-4\" };\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = { class: \"text-2xl mb-1 relative z-10 drop-shadow-lg\" };\nconst _hoisted_19 = {\n    key: 1,\n    class: \"mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm\"\n};\nconst _hoisted_20 = { class: \"bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 flex items-center space-x-4 shrink-0\" };\nconst _hoisted_21 = { class: \"flex-1 relative\" };\nconst _hoisted_22 = [\"disabled\", \"placeholder\"];\nconst _hoisted_23 = [\"disabled\"];\nconst _hoisted_24 = { class: \"absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none\" };\nconst _hoisted_25 = [\"title\"];\nconst _hoisted_26 = {\n    key: 0,\n    class: \"relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]\"\n};\nconst _hoisted_27 = { class: \"flex items-end gap-4 mb-3\" };\nconst _hoisted_28 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_29 = [\"title\"];\nconst _hoisted_30 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_31 = { \"clip-path\": \"url(#heartClip)\" };\nconst _hoisted_32 = [\"y\", \"height\"];\nconst _hoisted_33 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_34 = { class: \"text-[#cc3333] font-bold\" };\nconst _hoisted_35 = { class: \"text-gray-600\" };\nconst _hoisted_36 = { class: \"flex flex-col items-center gap-1\" };\nconst _hoisted_37 = [\"title\"];\nconst _hoisted_38 = {\n    viewBox: \"0 0 64 64\",\n    class: \"w-14 h-14\"\n};\nconst _hoisted_39 = { \"clip-path\": \"url(#manaClip)\" };\nconst _hoisted_40 = [\"y\", \"height\"];\nconst _hoisted_41 = { class: \"text-[10px] font-ui text-dungeon-paper/80 tracking-wide\" };\nconst _hoisted_42 = { class: \"text-blue-400 font-bold\" };\nconst _hoisted_43 = { class: \"flex items-center justify-between px-1 mb-2\" };\nconst _hoisted_44 = { class: \"flex items-center gap-2 text-dungeon-paper/70\" };\nconst _hoisted_45 = { class: \"font-ui text-sm tracking-wide\" };\nconst _hoisted_46 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_47 = { class: \"text-dungeon-paper font-bold\" };\nconst _hoisted_48 = { class: \"flex items-center justify-between px-1\" };\nconst _hoisted_49 = { class: \"flex items-center gap-2 text-dungeon-gold\" };\nconst _hoisted_50 = { class: \"font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm\" };\nconst _hoisted_51 = {\n    key: 0,\n    class: \"grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4\"\n};\nconst _hoisted_52 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_53 = {\n    key: 0,\n    class: \"grid grid-cols-4 sm:grid-cols-6 gap-1 p-2 overflow-y-auto max-h-[60%]\"\n};\nconst _hoisted_54 = [\"title\"];\nconst _hoisted_55 = { class: \"relative\" };\nconst _hoisted_56 = { class: \"absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight\" };\nconst _hoisted_57 = { class: \"font-heading text-dungeon-gold text-[10px] text-center mt-0.5 leading-tight truncate w-full\" };\nconst _hoisted_58 = {\n    key: 1,\n    class: \"flex flex-col items-center justify-center py-12 gap-4\"\n};\nconst _hoisted_59 = { class: \"flex flex-col space-y-6 w-full max-w-lg mx-auto\" };\nconst _hoisted_60 = { class: \"space-y-4\" };\nconst _hoisted_61 = { class: \"flex items-center justify-between\" };\nconst _hoisted_62 = { class: \"flex items-center gap-2\" };\nconst _hoisted_63 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_64 = { class: \"flex items-center justify-between\" };\nconst _hoisted_65 = { class: \"flex items-center gap-2\" };\nconst _hoisted_66 = { class: \"text-dungeon-paper font-ui text-sm w-10 text-center\" };\nconst _hoisted_67 = { class: \"flex items-center justify-between\" };\nconst _hoisted_68 = { class: \"flex items-center justify-between\" };\nconst _hoisted_69 = { class: \"flex items-center gap-2\" };\nconst _hoisted_70 = { class: \"text-dungeon-paper font-ui text-sm w-14 text-center\" };\nconst _hoisted_71 = { class: \"grid grid-cols-2 gap-4\" };\nconst _hoisted_72 = { class: \"flex flex-col gap-4 w-full max-w-4xl\" };\nconst _hoisted_73 = { class: \"flex items-center justify-between\" };\nconst _hoisted_74 = { class: \"text-xs font-ui text-dungeon-paper/70\" };\nconst _hoisted_75 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4 p-3 rounded border border-dungeon-brown/60 bg-dungeon-dark/50\" };\nconst _hoisted_76 = [\"onClick\"];\nconst _hoisted_77 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar\" };\nconst _hoisted_78 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-4\" };\nconst _hoisted_79 = [\"disabled\", \"onClick\"];\nconst _hoisted_80 = { class: \"flex justify-end gap-3\" };\nconst _hoisted_81 = [\"disabled\"];\nconst _hoisted_82 = { class: \"max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar\" };\nconst _hoisted_83 = { class: \"grid grid-cols-2 md:grid-cols-3 gap-2\" };\nconst _hoisted_84 = [\"onClick\"];\nconst _hoisted_85 = { class: \"flex justify-between gap-3\" };\nconst _hoisted_86 = [\"disabled\"];\nconst _hoisted_87 = {\n    key: 0,\n    class: \"custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4\"\n};\nconst _hoisted_88 = { class: \"text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap\" };\nconst _hoisted_89 = {\n    key: 1,\n    class: \"text-dungeon-paper/60 font-ui py-8 text-center text-sm\"\n};\nconst _hoisted_90 = {\n    key: 0,\n    class: \"absolute inset-0 z-[100] bg-black\"\n};\nimport { Activity, BookOpen, Box, ChevronDown, Coins, Dices, FileText, Map as MapIcon, Maximize, Scroll, Send, Settings as SettingsIcon, } from 'lucide-vue-next';\nimport { getAllCards, resolveCardNames } from '../battle/cardRegistry';\nimport { getAllEnemyNames, getEnemyByName } from '../battle/enemyRegistry';\nimport { toggleFullScreen } from '../fullscreen';\nimport { useGameStore } from '../gameStore';\nimport { EffectType } from '../types';\nimport CombatView from './CombatView.vue';\nimport DungeonCard from './DungeonCard.vue';\nimport DungeonModal from './DungeonModal.vue';\nimport SaveLoadPanel from './SaveLoadPanel.vue';\n\nimport { defineComponent, h, ref, computed, reactive } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameView',\n    emits: [\"backToSplash\"],\n    setup(__props) {\n        const SidebarIcon = defineComponent({\n            props: {\n                icon: { type: Object, required: true },\n                active: { type: Boolean, default: false },\n                label: { type: String, default: '' },\n                tooltipSide: { type: String, default: 'right' },\n            },\n            emits: ['click'],\n            setup(props, { emit }) {\n                return () => h('button', {\n                    class: [\n                        'w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group',\n                        props.active\n                            ? 'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]'\n                            : 'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50',\n                    ],\n                    onClick: () => emit('click'),\n                }, [\n                    h(props.icon, { class: 'size-6' }),\n                    props.label\n                        ? h('div', {\n                            class: [\n                                'absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none',\n                                props.tooltipSide === 'left' ? 'right-14' : 'left-14',\n                            ],\n                        }, props.label)\n                        : null,\n                ]);\n            },\n        });\n        const gameStore = useGameStore();\n        const activeModal = ref(null);\n        const inputText = ref('');\n        const isVariableUpdateOpen = ref(false);\n        const isStatusOpen = ref(true);\n        const showCombat = ref(false);\n        const combatEnemyName = ref('');\n        const combatTestStep = ref('deck');\n        const selectedTestDeck = ref([]);\n        const selectedTestEnemy = ref('');\n        const allCardsForTest = computed(() => getAllCards().filter(card => card.category !== ''));\n        const cardByNameForTest = computed(() => {\n            const map = new Map();\n            for (const card of allCardsForTest.value) {\n                map.set(card.name, card);\n            }\n            return map;\n        });\n        const selectedTestDeckCards = computed(() => selectedTestDeck.value\n            .map((cardName, idx) => ({ idx, card: cardByNameForTest.value.get(cardName) }))\n            .filter((entry) => entry.card !== undefined));\n        const allEnemyNamesForTest = computed(() => getAllEnemyNames());\n        //  Resolved deck from MVU _ via card registry \n        const resolvedDeck = computed(() => {\n            const skills = gameStore.statData._ ?? [];\n            return resolveCardNames(skills.filter((s) => s !== ''));\n        });\n        //  Resolved relics from MVU _ \n        // Format: { relicName: count } e.g. { \"\": 2, \"\": 3 }\n        const relicEntries = computed(() => {\n            const raw = gameStore.statData._ ?? {};\n            return Object.entries(raw)\n                .filter(([name, count]) => name && count > 0)\n                .map(([name, count]) => ({ name, count }));\n        });\n        //  Text display settings (reactive, persisted) \n        const textSettings = reactive({\n            fontSize: 21,\n            lineHeight: 2.0,\n            fontFamily: \"'Cinzel', serif\",\n            containerWidth: 1300,\n        });\n        //  Computed display values from MVU stat_data \n        const displayText = computed(() => gameStore.mainText || '...\\n\\n');\n        // HP: _ / _, HP \n        const displayHp = computed(() => {\n            const hp = gameStore.statData._ ?? 10;\n            const maxHp = gameStore.statData._ ?? 10;\n            return Math.min(hp, maxHp);\n        });\n        const displayMaxHp = computed(() => gameStore.statData._ ?? 10);\n        // MP: _ only, no max variable. Visual cap at 20.\n        const displayMp = computed(() => gameStore.statData._ ?? 1);\n        // Gold\n        const displayGold = computed(() => gameStore.statData._ ?? 0);\n        // Dice range\n        const displayMinDice = computed(() => gameStore.statData.$ ?? 0);\n        const displayMaxDice = computed(() => gameStore.statData.$ ?? 0);\n        const hpPercent = computed(() => {\n            const max = displayMaxHp.value;\n            return max > 0 ? Math.min((displayHp.value / max) * 100, 100) : 100;\n        });\n        // MP visual fill: cap at 20 for display\n        const mpPercent = computed(() => {\n            const mp = displayMp.value;\n            const visualMax = 20;\n            return Math.min((mp / visualMax) * 100, 100);\n        });\n        //  Actions \n        const handleSendInput = () => {\n            if (!inputText.value.trim() || gameStore.isGenerating)\n                return;\n            gameStore.sendAction(inputText.value);\n            inputText.value = '';\n        };\n        const handleOptionClick = (option) => {\n            if (gameStore.isGenerating)\n                return;\n            // Strip the \"A. \" / \"B. \" / etc. prefix, paste content into input box\n            const stripped = option.replace(/^[A-D]\\.\\s*/i, '');\n            inputText.value = stripped;\n        };\n        //  Room type config for E option \n        const ROOM_TYPE_CONFIG = {\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.25)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#dc262680' },\n            '': { label: '', icon: '', bgColor: 'rgba(185,28,28,0.3)', borderColor: '#ef4444', textColor: '#fca5a5', glowColor: '#ef444480' },\n            '': { label: '', icon: '', bgColor: 'rgba(161,98,7,0.25)', borderColor: '#eab308', textColor: '#fde68a', glowColor: '#eab30880' },\n            '': { label: '', icon: '', bgColor: 'rgba(21,128,61,0.25)', borderColor: '#22c55e', textColor: '#bbf7d0', glowColor: '#22c55e80' },\n            '': { label: '', icon: '', bgColor: 'rgba(8,145,178,0.25)', borderColor: '#06b6d4', textColor: '#a5f3fc', glowColor: '#06b6d480' },\n            '': { label: '', icon: '', bgColor: 'rgba(126,34,206,0.25)', borderColor: '#a855f7', textColor: '#e9d5ff', glowColor: '#a855f780' },\n        };\n        // E option: no button for  / \n        const specialOptionConfig = computed(() => {\n            if (!gameStore.hasOptionE)\n                return null;\n            const roomType = gameStore.statData._;\n            if (!roomType)\n                return null;\n            if (roomType === '' || roomType === '')\n                return null;\n            return ROOM_TYPE_CONFIG[roomType] ?? null;\n        });\n        const handleSpecialOption = () => {\n            toastr.info('...');\n        };\n        // \n        //  [Leave] Portal System  Floor/Area Logic\n        // \n        const FLOOR_MAP = {\n            '': ['', '', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n            '': ['', '', '', '', ''],\n        };\n        const FLOOR_ORDER = ['', '', '', '', ''];\n        function getFloorForArea(area) {\n            for (const [floor, areas] of Object.entries(FLOOR_MAP)) {\n                if (areas.includes(area))\n                    return floor;\n            }\n            return null;\n        }\n        function getNextFloor(currentFloor) {\n            const idx = FLOOR_ORDER.indexOf(currentFloor);\n            if (idx < 0 || idx >= FLOOR_ORDER.length - 1)\n                return null;\n            return FLOOR_ORDER[idx + 1];\n        }\n        const FLOOR_MONSTER_CONFIG = {\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', '', ''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': [''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': [''],\n                    '': [''],\n                },\n            },\n            '': {\n                common: ['', '', ''],\n                uniqueByArea: {\n                    '': ['', ''],\n                    '': ['', '', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                    '': ['', ''],\n                },\n            },\n        };\n        // 70% 30% \n        const COMMON_MONSTER_RATE_BY_FLOOR = {\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n            '': 0.7,\n        };\n        function pickOne(arr) {\n            if (!arr.length)\n                return null;\n            return arr[Math.floor(Math.random() * arr.length)];\n        }\n        function pickBattleMonsterByArea(area) {\n            const floor = getFloorForArea(area) ?? '';\n            const config = FLOOR_MONSTER_CONFIG[floor];\n            if (!config)\n                return null;\n            const commonPool = config.common;\n            const uniquePool = config.uniqueByArea[area] ?? [];\n            const commonRate = COMMON_MONSTER_RATE_BY_FLOOR[floor] ?? 0.7;\n            let pool = [];\n            if (commonPool.length === 0 && uniquePool.length === 0)\n                return null;\n            if (commonPool.length === 0) {\n                pool = uniquePool;\n            }\n            else if (uniquePool.length === 0) {\n                pool = commonPool;\n            }\n            else {\n                pool = Math.random() < commonRate ? commonPool : uniquePool;\n            }\n            return pickOne(pool);\n        }\n        //  Portal visuals \n        const PORTAL_ROOM_TYPES = ['', '', '', '', '', '', ''];\n        const PORTAL_ROOM_VISUALS = {\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.5)', borderColor: '#991b1b', textColor: '#fca5a5', glowColor: '#dc2626' },\n            '': { icon: '', bgColor: 'rgba(113,63,18,0.5)', borderColor: '#a16207', textColor: '#fde68a', glowColor: '#eab308' },\n            '': { icon: '', bgColor: 'rgba(20,83,45,0.5)', borderColor: '#166534', textColor: '#bbf7d0', glowColor: '#22c55e' },\n            '': { icon: '', bgColor: 'rgba(22,78,99,0.5)', borderColor: '#155e75', textColor: '#a5f3fc', glowColor: '#06b6d4' },\n            '': { icon: '', bgColor: 'rgba(88,28,135,0.5)', borderColor: '#7e22ce', textColor: '#e9d5ff', glowColor: '#a855f7' },\n            '': { icon: '', bgColor: 'rgba(63,63,70,0.5)', borderColor: '#52525b', textColor: '#d4d4d8', glowColor: '#71717a' },\n            '': { icon: '', bgColor: 'rgba(124,45,18,0.5)', borderColor: '#9a3412', textColor: '#fed7aa', glowColor: '#ea580c' },\n            '': { icon: '', bgColor: 'rgba(127,29,29,0.6)', borderColor: '#dc2626', textColor: '#fca5a5', glowColor: '#ef4444' },\n        };\n        const AREA_PORTAL_VISUAL = {\n            icon: '', bgColor: 'rgba(79,70,229,0.5)', borderColor: '#6366f1', textColor: '#c7d2fe', glowColor: '#818cf8',\n        };\n        let cachedPortals = [];\n        let cachedPortalFingerprint = '';\n        function shuffle(arr) {\n            const a = [...arr];\n            for (let i = a.length - 1; i > 0; i--) {\n                const j = Math.floor(Math.random() * (i + 1));\n                [a[i], a[j]] = [a[j], a[i]];\n            }\n            return a;\n        }\n        function generatePortals() {\n            const currentArea = gameStore.statData._ || '';\n            const currentRoomType = gameStore.statData._ || '';\n            const stats = gameStore.statData.$ || {};\n            const roomsPassed = stats. ?? 0;\n            const isStartArea = currentArea === '';\n            const isBossRoom = currentRoomType === '';\n            //  Special:  or   next floor area portals \n            if (isStartArea || isBossRoom) {\n                let targetFloor = null;\n                if (isStartArea) {\n                    targetFloor = '';\n                }\n                else {\n                    const currentFloor = getFloorForArea(currentArea);\n                    if (currentFloor)\n                        targetFloor = getNextFloor(currentFloor);\n                }\n                if (targetFloor && FLOOR_MAP[targetFloor]) {\n                    const candidates = FLOOR_MAP[targetFloor].filter(a => a !== currentArea);\n                    const picked = shuffle(candidates).slice(0, 3);\n                    return picked.map(areaName => ({\n                        label: areaName,\n                        roomType: '',\n                        areaName,\n                        floorName: targetFloor,\n                        isFloorTransition: true,\n                        ...AREA_PORTAL_VISUAL,\n                    }));\n                }\n            }\n            //  Boss room probability: rooms >= 5  (rooms - 4) * 10% \n            if (roomsPassed >= 5) {\n                const bossChance = (roomsPassed - 4) * 0.1;\n                if (Math.random() < bossChance) {\n                    const vis = PORTAL_ROOM_VISUALS[''];\n                    return [{ label: '', roomType: '', isFloorTransition: false, ...vis }];\n                }\n            }\n            //  Normal: 1-3 random room portals (20%/40%/40%) \n            const roll = Math.random();\n            const count = roll < 0.2 ? 1 : roll < 0.6 ? 2 : 3;\n            const picked = shuffle(PORTAL_ROOM_TYPES).slice(0, count);\n            return picked.map(rt => ({ label: rt, roomType: rt, isFloorTransition: false, ...PORTAL_ROOM_VISUALS[rt] }));\n        }\n        // //hasLeave \n        const portalChoices = computed(() => {\n            if (!gameStore.hasLeave) {\n                cachedPortals = [];\n                cachedPortalFingerprint = '';\n                return [];\n            }\n            //  +  + \n            const area = gameStore.statData._ || '';\n            const roomType = gameStore.statData._ || '';\n            const rooms = (gameStore.statData.$?. ?? 0);\n            const fingerprint = `${area}|${roomType}|${rooms}`;\n            if (fingerprint !== cachedPortalFingerprint) {\n                cachedPortalFingerprint = fingerprint;\n                cachedPortals = generatePortals();\n            }\n            return cachedPortals;\n        });\n        //  Room type  $ field mapping \n        const ROOM_STAT_KEY = {\n            '': '', '': '', '': '',\n            '': '', '': '', '': '', '': '',\n        };\n        const handlePortalClick = async (portal) => {\n            if (gameStore.isGenerating)\n                return;\n            if (portal.isFloorTransition) {\n                // \n                gameStore.setPendingPortalChanges({\n                    area: portal.areaName,\n                    roomType: '',\n                    resetRoomCounter: true,\n                    //  +1 +1 +1\n                    incrementKeys: ['', '', ''],\n                    enemyName: '',\n                });\n                console.info(`[Portal] Floor transition queued  area: ${portal.areaName}, first room: `);\n                gameStore.sendAction(`<user>${portal.areaName}`);\n            }\n            else {\n                // \n                const incrementKeys = ['', ''];\n                const statKey = ROOM_STAT_KEY[portal.roomType];\n                if (statKey)\n                    incrementKeys.push(statKey);\n                const currentArea = gameStore.statData._ || '';\n                const encounterMonster = portal.roomType === ''\n                    ? pickBattleMonsterByArea(currentArea)\n                    : null;\n                gameStore.setPendingPortalChanges({\n                    roomType: portal.roomType,\n                    incrementKeys,\n                    enemyName: encounterMonster ?? '',\n                });\n                console.info(`[Portal] Room transition queued  type: ${portal.roomType}`);\n                if (portal.roomType === '' && encounterMonster) {\n                    gameStore.sendAction(`<user>${portal.roomType}${encounterMonster}`);\n                }\n                else {\n                    gameStore.sendAction(`<user>${portal.roomType}`);\n                }\n            }\n        };\n        const openSaveLoad = () => {\n            gameStore.loadSaveEntries();\n            gameStore.isSaveLoadOpen = !gameStore.isSaveLoadOpen;\n        };\n        const openVariableUpdate = () => {\n            isVariableUpdateOpen.value = !isVariableUpdateOpen.value;\n        };\n        // toggleFullScreen imported from '../fullscreen'\n        //  Combat Test \n        const openCombatTestBuilder = () => {\n            gameStore.loadStatData();\n            const availableCardNames = new Set(allCardsForTest.value.map(c => c.name));\n            const presetDeck = Array.isArray(gameStore.statData._)\n                ? gameStore.statData._.filter((name) => availableCardNames.has(name)).slice(0, 9)\n                : [];\n            selectedTestDeck.value = [...presetDeck];\n            selectedTestEnemy.value = '';\n            combatTestStep.value = 'deck';\n            activeModal.value = 'combatTestBuilder';\n        };\n        const addCardToTestDeck = (cardName) => {\n            if (selectedTestDeck.value.length >= 9)\n                return;\n            selectedTestDeck.value.push(cardName);\n        };\n        const removeCardFromTestDeck = (index) => {\n            if (index < 0 || index >= selectedTestDeck.value.length)\n                return;\n            selectedTestDeck.value.splice(index, 1);\n        };\n        const confirmCombatTestDeck = async () => {\n            if (selectedTestDeck.value.length !== 9) {\n                gameStore.error = '9';\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: [...selectedTestDeck.value],\n            });\n            if (!ok)\n                return;\n            if (allEnemyNamesForTest.value.length === 0) {\n                gameStore.error = ' enemyRegistry ';\n                return;\n            }\n            combatTestStep.value = 'enemy';\n        };\n        const confirmCombatTestEnemyAndStart = async () => {\n            if (!selectedTestEnemy.value) {\n                gameStore.error = '';\n                return;\n            }\n            const enemyDef = getEnemyByName(selectedTestEnemy.value);\n            if (!enemyDef) {\n                gameStore.error = `${selectedTestEnemy.value}`;\n                return;\n            }\n            const ok = await gameStore.updateStatDataFields({\n                _: selectedTestEnemy.value,\n            });\n            if (!ok)\n                return;\n            activeModal.value = null;\n            combatEnemyName.value = selectedTestEnemy.value;\n            showCombat.value = true;\n        };\n        const handleCombatEnd = (win) => {\n            showCombat.value = false;\n            console.log('[Combat] Result:', win ? 'WIN' : 'LOSE');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Sidebar: Individual Icons Top-Left (no back button, settings already has exit) \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(MapIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'map',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeModal.value = 'map'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Scroll),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'deck',\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeModal.value = 'deck'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(Box),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'relics',\n                        onClick: _cache[2] || (_cache[2] = ($event) => (activeModal.value = 'relics'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(SettingsIcon),\n                        label: \"\",\n                        \"tooltip-side\": \"right\",\n                        active: _unref(activeModal) === 'settings',\n                        onClick: _cache[3] || (_cache[3] = ($event) => (activeModal.value = 'settings'))\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Sidebar: Right side icons (top right) \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createCommentVNode(\" Fullscreen (small) \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                        title: \"\",\n                        onClick: _cache[4] || (_cache[4] =\n                            //@ts-ignore\n                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                    }, [\n                        _createVNode(_unref(Maximize), { class: \"size-4\" })\n                    ])\n                ]),\n                _createCommentVNode(\" Right sidebar: save/load only (reroll & edit moved into panel) \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(BookOpen),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(gameStore).isSaveLoadOpen,\n                        onClick: openSaveLoad\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"]),\n                    _createVNode(_unref(SidebarIcon), {\n                        icon: _unref(FileText),\n                        label: \"\",\n                        \"tooltip-side\": \"left\",\n                        active: _unref(isVariableUpdateOpen),\n                        onClick: openVariableUpdate\n                    }, null, 8 /* PROPS */, [\"icon\", \"active\"])\n                ]),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"div\", {\n                        class: \"w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full\",\n                        style: _normalizeStyle({ maxWidth: _unref(textSettings).containerWidth + 'px' })\n                    }, [\n                        _createCommentVNode(\" Story Text Area \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createCommentVNode(\" Decorative Corners \"),\n                            _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" Loading Indicator \"),\n                            (_unref(gameStore).isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [...(_cache[28] || (_cache[28] = [\n                                        _createStaticVNode(\"<div class=\\\"flex gap-1\\\" data-v-c7164144><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0s;\\\" data-v-c7164144></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.2s;\\\" data-v-c7164144></span><span class=\\\"w-2 h-2 bg-dungeon-gold rounded-full animate-bounce\\\" style=\\\"animation-delay:0.4s;\\\" data-v-c7164144></span></div><span class=\\\"text-dungeon-gold/60 font-ui text-sm\\\" data-v-c7164144>...</span>\", 2)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Edit Mode \"),\n                            (_unref(gameStore).isEditing)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(gameStore).editingText) = $event)),\n                                        class: \"flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, null, 4 /* STYLE */), [\n                                        [_vModelText, _unref(gameStore).editingText]\n                                    ]),\n                                    _createCommentVNode(\" Edit Actions \"),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors\",\n                                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(gameStore).cancelEdit()))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]\",\n                                            onClick: _cache[7] || (_cache[7] = ($event) => (_unref(gameStore).saveEdit()))\n                                        }, \"  \")\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\" Normal View (not editing) \"),\n                                    _createCommentVNode(\" Story Content \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide\",\n                                        style: _normalizeStyle({\n                                            fontSize: _unref(textSettings).fontSize + 'px',\n                                            lineHeight: _unref(textSettings).lineHeight,\n                                            fontFamily: _unref(textSettings).fontFamily,\n                                        })\n                                    }, [\n                                        _createCommentVNode(\" Streaming text (during generation) \"),\n                                        (_unref(gameStore).isGenerating && _unref(gameStore).streamingText)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString(_unref(gameStore).streamingText), 1 /* TEXT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" Final main text \"),\n                                                _createElementVNode(\"p\", _hoisted_11, _toDisplayString(_unref(displayText)), 1 /* TEXT */)\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ], 4 /* STYLE */),\n                                    _createCommentVNode(\" Options Section \"),\n                                    (!_unref(gameStore).isGenerating && (_unref(gameStore).options.length > 0 || _unref(gameStore).hasOptionE || _unref(gameStore).hasLeave))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                            _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2\" }, null, -1 /* CACHED */)),\n                                            _createCommentVNode(\" A-D Normal Options \"),\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameStore).options, (option, i) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 'opt-' + i,\n                                                    class: \"w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1\",\n                                                    onClick: ($event) => (handleOptionClick(option))\n                                                }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_13));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createCommentVNode(\" E Option: Special Room Action Button \"),\n                                            (_unref(gameStore).hasOptionE && _unref(specialOptionConfig))\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]\",\n                                                    style: _normalizeStyle({\n                                                        backgroundColor: _unref(specialOptionConfig).bgColor,\n                                                        borderColor: _unref(specialOptionConfig).borderColor,\n                                                        color: _unref(specialOptionConfig).textColor,\n                                                        boxShadow: `0 0 20px ${_unref(specialOptionConfig).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`,\n                                                    }),\n                                                    onClick: handleSpecialOption\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_unref(specialOptionConfig).icon), 1 /* TEXT */),\n                                                    _createTextVNode(\" \" + _toDisplayString(_unref(specialOptionConfig).label), 1 /* TEXT */)\n                                                ], 4 /* STYLE */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\" [Leave] Portal System \"),\n                                            (_unref(gameStore).hasLeave && _unref(portalChoices).length > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                                    _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3\" }, \"    \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(portalChoices), (portal, i) => {\n                                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 'portal-' + i,\n                                                                class: \"portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95\",\n                                                                style: _normalizeStyle({\n                                                                    backgroundColor: portal.bgColor,\n                                                                    borderColor: portal.borderColor,\n                                                                    boxShadow: `0 0 15px ${portal.glowColor}, 0 0 30px ${portal.glowColor}40`,\n                                                                }),\n                                                                onClick: ($event) => (handlePortalClick(portal))\n                                                            }, [\n                                                                _createCommentVNode(\" Portal glow ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500\",\n                                                                    style: _normalizeStyle({ boxShadow: `inset 0 0 20px ${portal.glowColor}60` })\n                                                                }, null, 4 /* STYLE */),\n                                                                _createCommentVNode(\" Portal icon \"),\n                                                                _createElementVNode(\"span\", _hoisted_18, _toDisplayString(portal.icon), 1 /* TEXT */),\n                                                                _createCommentVNode(\" Portal label \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: \"text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight\",\n                                                                    style: _normalizeStyle({ color: portal.textColor })\n                                                                }, _toDisplayString(portal.label), 5 /* TEXT, STYLE */),\n                                                                _createCommentVNode(\" Animated ring \"),\n                                                                _createElementVNode(\"div\", {\n                                                                    class: \"absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity\",\n                                                                    style: _normalizeStyle({ borderColor: portal.borderColor })\n                                                                }, null, 4 /* STYLE */)\n                                                            ], 12 /* STYLE, PROPS */, _hoisted_17));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" Error Display \"),\n                                    (_unref(gameStore).error)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, _toDisplayString(_unref(gameStore).error), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Input Area \"),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => (_isRef(inputText) ? (inputText).value = $event : null)),\n                                    type: \"text\",\n                                    disabled: _unref(gameStore).isGenerating,\n                                    placeholder: _unref(gameStore).isGenerating ? '...' : '...',\n                                    class: \"w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    onKeydown: _withKeys(handleSendInput, [\"enter\"])\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_22), [\n                                    [_vModelText, _unref(inputText)]\n                                ])\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"p-3 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed\",\n                                disabled: _unref(gameStore).isGenerating,\n                                onClick: handleSendInput\n                            }, [\n                                _createVNode(_unref(Send), { class: \"size-5\" })\n                            ], 8 /* PROPS */, _hoisted_23)\n                        ])\n                    ], 4 /* STYLE */)\n                ]),\n                _createCommentVNode(\" Player Status HUD (Bottom Left) - Collapsible \"),\n                _createElementVNode(\"div\", _hoisted_24, [\n                    _createCommentVNode(\" Toggle Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md\",\n                        title: _unref(isStatusOpen) ? '' : '',\n                        onClick: _cache[9] || (_cache[9] = ($event) => (isStatusOpen.value = !_unref(isStatusOpen)))\n                    }, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(_unref(isStatusOpen) ? _unref(ChevronDown) : _unref(Activity)), { class: \"size-5\" }))\n                    ], 8 /* PROPS */, _hoisted_25),\n                    _createCommentVNode(\" Expandable Status Panel \"),\n                    _createVNode(_Transition, { name: \"status-slide\" }, {\n                        default: _withCtx(() => [\n                            (_unref(isStatusOpen))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                    _createCommentVNode(\" Decorative Elements \"),\n                                    _cache[42] || (_cache[42] = _createElementVNode(\"div\", { class: \"absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[43] || (_cache[43] = _createElementVNode(\"div\", { class: \"absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black\" }, null, -1 /* CACHED */)),\n                                    _cache[44] || (_cache[44] = _createElementVNode(\"div\", { class: \"absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" HP & MP: Container-fill style \"),\n                                    _createElementVNode(\"div\", _hoisted_27, [\n                                        _createCommentVNode(\" HP Heart Container \"),\n                                        _createElementVNode(\"div\", _hoisted_28, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-heart\",\n                                                title: `HP: ${_unref(displayHp)}/${_unref(displayMaxHp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_30, [\n                                                    _cache[33] || (_cache[33] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"heartClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"hpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"hpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#8a0e0e\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#cc2222\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#ee4444\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Heart outline (dark) \"),\n                                                    _cache[34] || (_cache[34] = _createElementVNode(\"path\", {\n                                                        d: \"M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z\",\n                                                        fill: \"#1a0808\",\n                                                        stroke: \"#5c1a1a\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level (clipped to heart) \"),\n                                                    _createElementVNode(\"g\", _hoisted_31, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(hpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(hpPercent) / 100) * 60,\n                                                            fill: \"url(#hpGradient)\",\n                                                            filter: \"url(#hpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_32)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[35] || (_cache[35] = _createElementVNode(\"ellipse\", {\n                                                        cx: \"22\",\n                                                        cy: \"18\",\n                                                        rx: \"5\",\n                                                        ry: \"4\",\n                                                        fill: \"rgba(255,255,255,0.12)\",\n                                                        transform: \"rotate(-20,22,18)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_29),\n                                            _createElementVNode(\"span\", _hoisted_33, [\n                                                _createElementVNode(\"span\", _hoisted_34, _toDisplayString(_unref(displayHp)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_35, \"/\" + _toDisplayString(_unref(displayMaxHp)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\" MP Crystal Container \"),\n                                        _createElementVNode(\"div\", _hoisted_36, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"stat-container-mana\",\n                                                title: `MP: ${_unref(displayMp)}`\n                                            }, [\n                                                (_openBlock(), _createElementBlock(\"svg\", _hoisted_38, [\n                                                    _cache[36] || (_cache[36] = _createElementVNode(\"defs\", null, [\n                                                        _createElementVNode(\"clipPath\", { id: \"manaClip\" }, [\n                                                            _createElementVNode(\"path\", { d: \"M32 4 L54 24 L32 60 L10 24 Z\" })\n                                                        ]),\n                                                        _createElementVNode(\"filter\", { id: \"mpGlow\" }, [\n                                                            _createElementVNode(\"feGaussianBlur\", {\n                                                                stdDeviation: \"2\",\n                                                                result: \"glow\"\n                                                            }),\n                                                            _createElementVNode(\"feMerge\", null, [\n                                                                _createElementVNode(\"feMergeNode\", { in: \"glow\" }),\n                                                                _createElementVNode(\"feMergeNode\", { in: \"SourceGraphic\" })\n                                                            ])\n                                                        ]),\n                                                        _createElementVNode(\"linearGradient\", {\n                                                            id: \"mpGradient\",\n                                                            x1: \"0\",\n                                                            y1: \"1\",\n                                                            x2: \"0\",\n                                                            y2: \"0\"\n                                                        }, [\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"0%\",\n                                                                \"stop-color\": \"#1a1a8a\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"50%\",\n                                                                \"stop-color\": \"#3344cc\"\n                                                            }),\n                                                            _createElementVNode(\"stop\", {\n                                                                offset: \"100%\",\n                                                                \"stop-color\": \"#5566ee\"\n                                                            })\n                                                        ])\n                                                    ], -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Crystal outline \"),\n                                                    _cache[37] || (_cache[37] = _createElementVNode(\"path\", {\n                                                        d: \"M32 4 L54 24 L32 60 L10 24 Z\",\n                                                        fill: \"#080818\",\n                                                        stroke: \"#1a1a5c\",\n                                                        \"stroke-width\": \"1.5\"\n                                                    }, null, -1 /* CACHED */)),\n                                                    _createCommentVNode(\" Fill level \"),\n                                                    _createElementVNode(\"g\", _hoisted_39, [\n                                                        _createElementVNode(\"rect\", {\n                                                            x: \"0\",\n                                                            y: 64 - (_unref(mpPercent) / 100) * 60,\n                                                            width: \"64\",\n                                                            height: (_unref(mpPercent) / 100) * 60,\n                                                            fill: \"url(#mpGradient)\",\n                                                            filter: \"url(#mpGlow)\",\n                                                            class: \"transition-all duration-700 ease-out\"\n                                                        }, null, 8 /* PROPS */, _hoisted_40)\n                                                    ]),\n                                                    _createCommentVNode(\" Highlight \"),\n                                                    _cache[38] || (_cache[38] = _createElementVNode(\"polygon\", {\n                                                        points: \"26,14 32,8 38,14 32,20\",\n                                                        fill: \"rgba(255,255,255,0.1)\"\n                                                    }, null, -1 /* CACHED */))\n                                                ]))\n                                            ], 8 /* PROPS */, _hoisted_37),\n                                            _createElementVNode(\"span\", _hoisted_41, [\n                                                _createElementVNode(\"span\", _hoisted_42, _toDisplayString(_unref(displayMp)), 1 /* TEXT */)\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Divider \"),\n                                    _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent\" }, null, -1 /* CACHED */)),\n                                    _createCommentVNode(\" Dice Range Row \"),\n                                    _createElementVNode(\"div\", _hoisted_43, [\n                                        _createElementVNode(\"div\", _hoisted_44, [\n                                            _createVNode(_unref(Dices), { class: \"size-4 text-dungeon-gold-dim drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_45, [\n                                                _createElementVNode(\"span\", _hoisted_46, _toDisplayString(_unref(displayMinDice)), 1 /* TEXT */),\n                                                _cache[39] || (_cache[39] = _createElementVNode(\"span\", { class: \"text-gray-500\" }, \"~\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_47, _toDisplayString(_unref(displayMaxDice)), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _cache[40] || (_cache[40] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Dice\", -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\" Gold Row \"),\n                                    _createElementVNode(\"div\", _hoisted_48, [\n                                        _createElementVNode(\"div\", _hoisted_49, [\n                                            _createVNode(_unref(Coins), { class: \"size-4 drop-shadow-sm\" }),\n                                            _createElementVNode(\"span\", _hoisted_50, _toDisplayString(_unref(displayGold)), 1 /* TEXT */)\n                                        ]),\n                                        _cache[41] || (_cache[41] = _createElementVNode(\"span\", { class: \"text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold\" }, \"Gold\", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\" Modals \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'map',\n                    onClose: _cache[10] || (_cache[10] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [...(_cache[46] || (_cache[46] = [\n                            _createElementVNode(\"div\", { class: \"w-full h-64 bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center rounded\" }, [\n                                _createElementVNode(\"span\", { class: \"font-heading text-dungeon-gold/30 text-2xl\" }, \"MAP_RENDER_TARGET\")\n                            ], -1 /* CACHED */)\n                        ]))]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'deck',\n                    onClose: _cache[11] || (_cache[11] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(resolvedDeck).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_51, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(resolvedDeck), (card, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        class: \"hover:scale-105 transition-transform flex justify-center\"\n                                    }, [\n                                        _createVNode(DungeonCard, {\n                                            card: card,\n                                            disabled: \"\"\n                                        }, null, 8 /* PROPS */, [\"card\"])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [\n                                _createVNode(_unref(Scroll), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[47] || (_cache[47] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"  \", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'relics',\n                    onClose: _cache[12] || (_cache[12] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(relicEntries).length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(relicEntries), (relic) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: relic.name,\n                                        class: \"relative flex flex-col items-center p-1\",\n                                        title: relic.name\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_55, [\n                                            _createVNode(_unref(Box), { class: \"size-8 text-dungeon-gold/70\" }),\n                                            _createElementVNode(\"span\", _hoisted_56, \"x\" + _toDisplayString(relic.count), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_57, _toDisplayString(relic.name), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_54));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_58, [\n                                _createVNode(_unref(Box), { class: \"size-12 text-dungeon-gold/20\" }),\n                                _cache[48] || (_cache[48] = _createElementVNode(\"span\", { class: \"font-ui text-dungeon-paper/40 text-sm\" }, \"\", -1 /* CACHED */))\n                            ]))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Settings Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'settings',\n                    onClose: _cache[21] || (_cache[21] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_59, [\n                            _createCommentVNode(\" Text Display Settings Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[54] || (_cache[54] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_60, [\n                                    _createCommentVNode(\" Font Size \"),\n                                    _createElementVNode(\"div\", _hoisted_61, [\n                                        _cache[49] || (_cache[49] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_62, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[13] || (_cache[13] = ($event) => (_unref(textSettings).fontSize = Math.max(12, _unref(textSettings).fontSize - 1)))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_63, _toDisplayString(_unref(textSettings).fontSize) + \"px\", 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[14] || (_cache[14] = ($event) => (_unref(textSettings).fontSize = Math.min(28, _unref(textSettings).fontSize + 1)))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Line Height \"),\n                                    _createElementVNode(\"div\", _hoisted_64, [\n                                        _cache[50] || (_cache[50] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_65, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[15] || (_cache[15] = ($event) => (_unref(textSettings).lineHeight = Math.max(1.2, +(_unref(textSettings).lineHeight - 0.1).toFixed(1))))\n                                            }, \"\"),\n                                            _createElementVNode(\"span\", _hoisted_66, _toDisplayString(_unref(textSettings).lineHeight), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm\",\n                                                onClick: _cache[16] || (_cache[16] = ($event) => (_unref(textSettings).lineHeight = Math.min(3.0, +(_unref(textSettings).lineHeight + 0.1).toFixed(1))))\n                                            }, \"+\")\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Font Family \"),\n                                    _createElementVNode(\"div\", _hoisted_67, [\n                                        _cache[52] || (_cache[52] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"select\", {\n                                            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(textSettings).fontFamily) = $event)),\n                                            class: \"bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui\"\n                                        }, [...(_cache[51] || (_cache[51] = [\n                                                _createElementVNode(\"option\", { value: \"'Cinzel', serif\" }, \"Cinzel ()\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Inter', sans-serif\" }, \"Inter\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'MedievalSharp', cursive\" }, \"MedievalSharp\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"serif\" }, \"Serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"sans-serif\" }, \"Sans-serif\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'Microsoft YaHei', sans-serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'SimSun', serif\" }, \"\", -1 /* CACHED */),\n                                                _createElementVNode(\"option\", { value: \"'KaiTi', serif\" }, \"\", -1 /* CACHED */)\n                                            ]))], 512 /* NEED_PATCH */), [\n                                            [_vModelSelect, _unref(textSettings).fontFamily]\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Container Width \"),\n                                    _createElementVNode(\"div\", _hoisted_68, [\n                                        _cache[53] || (_cache[53] = _createElementVNode(\"label\", { class: \"text-dungeon-paper/70 text-sm font-ui\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_69, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event) => ((_unref(textSettings).containerWidth) = $event)),\n                                                type: \"range\",\n                                                min: \"600\",\n                                                max: \"1600\",\n                                                step: \"50\",\n                                                class: \"w-28 accent-dungeon-gold\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(textSettings).containerWidth,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_70, _toDisplayString(_unref(textSettings).containerWidth) + \"px\", 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _cache[56] || (_cache[56] = _createElementVNode(\"div\", { class: \"h-[1px] w-full bg-dungeon-gold/20\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\" System Section \"),\n                            _createElementVNode(\"div\", null, [\n                                _cache[55] || (_cache[55] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_71, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded\",\n                                        onClick: _cache[19] || (_cache[19] =\n                                            //@ts-ignore\n                                            (...args) => (_unref(toggleFullScreen) && _unref(toggleFullScreen)(...args)))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded\",\n                                        onClick: _cache[20] || (_cache[20] = ($event) => (_ctx.$emit('backToSplash')))\n                                    }, \"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2\",\n                                        onClick: openCombatTestBuilder\n                                    }, \"   \")\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Test Builder Modal \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(activeModal) === 'combatTestBuilder',\n                    onClose: _cache[24] || (_cache[24] = ($event) => (activeModal.value = null))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_72, [\n                            (_unref(combatTestStep) === 'deck')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_73, [\n                                        _cache[57] || (_cache[57] = _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"19\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_74, _toDisplayString(_unref(selectedTestDeck).length) + \"/9\", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_75, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(selectedTestDeckCards), (entry) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: `selected-card-${entry.idx}`,\n                                                class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-gold/20 bg-[#1a0f08]/50 p-2\",\n                                                title: '',\n                                                onClick: ($event) => (removeCardFromTestDeck(entry.idx))\n                                            }, [\n                                                _createVNode(DungeonCard, {\n                                                    card: entry.card,\n                                                    disabled: \"\"\n                                                }, null, 8 /* PROPS */, [\"card\"]),\n                                                _cache[58] || (_cache[58] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-red-300/90\" }, \"\", -1 /* CACHED */))\n                                            ], 8 /* PROPS */, _hoisted_76));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Math.max(0, 9 - _unref(selectedTestDeck).length), (idx) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: `empty-slot-${idx}`,\n                                                class: \"min-h-[260px] rounded border border-dungeon-brown/40 bg-black/20 text-dungeon-paper/30 text-xs flex items-center justify-center\"\n                                            }, \"  \"));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_77, [\n                                        _createElementVNode(\"div\", _hoisted_78, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allCardsForTest), (card) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `all-card-${card.id}`,\n                                                    class: \"hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                                    disabled: _unref(selectedTestDeck).length >= 9,\n                                                    onClick: ($event) => (addCardToTestDeck(card.name))\n                                                }, [\n                                                    _createVNode(DungeonCard, {\n                                                        card: card,\n                                                        disabled: \"\"\n                                                    }, null, 8 /* PROPS */, [\"card\"]),\n                                                    _cache[59] || (_cache[59] = _createElementVNode(\"span\", { class: \"mt-1 text-[10px] text-dungeon-gold/80\" }, \"\", -1 /* CACHED */))\n                                                ], 8 /* PROPS */, _hoisted_79));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_80, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[22] || (_cache[22] = ($event) => (activeModal.value = null))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: _unref(selectedTestDeck).length !== 9,\n                                            onClick: confirmCombatTestDeck\n                                        }, \"  \", 8 /* PROPS */, _hoisted_81)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _cache[60] || (_cache[60] = _createElementVNode(\"div\", { class: \"flex items-center justify-between\" }, [\n                                        _createElementVNode(\"h3\", { class: \"font-heading text-dungeon-gold text-sm tracking-widest uppercase\" }, \"2\"),\n                                        _createElementVNode(\"span\", { class: \"text-xs font-ui text-dungeon-paper/70\" }, \": 9\")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_82, [\n                                        _createElementVNode(\"div\", _hoisted_83, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(allEnemyNamesForTest), (enemyName) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: `enemy-${enemyName}`,\n                                                    class: _normalizeClass([\"text-left px-3 py-2 rounded border text-xs transition-colors\", _unref(selectedTestEnemy) === enemyName\n                                                            ? 'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold'\n                                                            : 'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),\n                                                    onClick: ($event) => (selectedTestEnemy.value = enemyName)\n                                                }, _toDisplayString(enemyName), 11 /* TEXT, CLASS, PROPS */, _hoisted_84));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_85, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50\",\n                                            onClick: _cache[23] || (_cache[23] = ($event) => (combatTestStep.value = 'deck'))\n                                        }, \"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed\",\n                                            disabled: !_unref(selectedTestEnemy),\n                                            onClick: confirmCombatTestEnemyAndStart\n                                        }, \"  \", 8 /* PROPS */, _hoisted_86)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Save/Load Panel \"),\n                _createVNode(SaveLoadPanel, {\n                    \"is-open\": _unref(gameStore).isSaveLoadOpen,\n                    entries: _unref(gameStore).saveEntries,\n                    onClose: _cache[25] || (_cache[25] = ($event) => (_unref(gameStore).isSaveLoadOpen = false))\n                }, null, 8 /* PROPS */, [\"is-open\", \"entries\"]),\n                _createCommentVNode(\" Variable Update Viewer \"),\n                _createVNode(DungeonModal, {\n                    title: \"\",\n                    \"is-open\": _unref(isVariableUpdateOpen),\n                    onClose: _cache[26] || (_cache[26] = ($event) => (isVariableUpdateOpen.value = false))\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(gameStore).variableUpdateText)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_87, [\n                                _createElementVNode(\"pre\", _hoisted_88, _toDisplayString(_unref(gameStore).variableUpdateText), 1 /* TEXT */)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_89, \" <UpdateVariable>  <update> \"))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"is-open\"]),\n                _createCommentVNode(\" Combat Overlay \"),\n                _createVNode(_Transition, { name: \"combat-fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(showCombat))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_90, [\n                                _createVNode(CombatView, {\n                                    class: \"w-full h-full\",\n                                    \"enemy-name\": _unref(combatEnemyName),\n                                    \"player-deck\": _unref(resolvedDeck),\n                                    \"initial-player-stats\": {\n                                        hp: _unref(displayHp),\n                                        maxHp: _unref(displayMaxHp),\n                                        mp: _unref(displayMp),\n                                        minDice: _unref(displayMinDice) || 1,\n                                        maxDice: _unref(displayMaxDice) || 6,\n                                        effects: [{ type: _unref(EffectType).MANA_SPRING, stacks: 1, polarity: 'buff' }],\n                                    },\n                                    onEndCombat: handleCombatEnd\n                                }, null, 8 /* PROPS */, [\"enemy-name\", \"player-deck\", \"initial-player-stats\"]),\n                                _createCommentVNode(\" Exit combat button \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm\",\n                                    onClick: _cache[27] || (_cache[27] = ($event) => (showCombat.value = false))\n                                }, \"   \")\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameView.vue?vue&type=style&index=0&id=c7164144&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c7164144\"]])\n\nexport default __exports__","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"play\", [\n  [\n    \"path\",\n    {\n      d: \"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z\",\n      key: \"10ikf1\"\n    }\n  ]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"star\", [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-vue-next v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Github = createLucideIcon(\"github\", [\n  [\n    \"path\",\n    {\n      d: \"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\",\n      key: \"tonef\"\n    }\n  ],\n  [\"path\", { d: \"M9 18c-4.51 2-5-2-7-2\", key: \"9comsn\" }]\n]);\n\nexport { Github as default };\n//# sourceMappingURL=github.js.map\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"z-10 flex flex-col items-center space-y-12\" };\nconst _hoisted_2 = { class: \"flex flex-col space-y-4 w-64\" };\nconst _hoisted_3 = {\n    disabled: \"\",\n    class: \"group px-8 py-3 bg-black/50 border border-dungeon-brown text-gray-600 font-heading tracking-widest cursor-not-allowed flex items-center justify-center space-x-2\"\n};\nconst _hoisted_4 = { class: \"absolute bottom-6 text-dungeon-brown text-xs font-mono tracking-widest flex flex-col items-center space-y-2 opacity-60 hover:opacity-100 transition-opacity\" };\nconst _hoisted_5 = { class: \"flex items-center space-x-2\" };\nimport { Github, Maximize, Play, Star } from 'lucide-vue-next';\n\nimport { ref, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SplashScreen',\n    emits: [\"start\", \"toggleFullscreen\"],\n    setup(__props) {\n        const isVisible = ref(false);\n        onMounted(() => {\n            isVisible.value = true;\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000\", _unref(isVisible) ? 'opacity-100' : 'opacity-0']),\n                style: { aspectRatio: '16/9' }\n            }, [\n                _createCommentVNode(\" Dynamic Background \"),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0\" }, null, -1 /* CACHED */)),\n                _cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n                    class: \"absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat\",\n                    style: { \"background-image\": \"url('https://www.transparenttextures.com/patterns/dark-matter.png')\" }\n                }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Ornamental Frame \"),\n                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Fullscreen Button (Top Right, Small) \"),\n                _createElementVNode(\"button\", {\n                    class: \"absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300\",\n                    title: \"\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('toggleFullscreen')))\n                }, [\n                    _createVNode(_unref(Maximize), { class: \"size-4\" })\n                ]),\n                _createCommentVNode(\" Main Content \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Title Section \"),\n                    _cache[5] || (_cache[5] = _createStaticVNode(\"<div class=\\\"text-center space-y-4 relative\\\"><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50\\\"></div><div class=\\\"w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50\\\"></div><h1 class=\\\"text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide\\\">  </h1><h2 class=\\\"text-xl md:text-2xl font-body text-dungeon-gold-dim tracking-[0.5em] uppercase border-t border-dungeon-brown pt-4 mt-2\\\"> Desire Dungeon </h2></div>\", 1)),\n                    _createCommentVNode(\" Menu Actions \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden\",\n                            onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('start')))\n                        }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full\" }, null, -1 /* CACHED */)),\n                            _createVNode(_unref(Play), { class: \"size-5 text-dungeon-gold group-hover:scale-110 transition-transform\" }),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold\" }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"button\", _hoisted_3, [\n                            _createVNode(_unref(Star), { class: \"size-4\" }),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" Footer \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"w-12 h-[1px] bg-dungeon-brown mb-2\" }, null, -1 /* CACHED */)),\n                    _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"VER 0.2.0 // TAVERN ENGINE\", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createVNode(_unref(Github), { class: \"size-3\" }),\n                        _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"POWERED BY LLM\", -1 /* CACHED */))\n                    ])\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SplashScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"w-full relative\" };\nimport GameView from './components/GameView.vue';\nimport SplashScreen from './components/SplashScreen.vue';\nimport { toggleFullScreen } from './fullscreen';\nimport { useGameStore } from './gameStore';\n\nimport { ref, nextTick } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const appState = ref('SPLASH');\n        const gameStore = useGameStore();\n        /**\n         *  gameStoreMVU\n         */\n        async function startGame() {\n            appState.value = 'GAME';\n            await nextTick();\n            await gameStore.initialize();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Splash Screen \"),\n                _createVNode(_Transition, {\n                    name: \"scene-fade\",\n                    mode: \"out-in\"\n                }, {\n                    default: _withCtx(() => [\n                        (_unref(appState) === 'SPLASH')\n                            ? (_openBlock(), _createBlock(SplashScreen, {\n                                key: \"splash\",\n                                onStart: startGame,\n                                onToggleFullscreen: _unref(toggleFullScreen)\n                            }, null, 8 /* PROPS */, [\"onToggleFullscreen\"]))\n                            : (_openBlock(), _createBlock(GameView, {\n                                key: \"game\",\n                                onBackToSplash: _cache[0] || (_cache[0] = ($event) => (appState.value = 'SPLASH'))\n                            }))\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=329e49cc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-329e49cc\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './styles.css';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","hasA11yProp","prop","startsWith","isEmptyString","value","mergeClasses","classes","filter","className","index","array","Boolean","trim","indexOf","join","toKebabCase","string","replace","toLowerCase","toPascalCase","camelCase","match","p1","p2","toUpperCase","toCamelCase","charAt","slice","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","slots","h","Number","class","default","map","child","createLucideIcon","iconName","attrs","d","Scroll","Box","Settings","cx","cy","r","Maximize","BookOpen","FileText","Send","ChevronDown","Activity","Dices","x","y","rx","ry","Coins","CardType","EffectType","GamePhase","CombatPhase","id","type","PHYSICAL","category","manaCost","calculation","multiplier","addition","damageLogic","mode","scale","scaleAddition","traits","combo","reroll","draw","cardEffects","description","MAGIC","FUNCTION","kind","effectType","ARMOR","valueMode","DODGE","BURN","fixedValue","VULNERABLE","BARRIER","CARD_REGISTRY","Map","getCardByName","get","pickCard","ctx","deck","find","c","stats","hp","maxHp","mp","minDice","maxDice","effects","REGEN","stacks","polarity","selectCard","enemyStats","flags","hasUsedHeal","options","total","reduce","s","o","weight","roll","Math","random","opt","length","weightedRandom","ENEMY_REGISTRY","getEnemyByName","toggleFullScreen","document","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","catch","err","console","warn","message","extractTag","text","tagName","escapedTagName","regex","RegExp","exec","fullMatch","openTagEnd","firstChar","trimStart","extractTagByPriority","tagNames","content","removeThinkBlock","thinkTagRegex","result","depth","lastIndex","isClosing","tagStart","tagEnd","removeHtmlComments","parseOptions","optionText","split","line","parseResponse","cleanText","mainText","optionRaw","summary","updateVarBlock","jsonPatch","variableUpdate","allOptions","hasOptionE","some","test","hasLeave","rawText","extractSummary","messageText","useGameStore","ref","currentSummary","isGenerating","streamingText","error","isInitialized","variableUpdateText","isEditing","editingText","statData","saveEntries","isSaveLoadOpen","pendingPortalChanges","loadLatestAssistantState","lastId","getLastMessageId","messages","getChatMessages","role","extractOptions","detectOptionE","detectLeave","extractVariableUpdate","loadStatData","mvuData","Mvu","getMvuData","message_id","raw","_","info","applyParsedResponse","parsed","refreshLocalStatData","JSON","stringify","initialize","async","waitGlobalInitialized","msg","Error","String","sendAction","userInput","oldMvuData","userMvuData","baseMvuData","changes","cloneDeep","stat_data","sd","undefined","area","roomType","enemyName","stat","resetRoomCounter","incrementKeys","applyPendingPortalChangesToMvu","createChatMessages","data","refresh","streamListener","eventOn","iframe_events","STREAM_TOKEN_RECEIVED_FULLY","_generation_id","generate","user_input","should_stream","stop","newMvuData","parseMessage","display_data","delta_data","setPendingPortalChanges","loadSaveEntries","entries","push","messageId","rollbackTo","targetMessageId","idsToDelete","i","deleteChatMessages","e","toastr","success","rerollCurrent","lastUserMsg","reverse","m","startEdit","saveEdit","currentMvuData","prevMvuData","setChatMessages","replaceMvuData","cancelEdit","updateStatDataFields","fields","nextMvuData","Object","assign","Settings2","Skull","Layers","Trash2","X","EFFECT_REGISTRY","timings","stackable","maxStacks","BIND","DEVOUR","POISON","BLEED","IGNITE_AURA","STUN","CHARGE","COLD","NON_LIVING","MANA_DRAIN","MANA_SPRING","findEffect","entity","hasEffect","getEffectStacks","effect","applyEffect","def","existing","min","restrictedTypes","instance","source","removeEffect","reduceEffectStacks","amount","processOnTurnStart","hpChange","mpChange","trueDamage","isStunned","logs","applyToOpponent","poisonStacks","burnStacks","burnDamage","vulnerableStacks","regenStacks","manaSpringStacks","processOnTurnEnd","armorEffect","floor","Sword","Sparkles","RefreshCcw","Footprints","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","card","disabled","selected","faceDown","isEnemy","emits","setup","__props","typeColorClass","computed","typeIcon","typeIconColor","typeGradient","dl","baseValue","_ctx","_cache","onClick","$event","$emit","style","rolling","displayValue","interval","gradientId","toString","substr","sizeClass","sm","md","lg","numberSizeClass","borderColor","textColor","watch","clearInterval","setInterval","immediate","onUnmounted","x1","y1","x2","y2","offset","points","opacity","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","SPEED_SETTING_KEY","initialPlayerStats","playerDeck","emit","__emit","enemyDef","enemyDisplayName","aiFlags","reactive","playerStats","getEffectName","getEffectDescription","effectPillClass","playerArmor","eff","enemyArmor","enemyDeck","PASS_CARD","combatState","turn","phase","TURN_START","actionsRemaining","playerBaseDice","enemyBaseDice","playerHand","sort","discardPile","enemyDiscard","enemyIntentCard","enemyPredictedPoint","playerSelectedCard","lastPlayedCard","isRolling","showClashAnimation","shatteringTarget","screenShake","overlayOpen","settingsOpen","battleSpeedUp","logsCollapsed","speedMultiplier","combatRootStyle","floatingNumbers","previewPlayerDice","previewEnemyDice","displayPlayerDice","displayEnemyDice","hoverPreviewTimer","floatingNumberId","NO_RELIC_MOD","globalMultiplier","globalAddition","scaleDuration","ms","max","wait","Promise","resolve","setTimeout","transitionStyle","transitionDuration","withTransition","floatingColors","physical","magic","shield","heal","mana","floatingNumbersFor","side","entry","resolveTargetSide","clearDicePreview","clearTimeout","getCardFinalPoint","baseDice","attacker","defender","finalPoint","entityEffects","relicModifiers","point","chargeStacks","calculateFinalPoint","getCardPreviewPoint","handlePlayerCardHoverEnd","handlePlayerCardTouchEnd","pushFloatingNumber","sign","duration","colorClass","leftOffset","topOffset","log","onMounted","localStorage","getItem","enabled","setItem","drawCards","count","currentDeck","currentDiscard","discard","drawn","pop","newDeck","newDiscard","handCardClass","isSelected","PLAYER_INPUT","label","turnStartLogs","burnLog","includes","burnMatch","hpBefore","hpDelta","mpBefore","mpDelta","l","DRAW_PHASE","pRoll","eRoll","eCard","idx","selectEnemyCard","handleSkipTurn","RESOLUTION","resolveCombat","pCard","pDice","eDice","shouldClash","t1","t2","enemySkippedTurn","pClashPoint","eClashPoint","clearPlayerBurn","reason","pSuccess","eSuccess","resultMsg","clashWinner","executeCard","defenderSide","syncCurrentPointForUi","nextPoint","applyCardEffects","ce","targetKey","targetEntity","targetSide","healAmount","beforeHp","actualHeal","restoreAmount","beforeMp","actualRestore","cleanseTargets","cleanseTypes","et","burned","burnStacksOnDefender","cardForCalculation","customDamage","damage","dmgLogs","calculateRawDamage","isTrueDamage","cold","attackerEffects","vuln","defenderEffects","armor","calculateFinalDamage","actualDamage","applyLogs","ae","actual","applyDamageToEntity","damageKind","queue","deferredEnemyAction","enemyAction","typePriority","t","a","b","action","pEndLogs","eEndLogs","pHp","eHp","DungeonCard","DungeonDice","popup","left","top","animationDuration","title","onMouseenter","onMouseleave","onTouchstartPassive","onTouchend","onTouchcancel","handIdx","played","splice","innerHTML","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","isOpen","to","$slots","RotateCcw","RefreshCw","Pencil","gameStore","confirmTarget","doRollback","handleReroll","handleEdit","DungeonModal","onClose","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","SidebarIcon","defineComponent","icon","required","active","tooltipSide","activeModal","inputText","isVariableUpdateOpen","isStatusOpen","showCombat","combatEnemyName","combatTestStep","selectedTestDeck","selectedTestEnemy","allCardsForTest","values","cardByNameForTest","set","selectedTestDeckCards","cardName","allEnemyNamesForTest","keys","resolvedDeck","skills","n","relicEntries","textSettings","fontSize","lineHeight","fontFamily","containerWidth","displayText","displayHp","displayMaxHp","displayMp","displayGold","displayMinDice","displayMaxDice","hpPercent","mpPercent","handleSendInput","ROOM_TYPE_CONFIG","bgColor","glowColor","specialOptionConfig","handleSpecialOption","FLOOR_MAP","FLOOR_ORDER","getFloorForArea","areas","FLOOR_MONSTER_CONFIG","common","uniqueByArea","COMMON_MONSTER_RATE_BY_FLOOR","pickBattleMonsterByArea","config","commonPool","uniquePool","commonRate","pool","arr","PORTAL_ROOM_TYPES","PORTAL_ROOM_VISUALS","AREA_PORTAL_VISUAL","cachedPortals","cachedPortalFingerprint","shuffle","j","generatePortals","currentArea","currentRoomType","roomsPassed","isStartArea","targetFloor","currentFloor","getNextFloor","areaName","floorName","isFloorTransition","bossChance","rt","portalChoices","fingerprint","ROOM_STAT_KEY","openSaveLoad","openVariableUpdate","openCombatTestBuilder","availableCardNames","Set","presetDeck","Array","isArray","has","confirmCombatTestDeck","confirmCombatTestEnemyAndStart","handleCombatEnd","win","args","maxWidth","option","stripped","backgroundColor","boxShadow","portal","statKey","encounterMonster","placeholder","onKeydown","stdDeviation","in","transform","relic","toFixed","step","number","SaveLoadPanel","CombatView","onEndCombat","Play","Star","Github","isVisible","aspectRatio","appState","startGame","nextTick","SplashScreen","onStart","onToggleFullscreen","GameView","onBackToSplash","$","app","createApp","App","use","mount","window","on","unmount"],"sourceRoot":""}