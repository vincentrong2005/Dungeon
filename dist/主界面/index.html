<head><script src="https://kit.fontawesome.com/5637acece7.js" crossorigin="anonymous"></script><script type="module">/*! For license information please see index.js.LICENSE.txt */
import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var a={313(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}}},n={};const o=Vue,r=e=>{for(const t in e)if(t.startsWith('aria-')||'role'===t||'title'===t)return!0;return!1},l=e=>''===e,i=(...e)=>e.filter((e,t,a)=>Boolean(e)&&''!==e.trim()&&a.indexOf(e)===t).join(' ').trim(),s=e=>e.replace(/([a-z0-9])([A-Z])/g,'$1-$2').toLowerCase(),c=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)};var d={xmlns:'http://www.w3.org/2000/svg',width:24,height:24,viewBox:'0 0 24 24',fill:'none',stroke:'currentColor','stroke-width':2,'stroke-linecap':'round','stroke-linejoin':'round'};const u=({name:e,iconNode:t,absoluteStrokeWidth:a,'absolute-stroke-width':n,strokeWidth:u,'stroke-width':m,size:p=d.width,color:f=d.stroke,...g},{slots:y})=>(0,o.h)('svg',{...d,...g,width:p,height:p,stroke:f,'stroke-width':l(a)||l(n)||!0===a||!0===n?24*Number(u||m||d['stroke-width'])/Number(p):u||m||d['stroke-width'],class:i('lucide',g.class,...e?[`lucide-${s(c(e))}-icon`,`lucide-${s(e)}`]:['lucide-icon']),...!y.default&&!r(g)&&{'aria-hidden':'true'}},[...t.map(e=>(0,o.h)(...e)),...y.default?[y.default()]:[]]),m=(e,t)=>(a,{slots:n,attrs:r})=>(0,o.h)(u,{...r,...a,iconNode:t,name:e},n),p=m('book',[['path',{d:'M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20',key:'k3hazp'}]]),f=m('lock',[['rect',{width:'18',height:'11',x:'3',y:'11',rx:'2',ry:'2',key:'1w4ew1'}],['path',{d:'M7 11V7a5 5 0 0 1 10 0v4',key:'fwvmzm'}]]),g=m('settings',[['path',{d:'M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915',key:'1i5ecw'}],['circle',{cx:'12',cy:'12',r:'3',key:'1v7zrd'}]]),y=m('scroll',[['path',{d:'M19 17V5a2 2 0 0 0-2-2H4',key:'zz82l3'}],['path',{d:'M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3',key:'1ph1d7'}]]),v=m('box',[['path',{d:'M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z',key:'hh9hay'}],['path',{d:'m3.3 7 8.7 5 8.7-5',key:'g66t2b'}],['path',{d:'M12 22V12',key:'d0xqtd'}]]),h=m('users',[['path',{d:'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2',key:'1yyitq'}],['path',{d:'M16 3.128a4 4 0 0 1 0 7.744',key:'16gr8j'}],['path',{d:'M22 21v-2a4 4 0 0 0-3-3.87',key:'kshegd'}],['circle',{cx:'9',cy:'7',r:'4',key:'nufk8'}]]),b=m('map',[['path',{d:'M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z',key:'169xi5'}],['path',{d:'M15 5.764v15',key:'1pn4in'}],['path',{d:'M9 3.236v15',key:'1uimfh'}]]),x=m('maximize',[['path',{d:'M8 3H5a2 2 0 0 0-2 2v3',key:'1dcmit'}],['path',{d:'M21 8V5a2 2 0 0 0-2-2h-3',key:'1e4gt3'}],['path',{d:'M3 16v3a2 2 0 0 0 2 2h3',key:'wsl5sc'}],['path',{d:'M16 21h3a2 2 0 0 0 2-2v-3',key:'18trek'}]]),k=m('book-open',[['path',{d:'M12 7v14',key:'1akyts'}],['path',{d:'M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z',key:'ruj8y'}]]),E=m('file-text',[['path',{d:'M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z',key:'1oefj6'}],['path',{d:'M14 2v5a1 1 0 0 0 1 1h5',key:'wfsgrz'}],['path',{d:'M10 9H8',key:'b1mrlr'}],['path',{d:'M16 13H8',key:'t4e002'}],['path',{d:'M16 17H8',key:'z1uh3a'}]]),N=m('send',[['path',{d:'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',key:'1ffxy3'}],['path',{d:'m21.854 2.147-10.94 10.939',key:'12cjpa'}]]),C=m('chevron-down',[['path',{d:'m6 9 6 6 6-6',key:'qrunsl'}]]),M=m('activity',[['path',{d:'M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2',key:'169zse'}]]),w=m('dices',[['rect',{width:'12',height:'12',x:'2',y:'10',rx:'2',ry:'2',key:'6agr2n'}],['path',{d:'m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6',key:'1o487t'}],['path',{d:'M6 18h.01',key:'uhywen'}],['path',{d:'M10 14h.01',key:'ssrbsk'}],['path',{d:'M15 6h.01',key:'cblpky'}],['path',{d:'M18 9h.01',key:'2061c0'}]]),D=m('coins',[['circle',{cx:'8',cy:'8',r:'6',key:'3yglwk'}],['path',{d:'M18.09 10.37A6 6 0 1 1 10.34 18',key:'t5s6rm'}],['path',{d:'M7 6h1v4',key:'1obek4'}],['path',{d:'m16.71 13.88.7.71-2.82 2.82',key:'1rbuyh'}]]);var S,A,V,T;!function(e){e.PHYSICAL='物理',e.MAGIC='魔法',e.FUNCTION='功能',e.DODGE='闪避',e.ACTIVE='主动',e.CURSE='诅咒'}(S||(S={})),function(e){e.BARRIER='结界',e.ARMOR='护甲',e.BIND='束缚',e.DEVOUR='吞食',e.POISON='中毒',e.POISON_AMOUNT='中毒量',e.CORROSION='侵蚀',e.BURN='燃烧',e.BLEED='流血',e.VULNERABLE='易伤',e.DAMAGE_BOOST='增伤',e.REGEN='生命回复',e.WHITE_TURBID='白浊',e.IGNITE_AURA='施加燃烧',e.STUN='眩晕',e.CHARGE='蓄力',e.FATIGUE='疲劳',e.COLD='寒冷',e.TEMPERATURE_DIFF='温差',e.NON_LIVING='非生物',e.NON_ENTITY='非实体',e.ILLUSORY_BODY='虚幻之躯',e.TEMP_MAX_HP='临时生命上限',e.MAX_HP_REDUCTION='生命上限削减',e.POINT_GROWTH_BIG='点数成长（大）',e.POINT_GROWTH_SMALL='点数成长（小）',e.MANA_DRAIN='法力枯竭',e.MANA_SPRING='魔力源泉',e.SWARM='群集',e.BLOOD_COCOON='血茧',e.INDOMITABLE='不屈',e.PEEP_FORBIDDEN='窥视禁忌',e.BLIND_ASH='盲目之蚀',e.COGNITIVE_INTERFERENCE='认知干涉',e.MEMORY_FOG='失忆迷雾',e.SILENCE='禁言',e.STURDY='坚固',e.SHOCK='电击',e.FLAME_ATTACH='火焰附加',e.POISON_ATTACH='毒素附加',e.TOXIN_SPREAD='毒素蔓延',e.AMBUSH='伏击',e.FROST_ATTACH='冰霜附加',e.BLOODBLADE_ATTACH='血刃附加',e.LIGHTNING_ATTACH='雷电附加',e.THORNS='荆棘',e.INK_CREATION='笔墨造物'}(A||(A={})),function(e){e.EXPLORE='EXPLORE',e.COMBAT='COMBAT'}(V||(V={})),function(e){e.TURN_START='TURN_START',e.DRAW_PHASE='DRAW_PHASE',e.INTENT_PREVIEW='INTENT_PREVIEW',e.PLAYER_INPUT='PLAYER_INPUT',e.RESOLUTION='RESOLUTION',e.DISCARD_PHASE='DISCARD_PHASE',e.TURN_END='TURN_END',e.WIN='WIN',e.LOSE='LOSE'}(T||(T={}));const B=[{id:'active_basic_reroll_self',name:'重来！',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:1,Cooldown:1,description:'重掷自己的骰子'},{id:'active_basic_reroll_enemy',name:'你也重来！',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:1,Cooldown:1,description:'重掷对手的骰子'},{id:'active_basic_draw',name:'抽牌',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:2,Cooldown:1,description:'抽一张牌，若手牌满三张则随机替换一张'},{id:'active_basic_guard',name:'防御！',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:0,Cooldown:2,description:'增加2点护甲'},{id:'active_basic_boost',name:'增幅',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:1,Cooldown:1,description:'我方骰子点数+1'},{id:'active_basic_weaken',name:'削弱',type:S.ACTIVE,category:'基础',rarity:'普通',manaCost:0,Cooldown:2,description:'敌方骰子点数-1'}],O=new Map(B.map(e=>[e.name,e])),I=(new Map(B.map(e=>[e.id,e])),e=>e.map(e=>(e=>{const t=O.get(e);return t?{...t}:null})(e)).filter(e=>Boolean(e))),L={id:'basic_physical',name:'普通物理攻击',type:S.PHYSICAL,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数的伤害'},R={id:'basic_physical_plus_1',name:'普通物理攻击+1',type:S.PHYSICAL,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+1，造成1倍最终点数的伤害'},P={id:'basic_physical_plus_2',name:'普通物理攻击+2',type:S.PHYSICAL,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+2，造成1倍最终点数的伤害'},H={id:'basic_physical_plus_4',name:'普通物理攻击+4',type:S.PHYSICAL,category:'基础',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:4},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+4，造成1倍最终点数的伤害'},U={id:'basic_magic',name:'普通魔法攻击',type:S.MAGIC,category:'基础',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗2MP，造成1.5倍点数的伤害'},G={id:'focus_magic_attack',name:'聚焦魔法攻击',type:S.MAGIC,category:'基础',rarity:'普通',manaCost:3,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗3MP，骰子点数*1.5，造成1倍最终点数的伤害'},F={id:'basic_shield',name:'普通护盾',type:S.FUNCTION,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1}],description:'点数+1，获得1倍点数的护甲'},j={id:'basic_point_suppress',name:'压势',type:S.FUNCTION,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'根据自身骰子点数减少对方骰子点数'},Y={id:'basic_dodge',name:'普通闪避',type:S.DODGE,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'闪避'},W={id:'basic_rest',name:'休眠',type:S.FUNCTION,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:.6},{kind:'heal',target:'self',valueMode:'point_scale',scale:.6}],description:'增加0.6倍点数的护甲与0.6倍点数的生命值'},X={id:'basic_side_step_dodge',name:'侧身闪避',type:S.DODGE,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数-1，闪避'},q={id:'basic_existence_erasure',name:'存在消除',type:S.DODGE,category:'基础',rarity:'稀有',manaCost:0,calculation:{multiplier:0,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*0，闪避'},K={id:'basic_breathing_technique',name:'吐纳法',type:S.DODGE,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'heal',target:'self',valueMode:'point_scale',scale:1}],description:'闪避，若闪避成功则回复1倍点数的生命值'},Z={id:'basic_void_step',name:'虚实步法',type:S.DODGE,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'self',draw:!1},cardEffects:[],description:'重掷，闪避'},J={id:'basic_mirror_phantom',name:'镜面幻像',type:S.DODGE,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.BARRIER,target:'self',valueMode:'fixed',fixedValue:1}],description:'点数+2，闪避，若闪避成功为自己施加1层结界'},Q={id:'basic_mana_shift',name:'魔力偏移',type:S.DODGE,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'restore_mana',target:'self',valueMode:'point_scale',scale:1}],description:'闪避，若闪避成功则回复1倍点数的魔力'},ee={id:'modao_zero_domain_dodge',name:'零域闪步',type:S.DODGE,category:'魔导',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'闪避，闪避成功后下回合的魔法牌消耗为0'},te={id:'modao_magic_sword',name:'魔剑',type:S.PHYSICAL,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数伤害，并回复等同本次实际伤害的魔力'},ae={id:'modao_double_blade',name:'双刃剑',type:S.PHYSICAL,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:2,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+1，造成0.5倍点数伤害，2连击'},ne={id:'modao_route_sampling',name:'导路采样',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'restore_mana',target:'self',valueMode:'point_scale',scale:1.5}],description:'回复1.5倍点数魔力'},oe={id:'modao_weave_backup',name:'织式备份',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:1,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗1MP，造成1倍点数伤害；当此卡在手牌中时，手牌中所有魔法牌魔力消耗-1'},re={id:'modao_mana_purify',name:'魔压提纯',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'将自身当前魔力翻倍（最多额外获得20点）'},le={id:'modao_mana_hurricane',name:'魔力飓风',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成(12-点数)伤害；额外消耗自身至多9MP，每消耗3MP追加1次攻击'},ie={id:'modao_echo_feedback',name:'回声回灌',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:3,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数伤害；敌方每有1层群集，额外造成1次伤害'},se={id:'modao_inverse_chant',name:'逆相咏唱',type:S.MAGIC,category:'魔导',rarity:'稀有',manaCost:1,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.7,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.SILENCE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.7倍点数伤害并施加1层禁言'},ce={id:'modao_arcane_lance',name:'奥术裂枪',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:4,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.5，造成1倍点数伤害；若当前MP≥8，再消耗4MP追加一次1.5倍伤害'},de={id:'modao_ring_collapse',name:'法环坍缩',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1.5倍点数伤害；额外消耗自身至多20MP，每消耗4MP追加1次伤害'},ue={id:'modao_prism_flow',name:'棱镜贯流',type:S.MAGIC,category:'魔导',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.9,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成0.9倍点数伤害；每有2点当前MP，伤害额外+0.3倍（上限+2.1倍）'},me={id:'modao_energy_barrier',name:'导能屏障',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[],description:'消耗自身至多5MP；每消耗1MP：自身护甲+2，连击'},pe={id:'modao_mana_bombard',name:'魔力轰炸',type:S.MAGIC,category:'魔导',rarity:'稀有',manaCost:8,calculation:{multiplier:2,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:3,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗8MP，点数*2，造成1倍点数伤害，3连击'},fe={id:'modao_flow',name:'涌流',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[{kind:'restore_mana',target:'self',valueMode:'fixed',fixedValue:2},{kind:'apply_buff',effectType:A.COLD,target:'self',valueMode:'fixed',fixedValue:1}],description:'自身增加2点魔力与1层寒冷，连击'},ge={id:'modao_overdraw',name:'透支魔力',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[{kind:'restore_mana',target:'self',valueMode:'fixed',fixedValue:10},{kind:'apply_buff',effectType:A.MANA_DRAIN,target:'self',valueMode:'fixed',fixedValue:3}],description:'自身增加10点魔力与3层法力枯竭，连击'},ye={id:'modao_mana_armor',name:'魔甲',type:S.FUNCTION,category:'魔导',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'自身增加等同当前魔力点数的护甲'},ve={id:'modao_wager',name:'魔力增强',type:S.FUNCTION,category:'魔导',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗1倍点数的魔力，获得1倍点数的增伤'},he={id:'burn_spark_mark',name:'火花烙印',type:S.FUNCTION,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-3},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'敌方燃烧+1，我方点数-3，连击'},be={id:'burn_tar_splash',name:'焦油泼洒',type:S.FUNCTION,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.BURN,target:'self',valueMode:'fixed',fixedValue:2}],description:'敌方燃烧+1，自身燃烧+2，连击'},xe={id:'burn_scorch_wind',name:'焚风术',type:S.MAGIC,category:'燃烧',rarity:'普通',manaCost:3,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'对敌方造成0.5倍最终点数+目标当前燃烧层数的伤害'},_e={id:'burn_scorch',name:'烧伤',type:S.MAGIC,category:'燃烧',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:-2},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数-2，造成1倍最终点数伤害并施加易伤+1'},ke={id:'burn_flame_strike',name:'烈焰打击',type:S.PHYSICAL,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.5倍最终点数伤害并附加燃烧+1'},Ee={id:'burn_soul_bolt',name:'灼魂飞弹',type:S.MAGIC,category:'燃烧',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'造成1倍最终点数伤害并附加燃烧+2'},Ne={id:'burn_body_lunge',name:'焚身突刺',type:S.PHYSICAL,category:'燃烧',rarity:'稀有',manaCost:0,calculation:{multiplier:2,addition:0},damageLogic:{mode:'relative',scale:.6,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数*2，造成0.6倍最终点数伤害并附加燃烧+1'},Ce={id:'burn_detonation',name:'爆燃术',type:S.MAGIC,category:'燃烧',rarity:'普通',manaCost:6,calculation:{multiplier:.8,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'point_scale',scale:1}],description:'点数*0.8，造成目标燃烧层数伤害，并施加1倍最终点数的燃烧'},Me={id:'burn_inferno_judgement',name:'炎狱判决',type:S.MAGIC,category:'燃烧',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'敌方每有2层燃烧点数额外+1，随后造成1倍最终点数伤害'},we={id:'burn_hell_waves',name:'炼狱波及',type:S.FUNCTION,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'fixed',fixedValue:2},{kind:'apply_buff',effectType:A.BURN,target:'self',valueMode:'fixed',fixedValue:2},{kind:'apply_buff',effectType:A.BARRIER,target:'self',valueMode:'fixed',fixedValue:1}],description:'双方燃烧+2，自身结界+1'},De={id:'burn_critical_boil',name:'临界沸腾',type:S.MAGIC,category:'燃烧',rarity:'稀有',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'以2:1比例消耗目标寒冷/燃烧，并造成4倍所消耗燃烧层数的真实伤害'},Se={id:'burn_char_convert',name:'炭化转化',type:S.FUNCTION,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'清除自身燃烧并按层数回复魔力'},Ae={id:'burn_kindle',name:'大日焚',type:S.MAGIC,category:'燃烧',rarity:'稀有',manaCost:8,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'point_scale',scale:.5}],description:'消耗8MP，附加0.5倍点数燃烧并使对手燃烧层数翻倍'},Ve={id:'burn_fire_dodge',name:'火遁',type:S.DODGE,category:'燃烧',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.BURN,target:'enemy',valueMode:'point_scale',scale:1}],description:'闪避，若闪避成功则施加1倍点数的燃烧'},Te={id:'yanhan_frostmark_slash',name:'霜痕斩',type:S.PHYSICAL,category:'严寒',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.6,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1}],description:'造成0.6倍点数伤害，并施加1倍点数的寒冷'},Be={id:'yanhan_coldfield_calibration',name:'寒域校准',type:S.FUNCTION,category:'严寒',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:.8},{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'无伤害。为自身提供0.8倍点数护甲，并为敌方施加2层寒冷'},$e={id:'yanhan_refraction_evade',name:'折光回避',type:S.DODGE,category:'严寒',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1}],description:'闪避。若闪避成功，则施加1倍点数的寒冷'},Oe={id:'yanhan_feedback_freeze_wheel',name:'回授冻轮',type:S.MAGIC,category:'严寒',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:.5}],description:'造成0.5倍点数伤害并施加0.5倍点数寒冷，获得floor(敌方当前寒冷/2)护甲'},Ie={id:'yanhan_cold_chamber_duplicate',name:'冷室复写',type:S.MAGIC,category:'严寒',rarity:'普通',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'将敌方当前寒冷翻倍，并造成1倍点数伤害'},Le={id:'yanhan_temperature_effect',name:'温差效应',type:S.MAGIC,category:'严寒',rarity:'稀有',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.TEMPERATURE_DIFF,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.5倍点数伤害，并施加1层温差'},Re={id:'yanhan_pressure_cycle',name:'压差循环',type:S.FUNCTION,category:'严寒',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[],description:'消耗自身最多10点护甲，每消耗2点：敌方寒冷+1且自身回1MP，连击'},Pe={id:'yanhan_cold_source_rectifier',name:'冷源整流',type:S.FUNCTION,category:'严寒',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗敌方至多4层寒冷，自身回复等量生命'},He={id:'yanhan_zero_boundary_verdict',name:'零界裁定',type:S.MAGIC,category:'严寒',rarity:'稀有',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1}],description:'若敌方寒冷≥10则消耗10层寒冷并施加眩晕1回合，同时独立施加1倍点数寒冷'},Ue={id:'yanhan_frost_burst',name:'霜爆',type:S.MAGIC,category:'严寒',rarity:'稀有',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1}],description:'增加1倍点数的寒冷，并造成对方当前寒冷层数的伤害'},ze={id:'yanhan_spell_echo',name:'复咒',type:S.FUNCTION,category:'严寒',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'下一张魔法牌结算两次'},Ge={id:'bloodpool_venesection',name:'刺络放血',type:S.PHYSICAL,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.6,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BLEED,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.6倍点数伤害，敌方流血+1'},Fe={id:'bloodpool_crimson_suppress',name:'赤潮压制',type:S.MAGIC,category:'血池',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BLEED,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'消耗2MP，造成1倍点数伤害，敌方流血+2'},je={id:'bloodpool_siphon_slash',name:'噬血劈斩',type:S.PHYSICAL,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数伤害，并回复0.5倍造成伤害量的生命'},Ye={id:'bloodpool_vital_reservoir',name:'血池扩容',type:S.MAGIC,category:'血池',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗2MP，造成1倍点数伤害，并增加等同造成伤害量的临时生命上限'},We={id:'bloodpool_active_reservoir',name:'活性血池',type:S.FUNCTION,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'heal',target:'self',valueMode:'point_scale',scale:.6},{kind:'apply_buff',effectType:A.TEMP_MAX_HP,target:'self',valueMode:'point_scale',scale:.6}],description:'回复0.6倍点数的生命和0.6倍点数的临时生命上限'},Xe={id:'bloodpool_life_wall',name:'血筑',type:S.FUNCTION,category:'血池',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.TEMP_MAX_HP,target:'self',valueMode:'point_scale',scale:1}],description:'增加1倍点数的临时生命上限，并增加当前已损失血量点护甲'},qe={id:'bloodpool_blood_debt_strike',name:'血债重击',type:S.PHYSICAL,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],selfDamage:3,description:'自伤3并造成1倍点数伤害；每损失3点生命，点数+1，固定施加3层流血'},Ke={id:'bloodpool_scar_burst',name:'赤痕爆裂',type:S.MAGIC,category:'血池',rarity:'稀有',manaCost:6,calculation:{multiplier:2,addition:0},damageLogic:{mode:'relative',scale:2,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BLEED,target:'self',valueMode:'fixed',fixedValue:2}],description:'消耗6MP，点数*2，造成2倍伤害，触发对方1次流血并赋予0.5倍点数流血，自身流血+2'},Ze={id:'bloodpool_ratio_inversion',name:'血位倒转',type:S.MAGIC,category:'血池',rarity:'稀有',manaCost:9,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗9MP，互换双方当前生命值百分比'},Je={id:'bloodpool_bleed_transfusion',name:'血脉迁葬',type:S.MAGIC,category:'血池',rarity:'稀有',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗6MP，将自身流血全部转移给对方，并连续触发对方流血3次'},Qe={id:'bloodpool_blood_shadow_dodge',name:'血影回身',type:S.DODGE,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'heal',target:'self',valueMode:'point_scale',scale:.4},{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.BLEED,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数+1，闪避。若闪避成功，回复0.4倍点数生命并施加1层流血'},et={id:'bloodpool_blood_curtain_dodge',name:'血幕回避',type:S.DODGE,category:'血池',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.BLEED,target:'enemy',valueMode:'fixed',fixedValue:3}],description:'闪避。若闪避成功，给对方施加3层流血'},tt={id:'bloodpool_blood_pact_bulwark',name:'血契护壁',type:S.FUNCTION,category:'血池',rarity:'稀有',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1.5}],selfDamage:3,description:'自伤3点生命，获得1.5倍点数护甲，连击'},at={id:'enemy_mimic_slimy_tentacle',name:'滑腻触手',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'点数+2，造成1倍最终点数伤害并附加1层束缚'},nt={id:'enemy_mimic_agile_tongue',name:'灵巧长舌',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1.3,addition:0},damageLogic:{mode:'relative',scale:1.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.3，造成1.5倍最终点数的伤害'},ot={id:'enemy_mimic_maw',name:'血盆大口',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.DEVOUR,target:'enemy',valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'fixed',fixedValue:2},{kind:'apply_buff',effectType:A.VULNERABLE,target:'self',valueMode:'fixed',fixedValue:2}],description:'造成1倍最终点数的伤害与1层吞食，对双方附加2层易伤'},rt={id:'enemy_mimic_crush',name:'挤压',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:3,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*3，造成0.5倍最终点数伤害'},lt={id:'enemy_mimic_digest',name:'消化',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'point_scale',scale:.5}],description:'点数+2，施加0.5倍点数中毒'},it={id:'enemy_moth_aphro_powder',name:'催情粉',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.5倍最终点数伤害，并施加易伤+1'},st={id:'enemy_moth_sensitive_mark',name:'敏感化标记',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1}],description:'造成0.5倍最终点数伤害，并施加1倍最终点数的寒冷'},ct={id:'enemy_moth_pheromone',name:'荧光信息素',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CHARGE,target:'self',valueMode:'point_scale',scale:1}],description:'自身增加1倍最终点数的蓄力'},dt={id:'enemy_moth_swarm_burst',name:'群体效应',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:6,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'消耗6MP，造成1倍最终点数伤害；自身每有1层群集额外造成一次同等伤害'},ut={id:'enemy_blissbee_sensitive_scout',name:'敏感点侦察',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:.5},{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'为自己施加0.5倍点数护甲，为敌人施加1层易伤'},mt={id:'enemy_blissbee_aphro_stinger',name:'催情尾针',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成0.5倍点数伤害，若敌人有易伤，则额外施加2层中毒'},pt={id:'enemy_blissbee_precise_harvest',name:'精准采集',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.5，造成0.5倍点数伤害，若敌人有中毒，则额外造成0.5倍点数的电击'},ft={id:'enemy_pollen_high_pressure_spray',name:'高压喷射',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'带有负面效果“[信息素]”',negativeEffect:'[信息素]'},gt={id:'enemy_pollen_infiltration',name:'渗透',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'为对方增加1倍点数的“侵蚀”'},yt={id:'enemy_ink_slime_invasion',name:'入侵',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'施加1倍点数的侵蚀'},vt={id:'enemy_ink_slime_condense',name:'凝聚',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'heal',target:'self',valueMode:'point_scale',scale:1},{kind:'apply_buff',effectType:A.SWARM,target:'self',valueMode:'fixed',fixedValue:1}],description:'回复1倍点数的生命值并为自身施加1层群集'},ht={id:'enemy_prim_embrace',name:'拥抱',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'点数+1，造成1倍点数的伤害并施加1层束缚'},bt={id:'enemy_prim_fluid_evasion',name:'流体规避',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'point_scale',scale:1}],description:'点数-1，闪避，若闪避成功或对方跳过回合，则为对方施加1倍点数的中毒'},xt={id:'enemy_prim_digest_caress',name:'消化性爱抚',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:3}],description:'施加3点中毒'},_t={id:'enemy_prim_entity_clone',name:'实体分身',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.MAX_HP_REDUCTION,target:'self',valueMode:'max_hp_percent',scale:.5},{kind:'heal',target:'self',valueMode:'point_scale',scale:1},{kind:'apply_buff',effectType:A.SWARM,target:'self',valueMode:'fixed',fixedValue:1}],description:'自伤50%生命上限，回复1倍点数的生命，获得1层群集'},kt={id:'enemy_nymph_lust_hallucination',name:'性爱幻觉',type:S.CURSE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1,unplayable:!0},cardEffects:[],description:'无法打出'},Et={id:'enemy_nymph_misty_swirl',name:'迷雾缭绕',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1,insertCardsToEnemyDeck:['性爱幻觉']},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'点数+1，无伤害，造成2层中毒并插入“性爱幻觉”'},Nt={id:'enemy_nymph_mental_shock',name:'精神震荡',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:6,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数+2，造成1倍点数的伤害并施加1层易伤'},Ct={id:'enemy_nymph_mischief',name:'恶作剧',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.SHOCK,target:'enemy',valueMode:'point_scale',scale:1}],description:'闪避，若闪避成功或对方跳过回合，对对方施加1倍点数的电击'},Mt={id:'enemy_nymph_giant_projection',name:'巨大化投影',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1}],description:'移除自身的“虚幻之躯”，获得1倍点数护甲，最小点数+2，最大点数+4'},wt={id:'enemy_root_tremor_sense',name:'震动感知',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1.5}],description:'为自身增加1.5倍最终点数的护甲'},Dt={id:'enemy_root_lube_secretion',name:'润滑分泌',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'point_scale',scale:.5}],description:'为敌方增加0.5倍最终点数的中毒'},St={id:'enemy_root_infiltrate_climb',name:'渗透攀爬',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'造成1倍最终点数伤害，并为敌方附加1回合束缚'},At={id:'enemy_charge',name:'冲撞',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+1，造成1倍最终点数的伤害'},Vt={id:'enemy_swamp_numb_spread',name:'无感蔓延',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'点数+1，造成0.5倍点数伤害并施加1层束缚'},Tt={id:'enemy_swamp_fluid_wrap',name:'流体包裹',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.DEVOUR,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数+2，造成0.5倍点数伤害，若玩家已被束缚，则施加吞食'},Bt={id:'enemy_swamp_corrode',name:'选择性溶解',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'施加2层中毒'},$t={id:'enemy_mimicbubble_aphro_gas',name:'催情气体',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'点数*1.5，无伤害，施加1层中毒与1层束缚'},Ot={id:'enemy_mimicbubble_elastic_adsorb',name:'弹性吸附',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1},{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'自身增加1倍点数的护甲，为对方施加1层中毒'},It={id:'enemy_mimicbubble_iridescent_float',name:'虹色漂浮',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'闪避，若闪避成功或对方跳过回合则施加1层束缚'},Lt={id:'enemy_mist_sprite_illusion_lure',name:'幻象诱导',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.MAX_HP_REDUCTION,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'闪避，若闪避成功或对方跳过回合，则对对方施加2层生命上限削减'},Rt={id:'enemy_whisper_ghost_phantom',name:'幽灵幻象',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.MAX_HP_REDUCTION,target:'enemy',valueMode:'fixed',fixedValue:5}],description:'闪避，若闪避成功或对方跳过回合，则施加5层生命上限削减'},Pt={id:'enemy_whisper_ghost_knowledge_whisper',name:'知识低语',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.MAX_HP_REDUCTION,target:'enemy',valueMode:'point_scale',scale:1}],description:'无伤害，施加1倍点数的生命上限衰减'},Ht={id:'enemy_whisper_ghost_forbidden_knowledge',name:'禁忌知识',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:10,calculation:{multiplier:3,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'点数*3，施加1倍点数的侵蚀'},Ut={id:'enemy_whisper_ghost_passive_sensitization',name:'被动增敏',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],manaDrain:6,description:'法力汲取6'},zt={id:'enemy_book_demon_between_lines_temptation',name:'行间诱惑',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:.4,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'点数+2，造成0.4倍伤害并施加1倍点数的侵蚀'},Gt={id:'enemy_book_demon_ink_tentacle',name:'墨迹触手',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'点数+1，造成1倍伤害并施加1层束缚'},Ft={id:'enemy_book_demon_whisper_incitement',name:'低语教唆',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.STUN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'施加1层眩晕'},jt={id:'enemy_book_demon_knowledge_thirst',name:'知识渴望',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.SILENCE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数-1，闪避，若闪避成功施加1层禁言'},Yt={id:'enemy_vinewalker_lurk',name:'潜伏',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.AMBUSH,target:'self',valueMode:'fixed',fixedValue:1}],description:'给自己添加1层伏击'},Wt={id:'enemy_vinewalker_lightning_ambush',name:'闪电伏击',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数伤害，若这是本次战斗首次使用该牌，则点数+4'},Xt={id:'enemy_vinewalker_paralytic_toxin',name:'麻痹毒素',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.COLD,target:'enemy',valueMode:'point_scale',scale:1},{kind:'apply_buff',effectType:A.SHOCK,target:'enemy',valueMode:'point_scale',scale:1}],description:'造成0.5倍点数伤害并施加1倍点数的寒冷与电击'},qt={id:'enemy_vinewalker_lubricated_shrink',name:'润滑收缩',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.CHARGE,target:'self',valueMode:'point_scale',scale:1}],description:'闪避，若闪避成功或对方跳过回合，则为自身施加1倍点数的蓄力'},Kt={id:'enemy_springspirit_liquefied_infiltration',name:'液化渗透',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'fixed',fixedValue:3},{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'施加3层侵蚀与1层束缚'},Zt={id:'enemy_springspirit_internal_manipulation',name:'体内操控',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'将对方的侵蚀翻倍，最多增加10'},Jt={id:'enemy_springspirit_undead_condense',name:'不死凝聚',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'清除自身随机一种元素debuff并回复1倍点数生命'},Qt={id:'enemy_springspirit_silent_infiltration',name:'无声渗入',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'fixed',fixedValue:2}],description:'闪避，闪避成功后为对手增加2层侵蚀'},ea={id:'enemy_undine_earth_essence',name:'大地精华',type:S.CURSE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!0,purgeOnUse:!0},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'self',valueMode:'fixed',fixedValue:2}],description:'打出后自身增加2点侵蚀，连击，抽牌，移除'},ta={id:'enemy_undine_loving_whip',name:'慈爱之鞭',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'fixed',fixedValue:3}],description:'造成0.5倍点数的伤害并施加3层侵蚀'},aa={id:'enemy_undine_doting_embrace',name:'溺爱之拥',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'造成1倍点数的伤害并施加1层束缚'},na={id:'enemy_undine_essence_infusion',name:'精华灌注',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:1,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1,insertCardsToEnemyDeck:['大地精华']},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'无伤害，施加1倍点数侵蚀，并插入“大地精华”'},oa={id:'enemy_undine_psychic_assimilation',name:'精神同化',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:5,calculation:{multiplier:2,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.CORROSION,target:'enemy',valueMode:'point_scale',scale:1}],description:'无伤害，点数*2，施加1倍点数的侵蚀'},ra={id:'enemy_undine_earth_liquid',name:'大地原液',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'heal',target:'self',valueMode:'point_scale',scale:2},{kind:'cleanse',target:'self',valueMode:'fixed',fixedValue:0,cleanseTypes:[A.COLD,A.BURN,A.POISON,A.BLEED,A.SHOCK]},{kind:'apply_buff',effectType:A.REGEN,target:'self',valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.REGEN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'为自身回复2倍点数的生命值，清除自身所有元素debuff并为双方赋予1层生命回复'},la={id:'enemy_mata_matriarch_invitation',name:'主母的邀请',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:4}],description:'造成0.5倍点数伤害并施加4层中毒'},ia={id:'enemy_mata_under_skirt_tentacle',name:'裙下触手',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:.4,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'point_scale',scale:1}],description:'点数+2，造成0.4倍点数伤害、1层束缚与1倍点数的中毒'},sa={id:'enemy_mata_fungal_repair',name:'菌群修复',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'清空对方的中毒量，每清空2层则为自身回复2点血量并为对方施加1层生命上限削减'},ca={id:'enemy_mata_false_smile',name:'虚伪笑容',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success','on_opponent_skip'],kind:'apply_buff',effectType:A.CHARGE,target:'self',valueMode:'point_scale',scale:2}],description:'闪避，闪避成功或对方跳过回合后，为自己施加2倍点数的蓄力'},da={id:'enemy_rose_plant_dominion',name:'植物统御',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:99}],description:'造成0.5倍点数伤害并施加99层束缚'},ua={id:'enemy_rose_wangzhi_whip',name:'王志鞭挞',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数的伤害，若目标有束缚，则伤害+2'},ma={id:'enemy_rose_life_drain',name:'生命汲取',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'造成1倍点数的伤害，若目标有束缚，则回复自身1倍点数的生命'},pa={id:'enemy_rose_nectar_discipline',name:'花蜜调教',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.ARMOR,target:'self',valueMode:'point_scale',scale:1}],description:'获得1倍点数的护甲，若目标有束缚，则赋予目标1倍点数的中毒'},fa={id:'enemy_ursula_silence_spell',name:'禁言术',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:1,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.SILENCE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'造成0.5倍点数的伤害并施加1层“禁言”'},ga={id:'enemy_ursula_lust_imprint',name:'淫纹拓印',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:6,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:.2,scaleAddition:0},hitCount:5,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.VULNERABLE,target:'enemy',valueMode:'point_scale',scale:.5}],description:'点数*1.5，造成0.2倍伤害，5连击。再施加0.5倍点数的“易伤”'},ya={id:'enemy_ursula_binding_law',name:'束缚法',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.8,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:3}],description:'造成0.8倍点数的伤害并施加3层束缚'},va={id:'enemy_ursula_whip_punish',name:'教鞭惩罚',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:2},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+2，造成1倍点数的伤害；若敌人有“束缚”则额外施加0.5倍点数的“易伤”'},ha={id:'enemy_ursula_commandment',name:'言出法随',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.SHOCK,target:'enemy',valueMode:'point_scale',scale:.5},{kind:'apply_buff',effectType:A.SILENCE,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'施加0.5倍点数的“电击”与1层“禁言”'},ba={id:'enemy_floating_page_attach',name:'依附',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:1,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.BIND,target:'enemy',restrictedTypes:[S.PHYSICAL,S.DODGE],valueMode:'fixed',fixedValue:1}],description:'造成1倍点数伤害与1层束缚'},xa={id:'enemy_floating_page_sensory_infusion',name:'感官灌输',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.5，造成0.5倍点数伤害，并施加等同于目标侵蚀层数的中毒'},_a={id:'enemy_floating_page_forced_immersion',name:'强制代入',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:1},damageLogic:{mode:'relative',scale:1.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+1，造成1.5倍伤害，若目标拥有束缚则附加1层认知干涉'},ka={id:'enemy_inkmouse_cowardice',name:'胆小',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-1},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数-1，闪避，闪避成功后增加1点骰子最大值'},Ea={id:'enemy_inkmouse_ink_burst',name:'墨水爆裂',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:2,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:3},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_clash'],kind:'apply_buff',effectType:A.POISON,target:'enemy',valueMode:'fixed',fixedValue:3}],description:'造成3点伤害，若发生拼点则拼点时施加3层中毒'},Na={id:'enemy_inkmouse_liquefy_regen',name:'液化再生',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'apply_buff',effectType:A.MAX_HP_REDUCTION,target:'self',valueMode:'fixed',fixedValue:1},{kind:'apply_buff',effectType:A.SWARM,target:'self',valueMode:'point_scale',scale:.5}],description:'自身增加1层生命上限削减与0.5倍点数的群集'},Ca={id:'enemy_slime_dodge',name:'粘液闪避',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_dodge_success'],kind:'heal',target:'self',valueMode:'point_scale',scale:1}],description:'闪避，闪避成功后回复1倍点数生命'},Ma={id:'enemy_heal',name:'回复',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{kind:'heal',target:'self',valueMode:'point_scale',scale:1}],description:'回复1倍点数的生命值'},wa={id:'curse_alchemy_waste',name:'炼金废料',type:S.CURSE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:-2},damageLogic:{mode:'fixed',value:0},traits:{combo:!0,reroll:'none',draw:!0},cardEffects:[],description:'点数-2，连击，抽1张牌'},Da={id:'enemy_muxinlan_cunning',name:'惑心咒',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'为对手施加1层窥视禁忌与1层认知干涉'},Sa={id:'enemy_muxinlan_forced_acquisition',name:'强制收购',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1,destroyOnClashWin:!0},cardEffects:[],description:'造成0.5倍最终点数的伤害，销毁'},Aa={id:'enemy_muxinlan_liquidation',name:'清算',type:S.PHYSICAL,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:2,addition:0},damageLogic:{mode:'fixed',value:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*2，移除对方所有元素debuff，每移除1层造成2点真实伤害'},Va={id:'enemy_muxinlan_unstable_reagent',name:'不稳定试剂',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'relative',scale:.5,scaleAddition:0},hitCount:1,traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.5，造成0.5倍最终点数伤害，并随机附加一种元素debuff'},Ta={id:'enemy_muxinlan_liquid_fire',name:'液态火',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1.5,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数*1.5，无伤害，将对方所有寒冷按1:1转化为燃烧'},Ba={id:'enemy_muxinlan_activated_slime',name:'活化粘液',type:S.MAGIC,category:'敌人',rarity:'普通',manaCost:4,calculation:{multiplier:1,addition:3},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'点数+3，无伤害，随机将对方一个已有元素debuff层数翻倍'},$a={id:'enemy_muxinlan_take_it',name:'等价交换',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1,insertCardsToEnemyDeck:['炼金废料']},cardEffects:[{kind:'heal',valueMode:'point_scale',scale:2,target:'self'}],description:'插入一张炼金废料到对方牌库，同时回复2倍点数的生命'},Oa={id:'enemy_muxinlan_premium_shield',name:'溢价护盾',type:S.FUNCTION,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:1,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'增加自身x层坚固与x点魔力，x为对方魔力值'},Ia={id:'enemy_muxinlan_set_ambush',name:'设下埋伏',type:S.DODGE,category:'敌人',rarity:'普通',manaCost:0,calculation:{multiplier:.5,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[{triggers:['on_opponent_skip'],kind:'apply_buff',effectType:A.MANA_DRAIN,target:'enemy',valueMode:'fixed',fixedValue:1}],description:'点数*0.5，闪避。若对方跳过回合，则为对方施加1层法力枯竭'},La=new Map([[L.name,L],[R.name,R],[P.name,P],[H.name,H],[U.name,U],[G.name,G],[F.name,F],[j.name,j],[Y.name,Y],[W.name,W],[X.name,X],[q.name,q],[K.name,K],[Z.name,Z],[J.name,J],[Q.name,Q],[ee.name,ee],[te.name,te],[ae.name,ae],[ne.name,ne],[oe.name,oe],[re.name,re],[le.name,le],[ie.name,ie],[se.name,se],[ce.name,ce],[de.name,de],[ue.name,ue],[me.name,me],[pe.name,pe],[fe.name,fe],[ge.name,ge],[ye.name,ye],[ve.name,ve],[he.name,he],[be.name,be],[xe.name,xe],[_e.name,_e],[ke.name,ke],[Ee.name,Ee],[Ne.name,Ne],[Ce.name,Ce],[Me.name,Me],[we.name,we],[De.name,De],[Se.name,Se],[Ae.name,Ae],[Ve.name,Ve],[Te.name,Te],[Be.name,Be],[$e.name,$e],[Oe.name,Oe],[Ie.name,Ie],[Le.name,Le],[Re.name,Re],[Pe.name,Pe],[He.name,He],[Ue.name,Ue],[ze.name,ze],[Ge.name,Ge],[Fe.name,Fe],[je.name,je],[Ye.name,Ye],[We.name,We],[Xe.name,Xe],[qe.name,qe],[Ke.name,Ke],[Ze.name,Ze],[Je.name,Je],[Qe.name,Qe],[et.name,et],[tt.name,tt],[at.name,at],[nt.name,nt],[ot.name,ot],[rt.name,rt],[lt.name,lt],[it.name,it],[st.name,st],[ct.name,ct],[dt.name,dt],[ut.name,ut],[mt.name,mt],[pt.name,pt],[ft.name,ft],[gt.name,gt],[yt.name,yt],[vt.name,vt],[ht.name,ht],[bt.name,bt],[xt.name,xt],[_t.name,_t],[kt.name,kt],[Et.name,Et],[Nt.name,Nt],[Ct.name,Ct],[Mt.name,Mt],[wt.name,wt],[Dt.name,Dt],[St.name,St],[At.name,At],[Vt.name,Vt],[Tt.name,Tt],[Bt.name,Bt],[$t.name,$t],[Ot.name,Ot],[It.name,It],[Lt.name,Lt],[Rt.name,Rt],[Pt.name,Pt],[Ht.name,Ht],[Ut.name,Ut],[zt.name,zt],[Gt.name,Gt],[Ft.name,Ft],[jt.name,jt],[Yt.name,Yt],[Wt.name,Wt],[Xt.name,Xt],[qt.name,qt],[Kt.name,Kt],[Zt.name,Zt],[Jt.name,Jt],[Qt.name,Qt],[ea.name,ea],[ta.name,ta],[aa.name,aa],[na.name,na],[oa.name,oa],[ra.name,ra],[la.name,la],[ia.name,ia],[sa.name,sa],[ca.name,ca],[da.name,da],[ua.name,ua],[ma.name,ma],[pa.name,pa],[fa.name,fa],[ga.name,ga],[ya.name,ya],[va.name,va],[ha.name,ha],[ba.name,ba],[xa.name,xa],[_a.name,_a],[ka.name,ka],[Ea.name,Ea],[Na.name,Na],[Ca.name,Ca],[Ma.name,Ma],[wa.name,wa],[Da.name,Da],[Sa.name,Sa],[Aa.name,Aa],[Va.name,Va],[Ta.name,Ta],[Ba.name,Ba],[$a.name,$a],[Oa.name,Oa],[Ia.name,Ia]]);function Ra(e){return La.get(e)}function Pa(){return[...La.values()]}const Ha={[A.BARRIER]:{type:A.BARRIER,name:'结界',polarity:'buff',timings:['onBeforeDamage'],stackable:!0,maxStacks:0,description:'抵挡任何来源的伤害判定。触发后层数-1'},[A.ARMOR]:{type:A.ARMOR,name:'护甲',polarity:'buff',timings:['onBeforeDamage','onTurnEnd'],stackable:!0,maxStacks:0,description:'在最终伤害结算阶段减去等量数值'},[A.BIND]:{type:A.BIND,name:'束缚',polarity:'debuff',timings:['onCardPlay','onTurnEnd'],stackable:!0,maxStacks:0,description:'无法使用物理与闪避卡牌。每回合结束层数-1'},[A.DEVOUR]:{type:A.DEVOUR,name:'吞食',polarity:'debuff',timings:['onCardPlay'],stackable:!1,maxStacks:1,description:'点数限制：若骰子基础点数≤3，禁用物理/魔法/闪避卡牌。'},[A.POISON]:{type:A.POISON,name:'中毒',polarity:'debuff',timings:['onTurnEnd'],stackable:!0,maxStacks:0,description:'每回合结束时，增加等量层数的中毒量，中毒层数-1'},[A.POISON_AMOUNT]:{type:A.POISON_AMOUNT,name:'中毒量',polarity:'special',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'回合开始时若中毒量≥当前生命值，则造成等量真实伤害并清空中毒量'},[A.CORROSION]:{type:A.CORROSION,name:'侵蚀',polarity:'debuff',timings:['passive'],stackable:!0,maxStacks:0,description:'达到30层时，目标生命上限归零并立即死亡（无视复活）'},[A.BURN]:{type:A.BURN,name:'燃烧',polarity:'debuff',timings:['onTurnStart','onClash'],stackable:!0,maxStacks:0,description:'每回合减少等量层数的生命。己方拼点成功时消失'},[A.BLEED]:{type:A.BLEED,name:'流血',polarity:'debuff',timings:['onClash','onTurnStart'],stackable:!0,maxStacks:0,description:'拼点时造成等量层数的真实伤害。每回合-1'},[A.VULNERABLE]:{type:A.VULNERABLE,name:'易伤',polarity:'debuff',timings:['onBeforeDamage'],stackable:!0,maxStacks:0,description:'每次受到伤害的伤害增加等量层数'},[A.DAMAGE_BOOST]:{type:A.DAMAGE_BOOST,name:'增伤',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'自身直接攻击造成的伤害增加等量层数'},[A.REGEN]:{type:A.REGEN,name:'生命回复',polarity:'buff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时回复等量层数的生命'},[A.WHITE_TURBID]:{type:A.WHITE_TURBID,name:'白浊',polarity:'mixed',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时为对手回复等量层数生命，并施加等量层数侵蚀'},[A.IGNITE_AURA]:{type:A.IGNITE_AURA,name:'施加燃烧',polarity:'mixed',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时为战斗双方施加一层燃烧'},[A.STUN]:{type:A.STUN,name:'眩晕',polarity:'debuff',timings:['onTurnStart','onTurnEnd'],stackable:!1,maxStacks:1,description:'无法执行任何出牌或拼点行动。一回合后消失'},[A.CHARGE]:{type:A.CHARGE,name:'蓄力',polarity:'buff',timings:['onDiceRoll'],stackable:!0,maxStacks:0,description:'下一次投掷骰子时增加等量层数的点数并清空全部层数'},[A.FATIGUE]:{type:A.FATIGUE,name:'疲劳',polarity:'debuff',timings:['onDiceRoll'],stackable:!0,maxStacks:0,description:'下一次投掷骰子时减少等量层数的点数并清空全部层数'},[A.COLD]:{type:A.COLD,name:'寒冷',polarity:'debuff',timings:['onBeforeAttack','onAfterAttack'],stackable:!0,maxStacks:0,description:'降低造成的伤害数值。攻击结算后层数减半'},[A.TEMPERATURE_DIFF]:{type:A.TEMPERATURE_DIFF,name:'温差',polarity:'debuff',timings:['passive'],stackable:!0,maxStacks:0,description:'每次获得寒冷时，额外增加等同温差层数的寒冷；每次受到燃烧伤害时，额外增加等同温差层数的伤害'},[A.NON_LIVING]:{type:A.NON_LIVING,name:'非生物',polarity:'trait',timings:['passive'],stackable:!1,maxStacks:1,description:'完全免疫流血与中毒效果'},[A.NON_ENTITY]:{type:A.NON_ENTITY,name:'非实体',polarity:'trait',timings:['passive'],stackable:!1,maxStacks:1,description:'受到物理伤害减少50%，受到魔法伤害增加50%'},[A.ILLUSORY_BODY]:{type:A.ILLUSORY_BODY,name:'虚幻之躯',polarity:'trait',timings:['passive'],stackable:!1,maxStacks:1,description:'受到物理伤害减少50%'},[A.TEMP_MAX_HP]:{type:A.TEMP_MAX_HP,name:'临时生命上限',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'本场战斗内每层提高1点最大生命值'},[A.MAX_HP_REDUCTION]:{type:A.MAX_HP_REDUCTION,name:'生命上限削减',polarity:'debuff',timings:['passive'],stackable:!0,maxStacks:0,description:'每层立即使最大生命值-1'},[A.POINT_GROWTH_BIG]:{type:A.POINT_GROWTH_BIG,name:'点数成长（大）',polarity:'buff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每3回合，自身最大骰子点数+1'},[A.POINT_GROWTH_SMALL]:{type:A.POINT_GROWTH_SMALL,name:'点数成长（小）',polarity:'buff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每3回合，自身最小骰子点数+1'},[A.MANA_DRAIN]:{type:A.MANA_DRAIN,name:'法力枯竭',polarity:'debuff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时强制将当前法力值清零。每回合-1'},[A.MANA_SPRING]:{type:A.MANA_SPRING,name:'魔力源泉',polarity:'buff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时自身增加等量层数的魔力'},[A.SWARM]:{type:A.SWARM,name:'群集',polarity:'buff',timings:['onAfterDamage'],stackable:!0,maxStacks:0,description:'生命值≤0时，消耗1层并恢复至生命上限'},[A.BLOOD_COCOON]:{type:A.BLOOD_COCOON,name:'血茧',polarity:'buff',timings:['onAfterDamage'],stackable:!0,maxStacks:0,description:'生命值≤0时，消耗1层并恢复至50%生命'},[A.INDOMITABLE]:{type:A.INDOMITABLE,name:'不屈',polarity:'buff',timings:['onAfterDamage'],stackable:!0,maxStacks:0,description:'生命值≤0时，消耗1层并恢复至1点生命'},[A.PEEP_FORBIDDEN]:{type:A.PEEP_FORBIDDEN,name:'窥视禁忌',polarity:'debuff',timings:['passive'],stackable:!1,maxStacks:1,description:'对方骰子点数UI显示会随机偏移'},[A.BLIND_ASH]:{type:A.BLIND_ASH,name:'盲目之蚀',polarity:'debuff',timings:['passive'],stackable:!1,maxStacks:1,description:'自身骰子点数UI显示会随机偏移'},[A.COGNITIVE_INTERFERENCE]:{type:A.COGNITIVE_INTERFERENCE,name:'认知干涉',polarity:'debuff',timings:['passive'],stackable:!1,maxStacks:1,description:'无法识别对方意图卡'},[A.MEMORY_FOG]:{type:A.MEMORY_FOG,name:'失忆迷雾',polarity:'debuff',timings:['passive'],stackable:!1,maxStacks:1,description:'自身手牌名称与描述被隐藏'},[A.SILENCE]:{type:A.SILENCE,name:'禁言',polarity:'debuff',timings:['onCardPlay','onTurnEnd'],stackable:!0,maxStacks:0,description:'无法使用魔法卡牌。每回合结束层数-1'},[A.STURDY]:{type:A.STURDY,name:'坚固',polarity:'buff',timings:['onBeforeDamage','onTurnEnd'],stackable:!0,maxStacks:0,description:'每次受到伤害时固定减伤，持续1回合并在回合结束清空'},[A.SHOCK]:{type:A.SHOCK,name:'电击',polarity:'debuff',timings:['passive'],stackable:!0,maxStacks:0,description:'每次法力减少时，受到等同层数的生命损失，随后层数-1'},[A.FLAME_ATTACH]:{type:A.FLAME_ATTACH,name:'火焰附加',polarity:'buff',timings:['onAfterAttack'],stackable:!0,maxStacks:0,description:'攻击卡命中后为对手施加燃烧'},[A.POISON_ATTACH]:{type:A.POISON_ATTACH,name:'毒素附加',polarity:'buff',timings:['onAfterAttack'],stackable:!0,maxStacks:0,description:'魔法卡命中后为对手施加中毒'},[A.TOXIN_SPREAD]:{type:A.TOXIN_SPREAD,name:'毒素蔓延',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'对手每次打出物理牌时，获得等量层数的中毒'},[A.AMBUSH]:{type:A.AMBUSH,name:'伏击',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'对手每次打出物理或闪避牌时，对其施加1层束缚并消耗1层自身层数'},[A.FROST_ATTACH]:{type:A.FROST_ATTACH,name:'冰霜附加',polarity:'buff',timings:['onTurnStart'],stackable:!0,maxStacks:0,description:'每回合开始时为对手施加寒冷'},[A.BLOODBLADE_ATTACH]:{type:A.BLOODBLADE_ATTACH,name:'血刃附加',polarity:'buff',timings:['onClash'],stackable:!0,maxStacks:0,description:'拼点时为对手施加流血'},[A.LIGHTNING_ATTACH]:{type:A.LIGHTNING_ATTACH,name:'雷电附加',polarity:'buff',timings:['onClash'],stackable:!0,maxStacks:0,description:'每次成功闪避时为对手施加电击'},[A.THORNS]:{type:A.THORNS,name:'荆棘',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'反弹50%物理直接伤害'},[A.INK_CREATION]:{type:A.INK_CREATION,name:'笔墨造物',polarity:'buff',timings:['passive'],stackable:!0,maxStacks:0,description:'攻击造成伤害后附加1倍点数侵蚀；受到燃烧伤害后追加等量真实伤害'}},Ua=[A.COLD,A.BURN,A.POISON,A.BLEED,A.SHOCK];function za(e,t){return e.effects.find(e=>e.type===t)}function Ga(e,t){return e.effects.some(e=>e.type===t&&e.stacks>0)}function Fa(e,t){const a=za(e,t);return a?a.stacks:0}function ja(e,t,a=1,n){const o=Math.max(0,Math.floor(a));if(o<=0)return!1;if(Ga(e,A.NON_LIVING)&&(t===A.POISON||t===A.BLEED))return!1;const r=Ha[t],l=za(e,t);let i=o;if(t===A.COLD){const t=Fa(e,A.TEMPERATURE_DIFF);t>0&&(i+=t)}if(t===A.MAX_HP_REDUCTION){const t=Math.max(0,e.maxHp);if(t<=0)return!1;i=Math.min(i,t),e.maxHp-=i,e.hp=Math.min(e.hp,e.maxHp)}if(l){if(r.stackable){const a=l.stacks;if(l.stacks+=i,r.maxStacks>0&&(l.stacks=Math.min(l.stacks,r.maxStacks)),t===A.TEMP_MAX_HP){const t=Math.max(0,l.stacks-a);t>0&&(e.maxHp+=t)}}return t===A.BIND&&n?.restrictedTypes&&(l.restrictedTypes=n.restrictedTypes),t!==A.BIND&&t!==A.SILENCE&&t!==A.STUN||!n?.lockDecayThisTurn||(l.lockDecayThisTurn=!0),t===A.CORROSION&&l.stacks>=30&&(e.maxHp=0,e.hp=0),!0}const s=r.maxStacks>0?Math.min(i,r.maxStacks):i;t===A.TEMP_MAX_HP&&s>0&&(e.maxHp+=s);const c={type:t,stacks:s,polarity:r.polarity,lockDecayThisTurn:t===A.BIND||t===A.SILENCE||t===A.STUN?!!n?.lockDecayThisTurn:void 0,restrictedTypes:n?.restrictedTypes,source:n?.source};return e.effects.push(c),t===A.CORROSION&&c.stacks>=30&&(e.maxHp=0,e.hp=0),!0}function Ya(e,t){const a=za(e,t);a&&(t===A.TEMP_MAX_HP&&a.stacks>0&&(e.maxHp=Math.max(0,e.maxHp-a.stacks),e.hp=Math.min(e.hp,e.maxHp)),e.effects=e.effects.filter(e=>e.type!==t))}function Wa(e,t,a=1){const n=za(e,t);if(n){if(t===A.TEMP_MAX_HP){const o=Math.min(n.stacks,Math.max(0,Math.floor(a)));if(o<=0)return;return n.stacks-=o,e.maxHp=Math.max(0,e.maxHp-o),e.hp=Math.min(e.hp,e.maxHp),void(n.stacks<=0&&(e.effects=e.effects.filter(e=>e.type!==t)))}n.stacks-=a,n.stacks<=0&&Ya(e,t)}}function Xa(e){const t={hpChange:0,mpChange:0,trueDamage:0,opponentHpChange:0,isStunned:!1,logs:[],applyToOpponent:[]},a=Fa(e,A.POISON_AMOUNT);a>0&&a>=e.hp&&(t.trueDamage+=a,Ya(e,A.POISON_AMOUNT),t.logs.push(`[中毒量] 中毒量(${a}) ≥ 当前生命(${e.hp})，造成 ${a} 真实伤害并清空中毒量！`));const n=Fa(e,A.BURN);if(n>0){let a=n;const o=Fa(e,A.VULNERABLE);o>0&&(a+=o,t.logs.push(`[易伤] 燃烧伤害 +${o}。`));const r=Fa(e,A.TEMPERATURE_DIFF);r>0&&(a+=r,t.logs.push(`[温差] 燃烧伤害 +${r}。`)),t.hpChange-=a,t.logs.push(`[燃烧] 损失 ${a} 点生命。`)}Ga(e,A.BLEED)&&(Wa(e,A.BLEED),t.logs.push('[流血] 层数衰减。'));const o=Fa(e,A.REGEN);o>0&&(t.hpChange+=o,t.logs.push(`[生命回复] 回复 ${o} 点生命。`));const r=Fa(e,A.WHITE_TURBID);r>0&&(t.opponentHpChange+=r,t.applyToOpponent.push({type:A.CORROSION,stacks:r}),t.logs.push(`[白浊] 为对手回复 ${r} 点生命并施加 ${r} 层侵蚀。`));Fa(e,A.IGNITE_AURA)>0&&(ja(e,A.BURN,1),t.applyToOpponent.push({type:A.BURN,stacks:1}),t.logs.push('[施加燃烧] 为战斗双方各施加 1 层燃烧。')),Ga(e,A.STUN)&&(t.isStunned=!0,t.logs.push('[眩晕] 本回合无法行动！'));const l=Fa(e,A.MANA_SPRING);if(l>0&&(t.mpChange+=l,t.logs.push(`[魔力源泉] 魔力 +${l}。`)),Ga(e,A.MANA_DRAIN)){const a=Math.max(0,e.mp+t.mpChange);a>0&&(t.mpChange-=a),t.logs.push('[法力枯竭] 法力值被清零。'),Wa(e,A.MANA_DRAIN)}const i=Fa(e,A.FROST_ATTACH);return i>0&&(t.applyToOpponent.push({type:A.COLD,stacks:i}),t.logs.push(`[冰霜附加] 为对手施加 ${i} 层寒冷。`)),t}function qa(e){const t=[],a=Fa(e,A.POISON);a>0&&(ja(e,A.POISON_AMOUNT,a),Wa(e,A.POISON,1),t.push(`[中毒] 本回合中毒量 +${a}，中毒层数衰减 1。`));const n=za(e,A.BIND);n&&n.stacks>0&&(n.lockDecayThisTurn?(n.lockDecayThisTurn=!1,n.stacks<=1?t.push('[束缚] 新施加且层数为1，本回合不衰减。'):(Wa(e,A.BIND),t.push('[束缚] 新施加但层数大于1，本回合仍衰减。'))):(Wa(e,A.BIND),t.push('[束缚] 层数衰减。')));const o=za(e,A.ARMOR);o&&o.stacks>0&&(o.stacks=Math.floor(o.stacks/2),o.stacks<=0&&Ya(e,A.ARMOR),t.push('[护甲] 层数减半。'));const r=za(e,A.SILENCE);r&&r.stacks>0&&(r.lockDecayThisTurn?(r.lockDecayThisTurn=!1,r.stacks<=1?t.push('[禁言] 新施加且层数为1，本回合不衰减。'):(Wa(e,A.SILENCE),t.push('[禁言] 新施加但层数大于1，本回合仍衰减。'))):(Wa(e,A.SILENCE),t.push('[禁言] 层数衰减。'))),Ga(e,A.STURDY)&&(Ya(e,A.STURDY),t.push('[坚固] 回合结束后清空。'));const l=za(e,A.STUN);return l&&l.stacks>0&&(l.lockDecayThisTurn?(l.lockDecayThisTurn=!1,l.stacks<=1?t.push('[眩晕] 新施加且层数为1，本回合不衰减。'):(Wa(e,A.STUN),t.push('[眩晕] 新施加但层数大于1，本回合仍衰减。'))):(Wa(e,A.STUN),t.push('[眩晕] 层数衰减。'))),t}function Ka(e,t,a){if(t.traits.unplayable)return{allowed:!1,reason:'该卡牌当前无法打出。'};if(Ga(e,A.STUN))return{allowed:!1,reason:'眩晕状态，无法行动。'};const n=za(e,A.BIND);if(n){if((n.restrictedTypes&&n.restrictedTypes.length>0?n.restrictedTypes:['物理','闪避']).includes(t.type))return{allowed:!1,reason:`束缚中，无法使用${t.type}类型卡牌。`}}return Ga(e,A.DEVOUR)&&a<=3&&('物理'===t.type||'魔法'===t.type||'闪避'===t.type)?{allowed:!1,reason:`吞食效果生效（基础骰值≤3），无法使用${t.type}卡牌。`}:'魔法'===t.type&&t.manaCost>e.mp?{allowed:!1,reason:`法力不足（需要${t.manaCost}，当前${e.mp}）。`}:'魔法'===t.type&&Ga(e,A.SILENCE)?{allowed:!1,reason:'禁言中，无法使用魔法卡牌。'}:{allowed:!0}}function Za(e,t){return e.deck.find(e=>e.id===t)??e.deck[0]}function Ja(e){const t=e.reduce((e,t)=>e+t.weight,0);let a=Math.random()*t;for(const t of e)if(a-=t.weight,a<=0)return t.value;return e[e.length-1].value}const Qa=new Map(Pa().map(e=>[e.id,e])),en=e=>e.map(e=>(e=>{const t=Qa.get(e);if(!t)throw new Error(`[enemyRegistry] Missing card id: ${e}`);return t})(e)),tn='沐芯兰',an='宝箱怪',nn='enemy_muxinlan_cunning',on='enemy_muxinlan_forced_acquisition',rn='enemy_muxinlan_liquidation',ln='enemy_muxinlan_unstable_reagent',sn='enemy_muxinlan_liquid_fire',cn='enemy_muxinlan_activated_slime',dn='enemy_muxinlan_take_it',un='enemy_muxinlan_premium_shield',mn='enemy_muxinlan_set_ambush',pn='enemy_mimic_slimy_tentacle',fn='enemy_mimic_agile_tongue',gn='enemy_mimic_maw',yn='enemy_mimic_crush',vn='enemy_mimic_digest',hn='enemy_charge',bn='enemy_swamp_numb_spread',xn='enemy_swamp_fluid_wrap',_n='enemy_swamp_corrode',kn='enemy_mimicbubble_aphro_gas',En='enemy_mimicbubble_elastic_adsorb',Nn='enemy_mimicbubble_iridescent_float',Cn='enemy_mist_sprite_illusion_lure',Mn='enemy_vinewalker_lurk',wn='enemy_vinewalker_lightning_ambush',Dn='enemy_vinewalker_paralytic_toxin',Sn='enemy_vinewalker_lubricated_shrink',An='enemy_springspirit_liquefied_infiltration',Vn='enemy_springspirit_internal_manipulation',Tn='enemy_springspirit_undead_condense',Bn='enemy_springspirit_silent_infiltration',$n='enemy_root_tremor_sense',On='enemy_root_infiltrate_climb',In='enemy_vinewalker_lurk',Ln='enemy_vinewalker_lightning_ambush',Rn='enemy_root_infiltrate_climb',Pn='enemy_vinewalker_lightning_ambush',Hn='enemy_moth_swarm_burst',Un='enemy_blissbee_sensitive_scout',zn='enemy_blissbee_aphro_stinger',Gn='enemy_blissbee_precise_harvest',Fn='enemy_moth_swarm_burst',jn='enemy_pollen_high_pressure_spray',Yn='enemy_pollen_infiltration',Wn='enemy_prim_embrace',Xn='enemy_prim_fluid_evasion',qn='enemy_prim_digest_caress',Kn='enemy_prim_entity_clone',Zn='enemy_nymph_misty_swirl',Jn='enemy_nymph_mental_shock',Qn='enemy_nymph_mischief',eo='enemy_nymph_giant_projection',to='basic_physical',ao='enemy_undine_earth_essence',no='enemy_undine_loving_whip',oo='enemy_undine_doting_embrace',ro='enemy_undine_essence_infusion',lo='enemy_undine_psychic_assimilation',io='enemy_undine_earth_liquid',so='enemy_mata_matriarch_invitation',co='enemy_mata_under_skirt_tentacle',uo='enemy_mata_fungal_repair',mo='enemy_mata_false_smile',po='enemy_rose_plant_dominion',fo='enemy_rose_wangzhi_whip',go='enemy_rose_life_drain',yo='enemy_rose_nectar_discipline',vo='enemy_ursula_silence_spell',ho='enemy_ursula_lust_imprint',bo='enemy_ursula_binding_law',xo='enemy_ursula_whip_punish',_o='enemy_ursula_commandment',ko='enemy_floating_page_attach',Eo='enemy_floating_page_sensory_infusion',No='enemy_floating_page_forced_immersion',Co='enemy_charge',Mo='enemy_inkmouse_cowardice',wo='enemy_inkmouse_ink_burst',Do='enemy_inkmouse_liquefy_regen',So='enemy_charge',Ao='enemy_ink_slime_invasion',Vo='enemy_ink_slime_condense',To='enemy_slime_dodge',Bo='enemy_whisper_ghost_phantom',$o='enemy_whisper_ghost_knowledge_whisper',Oo='enemy_whisper_ghost_forbidden_knowledge',Io='enemy_whisper_ghost_passive_sensitization',Lo='enemy_book_demon_between_lines_temptation',Ro='enemy_book_demon_ink_tentacle',Po='enemy_book_demon_whisper_incitement',Ho='enemy_book_demon_knowledge_thirst';function Uo(e){const t=Math.max(1,Math.floor(e));return{name:tn,stats:{hp:20+30*t,maxHp:20+30*t,mp:2*t,minDice:1+t,maxDice:6+t,effects:[{type:A.MANA_SPRING,stacks:1,polarity:'buff'},{type:A.FLAME_ATTACH,stacks:1,polarity:'buff'},{type:A.POISON_ATTACH,stacks:1,polarity:'buff'},{type:A.FROST_ATTACH,stacks:1,polarity:'buff'},{type:A.BLOODBLADE_ATTACH,stacks:1,polarity:'buff'},{type:A.LIGHTNING_ATTACH,stacks:1,polarity:'buff'}]},deck:en([nn,on,rn,ln,sn,cn,dn,un,mn]),selectCard(e){if(!e.flags.muxinlanOpenedWithCunning)return e.flags.muxinlanOpenedWithCunning=!0,Za(e,nn);if(Ua.reduce((t,a)=>{return t+(n=a,e.playerStats.effects.find(e=>e.type===n)?.stacks??0);var n},0)>=12)return Za(e,rn);if(e.enemyStats.mp>4){const t=[ln,sn,cn],a=t[Math.floor(Math.random()*t.length)];return Za(e,a)}const t=[on,dn,un,mn],a=t[Math.floor(Math.random()*t.length)];return Za(e,a)}}}const zo={name:'游荡粘液球',stats:{hp:12,maxHp:12,mp:0,minDice:2,maxDice:5,effects:[{type:A.REGEN,stacks:1,polarity:'buff'}]},deck:en(['enemy_charge','enemy_slime_dodge','enemy_heal']),selectCard(e){if(e.enemyStats.hp/e.enemyStats.maxHp<=.4&&!e.flags.hasUsedHeal)return e.flags.hasUsedHeal=!0,Za(e,'enemy_heal');return Za(e,Ja([{value:'enemy_charge',weight:70},{value:'enemy_slime_dodge',weight:30}]))}},Go={name:'荧光蛾',stats:{hp:5,maxHp:5,mp:1,minDice:1,maxDice:4,effects:[{type:A.MANA_SPRING,stacks:1,polarity:'buff'},{type:A.SWARM,stacks:3,polarity:'buff'}]},deck:en(['enemy_moth_aphro_powder','enemy_moth_sensitive_mark','enemy_moth_pheromone','enemy_moth_swarm_burst']),selectCard(e){if(e.enemyStats.mp>=6)return Za(e,'enemy_moth_swarm_burst');const t=['enemy_moth_aphro_powder','enemy_moth_sensitive_mark','enemy_moth_pheromone'];return Za(e,t[Math.floor(Math.random()*t.length)])}},Fo={name:'根须潜行者',stats:{hp:8,maxHp:8,mp:0,minDice:2,maxDice:5,effects:[{type:A.SWARM,stacks:2,polarity:'buff'}]},deck:en(['enemy_root_tremor_sense','enemy_root_lube_secretion','enemy_root_infiltrate_climb']),selectCard(e){const t=['enemy_root_tremor_sense','enemy_root_lube_secretion','enemy_root_infiltrate_climb'];return Za(e,t[Math.floor(Math.random()*t.length)])}},jo={name:'沼泽潜伏者',stats:{hp:15,maxHp:15,mp:0,minDice:1,maxDice:6,effects:[{type:A.REGEN,stacks:1,polarity:'buff'}]},deck:en([hn,bn,xn,_n]),selectCard(e){if(e.playerStats.effects.some(e=>e.type===A.DEVOUR&&e.stacks>0))return Za(e,_n);if(e.playerStats.effects.some(e=>e.type===A.BIND&&e.stacks>0))return Za(e,xn);return Za(e,Ja([{value:hn,weight:30},{value:bn,weight:70}]))}},Yo={name:'拟态气泡怪',stats:{hp:15,maxHp:15,mp:0,minDice:2,maxDice:4,effects:[{type:A.TOXIN_SPREAD,stacks:1,polarity:'buff'}]},deck:en([kn,En,Nn]),selectCard:e=>Za(e,Ja([{value:kn,weight:50},{value:En,weight:30},{value:Nn,weight:20}]))},Wo={name:'迷雾精怪',stats:{hp:4,maxHp:4,mp:0,minDice:1,maxDice:1,effects:[{type:A.NON_ENTITY,stacks:1,polarity:'trait'},{type:A.NON_LIVING,stacks:1,polarity:'trait'},{type:A.SWARM,stacks:2,polarity:'buff'},{type:A.POINT_GROWTH_BIG,stacks:1,polarity:'buff'}]},deck:en([Cn]),selectCard:e=>Za(e,Cn)},Xo={name:'藤蔓行者',stats:{hp:16,maxHp:16,mp:0,minDice:2,maxDice:5,effects:[]},deck:en([Mn,wn,Dn,Sn]),selectCard(e){if(!e.flags.vinewalkerOpenedWithLurk)return e.flags.vinewalkerOpenedWithLurk=!0,Za(e,Mn);if(e.playerStats.effects.some(e=>e.type===A.BIND&&e.stacks>0))return Za(e,Dn);if(!e.enemyStats.effects.some(e=>e.type===A.AMBUSH&&e.stacks>0))return Za(e,Mn);return Za(e,Ja([{value:wn,weight:75},{value:Sn,weight:25}]))}},qo={name:'泉水精魄',stats:{hp:20,maxHp:20,mp:0,minDice:1,maxDice:6,effects:[{type:A.NON_LIVING,stacks:1,polarity:'trait'},{type:A.NON_ENTITY,stacks:1,polarity:'trait'}]},deck:en([An,Vn,Tn,Bn]),selectCard(e){if(!Ua.some(t=>e.enemyStats.effects.some(e=>e.type===t&&e.stacks>0))){const t=Ja([{value:An,weight:50},{value:Bn,weight:30},{value:Vn,weight:20}]);return Za(e,t)}const t=Ja([{value:An,weight:40},{value:Bn,weight:25},{value:Vn,weight:15},{value:Tn,weight:20}]);return Za(e,t)}},Ko={name:'潜伏触手怪',stats:{hp:20,maxHp:20,mp:0,minDice:3,maxDice:5,effects:[]},deck:en([$n,On,In,Ln]),selectCard(e){if(!e.flags.infiltratorTentacleOpenedWithLightningAmbush)return e.flags.infiltratorTentacleOpenedWithLightningAmbush=!0,Za(e,Ln);if(!e.enemyStats.effects.some(e=>e.type===A.AMBUSH&&e.stacks>0)){return Za(e,Ja([{value:$n,weight:20},{value:On,weight:20},{value:In,weight:40},{value:Ln,weight:20}]))}return Za(e,Ja([{value:$n,weight:35},{value:On,weight:35},{value:Ln,weight:30}]))}},Zo={name:'穴居触手',stats:{hp:2,maxHp:2,mp:0,minDice:2,maxDice:4,effects:[{type:A.MANA_SPRING,stacks:1,polarity:'buff'},{type:A.SWARM,stacks:5,polarity:'buff'}]},deck:en([Rn,Pn,Hn]),selectCard(e){if(e.enemyStats.mp>=6)return Za(e,Hn);if(!e.flags.caveTentacleOpenedWithLightningAmbush)return e.flags.caveTentacleOpenedWithLightningAmbush=!0,Za(e,Pn);return Za(e,Math.random()<.5?Rn:Pn)}},Jo={name:'极乐蜜蜂',stats:{hp:4,maxHp:4,mp:0,minDice:2,maxDice:5,effects:[{type:A.MANA_SPRING,stacks:1,polarity:'buff'},{type:A.SWARM,stacks:3,polarity:'buff'}]},deck:en([Un,zn,Gn,Fn]),selectCard(e){if(e.enemyStats.mp>=6)return Za(e,Fn);if(e.playerStats.effects.some(e=>e.type===A.POISON&&e.stacks>0)){return Za(e,Ja([{value:Un,weight:20},{value:zn,weight:30},{value:Gn,weight:50}]))}if(e.playerStats.effects.some(e=>e.type===A.VULNERABLE&&e.stacks>0)){return Za(e,Ja([{value:Un,weight:20},{value:zn,weight:80}]))}return Za(e,Un)}},Qo={name:'花粉喷射者',stats:{hp:10,maxHp:10,mp:0,minDice:2,maxDice:3,effects:[]},deck:en([jn,Yn]),selectCard:e=>e.flags.pollenSprayerOpenedWithHighPressureSpray?Za(e,Yn):(e.flags.pollenSprayerOpenedWithHighPressureSpray=!0,Za(e,jn))},er={name:'普莉姆',stats:{hp:25,maxHp:25,mp:0,minDice:2,maxDice:5,effects:[{type:A.REGEN,stacks:2,polarity:'buff'},{type:A.MANA_SPRING,stacks:1,polarity:'buff'}]},deck:en([Wn,Xn,qn,Kn]),selectCard(e){const t=e.enemyStats.effects.some(e=>e.type===A.SWARM&&e.stacks>0);if(e.enemyStats.hp<.5*e.enemyStats.maxHp&&!t)return Za(e,Kn);if(e.enemyStats.mp>=4)return Za(e,qn);return Za(e,Ja([{value:Wn,weight:65},{value:Xn,weight:35}]))}},tr={name:'宁芙',stats:{hp:45,maxHp:45,mp:0,minDice:1,maxDice:3,effects:[{type:A.ILLUSORY_BODY,stacks:1,polarity:'trait'},{type:A.MANA_SPRING,stacks:2,polarity:'buff'}]},deck:en([Zn,Jn,Qn,eo,to]),selectCard(e){if(!e.flags.nymphUsedGiantProjection&&e.enemyStats.hp<.5*e.enemyStats.maxHp)return e.flags.nymphUsedGiantProjection=!0,Za(e,eo);if(e.enemyStats.mp>=6)return Za(e,Jn);if(e.enemyStats.effects.some(e=>e.type===A.ILLUSORY_BODY&&e.stacks>0)){return Za(e,Ja([{value:Zn,weight:40},{value:Qn,weight:60}]))}return Za(e,Ja([{value:Zn,weight:50},{value:to,weight:50}]))}},ar={name:'温蒂尼',stats:{hp:40,maxHp:40,mp:0,minDice:3,maxDice:8,effects:[{type:A.WHITE_TURBID,stacks:1,polarity:'mixed'},{type:A.REGEN,stacks:1,polarity:'buff'},{type:A.MANA_SPRING,stacks:1,polarity:'buff'}]},deck:en([no,oo,ro,lo,io,ao]),selectCard(e){if(!e.flags.undineUsedEarthLiquid&&e.enemyStats.hp<.5*e.enemyStats.maxHp)return e.flags.undineUsedEarthLiquid=!0,Za(e,io);if(e.enemyStats.mp>=5)return Za(e,lo);if(e.enemyStats.mp>=1){return Za(e,Ja([{value:no,weight:30},{value:oo,weight:30},{value:ro,weight:40}]))}return Za(e,Ja([{value:no,weight:50},{value:oo,weight:50}]))}},nr={name:'玛塔',stats:{hp:20,maxHp:20,mp:0,minDice:2,maxDice:5,effects:[{type:A.SWARM,stacks:1,polarity:'buff'}]},deck:en([so,co,uo,mo]),selectCard(e){const t=e.playerStats.effects.find(e=>e.type===A.POISON_AMOUNT)?.stacks??0;if(e.enemyStats.hp<.5*e.enemyStats.maxHp&&t>=5)return Za(e,uo);return Za(e,Ja([{value:so,weight:30},{value:co,weight:30},{value:mo,weight:40}]))}},or={name:'罗丝',stats:{hp:40,maxHp:40,mp:0,minDice:1,maxDice:6,effects:[{type:A.THORNS,stacks:1,polarity:'buff'}]},deck:en([po,fo,go,yo]),selectCard(e){if(!e.flags.roseOpenedWithPlantDominion)return e.flags.roseOpenedWithPlantDominion=!0,Za(e,po);return Za(e,Ja([{value:po,weight:25},{value:fo,weight:25},{value:go,weight:25},{value:yo,weight:25}]))}},rr={name:'厄休拉',stats:{hp:80,maxHp:80,mp:3,minDice:3,maxDice:8,effects:[{type:A.INK_CREATION,stacks:1,polarity:'buff'},{type:A.MANA_SPRING,stacks:2,polarity:'buff'}]},deck:en([vo,ho,bo,xo,_o]),selectCard(e){const t=e.playerStats.effects.some(e=>e.type===A.SILENCE&&e.stacks>0);if(e.enemyStats.mp>=6&&t)return Za(e,ho);if(e.playerStats.effects.some(e=>e.type===A.BIND&&e.stacks>0)){return Za(e,Ja([{value:vo,weight:20},{value:bo,weight:20},{value:xo,weight:50},{value:_o,weight:10}]))}return Za(e,Ja([{value:vo,weight:40},{value:bo,weight:30},{value:_o,weight:30}]))}},lr={name:'浮游书页',stats:{hp:2,maxHp:2,mp:0,minDice:1,maxDice:4,effects:[{type:A.SWARM,stacks:8,polarity:'buff'},{type:A.MANA_SPRING,stacks:2,polarity:'buff'},{type:A.INK_CREATION,stacks:1,polarity:'buff'}]},deck:en([ko,Eo,No]),selectCard(e){const t=e.playerStats.effects.find(e=>e.type===A.CORROSION)?.stacks??0,a=e.playerStats.effects.some(e=>e.type===A.BIND&&e.stacks>0);return e.enemyStats.mp>=4&&t>=3?Za(e,Eo):e.enemyStats.mp>=2&&a?Za(e,No):Za(e,ko)}},ir={name:'墨痕鼠',stats:{hp:6,maxHp:6,mp:0,minDice:2,maxDice:6,effects:[{type:A.SWARM,stacks:4,polarity:'buff'},{type:A.MANA_SPRING,stacks:1,polarity:'buff'},{type:A.INK_CREATION,stacks:1,polarity:'buff'}]},deck:en([Co,Mo,wo,Do]),selectCard(e){if((e.enemyStats.effects.find(e=>e.type===A.SWARM)?.stacks??0)<=1&&e.enemyStats.maxHp>1)return Za(e,Do);if(e.enemyStats.mp>=2)return Za(e,wo);return Za(e,Ja([{value:Co,weight:75},{value:Mo,weight:25}]))}},sr={name:'低语幽灵',stats:{hp:30,maxHp:30,mp:0,minDice:3,maxDice:6,effects:[{type:A.NON_ENTITY,stacks:1,polarity:'trait'},{type:A.NON_LIVING,stacks:1,polarity:'trait'},{type:A.MANA_SPRING,stacks:1,polarity:'buff'}]},deck:en([Bo,$o,Oo,Io]),selectCard(e){if(e.enemyStats.mp>=10)return Za(e,Oo);if(e.turn%4==0)return Za(e,Io);if(e.enemyStats.mp>=2){return Za(e,Ja([{value:$o,weight:70},{value:Bo,weight:30}]))}return Za(e,Bo)}},cr={name:'墨水史莱姆',stats:{hp:10,maxHp:10,mp:0,minDice:2,maxDice:5,effects:[{type:A.SWARM,stacks:3,polarity:'buff'},{type:A.INK_CREATION,stacks:1,polarity:'buff'}]},deck:en([So,Ao,Vo,To]),selectCard(e){if((e.enemyStats.effects.find(e=>e.type===A.SWARM)?.stacks??0)<=1){return Za(e,Ja([{value:So,weight:20},{value:Ao,weight:20},{value:Vo,weight:30},{value:To,weight:30}]))}return Za(e,Ja([{value:So,weight:30},{value:Ao,weight:30},{value:To,weight:40}]))}},dr={name:'书魔',stats:{hp:30,maxHp:30,mp:20,minDice:3,maxDice:5,effects:[{type:A.INK_CREATION,stacks:1,polarity:'buff'},{type:A.MANA_SPRING,stacks:2,polarity:'buff'}]},deck:en([Lo,Ro,Po,Ho]),selectCard:e=>Za(e,Ja([{value:Lo,weight:35},{value:Ro,weight:35},{value:Po,weight:10},{value:Ho,weight:20}]))},ur=new Map([[zo.name,zo],[Go.name,Go],[Fo.name,Fo],[jo.name,jo],[Yo.name,Yo],[Wo.name,Wo],[Xo.name,Xo],[qo.name,qo],[Ko.name,Ko],[Zo.name,Zo],[Jo.name,Jo],[Qo.name,Qo],[er.name,er],[tr.name,tr],[ar.name,ar],[nr.name,nr],[or.name,or],[rr.name,rr],[lr.name,lr],[ir.name,ir],[sr.name,sr],[cr.name,cr],[dr.name,dr]]),mr=[tn,an,...ur.keys()];function pr(e,t=1){return e===tn?Uo(t):e===an?function(e){const t=Math.max(1,Math.floor(e));return{name:an,stats:{hp:20*t,maxHp:20*t,mp:0,minDice:t,maxDice:5+2*t,effects:[]},deck:en([pn,fn,gn,yn,vn]),selectCard(e){if(e.playerStats.effects.some(e=>e.type===A.DEVOUR&&e.stacks>0)){const t=[yn,vn];return Za(e,t[Math.floor(Math.random()*t.length)])}const t=[pn,fn,gn];return Za(e,t[Math.floor(Math.random()*t.length)])}}}(t):ur.get(e)}function fr(){return[...mr]}const gr=(e,t)=>e.effects.find(e=>e.type===t)?.stacks??0,yr=[{id:'lucky_coin_small',name:'幸运硬币（小）',rarity:'普通',category:'基础',effect:'最小骰子点数 +1',description:'战斗开始时，最小骰子点数 +1。',hooks:{onBattleStart:({count:e,self:t,addLog:a})=>{t.minDice+=e,a(`[幸运硬币（小）] 最小骰子点数 +${e}。`)}}},{id:'lucky_coin_large',name:'幸运硬币（大）',rarity:'普通',category:'基础',effect:'最大骰子点数 +1',description:'战斗开始时，最大骰子点数 +1。',hooks:{onBattleStart:({count:e,self:t,addLog:a})=>{t.maxDice+=e,a(`[幸运硬币（大）] 最大骰子点数 +${e}。`)}}},{id:'red_notebook',name:'红色笔记',rarity:'普通',category:'基础',effect:'打出物理卡牌时最终点数 +1',description:'每次打出物理卡牌时，最终点数 +1。',hooks:{modifyFinalPoint:({card:e,currentPoint:t,count:a})=>e.type!==S.PHYSICAL?t:t+a}},{id:'blue_notebook',name:'蓝色笔记',rarity:'普通',category:'基础',effect:'打出魔法卡牌时最终点数 +1',description:'每次打出魔法卡牌时，最终点数 +1。',hooks:{modifyFinalPoint:({card:e,currentPoint:t,count:a})=>e.type!==S.MAGIC?t:t+a}},{id:'yellow_notebook',name:'黄色笔记',rarity:'普通',category:'基础',effect:'打出功能卡牌时最终点数 +1',description:'每次打出功能卡牌时，最终点数 +1。',hooks:{modifyFinalPoint:({card:e,currentPoint:t,count:a})=>e.type!==S.FUNCTION?t:t+a}},{id:'green_notebook',name:'绿色笔记',rarity:'普通',category:'基础',effect:'打出闪避卡牌时最终点数 -1',description:'每次打出闪避卡牌时，最终点数 -1。',hooks:{modifyFinalPoint:({card:e,currentPoint:t,count:a})=>e.type!==S.DODGE?t:t-a}},{id:'mana_residue',name:'魔力残渣',rarity:'普通',category:'基础',effect:'回合结束时，若自身魔力等于 0，则魔力 +1',description:'每回合结束时，若魔力为 0，则回复 1 点魔力。',hooks:{onTurnEnd:({count:e,side:t,self:a,restoreMana:n,addLog:o})=>{if(0!==a.mp)return;const r=n(t,e);r>0&&o(`[魔力残渣] 魔力为 0，回复 ${r} 点魔力。`)}}},{id:'sanctuary_amulet',name:'庇护符',rarity:'普通',category:'基础',effect:'战斗开始时，获得一层“不屈”',description:'战斗开始时，获得 1 层不屈。',hooks:{onBattleStart:({count:e,side:t,addStatusEffect:a,addLog:n})=>{a(t,A.INDOMITABLE,e,{source:'relic:sanctuary_amulet'})&&n(`[庇护符] 获得 ${e} 层不屈。`)}}},{id:'simple_charm',name:'简易护符',rarity:'普通',category:'基础',effect:'每回合开始时，给自身增加 1 点护甲',description:'每回合开始时，获得 1 点护甲。',hooks:{onTurnStart:({count:e,side:t,addArmor:a,addLog:n})=>{const o=a(t,e);o>0&&n(`[简易护符] 获得 ${o} 点护甲。`)}}},{id:'reset_button',name:'重置按钮',rarity:'普通',category:'基础',effect:'每场战斗增加 6 次重掷自身骰子的机会',description:'战斗开始时获得 6 次重掷机会；有次数时点击自己的骰子可重掷。',hooks:{onBattleStart:({count:e,side:t,addRerollCharges:a,getRerollCharges:n,addLog:o})=>{const r=6*e;a(t,r),o(`[重置按钮] 获得 ${r} 次重掷（当前 ${n(t)}）。`)},onDiceClick:({count:e,side:t,minDice:a,maxDice:n,roll:o,consumeRerollCharge:r,getRerollCharges:l,addLog:i})=>{if(e<=0)return null;if(!r(t,1))return null;const s=o(a,n);return i(`[重置按钮] 触发重掷，剩余 ${l(t)} 次。`),s}}},{id:'energy_candy',name:'能量糖果',rarity:'普通',category:'基础',effect:'每当洗牌（弃牌堆重入抽牌堆）时，回复 1 点魔力',description:'每次洗牌时，回复 1 点魔力。',hooks:{onDeckShuffle:({count:e,side:t,restoreMana:a,addLog:n})=>{const o=a(t,e);o>0&&n(`[能量糖果] 洗牌触发，回复 ${o} 点魔力。`)}}},{id:'simple_shield',name:'简易护盾',rarity:'普通',category:'基础',effect:'战斗开始时获得 10 点护甲',description:'战斗开始时，获得 10 点护甲。',hooks:{onBattleStart:({count:e,side:t,addArmor:a,addLog:n})=>{const o=a(t,10*e);o>0&&n(`[简易护盾] 获得 ${o} 点护甲。`)}}},{id:'pure_water',name:'洁净之水',rarity:'普通',category:'基础',effect:'战斗开始时回复 8 点血量，多余回复转化为等量护甲',description:'战斗开始时，回复 8 点生命；溢出治疗转化为等量护甲。',hooks:{onBattleStart:({count:e,side:t,heal:a,addLog:n})=>{const{healed:o,overflow:r}=a(t,8*e,{overflowToArmor:!0});n(`[洁净之水] 回复 ${o} 点生命，转化 ${r} 点护甲。`)}}},{id:'base_rainbow_card',name:'彩虹卡牌',rarity:'稀有',category:'基础',effect:'普通敌人额外掉落1张卡牌奖励',description:'战胜普通敌人时，奖励卡牌选项额外+1。'},{id:'base_silver_card',name:'银色卡牌',rarity:'稀有',category:'基础',effect:'普通敌人卡牌奖励可刷新1次',description:'战胜普通敌人后，在选卡界面可使用一次“刷新奖励”。'},{id:'base_golden_card',name:'金色卡牌',rarity:'稀有',category:'基础',effect:'普通敌人掉落卡牌有10%概率为稀有',description:'战胜普通敌人时，每个奖励位有10%概率直接生成稀有卡牌。'},{id:'oily_grease',name:'易燃油脂',rarity:'普通',category:'燃烧',effect:'战斗中首次命中敌人时为敌人施加 2 层燃烧',description:'本场战斗首次命中敌人时，为敌人施加 2 层燃烧。',hooks:{onAfterHitDealt:({count:e,side:t,targetSide:a,actualDamage:n,state:o,addStatusEffect:r,addLog:l})=>{if(a===t)return;if(n<=0)return;if(!0===o.triggered)return;o.triggered=!0;const i=2*e;r(a,A.BURN,i,{source:'relic:oily_grease'})&&l(`[易燃油脂] 首次命中触发，对敌人施加 ${i} 层燃烧。`)}}},{id:'sunglasses',name:'墨镜',rarity:'稀有',category:'燃烧',effect:'自身免疫眩晕，开局时为对手施加一回合眩晕',description:'自身不会被施加眩晕；战斗开始时使对手眩晕 1 回合。',hooks:{onBattleStart:({count:e,side:t,addStatusEffect:a,addLog:n})=>{a('player'===t?'enemy':'player',A.STUN,Math.max(1,e),{source:'relic:sunglasses'})&&n('[墨镜] 战斗开始使对手进入眩晕。')},onBeforeApplyEffect:({side:e,targetSide:t,effectType:a,addLog:n})=>{if(t===e&&a===A.STUN)return n('[墨镜] 免疫眩晕。'),!1}}},{id:'flame_ring',name:'火焰圆环',rarity:'稀有',category:'燃烧',effect:'自身受到敌人物理攻击时，对来源施加 1 层燃烧',description:'每次受到敌人物理攻击时，对来源施加 1 层燃烧。',hooks:{onAfterHitTaken:({count:e,side:t,sourceSide:a,targetSide:n,card:o,addStatusEffect:r,addLog:l})=>{n===t&&a!==t&&o.type===S.PHYSICAL&&r(a,A.BURN,e,{source:'relic:flame_ring'})&&l(`[火焰圆环] 反击施加 ${e} 层燃烧。`)}}},{id:'fire_slime',name:'火焰史莱姆',rarity:'稀有',category:'燃烧',effect:'自己收到的燃烧伤害恒定为 2（优先于烈阳护符）',description:'自身受到燃烧伤害时，伤害固定为 2，并覆盖烈阳护符对自身的下限。',hooks:{onBeforeBurnDamage:e=>{e.targetSide===e.side&&2!==e.damage&&(e.damage=2)}}},{id:'ember_seed',name:'余烬火种',rarity:'稀有',category:'燃烧',effect:'敌人最少拥有与余烬火种数量相同的燃烧层数',description:'战斗期间会维持敌人燃烧层数下限，最低值等于余烬火种数量。',hooks:{onBattleStart:({count:e,side:t,opponent:a,addStatusEffect:n,addLog:o})=>{const r='player'===t?'enemy':'player',l=gr(a,A.BURN),i=Math.max(1,e),s=i-l;s>0&&n(r,A.BURN,s,{source:'relic:ember_seed'})&&o(`[余烬火种] 维持敌方至少 ${i} 层燃烧。`)},onTurnStart:({count:e,side:t,opponent:a,addStatusEffect:n,addLog:o})=>{const r='player'===t?'enemy':'player',l=gr(a,A.BURN),i=Math.max(1,e),s=i-l;s>0&&n(r,A.BURN,s,{source:'relic:ember_seed'})&&o(`[余烬火种] 维持敌方至少 ${i} 层燃烧。`)}}},{id:'phoenix_feather',name:'不死鸟之羽',rarity:'稀有',category:'燃烧',effect:'若玩家受到燃烧伤害，下一张打出的卡牌点数 +1',description:'玩家受到燃烧伤害后，下一张打出的卡牌点数 +1。',hooks:{onAfterBurnDamageTaken:({count:e,side:t,targetSide:a,damage:n,state:o,addLog:r})=>{if(a!==t)return;if(n<=0)return;const l=Number(o.nextCardPointBonus??0),i=1*e;o.nextCardPointBonus=l+i,r(`[不死鸟之羽] 充能：下一张卡牌点数 +${l+i}。`)},modifyFinalPoint:({side:e,currentPoint:t,state:a,isPreview:n,addLog:o})=>{if('player'!==e)return t;const r=Math.max(0,Math.floor(Number(a.nextCardPointBonus??0)));return r<=0?t:(n||(a.nextCardPointBonus=0,o(`[不死鸟之羽] 触发，点数 +${r}。`)),t+r)}}},{id:'rekindle_core',name:'复燃核心',rarity:'稀有',category:'燃烧',effect:'若玩家受到燃烧伤害，自身回复 1 点魔力',description:'每次玩家受到燃烧伤害时，回复 1 点魔力。',hooks:{onAfterBurnDamageTaken:({count:e,side:t,targetSide:a,damage:n,restoreMana:o,addLog:r})=>{if(a!==t)return;if(n<=0)return;const l=o(t,e);l>0&&r(`[复燃核心] 触发，回复 ${l} 点魔力。`)}}},{id:'burn_heat_exchange_fin',name:'热交换鳍片',rarity:'普通',category:'燃烧',effect:'每次自身燃烧减少时，获得5护甲',description:'每当自身燃烧层数减少时，获得5点护甲。'},{id:'burn_reverse_circuit',name:'逆燃回路',rarity:'稀有',category:'燃烧',effect:'回合开始若你有燃烧，失去1生命并回1MP（每回合1次）',description:'每回合开始时，若你拥有燃烧，则失去1点生命并回复1点魔力。'},{id:'everlasting_fuel',name:'不灭薪柴',rarity:'传奇',category:'燃烧',effect:'结算燃烧伤害时，改为造成等量真实伤害',description:'燃烧伤害改为真实伤害（无视护甲与结界）。',hooks:{onBeforeBurnDamage:e=>{e.damage<=0||(e.isTrueDamage=!0)}}},{id:'sun_charm',name:'烈阳护符',rarity:'传奇',category:'燃烧',effect:'双方收到的燃烧伤害最少为当前回合数',description:'双方受到燃烧伤害时，伤害至少为护符数量*当前回合数。',hooks:{onBeforeBurnDamage:e=>{if(e.targetSide===e.side&&e.hasRelic('fire_slime'))return;const t=Math.max(1,e.turn*Math.max(1,e.count));e.damage>=t||(e.damage=t)}}},{id:'modao_light_shield',name:'轻薄护盾',rarity:'普通',category:'魔导',effect:'战斗开始时自身获得1层结界',description:'战斗开始时，获得1层结界。',hooks:{onBattleStart:({count:e,side:t,addStatusEffect:a,addLog:n})=>{a(t,A.BARRIER,e,{source:'relic:modao_light_shield'})&&n(`[轻薄护盾] 获得 ${e} 层结界。`)}}},{id:'modao_dagger_pendant',name:'匕首吊坠',rarity:'普通',category:'魔导',effect:'战斗开始时自身获得1层增伤',description:'战斗开始时，获得1层增伤。',hooks:{onBattleStart:({count:e,side:t,addStatusEffect:a,addLog:n})=>{a(t,A.DAMAGE_BOOST,e,{source:'relic:modao_dagger_pendant'})&&n(`[匕首吊坠] 获得 ${e} 层增伤。`)}}},{id:'modao_magic_lens',name:'魔法镜片',rarity:'普通',category:'魔导',effect:'战斗开始时给予对方1层易伤',description:'战斗开始时，对敌方施加1层易伤。',hooks:{onBattleStart:({count:e,side:t,addStatusEffect:a,addLog:n})=>{a('player'===t?'enemy':'player',A.VULNERABLE,e,{source:'relic:modao_magic_lens'})&&n(`[魔法镜片] 对敌方施加 ${e} 层易伤。`)}}},{id:'modao_rune_capacitor',name:'法纹电容',rarity:'普通',category:'魔导',effect:'战斗开始时，魔力+1',description:'战斗开始时，回复1点魔力。',hooks:{onBattleStart:({count:e,side:t,restoreMana:a,addLog:n})=>{const o=a(t,e);o>0&&n(`[法纹电容] 回复 ${o} 点魔力。`)}}},{id:'modao_stabilizer_pin',name:'稳压回针',rarity:'普通',category:'魔导',effect:'单次回蓝≥3时，获得1护甲（每回合至多2次）',description:'当你单次回复至少3点魔力时，获得1点护甲（每回合最多触发2次）。'},{id:'modao_scale_ring',name:'刻度环',rarity:'普通',category:'魔导',effect:'每3回合回复1MP',description:'每逢第3/6/9...回合开始时，回复1点魔力。'},{id:'modao_inverse_codex',name:'反相法典',rarity:'稀有',category:'魔导',effect:'回合开始若MP<=5，本回合打出魔法牌时点数+2',description:'每回合开始时，若你当前MP≤5，则本回合打出魔法牌点数+2。',hooks:{onTurnStart:({count:e,self:t,state:a,addLog:n})=>{const o=t.mp<=5&&e>0;a.enabledThisTurn=o,o&&n(`[反相法典] 本回合激活：魔法牌点数 +${2*e}。`)},modifyFinalPoint:({card:e,currentPoint:t,state:a,count:n})=>e.type!==S.MAGIC?t:a.enabledThisTurn?t+2*n:t}},{id:'modao_arcane_host',name:'魔导主机',rarity:'稀有',category:'魔导',effect:'手牌中的第2张魔法牌魔力消耗-2（最低0）',description:'按手牌从左到右计数，第2张魔法牌的魔力消耗-2（最低为0）。'},{id:'modao_magic_doll',name:'魔法玩偶',rarity:'稀有',category:'魔导',effect:'每回合结束时，消耗1MP造成2点伤害',description:'每回合结束时，若有足够魔力则消耗1点魔力并对敌方造成2点伤害。'},{id:'modao_witch_hat',name:'魔女的帽子',rarity:'传奇',category:'魔导',effect:'打出魔法牌时点数x1.5；打出物理牌时点数x0.5',description:'每次打出魔法牌点数乘1.5；打出物理牌点数乘0.5。',hooks:{modifyFinalPoint:({card:e,currentPoint:t,count:a})=>e.type===S.MAGIC?t*1.5**Math.max(1,a):e.type===S.PHYSICAL?t*.5**Math.max(1,a):t}},{id:'yanhan_low_temp_engraver',name:'低温刻刀',rarity:'普通',category:'严寒',effect:'打出功能牌时，敌方寒冷+1',description:'每次打出功能牌后，使敌方获得1层寒冷。'},{id:'yanhan_reverse_phase_shell',name:'反相壳层',rarity:'普通',category:'严寒',effect:'本回合若受伤≥10，回合末对敌寒冷+2',description:'若玩家本回合累计受到至少10点伤害，则回合结束时对敌方施加2层寒冷。'},{id:'yanhan_frost_storage_plate',name:'凝霜蓄板',rarity:'普通',category:'严寒',effect:'敌方寒冷减少时，我方护甲+1',description:'每当敌方寒冷层数减少时，我方获得1点护甲。'},{id:'yanhan_cold_abyss_rift',name:'寒渊裂隙',rarity:'稀有',category:'严寒',effect:'敌方寒冷减少时，对敌方造成2点真实伤害',description:'每当敌方寒冷层数减少时，对敌方造成2点真实伤害。'},{id:'yanhan_freeze_pump',name:'冻结泵',rarity:'普通',category:'严寒',effect:'每次施加寒冷时，自身获得1护甲（每回合上限2）',description:'当你对敌方施加寒冷时，自身获得1点护甲（每回合最多触发2次）。'},{id:'yanhan_seal_circuit',name:'封存回路',rarity:'稀有',category:'严寒',effect:'回合结束护甲减半后，将损失护甲的1/3在下回合开始转为MP',description:'回合结束时，按护甲减半损失值的1/3存储能量，并在下回合开始时转化为魔力。'},{id:'yanhan_freeze_flow_core',name:'冻流泵芯',rarity:'稀有',category:'严寒',effect:'单次获得护甲≥5时，额外回蓝+1（每回合1次）',description:'当你单次获得至少5点护甲时，额外回复1点魔力（每回合最多触发1次）。'},{id:'bloodpool_blood_pool',name:'血池',rarity:'传奇',category:'血池',effect:'战斗胜利时若生命≤50%回复12；进入领主房时生命回满',description:'战斗胜利后若生命值不高于50%，回复12点生命；进入领主房时立即回满生命。'},{id:'bloodpool_heart_mark',name:'心脏印记',rarity:'稀有',category:'血池',effect:'每次受伤回复1点生命（每回合最多2次）',description:'当你受到伤害时回复1点生命值（每回合最多触发2次）。',hooks:{onTurnStart:({state:e})=>{e.triggeredThisTurn=0},onAfterHitTaken:({count:e,side:t,targetSide:a,actualDamage:n,state:o,heal:r,addLog:l})=>{if(a!==t)return;if(n<=0)return;const i=Math.max(0,Math.floor(Number(o.triggeredThisTurn??0)));if(i>=2)return;o.triggeredThisTurn=i+1;const{healed:s}=r(t,e);l(`[心脏印记] 受伤触发，回复 ${s} 点生命（本回合 ${i+1}/2）。`)}}},{id:'bloodpool_skin_mark',name:'皮肤印记',rarity:'稀有',category:'血池',effect:'每次受伤减少1点伤害（每回合最多2次）',description:'每次受到伤害时减少1点伤害（每回合最多触发2次）。'},{id:'bloodpool_pulse_mark',name:'脉搏印记',rarity:'稀有',category:'血池',effect:'回合开始自损2点真实伤害；回合结束回复2点生命',description:'每回合开始时对自己造成2点真实伤害；每回合结束时回复2点生命。',hooks:{onTurnEnd:({count:e,side:t,heal:a,addLog:n})=>{const{healed:o}=a(t,2*e);o>0&&n(`[脉搏印记] 回合结束回复 ${o} 点生命。`)}}},{id:'bloodpool_stomach_mark',name:'胃印记',rarity:'稀有',category:'血池',effect:'战斗结束后最大生命值+2',description:'每次战斗结束后，最大生命值永久+2。'},{id:'bloodpool_strawberry',name:'草莓',rarity:'普通',category:'血池',effect:'最大生命值+5',description:'最大生命值增加5点。'},{id:'bloodpool_pear',name:'梨',rarity:'稀有',category:'血池',effect:'最大生命值+10',description:'最大生命值增加10点。'},{id:'bloodpool_mango',name:'芒果',rarity:'传奇',category:'血池',effect:'最大生命值+15',description:'最大生命值增加15点。'},{id:'bloodpool_crimson_plasma',name:'凝血导管',rarity:'普通',category:'血池',effect:'战斗中的回复效果增加25%',description:'战斗中造成的生命回复效果提高25%。'},{id:'bloodpool_crimson_membrane',name:'赤膜增殖囊',rarity:'稀有',category:'血池',effect:'每2回合增长1点临时生命上限',description:'每经过2个己方回合开始，获得1点临时生命上限。',hooks:{onBattleStart:({state:e})=>{e.turnCounter=0},onTurnStart:({count:e,side:t,state:a,addStatusEffect:n,addLog:o})=>{const r=Math.max(0,Math.floor(Number(a.turnCounter??0)))+1;if(a.turnCounter=r,r%2!=0)return;const l=Math.max(1,Math.floor(e));n(t,A.TEMP_MAX_HP,l,{source:'relic:bloodpool_crimson_membrane'})&&o(`[赤膜增殖囊] 第 ${r} 回合触发，临时生命上限 +${l}。`)}}},{id:'bloodpool_hemostatic_valve',name:'凝血限流阀',rarity:'稀有',category:'血池',effect:'自己每次受到的伤害不能超过10点',description:'单次受到的伤害上限为10点。'},{id:'bloodpool_reflow_mark',name:'回流刻印',rarity:'稀有',category:'血池',effect:'每回复一次生命值，当前回合点数+1（每回合最多2次）',description:'每当你在当前回合回复一次生命值，本回合后续卡牌点数+1（每回合最多触发2次）。',hooks:{onTurnStart:({state:e})=>{e.healTriggersThisTurn=0},modifyFinalPoint:({currentPoint:e,state:t,isPreview:a,addLog:n})=>{const o=Math.max(0,Math.floor(Number(t.healTriggersThisTurn??0)));return o<=0?e:(a||n(`[回流刻印] 本次点数 +${o}。`),e+o)}}},{id:'bloodpool_clash_point_mark',name:'骰蚀刻印',rarity:'普通',category:'血池',effect:'拼点成功时给对方施加1层流血',description:'每次拼点成功时，对手获得1层流血。'},{id:'bloodpool_first_bleed_feast',name:'噬血水蛭',rarity:'普通',category:'血池',effect:'敌人首次受到流血伤害时，我方回复等量生命',description:'每场战斗中，敌人第一次受到流血伤害时，你回复等量生命值。'},{id:'bloodpool_halfline_resonance',name:'半阈共振核',rarity:'传奇',category:'血池',effect:'自身生命跨越50%阈值时触发敌方流血一次',description:'每次你的生命值在50%阈值上下跨越时，立即触发一次敌方流血伤害。'},{id:'bloodpool_fetal_cocoon',name:'胎生血茧',rarity:'传奇',category:'血池',effect:'战斗开始时受到一次50%当前生命值的真实伤害，并获得1层血茧',description:'战斗开始时，自身受到一次50%当前生命值的真实伤害，并获得1层血茧。',hooks:{onBattleStart:({count:e,side:t,self:a,addStatusEffect:n,addLog:o})=>{const r=Math.max(0,Math.floor(a.hp)),l=r>0?Math.max(1,Math.floor(.5*r)):0;l>0&&(a.hp=Math.max(0,a.hp-l),o(`[胎生血茧] 战斗开始：受到 ${l} 点真实伤害。`));const i=Math.max(1,Math.floor(e));n(t,A.BLOOD_COCOON,i,{source:'relic:bloodpool_fetal_cocoon'})&&o(`[胎生血茧] 获得 ${i} 层血茧。`)}}},{id:'bloodpool_critical_rebound',name:'危线回流',rarity:'稀有',category:'血池',effect:'战斗中首次生命低于一半时，回复5点生命',description:'每场战斗中，第一次生命值低于50%时，立即回复5点生命。'}],vr=new Map(yr.map(e=>[e.id,e])),hr=new Map(yr.map(e=>[e.name,e]));function br(){return yr}function xr(e){return vr.get(e)}function _r(e){return hr.get(e)}const kr={'地牢/user':['立绘1.png','立绘10.png','立绘11.png','立绘2.png','立绘3.png','立绘4.png','立绘5.png','立绘6.png','立绘7.png','立绘8.png','立绘9.png'],'地牢/魔物/厄休拉':['厄休拉1.png','厄休拉10.png','厄休拉11.png','厄休拉12.png','厄休拉13.png','厄休拉14.png','厄休拉15.png','厄休拉16.png','厄休拉17.png','厄休拉18.png','厄休拉2.png','厄休拉3.png','厄休拉4.png','厄休拉5.png','厄休拉6.png','厄休拉7.png','厄休拉8.png','厄休拉9.png'],'地牢/魔物/因克':['因克1.png','因克10.png','因克11.png','因克12.png','因克13.png','因克14.png','因克15.png','因克16.png','因克17.png','因克18.png','因克19.png','因克2.png','因克20.png','因克21.png','因克22.png','因克23.png','因克3.png','因克4.png','因克5.png','因克6.png','因克7.png','因克8.png','因克9.png'],'地牢/魔物/宁芙':['宁芙1.png','宁芙10.png','宁芙11.png','宁芙12.png','宁芙13.png','宁芙14.png','宁芙15.png','宁芙16.png','宁芙17.png','宁芙18.png','宁芙19.png','宁芙2.png','宁芙20.png','宁芙21.png','宁芙22.png','宁芙23.png','宁芙24.png','宁芙25.png','宁芙26.png','宁芙27.png','宁芙28.png','宁芙29.png','宁芙3.png','宁芙30.png','宁芙31.png','宁芙4.png','宁芙5.png','宁芙6.png','宁芙7.png','宁芙8.png','宁芙9.png'],'地牢/魔物/希尔薇':['希尔薇1.png','希尔薇2.png','希尔薇3.png','希尔薇4.png','希尔薇5.png','希尔薇6.png'],'地牢/魔物/普莉姆':['普莉姆1.png','普莉姆10.png','普莉姆2.png','普莉姆3.png','普莉姆4.png','普莉姆5.png','普莉姆6.png','普莉姆7.png','普莉姆8.png','普莉姆9.png'],'地牢/魔物/沐芯兰':['沐芯兰1.png','沐芯兰2.png','沐芯兰3.png','沐芯兰4.png','沐芯兰5.png','沐芯兰6.png'],'地牢/魔物/温蒂尼':['温蒂尼1.png','温蒂尼10.png','温蒂尼2.png','温蒂尼3.png','温蒂尼4.png','温蒂尼5.png','温蒂尼6.png','温蒂尼7.png','温蒂尼8.png','温蒂尼9.png'],'地牢/魔物/玛塔':['玛塔1.png','玛塔10.png','玛塔11.png','玛塔12.png','玛塔13.png','玛塔14.png','玛塔2.png','玛塔3.png','玛塔4.png','玛塔5.png','玛塔6.png','玛塔7.png','玛塔8.png','玛塔9.png'],'地牢/魔物/罗丝':['罗丝1.png','罗丝2.png','罗丝3.png','罗丝4.png','罗丝5.png','罗丝6.png','罗丝7.png','罗丝8.png','罗丝9.png']},Er=e=>{const t=e.replace(/\\/g,'/').replace(/^\/+|\/+$/g,'');const a=kr[t];return a?a.map(e=>`${t}/${e}`):[]},Nr=['brave-explorer.mp3','close-then-gone.mp3','fantasy-galaxy.mp3','mountain-piano-background.mp3','over-nara.mp3','soft-fly.mp3','streetlamp-wind.mp3'],Cr=encodeURIComponent('地牢'),Mr=`${encodeURIComponent('音效库')}/${encodeURIComponent('背景音乐')}`,wr='dungeon.bgm.track',Dr='dungeon.bgm.volume',Sr='brave-explorer.mp3',Ar=(0,o.ref)([]),Vr=(0,o.ref)(.45),Tr=(0,o.ref)(Sr);let Br=!1,$r=null,Or=null,Ir=!1,Lr=[],Rr=0;const Pr=e=>`https://img.vinsimage.org/${Cr}/${Mr}/${encodeURIComponent(e)}`,Hr=e=>(e=>{const t=e.replace(/\\/g,'/').split('/').filter(Boolean);if(0===t.length)return'';const[a,...n]=t;return`file:///${a}/${n.map(e=>encodeURIComponent(e)).join('/')}`})(`D:/SillyTavern/图片素材/地牢/音效库/背景音乐/${e}`),Ur=e=>{const t=[Hr(e),Pr(e)].filter(Boolean);return[...new Set(t)]},zr=e=>({id:e,name:e.replace(/\.[^.]+$/,''),url:Ur(e)[0]??Pr(e)}),Gr=[zr('brave-explorer.mp3'),zr('close-then-gone.mp3'),zr('fantasy-galaxy.mp3'),zr('mountain-piano-background.mp3'),zr('over-nara.mp3'),zr('soft-fly.mp3'),zr('streetlamp-wind.mp3')],Fr=e=>Number.isFinite(e)?Math.max(0,Math.min(1,e)):0,jr=()=>$r||($r=new Audio,$r.preload='auto',$r.loop=!0,$r.volume=Vr.value,$r.addEventListener('error',()=>{if(!$r)return;const e=Rr+1;e>=Lr.length||(Rr=e,$r.src=Lr[Rr],$r.load(),$r.play().catch(()=>{Xr()}))}),$r),Yr=()=>{localStorage.setItem(wr,Tr.value)},Wr=()=>{const e=0===Ar.value.length?null:Ar.value.find(e=>e.id===Tr.value)??Ar.value[0];if(!e)return;Tr.value!==e.id&&(Tr.value=e.id,Yr());const t=jr();t.volume=Vr.value,Or!==e.id&&(Lr=Ur(e.id),Rr=0,t.src=Lr[0]??e.url,t.load(),Or=e.id)},Xr=()=>{if(Ir)return;Ir=!0;const e=()=>{Ir=!1,$r&&$r.play().catch(()=>{Xr()})};document.addEventListener('click',e,{once:!0,capture:!0}),document.addEventListener('keydown',e,{once:!0,capture:!0}),document.addEventListener('touchstart',e,{once:!0,capture:!0})},qr=()=>{jr().play().catch(()=>{Xr()})},Kr=async()=>{const e=await(async()=>Nr.map(e=>zr(e)))();var t;Ar.value=(t=e.length>0?e:Gr,[...t].sort((e,t)=>e.id===Sr?-1:t.id===Sr?1:e.name.localeCompare(t.name,'en')))},Zr=async()=>{Br||(Br=!0,Vr.value=(e=>{const t=Number(e);return Number.isFinite(t)?Fr(t):.45})(localStorage.getItem(Dr)),Tr.value=localStorage.getItem(wr)||Sr,await Kr(),Wr(),qr())},Jr=e=>{Vr.value=Fr(e),localStorage.setItem(Dr,String(Vr.value)),$r&&($r.volume=Vr.value)},Qr=(0,o.readonly)(Ar),el=(0,o.readonly)(Vr),tl=(0,o.readonly)(Tr),al='dungeon.codex.v1',nl=()=>'undefined'!=typeof window&&'undefined'!=typeof localStorage,ol=e=>{if(!Array.isArray(e))return[];const t=new Set,a=[];for(const n of e){if('string'!=typeof n)continue;const e=n.trim();e&&!t.has(e)&&(t.add(e),a.push(e))}return a},rl=e=>{if(!Array.isArray(e))return[];const t=new Map;for(const a of e){if(!a||'object'!=typeof a)continue;const e=a,n='string'==typeof e.name?e.name.trim():'';if(!n)continue;const o='string'==typeof e.area&&e.area.trim()?e.area.trim():'未知区域',r=Math.max(1,Math.floor(Number(e.floor??1))),l=Math.max(0,Math.floor(Number(e.firstSeenAt??Date.now()))),i=Math.max(l,Math.floor(Number(e.lastSeenAt??l))),s=Math.max(1,Math.floor(Number(e.times??1))),c=`${n}@@${r}@@${o}`,d=t.get(c);d?(d.firstSeenAt=Math.min(d.firstSeenAt,l),d.lastSeenAt=Math.max(d.lastSeenAt,i),d.times=Math.max(1,d.times+s)):t.set(c,{name:n,floor:r,area:o,firstSeenAt:l,lastSeenAt:i,times:s})}return Array.from(t.values())};function ll(){if(!nl())return{version:1,cards:[],relics:[],effects:[],enemies:[]};try{const e=localStorage.getItem(al);return e?(e=>{if(!e||'object'!=typeof e)return{version:1,cards:[],relics:[],effects:[],enemies:[]};const t=e;return{version:1,cards:ol(t.cards),relics:ol(t.relics),effects:ol(t.effects),enemies:rl(t.enemies)}})(JSON.parse(e)):{version:1,cards:[],relics:[],effects:[],enemies:[]}}catch{return{version:1,cards:[],relics:[],effects:[],enemies:[]}}}function il(e){if(nl())try{localStorage.setItem(al,JSON.stringify(e))}catch{}}function sl(e){const t=e.map(e=>{return(t=e)?'string'==typeof t?t.trim():'string'==typeof t.id?t.id.trim():'':'';var t}).filter(e=>e.length>0);if(0===t.length)return;const a=ll(),n=a.cards.length,o=new Set(a.cards);for(const e of t)o.add(e);o.size!==n&&(a.cards=Array.from(o),il(a))}function cl(e){const t=e.map(e=>{return(t=e)?'string'==typeof t?t.trim():'string'==typeof t.id?t.id.trim():'':'';var t}).filter(e=>e.length>0);if(0===t.length)return;const a=ll(),n=a.relics.length,o=new Set(a.relics);for(const e of t)o.add(e);o.size!==n&&(a.relics=Array.from(o),il(a))}function dl(e){const t=e.map(e=>{return(t=e)?String(t).trim():'';var t}).filter(e=>e.length>0);if(0===t.length)return;const a=ll(),n=a.effects.length,o=new Set(a.effects);for(const e of t)o.add(e);o.size!==n&&(a.effects=Array.from(o),il(a))}const ul={第一层:['魔女的小窝','粘液之沼','发情迷雾森林','喷精泉眼','触手菌窟','肉欲食人花圃'],第二层:['禁忌图书馆','呻吟阅览室','催情墨染湖','性癖记录馆','淫乱教职工宿舍'],第三层:['欲望监狱','吸血鬼古堡','调教审判庭','触手水牢','人偶工坊'],第四层:['虚空宫殿','镜之舞厅','双子寝宫','春梦回廊','极乐宴会厅'],第五层:['交媾祭坛','圣水之海','苦修之路','神谕淫纹室','女神的产房']},ml=['第一层','第二层','第三层','第四层','第五层'],pl={第一层:1,第二层:2,第三层:3,第四层:4,第五层:5};function fl(e){for(const[t,a]of Object.entries(ul))if(a.includes(e))return t;return null}function gl(e){const t=fl(e);return t?pl[t]??1:1}function yl(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(e=>{console.warn(`Fullscreen error: ${e.message}`)})}function vl(e){return/\bleave\b/i.test(e)}function hl(e){return/\brebirth\b/i.test(e)}function bl(e,t){const a=t.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'),n=new RegExp(`(?:^|[\\r\\n]|>)\\s*<${a}(?:\\s[^>]*)?>([\\s\\S]*?)</${a}>`,'ig');let o;for(;null!==(o=n.exec(e));){const e=o[0],t=e.indexOf('>');if(t>=0){const a=e.slice(t+1).trimStart()[0];if(','===a||'，'===a)continue}return o[1].trim()}return''}function xl(e,t){for(const a of t){const t=bl(e,a);if(t)return t}return''}function _l(e){const t=/<\s*(\/?)\s*(think|thinking)\b[^>]*>/gi;let a,n='',o=0,r=0;for(;null!==(a=t.exec(e));){const l='/'===a[1],i=a.index,s=t.lastIndex;0!==o||l||(n+=e.slice(r,i)),l?o>0&&(o-=1):o+=1,r=s}return 0===o&&(n+=e.slice(r)),n.trim()}function kl(e){if(!e)return'';const t=/<\s*\/\s*(think|thinking)\b[^>]*>/i.exec(e);return t?e.slice(t.index+t[0].length).trimStart():e}function El(e){return e.replace(/<!--[\s\S]*?(?:-->|$)/g,'').trim()}function Nl(e){const t=function(e){return e.replace(/&lt;\s*tucao(?:\s+[^&]*?)?&gt;/gi,'<tucao>').replace(/&lt;\s*\/\s*tucao\s*&gt;/gi,'</tucao>').replace(/\[\s*tucao\s*]/gi,'<tucao>').replace(/\[\s*\/\s*tucao\s*]/gi,'</tucao>').replace(/<\s*吐槽(?:\s+[^>]*)?>/gi,'<tucao>').replace(/<\s*\/\s*吐槽\s*>/gi,'</tucao>')}(e),a=[],n=/<\s*tucao(?:\s+[^>]*)?>/gi,o=/<\s*\/\s*tucao\s*>/gi;let r=0;for(n.lastIndex=0;null!==n.exec(t);){const e=n.lastIndex;o.lastIndex=e;const l=o.exec(t),i=l?l.index:t.length,s=t.slice(e,i).trim();if(s.length>0&&a.push(s),r=l?o.lastIndex:t.length,n.lastIndex=r,!l)break}return a}function Cl(e){return e?e.split('\n').map(e=>e.trim()).filter(e=>e.length>0):[]}function Ml(e){const t=_l(e),a=xl(t,['maintext','maintxt','content','正文']);let n=El(a);if(!/<\s*\/?\s*(?:tucao|吐槽)\b|\[\s*\/?\s*tucao\s*]|&lt;\s*\/?\s*tucao\b/i.test(a)){const e=Nl(t);if(e.length>0){n=[n,e.map(e=>`<tucao>\n${e}\n</tucao>`).join('\n\n')].filter(e=>e&&e.trim().length>0).join('\n\n')}}const o=bl(t,'option'),r=bl(t,'sum'),l=xl(t,['UpdateVariable','update']),i=bl(l,'JSONPatch'),s=l||i,c=Cl(o),d=c.some(e=>/^E\.\s/i.test(e)),u=c.some(vl),m=c.some(hl);return{mainText:n,options:c.filter(e=>!/^E\.\s/i.test(e)&&(!vl(e)&&!hl(e))),summary:r,variableUpdate:s,jsonPatch:i,rawText:t,hasOptionE:d,hasLeave:u,hasRebirth:m}}function wl(e){return bl(_l(e),'sum')}const Dl=t('game',()=>{const e='dungeon.streaming_enabled';const t=(0,o.ref)(''),a=(0,o.ref)([]),n=(0,o.ref)(''),r=(0,o.ref)(!1),l=(0,o.ref)(''),i=(0,o.ref)(function(){try{const t=localStorage.getItem(e);return null===t||'true'===t}catch{return!0}}()),s=(0,o.ref)(null),c=(0,o.ref)(!1),d=(0,o.ref)(!1),u=(0,o.ref)(!1),m=(0,o.ref)(!1),p=(0,o.ref)(''),f=(0,o.ref)(!1),g=(0,o.ref)(''),y=(0,o.ref)({}),v=(0,o.ref)([]),h=(0,o.ref)(!1),b=(0,o.ref)(null),x=(0,o.ref)(null),k=(0,o.ref)(null);const E='以下为已经发生了的剧情：',N=e=>e.replace(/\r?\n+/g,' ').replace(/\s+/g,' ').trim(),C=e=>{if(0===e.length)return E;const t=[...e].sort((e,t)=>e.index-t.index).map(e=>`${e.index}. ${e.summary}`);return`${E}\n${t.join('\n')}`},M=async()=>{const e=(()=>{const e=new Set;try{const t=getCharWorldbookNames('current');t.primary&&e.add(t.primary);for(const a of t.additional??[])a&&e.add(a)}catch{}try{const t=getChatWorldbookName('current');t&&e.add(t)}catch{}return Array.from(e)})();for(const t of e)try{const e=await getWorldbook(t),a=e.find(e=>'自动总结条目'===e.name?.trim())??e.find(e=>0===e.uid);if(a)return{worldbookName:t,uid:a.uid}}catch{}return null},w=async(e,t)=>{const a=N(t);if(!a)return;const n=await M();if(!n)return;const o=Math.floor(e/2);if(Number.isFinite(o)&&!(o<0))try{await updateWorldbookWith(n.worldbookName,e=>e.map(e=>{if(e.uid!==n.uid)return e;const t=((e,t,a)=>{const n=new Map;for(const t of e)n.has(t.index)||n.set(t.index,t.summary);if(n.has(t)){n.set(t,a);for(const e of Array.from(n.keys()))e>t&&n.delete(e)}else n.set(t,a);return Array.from(n.entries()).map(([e,t])=>({index:e,summary:t})).sort((e,t)=>e.index-t.index)})((e=>{const t=new Map;for(const a of e.split(/\r?\n/)){const e=a.trim();if(!e)continue;if(e===E)continue;const n=/^\[编号\s*(\d+)\]\s*(.+)$/u.exec(e),o=/^(\d+)\.\s*(.+)$/u.exec(e),r=n??o;if(!r)continue;const l=Number(r[1]),i=N(r[2]??'');!Number.isFinite(l)||l<0||!i||t.has(l)||t.set(l,i)}return Array.from(t.entries()).map(([e,t])=>({index:e,summary:t})).sort((e,t)=>e.index-t.index)})(e.content??''),o,a);return{...e,content:C(t)}}),{render:'debounced'})}catch(e){console.warn('[GameStore] updateAutoSummaryChronicle failed:',e)}},D=async(e=15)=>{try{const t=getLastMessageId();if(t<0)return;const a=Math.max(1,Math.floor(e)),n=Math.max(0,t-a+1),o=getChatMessages(`0-${t}`,{hide_state:'all'}),r=[];for(const e of o){const t=e.message_id<n;Boolean(e.is_hidden)!==t&&r.push({message_id:e.message_id,is_hidden:t})}if(0===r.length)return;await setChatMessages(r,{refresh:'none'})}catch(e){console.warn('[GameStore] ensureLatestMessageWindow failed:',e)}};function S(e){if(!e||'object'!=typeof e)return e;const t=_.get(e,'stat_data');if(!t||'object'!=typeof t)return e;const a='string'==typeof t._当前区域?t._当前区域.trim():'';return a?(t._楼层数=gl(a),e):e}function A(){const e=getLastMessageId();if(e<0)return;const o=getChatMessages(`0-${e}`,{role:'assistant'});if(o.length>0){const e=o[o.length-1].message;t.value=function(e){const t=_l(e),a=xl(t,['maintext','maintxt','content','正文']);let n=El(a);if(!/<\s*\/?\s*(?:tucao|吐槽)\b|\[\s*\/?\s*tucao\s*]|&lt;\s*\/?\s*tucao\b/i.test(a)){const e=Nl(t);e.length>0&&(n=[n,e.map(e=>`<tucao>\n${e}\n</tucao>`).join('\n\n')].filter(e=>e&&e.trim().length>0).join('\n\n'))}return n}(e),a.value=Cl(bl(_l(e),'option')).filter(e=>!/^E\.\s/i.test(e)&&!vl(e)&&!hl(e)),n.value=wl(e),d.value=function(e){return Cl(bl(_l(e),'option')).some(e=>/^E\.\s/i.test(e))}(e),u.value=function(e){return Cl(bl(_l(e),'option')).some(vl)}(e),m.value=function(e){return Cl(bl(_l(e),'option')).some(hl)}(e),p.value=function(e){return xl(_l(e),['UpdateVariable','update'])}(e)}}function V(){try{const e=getLastMessageId();if(e<0)return;const t=Mvu.getMvuData({type:'message',message_id:e}),a=_.get(t,'stat_data');a&&'object'==typeof a&&(S(t),y.value=_.get(t,'stat_data'),console.info('[GameStore] stat_data loaded from message',e))}catch(e){console.warn('[GameStore] Failed to load stat_data:',e)}}function T(e){t.value=e.mainText,a.value=e.options,n.value=e.summary,d.value=e.hasOptionE,u.value=e.hasLeave,m.value=e.hasRebirth,p.value=e.variableUpdate}function B(e){try{if(!e)return;S(e);const t=_.get(e,'stat_data');t&&'object'==typeof t&&(y.value=t,console.info('[GameStore] Local stat_data refreshed:',JSON.stringify(t.$统计)))}catch(e){console.warn('[GameStore] refreshLocalStatData error:',e)}}return{mainText:t,options:a,currentSummary:n,isGenerating:r,useStreaming:i,streamingText:l,error:s,isInitialized:c,statData:y,saveEntries:v,isSaveLoadOpen:h,isEditing:f,editingText:g,hasOptionE:d,hasLeave:u,hasRebirth:m,variableUpdateText:p,initialize:async function(){try{await waitGlobalInitialized('Mvu'),console.info('[GameStore] MVU initialized');getLastMessageId()>=0&&(A(),V(),await D()),c.value=!0,console.info('[GameStore] Initialized successfully')}catch(e){const t=e instanceof Error?e.message:String(e);console.error('[GameStore] Init error:',t),s.value=`初始化失败: ${t}`}},sendAction:async function(e){if(!r.value&&e.trim()){s.value=null,r.value=!0,l.value='';try{const t=Mvu.getMvuData({type:'message',message_id:getLastMessageId()}),a=b.value,n=x.value,o=k.value,r=function(e,t){const a=_.cloneDeep(e??{});if(!t)return a;a.stat_data&&'object'==typeof a.stat_data||(a.stat_data={});const n=a.stat_data;void 0!==t.area&&(n._当前区域=t.area),n._当前房间类型=t.roomType,void 0!==t.enemyName&&(n._对手名称=t.enemyName),n.$统计&&'object'==typeof n.$统计||(n.$统计={});const o=n.$统计;if(t.resetRoomCounter&&(o.当前层已过房间=0),t.incrementKeys)for(const e of t.incrementKeys)o[e]=(Number(o[e])||0)+1;const r=[...Array.isArray(n.$路径)?n.$路径.filter(e=>'string'==typeof e):Array.isArray(o.$路径)?o.$路径.filter(e=>'string'==typeof e):[]];if(t.resetPath&&(r.length=0),'string'==typeof t.appendPathLabel){const e=t.appendPathLabel.trim();e&&r.push(e)}return n.$路径=r,Object.prototype.hasOwnProperty.call(o,'$路径')&&delete o.$路径,S(a)}(t,a),s=function(e,t){const a=_.cloneDeep(e??{});a.stat_data&&'object'==typeof a.stat_data||(a.stat_data={});const n=a.stat_data;if(!t)return a;if(Number.isFinite(t.hp)&&(n._血量=Math.max(0,Math.floor(Number(t.hp)))),t.addDefeatMark){const e=n._负面状态,t=Array.isArray(e)?e.filter(e=>'string'==typeof e):[];t.includes('[败北]')||t.push('[败北]'),n._负面状态=t}if(Array.isArray(t.negativeStatusesAdd)&&t.negativeStatusesAdd.length>0){const e=n._负面状态,a=Array.isArray(e)?e.filter(e=>'string'==typeof e):[];for(const e of t.negativeStatusesAdd){if('string'!=typeof e)continue;const t=e.trim();t&&(a.includes(t)||a.push(t))}n._负面状态=a}if(Number.isFinite(t.goldDelta)){const e=Math.max(0,Math.floor(Number(n._金币??0))),a=Math.floor(Number(t.goldDelta));n._金币=Math.max(0,e+a)}return a}(r,n),c=function(e,t){const a=_.cloneDeep(e??{});a.stat_data&&'object'==typeof a.stat_data||(a.stat_data={});const n=a.stat_data;return t&&t.fields&&'object'==typeof t.fields?(Object.assign(n,_.cloneDeep(t.fields)),S(a)):a}(s,o);S(c),console.info('[GameStore] Creating user message:',e),await createChatMessages([{role:'user',message:e,data:c}],{refresh:'none'}),b.value=null,x.value=null,k.value=null;const d=eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY,(e,t)=>{l.value=kl(e)});console.info('[GameStore] Generating LLM response...');const u=await generate({user_input:e,should_stream:i.value});console.info('[GameStore] LLM response received, length:',u.length),d.stop(),l.value='';const m=Ml(u);T(m);let p=await Mvu.parseMessage(u,_.cloneDeep(c));p?!p.stat_data&&c?.stat_data&&(p.stat_data=_.cloneDeep(c.stat_data)):p=_.cloneDeep(c),S(p),p&&(delete p.display_data,delete p.delta_data),console.info('[GameStore] Creating assistant message with MVU data'),await createChatMessages([{role:'assistant',message:u,data:p}],{refresh:'none'}),B(p);const f=getLastMessageId();await w(f,m.summary),await D(),console.info('[GameStore] Action completed successfully')}catch(e){const t=e instanceof Error?e.message:String(e);console.error('[GameStore] sendAction error:',t),s.value=`生成失败: ${t}`}finally{r.value=!1}}},setUseStreaming:function(t){const a=Boolean(t);i.value=a,a||(l.value=''),function(t){try{localStorage.setItem(e,String(t))}catch{}}(a)},setPendingPortalChanges:function(e){b.value=e},setPendingCombatMvuChanges:function(e){x.value=e?_.cloneDeep(e):null},setPendingStatDataChanges:function(e){k.value=e?{fields:_.cloneDeep(e)}:null},mergePendingStatDataChanges:function(e){if(!e||'object'!=typeof e)return;const t=k.value?.fields??{};k.value={fields:{..._.cloneDeep(t),..._.cloneDeep(e)}}},loadStatData:V,loadSaveEntries:function(){const e=[],t=getLastMessageId();if(t<0)return void(v.value=e);const a=getChatMessages(`0-${t}`,{role:'assistant'});for(const t of a){const a=wl(t.message);a&&e.push({messageId:t.message_id,summary:a})}v.value=e},rebuildAutoSummaryChronicleFromMessages:async()=>{const e=await M();if(!e)return 0;const t=getLastMessageId(),a=t>=0?getChatMessages(`0-${t}`,{role:'assistant',hide_state:'all'}):[],n=new Map;for(const e of a){const t=N(wl(e.message??''));if(!t)continue;const a=Math.floor(e.message_id/2);!Number.isFinite(a)||a<0||n.set(a,t)}const o=Array.from(n.entries()).map(([e,t])=>({index:e,summary:t})).sort((e,t)=>e.index-t.index);try{return await updateWorldbookWith(e.worldbookName,t=>t.map(t=>t.uid!==e.uid?t:{...t,content:C(o)}),{render:'debounced'}),o.length}catch(e){return console.warn('[GameStore] rebuildAutoSummaryChronicleFromMessages failed:',e),-1}},rollbackTo:async function(e){try{const t=getLastMessageId();if(e>=t)return void console.warn('[GameStore] Cannot rollback: target is current or future');const a=[];for(let n=e+1;n<=t;n++)a.push(n);console.info(`[GameStore] Rolling back: deleting messages ${e+1} to ${t}`),await deleteChatMessages(a,{refresh:'none'}),A();try{const t=Mvu.getMvuData({type:'message',message_id:e}),a=_.get(t,'stat_data');a&&'object'==typeof a&&(y.value=a,console.info('[GameStore] Rollback: loaded stat_data from message',e))}catch(e){console.warn('[GameStore] Rollback: failed to load stat_data from target, falling back',e),V()}await D(),h.value=!1,toastr.success('回档成功！'),console.info('[GameStore] Rollback completed')}catch(e){const t=e instanceof Error?e.message:String(e);console.error('[GameStore] Rollback error:',t),s.value=`回档失败: ${t}`}},rerollCurrent:async function(){if(!r.value)try{const e=getLastMessageId();if(e<1)return void console.warn('[GameStore] Cannot reroll: not enough messages');r.value=!0,s.value=null,l.value='';const t=getChatMessages(`0-${e}`),a=t[t.length-1],n=[...t].reverse().find(e=>'user'===e.role);if(!n)return void console.warn('[GameStore] Cannot reroll: no user message found');const o=n.message??'';if('assistant'===a?.role)console.info('[GameStore] Reroll: deleting assistant message',e),await deleteChatMessages([e],{refresh:'none'});else{if('user'!==a?.role)return void console.warn('[GameStore] Cannot reroll: latest message is neither user nor assistant');console.info('[GameStore] Reroll: latest message is user, keep it and regenerate assistant')}const c=Mvu.getMvuData({type:'message',message_id:getLastMessageId()}),d=eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY,e=>{l.value=kl(e)});console.info('[GameStore] Reroll: regenerating...');const u=await generate({user_input:o,should_stream:i.value});d.stop(),l.value='';const m=Ml(u);T(m);const p=await Mvu.parseMessage(u,_.cloneDeep(c));S(p),await createChatMessages([{role:'assistant',message:u,data:p}],{refresh:'none'}),B(p),toastr.success('重新生成完成！');const f=getLastMessageId();await w(f,m.summary),await D(),console.info('[GameStore] Reroll completed')}catch(e){const t=e instanceof Error?e.message:String(e);console.error('[GameStore] Reroll error:',t),s.value=`重新生成失败: ${t}`}finally{r.value=!1}},startEdit:function(){if(f.value||r.value)return;const e=getLastMessageId();if(e<0)return;const t=getChatMessages(`${e}-${e}`);0!==t.length&&(g.value=t[0].message,f.value=!0)},saveEdit:async function(){if(f.value)try{const e=getLastMessageId();if(e<0)return;const t=Mvu.getMvuData({type:'message',message_id:e}),a=e>0?Mvu.getMvuData({type:'message',message_id:e-1}):Mvu.getMvuData({type:'message',message_id:0});let n=await Mvu.parseMessage(g.value,_.cloneDeep(a));n&&t?(!n.stat_data&&t.stat_data&&(n.stat_data=t.stat_data),!n.display_data&&t.display_data&&(n.display_data=t.display_data)):!n&&t&&(n=t),S(n),await setChatMessages([{message_id:e,message:g.value}],{refresh:'none'}),n&&await Mvu.replaceMvuData(n,{type:'message',message_id:e});T(Ml(g.value)),B(n),f.value=!1,g.value='',toastr.success('编辑已保存！'),console.info('[GameStore] Edit saved')}catch(e){const t=e instanceof Error?e.message:String(e);console.error('[GameStore] Save edit error:',t),s.value=`编辑保存失败: ${t}`}},cancelEdit:function(){f.value=!1,g.value=''},updateStatDataFields:async function(e){try{const t=getLastMessageId();if(t<0)return s.value='当前没有可写入的楼层。',!1;const a=Mvu.getMvuData({type:'message',message_id:t}),n=_.cloneDeep(a??{});return n.stat_data&&'object'==typeof n.stat_data||(n.stat_data={}),Object.assign(n.stat_data,_.cloneDeep(e)),S(n),await Mvu.replaceMvuData(n,{type:'message',message_id:t}),B(n),!0}catch(e){const t=e instanceof Error?e.message:String(e);return console.error('[GameStore] updateStatDataFields error:',t),s.value=`写入变量失败: ${t}`,!1}}}}),Sl=m('shield-check',[['path',{d:'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',key:'oel41y'}],['path',{d:'m9 12 2 2 4-4',key:'dzmm74'}]]),Al=m('shield',[['path',{d:'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',key:'oel41y'}]]),Vl=m('link-2',[['path',{d:'M9 17H7A5 5 0 0 1 7 7h2',key:'8i5ue5'}],['path',{d:'M15 7h2a5 5 0 1 1 0 10h-2',key:'1b9ql8'}],['line',{x1:'8',x2:'16',y1:'12',y2:'12',key:'1jonct'}]]),Tl=m('skull',[['path',{d:'m12.5 17-.5-1-.5 1h1z',key:'3me087'}],['path',{d:'M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z',key:'1o5pge'}],['circle',{cx:'15',cy:'12',r:'1',key:'1tmaij'}],['circle',{cx:'9',cy:'12',r:'1',key:'1vctgf'}]]),Bl=m('bug',[['path',{d:'M12 20v-9',key:'1qisl0'}],['path',{d:'M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z',key:'uouzyp'}],['path',{d:'M14.12 3.88 16 2',key:'qol33r'}],['path',{d:'M21 21a4 4 0 0 0-3.81-4',key:'1b0z45'}],['path',{d:'M21 5a4 4 0 0 1-3.55 3.97',key:'5cxbf6'}],['path',{d:'M22 13h-4',key:'1jl80f'}],['path',{d:'M3 21a4 4 0 0 1 3.81-4',key:'1fjd4g'}],['path',{d:'M3 5a4 4 0 0 0 3.55 3.97',key:'1d7oge'}],['path',{d:'M6 13H2',key:'82j7cp'}],['path',{d:'m8 2 1.88 1.88',key:'fmnt4t'}],['path',{d:'M9 7.13V6a3 3 0 1 1 6 0v1.13',key:'1vgav8'}]]),$l=m('droplet',[['path',{d:'M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z',key:'c7niix'}]]),Ol=m('flame',[['path',{d:'M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4',key:'1slcih'}]]),Il=m('triangle-alert',[['path',{d:'m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3',key:'wmoenq'}],['path',{d:'M12 9v4',key:'juzpu7'}],['path',{d:'M12 17h.01',key:'p32p05'}]]),Ll=m('sword',[['path',{d:'m11 19-6-6',key:'s7kpr'}],['path',{d:'m5 21-2-2',key:'1kw20b'}],['path',{d:'m8 16-4 4',key:'1oqv8h'}],['path',{d:'M9.5 17.5 21 6V3h-3L6.5 14.5',key:'pkxemp'}]]),Rl=m('heart',[['path',{d:'M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5',key:'mvr1a0'}]]),Pl=m('sparkles',[['path',{d:'M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z',key:'1s2grr'}],['path',{d:'M20 2v4',key:'1rf3ol'}],['path',{d:'M22 4h-4',key:'gwowj6'}],['circle',{cx:'4',cy:'20',r:'2',key:'6kqj1y'}]]),Hl=m('ban',[['path',{d:'M4.929 4.929 19.07 19.071',key:'196cmz'}],['circle',{cx:'12',cy:'12',r:'10',key:'1mglay'}]]),Ul=m('zap',[['path',{d:'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z',key:'1xq2db'}]]),zl=m('snowflake',[['path',{d:'m10 20-1.25-2.5L6 18',key:'18frcb'}],['path',{d:'M10 4 8.75 6.5 6 6',key:'7mghy3'}],['path',{d:'m14 20 1.25-2.5L18 18',key:'1chtki'}],['path',{d:'m14 4 1.25 2.5L18 6',key:'1b4wsy'}],['path',{d:'m17 21-3-6h-4',key:'15hhxa'}],['path',{d:'m17 3-3 6 1.5 3',key:'11697g'}],['path',{d:'M2 12h6.5L10 9',key:'kv9z4n'}],['path',{d:'m20 10-1.5 2 1.5 2',key:'1swlpi'}],['path',{d:'M22 12h-6.5L14 15',key:'1mxi28'}],['path',{d:'m4 10 1.5 2L4 14',key:'k9enpj'}],['path',{d:'m7 21 3-6-1.5-3',key:'j8hb9u'}],['path',{d:'m7 3 3 6h4',key:'1otusx'}]]),Gl=m('waves',[['path',{d:'M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1',key:'knzxuh'}],['path',{d:'M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1',key:'2jd2cc'}],['path',{d:'M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1',key:'rd2r6e'}]]),Fl=m('bone',[['path',{d:'M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z',key:'w610uw'}]]),jl=m('layers',[['path',{d:'M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z',key:'zw3jo'}],['path',{d:'M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12',key:'1wduqc'}],['path',{d:'M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17',key:'kqbvx6'}]]),Yl=m('battery',[['path',{d:'M 22 14 L 22 10',key:'nqc4tb'}],['rect',{x:'2',y:'6',width:'16',height:'12',rx:'2',key:'13zb55'}]]),Wl=m('eye',[['path',{d:'M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0',key:'1nclc0'}],['circle',{cx:'12',cy:'12',r:'3',key:'1v7zrd'}]]),Xl=m('eye-off',[['path',{d:'M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49',key:'ct8e1f'}],['path',{d:'M14.084 14.158a3 3 0 0 1-4.242-4.242',key:'151rxh'}],['path',{d:'M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143',key:'13bj9a'}],['path',{d:'m2 2 20 20',key:'1ooewy'}]]),ql=m('brain',[['path',{d:'M12 18V5',key:'adv99a'}],['path',{d:'M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4',key:'1e3is1'}],['path',{d:'M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5',key:'1gqd8o'}],['path',{d:'M17.997 5.125a4 4 0 0 1 2.526 5.77',key:'iwvgf7'}],['path',{d:'M18 18a4 4 0 0 0 2-7.464',key:'efp6ie'}],['path',{d:'M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517',key:'1gq6am'}],['path',{d:'M6 18a4 4 0 0 1-2-7.464',key:'k1g0md'}],['path',{d:'M6.003 5.125a4 4 0 0 0-2.526 5.77',key:'q97ue3'}]]),Kl=m('leaf',[['path',{d:'M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z',key:'nnexq3'}],['path',{d:'M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12',key:'mt58a7'}]]),Zl=m('settings-2',[['path',{d:'M14 17H5',key:'gfn3mx'}],['path',{d:'M19 7h-9',key:'6i9tg'}],['circle',{cx:'17',cy:'17',r:'3',key:'18b49y'}],['circle',{cx:'7',cy:'7',r:'3',key:'dfmy0x'}]]),Jl=m('trash-2',[['path',{d:'M10 11v6',key:'nco0om'}],['path',{d:'M14 11v6',key:'outv1u'}],['path',{d:'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6',key:'miytrc'}],['path',{d:'M3 6h18',key:'d0wm0j'}],['path',{d:'M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2',key:'e791ji'}]]),Ql=m('x',[['path',{d:'M18 6 6 18',key:'1bl5f8'}],['path',{d:'m6 6 12 12',key:'d8bk6v'}]]);function ei(e){const{baseDice:t,card:a,relicModifiers:n}=e;let o=t*a.calculation.multiplier+a.calculation.addition;return o*=n.globalMultiplier,o+=n.globalAddition,Math.max(0,Math.floor(o))}function ti(e){const t=[];let a=function(e,t){const a=t.damageLogic;switch(a.mode){case'relative':return e*(a.scale??1)+(a.scaleAddition??0);case'fixed':return a.value??0;case'mixed':return(a.baseValue??0)+e*(a.scale??1)+(a.scaleAddition??0);default:return 0}}(e.finalPoint,e.card);t.push(`原始伤害: ${Math.floor(a)}`);const n=e.isTrueDamage??!1,o=e.attackerEffects.find(e=>e.type===A.COLD)?.stacks??0;o>0&&(a-=o,t.push(`[寒冷] -${o}`));const r=e.attackerEffects.find(e=>e.type===A.DAMAGE_BOOST)?.stacks??0;r>0&&(a+=r,t.push(`[增伤] +${r}`));const l=e.defenderEffects.some(e=>e.type===A.NON_ENTITY&&e.stacks>0),i=e.defenderEffects.some(e=>e.type===A.ILLUSORY_BODY&&e.stacks>0);if(l&&(e.card.type===S.PHYSICAL?(a*=.5,t.push('[非实体] 物理伤害 x0.5')):e.card.type===S.MAGIC&&(a*=1.5,t.push('[非实体] 魔法伤害 x1.5'))),i&&e.card.type===S.PHYSICAL&&(a*=.5,t.push('[虚幻之躯] 物理伤害 x0.5')),n)return t.push('真实伤害，无视防御。'),{damage:Math.max(0,Math.floor(a)),isTrueDamage:!0,logs:t};const s=e.defenderEffects.find(e=>e.type===A.VULNERABLE)?.stacks??0;s>0&&(a+=s,t.push(`[易伤] +${s}`));const c=e.defenderEffects.find(e=>e.type===A.STURDY)?.stacks??0;c>0&&(a-=c,t.push(`[坚固] -${c}`)),e.defenderEffects.some(e=>e.type===A.BARRIER&&e.stacks>0)&&t.push('[结界] 对方有结界，本次非真实伤害将被抵挡。');const d=e.defenderEffects.find(e=>e.type===A.ARMOR)?.stacks??0;return d>0&&t.push(`[护甲] 对方有 ${d} 层护甲`),{damage:Math.max(0,Math.floor(a)),isTrueDamage:!1,logs:t}}function ai(e){const t=[];if(e.hp>0)return{revived:!1,logs:t};if(e.maxHp<=0)return{revived:!1,logs:t};if(Fa(e,A.SWARM)>0)return Wa(e,A.SWARM,1),e.hp=e.maxHp,t.push(`[群集] 触发复苏，消耗1层并恢复至${e.maxHp}生命。`),{revived:!0,logs:t};if(Fa(e,A.BLOOD_COCOON)>0){Wa(e,A.BLOOD_COCOON,1);const a=Math.max(1,Math.floor(.5*e.maxHp));return e.hp=a,t.push(`[血茧] 触发，消耗1层并恢复至${a}点生命。`),{revived:!0,logs:t}}return Fa(e,A.INDOMITABLE)>0?(Wa(e,A.INDOMITABLE,1),e.hp=1,t.push('[不屈] 触发，消耗1层并恢复至1点生命。'),{revived:!0,logs:t}):{revived:!1,logs:t}}function ni(e,t){const a=[],n=za(e,A.COLD);if(!n||n.stacks<=0)return a;const o=n.stacks;return n.stacks=Math.floor(n.stacks/2),n.stacks<=0?(Ya(e,A.COLD),a.push(`[寒冷] ${o} -> 0（已消失）`)):a.push(`[寒冷] ${o} -> ${n.stacks}`),a}const oi=m('circle-question-mark',[['circle',{cx:'12',cy:'12',r:'10',key:'1mglay'}],['path',{d:'M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3',key:'1u773s'}],['path',{d:'M12 17h.01',key:'p32p05'}]]),ri=m('refresh-ccw',[['path',{d:'M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8',key:'14sxne'}],['path',{d:'M3 3v5h5',key:'1xhq8a'}],['path',{d:'M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16',key:'1hlbsb'}],['path',{d:'M16 16h5v5',key:'ccwih5'}]]),li=m('footprints',[['path',{d:'M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z',key:'1dudjm'}],['path',{d:'M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z',key:'l2t8xc'}],['path',{d:'M16 17h4',key:'1dejxt'}],['path',{d:'M4 13h4',key:'1bwh8b'}]]),ii={class:'absolute top-0 left-0 w-full p-2 flex justify-between items-start z-10'},si={class:'bg-black/60 p-1 rounded-full border border-white/10'},ci={class:'absolute top-8 left-2 right-2 h-24 bg-black/50 rounded-lg border border-white/5 flex items-center justify-center overflow-hidden'},di={class:'absolute font-heading text-white/20 text-4xl select-none'},ui={class:'absolute bottom-0 left-0 w-full p-3 z-10 flex flex-col justify-end'},mi={class:'text-dungeon-paper font-heading font-bold text-sm tracking-wide mb-1 text-center drop-shadow-md'},pi={class:'bg-[#0d0d10]/85 border border-white/10 p-2 rounded-lg text-[10px] text-gray-300 font-ui leading-tight min-h-[50px] flex items-center justify-center text-center'},fi={class:'mt-1 text-center text-white/50 font-bold text-[10px] font-ui tracking-wider'},gi=(0,o.defineComponent)({__name:'DungeonCard',props:{card:{},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},faceDown:{type:Boolean,default:!1},isEnemy:{type:Boolean,default:!1},className:{default:''},maskLevel:{default:'none'}},emits:['click'],setup(e){const t=e,a=(0,o.computed)(()=>{if('full'===t.maskLevel)return'border-gray-600 bg-gray-900/40';switch(t.card.type){case S.PHYSICAL:return'border-red-900 bg-red-950/30';case S.MAGIC:return'border-purple-900 bg-purple-950/30';case S.FUNCTION:return'border-yellow-800 bg-yellow-950/30';case S.DODGE:return'border-emerald-900 bg-emerald-950/30';case S.ACTIVE:return'border-zinc-200/80 bg-zinc-100/15';case S.CURSE:return'border-black bg-black/70';default:return'border-gray-700 bg-gray-800'}}),n=(0,o.computed)(()=>{if('full'===t.maskLevel)return oi;switch(t.card.type){case S.PHYSICAL:return Ll;case S.MAGIC:return Pl;case S.FUNCTION:return ri;case S.DODGE:return li;case S.ACTIVE:return Ul;case S.CURSE:return Tl;default:return Ll}}),r=(0,o.computed)(()=>{if('full'===t.maskLevel)return'text-gray-400';switch(t.card.type){case S.PHYSICAL:return'text-red-400';case S.MAGIC:return'text-purple-400';case S.FUNCTION:return'text-yellow-400';case S.DODGE:return'text-emerald-400';case S.ACTIVE:return'text-zinc-200';case S.CURSE:return'text-zinc-300';default:return'text-gray-400'}}),l=((0,o.computed)(()=>{const e=t.card.damageLogic;switch(e.mode){case'relative':return`倍率 ${e.scale??1}x`;case'fixed':return e.value?`固伤 ${e.value}`:'特殊';case'mixed':return`${e.baseValue??0}+${e.scale??1}x`;default:return'特殊'}}),(0,o.computed)(()=>{if('full'===t.maskLevel)return'bg-gradient-to-tr from-gray-700 to-black';switch(t.card.type){case S.PHYSICAL:return'bg-gradient-to-tr from-red-900 to-black';case S.MAGIC:return'bg-gradient-to-tr from-purple-900 to-black';case S.FUNCTION:return'bg-gradient-to-tr from-yellow-900 to-black';case S.DODGE:return'bg-gradient-to-tr from-emerald-900 to-black';case S.ACTIVE:return'bg-gradient-to-tr from-zinc-300/70 to-zinc-900';case S.CURSE:return'bg-gradient-to-tr from-zinc-900 to-black';default:return'bg-gradient-to-tr from-gray-800 to-black'}})),i=(0,o.computed)(()=>'none'===t.maskLevel?t.card.name:'???'),s=(0,o.computed)(()=>'none'===t.maskLevel?t.card.description:'???'),c=(0,o.computed)(()=>'full'===t.maskLevel?'?':t.card.type),d=(0,o.computed)(()=>i.value[0]??'?'),u=(0,o.computed)(()=>'full'!==t.maskLevel&&(t.card.type===S.MAGIC||t.card.type===S.ACTIVE)&&t.card.manaCost>0),m=(0,o.computed)(()=>'稀有'===t.card.rarity);return(t,p)=>((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createCommentVNode)(' Face Down Card '),e.faceDown?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['w-40 h-60 rounded-xl bg-[#252030] border-2 border-[#3a3040] shadow-xl relative overflow-hidden group transition-transform duration-300 hover:-translate-y-2',e.className])},[...p[1]||(p[1]=[(0,o.createElementVNode)('div',{class:'absolute inset-2 flex items-center justify-center border border-[#4a2e1a] opacity-50'},[(0,o.createElementVNode)('div',{class:'size-16 rounded-full border-2 border-[#5c3a21] opacity-30'})],-1)])],2)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createCommentVNode)(' Face Up Card '),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['relative w-40 h-60 rounded-xl shadow-2xl transition-all duration-300 transform bg-[#16121e] border-2 cursor-pointer',[(0,o.unref)(a),(0,o.unref)(m)?'rare-card-glow':'',e.selected?'ring-4 ring-dungeon-gold -translate-y-6 scale-105 z-20':'hover:-translate-y-2 hover:z-10',e.disabled?'opacity-80 !cursor-default':'',e.className]]),onClick:p[0]||(p[0]=a=>!e.disabled&&t.$emit('click'))},[(0,o.createCommentVNode)(' Header '),(0,o.createElementVNode)('div',ii,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['w-6 h-6 rounded-full bg-purple-700/80 text-white font-bold text-[10px] flex items-center justify-center border border-purple-400/40 shadow-md',(0,o.unref)(u)?'':'opacity-0'])},(0,o.toDisplayString)(e.card.manaCost),3),(0,o.createElementVNode)('div',si,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(n)),{class:(0,o.normalizeClass)(['size-5',(0,o.unref)(r)])},null,8,['class']))])]),(0,o.createCommentVNode)(' Image Placeholder '),(0,o.createElementVNode)('div',ci,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['size-full opacity-60',(0,o.unref)(l)])},null,2),(0,o.createElementVNode)('span',di,(0,o.toDisplayString)((0,o.unref)(d)),1)]),(0,o.createCommentVNode)(' Content '),(0,o.createElementVNode)('div',ui,[(0,o.createElementVNode)('h3',mi,(0,o.toDisplayString)((0,o.unref)(i)),1),(0,o.createElementVNode)('div',pi,(0,o.toDisplayString)((0,o.unref)(s)),1),(0,o.createElementVNode)('div',fi,(0,o.toDisplayString)((0,o.unref)(c)),1)])],2)],2112))],2112))}});var yi=function e(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return a[t](r,r.exports,e),r.exports}(313);const vi=(0,yi.A)(gi,[['__scopeId','data-v-0b124fb2']]),hi=vi,bi={viewBox:'0 0 100 100',class:'absolute inset-0 size-full',style:{filter:'drop-shadow(0 5px 5px rgba(0, 0, 0, 0.6))'}},xi=['fill','stroke'],_i=['stroke'],ki=(0,o.defineComponent)({__name:'DungeonDice',props:{value:{},rolling:{type:Boolean},color:{default:'gold'},size:{default:'md'},className:{default:''},rollingMin:{default:1},rollingMax:{default:6},numberClass:{default:''}},setup(e){const t=e,a=(0,o.ref)(1);let n=null;const r=`grad-${t.color}-${Math.random().toString(36).substr(2,9)}`,l=(0,o.computed)(()=>({sm:'w-12 h-12',md:'w-20 h-20',lg:'w-32 h-32'}[t.size])),i=(0,o.computed)(()=>({sm:'text-xl',md:'text-3xl',lg:'text-6xl'}[t.size])),s=(0,o.computed)(()=>'gold'===t.color?'#4d331f':'#2a0505'),c=(0,o.computed)(()=>'gold'===t.color?'text-[#2c1a0e]':'text-[#2c0e0e]'),d=(0,o.computed)(()=>t.numberClass||c.value),u=()=>{const{min:e,max:a}=(()=>{const e=Math.floor(Math.min(t.rollingMin,t.rollingMax)),a=Math.floor(Math.max(t.rollingMin,t.rollingMax));return{min:Number.isFinite(e)?e:1,max:Number.isFinite(a)?a:6}})();return a<=e?e:Math.floor(Math.random()*(a-e+1))+e};return(0,o.watch)(()=>[t.rolling,t.value,t.rollingMin,t.rollingMax],([e])=>{n&&(clearInterval(n),n=null),e?n=setInterval(()=>{a.value=u()},80):a.value=t.value},{immediate:!0}),(0,o.onUnmounted)(()=>{n&&clearInterval(n)}),(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['relative flex items-center justify-center drop-shadow-xl transition-all duration-300',[e.rolling?'animate-bounce':'',e.className]])},[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['relative flex items-center justify-center',(0,o.unref)(l)])},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',bi,[(0,o.createElementVNode)('defs',null,[(0,o.createElementVNode)('linearGradient',{id:r,x1:'0%',y1:'0%',x2:'100%',y2:'100%'},['gold'===e.color?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[n[0]||(n[0]=(0,o.createElementVNode)('stop',{offset:'0%','stop-color':'#f9e6a0'},null,-1)),n[1]||(n[1]=(0,o.createElementVNode)('stop',{offset:'50%','stop-color':'#d4af37'},null,-1)),n[2]||(n[2]=(0,o.createElementVNode)('stop',{offset:'100%','stop-color':'#8a7122'},null,-1))],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[n[3]||(n[3]=(0,o.createElementVNode)('stop',{offset:'0%','stop-color':'#fca5a5'},null,-1)),n[4]||(n[4]=(0,o.createElementVNode)('stop',{offset:'50%','stop-color':'#ef4444'},null,-1)),n[5]||(n[5]=(0,o.createElementVNode)('stop',{offset:'100%','stop-color':'#7f1d1d'},null,-1))],64))])]),(0,o.createElementVNode)('polygon',{points:'50 2, 93 25, 93 75, 50 98, 7 75, 7 25',fill:`url(#${r})`,stroke:(0,o.unref)(s),'stroke-width':'3'},null,8,xi),(0,o.createElementVNode)('polygon',{points:'50 8, 87 29, 87 71, 50 92, 13 71, 13 29',fill:'none',stroke:(0,o.unref)(s),'stroke-width':'1',opacity:'0.4'},null,8,_i)])),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['relative z-10 font-heading font-bold drop-shadow-sm',[(0,o.unref)(d),(0,o.unref)(i)]])},(0,o.toDisplayString)((0,o.unref)(a)),3)],2)],2))}}),Ei=ki,Ni=Ei,Ci={class:'absolute inset-0 z-0'},Mi=['src'],wi={class:'absolute top-4 left-4 z-50 pointer-events-auto flex flex-col gap-2 scale-[1.1] origin-top-left'},Di={key:0,class:'mt-1 w-52 bg-[#1a1520]/95 border border-white/10 rounded-xl p-3 text-xs text-dungeon-paper shadow-xl backdrop-blur-md'},Si={class:'flex flex-col gap-3'},Ai={class:'flex items-center gap-2 cursor-pointer select-none'},Vi={class:'absolute top-4 left-1/2 -translate-x-1/2 z-40 pointer-events-none scale-[1.1] origin-top'},Ti={class:'flex flex-col items-center'},Bi={class:'text-lg font-heading font-bold text-white/90'},$i={class:'h-1.5 rounded-full border border-amber-400/35 bg-black/45 overflow-hidden'},Oi={key:0,class:'absolute left-1/2 top-full mt-1.5 -translate-x-1/2 w-64 rounded-md border border-amber-300/35 bg-black/80 px-2 py-1 text-[10px] leading-relaxed text-amber-100 text-left shadow-lg'},Ii={key:0,class:'mt-2 w-80 space-y-1'},Li={class:'text-sm text-white/80 [text-shadow:0_1px_2px_rgba(0,0,0,0.9)]'},Ri={class:'mt-0.5 space-y-0.5'},Pi={class:'absolute inset-0 z-10 pointer-events-none'},Hi={class:'absolute top-[3%] right-[2%] md:top-[5%] md:right-[3%] w-96 h-[32rem] flex flex-col items-center justify-end group transition-transform duration-1000 scale-[1.1] origin-top-right'},Ui={key:0,class:'absolute -left-48 top-8'},zi={class:'relative'},Gi={class:'rotate-[-3deg] shadow-[0_0_20px_rgba(200,120,0,0.15)]'},Fi={class:'relative w-full h-full'},ji={class:'absolute bottom-0 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden'},Yi=['src'],Wi={class:'relative overflow-visible mt-0 w-72 scale-[1.2] origin-top bg-[#18141e]/90 border border-white/8 p-3 rounded-xl shadow-lg backdrop-blur-sm z-10 pointer-events-auto'},Xi={class:'flex justify-between text-sm text-white/90 font-bold mb-1.5'},qi={class:'pointer-events-none absolute inset-0 z-30 overflow-visible'},Ki={key:0,class:'flex items-center gap-3 mb-1'},Zi=['aria-label'],Ji={class:'text-[10px] text-yellow-300 font-bold'},Qi=['aria-label'],es={class:'text-[10px] text-green-300 font-bold'},ts=['aria-label'],as={class:'text-[10px] text-rose-300 font-bold'},ns={class:'flex items-center gap-2 mb-1.5'},os={class:'relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20'},rs={class:'text-[10px] text-white/70 w-14 text-right'},ls={class:'flex items-center gap-2 mb-1.5'},is={class:'flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20'},ss={class:'text-[10px] text-white/60 w-14 text-right'},cs={class:'flex items-center gap-2 mb-1'},ds={class:'text-[10px] text-red-300'},us={key:1,class:'flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto'},ms=['aria-label','onMouseenter','onFocus','onTouchstartPassive'],ps={key:2,class:'effect-stack-badge'},fs={class:'absolute bottom-[18%] left-[3%] md:bottom-[22%] md:left-[6%] w-64 h-80 flex flex-col items-center justify-end z-20 translate-y-28 md:translate-y-32 scale-[1.1] origin-bottom-left'},gs=['title'],ys={class:'relative w-full h-full'},vs={class:'absolute bottom-4 left-1/2 -translate-x-1/2 scale-[1.2] origin-bottom w-64 h-80 flex items-end justify-center overflow-hidden'},hs={key:0,class:'size-20 bg-dungeon-gold/15 blur-2xl rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2'},bs=['src'],xs={class:'relative overflow-visible mt-2 w-60 scale-[1.2] origin-bottom bg-[#18141e]/90 border border-white/8 p-2.5 rounded-xl shadow-xl backdrop-blur-sm z-10 pointer-events-auto'},_s={class:'pointer-events-none absolute inset-0 z-30 overflow-visible'},ks={key:0,class:'flex items-center gap-3 mb-1'},Es=['aria-label'],Ns={class:'text-[10px] text-yellow-300 font-bold'},Cs=['aria-label'],Ms={class:'text-[10px] text-green-300 font-bold'},ws=['aria-label'],Ds={class:'text-[10px] text-rose-300 font-bold'},Ss={class:'flex items-center gap-2 mb-1.5'},As={class:'relative flex-1 h-2.5 bg-[#1a0a0a] rounded-full overflow-hidden border border-red-900/20'},Vs={class:'text-[10px] text-white/70 w-14 text-right'},Ts={class:'flex items-center gap-2 mb-1.5'},Bs={class:'flex-1 h-2 bg-[#0a0a1a] rounded-full overflow-hidden border border-blue-900/20'},$s={class:'text-[10px] text-white/60 w-14 text-right'},Os={class:'flex items-center gap-2 mb-1'},Is={class:'text-[10px] text-dungeon-gold'},Ls={key:1,class:'flex flex-wrap gap-1.5 mt-1.5 pointer-events-auto'},Rs=['aria-label','onMouseenter','onFocus','onTouchstartPassive'],Ps={key:2,class:'effect-stack-badge'},Hs={class:'absolute inset-0 z-[45] pointer-events-none overflow-hidden'},Us={class:'absolute inset-0 z-30 flex flex-col pointer-events-none'},zs={class:'flex-1 flex items-center justify-center relative'},Gs={key:0,class:'relative w-full h-64 flex items-center justify-center z-50'},Fs={class:'pointer-events-none min-h-[200px] w-full flex items-end justify-center pb-6 px-4 space-x-4 relative'},js={class:'flex space-x-4 items-end mb-2 z-40 scale-[1.1] origin-bottom pointer-events-auto'},Ys=['onMouseenter','onTouchstartPassive'],Ws={class:'absolute right-6 bottom-6 flex flex-col items-end gap-2.5 z-50 scale-[1.1] origin-bottom-right pointer-events-auto'},Xs=['disabled'],qs={class:'flex gap-2'},Ks=['disabled','onClick'],Zs={class:'flex items-center justify-between gap-1'},Js={class:'text-xs font-semibold truncate'},Qs={class:'mt-1 flex items-center gap-1 text-[10px] text-zinc-700'},ec={class:'px-1.5 py-0.5 rounded border border-zinc-300 bg-zinc-100'},tc={class:'px-1.5 py-0.5 rounded border border-zinc-300 bg-zinc-100'},ac={class:'mt-1 text-[10px] leading-tight text-zinc-700 line-clamp-2'},nc={class:'mt-1 text-[10px] text-zinc-600 min-h-[1rem]'},oc={key:0},rc={key:1},lc={key:2},ic={key:1,class:'h-full flex items-center justify-center text-xs'},sc={class:'absolute right-0 top-14 z-40 pointer-events-auto select-none scale-[1.1] origin-top-right flex flex-col items-end gap-2'},cc={class:'flex items-start'},dc=['title'],uc={key:0,class:'w-80 max-h-44 overflow-y-auto space-y-1 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-1 text-[10px] font-mono text-gray-300'},mc=['innerHTML'],pc={class:'flex items-start'},fc=['title'],gc={key:0,class:'w-44 border border-r-0 border-white/10 bg-[#18141e]/90 backdrop-blur-sm p-2'},yc={class:'flex items-center justify-center gap-2'},vc={class:'relative group'},hc={class:'text-[9px] text-white/40 mt-0.5'},bc={class:'relative group'},xc={class:'text-[9px] text-white/40 mt-0.5'},_c={key:0,class:'absolute inset-0 z-[70] flex items-center justify-center pointer-events-none'},kc={class:'effect-tooltip-name'},Ec={class:'effect-tooltip-desc'},Nc={key:0,class:'effect-tooltip-stacks'},Cc={class:'flex justify-between items-center mb-4 border-b border-dungeon-brown pb-2'},Mc={class:'font-heading text-xl text-dungeon-gold'},wc={class:'overflow-y-auto grid grid-cols-4 gap-4 p-2'},Dc='https://img.vinsimage.org',Sc='地牢/user',Ac='地牢/魔物',Vc='dungeon.combat.speed_up',Tc='dungeon.combat.fatigue_degree',Bc='[催淫]',$c=(0,o.defineComponent)({__name:'CombatView',props:{initialPlayerStats:{},enemyName:{},playerDeck:{},playerActiveSkills:{default:()=>[]},playerRelics:{default:()=>({})},testStartAt999:{type:Boolean,default:!1},uiFontFamily:{default:''},trackDiscovery:{type:Boolean,default:!0}},emits:['endCombat','openDeck','openRelics'],setup(e,{emit:t}){const a=e,n=t,r=Dl(),l=(()=>{const e=r.statData._当前区域||'',t=gl(e),a=Math.max(1,Math.floor(Number(r.statData._楼层数??1))),n=e?t:a;return r.statData._楼层数=n,n})(),i=pr(a.enemyName,l),s=i?.name??a.enemyName,c=new Set(['普莉姆','宁芙','温蒂尼','玛塔','罗丝','厄休拉','希尔薇','因克','阿卡夏','多萝西','维罗妮卡','伊丽莎白','尤斯蒂娅','克拉肯','布偶','赛琳娜','米拉','梦魔双子','贝希摩斯','佩恩','西格尔','摩尔','利维坦','奥赛罗','盖亚']),d=new Map,u=new Map,m=e=>e.replace(/\\/g,'/').replace(/^\/+|\/+$/g,''),p=e=>{return`${Dc}/${t=e,m(t).split('/').map(e=>encodeURIComponent(e)).join('/')}`;var t},f=e=>e.length>0?e[Math.floor(Math.random()*e.length)]:null,g=async e=>{const t=m(e),a=d.get(t);if(a)return a;const n=u.get(t);if(n)return n;const o=(async()=>{const e=Er(t);return d.set(t,e),e})();u.set(t,o);try{return await o}finally{u.delete(t)}},h=(0,o.ref)(p(`${Sc}/立绘.png`)),b=(0,o.ref)(p(`${Ac}/${s}.png`)),x=(0,o.ref)(!1),k=(0,o.ref)(!1);let E=!1;const N=async(e,t)=>{const a=await g(e),n=f(a);return p(n||t)},C=(0,o.ref)(!1),M=(0,o.ref)(!1),w=`${Dc}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF`,D=(0,o.computed)(()=>r.statData._当前区域||''),V=(0,o.computed)(()=>r.statData._当前房间类型||''),B=(0,o.computed)(()=>{if(!D.value||M.value)return'';const e='领主'===V.value&&!C.value?`${D.value}_领主`:D.value;return`${w}/${encodeURIComponent(e)}.png`});function O(){'领主'!==V.value||C.value?M.value=!0:C.value=!0}const I=(0,o.reactive)({}),L=e=>({...e,effects:e.effects.map(e=>({...e,restrictedTypes:e.restrictedTypes?[...e.restrictedTypes]:void 0}))}),R=e=>{const t=L(e);return a.testStartAt999?{...t,hp:999,maxHp:999,mp:999}:t},P=(0,o.ref)(R(a.initialPlayerStats)),H=(0,o.ref)(R(i?i.stats:{hp:1,maxHp:1,mp:0,minDice:1,maxDice:1,effects:[]})),U=e=>Ha[e]?.name??String(e),G=e=>Ha[e]?.description??'',F=(e,t)=>({type:e,stacks:Math.max(1,Math.floor(t)),polarity:Ha[e]?.polarity??'special'}),j={[A.BARRIER]:'fa-brands fa-fediverse',[A.ARMOR]:'fa-solid fa-shield-halved',[A.BIND]:'fa-solid fa-link',[A.DEVOUR]:'fa-brands fa-optin-monster',[A.POISON]:'fa-solid fa-virus',[A.POISON_AMOUNT]:'fa-solid fa-bacterium',[A.CORROSION]:'fa-brands fa-cloudscale',[A.BURN]:'fa-solid fa-fire',[A.BLEED]:'fa-solid fa-droplet',[A.VULNERABLE]:'fa-brands fa-linode',[A.DAMAGE_BOOST]:'fa-brands fa-superpowers',[A.REGEN]:'fa-brands fa-medrt',[A.WHITE_TURBID]:'fa-solid fa-droplet',[A.IGNITE_AURA]:'fa-solid fa-fire-flame-simple',[A.STUN]:'fa-solid fa-ban',[A.CHARGE]:'fa-solid fa-exclamation',[A.FATIGUE]:'fa-solid fa-bed',[A.COLD]:'fa-regular fa-snowflake',[A.TEMPERATURE_DIFF]:'fa-brands fa-empire',[A.NON_LIVING]:'fa-solid fa-skull',[A.NON_ENTITY]:'fa-solid fa-ghost',[A.ILLUSORY_BODY]:'fa-solid fa-ghost',[A.TEMP_MAX_HP]:'fa-solid fa-heart',[A.MAX_HP_REDUCTION]:'fa-solid fa-heart-pulse',[A.POINT_GROWTH_BIG]:'fa-solid fa-dice fa-lg',[A.POINT_GROWTH_SMALL]:'fa-solid fa-dice fa-sm',[A.MANA_DRAIN]:'fa-solid fa-battery-empty',[A.MANA_SPRING]:'fa-brands fa-drupal',[A.SWARM]:'fa-solid fa-bugs',[A.BLOOD_COCOON]:'fa-brands fa-battle-net',[A.INDOMITABLE]:'fa-solid fa-shield',[A.PEEP_FORBIDDEN]:'fa-solid fa-eye',[A.BLIND_ASH]:'fa-regular fa-eye-slash',[A.COGNITIVE_INTERFERENCE]:'fa-solid fa-hamsa',[A.MEMORY_FOG]:'fa-brands fa-phabricator',[A.SILENCE]:'fa-solid fa-circle-xmark',[A.STURDY]:'fa-solid fa-user-shield',[A.SHOCK]:'fa-solid fa-bolt',[A.FLAME_ATTACH]:'fa-solid fa-flask-vial',[A.POISON_ATTACH]:'fa-solid fa-flask-vial',[A.TOXIN_SPREAD]:'fa-brands fa-hornbill',[A.AMBUSH]:'fa-solid fa-user-secret',[A.FROST_ATTACH]:'fa-solid fa-flask-vial',[A.BLOODBLADE_ATTACH]:'fa-solid fa-flask-vial',[A.LIGHTNING_ATTACH]:'fa-solid fa-flask-vial',[A.THORNS]:'fa-solid fa-leaf',[A.INK_CREATION]:'fa-solid fa-feather-pointed'},Y={[A.FLAME_ATTACH]:{color:'rgb(255, 64, 64)'},[A.POISON_ATTACH]:{color:'rgb(81, 255, 116)'},[A.FROST_ATTACH]:{color:'rgb(108, 230, 255)'},[A.BLOODBLADE_ATTACH]:{color:'rgb(176, 0, 0)'},[A.LIGHTNING_ATTACH]:{color:'rgb(201, 69, 255)'},[A.TEMP_MAX_HP]:{color:'rgb(255, 120, 150)'},[A.ILLUSORY_BODY]:{'--fa-primary-color':'rgb(255, 255, 255)','--fa-secondary-color':'rgb(255, 255, 255)'}},W=e=>j[e]??null,X=e=>Y[e],q={[A.BARRIER]:Sl,[A.ARMOR]:Al,[A.BIND]:Vl,[A.DEVOUR]:Tl,[A.POISON]:Bl,[A.POISON_AMOUNT]:$l,[A.CORROSION]:$l,[A.BURN]:Ol,[A.BLEED]:$l,[A.VULNERABLE]:Il,[A.DAMAGE_BOOST]:Ll,[A.REGEN]:Rl,[A.WHITE_TURBID]:$l,[A.IGNITE_AURA]:Pl,[A.STUN]:Hl,[A.CHARGE]:Ul,[A.FATIGUE]:Il,[A.COLD]:zl,[A.TEMPERATURE_DIFF]:Gl,[A.NON_LIVING]:Fl,[A.NON_ENTITY]:Pl,[A.ILLUSORY_BODY]:Pl,[A.TEMP_MAX_HP]:Rl,[A.MAX_HP_REDUCTION]:Rl,[A.POINT_GROWTH_BIG]:jl,[A.POINT_GROWTH_SMALL]:jl,[A.MANA_DRAIN]:Yl,[A.MANA_SPRING]:Gl,[A.SWARM]:Bl,[A.BLOOD_COCOON]:Rl,[A.INDOMITABLE]:Rl,[A.PEEP_FORBIDDEN]:Wl,[A.BLIND_ASH]:Xl,[A.COGNITIVE_INTERFERENCE]:ql,[A.MEMORY_FOG]:Xl,[A.SILENCE]:Hl,[A.STURDY]:Al,[A.SHOCK]:Ul,[A.FLAME_ATTACH]:Ol,[A.POISON_ATTACH]:Bl,[A.TOXIN_SPREAD]:Bl,[A.AMBUSH]:Vl,[A.FROST_ATTACH]:zl,[A.BLOODBLADE_ATTACH]:$l,[A.LIGHTNING_ATTACH]:Ul,[A.THORNS]:Kl,[A.INK_CREATION]:y},K=e=>q[e]??Pl,Z=e=>{switch(e){case'buff':return'bg-emerald-900/65 border-emerald-400/50 text-emerald-200';case'debuff':return'bg-red-900/65 border-red-400/55 text-red-200';case'trait':default:return'bg-slate-800/70 border-slate-400/45 text-slate-200';case'mixed':return'bg-indigo-900/70 border-indigo-400/55 text-indigo-200';case'special':return'bg-amber-900/70 border-amber-400/55 text-amber-200'}},J=(0,o.computed)(()=>{const e=P.value.effects.find(e=>e.type===A.ARMOR);return e?.stacks??0}),Q=(0,o.computed)(()=>{const e=H.value.effects.find(e=>e.type===A.ARMOR);return e?.stacks??0}),ee=(0,o.computed)(()=>{const e=P.value.effects.find(e=>e.type===A.POISON_AMOUNT);return e?.stacks??0}),te=(0,o.computed)(()=>{const e=H.value.effects.find(e=>e.type===A.POISON_AMOUNT);return e?.stacks??0}),ae=(0,o.computed)(()=>{const e=P.value.effects.find(e=>e.type===A.TEMP_MAX_HP);return e?.stacks??0}),ne=(0,o.computed)(()=>{const e=H.value.effects.find(e=>e.type===A.TEMP_MAX_HP);return e?.stacks??0}),oe=(0,o.computed)(()=>P.value.maxHp<=0?0:Math.max(0,Math.min(ee.value/P.value.maxHp*100,100))),re=(0,o.computed)(()=>H.value.maxHp<=0?0:Math.max(0,Math.min(te.value/H.value.maxHp*100,100))),le=(0,o.computed)(()=>P.value.effects.filter(e=>e.type!==A.ARMOR&&e.type!==A.POISON_AMOUNT&&e.type!==A.TEMP_MAX_HP)),ie=(0,o.computed)(()=>H.value.effects.filter(e=>e.type!==A.ARMOR&&e.type!==A.POISON_AMOUNT&&e.type!==A.TEMP_MAX_HP)),se=e=>({...e,calculation:{...e.calculation},damageLogic:{...e.damageLogic},traits:{...e.traits},selfDamage:'object'==typeof e.selfDamage&&null!==e.selfDamage?{...e.selfDamage}:e.selfDamage,cardEffects:e.cardEffects.map(e=>({...e,triggers:e.triggers?[...e.triggers]:void 0,restrictedTypes:e.restrictedTypes?[...e.restrictedTypes]:void 0,cleanseTypes:e.cleanseTypes?[...e.cleanseTypes]:void 0}))}),ce=e=>e.map(se),de=i?ce(i.deck):[],ue={id:'pass',name:'跳过',type:S.FUNCTION,category:'基础',rarity:'普通',manaCost:0,calculation:{multiplier:0,addition:0},damageLogic:{mode:'fixed',value:0},traits:{combo:!1,reroll:'none',draw:!1},cardEffects:[],description:'无行动'},me=(0,o.ref)({turn:1,phase:T.TURN_START,actionsRemaining:1,playerBaseDice:1,enemyBaseDice:1,playerHand:[],playerDeck:ce(a.playerDeck).sort(()=>Math.random()-.5),discardPile:[],enemyDeck:[...de],enemyDiscard:[],enemyIntentCard:null,enemyPredictedPoint:0,playerSelectedCard:null,lastPlayedCard:null,logs:[`战斗开始！遭遇了 <span class="text-red-500 font-bold">${s}</span>`]}),pe=()=>{a.trackDiscovery&&(!function(e){const t='string'==typeof e.name?e.name.trim():'';if(!t)return;const a=Math.max(1,Math.floor(Number(e.floor??1))),n='string'==typeof e.area&&e.area.trim()?e.area.trim():'未知区域',o=Date.now(),r=`${t}@@${a}@@${n}`,l=ll(),i=l.enemies.findIndex(e=>`${e.name}@@${e.floor}@@${e.area}`===r);if(i>=0){const e=l.enemies[i];return e.lastSeenAt=o,e.times=Math.max(1,Math.floor(Number(e.times??1)))+1,void il(l)}l.enemies.push({name:t,floor:a,area:n,firstSeenAt:o,lastSeenAt:o,times:1}),il(l)}({name:s||a.enemyName,floor:l,area:D.value||''}),sl([...me.value.playerDeck.map(e=>e.id),...me.value.enemyDeck.map(e=>e.id)]))},fe=()=>{a.trackDiscovery&&dl([...P.value.effects.map(e=>e.type),...H.value.effects.map(e=>e.type)])};(0,o.onMounted)(()=>{pe(),fe()}),(0,o.watch)(()=>[P.value.effects,H.value.effects],()=>{fe()},{deep:!0});const ge=(0,o.ref)(1),ye=(0,o.ref)(1),ve=(0,o.ref)(!1),he=(0,o.ref)(!1),be=(0,o.ref)(null),xe=(0,o.ref)(!1),_e=(0,o.ref)(!1),ke=(0,o.ref)(null),Ee=(0,o.ref)(!1),Ne=(0,o.ref)(!1),Ce=(0,o.ref)(!0),Me=(0,o.ref)(!0),we=(0,o.ref)(null),De=(0,o.ref)(!1),Se=(0,o.ref)(!1),Ae=(0,o.ref)(!1),Ve=(0,o.ref)(null),Te=(0,o.ref)(null),Be=(0,o.computed)(()=>Ne.value?2:1),$e=(0,o.computed)(()=>{const e=a.uiFontFamily?.trim();return e&&e.length>0?e:'\'Inter\', sans-serif'}),Oe=(0,o.computed)(()=>({'--combat-speed-multiplier':String(Be.value),'--font-ui':$e.value,'--font-heading':$e.value,fontFamily:$e.value})),Ie=(0,o.ref)([]),Le=(0,o.ref)([]),Re=(0,o.ref)(0),Pe=(0,o.ref)(!1),He=(0,o.computed)(()=>Math.max(0,Math.min(Re.value/300,1))),Ue=(0,o.computed)(()=>100*He.value),ze=(0,o.computed)(()=>Re.value<=50?0:Math.max(0,Math.min((Re.value-50)/250,1))),Ge=(0,o.computed)(()=>({opacity:String(ze.value)})),Fe=()=>{Pe.value=Re.value>50},je=()=>{Pe.value=!1},Ye=(e,t)=>{const a=e.trim();a&&(Le.value.includes(a)||(Le.value.push(a),Gn(`<span class="text-fuchsia-300">我方因${t}获得负面状态：${a}</span>`)))},We=(0,o.ref)({player:!1,enemy:!1}),Xe=(0,o.ref)(null),qe=(0,o.ref)(null),Ke=(0,o.ref)([]),Ze=(0,o.ref)([]),Je=(0,o.ref)(''),Qe=(0,o.ref)(''),et=(0,o.ref)(0),tt=(0,o.ref)(0),at=(0,o.ref)(!1),nt=(0,o.computed)(()=>me.value.phase===T.PLAYER_INPUT||at.value),ot=(0,o.computed)(()=>nt.value&&Fa(P.value,A.BLIND_ASH)>0),rt=(0,o.computed)(()=>nt.value&&Fa(P.value,A.PEEP_FORBIDDEN)>0),lt=()=>Math.floor(3*Math.random())-1,it=(0,o.computed)(()=>{const e=Xe.value??me.value.playerBaseDice;return ot.value?Math.max(0,e+et.value):e}),st=(0,o.computed)(()=>{const e=qe.value??me.value.enemyBaseDice;return rt.value?Math.max(0,e+tt.value):e}),ct=(0,o.computed)(()=>Ht.value>0&&me.value.phase===T.PLAYER_INPUT&&!ve.value&&!he.value&&!De.value),dt=(0,o.computed)(()=>Ht.value<=0?'无可用重掷次数':me.value.phase!==T.PLAYER_INPUT?'当前阶段不可重掷':ve.value||he.value?'结算中暂不可重掷':De.value?'战斗结束中不可重掷':`可点击重掷（剩余${Ht.value}次）`),ut=(0,o.computed)(()=>null!==Xe.value&&Xe.value!==me.value.playerBaseDice),mt=(0,o.computed)(()=>null!==qe.value&&qe.value!==me.value.enemyBaseDice),pt=(0,o.computed)(()=>ot.value?'text-violet-400':ut.value?'text-red-800':''),ft=(0,o.computed)(()=>rt.value?'text-violet-400':mt.value?'text-[#b08a2e]':''),gt=(0,o.computed)(()=>{const e=[];return null!==Xe.value&&!ot.value&&Ke.value.length>0&&e.push({key:'player',title:`我方 · ${Je.value||'点数预览'}`,finalPoint:Xe.value,lines:Ke.value}),null!==qe.value&&!rt.value&&Ze.value.length>0&&e.push({key:'enemy',title:`敌方 · ${Qe.value||'点数预览'}`,finalPoint:qe.value,lines:Ze.value}),e}),yt=(0,o.computed)(()=>nt.value&&Fa(P.value,A.COGNITIVE_INTERFERENCE)>0?'full':'none'),vt=(0,o.computed)(()=>nt.value&&Fa(P.value,A.MEMORY_FOG)>0?'partial':'none'),ht=(0,o.ref)(null),bt=(0,o.ref)(null),xt=(0,o.ref)(null),_t=(0,o.computed)(()=>[bt.value,xt.value].filter(e=>!!e));let kt=null,Et=null,Nt=null,Ct=null,Mt=0,wt=0,Dt=0,St=0,At=0,Vt=0,Tt=-1;const Bt=new WeakMap,$t=(0,o.ref)(new Set),Ot=e=>{const t=Number(e);return Number.isFinite(t)?Math.max(0,Math.floor(t)):0},It=e=>{const t=Ot(e);Re.value=t,localStorage.setItem(Tc,String(t))},Lt=e=>{const t=Math.max(0,Math.floor(e));t<=0||It(Re.value+t)},Rt={globalMultiplier:1,globalAddition:0},Pt=function(e){if(!e||'object'!=typeof e)return[];const t=new Map;for(const[a,n]of Object.entries(e)){const e=Math.max(0,Math.floor(Number(n??0)));if(!a||e<=0)continue;const o=vr.get(a)??hr.get(a);if(!o)continue;const r=t.get(o.id);r?r.count+=e:t.set(o.id,{relic:o,count:e})}return Array.from(t.values()).sort((e,t)=>e.relic.name.localeCompare(t.relic.name,'zh-Hans-CN'))}(a.playerRelics),Ht=(0,o.ref)(0),Ut=(0,o.reactive)({}),zt=(0,o.ref)(0),Gt=(0,o.ref)(0),Ft=(0,o.ref)(!1),jt=(0,o.ref)(0),Yt=(0,o.ref)(0),Wt=(0,o.ref)(0),Xt=(0,o.ref)(!1),qt=(0,o.ref)(!1),Kt=(0,o.ref)({player:0,enemy:0}),Zt=(0,o.ref)({player:0,enemy:0}),Jt=e=>'player'===e?P.value:H.value,Qt=e=>(Ut[e]||(Ut[e]={}),Ut[e]),ea=e=>Pt.some(t=>t.relic.id===e&&t.count>0),ta=e=>Pt.find(t=>t.relic.id===e)?.count??0,aa=(e,t)=>{'player'===e&&(Ht.value=Math.max(0,Ht.value+Math.floor(t)))},na=(e,t=1)=>{if('player'!==e)return!1;const a=Math.max(1,Math.floor(t));return!(Ht.value<a)&&(Ht.value-=a,!0)},oa=e=>'player'!==e?0:Ht.value,ra=e=>{for(const t of Pt)e(t,t.relic,Qt(t.relic.id))},la=e=>{Gn(`<span class="text-amber-300 text-[9px]">[圣遗物] ${e}</span>`)},ia=e=>{const t=Math.max(0,Math.floor(e));t<=0||(zt.value+=t)},sa=(e,t)=>{const a=Math.max(0,Math.floor(e));if(a<=0)return 0;const n=ta('bloodpool_skin_mark');if(n<=0)return a;if(Wt.value>=2)return a;const o=Math.min(a,n);return o<=0?a:(Wt.value+=1,la(`[皮肤印记] ${t}伤害 -${o}（本回合 ${Wt.value}/2）。`),a-o)},ca=(e,t)=>{const a=Math.max(0,Math.floor(e));if(a<=0)return 0;if(ta('bloodpool_hemostatic_valve')<=0)return a;const n=Math.min(10,a);return n<a&&la(`[凝血限流阀] ${t}伤害由 ${a} 限制为 ${n}。`),n},da=(e,t,a,n,o)=>{const r=Math.max(0,Math.floor(a));return function(e,t,a){const n=[];if(!a){if(Ga(e,A.BARRIER)&&t>0)return Wa(e,A.BARRIER),n.push('[结界] 层数-1。'),{actualDamage:0,logs:n};const a=za(e,A.ARMOR);if(a&&a.stacks>0&&t>0){const o=Math.min(a.stacks,t);a.stacks-=o,t-=o,a.stacks<=0&&Ya(e,A.ARMOR),n.push(`[护甲] 消耗${o}，剩余伤害${t}。`)}}const o=Math.min(t,e.hp);e.hp-=o,n.push(`受到${o}点伤害(HP: ${e.hp}/${e.maxHp})。`);const r=ai(e);return n.push(...r.logs),{actualDamage:o,logs:n}}(t,'player'===e?ca(r,o):r,n)},ua=(e,t,a,n)=>{const o=Math.max(0,Math.floor(a));if(o<=0)return 0;const r='player'===e?ca(o,n):o,l=t.hp;return t.hp=Math.max(0,t.hp-r),Math.max(0,l-t.hp)},ma=(e,t)=>{const a=Math.max(0,Math.floor(e));if(a<=0)return;const n=ta('yanhan_freeze_flow_core');if(n<=0)return;if(Ft.value)return;if(a<5)return;const o=ga('player',n);o<=0||(Ft.value=!0,la(`[冻流泵芯] ${t}单次获得护甲≥5，额外回复 ${o} 点魔力。`))},pa=(e,t)=>{const a=Math.max(0,Math.floor(t));if(a<=0)return 0;const n=ja(Jt(e),A.ARMOR,a,{source:'relic'})?a:0;return n>0&&(Un(e,n,'shield','+'),'player'===e&&ma(n,'圣遗物')),n},fa=(e,t,a)=>{if('player'!==e)return;if(t<3)return;const n=ta('modao_stabilizer_pin');if(n<=0)return;if(Yt.value>=2)return;const o=pa('player',n);o<=0||(Yt.value+=1,la(`[稳压回针] ${a}单次回蓝 ${t}，获得 ${o} 点护甲（本回合 ${Yt.value}/2）。`))},ga=(e,t)=>{const a=Math.max(0,Math.floor(t));if(a<=0)return 0;const n=Jt(e),o=n.mp;n.mp=Math.max(0,n.mp+a);const r=n.mp-o;return r>0&&(Un(e,r,'mana','+'),fa(e,r,'回合/效果触发，')),r},ya=(e,t,a)=>{const n=Math.max(0,Math.floor(t));if(n<=0)return{healed:0,overflow:0};let o=n;if('player'===e){const e=ta('bloodpool_crimson_plasma');e>0&&(o=Math.max(0,Math.floor(o*(1+.25*e))))}if(o<=0)return{healed:0,overflow:0};const r=Jt(e),l=r.hp;r.hp=Math.max(0,Math.min(r.maxHp,r.hp+o));const i=r.hp-l,s=Math.max(0,o-i);if(i>0&&Un(e,i,'heal','+'),a?.overflowToArmor&&s>0&&pa(e,s),'player'===e&&i>0){const e=ta('bloodpool_reflow_mark');if(e>0){const t=Qt('bloodpool_reflow_mark'),a=Math.max(0,Math.floor(Number(t.healTriggersThisTurn??0))),n=Math.max(0,2*e);if(a<n){const e=Math.min(n,a+1);t.healTriggersThisTurn=e}}}return{healed:i,overflow:s}},va=(e,t,a,n)=>{const o=Math.max(0,Math.floor(a));if(o<=0)return!1;if(!((e,t,a,n)=>{let o=!0;const r=Jt(e);return ra((l,i,s)=>{if(!o)return;const c=i.hooks?.onBeforeApplyEffect;c&&!1===c({count:l.count,side:'player',self:P.value,opponent:H.value,state:s,addLog:la,hasRelic:ea,getRelicCount:ta,addStatusEffect:(e,t,a,n)=>va(e,t,a,n),addArmor:pa,restoreMana:ga,heal:ya,addRerollCharges:aa,getRerollCharges:oa,targetSide:e,target:r,effectType:t,stacks:a,source:n?.source,restrictedTypes:n?.restrictedTypes})&&(o=!1)}),o})(e,t,o,n))return!1;const r=Jt(e),l=r.hp,i=ja(r,t,o,{restrictedTypes:n?.restrictedTypes,source:n?.source,lockDecayThisTurn:n?.lockDecayThisTurn});if(i&&'player'===e&&t===A.CORROSION&&l>0&&r.hp<=0&&(Gn('<span class="text-red-400">[侵蚀] 侵蚀指数越过了临界值，我方战败，失去对身体的控制权。</span>'),Ye('[被侵蚀]','侵蚀')),i&&'enemy'===e&&t===A.COLD){const e=n?.source??'',t='string'==typeof e&&e.startsWith('enemy_'),a=ta('yanhan_freeze_pump');if(!t&&a>0&&Gt.value<2){const e=pa('player',a);e>0&&(Gt.value+=1,la(`[冻结泵] 施加寒冷触发，获得 ${e} 点护甲（本回合 ${Gt.value}/2）。`))}}return i},ha=(e,t,a)=>({count:t,side:'player',self:P.value,opponent:H.value,state:a,addLog:la,hasRelic:ea,getRelicCount:ta,addStatusEffect:(t,a,n,o)=>va(t,a,n,{source:o?.source??`relic:${e.id}`,restrictedTypes:o?.restrictedTypes,lockDecayThisTurn:o?.lockDecayThisTurn}),addArmor:pa,restoreMana:ga,heal:ya,addRerollCharges:aa,getRerollCharges:oa}),ba=e=>{ra((t,a,n)=>{const o=a.hooks?.[e];o&&o(ha(a,t.count,n))})},xa=(e,t,a,n)=>{let o=Math.max(0,Math.floor(a)),r=!1;const l=Jt(e);return ra((a,i,s)=>{const c=i.hooks?.onBeforeBurnDamage;if(!c)return;const d={...ha(i,a.count,s),targetSide:e,target:l,turn:n,burnStacks:t,damage:o,isTrueDamage:r};c(d),o=Math.max(0,Math.floor(d.damage)),r=!!d.isTrueDamage}),{damage:o,isTrueDamage:r}},_a=(e,t,a,n,o)=>{const r=Jt(e);ra((l,i,s)=>{const c=i.hooks?.onAfterBurnDamageTaken;if(!c)return;c({...ha(i,l.count,s),targetSide:e,target:r,turn:o,burnStacks:t,damage:Math.max(0,Math.floor(a)),isTrueDamage:n})})},ka=(e,t,a,n,o,r,l,i)=>{const s=Jt(e),c=Jt(t);ra((d,u,m)=>{const p={...ha(u,d.count,m),sourceSide:e,targetSide:t,source:s,target:c,card:a,finalPoint:n,hitIndex:o,hitCount:r,attemptedDamage:Math.max(0,Math.floor(l)),actualDamage:Math.max(0,Math.floor(i))};u.hooks?.onAfterHitDealt?.(p),u.hooks?.onAfterHitTaken?.(p)})},Ea=e=>Math.max(60,Math.floor(e/Be.value)),Na=e=>new Promise(t=>setTimeout(t,Ea(e))),Ca=e=>({transitionDuration:`${Ea(e)}ms`}),Ma=(e,t)=>({...e,transitionDuration:`${Ea(t)}ms`}),wa=(0,o.computed)(()=>{const e=ht.value,t=!!e?.entered;return{left:t?'29%':'50%',top:t?'23%':'84%',transform:`translate(-50%, -50%) scale(${t?1:.96})`,opacity:t?'1':'0',transitionProperty:'left, top, transform, opacity',transitionDuration:`${Ea(540)}ms`,transitionTimingFunction:'cubic-bezier(0.22, 0.9, 0.2, 1)'}}),Da=e=>`${'player'===e.source?'resolved-card-visual-inner--player':'resolved-card-visual-inner--enemy'} ${'attack'===e.variant?'resolved-card-visual-inner--attack':'self'===e.variant?'resolved-card-visual-inner--self':'resolved-card-visual-inner--fade'}`,Sa=(0,o.computed)(()=>!!me.value.enemyIntentCard&&(!Se.value&&!xt.value)),Aa={physical:'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',magic:'text-red-400 drop-shadow-[0_0_8px_rgba(248,113,113,0.85)]',shield:'text-gray-300 drop-shadow-[0_0_8px_rgba(209,213,219,0.85)]',heal:'text-green-400 drop-shadow-[0_0_8px_rgba(74,222,128,0.85)]',mana:'text-blue-400 drop-shadow-[0_0_8px_rgba(96,165,250,0.85)]',true:'text-zinc-500 drop-shadow-[0_0_8px_rgba(39,39,42,0.9)]'},Va=e=>Ie.value.filter(t=>t.side===e),Ta=e=>{let t=Bt.get(e);return t||(wt+=1,t=`hand-${wt}`,Bt.set(e,t)),t},Ba=e=>$t.value.has(Ta(e)),$a=e=>{const t=Ta(e),a=new Set($t.value);a.delete(t),$t.value=a,requestAnimationFrame(()=>{const e=new Set($t.value);e.add(t),$t.value=e,setTimeout(()=>{const e=new Set($t.value);e.delete(t),$t.value=e},Ea(360))})},Oa=(e,t)=>'self'===t?e:'player'===e?'enemy':'player',Ia=(e,t)=>e.filter(e=>e.id!==t),La=(e,t)=>{let a=!1;return e.filter(e=>!(!a&&e.id===t)||(a=!0,!1))},Pa=(e,t)=>{const a=Math.floor(Math.random()*(e.length+1));return[...e.slice(0,a),t,...e.slice(a)]},Za=(e,t)=>{t.traits.purgeOnUse&&('player'===e?me.value.discardPile=La(me.value.discardPile,t.id):(me.value.enemyDeck=La(me.value.enemyDeck,t.id),me.value.enemyDiscard=La(me.value.enemyDiscard,t.id)),Gn(`<span class="text-zinc-300">【${t.name}】触发移除，自我销毁。</span>`))},Ja=(e,t)=>{t.id!==ue.id&&('player'===e?(me.value.enemyDeck=Ia(me.value.enemyDeck,t.id),me.value.enemyDiscard=Ia(me.value.enemyDiscard,t.id)):(me.value.playerDeck=Ia(me.value.playerDeck,t.id),me.value.playerHand=Ia(me.value.playerHand,t.id),me.value.discardPile=Ia(me.value.discardPile,t.id),me.value.playerSelectedCard?.id===t.id&&(me.value.playerSelectedCard=null)),Gn(`<span class="text-violet-300">【销毁】${t.name}在本次战斗中被临时移除。</span>`))},Qa=(e,t,a,n)=>{const o=Math.floor(t);if(0===o)return{ok:!0,actualDelta:0};const r='player'===e?P.value:H.value,l=r.mp;if(o<0&&n?.requireEnoughForDecrease&&l<-o)return{ok:!1,actualDelta:0};r.mp=Math.max(0,l+o);const i=r.mp-l;return i>0&&!1!==n?.showPositiveFloating&&Un(e,i,'mana','+'),i<0&&((e,t,a)=>{if(Math.max(0,Math.floor(t))<=0)return;const n='player'===e?P.value:H.value,o='player'===e?'我方':'敌方',r=Fa(n,A.SHOCK);if(r<=0)return;const{actualDamage:l,logs:i}=da(e,n,r,!1,'电击');l>0&&Un(e,l,'magic','-');const s=Math.max(0,r-1);if(s<=0)Ya(n,A.SHOCK);else{const e=n.effects.find(e=>e.type===A.SHOCK);e&&(e.stacks=s)}Gn(`<span class="text-violet-300">${o}因${a}触发电击，损失 ${l} 点生命（电击 ${r}→${s}）。</span>`);for(const e of i){const t=e.startsWith('受到')?`${o}${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}'player'===e&&l>0&&n.hp<=0&&Ye('[神经肌肉失调]','电击')})(e,-i,a),i>0&&fa(e,i,`${a}，`),{ok:!0,actualDelta:i}},en=(e,t,a)=>{const n=Math.max(0,Math.floor(t));return n<=0||Qa(e,-n,a,{requireEnoughForDecrease:!0}).ok},tn=(e,t)=>{const a=me.value.turn+1;Zt.value[e]<a&&(Zt.value[e]=a);Gn(`<span class="text-sky-300">${'player'===e?'我方':'敌方'}【${t.name}】触发：下回合魔法牌消耗为0</span>`)},an=(e,t)=>{const a=Math.max(0,Math.floor(t.manaCost??0));if(t.type!==S.MAGIC)return a;if((e=>Zt.value[e]===me.value.turn)(e))return 0;let n=0;if('player'===e){me.value.playerHand.some(e=>'modao_weave_backup'===e.id)&&(n+=1);const e=ta('modao_arcane_host');e>0&&(()=>{let e=0;for(const t of me.value.playerHand)if(t.type===S.MAGIC&&(e+=1,2===e))return t;return null})()===t&&(n+=2*e)}return Math.max(0,a-n)},nn=(e,t)=>{const a=an(e,t);return a===t.manaCost?t:{...t,manaCost:a}},on=(e,t)=>{const a='player'===e?P.value:H.value,n='player'===e?'我方':'敌方',o=Math.max(0,Fa(a,A.BLEED));if(o<=0)return Gn(`<span class="text-gray-400">[流血] ${t}未触发：${n}当前无流血。</span>`),0;const{actualDamage:r,logs:l}=da(e,a,o,!0,'流血');r>0&&Un(e,r,'true','-'),Gn(`<span class="text-rose-300">[流血] ${t}触发：${n}受到 ${r} 点真实伤害。</span>`);for(const e of l){const t=e.startsWith('受到')?`${n}${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}if('enemy'===e&&r>0){const e=ta('bloodpool_first_bleed_feast');if(e>0&&!Xt.value){Xt.value=!0;const{healed:t}=ya('player',r*e);la(`[噬血水蛭] 敌方首次受到流血伤害，回复 ${t} 点生命。`)}}return r},rn=(e,t)=>{const a=Fa('player'===e?P.value:H.value,A.BLOODBLADE_ATTACH);if(a<=0)return;va(t,A.BLEED,a,{source:'effect:bloodblade_attach'});Gn(`<span class="text-rose-300">${'player'===e?'我方':'敌方'}[血刃附加] 为对方施加了 ${a} 层流血。</span>`)},ln=(e,t)=>{const a=Fa('player'===e?P.value:H.value,A.LIGHTNING_ATTACH);if(a<=0)return;va(t,A.SHOCK,a,{source:'effect:lightning_attach'});Gn(`<span class="text-indigo-300">${'player'===e?'我方':'敌方'}[雷电附加] 为对方施加了 ${a} 层电击。</span>`)},sn=(e,t)=>e&&0!==e.length?e.includes(t):'on_use'===t,cn=(e,t,a,n='on_use')=>{const o='player'===e?P.value:H.value,r='player'===e?H.value:P.value,l='player'===e?'我方':'敌方';let i=!1;for(const s of t.cardEffects){if(!sn(s.triggers,n))continue;const c=s.target??'self',d='self'===c?o:r,u=Oa(e,c);if('heal'===s.kind){const e='point_scale'===s.valueMode?Math.floor(a*(s.scale??1)):Math.floor(s.fixedValue??0),{healed:n}=ya(u,e);Gn(`<span class="text-green-400">${l}【${t.name}】回复了 ${n} 点生命</span>`),i=!0}else if('apply_buff'===s.kind){const e=d.maxHp,n=d.hp,o='point_scale'===s.valueMode?Math.floor(a*(s.scale??1)):'max_hp_percent'===s.valueMode?Math.floor(d.maxHp*(s.scale??0)):Math.floor(s.fixedValue??1);if(!va(u,s.effectType,o,{restrictedTypes:s.restrictedTypes,source:t.id,lockDecayThisTurn:s.effectType===A.BIND||s.effectType===A.SILENCE||s.effectType===A.STUN}))continue;if(s.effectType===A.ARMOR&&(Un(u,o,'shield','+'),'player'===u&&ma(o,`卡牌【${t.name}】`)),s.effectType===A.MAX_HP_REDUCTION){const a=Math.max(0,e-d.maxHp),o=Math.max(0,n-d.hp);o>0&&Un(u,o,'true','-'),Gn(`<span class="text-fuchsia-300">${l}【${t.name}】使目标生命上限 -${a}${o>0?`（当前生命 -${o}）`:''}</span>`)}else if(s.effectType===A.TEMP_MAX_HP){const a=Math.max(0,d.maxHp-e);Gn(`<span class="text-rose-300">${l}【${t.name}】使目标临时生命上限 +${a}</span>`)}else Gn(`<span class="text-yellow-400">${l}【${t.name}】获得了 ${o} 层${Ha[s.effectType]?.name??s.effectType}</span>`);i=!0}else if('restore_mana'===s.kind){const e='point_scale'===s.valueMode?Math.floor(a*(s.scale??1)):Math.floor(s.fixedValue??0),n=Qa(u,e,`法力变化（${l}【${t.name}】）`,{showPositiveFloating:!0}),o=Math.max(0,n.actualDelta);o>0?(Gn(`<span class="text-blue-400">${l}【${t.name}】回复了 ${o} 点魔力</span>`),i=!0):n.actualDelta<0?(Gn(`<span class="text-blue-400">${l}【${t.name}】使目标法力减少 ${Math.abs(n.actualDelta)} 点</span>`),i=!0):0!==e&&(Gn(`<span class="text-blue-400">${l}【${t.name}】未造成法力变化</span>`),i=!0)}else if('cleanse'===s.kind){const e=s.cleanseTypes&&s.cleanseTypes.length>0?s.cleanseTypes:d.effects.map(e=>e.type);for(const t of e)Ya(d,t);Gn(`<span class="text-cyan-300">${l}【${t.name}】清除了负面效果</span>`),i=!0}}return i},dn=(e,t)=>{if(t.id===ue.id||t.type!==S.PHYSICAL)return;const a='player'===e?'enemy':'player',n=Fa('player'===a?P.value:H.value,A.TOXIN_SPREAD);if(n<=0)return;va(e,A.POISON,n,{source:'effect:toxin_spread'});Gn(`<span class="text-emerald-300">${'player'===a?'我方':'敌方'}[毒素蔓延] ${'player'===e?'我方':'敌方'}打出物理牌，获得 ${n} 层中毒。</span>`)},un=(e,t)=>{if(t.id===ue.id)return;if(t.type!==S.PHYSICAL&&t.type!==S.DODGE)return;const a='player'===e?'enemy':'player',n='player'===a?P.value:H.value;if(Fa(n,A.AMBUSH)<=0)return;va(e,A.BIND,1,{source:'effect:ambush',restrictedTypes:[S.PHYSICAL,S.DODGE],lockDecayThisTurn:!0}),Wa(n,A.AMBUSH,1);Gn(`<span class="text-violet-300">${'player'===a?'我方':'敌方'}[伏击] 触发：${'player'===e?'我方':'敌方'}获得 1 层束缚。</span>`)},mn=(e,t,a)=>{if('enemy_vinewalker_lightning_ambush'!==t.id)return t;if(We.value[e])return t;const n=a?.consume??!0,o=a?.announce??n;n&&(We.value[e]=!0);const r=se(t);if(r.calculation.addition+=4,o){Gn(`<span class="text-indigo-300">${'player'===e?'我方':'敌方'}【${t.name}】首次使用，点数 +4</span>`)}return r};let pn=!1;const fn=e=>{const t='player'===e?P.value:H.value;if(t.hp<=0)return;const a=Fa(t,A.POISON_AMOUNT);if(a<=0||a<t.hp)return;Ya(t,A.POISON_AMOUNT);const{actualDamage:n,logs:o}=da(e,t,a,!0,'中毒量');n>0&&Un(e,n,'true','-');const r='player'===e?'我方':'敌方';Gn(`<span class="text-zinc-300">${r}[中毒量] 即时致死判定触发，造成 ${n} 点真实伤害</span>`);for(const e of o){const t=e.startsWith('受到')?`${r}${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}'player'===e&&n>0&&t.hp<=0&&Ye(Bc,'中毒量致死判定')},gn=(e,t)=>{const a=Math.floor(Math.min(e,t)),n=Math.floor(Math.max(e,t));return n<=a?a:Math.floor(Math.random()*(n-a+1))+a},yn=(e,t,a,n)=>{const o=Fa(a,A.FLAME_ATTACH);o>0&&(t.type===S.PHYSICAL||t.type===S.MAGIC)&&va(n,A.BURN,o,{source:'effect:flame_attach'});const r=Fa(a,A.POISON_ATTACH);r>0&&t.type===S.MAGIC&&va(n,A.POISON,r,{source:'effect:poison_attach'});if(o+(t.type===S.MAGIC?r:0)>0){Gn(`<span class="text-orange-300">${'player'===e?'我方':'敌方'}[附加效果] 命中后追加了状态效果。</span>`)}},vn=(e,t,a)=>{let n=a;const o=Fa(e,A.CHARGE);o>0&&(Ya(e,A.CHARGE),n=Math.max(0,Math.floor(n+o)),Gn(`<span class="text-cyan-300">${t}[蓄力] +${o}，原始骰子 ${a} → ${n}</span>`));const r=Fa(e,A.FATIGUE);if(r>0){Ya(e,A.FATIGUE);const a=Math.max(0,Math.floor(n-r));Gn(`<span class="text-amber-300">${t}[疲劳] -${r}，骰子 ${n} → ${a}</span>`),n=a}return n},hn=()=>{Xe.value=null,qe.value=null,Ke.value=[],Ze.value=[],Je.value='',Qe.value='',kt&&(clearTimeout(kt),kt=null),Et&&(clearTimeout(Et),Et=null)},bn=()=>{ht.value=null},xn=()=>{At+=1,bn(),bt.value=null,xt.value=null,_e.value=!1,he.value=!1,be.value=null},_n=(e,t,a,n=!1)=>{const o='player'===e?P.value:H.value,r='player'===e?H.value:P.value;let l=ei({baseDice:a,card:t,entityEffects:o.effects,relicModifiers:Rt});if('burn_inferno_judgement'===t.id&&(l+=Math.floor(Fa(r,A.BURN)/2)),'bloodpool_blood_debt_strike'===t.id){const e=Math.max(0,Math.floor(o.maxHp-o.hp));l+=Math.floor(e/3)}return'player'===e&&ra((e,i,s)=>{const c=i.hooks?.modifyFinalPoint;if(!c)return;const d={count:e.count,side:'player',card:t,baseDice:a,currentPoint:l,self:o,opponent:r,state:s,isPreview:n,addLog:la,hasRelic:ea,getRelicCount:ta};l=c(d)}),Math.max(0,Math.floor(l))},kn=e=>{const t=Math.round(100*e)/100;return Number.isInteger(t)?String(Math.trunc(t)):t.toFixed(2).replace(/\.?0+$/,'')},En=(e,t,a)=>{const n='player'===e?P.value:H.value,o='player'===e?H.value:P.value,r=[];r.push(`原始：${a}`);let l=ei({baseDice:a,card:t,entityEffects:n.effects,relicModifiers:Rt});const i=kn(t.calculation.multiplier),s=t.calculation.addition,c=s>=0?`+${s}`:`${s}`;if(r.push(`卡牌修正 x${i} ${c} => ${l}`),'burn_inferno_judgement'===t.id){const e=Math.floor(Fa(o,A.BURN)/2);e>0&&(l+=e,r.push(`炎狱判决 +${e} => ${l}`))}if('bloodpool_blood_debt_strike'===t.id){const e=Math.max(0,Math.floor(n.maxHp-n.hp)),t=Math.floor(e/3);t>0&&(l+=t,r.push(`血债重击（已损失${e}） +${t} => ${l}`))}return'player'===e&&ra((e,i,s)=>{const c=i.hooks?.modifyFinalPoint;if(!c)return;const d=l,u={count:e.count,side:'player',card:t,baseDice:a,currentPoint:l,self:n,opponent:o,state:s,isPreview:!0,addLog:la,hasRelic:ea,getRelicCount:ta};l=c(u),Math.abs(l-d)<1e-4||r.push(`${i.name} ${((e,t,a)=>{if('modao_witch_hat'===e&&Math.abs(t)>1e-4)return`x${kn(a/t)}（${kn(t)}→${kn(a)}）`;const n=a-t;if(Math.abs(n)<1e-4)return'±0';const o=Math.round(n);return Math.abs(n-o)<1e-4?`${o>=0?'+':''}${o}（${kn(t)}→${kn(a)}）`:`${n>=0?'+':''}${kn(n)}（${kn(t)}→${kn(a)}）`})(i.id,d,l)} => ${kn(l)}`)}),r.push(`最终：${Math.max(0,Math.floor(l))}`),r},Nn=(e,t,a)=>_n(e,t,a,!0),Cn=()=>{me.value.phase===T.PLAYER_INPUT&&(Xe.value=null,Je.value='',Ke.value=[])},Mn=()=>{kt&&(clearTimeout(kt),kt=null),me.value.phase===T.PLAYER_INPUT&&(Xe.value=null,Je.value='',Ke.value=[])},wn=(e,t)=>{const a=Math.floor(Math.min(e,t)),n=Math.floor(Math.max(e,t));return n<=a?a:Math.floor(Math.random()*(n-a+1))+a},Dn=()=>{if(!ct.value)return;const e=oa('player');let t=null;if(ra((e,a,n)=>{if(null!==t)return;const o=a.hooks?.onDiceClick;if(!o)return;const r={count:e.count,side:'player',currentDice:me.value.playerBaseDice,minDice:P.value.minDice,maxDice:P.value.maxDice,state:n,roll:wn,consumeRerollCharge:na,getRerollCharges:oa,addLog:la};t=o(r)}),null===t){if(oa('player')<e)return;if(!na('player',1))return;t=wn(P.value.minDice,P.value.maxDice),Gn(`<span class="text-amber-300">[基础重掷] 消耗1次重掷，剩余 ${oa('player')} 次。</span>`)}const a=me.value.playerBaseDice,n=Math.max(0,Math.floor(t));ge.value=n;const o=vn(P.value,'我方',n);me.value.playerBaseDice=o,Xe.value=null,Gn(`<span class="text-amber-200">我方骰子重掷：${a} → ${o}</span>`)},Sn=()=>{if(me.value.phase!==T.PLAYER_INPUT||ve.value||he.value||!me.value.enemyIntentCard)return;const e=me.value.enemyIntentCard;if(!e)return;const t=mn('enemy',e,{consume:!1,announce:!1}),a=Nn('enemy',t,me.value.enemyBaseDice);null!==a&&(qe.value=a,Qe.value=t.name,Ze.value=En('enemy',t,me.value.enemyBaseDice))},An=()=>{me.value.phase===T.PLAYER_INPUT&&(he.value||(qe.value=null,Qe.value='',Ze.value=[]))},Vn=()=>{Sn()},Tn=()=>{An()},Bn=()=>{Et&&(clearTimeout(Et),Et=null),Et=setTimeout(()=>{Sn()},260)},$n=()=>{Et&&(clearTimeout(Et),Et=null),An()},On=()=>{Nt&&(clearTimeout(Nt),Nt=null),Ct&&(clearTimeout(Ct),Ct=null)},In=(e,t,a='center')=>{const n=Ve.value?.getBoundingClientRect();if(!n)return;const o=e.getBoundingClientRect(),r=Math.max(8,o.top-n.top-8),l='right'===a?Math.max(8,Math.min(o.right-n.left+10,n.width-256-8)):Math.max(100,Math.min(o.left+o.width/2-n.left,n.width-100));Te.value={x:l,y:r,name:U(t.type),description:G(t.type),stacks:t.stacks,align:a}},Ln=(e,t,a='center')=>{const n=e.currentTarget;n&&(On(),In(n,t,a))},Rn=()=>{On(),Te.value=null},Pn=(e,t,a='center')=>{const n=e.currentTarget;n&&(On(),Nt=setTimeout(()=>{In(n,t,a),Ct=setTimeout(()=>{Te.value=null,Ct=null},Ea(1800))},Ea(320)))},Hn=()=>{Nt&&(clearTimeout(Nt),Nt=null)},Un=(e,t,a,n='+')=>{const o=Math.max(0,Math.floor(t));if(o<=0)return;const r=++Mt,l=Ea('heal'===a?1800:1350);Ie.value.push({id:r,side:e,kind:a,text:`${n}${o}`,colorClass:Aa[a],leftOffset:Math.floor(120*(Math.random()-.5)),topOffset:24+Math.floor(20*Math.random()),duration:l}),setTimeout(()=>{Ie.value=Ie.value.filter(e=>e.id!==r)},l)},zn=()=>{Tt!==me.value.turn&&(Tt=me.value.turn,((e,t,a='text-sky-300',n=Ea(1050))=>{const o=++Mt;Ie.value.push({id:o,side:e,text:t,colorClass:a,leftOffset:Math.floor(90*(Math.random()-.5)),topOffset:18+Math.floor(18*Math.random()),duration:n}),setTimeout(()=>{Ie.value=Ie.value.filter(e=>e.id!==o)},n)})('enemy','魔力不足','text-blue-300'),Gn('<span class="text-blue-300">敌方魔力不足，本回合视为跳过。</span>'))},Gn=e=>{me.value.logs=[e,...me.value.logs].slice(0,240)};if(Pt.length>0){const e=Pt.map(e=>e.count>1?`${e.relic.name}x${e.count}`:e.relic.name).join('、');Gn(`<span class="text-amber-300">本场圣遗物：${e}</span>`)}ba('onBattleStart'),(0,o.onMounted)(()=>{Ne.value='1'===localStorage.getItem(Vc),(()=>{const e=localStorage.getItem(Tc);It(Ot(e??0))})(),Lt(10),(async()=>{const e=await N(Sc,`${Sc}/立绘.png`);E||(x.value=!1,h.value=e);const t=`${Ac}/${s}`,a=`${Ac}/${s}.png`,n=c.has(s);let o=p(a);if(n)o=await N(t,a);else{const e=await g(t),a=f(e);a&&(o=p(a))}E||(k.value=!1,b.value=o)})()}),(0,o.onUnmounted)(()=>{E=!0,kt&&(clearTimeout(kt),kt=null),Et&&(clearTimeout(Et),Et=null),On()}),(0,o.watch)(Ne,e=>{localStorage.setItem(Vc,e?'1':'0')}),(0,o.watch)([()=>me.value.phase,()=>me.value.turn,()=>me.value.playerBaseDice,()=>me.value.enemyBaseDice,ot,rt],()=>{et.value=ot.value?lt():0,tt.value=rt.value?lt():0},{immediate:!0});const Fn=(e,t,a)=>{let n=[...t],o=[...a];const r=[];for(let t=0;t<e;t++){if(0===n.length){if(0===o.length)break;n=[...o].sort(()=>Math.random()-.5),o=[],ba('onDeckShuffle')}const e=n.pop();e&&r.push(e)}return{drawn:r,newDeck:n,newDiscard:o}},jn=(0,o.computed)(()=>{const e=Array.isArray(a.playerActiveSkills)?a.playerActiveSkills.slice(0,2):[];for(;e.length<2;)e.push(null);return e.map(e=>e?{...e}:null)}),Yn=(0,o.ref)([{nextAvailableTurn:1,usedCount:0},{nextAvailableTurn:1,usedCount:0}]);(0,o.watch)(jn,()=>{Yn.value=jn.value.map(()=>({nextAvailableTurn:1,usedCount:0}))},{immediate:!0,deep:!0});const Wn=e=>{const t=Yn.value[e];return t?Math.max(0,t.nextAvailableTurn-me.value.turn):0},Xn=e=>{const t=jn.value[e];if(!t)return'未装备主动技能';if(De.value)return'战斗结束中不可使用主动技能';if(me.value.phase!==T.PLAYER_INPUT)return'当前阶段不可使用主动技能';const a=Yn.value[e],n=Wn(e);if(n>0)return`冷却中（剩余${n}回合）`;const o=Math.max(0,Math.floor(t.最大使用次数??0));return o>0&&a&&a.usedCount>=o?`本场已达到最大使用次数（${o}）`:P.value.mp<Math.max(0,Math.floor(t.manaCost))?'魔力不足':null},qn=(0,o.computed)(()=>jn.value.map((e,t)=>({idx:t,skill:e,cooldownRemaining:Wn(t),usedCount:Yn.value[t]?.usedCount??0,maxUses:e&&Math.max(0,Math.floor(e.最大使用次数??0))||null}))),Kn=(e,t)=>{const a='player'===e?P.value:H.value,n='player'===e?me.value.playerBaseDice:me.value.enemyBaseDice,o=wn(a.minDice,a.maxDice),r=vn(a,'player'===e?'我方':'敌方',o);if('player'===e)return ge.value=o,me.value.playerBaseDice=r,void Gn(`<span class="text-zinc-200">主动【${t}】重掷我方骰子：${n} → ${r}</span>`);ye.value=o,me.value.enemyBaseDice=r,Gn(`<span class="text-zinc-200">主动【${t}】重掷敌方骰子：${n} → ${r}</span>`)},Zn=e=>{const t=me.value.playerSelectedCard,a=t===e;return[a?'-translate-y-12 scale-110 z-50 ring-2 ring-dungeon-gold rounded-lg shadow-[0_0_30px_#d4af37]':'',t&&!a?'opacity-30 scale-90 translate-y-8 grayscale':'hover:scale-110 hover:-translate-y-4 hover:z-50',me.value.phase===T.PLAYER_INPUT||a?'cursor-pointer':'opacity-50 grayscale cursor-not-allowed']},Jn=e=>nn('player',e);(0,o.watch)(()=>me.value.phase,e=>{if(!De.value&&e===T.TURN_START){zt.value=0,Gt.value=0,Ft.value=!1,Yt.value=0,Wt.value=0,1===me.value.turn&&(Xt.value=!1,qt.value=!1,Kt.value.player=0,Kt.value.enemy=0,Zt.value.player=0,Zt.value.enemy=0);if((()=>{const e=Re.value;if(e<200)return!1;if(e>=300)return P.value.maxHp=0,P.value.hp=0,Gn('<span class="text-red-400">[疲劳度] 已达到 300，生命上限归零，直接战败。</span>'),!0;const t=gn(1,3);if(va('player',A.FATIGUE,t,{source:'system:fatigue_degree'}),Gn(`<span class="text-amber-300">[疲劳度] 回合开始获得 ${t} 层疲劳。</span>`),e>=200){const e=gn(1,2);va('player',A.POISON,e,{source:'system:fatigue_degree'}),Gn(`<span class="text-emerald-300">[疲劳度] 额外获得 ${e} 层中毒。</span>`)}return!1})())return;if(me.value.turn>1)for(const[e,t,a]of[['player','我方',P],['enemy','敌方',H]]){const n=e,o='player'===e?'enemy':'player',r='player'===e?H:P,l=Fa(a.value,A.POISON_AMOUNT),i=a.value.hp,s=l>0&&l>=i,c=Xa(a.value);let d=[...c.logs],u=0,m=!1,p=0,f=0,g=0;const y=c.logs.find(e=>e.includes('[生命回复]'));if(y){const e=y.match(/回复\s+(\d+)\s+点生命/);g=e?Math.max(0,Number(e[1])):0}if(me.value.turn%3==0){const e=Fa(a.value,A.POINT_GROWTH_BIG);e>0&&(a.value.maxDice+=e,d.push(`[点数成长（大）] 最大骰子点数 +${e}（当前 ${a.value.maxDice}）`));const t=Fa(a.value,A.POINT_GROWTH_SMALL);t>0&&(a.value.minDice+=t,a.value.minDice>a.value.maxDice&&(a.value.maxDice=a.value.minDice),d.push(`[点数成长（小）] 最小骰子点数 +${t}（当前 ${a.value.minDice}）`))}for(const e of c.applyToOpponent)va(o,e.type,e.stacks,{source:`effect:${e.type}`});if(0!==c.opponentHpChange)if(c.opponentHpChange>0)ya(o,c.opponentHpChange);else{const e=r.value.hp;r.value.hp=Math.max(0,Math.min(r.value.maxHp,r.value.hp+c.opponentHpChange));const t=r.value.hp-e;t<0&&Un(o,Math.abs(t),'magic','-')}const v=c.logs.find(e=>e.includes('[燃烧]'));if(v){const t=v.match(/损失\s+(\d+)\s+点生命/),o=t?Number(t[1]):0,r=Fa(a.value,A.BURN);if(d=d.filter(e=>e!==v),o>0){const t=xa(n,r,o,me.value.turn);if(c.hpChange+=o,t.damage>0)if(t.isTrueDamage){const{actualDamage:n,logs:o}=da(e,a.value,t.damage,!0,'燃烧');u=n,m=n>0,p+=n,n>0&&Un(e,n,'true','-'),d.push(`[燃烧] 受到 ${n} 点真实伤害。`);for(const e of o)d.push(e)}else{const{actualDamage:n,logs:o}=da(e,a.value,t.damage,!1,'燃烧');u=n,p+=n,n>0?(Un(e,n,'magic','-'),d.push(`[燃烧] 损失 ${n} 点生命。`)):d.push('[燃烧] 伤害被完全抵挡。');for(const e of o)d.push(e)}else d.push('[燃烧] 伤害为 0。')}}const h=Fa(a.value,A.INK_CREATION);if(u>0&&h>0){const t=Math.max(0,Math.floor(u*h));if(t>0){const{actualDamage:n,logs:o}=da(e,a.value,t,!0,'笔墨造物');p+=n,n>0&&Un(e,n,'true','-'),d.push(`[笔墨造物] 受到燃烧后追加 ${n} 点真实伤害。`);for(const e of o)d.push(e)}}const b=c.hpChange-g;if(g>0&&ya(n,g),0!==b&&(b>0?ya(n,b):a.value.hp=Math.max(0,Math.min(a.value.maxHp,a.value.hp+b))),0!==c.mpChange&&Qa(e,c.mpChange,'法力变化（回合开始）',{showPositiveFloating:!0}),c.trueDamage>0){const t=a.value.hp,{actualDamage:o}=da(e,a.value,c.trueDamage,!0,'回合开始真实伤害');f=o,o>0&&Un(e,o,'true','-'),'player'===n&&s&&t>0&&a.value.hp<=0&&Ye(Bc,'中毒量致死判定')}if('player'===n){const e=Math.max(0,p+f+Math.max(0,-b));ia(e)}u>0&&_a(n,Fa(a.value,A.BURN),u,m,me.value.turn);const x=ai(a.value);for(const e of x.logs)Gn(`<span class="text-violet-300 text-[9px]">${t}: ${e}</span>`);for(const e of d)Gn(`<span class="text-gray-400 text-[9px]">${t}: ${e}</span>`)}setTimeout(()=>{De.value||(()=>{if(De.value)return;if(Gn(`<span class="text-slate-300">——第${me.value.turn}回合——</span>`),Tt=-1,jt.value>0){const e=jt.value;jt.value=0;const t=ga('player',e);t>0&&la(`[封存回路] 释放储能，回复 ${t} 点魔力。`)}const e=ta('burn_reverse_circuit');if(e>0&&Fa(P.value,A.BURN)>0){const t=Math.min(P.value.hp,e);let a=0;t>0&&(a=ua('player',P.value,t,'逆燃回路'),Un('player',a,'true','-'),ia(a));const n=ga('player',e);if(la(`[逆燃回路] 检测到自身燃烧，失去 ${a} 点生命并回复 ${n} 点魔力。`),P.value.hp<=0)return}const t=ta('modao_scale_ring');if(t>0&&me.value.turn%3==0){const e=ga('player',t);e>0&&la(`[刻度环] 第 ${me.value.turn} 回合触发，回复 ${e} 点魔力。`)}hn(),xn(),me.value.phase=T.DRAW_PHASE,me.value.playerSelectedCard=null,me.value.enemyIntentCard=null,Se.value=!1,Ae.value=!1,ve.value=!0,be.value=null,he.value=!1,ba('onTurnStart');const a=ta('bloodpool_pulse_mark');if(a>0&&P.value.hp>0){const e=Math.max(0,2*a);if(e>0){const{actualDamage:t,logs:a}=da('player',P.value,e,!0,'脉搏印记');t>0&&(Un('player',t,'true','-'),ia(t),la(`[脉搏印记] 回合开始受到 ${t} 点真实伤害。`),ka('enemy','player',ue,0,1,1,t,t));for(const e of a){const t=e.startsWith('受到')?`我方${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}if(P.value.hp<=0)return}}setTimeout(()=>{if(De.value)return;const e=Math.floor(Math.random()*(P.value.maxDice-P.value.minDice+1))+P.value.minDice,t=Math.floor(Math.random()*(H.value.maxDice-H.value.minDice+1))+H.value.minDice,a=vn(P.value,'我方',e),n=vn(H.value,'敌方',t);ge.value=e,ye.value=t,ve.value=!1,me.value.playerBaseDice=a,me.value.enemyBaseDice=n,me.value.phase=T.DRAW_PHASE,Gn(`掷骰结果：我方 [${a}] vs 敌方 [${n}]`)},Ea(1500))})()},Ea(1e3))}},{immediate:!0}),(0,o.watch)([()=>me.value.phase,ve],([e,t])=>{if(!De.value&&e===T.DRAW_PHASE&&!t){const e=function(){if(Fa(H.value,A.STUN)>0)return Gn('<span class="text-gray-400">敌方处于眩晕，跳过回合。</span>'),ue;if(0===me.value.enemyDeck.length){if(0===me.value.enemyDiscard.length)return ue;me.value.enemyDeck=[...me.value.enemyDiscard].sort(()=>Math.random()-.5),me.value.enemyDiscard=[]}let e;if(i){const t={enemyStats:H.value,playerStats:P.value,deck:me.value.enemyDeck,turn:me.value.turn,flags:I};e=i.selectCard(t)}else{const t=Math.floor(Math.random()*me.value.enemyDeck.length);e=me.value.enemyDeck[t]}const t=nn('enemy',e),a=Ka(H.value,t,ye.value);return a.allowed?e:(Gn(`<span class="text-gray-400">敌方无法出牌：${a.reason??'本回合跳过。'}</span>`),ue)}(),{drawn:t,newDeck:a,newDiscard:n}=Fn(3,me.value.playerDeck,me.value.discardPile);me.value.enemyIntentCard=e,Se.value=!1,Ae.value=!1,me.value.playerHand=t,me.value.playerDeck=a,me.value.discardPile=n,me.value.phase=T.PLAYER_INPUT}});const Qn=(e,t)=>{if(me.value.phase!==T.PLAYER_INPUT)return;if(t<0||t>=me.value.playerHand.length)return;if(me.value.playerHand[t]!==e)return;const a=nn('player',e),n=Ka(P.value,a,ge.value);if(!n.allowed)return $a(e),void Gn(`<span class="text-red-400">${n.reason??'当前无法使用该卡牌。'}</span>`);if(a.type===S.MAGIC){if(!en('player',a.manaCost,`使用【${e.name}】`))return $a(e),void Gn('<span class="text-red-400">法力不足，无法使用该魔法卡牌。</span>')}const[o]=me.value.playerHand.splice(t,1);o&&(hn(),(e=>{if(De.value)return;const t=At,a=++Dt;ht.value={id:a,card:e,entered:!1},requestAnimationFrame(()=>{t!==At||De.value||ht.value?.id===a&&(ht.value.entered=!0)})})(o),Lt(1),me.value.discardPile.push(o),me.value.playerSelectedCard=o,me.value.phase=T.RESOLUTION)},eo=()=>{me.value.phase===T.PLAYER_INPUT&&me.value.enemyIntentCard&&(hn(),bn(),me.value.playerSelectedCard=ue,me.value.phase=T.RESOLUTION,Gn('<span class="text-gray-400">你选择了跳过当前回合。</span>'))},to=async(e,t,a,n)=>{if(!De.value)try{let o=e,r=t;if(r=nn('enemy',r),r.type===S.MAGIC&&r.id!==ue.id&&!Ae.value){Ae.value=!0;en('enemy',r.manaCost,`使用【${r.name}】`)||(r=ue,me.value.enemyIntentCard=ue,zn())}o=mn('player',o),r=mn('enemy',r),o.traits.combo&&(at.value=!0);const l=((e,t)=>{const a=e.type,n=t.type;return!(e.ignoreDodge&&n===S.DODGE&&(a===S.PHYSICAL||a===S.MAGIC)||t.ignoreDodge&&a===S.DODGE&&(n===S.PHYSICAL||n===S.MAGIC))&&(a===S.PHYSICAL&&n===S.PHYSICAL||a===S.MAGIC&&n===S.MAGIC||a===S.DODGE&&(n===S.PHYSICAL||n===S.MAGIC)||n===S.DODGE&&(a===S.PHYSICAL||a===S.MAGIC))})(o,r),i=o.ignoreDodge&&r.type===S.DODGE&&(o.type===S.PHYSICAL||o.type===S.MAGIC)||r.ignoreDodge&&o.type===S.DODGE&&(r.type===S.PHYSICAL||r.type===S.MAGIC);!l&&i&&Gn('<span class="text-indigo-300">[无视闪避] 闪避拼点被跳过，卡牌将直接生效。</span>');const s=o.id===ue.id,c=r.id===ue.id;let d=a,u=n;const m=(e,t)=>{if(t.id===ue.id||'none'===t.traits.reroll)return;const a='player'===e?'我方':'敌方';let n=e;'enemy'===t.traits.reroll&&(n='player'===e?'enemy':'player');const o='player'===n?'我方':'敌方',r='player'===n?P.value:H.value,l=wn(r.minDice,r.maxDice),i='player'===n?d:u;'player'===n?(d=l,me.value.playerBaseDice=l):(u=l,me.value.enemyBaseDice=l),Gn(`<span class="text-amber-300">${a}【${t.name}】触发重掷：${o}骰子 ${i} → ${l}</span>`)};m('player',o),m('enemy',r);const p=Nn('player',o,d),f=Nn('enemy',r,u),g=(e,t)=>{const a='player'===e?P.value:H.value,n='player'===e?'我方':'敌方',o=Fa(a,A.BURN);o<=0||(Ya(a,A.BURN),Gn(`<span class="text-orange-300">${t} ${n}燃烧清空（${o}层）。</span>`))};c&&g('player','敌方跳过回合。'),s&&g('enemy','我方跳过回合。'),dn('player',o),dn('enemy',r),un('player',o),un('enemy',r);let y=!0,v=!0,h='',b=null;if(l){Xe.value=p,qe.value=f,he.value=!0,await Na(600),xe.value=!0,setTimeout(()=>xe.value=!1,Ea(500)),rn('player','enemy'),rn('enemy','player'),cn('player',o,p,'on_clash'),cn('enemy',r,f,'on_clash');let e=null;o.type===r.type?p>f?(v=!1,b='player',h='我方拼点成功！'):f>p?(y=!1,b='enemy',h='敌方拼点成功！'):(y=!1,v=!1,b='tie',h='势均力敌！'):o.type===S.DODGE?f>p?(v=!1,b='player',h='我方闪避成功！',e='player'):(y=!1,b='enemy',h='我方闪避失败！'):r.type===S.DODGE&&(p>f?(y=!1,b='enemy',h='敌方闪避成功！',e='enemy'):(v=!1,b='player',h='敌方闪避失败！')),'player'===b?be.value='enemy':'enemy'===b?be.value='player':'tie'===b&&(be.value='both'),h&&Gn(`<span class="text-gray-300">${h}</span>`);Math.max(0,Fa(P.value,A.BLEED))>0&&on('player','拼点阶段');if(Math.max(0,Fa(H.value,A.BLEED))>0&&on('enemy','拼点阶段'),'enemy'===b&&(aa('player',1),Gn('<span class="text-amber-300">拼点失败：重掷次数 +1</span>')),'player'===b?g('player','拼点胜利。'):'enemy'===b&&g('enemy','拼点胜利。'),'player'===b){const e=ta('bloodpool_clash_point_mark');e>0&&va('enemy',A.BLEED,e,{source:'relic:bloodpool_clash_point_mark'})&&la(`[骰蚀刻印] 拼点成功，对敌方施加 ${e} 层流血。`)}'player'===e?(ln('player','enemy'),cn('player',o,p,'on_dodge_success'),'enemy_inkmouse_cowardice'===o.id&&(P.value.maxDice+=1,Gn('<span class="text-cyan-300">我方【胆小】闪避成功：最大骰子点数 +1</span>')),'modao_zero_domain_dodge'===o.id&&tn('player',o)):'enemy'===e&&(ln('enemy','player'),cn('enemy',r,f,'on_dodge_success'),'enemy_inkmouse_cowardice'===r.id&&(H.value.maxDice+=1,Gn('<span class="text-cyan-300">敌方【胆小】闪避成功：最大骰子点数 +1</span>')),'modao_zero_domain_dodge'===r.id&&tn('enemy',r)),'player'===b&&o.traits.destroyOnClashWin?Ja('player',r):'enemy'===b&&r.traits.destroyOnClashWin&&Ja('enemy',o),await Na(650),he.value=!1,hn()}else await Na(500),y=!0,v=!0;!y&&o.traits.purgeOnUse&&o.id!==ue.id&&Za('player',o),!v&&r.traits.purgeOnUse&&r.id!==ue.id&&Za('enemy',r);const x=async(e,t,a)=>{if(De.value)return;const n='player'===e?P.value:H.value,o='player'===e?H.value:P.value,r='player'===e?'我方':'敌方',l='player'===e?'enemy':'player',i='player'===l?'我方':'敌方',d='player'===e?c:s,u=Fa(H.value,A.COLD),m=Fa(P.value,A.BURN),p=P.value.hp;let f=!1;if('enemy'===e&&t.id!==ue.id&&(Se.value=!0),'player'===e&&bn(),t.id!==ue.id&&Gn(`${r}使用了【${t.name}】`),await(async(e,t)=>{if(t.id===ue.id||De.value)return;const a=At,n=t.type===S.PHYSICAL||t.type===S.MAGIC?'attack':t.type===S.DODGE?'fade':'self',o=++St,r='player'===e?bt:xt;if(r.value={id:o,source:e,card:t,variant:n},'attack'===n){const e=Ea(720);setTimeout(()=>{a!==At||De.value||(_e.value=!0,setTimeout(()=>{a===At&&(_e.value=!1)},Ea(220)))},e)}const l='attack'===n?930:570;await Na(l),a!==At||De.value||r.value?.id===o&&(r.value=null)})(e,t),De.value)return;const g=_n(e,t,a),y=()=>{const a=(e=>{const t=e.selfDamage;if(null==t)return null;if('number'==typeof t){const e=Math.max(0,Math.floor(t));return e<=0?null:{value:e,mode:'fixed',target:'hp'}}const a=t.mode??'fixed',n=t.target??'hp',o=Number.isFinite(t.value)?t.value:0;return o<=0?null:'percent'===a?{value:o,mode:'percent',target:n}:{value:Math.max(0,Math.floor(o)),mode:'fixed',target:n}})(t);if(a){const o='percent'===a.mode?Math.floor(n.maxHp*(a.value/100)):Math.floor(a.value),l=Math.max(0,o);if(l>0){if('maxHp'===a.target){const a=n.maxHp,o=n.hp;n.maxHp=Math.max(0,n.maxHp-l),n.hp>n.maxHp&&(n.hp=n.maxHp);const i=Math.max(0,a-n.maxHp),s=Math.max(0,o-n.hp);s>0&&Un(e,s,'true','-'),Gn(`<span class="text-rose-300">${r}【${t.name}】自伤：生命上限 -${i}${s>0?`（当前生命 -${s}）`:''}</span>`)}else{const a=ua(e,n,l,`卡牌【${t.name}】自伤`);a>0&&Un(e,a,'true','-'),Gn(`<span class="text-rose-300">${r}【${t.name}】自伤了 ${a} 点生命</span>`)}const o=ai(n);for(const e of o.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`)}}const i=Math.max(0,Math.floor(t.manaDrain??0));if(i>0){const a=Qa(l,-i,`法力汲取（${r}【${t.name}】）`),n=Math.max(0,-a.actualDelta),s=Math.max(0,i-n);let c=0;s>0&&(c=ua(l,o,s,`卡牌【${t.name}】法力汲取溢出`),Un(l,c,'true','-'));const d=Qa(e,i,`法力汲取（${r}【${t.name}】）`,{showPositiveFloating:!0}),u=Math.max(0,d.actualDelta),m=c>0?`，额外造成 ${c} 点真实伤害`:'';if(Gn(`<span class="text-blue-300">${r}【${t.name}】法力汲取：吸收 ${n} 点法力并回复自身 ${u} 点法力${m}</span>`),c>0){const e=ai(o);for(const t of e.logs)Gn(`<span class="text-violet-300 text-[9px]">${t}</span>`)}}},v=()=>{y(),((e,t)=>{if('enemy'!==e)return;const a=(t.negativeEffect??'').trim();a&&(Le.value.push(a),Gn(`<span class="text-fuchsia-300">我方获得负面效果：${a}</span>`))})(e,t),((e,t)=>{const a=t.traits.insertCardsToEnemyDeck??[];if(a.length<=0)return;const n='player'===e?'我方':'敌方',o='player'===e?'enemy':'player';for(const e of a){const a=Ra(e);if(!a)continue;const r=se(a);'player'===o?(me.value.playerDeck=Pa(me.value.playerDeck,r),Gn(`<span class="text-fuchsia-300">${n}【${t.name}】向对方牌库插入了【${e}】（牌库${me.value.playerDeck.length} / 弃牌${me.value.discardPile.length}）。</span>`)):(me.value.enemyDeck=Pa(me.value.enemyDeck,r),Gn(`<span class="text-fuchsia-300">${n}【${t.name}】向对方牌库插入了【${e}】（敌方牌库${me.value.enemyDeck.length} / 弃牌${me.value.enemyDiscard.length}）。</span>`))}})(e,t),Za(e,t)},h=()=>{v(),(()=>{if(f)return;f=!0;const e=Fa(H.value,A.COLD);if(Math.max(0,u-e)>0){const e=ta('yanhan_frost_storage_plate');if(e>0){const t=pa('player',e);t>0&&la(`[凝霜蓄板] 检测到敌方寒冷减少，获得 ${t} 点护甲。`)}const t=ta('yanhan_cold_abyss_rift');if(t>0){const e=2*t,a=ua('enemy',H.value,e,'寒渊裂隙');Un('enemy',a,'true','-'),la(`[寒渊裂隙] 检测到敌方寒冷减少，对敌方造成 ${a} 点真实伤害。`);const n=ai(H.value);for(const e of n.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`)}}const t=Fa(P.value,A.BURN);if(Math.max(0,m-t)>0){const e=ta('burn_heat_exchange_fin');if(e>0){const t=pa('player',5*e);t>0&&la(`[热交换鳍片] 检测到自身燃烧减少，获得 ${t} 点护甲。`)}}ia(Math.max(0,p-P.value.hp))})()},b=()=>{if(t.type!==S.FUNCTION||t.id===ue.id)return;const a=Math.max(0,Math.floor(g));'player'===e?me.value.playerBaseDice!==a&&(me.value.playerBaseDice=a,Gn(`<span class="text-dungeon-gold/80">我方当前点数调整为 ${a}</span>`)):me.value.enemyBaseDice!==a&&(me.value.enemyBaseDice=a)},x=(a='on_use')=>cn(e,t,g,a);if(d&&x('on_opponent_skip'),(()=>{if('player'!==e)return;if(t.id===ue.id||t.type!==S.FUNCTION)return;const a=ta('yanhan_low_temp_engraver');a<=0||va('enemy',A.COLD,a,{source:'relic:yanhan_low_temp_engraver'})&&la(`[低温刻刀] 打出功能牌，敌方寒冷 +${a}。`)})(),'yanhan_zero_boundary_verdict'===t.id){return Fa(o,A.COLD)>=10?(Wa(o,A.COLD,10),va(l,A.STUN,1,{source:t.id,lockDecayThisTurn:!0}),Gn(`<span class="text-sky-300">${r}【${t.name}】消耗了敌方10层寒冷并施加了1回合眩晕</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】敌方寒冷不足10层，未触发眩晕分支</span>`),x(),void h()}if('bloodpool_ratio_inversion'===t.id){const a=n.maxHp>0?n.hp/n.maxHp:0,i=o.maxHp>0?o.hp/o.maxHp:0,s=Math.max(0,Math.min(n.maxHp,Math.floor(n.maxHp*i))),c=Math.max(0,Math.min(o.maxHp,Math.floor(o.maxHp*a))),d=s-n.hp,u=c-o.hp;n.hp=s,o.hp=c,d>0?Un(e,d,'heal','+'):d<0&&Un(e,Math.abs(d),'true','-'),u>0?Un(l,u,'heal','+'):u<0&&Un(l,Math.abs(u),'true','-'),Gn(`<span class="text-rose-300">${r}【${t.name}】互换了双方生命百分比（我方 ${Math.round(100*a)}% ↔ 敌方 ${Math.round(100*i)}%）</span>`);const m=ai(o);for(const e of m.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`);const p=ai(n);for(const e of p.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`);return x(),void h()}if('bloodpool_bleed_transfusion'===t.id){const a=Math.max(0,Fa(n,A.BLEED));a>0?(Ya(n,A.BLEED),va(l,A.BLEED,a,{source:t.id}),Gn(`<span class="text-rose-300">${r}【${t.name}】将自身 ${a} 层流血转移给了对手</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】自身没有可转移的流血</span>`);const i=3;for(let a=0;a<i;a+=1){const n=on(l,`${r}【${t.name}】第${a+1}次`);if(ka(e,l,t,g,a+1,i,n,n),o.hp<=0)break}return x(),void h()}if('enemy_muxinlan_liquidation'===t.id){const e=[...Ua];let a=0;for(const t of e){const e=Fa(o,t);e>0&&(a+=e,Ya(o,t))}const n=2*a;if(n>0){const e=ua(l,o,n,`卡牌【${t.name}】`);Un(l,e,'true','-'),Gn(`<span class="text-zinc-300">${r}【${t.name}】清算了 ${a} 层状态，造成 ${e} 点真实伤害</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】未清算到可移除状态</span>`);const i=ai(o);for(const e of i.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`);return void h()}if('enemy_muxinlan_liquid_fire'===t.id){const a=Fa(o,A.COLD);return a>0?(Ya(o,A.COLD),va(l,A.BURN,a,{source:t.id}),Gn(`<span class="text-orange-300">${r}【${t.name}】将 ${a} 层寒冷转化为燃烧</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】未找到可转化的寒冷</span>`),yn(e,t,n,l),void h()}if('enemy_muxinlan_activated_slime'===t.id){const a=Ua.map(e=>({type:e,stacks:Fa(o,e)})).filter(e=>e.stacks>0);if(a.length>0){const e=a[Math.floor(Math.random()*a.length)];va(l,e.type,e.stacks,{source:t.id}),Gn(`<span class="text-teal-300">${r}【${t.name}】使${Ha[e.type]?.name??e.type}层数翻倍</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】目标无可翻倍的元素debuff</span>`);return yn(e,t,n,l),void h()}if('enemy_muxinlan_premium_shield'===t.id){const a=Math.max(0,Math.floor(o.mp));return a>0&&(va(e,A.STURDY,a,{source:t.id}),n.mp+=a,Un(e,a,'shield','+'),Un(e,a,'mana','+')),Gn(`<span class="text-cyan-300">${r}【${t.name}】获得 ${a} 层坚固与 ${a} 点魔力</span>`),void h()}if('enemy_muxinlan_cunning'===t.id)return va(l,A.PEEP_FORBIDDEN,1,{source:t.id}),va(l,A.COGNITIVE_INTERFERENCE,1,{source:t.id}),Gn(`<span class="text-violet-300">${r}【${t.name}】使对手陷入窥视禁忌与认知干涉</span>`),void h();if('enemy_springspirit_internal_manipulation'===t.id){const e=Math.max(0,Fa(o,A.CORROSION)),a=Math.min(10,e);return a>0?(va(l,A.CORROSION,a,{source:t.id}),Gn(`<span class="text-emerald-300">${r}【${t.name}】使对手侵蚀 +${a}</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】未检测到可翻倍的侵蚀层数</span>`),void h()}if('enemy_springspirit_undead_condense'===t.id){const a=Ua.map(e=>({type:e,stacks:Fa(n,e)})).filter(e=>e.stacks>0);if(a.length>0){const e=a[Math.floor(Math.random()*a.length)];Ya(n,e.type),Gn(`<span class="text-cyan-300">${r}【${t.name}】清除了自身的${Ha[e.type]?.name??e.type}</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】自身没有可清除的元素debuff</span>`);const o=Math.max(0,Math.floor(g)),{healed:l}=ya(e,o);return Gn(`<span class="text-green-300">${r}【${t.name}】回复了 ${l} 点生命</span>`),void h()}if('enemy_nymph_giant_projection'===t.id){const e=Fa(n,A.ILLUSORY_BODY)>0;return e&&Ya(n,A.ILLUSORY_BODY),n.minDice+=2,n.maxDice+=4,n.minDice>n.maxDice&&(n.maxDice=n.minDice),b(),Gn(`<span class="text-violet-300">${r}【${t.name}】${e?'移除了自身的虚幻之躯，':''}最小点数 +2，最大点数 +4（当前 ${n.minDice}~${n.maxDice}）</span>`),x(),void h()}if('enemy_mata_fungal_repair'===t.id){const a=Math.max(0,Fa(o,A.POISON_AMOUNT));a>0?(Ya(o,A.POISON_AMOUNT),Gn(`<span class="text-emerald-300">${r}【${t.name}】清空了对手 ${a} 层中毒量</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】未检测到可清空的中毒量</span>`);const n=Math.floor(a/2);if(n>0){const a=2*n,{healed:i}=ya(e,a),s=o.maxHp,c=o.hp;va(l,A.MAX_HP_REDUCTION,n,{source:t.id});const d=Math.max(0,s-o.maxHp),u=Math.max(0,c-o.hp);u>0&&Un(l,u,'true','-'),Gn(`<span class="text-fuchsia-300">${r}【${t.name}】触发 ${n} 次：回复 ${i} 点生命，并使对手生命上限 -${d}${u>0?`（当前生命 -${u}）`:''}</span>`)}else a>0&&Gn(`<span class="text-gray-400">${r}【${t.name}】中毒量不足2层，未触发后续转化效果</span>`);return void h()}if(t.type===S.FUNCTION){if('burn_char_convert'===t.id){const a=Fa(n,A.BURN);return b(),a>0?(Ya(n,A.BURN),n.mp+=a,Un(e,a,'mana','+'),Gn(`<span class="text-blue-400">${r}【${t.name}】清除了 ${a} 层燃烧并回复了 ${a} 点魔力</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】未检测到燃烧层数</span>`),void h()}if('yanhan_pressure_cycle'===t.id){b();const a=Math.max(0,Fa(n,A.ARMOR)),o=Math.min(10,a);o>0&&Wa(n,A.ARMOR,o);const i=Math.max(0,Math.floor(o/2));if(i>0){va(l,A.COLD,i,{source:t.id});const a=Qa(e,i,`法力变化（${r}【${t.name}】）`,{showPositiveFloating:!0}),n=Math.max(0,a.actualDelta);Gn(`<span class="text-sky-300">${r}【${t.name}】消耗 ${o} 点护甲，施加 ${i} 层寒冷并回复 ${n} 点魔力</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】护甲不足2点，未触发转化</span>`);return void h()}if('yanhan_cold_source_rectifier'===t.id){b();const a=Math.max(0,Fa(o,A.COLD)),n=Math.min(4,a);if(n>0){Wa(o,A.COLD,n);const{healed:a}=ya(e,n);Gn(`<span class="text-cyan-300">${r}【${t.name}】消耗了 ${n} 层寒冷并回复 ${a} 点生命</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】敌方没有可整流的寒冷</span>`);return void h()}if('modao_mana_purify'===t.id){b();const a=Math.max(0,Math.floor(n.mp)),o=Math.min(20,a);if(o>0){const a=Qa(e,o,`法力变化（${r}【${t.name}】）`,{showPositiveFloating:!0}),n=Math.max(0,a.actualDelta);Gn(`<span class="text-blue-300">${r}【${t.name}】将魔力翻倍，回复 ${n} 点魔力</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】当前魔力为0，未获得额外魔力</span>`);return void h()}if('modao_energy_barrier'===t.id){b();const a=Math.min(5,Math.max(0,Math.floor(n.mp)));a>0&&Qa(e,-a,`法力变化（${r}【${t.name}】）`);const o=2*a;return o>0&&(va(e,A.ARMOR,o,{source:t.id}),Un(e,o,'shield','+'),'player'===e&&ma(o,`卡牌【${t.name}】`)),Gn(`<span class="text-cyan-300">${r}【${t.name}】消耗 ${a} 点魔力，获得 ${o} 点护甲</span>`),void h()}if('modao_mana_armor'===t.id){b();const a=Math.max(0,Math.floor(n.mp));let o=0;if(a>0){const r=Math.max(0,Fa(n,A.ARMOR));va(e,A.ARMOR,a,{source:t.id}),o=Math.max(0,Fa(n,A.ARMOR)-r),o>0&&(Un(e,o,'shield','+'),'player'===e&&ma(o,`卡牌【${t.name}】`))}return Gn(`<span class="text-cyan-300">${r}【${t.name}】按当前魔力获得 ${o} 点护甲</span>`),void h()}if('modao_wager'===t.id){b();const a=Math.max(0,Math.floor(g));if(a<=0)return Gn(`<span class="text-gray-400">${r}【${t.name}】点数不足，未触发转化</span>`),void h();if(!en(e,a,`法力变化（${r}【${t.name}】）`))return Gn(`<span class="text-gray-400">${r}【${t.name}】魔力不足，未能转化为增伤</span>`),void h();const o=Math.max(0,Fa(n,A.DAMAGE_BOOST));va(e,A.DAMAGE_BOOST,a,{source:t.id});const l=Math.max(0,Fa(n,A.DAMAGE_BOOST)-o);return Gn(`<span class="text-rose-300">${r}【${t.name}】消耗 ${a} 点魔力，获得 ${l} 层增伤</span>`),void h()}if('yanhan_spell_echo'===t.id)return b(),Kt.value[e]+=1,Gn(`<span class="text-sky-300">${r}【${t.name}】生效：下一张魔法牌将额外结算1次</span>`),void h();if('bloodpool_life_wall'===t.id){b();const a=Math.max(0,Math.floor(n.maxHp-n.hp));x();let o=0;if(a>0){const r=Math.max(0,Fa(n,A.ARMOR));va(e,A.ARMOR,a,{source:t.id}),o=Math.max(0,Fa(n,A.ARMOR)-r),o>0&&(Un(e,o,'shield','+'),'player'===e&&ma(o,`卡牌【${t.name}】`))}return Gn(o>0?`<span class="text-rose-300">${r}【${t.name}】按已损失生命获得 ${o} 点护甲</span>`:`<span class="text-gray-400">${r}【${t.name}】当前未损失生命，未获得额外护甲</span>`),void h()}b();const a=x();if('enemy_rose_nectar_discipline'===t.id){if(Fa(o,A.BIND)>0){const e=Math.max(0,Math.floor(g));e>0&&(va(l,A.POISON,e,{source:t.id}),Gn(`<span class="text-emerald-300">${r}【${t.name}】触发：目标已束缚，施加 ${e} 层中毒</span>`))}}a||'c5'===t.id&&(n.mp+=5,Un(e,5,'mana','+')),h()}else if(t.type===S.PHYSICAL||t.type===S.MAGIC){if('burn_critical_boil'===t.id){const a=Math.max(0,Fa(o,A.COLD)),i=Math.max(0,Fa(o,A.BURN)),s=Math.max(0,Math.min(i,Math.floor(a/2))),c=2*s,d=4*s;if(s>0){Wa(o,A.COLD,c),Wa(o,A.BURN,s);const a=ua(l,o,d,`卡牌【${t.name}】`);a>0&&Un(l,a,'true','-'),Gn(`<span class="text-orange-300">${r}【${t.name}】按2:1消耗了 ${c} 层寒冷与 ${s} 层燃烧，造成 ${a} 点真实伤害</span>`),ka(e,l,t,g,1,1,a,a);const n=ai(o);for(const e of n.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】目标寒冷与燃烧不足以按2:1进行消耗</span>`),ka(e,l,t,g,1,1,0,0);return yn(e,t,n,l),x(),void h()}const a='yanhan_frost_burst'===t.id;a&&x();const s=Fa(o,A.BURN),c=Math.max(1,Math.floor(t.hitCount??1)),d=Math.max(0,Fa(o,A.SWARM));let u='enemy_moth_swarm_burst'===t.id?Math.max(0,Fa(n,A.SWARM)):0,m=!1;if('modao_echo_feedback'===t.id&&(u+=d),'modao_mana_hurricane'===t.id){const a=Math.min(9,Math.max(0,Math.floor(n.mp))),o=3*Math.floor(a/3),l=Math.floor(o/3);o>0&&Qa(e,-o,`法力变化（${r}【${t.name}】）`),u+=l,Gn(`<span class="text-blue-300">${r}【${t.name}】额外消耗 ${o} 点魔力，追加 ${l} 次攻击</span>`)}if('modao_ring_collapse'===t.id){const a=Math.min(20,Math.max(0,Math.floor(n.mp))),o=4*Math.floor(a/4),l=Math.floor(o/4);o>0&&Qa(e,-o,`法力变化（${r}【${t.name}】）`),u+=l,Gn(`<span class="text-blue-300">${r}【${t.name}】额外消耗 ${o} 点魔力，追加 ${l} 次攻击</span>`)}if('modao_arcane_lance'===t.id&&n.mp>=8){en(e,4,`法力变化（${r}【${t.name}】额外结算）`)&&(u+=1,m=!0,Gn(`<span class="text-blue-300">${r}【${t.name}】额外消耗4点魔力，追加一次1.5倍伤害</span>`))}const p=c+u;if('yanhan_cold_chamber_duplicate'===t.id){const e=Fa(o,A.COLD);e>0?(va(l,A.COLD,e,{source:t.id}),Gn(`<span class="text-sky-300">${r}【${t.name}】使敌方寒冷翻倍（+${e}）</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】敌方当前无寒冷，未触发翻倍</span>`)}p>1&&Gn(`<span class="text-violet-300">${r}【${t.name}】进行 ${p} 段攻击</span>`);let f=0,y=0;for(let a=0;a<p;a++){let c=t;const d='burn_scorch_wind'===t.id?Math.floor(.5*g)+s:'burn_detonation'===t.id?Math.floor(s):'yanhan_frost_burst'===t.id?Math.max(0,Fa(o,A.COLD)):'modao_mana_hurricane'===t.id?Math.max(0,12-Math.floor(g)):'modao_prism_flow'===t.id?Math.floor(g*(.9+Math.min(2.1,.3*Math.floor(Math.max(0,n.mp)/2)))):'modao_arcane_lance'===t.id&&m&&a===p-1?Math.floor(1.5*g):'enemy_rose_wangzhi_whip'===t.id&&Fa(o,A.BIND)>0?Math.floor(g)+2:null;null!==d&&(c={...t,damageLogic:{mode:'fixed',value:Math.floor(d)}});const{damage:u,isTrueDamage:v,logs:h}=ti({finalPoint:g,card:c,attackerEffects:n.effects,defenderEffects:o.effects,relicModifiers:Rt}),b='player'===l?sa(u,`${i}受击`):u,{actualDamage:x,logs:k}=da(l,o,b,v,`卡牌【${t.name}】`),E=p>1?`第${a+1}段`:'',N=v?'text-zinc-500':'text-red-400';if(Gn(`${r}【${t.name}】${E}点数${g}，造成 <span class="${N} font-bold">${x}</span> 点伤害`),x>0){const e=v?'true':t.type===S.MAGIC?'magic':'physical';Un(l,x,e,'-')}if('modao_magic_sword'===t.id&&x>0&&(f+=x),x>0&&(y+=x),t.type===S.PHYSICAL&&!v&&x>0){if(Fa(o,A.THORNS)>0){let t=Math.max(0,Math.floor(.5*x));if('player'===e&&(t=sa(t,'荆棘反弹')),t>0){const{actualDamage:a,logs:o}=da(e,n,t,!1,'荆棘反弹');a>0&&Un(e,a,'physical','-'),Gn(`<span class="text-lime-300">${i}[荆棘] 反弹了 ${a} 点伤害给${r}</span>`);for(const e of o){const t=e.startsWith('受到')?`${r}${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}const l=ai(n);for(const e of l.logs)Gn(`<span class="text-violet-300 text-[9px]">${e}</span>`)}}}const C=ni(n);for(const e of C)Gn(`<span class="text-sky-300 text-[9px]">${r}: ${e}</span>`);for(const e of h)e.startsWith('原始伤害:')||Gn(`<span class="text-gray-500 text-[9px]">${e}</span>`);for(const e of k){const t=e.startsWith('受到')?`${i}${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}if(ka(e,l,t,g,a+1,p,b,x),yn(e,t,n,l),o.hp<=0)break}if('modao_magic_sword'===t.id&&f>0){const a=Qa(e,f,`法力变化（${r}【${t.name}】）`,{showPositiveFloating:!0}),n=Math.max(0,a.actualDelta);Gn(`<span class="text-blue-300">${r}【${t.name}】回收 ${n} 点魔力</span>`)}if('bloodpool_siphon_slash'===t.id){const a=Math.max(0,Math.floor(.5*y)),{healed:n}=ya(e,a);Gn(`<span class="text-green-300">${r}【${t.name}】吸血回复 ${n} 点生命</span>`)}if('bloodpool_vital_reservoir'===t.id){const a=Math.max(0,Math.floor(y));if(a>0){const o=n.maxHp,l=va(e,A.TEMP_MAX_HP,a,{source:t.id}),i=Math.max(0,n.maxHp-o);Gn(l&&i>0?`<span class="text-rose-300">${r}【${t.name}】临时生命上限 +${i}</span>`:`<span class="text-gray-400">${r}【${t.name}】未能获得临时生命上限</span>`)}else Gn(`<span class="text-gray-400">${r}【${t.name}】未造成伤害，未获得临时生命上限</span>`)}const v=Math.max(0,Fa(n,A.INK_CREATION));if(v>0&&y>0){const e=Math.max(0,Math.floor(g*v));e>0&&(va(l,A.CORROSION,e,{source:'effect:ink_creation'}),Gn(`<span class="text-emerald-300">${r}[笔墨造物] 攻击命中后附加 ${e} 层侵蚀</span>`))}if(a||x(),'burn_kindle'===t.id){const e=Math.max(0,Fa(o,A.BURN));e>0?(va(l,A.BURN,e,{source:t.id}),Gn(`<span class="text-orange-300">${r}【${t.name}】使对手燃烧翻倍（+${e}）</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】对手当前无燃烧，未触发翻倍</span>`)}if('bloodpool_blood_debt_strike'===t.id){const e=3;va(l,A.BLEED,e,{source:t.id})&&Gn(`<span class="text-rose-300">${r}【${t.name}】施加 ${e} 层流血</span>`)}if('bloodpool_scar_burst'===t.id){const a=on(l,`${r}【${t.name}】`);ka(e,l,t,g,1,1,a,a);const n=Math.max(0,Math.floor(.5*g));n>0&&va(l,A.BLEED,n,{source:t.id})&&Gn(`<span class="text-rose-300">${r}【${t.name}】追加施加 ${n} 层流血</span>`)}if('yanhan_feedback_freeze_wheel'===t.id){const a=Math.max(0,Math.floor(Fa(o,A.COLD)/2));a>0?(va(e,A.ARMOR,a,{source:t.id}),Un(e,a,'shield','+'),'player'===e&&ma(a,`卡牌【${t.name}】`),Gn(`<span class="text-cyan-300">${r}【${t.name}】回授获得 ${a} 点护甲</span>`)):Gn(`<span class="text-gray-400">${r}【${t.name}】敌方寒冷不足，未获得额外护甲</span>`)}if('enemy_blissbee_aphro_stinger'===t.id){if(Fa(o,A.VULNERABLE)>0){const e=2;e>0&&va(l,A.POISON,e,{source:t.id}),Gn(`<span class="text-emerald-300">${r}【${t.name}】触发：对手易伤存在，额外施加 ${e} 层中毒</span>`)}}if('enemy_blissbee_precise_harvest'===t.id){if(Fa(o,A.POISON)>0){const e=Math.max(0,Math.floor(.5*g));e>0&&va(l,A.SHOCK,e,{source:t.id}),Gn(`<span class="text-indigo-300">${r}【${t.name}】触发：对手中毒存在，额外施加 ${e} 层电击</span>`)}}if('enemy_rose_life_drain'===t.id){if(Fa(o,A.BIND)>0){const a=Math.max(0,Math.floor(g)),{healed:n}=ya(e,a);n>0&&Gn(`<span class="text-green-300">${r}【${t.name}】触发：目标已束缚，回复了 ${n} 点生命</span>`)}}if('enemy_ursula_whip_punish'===t.id){if(Fa(o,A.BIND)>0){const e=Math.max(0,Math.floor(.5*g));e>0&&(va(l,A.VULNERABLE,e,{source:t.id}),Gn(`<span class="text-fuchsia-300">${r}【${t.name}】触发：目标已束缚，额外施加 ${e} 层易伤</span>`))}}if('enemy_floating_page_sensory_infusion'===t.id){const e=Math.max(0,Fa(o,A.CORROSION));e>0&&(va(l,A.POISON,e,{source:t.id}),Gn(`<span class="text-emerald-300">${r}【${t.name}】触发：按目标侵蚀层数附加了 ${e} 层中毒</span>`))}if('enemy_floating_page_forced_immersion'===t.id){Fa(o,A.BIND)>0&&(va(l,A.COGNITIVE_INTERFERENCE,1,{source:t.id}),Gn(`<span class="text-violet-300">${r}【${t.name}】触发：目标已束缚，施加 1 层认知干涉</span>`))}if('enemy_muxinlan_unstable_reagent'===t.id){const e=Math.max(0,Math.floor(.5*g));if(e>0){const a=Ua[Math.floor(Math.random()*Ua.length)];va(l,a,e,{source:t.id}),Gn(`<span class="text-fuchsia-300">${r}【${t.name}】附加了 ${e} 层${Ha[a]?.name??a}</span>`)}}h()}else h()};(()=>{const e=y&&'basic_point_suppress'===o.id?Math.max(0,Nn('player',o,d)):0,t=v&&'basic_point_suppress'===r.id?Math.max(0,Nn('enemy',r,u)):0;if(e>0&&r.id!==ue.id){const t=u;u=Math.max(0,u-e);const a=Math.max(0,t-u);a>0&&(me.value.enemyBaseDice=u,Gn(`<span class="text-amber-300">我方【${o.name}】使敌方当前骰子点数 -${a}（${t}→${u}）</span>`))}if(t>0&&o.id!==ue.id){const e=d;d=Math.max(0,d-t);const a=Math.max(0,e-d);a>0&&(me.value.playerBaseDice=d,Gn(`<span class="text-amber-300">敌方【${r.name}】使我方当前骰子点数 -${a}（${e}→${d}）</span>`))}})();const k=[];let E=null;if(y&&k.push({source:'player',card:o,type:o.type,baseDice:d}),v){const e={source:'enemy',card:r,type:r.type,baseDice:u};o.traits.combo?E=e:k.push(e)}const N=e=>e===S.FUNCTION?3:e===S.MAGIC?2:e===S.PHYSICAL?1:0;k.sort((e,t)=>N(t.type)-N(e.type));const C=async e=>{if(await x(e.source,e.card,e.baseDice),e.type!==S.MAGIC)return;const t=Math.max(0,Kt.value[e.source]);if(t<=0)return;Kt.value[e.source]=t-1;const a='player'===e.source?'我方':'敌方';Gn(`<span class="text-sky-300">${a}[复咒] 下一张魔法额外结算一次</span>`),De.value||(await Na(320),De.value||await x(e.source,e.card,e.baseDice))};if(2===k.length&&k.every(e=>e.type===S.DODGE||e.type===S.FUNCTION)){if(await Promise.all(k.map(e=>C(e))),De.value)return;await Na(630)}else for(const e of k){if(De.value)break;if(await C(e),De.value)break;await Na(630)}if(xn(),De.value)return;if(o.traits.combo){if(o.traits.draw){const{drawn:e,newDeck:t,newDiscard:a}=Fn(1,me.value.playerDeck,me.value.discardPile);me.value.playerDeck=t,me.value.discardPile=a,me.value.playerHand=[...me.value.playerHand,...e]}if(me.value.playerHand.length>0&&P.value.hp>0&&H.value.hp>0)return me.value.playerSelectedCard=null,void(me.value.phase=T.PLAYER_INPUT);if(E&&P.value.hp>0&&H.value.hp>0){if(De.value)return;if(await C(E),De.value)return;await Na(630)}}if(P.value.hp<=0||H.value.hp<=0)return;const M=Fa(P.value,A.ARMOR),w=qa(P.value),D=qa(H.value),V=Fa(P.value,A.ARMOR),B=Math.max(0,M-V),O=ta('yanhan_seal_circuit');if(O>0&&B>0){const e=Math.max(0,Math.floor(B*O/3));e>0&&(jt.value+=e,la(`[封存回路] 护甲衰减损失 ${B}，存储 ${e} 点魔力用于下回合。`))}const I=ta('yanhan_reverse_phase_shell');if(I>0&&zt.value>=10){const e=2*I;va('enemy',A.COLD,e,{source:'relic:yanhan_reverse_phase_shell'})&&la(`[反相壳层] 本回合累计受伤 ${zt.value}，对敌方施加 ${e} 层寒冷。`)}for(const e of[...w,...D])Gn(`<span class="text-gray-500 text-[9px]">${e}</span>`);ba('onTurnEnd');const L=ta('modao_magic_doll');if(L>0&&P.value.hp>0&&H.value.hp>0)for(let e=0;e<L;e++){if(!en('player',1,'魔法玩偶'))break;const{actualDamage:e,logs:t}=da('enemy',H.value,2,!1,'魔法玩偶');e>0&&Un('enemy',e,'magic','-'),la(`[魔法玩偶] 消耗1点魔力，对敌方造成 ${e} 点伤害。`);for(const e of t){const t=e.startsWith('受到')?`敌方${e}`:e;Gn(`<span class="text-gray-500 text-[9px]">${t}</span>`)}if(H.value.hp<=0)break}me.value.discardPile=[...me.value.discardPile,...me.value.playerHand],me.value.playerHand=[],me.value.turn+=1,me.value.phase=T.TURN_START}finally{at.value=!1}};(0,o.watch)(()=>me.value.phase,e=>{De.value||e===T.RESOLUTION&&me.value.playerSelectedCard&&me.value.enemyIntentCard&&!he.value&&to(me.value.playerSelectedCard,me.value.enemyIntentCard,me.value.playerBaseDice,me.value.enemyBaseDice)});return(0,o.watch)(()=>P.value.hp,(e,t)=>{if(De.value)return;if(!Number.isFinite(e)||!Number.isFinite(t))return;const a=.5*Math.max(1,P.value.maxHp),n=(t>a?1:t<a?-1:0)*(e>a?1:e<a?-1:0)===-1,o=ta('bloodpool_halfline_resonance');if(n&&o>0&&H.value.hp>0)for(let e=0;e<o;e+=1){if(on('enemy',`[半阈共振核] 阈值跨越触发（${e+1}/${o}）`)<=0||H.value.hp<=0)break}const r=ta('bloodpool_critical_rebound');if(r>0&&!qt.value&&e>0&&e<a){qt.value=!0;const{healed:e}=ya('player',5*r);la(`[危线回流] 首次低于半血，回复 ${e} 点生命。`)}}),(0,o.watch)([()=>P.value.hp,()=>H.value.hp,()=>Fa(P.value,A.POISON_AMOUNT),()=>Fa(H.value,A.POISON_AMOUNT)],()=>{if(!De.value&&!pn){pn=!0;try{fn('player'),fn('enemy')}finally{pn=!1}}}),(0,o.watch)([()=>P.value.hp,()=>H.value.hp],([e,t])=>{if(De.value)return;let a=null;e<=0?a=!1:t<=0&&(a=!0),null!==a&&(De.value=!0,(async e=>{const t=++Vt;if(await Na(500),t!==Vt)return;if(await Na(500),t!==Vt)return;if(xn(),we.value=e?'win':'lose',me.value.phase=e?T.WIN:T.LOSE,await Na(1500),t!==Vt)return;It(0);const a=L(P.value);Fa(a,A.TEMP_MAX_HP)>0&&Ya(a,A.TEMP_MAX_HP),n('endCombat',e,a,[...me.value.logs],[...Le.value])})(a))}),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{ref_key:'combatRootEl',ref:Ve,class:(0,o.normalizeClass)(['combat-root w-full h-full bg-[#1a1a22] text-dungeon-paper font-ui relative overflow-hidden select-none',[(0,o.unref)(xe)?'animate-shake':'',(0,o.unref)(_e)?'animate-impact-shake':'']]),style:(0,o.normalizeStyle)((0,o.unref)(Oe))},[(0,o.createCommentVNode)(' Background '),(0,o.createElementVNode)('div',Ci,[(0,o.createCommentVNode)(' Dynamic background image '),(0,o.unref)(B)?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:(0,o.unref)(B),class:'absolute inset-0 w-full h-full object-cover',alt:'',onError:O},null,40,Mi)):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Fallback gradient '),t[32]||(t[32]=(0,o.createElementVNode)('div',{class:'absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(40,35,50,0.5),_#0e0e14_90%)]'},null,-1)),(0,o.createCommentVNode)(' Darken overlay for readability '),t[33]||(t[33]=(0,o.createElementVNode)('div',{class:'absolute inset-0 bg-black/40'},null,-1))]),t[56]||(t[56]=(0,o.createElementVNode)('div',{class:'absolute inset-0 opacity-20 z-0 mix-blend-overlay bg-[length:200px] bg-repeat',style:{'background-image':'url(\'https://www.transparenttextures.com/patterns/dark-matter.png\')'}},null,-1)),(0,o.createCommentVNode)(' Top Left: Settings '),(0,o.createElementVNode)('div',wi,[(0,o.createElementVNode)('button',{class:'w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg',onClick:t[0]||(t[0]=e=>Ee.value=!(0,o.unref)(Ee))},[(0,o.createVNode)((0,o.unref)(Zl),{class:'size-5'}),t[34]||(t[34]=(0,o.createElementVNode)('span',{class:'sr-only'},'设置',-1))]),(0,o.createElementVNode)('button',{class:'w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg',onClick:t[1]||(t[1]=e=>n('openDeck'))},[(0,o.createVNode)((0,o.unref)(y),{class:'size-5'}),t[35]||(t[35]=(0,o.createElementVNode)('span',{class:'sr-only'},'卡组',-1))]),(0,o.createElementVNode)('button',{class:'w-10 h-10 bg-[#252030]/90 border border-white/10 rounded-xl text-dungeon-gold flex items-center justify-center hover:bg-[#352a40] hover:border-white/20 active:scale-95 transition-all shadow-lg',onClick:t[2]||(t[2]=e=>n('openRelics'))},[(0,o.createVNode)((0,o.unref)(v),{class:'size-5'}),t[36]||(t[36]=(0,o.createElementVNode)('span',{class:'sr-only'},'物品',-1))]),(0,o.unref)(Ee)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Di,[(0,o.createElementVNode)('div',Si,[(0,o.createElementVNode)('label',Ai,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,o.isRef)(Ne)?Ne.value=e:null),type:'checkbox',class:'accent-dungeon-gold'},null,512),[[o.vModelCheckbox,(0,o.unref)(Ne)]]),t[37]||(t[37]=(0,o.createElementVNode)('span',null,'战斗加速（2x）',-1))]),(0,o.createElementVNode)('button',{class:'h-8 rounded-lg border border-white/20 bg-[#252030]/80 px-2 text-xs text-dungeon-gold hover:border-dungeon-gold/60 hover:bg-[#352a40] transition-colors',onClick:t[4]||(t[4]=(...e)=>(0,o.unref)(yl)&&(0,o.unref)(yl)(...e))},' 切换全屏 ')])])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createCommentVNode)(' Top Center: Turn Counter '),(0,o.createElementVNode)('div',Vi,[(0,o.createElementVNode)('div',Ti,[t[38]||(t[38]=(0,o.createElementVNode)('span',{class:'text-xs text-white/60 tracking-widest'},'回合',-1)),(0,o.createElementVNode)('span',Bi,(0,o.toDisplayString)((0,o.unref)(me).turn),1),(0,o.createElementVNode)('div',{class:'mt-1.5 w-44 relative pointer-events-auto',style:(0,o.normalizeStyle)((0,o.unref)(Ge)),onMouseenter:Fe,onMouseleave:je},[(0,o.createElementVNode)('div',$i,[(0,o.createElementVNode)('div',{class:'h-full bg-gradient-to-r from-amber-400 via-orange-400 to-red-500 transition-all duration-500',style:(0,o.normalizeStyle)(Ma({width:`${(0,o.unref)(Ue)}%`},500))},null,4)]),(0,o.unref)(Pe)&&(0,o.unref)(Re)>50?((0,o.openBlock)(),(0,o.createElementBlock)('div',Oi,' 当前疲劳度：'+(0,o.toDisplayString)((0,o.unref)(Re))+'/300。进入战斗 +10，出牌 +1。达到200后每回合附加疲劳并额外附加中毒，300时直接战败。 ',1)):(0,o.createCommentVNode)('v-if',!0)],36),(0,o.unref)(gt).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ii,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(gt),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.key,class:'px-1 text-left'},[(0,o.createElementVNode)('div',Li,(0,o.toDisplayString)(e.title),1),(0,o.createElementVNode)('div',Ri,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.lines,(t,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`${e.key}-line-${a}`,class:'text-sm leading-relaxed text-white/90 [text-shadow:0_1px_2px_rgba(0,0,0,0.9)]'},(0,o.toDisplayString)(t),1))),128))])]))),128))])):(0,o.createCommentVNode)('v-if',!0)])]),(0,o.createCommentVNode)(' Battlefield Layer '),(0,o.createElementVNode)('div',Pi,[(0,o.createCommentVNode)(' Enemy Position: Top Right '),(0,o.createElementVNode)('div',Hi,[(0,o.createCommentVNode)(' Enemy Intent Card '),(0,o.unref)(Sa)&&(0,o.unref)(me).enemyIntentCard?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ui,[(0,o.createElementVNode)('div',zi,[t[39]||(t[39]=(0,o.createElementVNode)('div',{class:'absolute -top-5 left-0 text-amber-200/80 text-[10px] px-2 py-0.5 rounded'},' 敌方意图 ',-1)),(0,o.createElementVNode)('div',Gi,[(0,o.createVNode)(hi,{card:(0,o.unref)(me).enemyIntentCard,'mask-level':(0,o.unref)(yt),'is-enemy':'',disabled:''},null,8,['card','mask-level'])])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Enemy Dice '),(0,o.unref)(he)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,class:'absolute -left-24 bottom-20 z-20 animate-float pointer-events-auto',onMouseenter:Vn,onMouseleave:Tn,onTouchstartPassive:Bn,onTouchend:$n,onTouchcancel:$n},[(0,o.createVNode)(Ni,{value:(0,o.unref)(st),rolling:(0,o.unref)(ve),'rolling-min':(0,o.unref)(H).minDice,'rolling-max':(0,o.unref)(H).maxDice,'number-class':(0,o.unref)(ft),color:'red',size:'md'},null,8,['value','rolling','rolling-min','rolling-max','number-class'])],32)),(0,o.createCommentVNode)(' Enemy Portrait '),(0,o.createElementVNode)('div',Fi,[(0,o.createElementVNode)('div',ji,[(0,o.createCommentVNode)(' Placeholder icon (shown when portrait fails to load) '),(0,o.unref)(k)?((0,o.openBlock)(),(0,o.createBlock)((0,o.unref)(Tl),{key:0,class:'w-48 h-48 text-red-900/20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2'})):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createCommentVNode)(' Enemy portrait image '),(0,o.createElementVNode)('img',{src:(0,o.unref)(b),class:'w-full h-full object-contain object-bottom',alt:'enemy portrait',onError:t[5]||(t[5]=e=>k.value=!0)},null,40,Yi)],2112))])]),(0,o.createCommentVNode)(' Enemy Status Bar '),(0,o.createElementVNode)('div',Wi,[(0,o.createElementVNode)('div',Xi,[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)((0,o.unref)(s)),1)]),(0,o.createElementVNode)('div',qi,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(Va('enemy'),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.id,class:(0,o.normalizeClass)(['combat-float-number absolute text-xl font-extrabold tracking-wide',[e.colorClass,'heal'===e.kind?'combat-float-number--heal':'']]),style:(0,o.normalizeStyle)({left:`calc(50% + ${e.leftOffset}px)`,top:`${e.topOffset}px`,animationDuration:`${e.duration}ms`})},(0,o.toDisplayString)(e.text),7))),128))]),(0,o.createCommentVNode)(' Armor Shield '),(0,o.unref)(Q)>0||(0,o.unref)(te)>0||(0,o.unref)(ne)>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ki,[(0,o.unref)(Q)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:0,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`护甲: ${(0,o.unref)(Q)}. ${G((0,o.unref)(A).ARMOR)}`,onMouseenter:t[6]||(t[6]=e=>Ln(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(Q)))),onMouseleave:Rn,onFocus:t[7]||(t[7]=e=>Ln(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(Q)))),onBlur:Rn,onTouchstartPassive:t[8]||(t[8]=e=>Pn(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(Q)))),onTouchend:Hn,onTouchcancel:Hn},[t[40]||(t[40]=(0,o.createElementVNode)('span',{class:'text-[10px] text-yellow-400'},'🛡️',-1)),(0,o.createElementVNode)('span',Ji,(0,o.toDisplayString)((0,o.unref)(Q)),1)],40,Zi)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(te)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:1,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`中毒量: ${(0,o.unref)(te)}. ${G((0,o.unref)(A).POISON_AMOUNT)}`,onMouseenter:t[9]||(t[9]=e=>Ln(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(te)))),onMouseleave:Rn,onFocus:t[10]||(t[10]=e=>Ln(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(te)))),onBlur:Rn,onTouchstartPassive:t[11]||(t[11]=e=>Pn(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(te)))),onTouchend:Hn,onTouchcancel:Hn},[t[41]||(t[41]=(0,o.createElementVNode)('span',{class:'text-[10px] text-green-400'},'☠',-1)),(0,o.createElementVNode)('span',es,(0,o.toDisplayString)((0,o.unref)(te)),1)],40,Qi)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(ne)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:2,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`临时生命上限: ${(0,o.unref)(ne)}. ${G((0,o.unref)(A).TEMP_MAX_HP)}`,onMouseenter:t[12]||(t[12]=e=>Ln(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ne)))),onMouseleave:Rn,onFocus:t[13]||(t[13]=e=>Ln(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ne)))),onBlur:Rn,onTouchstartPassive:t[14]||(t[14]=e=>Pn(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ne)))),onTouchend:Hn,onTouchcancel:Hn},[t[42]||(t[42]=(0,o.createElementVNode)('span',{class:'text-[10px] text-rose-400'},'♥',-1)),(0,o.createElementVNode)('span',as,(0,o.toDisplayString)((0,o.unref)(ne)),1)],40,ts)):(0,o.createCommentVNode)('v-if',!0)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' HP Bar '),(0,o.createElementVNode)('div',ns,[t[43]||(t[43]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#ff6666] font-bold w-6'},'HP',-1)),(0,o.createElementVNode)('div',os,[(0,o.createElementVNode)('div',{class:'absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500',style:(0,o.normalizeStyle)(Ma({width:((0,o.unref)(H).maxHp>0?(0,o.unref)(H).hp/(0,o.unref)(H).maxHp*100:0)+'%'},500))},null,4),(0,o.createElementVNode)('div',{class:'absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar',style:(0,o.normalizeStyle)(Ma({width:`${(0,o.unref)(re)}%`},500))},null,4)]),(0,o.createElementVNode)('span',rs,(0,o.toDisplayString)((0,o.unref)(H).hp)+'/'+(0,o.toDisplayString)((0,o.unref)(H).maxHp),1)]),(0,o.createCommentVNode)(' MP Bar '),(0,o.createElementVNode)('div',ls,[t[44]||(t[44]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#55aaff] font-bold w-6'},'MP',-1)),(0,o.createElementVNode)('div',is,[(0,o.createElementVNode)('div',{class:'h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500',style:(0,o.normalizeStyle)(Ma({width:`${Math.min((0,o.unref)(H).mp/20*100,100)}%`},500))},null,4)]),(0,o.createElementVNode)('span',ss,(0,o.toDisplayString)((0,o.unref)(H).mp),1)]),(0,o.createCommentVNode)(' Dice Range '),(0,o.createElementVNode)('div',cs,[t[45]||(t[45]=(0,o.createElementVNode)('span',{class:'text-[10px] text-gray-400 font-bold w-6'},'🎲',-1)),(0,o.createElementVNode)('span',ds,(0,o.toDisplayString)((0,o.unref)(H).minDice)+' ~ '+(0,o.toDisplayString)((0,o.unref)(H).maxDice),1)]),(0,o.createCommentVNode)(' Buffs/Debuffs '),(0,o.unref)(ie).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',us,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ie),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`enemy-${e.type}-${t}`,type:'button',class:(0,o.normalizeClass)(['effect-icon-btn',Z(e.polarity)]),'aria-label':`${U(e.type)}: ${G(e.type)}`,onMouseenter:t=>Ln(t,e),onMouseleave:Rn,onFocus:t=>Ln(t,e),onBlur:Rn,onTouchstartPassive:t=>Pn(t,e),onTouchend:Hn,onTouchcancel:Hn},[W(e.type)?((0,o.openBlock)(),(0,o.createElementBlock)('i',{key:0,class:(0,o.normalizeClass)([W(e.type),'text-[14px] leading-none']),style:(0,o.normalizeStyle)(X(e.type)),'aria-hidden':'true'},null,6)):((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(K(e.type)),{key:1,class:'size-3.5'})),e.stacks>1?((0,o.openBlock)(),(0,o.createElementBlock)('span',ps,(0,o.toDisplayString)(e.stacks),1)):(0,o.createCommentVNode)('v-if',!0)],42,ms))),128))])):(0,o.createCommentVNode)('v-if',!0)])]),(0,o.createCommentVNode)(' Player Position: Bottom Left '),(0,o.createElementVNode)('div',fs,[(0,o.createCommentVNode)(' Player Dice '),(0,o.unref)(he)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['absolute -top-[1rem] left-[140%] -translate-x-1/2 z-20 animate-float pointer-events-auto',(0,o.unref)(ct)?'cursor-pointer':'cursor-default']),title:(0,o.unref)(dt),style:{'animation-delay':'1s'},onClick:Dn},[(0,o.createVNode)(Ni,{value:(0,o.unref)(it),rolling:(0,o.unref)(ve),'rolling-min':(0,o.unref)(P).minDice,'rolling-max':(0,o.unref)(P).maxDice,'number-class':(0,o.unref)(pt),color:'gold',size:'md'},null,8,['value','rolling','rolling-min','rolling-max','number-class']),(0,o.unref)(Ht)>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['absolute left-1/2 top-[5.9rem] -translate-x-1/2 rounded-md border border-amber-300/35 bg-black/60 px-2 py-1 text-[10px] whitespace-nowrap',(0,o.unref)(ct)?'text-amber-200':'text-amber-200/70'])},' 重掷次数：'+(0,o.toDisplayString)((0,o.unref)(Ht)),3)):(0,o.createCommentVNode)('v-if',!0)],10,gs)),(0,o.createCommentVNode)(' Player Portrait '),(0,o.createElementVNode)('div',ys,[(0,o.createElementVNode)('div',vs,[(0,o.createCommentVNode)(' Placeholder glow (shown when portrait fails to load) '),(0,o.unref)(x)?((0,o.openBlock)(),(0,o.createElementBlock)('div',hs)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createCommentVNode)(' Player portrait image '),(0,o.createElementVNode)('img',{src:(0,o.unref)(h),class:'w-full h-full object-contain object-bottom',alt:'player portrait',onError:t[15]||(t[15]=e=>x.value=!0)},null,40,bs)],2112))])]),(0,o.createCommentVNode)(' Player Status Bar '),(0,o.createElementVNode)('div',xs,[t[52]||(t[52]=(0,o.createElementVNode)('div',{class:'flex justify-between text-xs text-white/80 font-bold mb-1.5'},[(0,o.createElementVNode)('span',null,'冒险者')],-1)),(0,o.createElementVNode)('div',_s,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(Va('player'),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.id,class:(0,o.normalizeClass)(['combat-float-number absolute text-xl font-extrabold tracking-wide',[e.colorClass,'heal'===e.kind?'combat-float-number--heal':'']]),style:(0,o.normalizeStyle)({left:`calc(50% + ${e.leftOffset}px)`,top:`${e.topOffset}px`,animationDuration:`${e.duration}ms`})},(0,o.toDisplayString)(e.text),7))),128))]),(0,o.createCommentVNode)(' Armor Shield '),(0,o.unref)(J)>0||(0,o.unref)(ee)>0||(0,o.unref)(ae)>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',ks,[(0,o.unref)(J)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:0,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`护甲: ${(0,o.unref)(J)}. ${G((0,o.unref)(A).ARMOR)}`,onMouseenter:t[16]||(t[16]=e=>Ln(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(J)),'right')),onMouseleave:Rn,onFocus:t[17]||(t[17]=e=>Ln(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(J)),'right')),onBlur:Rn,onTouchstartPassive:t[18]||(t[18]=e=>Pn(e,F((0,o.unref)(A).ARMOR,(0,o.unref)(J)),'right')),onTouchend:Hn,onTouchcancel:Hn},[t[46]||(t[46]=(0,o.createElementVNode)('span',{class:'text-[10px] text-yellow-400'},'🛡️',-1)),(0,o.createElementVNode)('span',Ns,(0,o.toDisplayString)((0,o.unref)(J)),1)],40,Es)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(ee)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:1,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`中毒量: ${(0,o.unref)(ee)}. ${G((0,o.unref)(A).POISON_AMOUNT)}`,onMouseenter:t[19]||(t[19]=e=>Ln(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(ee)),'right')),onMouseleave:Rn,onFocus:t[20]||(t[20]=e=>Ln(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(ee)),'right')),onBlur:Rn,onTouchstartPassive:t[21]||(t[21]=e=>Pn(e,F((0,o.unref)(A).POISON_AMOUNT,(0,o.unref)(ee)),'right')),onTouchend:Hn,onTouchcancel:Hn},[t[47]||(t[47]=(0,o.createElementVNode)('span',{class:'text-[10px] text-green-400'},'☠',-1)),(0,o.createElementVNode)('span',Ms,(0,o.toDisplayString)((0,o.unref)(ee)),1)],40,Cs)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(ae)>0?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:2,type:'button',class:'status-effect-value-btn flex items-center gap-1','aria-label':`临时生命上限: ${(0,o.unref)(ae)}. ${G((0,o.unref)(A).TEMP_MAX_HP)}`,onMouseenter:t[22]||(t[22]=e=>Ln(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ae)),'right')),onMouseleave:Rn,onFocus:t[23]||(t[23]=e=>Ln(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ae)),'right')),onBlur:Rn,onTouchstartPassive:t[24]||(t[24]=e=>Pn(e,F((0,o.unref)(A).TEMP_MAX_HP,(0,o.unref)(ae)),'right')),onTouchend:Hn,onTouchcancel:Hn},[t[48]||(t[48]=(0,o.createElementVNode)('span',{class:'text-[10px] text-rose-400'},'♥',-1)),(0,o.createElementVNode)('span',Ds,(0,o.toDisplayString)((0,o.unref)(ae)),1)],40,ws)):(0,o.createCommentVNode)('v-if',!0)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' HP Bar '),(0,o.createElementVNode)('div',Ss,[t[49]||(t[49]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#ff6666] font-bold w-6'},'HP',-1)),(0,o.createElementVNode)('div',As,[(0,o.createElementVNode)('div',{class:'absolute inset-y-0 left-0 z-10 bg-gradient-to-r from-[#cc2200] to-[#ee3311] rounded-full transition-all duration-500',style:(0,o.normalizeStyle)(Ma({width:((0,o.unref)(P).maxHp>0?(0,o.unref)(P).hp/(0,o.unref)(P).maxHp*100:0)+'%'},500))},null,4),(0,o.createElementVNode)('div',{class:'absolute inset-y-0 left-0 z-20 bg-green-600/75 rounded-full transition-all duration-500 poison-wave-bar',style:(0,o.normalizeStyle)(Ma({width:`${(0,o.unref)(oe)}%`},500))},null,4)]),(0,o.createElementVNode)('span',Vs,(0,o.toDisplayString)((0,o.unref)(P).hp)+'/'+(0,o.toDisplayString)((0,o.unref)(P).maxHp),1)]),(0,o.createCommentVNode)(' MP Bar '),(0,o.createElementVNode)('div',Ts,[t[50]||(t[50]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#55aaff] font-bold w-6'},'MP',-1)),(0,o.createElementVNode)('div',Bs,[(0,o.createElementVNode)('div',{class:'h-full bg-gradient-to-r from-[#0066cc] to-[#0088ee] rounded-full transition-all duration-500',style:(0,o.normalizeStyle)(Ma({width:`${Math.min((0,o.unref)(P).mp/20*100,100)}%`},500))},null,4)]),(0,o.createElementVNode)('span',$s,(0,o.toDisplayString)((0,o.unref)(P).mp),1)]),(0,o.createCommentVNode)(' Dice Range '),(0,o.createElementVNode)('div',Os,[t[51]||(t[51]=(0,o.createElementVNode)('span',{class:'text-[10px] text-gray-400 font-bold w-6'},'🎲',-1)),(0,o.createElementVNode)('span',Is,(0,o.toDisplayString)((0,o.unref)(P).minDice)+' ~ '+(0,o.toDisplayString)((0,o.unref)(P).maxDice),1)]),(0,o.createCommentVNode)(' Buffs/Debuffs '),(0,o.unref)(le).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ls,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(le),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`player-${e.type}-${t}`,type:'button',class:(0,o.normalizeClass)(['effect-icon-btn',Z(e.polarity)]),'aria-label':`${U(e.type)}: ${G(e.type)}`,onMouseenter:t=>Ln(t,e,'right'),onMouseleave:Rn,onFocus:t=>Ln(t,e,'right'),onBlur:Rn,onTouchstartPassive:t=>Pn(t,e,'right'),onTouchend:Hn,onTouchcancel:Hn},[W(e.type)?((0,o.openBlock)(),(0,o.createElementBlock)('i',{key:0,class:(0,o.normalizeClass)([W(e.type),'text-[14px] leading-none']),style:(0,o.normalizeStyle)(X(e.type)),'aria-hidden':'true'},null,6)):((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(K(e.type)),{key:1,class:'size-3.5'})),e.stacks>1?((0,o.openBlock)(),(0,o.createElementBlock)('span',Ps,(0,o.toDisplayString)(e.stacks),1)):(0,o.createCommentVNode)('v-if',!0)],42,Rs))),128))])):(0,o.createCommentVNode)('v-if',!0)])])]),(0,o.createCommentVNode)(' Card Animation Layer '),(0,o.createElementVNode)('div',Hs,[(0,o.unref)(ht)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'absolute player-played-card',style:(0,o.normalizeStyle)((0,o.unref)(wa))},[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)((0,o.unref)(ht).entered?'player-played-card-bob':'')},[(0,o.createVNode)(hi,{card:(0,o.unref)(ht).card,disabled:''},null,8,['card'])],2)],4)):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(_t),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.id,class:(0,o.normalizeClass)(['resolved-card-visual','player'===e.source?'resolved-card-visual--player':'resolved-card-visual--enemy'])},[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['resolved-card-visual-inner',Da(e)])},[(0,o.createVNode)(hi,{card:e.card,disabled:''},null,8,['card'])],2)],2))),128))]),(0,o.createCommentVNode)(' UI Layer (HUD) '),(0,o.createElementVNode)('div',Us,[(0,o.createCommentVNode)(' Center: Clash Zone '),(0,o.createElementVNode)('div',zs,[(0,o.createCommentVNode)(' Clash Animation Stage '),(0,o.unref)(he)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Gs,[(0,o.createCommentVNode)(' Player Dice Flying In '),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['absolute right-1/2 mr-[-0.5rem] transition-all duration-300','player'===(0,o.unref)(be)||'both'===(0,o.unref)(be)?'animate-shatter':'animate-clash-left']),style:(0,o.normalizeStyle)(Ca(300))},[(0,o.createVNode)(Ni,{value:(0,o.unref)(it),rolling:!1,'rolling-min':(0,o.unref)(P).minDice,'rolling-max':(0,o.unref)(P).maxDice,color:'gold',size:'lg'},null,8,['value','rolling-min','rolling-max'])],6),(0,o.createCommentVNode)(' Enemy Dice Flying In '),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['absolute left-1/2 ml-[-0.5rem] transition-all duration-300','enemy'===(0,o.unref)(be)||'both'===(0,o.unref)(be)?'animate-shatter':'animate-clash-right']),style:(0,o.normalizeStyle)(Ca(300))},[(0,o.createVNode)(Ni,{value:(0,o.unref)(st),rolling:!1,'rolling-min':(0,o.unref)(H).minDice,'rolling-max':(0,o.unref)(H).maxDice,color:'red',size:'lg'},null,8,['value','rolling-min','rolling-max'])],6)])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createCommentVNode)(' Bottom Bar: Hand & Piles '),(0,o.createElementVNode)('div',Fs,[(0,o.createCommentVNode)(' Center: Hand Cards '),(0,o.createElementVNode)('div',js,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(me).playerHand,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:Ta(e),class:(0,o.normalizeClass)(['transition-all duration-500 origin-bottom',[Zn(e),Ba(e)?'invalid-card-shake':'']]),style:(0,o.normalizeStyle)(Ca(500)),onMouseenter:t=>(e=>{me.value.phase===T.PLAYER_INPUT&&(Xe.value=Nn('player',e,me.value.playerBaseDice),Je.value=e.name,Ke.value=En('player',e,me.value.playerBaseDice))})(e),onMouseleave:Cn,onTouchstartPassive:t=>(e=>{me.value.phase===T.PLAYER_INPUT&&(kt&&clearTimeout(kt),kt=setTimeout(()=>{me.value.phase===T.PLAYER_INPUT&&(Xe.value=Nn('player',e,me.value.playerBaseDice),Je.value=e.name,Ke.value=En('player',e,me.value.playerBaseDice))},260))})(e),onTouchend:Mn,onTouchcancel:Mn},[(0,o.createVNode)(hi,{card:Jn(e),'mask-level':(0,o.unref)(vt),disabled:(0,o.unref)(me).phase!==(0,o.unref)(T).PLAYER_INPUT&&(0,o.unref)(me).playerSelectedCard!==e,onClick:a=>Qn(e,t)},null,8,['card','mask-level','disabled','onClick'])],46,Ys))),128))]),(0,o.createCommentVNode)(' Right Corner: Skip + Active Skills '),(0,o.createElementVNode)('div',Ws,[(0,o.createElementVNode)('button',{class:'h-8 px-5 bg-[#252030]/90 border border-white/15 rounded-lg text-xs text-white/80 hover:border-amber-400 hover:text-amber-200 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed',disabled:(0,o.unref)(me).phase!==(0,o.unref)(T).PLAYER_INPUT,onClick:eo},' 跳过回合 ',8,Xs),(0,o.createElementVNode)('div',qs,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(qn),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`active-skill-slot-${e.idx}`,type:'button',class:(0,o.normalizeClass)(['w-40 h-28 rounded-xl border p-2.5 text-left transition-all shadow-lg',[e.skill?'border-zinc-200/80 bg-white text-zinc-900 hover:border-zinc-300':'border-white/15 bg-[#1b1b24]/90 text-white/45',Xn(e.idx)?'opacity-80 cursor-not-allowed':'hover:-translate-y-0.5 active:scale-[0.98]']]),disabled:Boolean(Xn(e.idx)),onClick:t=>(e=>{const t=jn.value[e];if(!t)return;const a=Xn(e);if(a)return void Gn(`<span class="text-gray-400">主动【${t.name}】无法使用：${a}</span>`);const n=Math.max(0,Math.floor(t.manaCost));if(n>0&&!en('player',n,`使用主动【${t.name}】`))return void Gn(`<span class="text-red-400">主动【${t.name}】使用失败：魔力不足。</span>`);switch(t.id){case'active_basic_reroll_self':Kn('player',t.name);break;case'active_basic_reroll_enemy':Kn('enemy',t.name);break;case'active_basic_draw':{const{drawn:e,newDeck:a,newDiscard:n}=Fn(1,me.value.playerDeck,me.value.discardPile);me.value.playerDeck=a,me.value.discardPile=n;const o=e[0];if(o)if(me.value.playerHand.length>=3){const e=Math.floor(Math.random()*me.value.playerHand.length),a=me.value.playerHand[e];me.value.playerHand.splice(e,1,o),me.value.discardPile.push(a),Gn(`<span class="text-zinc-200">主动【${t.name}】：手牌已满，随机替换了【${a.name}】→【${o.name}】。</span>`)}else me.value.playerHand=[...me.value.playerHand,o],Gn(`<span class="text-zinc-200">主动【${t.name}】：抽到【${o.name}】。</span>`);else Gn(`<span class="text-gray-400">主动【${t.name}】：牌库与弃牌堆都为空，未抽到卡牌。</span>`);break}case'active_basic_guard':{const e=pa('player',2);Gn(e>0?`<span class="text-zinc-200">主动【${t.name}】：获得 ${e} 点护甲。</span>`:`<span class="text-gray-400">主动【${t.name}】：未获得护甲。</span>`);break}case'active_basic_boost':{const e=me.value.playerBaseDice;me.value.playerBaseDice=Math.max(0,me.value.playerBaseDice+1),ge.value=Math.max(0,ge.value+1),Gn(`<span class="text-zinc-200">主动【${t.name}】：我方骰子点数 ${e} → ${me.value.playerBaseDice}</span>`);break}case'active_basic_weaken':{const e=me.value.enemyBaseDice;me.value.enemyBaseDice=Math.max(0,me.value.enemyBaseDice-1),ye.value=Math.max(0,ye.value-1),Gn(`<span class="text-zinc-200">主动【${t.name}】：敌方骰子点数 ${e} → ${me.value.enemyBaseDice}</span>`);break}default:Gn(`<span class="text-gray-400">主动【${t.name}】尚未实现效果。</span>`)}const o=Yn.value[e];if(o){o.usedCount+=1;const e=Math.max(0,Math.floor(t.Cooldown));o.nextAvailableTurn=e>0?me.value.turn+e:me.value.turn}})(e.idx)},[e.skill?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)('div',Zs,[(0,o.createElementVNode)('div',Js,(0,o.toDisplayString)(e.skill.name),1),t[53]||(t[53]=(0,o.createElementVNode)('div',{class:'text-[10px] px-1.5 py-0.5 rounded border border-zinc-300 bg-zinc-100'},'主动',-1))]),(0,o.createElementVNode)('div',Qs,[(0,o.createElementVNode)('span',ec,'MP '+(0,o.toDisplayString)(e.skill.manaCost),1),(0,o.createElementVNode)('span',tc,'CD '+(0,o.toDisplayString)(e.skill.Cooldown),1)]),(0,o.createElementVNode)('div',ac,(0,o.toDisplayString)(e.skill.description),1),(0,o.createElementVNode)('div',nc,[e.cooldownRemaining>0?((0,o.openBlock)(),(0,o.createElementBlock)('span',oc,'冷却：'+(0,o.toDisplayString)(e.cooldownRemaining)+' 回合',1)):e.maxUses?((0,o.openBlock)(),(0,o.createElementBlock)('span',rc,'次数：'+(0,o.toDisplayString)(e.usedCount)+'/'+(0,o.toDisplayString)(e.maxUses),1)):((0,o.openBlock)(),(0,o.createElementBlock)('span',lc,'可用'))])],64)):((0,o.openBlock)(),(0,o.createElementBlock)('div',ic,'空主动槽位'))],10,Ks))),128))])])]),(0,o.createCommentVNode)(' Log Feed + Piles Overlay: top-right, below parent "退出战斗" button '),(0,o.createElementVNode)('div',sc,[(0,o.createElementVNode)('div',cc,[(0,o.createElementVNode)('button',{class:'h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors',title:(0,o.unref)(Ce)?'展开日志':'折叠日志',onClick:t[25]||(t[25]=e=>Ce.value=!(0,o.unref)(Ce))},(0,o.toDisplayString)((0,o.unref)(Ce)?'日志 ▼':'日志 ▲'),9,dc),(0,o.unref)(Ce)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('div',uc,[(0,o.createCommentVNode)(' eslint-disable-next-line vue/no-v-html '),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(me).logs,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'bg-black/60 p-1 rounded border-l-2 border-gray-700',innerHTML:e},null,8,mc))),128))]))]),(0,o.createElementVNode)('div',pc,[(0,o.createElementVNode)('button',{class:'h-7 px-2 rounded-l-lg border border-r-0 border-white/10 bg-[#18141e]/90 text-[10px] text-white/50 hover:text-white/80 transition-colors',title:(0,o.unref)(Me)?'展开牌库与弃牌堆':'折叠牌库与弃牌堆',onClick:t[26]||(t[26]=e=>Me.value=!(0,o.unref)(Me))},(0,o.toDisplayString)((0,o.unref)(Me)?'牌堆 ▼':'牌堆 ▲'),9,fc),(0,o.unref)(Me)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('div',gc,[(0,o.createElementVNode)('div',yc,[(0,o.createElementVNode)('div',vc,[(0,o.createElementVNode)('button',{class:'w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-dungeon-gold active:scale-95 transition-all shadow-lg',onClick:t[27]||(t[27]=e=>ke.value='deck')},[(0,o.createVNode)((0,o.unref)(jl),{class:'size-5 text-dungeon-gold'}),(0,o.createElementVNode)('span',hc,(0,o.toDisplayString)((0,o.unref)(me).playerDeck.length),1)]),t[54]||(t[54]=(0,o.createElementVNode)('div',{class:'absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none'},' 牌库 ',-1))]),(0,o.createElementVNode)('div',bc,[(0,o.createElementVNode)('button',{class:'w-14 h-14 bg-[#252030]/90 border border-white/10 rounded-xl flex flex-col items-center justify-center hover:border-gray-400 active:scale-95 transition-all shadow-lg',onClick:t[28]||(t[28]=e=>ke.value='discard')},[(0,o.createVNode)((0,o.unref)(Jl),{class:'size-5 text-gray-400'}),(0,o.createElementVNode)('span',xc,(0,o.toDisplayString)((0,o.unref)(me).discardPile.length),1)]),t[55]||(t[55]=(0,o.createElementVNode)('div',{class:'absolute -top-8 left-1/2 -translate-x-1/2 bg-black px-2 py-1 rounded text-[10px] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none'},' 弃牌堆 ',-1))])])]))])])]),(0,o.unref)(we)?((0,o.openBlock)(),(0,o.createElementBlock)('div',_c,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['px-12 py-5 rounded-2xl border-2 text-5xl md:text-6xl font-heading tracking-[0.2em] drop-shadow-[0_0_30px_rgba(0,0,0,0.9)] animate-pulse backdrop-blur-md','win'===(0,o.unref)(we)?'bg-emerald-950/70 border-emerald-400/60 text-emerald-300':'bg-red-950/70 border-red-500/60 text-red-300'])},(0,o.toDisplayString)('win'===(0,o.unref)(we)?'胜利':'败北'),3)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(Te)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,class:(0,o.normalizeClass)(['effect-tooltip absolute z-[72] pointer-events-none','right'===(0,o.unref)(Te).align?'effect-tooltip--right text-right':'effect-tooltip--center']),style:(0,o.normalizeStyle)({left:`${(0,o.unref)(Te).x}px`,top:`${(0,o.unref)(Te).y}px`})},[(0,o.createElementVNode)('div',kc,(0,o.toDisplayString)((0,o.unref)(Te).name),1),(0,o.createElementVNode)('div',Ec,(0,o.toDisplayString)((0,o.unref)(Te).description),1),(0,o.unref)(Te).stacks>1?((0,o.openBlock)(),(0,o.createElementBlock)('div',Nc,'层数: '+(0,o.toDisplayString)((0,o.unref)(Te).stacks),1)):(0,o.createCommentVNode)('v-if',!0)],6)):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Deck/Discard Overlay '),(0,o.unref)(ke)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:2,class:'absolute inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8',onClick:t[31]||(t[31]=e=>ke.value=null)},[(0,o.createElementVNode)('div',{class:'bg-[#18141e] border border-white/10 p-6 rounded-2xl max-w-2xl w-full max-h-[80%] flex flex-col relative shadow-2xl',onClick:t[30]||(t[30]=(0,o.withModifiers)(()=>{},['stop']))},[(0,o.createElementVNode)('div',Cc,[(0,o.createElementVNode)('h3',Mc,(0,o.toDisplayString)('deck'===(0,o.unref)(ke)?'当前牌库':'弃牌堆'),1),(0,o.createElementVNode)('button',{onClick:t[29]||(t[29]=e=>ke.value=null)},[(0,o.createVNode)((0,o.unref)(Ql),{class:'size-6 hover:text-red-500'})])]),(0,o.createElementVNode)('div',wc,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)('deck'===(0,o.unref)(ke)?(0,o.unref)(me).playerDeck:(0,o.unref)(me).discardPile,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'scale-75 origin-top-left'},[(0,o.createVNode)(hi,{card:e,disabled:''},null,8,['card'])]))),128))])])])):(0,o.createCommentVNode)('v-if',!0)],6))}}),Oc=(0,yi.A)($c,[['__scopeId','data-v-14815368']]),Ic=Oc,Lc={class:'relative flex shrink-0 items-center justify-between rounded-t-2xl border-b border-amber-300/25 bg-[linear-gradient(120deg,rgba(34,21,14,0.96),rgba(59,35,20,0.92)_46%,rgba(33,20,13,0.96))] px-6 py-4'},Rc={class:'relative text-xl font-heading tracking-[0.2em] text-amber-100 drop-shadow-[0_0_10px_rgba(251,191,36,0.35)]'},Pc={class:'relative flex-1 overflow-y-auto custom-scrollbar bg-[linear-gradient(160deg,rgba(20,13,9,0.92),rgba(30,19,12,0.9))] p-8 text-dungeon-paper/80'},Hc=(0,o.defineComponent)({__name:'DungeonModal',props:{title:{},isOpen:{type:Boolean},panelClass:{}},emits:['close'],setup:e=>(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{to:'body'},[e.isOpen?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-md',onClick:a[1]||(a[1]=(0,o.withModifiers)(e=>t.$emit('close'),['self']))},[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['relative mx-4 flex max-h-[90%] w-full max-w-3xl flex-col overflow-hidden rounded-2xl border border-amber-300/35 bg-[#100b09]/95 shadow-[0_24px_60px_rgba(0,0,0,0.65),0_0_50px_rgba(217,119,6,0.22)]',e.panelClass])},[a[4]||(a[4]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_18%_-10%,rgba(251,191,36,0.2),transparent_45%),radial-gradient(circle_at_84%_0%,rgba(251,191,36,0.12),transparent_36%)]'},null,-1)),a[5]||(a[5]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute inset-[1px] rounded-[15px] border border-white/6'},null,-1)),(0,o.createCommentVNode)(' Header '),(0,o.createElementVNode)('div',Lc,[a[2]||(a[2]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute inset-0 bg-[linear-gradient(90deg,transparent,rgba(255,255,255,0.08),transparent)] opacity-40'},null,-1)),(0,o.createElementVNode)('h2',Rc,(0,o.toDisplayString)(e.title),1),(0,o.createElementVNode)('button',{class:'relative rounded-full border border-amber-300/30 bg-black/20 p-1 text-amber-200/80 transition-colors hover:text-amber-100',onClick:a[0]||(a[0]=e=>t.$emit('close'))},[(0,o.createVNode)((0,o.unref)(Ql),{class:'size-6'})])]),(0,o.createCommentVNode)(' Body '),(0,o.createElementVNode)('div',Pc,[(0,o.renderSlot)(t.$slots,'default',{},()=>[a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'text-center py-12'},[(0,o.createElementVNode)('div',{class:'mb-4 text-4xl opacity-20 animate-pulse'},'❖'),(0,o.createElementVNode)('p',{class:'font-ui text-sm uppercase tracking-widest'},'模块已加载 // 等待数据同步')],-1))])]),(0,o.createCommentVNode)(' Ornamental Corners '),a[6]||(a[6]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute -left-1 -top-1 h-5 w-5 border-l-2 border-t-2 border-amber-300/75'},null,-1)),a[7]||(a[7]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute -right-1 -top-1 h-5 w-5 border-r-2 border-t-2 border-amber-300/75'},null,-1)),a[8]||(a[8]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute -bottom-1 -left-1 h-5 w-5 border-b-2 border-l-2 border-amber-300/75'},null,-1)),a[9]||(a[9]=(0,o.createElementVNode)('div',{class:'pointer-events-none absolute -bottom-1 -right-1 h-5 w-5 border-b-2 border-r-2 border-amber-300/75'},null,-1))],2)])):(0,o.createCommentVNode)('v-if',!0)]))}),Uc=Hc,zc=Uc,Gc=m('rotate-ccw',[['path',{d:'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8',key:'1357e3'}],['path',{d:'M3 3v5h5',key:'1xhq8a'}]]),Fc=m('refresh-cw',[['path',{d:'M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8',key:'v9h5vc'}],['path',{d:'M21 3v5h-5',key:'1q7to0'}],['path',{d:'M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16',key:'3uifl3'}],['path',{d:'M8 16H3v5',key:'1cv678'}]]),jc=m('pencil',[['path',{d:'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',key:'1a8usu'}],['path',{d:'m15 5 4 4',key:'1mk7zo'}]]),Yc={key:0,class:'text-center py-8'},Wc={key:1,class:'flex flex-col gap-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2'},Xc=['onClick'],qc={class:'flex items-start gap-3'},Kc={class:'shrink-0 w-10 h-10 rounded bg-[#1a0f08] border border-dungeon-gold/20 flex items-center justify-center shadow-inner group-hover:border-dungeon-gold/50 transition-colors'},Zc={class:'text-dungeon-gold font-heading text-sm'},Jc={class:'text-sm text-dungeon-paper/80 font-ui leading-relaxed flex-1 group-hover:text-dungeon-paper transition-colors'},Qc={class:'mt-4 pt-4 border-t border-dungeon-gold/15'},ed={class:'flex gap-3'},td=['disabled'],ad=['disabled'],nd=['disabled'],od={class:'font-ui text-sm tracking-wide'},rd={key:2,class:'fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm'},ld={class:'glass-panel rounded-xl p-6 max-w-sm mx-4 border border-dungeon-gold/30'},id={class:'text-dungeon-paper/70 font-ui text-sm mb-6'},sd={class:'text-dungeon-gold font-bold'},cd={class:'flex gap-3 justify-end'},dd=(0,o.defineComponent)({__name:'SaveLoadPanel',props:{isOpen:{type:Boolean},entries:{}},emits:['close'],setup(e,{emit:t}){const a=t,n=Dl(),r=(0,o.ref)(null),l=(0,o.ref)(!1);async function i(){null!==r.value&&(await n.rollbackTo(r.value),r.value=null)}function s(){n.isGenerating||(a('close'),n.rerollCurrent())}function c(){n.isGenerating||(a('close'),n.startEdit())}async function d(){if(!n.isGenerating&&!l.value){l.value=!0;try{const e=await n.rebuildAutoSummaryChronicleFromMessages();if(e<0)return void toastr.error('手动总结失败，请查看控制台日志。');if(0===e)return void toastr.warning('未找到可重建的总结条目或自动总结条目。');toastr.success(`手动总结完成，已覆盖写入 ${e} 条。`)}finally{l.value=!1}}}return(t,a)=>((0,o.openBlock)(),(0,o.createBlock)(zc,{title:'回档记录','is-open':e.isOpen,onClose:a[1]||(a[1]=e=>t.$emit('close'))},{default:(0,o.withCtx)(()=>[0===e.entries.length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Yc,[(0,o.createVNode)((0,o.unref)(k),{class:'size-12 mx-auto text-dungeon-gold/30 mb-4'}),a[2]||(a[2]=(0,o.createElementVNode)('p',{class:'text-gray-500 font-ui'},'暂无存档记录',-1))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Wc,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.entries,e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:e.messageId,class:'group w-full text-left p-4 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:shadow-[0_0_15px_rgba(212,175,55,0.1)]',onClick:t=>{return a=e.messageId,void(r.value=a);var a}},[(0,o.createElementVNode)('div',qc,[(0,o.createCommentVNode)(' Floor Number Badge '),(0,o.createElementVNode)('div',Kc,[(0,o.createElementVNode)('span',Zc,'#'+(0,o.toDisplayString)(e.messageId),1)]),(0,o.createCommentVNode)(' Summary Text '),(0,o.createElementVNode)('p',Jc,(0,o.toDisplayString)(e.summary),1),(0,o.createCommentVNode)(' Arrow Icon '),(0,o.createVNode)((0,o.unref)(Gc),{class:'size-4 text-dungeon-gold/30 group-hover:text-dungeon-gold shrink-0 mt-1 transition-colors'})])],8,Xc))),128))])),(0,o.createCommentVNode)(' Bottom Action Buttons '),(0,o.createElementVNode)('div',Qc,[(0,o.createElementVNode)('div',ed,[(0,o.createElementVNode)('button',{class:'flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed',disabled:(0,o.unref)(n).isGenerating,onClick:s},[(0,o.createVNode)((0,o.unref)(Fc),{class:'size-4'}),a[3]||(a[3]=(0,o.createElementVNode)('span',{class:'font-ui text-sm tracking-wide'},'重Roll',-1))],8,td),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed',(0,o.unref)(n).isEditing?'border-dungeon-gold/50 text-dungeon-gold bg-dungeon-brown/20':'']),disabled:(0,o.unref)(n).isGenerating,onClick:c},[(0,o.createVNode)((0,o.unref)(jc),{class:'size-4'}),a[4]||(a[4]=(0,o.createElementVNode)('span',{class:'font-ui text-sm tracking-wide'},'编辑',-1))],10,ad)]),(0,o.createElementVNode)('button',{class:'mt-3 w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border transition-all duration-300 bg-dungeon-dark/60 border-dungeon-brown/50 text-dungeon-paper/70 hover:bg-dungeon-brown/30 hover:border-dungeon-gold/40 hover:text-dungeon-gold disabled:opacity-30 disabled:cursor-not-allowed',disabled:(0,o.unref)(n).isGenerating||(0,o.unref)(l),onClick:d},[(0,o.createVNode)((0,o.unref)(k),{class:'size-4'}),(0,o.createElementVNode)('span',od,(0,o.toDisplayString)((0,o.unref)(l)?'正在重建总结...':'手动总结'),1)],8,nd)]),(0,o.createCommentVNode)(' Confirm Dialog '),null!==(0,o.unref)(r)?((0,o.openBlock)(),(0,o.createElementBlock)('div',rd,[(0,o.createElementVNode)('div',ld,[a[9]||(a[9]=(0,o.createElementVNode)('h3',{class:'font-heading text-dungeon-gold text-lg mb-3'},'确认回档',-1)),(0,o.createElementVNode)('p',id,[a[5]||(a[5]=(0,o.createTextVNode)(' 回到第 ',-1)),(0,o.createElementVNode)('span',sd,(0,o.toDisplayString)((0,o.unref)(r)),1),a[6]||(a[6]=(0,o.createTextVNode)(' 楼？ ',-1)),a[7]||(a[7]=(0,o.createElementVNode)('br',null,null,-1)),a[8]||(a[8]=(0,o.createElementVNode)('span',{class:'text-red-400/80 text-xs'},'此操作将删除之后的所有进度。',-1))]),(0,o.createElementVNode)('div',cd,[(0,o.createElementVNode)('button',{class:'px-4 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors',onClick:a[0]||(a[0]=e=>r.value=null)},' 取消 '),(0,o.createElementVNode)('button',{class:'px-4 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors',onClick:i},' 确认回档 ')])])])):(0,o.createCommentVNode)('v-if',!0)]),_:1},8,['is-open']))}}),ud=dd,md=ud,pd={class:'w-full h-screen bg-[#050505] font-body text-dungeon-paper overflow-hidden relative'},fd={class:'absolute inset-0 z-0'},gd=['src'],yd={class:'absolute top-6 left-6 z-50 flex flex-col space-y-4'},vd={class:'absolute top-6 right-4 z-50 flex flex-col space-y-4'},hd={class:'h-full w-full flex flex-col items-center'},bd={class:'flex-1 bg-dungeon-dark/80 border border-dungeon-brown rounded-t-lg shadow-2xl backdrop-blur-sm p-6 md:p-10 overflow-y-auto min-h-0 custom-scrollbar relative'},xd={key:0,class:'flex items-center gap-3 mb-4'},_d={key:1,class:'flex flex-col h-full'},kd={class:'flex justify-end gap-3 mt-4'},Ed={key:0,class:'whitespace-pre-wrap text-dungeon-paper/85'},Nd={class:'story-rich-text'},Cd={key:1,class:'story-line-empty'},Md={key:0,class:'story-tucao-section-list'},wd=['onClick'],Dd={key:0,class:'story-tucao-panel'},Sd={key:1,class:'story-line-empty'},Ad={key:0,class:'mt-8 flex flex-col space-y-3'},Vd=['onClick'],Td={class:'text-xl mr-2'},Bd={key:1,class:'mt-4'},$d={class:'flex justify-center gap-4'},Od=['onClick'],Id={class:'text-2xl mb-1 relative z-10 drop-shadow-lg'},Ld={key:2,class:'mt-4'},Rd={class:'flex justify-center'},Pd=['disabled'],Hd={key:2,class:'mt-6 p-4 bg-red-950/30 border border-red-900/50 rounded text-red-300 font-ui text-sm'},Ud={class:'bg-[#0f0f0f] border-x border-b border-dungeon-brown rounded-b-lg p-4 shrink-0'},zd={class:'relative w-full'},Gd=['disabled','placeholder'],Fd=['disabled'],jd={class:'absolute bottom-6 left-6 z-50 flex flex-col gap-2 select-none'},Yd=['title'],Wd={key:0,class:'relative p-4 bg-dungeon-dark/90 border border-dungeon-gold/30 rounded-xl backdrop-blur-md shadow-[0_0_30px_rgba(0,0,0,0.8)]'},Xd={class:'flex items-end gap-4 mb-3'},qd={class:'flex flex-col items-center gap-1'},Kd=['title'],Zd={viewBox:'0 0 64 64',class:'w-14 h-14'},Jd={'clip-path':'url(#heartClip)'},Qd=['y','height'],eu={class:'text-[10px] font-ui text-dungeon-paper/80 tracking-wide'},tu={class:'text-[#cc3333] font-bold'},au={class:'text-gray-600'},nu={class:'flex flex-col items-center gap-1'},ou=['title'],ru={viewBox:'0 0 64 64',class:'w-14 h-14'},lu={'clip-path':'url(#manaClip)'},iu=['y','height'],su={class:'text-[10px] font-ui text-dungeon-paper/80 tracking-wide'},cu={class:'text-blue-400 font-bold'},du={class:'flex items-center justify-between px-1 mb-2'},uu={class:'flex items-center gap-2 text-dungeon-paper/70'},mu={class:'font-ui text-sm tracking-wide'},pu={class:'text-dungeon-paper font-bold'},fu={class:'text-dungeon-paper font-bold'},gu={class:'flex items-center justify-between px-1'},yu={class:'flex items-center gap-2 text-dungeon-gold'},vu={class:'font-heading text-lg tracking-wider text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-sm'},hu={class:'map-modal'},bu={class:'map-toolbar'},xu={class:'map-summary'},_u={class:'map-summary-highlight'},ku={class:'map-summary-highlight'},Eu={key:0,class:'map-empty'},Nu=['width','height','viewBox'],Cu=['x1','y1','x2','y2'],Mu={class:'map-room-icon'},wu={class:'map-room-step'},Du={key:0,class:'bond-list custom-scrollbar max-h-[64vh] overflow-y-auto pr-1'},Su=['onClick'],Au=['src','alt','onError'],Vu={key:1,class:'bond-portrait-fallback'},Tu={class:'bond-affection-wrap'},Bu={class:'bond-affection-head'},$u={class:'bond-role-name'},Ou={class:'bond-affection-track'},Iu={key:1,class:'flex flex-col items-center justify-center gap-3 py-12'},Lu=['src','alt'],Ru={class:'bond-preview-footer'},Pu={class:'bond-preview-name'},Hu={key:0,class:'grid grid-cols-3 gap-8 overflow-y-auto max-h-[60%] p-4'},Uu={key:1,class:'flex flex-col items-center justify-center py-12 gap-4'},zu={class:'w-full max-w-[90rem] mx-auto flex flex-col gap-4'},Gu={key:0,class:'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-h-[72vh] overflow-y-auto custom-scrollbar pr-1'},Fu=['disabled','onClick'],ju=['src','alt'],Yu={class:'absolute inset-x-2 top-2 z-10'},Wu={class:'magic-book-title text-center truncate text-[22px]'},Xu={key:1,class:'rounded border border-dungeon-brown/60 bg-dungeon-dark/40 py-8 text-center text-sm text-dungeon-paper/50'},qu={class:'w-full max-w-3xl mx-auto flex flex-col gap-5'},Ku={class:'rounded border border-dungeon-gold/30 bg-[#140d08]/70 px-4 py-3 flex items-center justify-between'},Zu={class:'font-heading text-dungeon-gold text-xl'},Ju={class:'flex items-center justify-between gap-3'},Qu={class:'font-heading text-dungeon-gold text-base'},em={class:'font-ui text-xs text-dungeon-paper/65 mt-1'},tm=['disabled','onClick'],am={class:'mt-3 h-2 rounded bg-black/45 border border-dungeon-brown/45 overflow-hidden'},nm={class:'mt-2 font-ui text-[11px] text-dungeon-paper/60'},om={key:0,class:'grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-6 gap-y-6 p-4 overflow-y-auto max-h-[60%]'},rm=['onMouseenter','onFocus','onTouchstartPassive'],lm={class:'relative'},im={class:'absolute -bottom-1 -right-3 font-ui text-dungeon-gold/80 text-[10px] bg-dungeon-dark/70 border border-dungeon-brown/30 rounded px-0.5 leading-tight'},sm={class:'font-heading text-dungeon-gold text-[11px] text-center mt-1 leading-relaxed truncate w-full'},cm={key:1,class:'flex flex-col items-center justify-center py-12 gap-4'},dm={class:'relic-tooltip-name'},um={class:'relic-tooltip-desc'},mm={class:'flex flex-col space-y-6 w-full max-w-lg mx-auto'},pm={class:'space-y-4'},fm={class:'flex items-center justify-between'},gm={class:'flex items-center gap-2'},ym={class:'text-dungeon-paper font-ui text-sm w-10 text-center'},vm={class:'flex items-center justify-between'},hm={class:'flex items-center gap-2'},bm={class:'text-dungeon-paper font-ui text-sm w-10 text-center'},xm={class:'flex items-center justify-between'},_m={class:'flex items-center justify-between'},km={class:'flex items-center gap-2'},Em={class:'text-dungeon-paper font-ui text-sm w-14 text-center'},Nm={class:'flex items-center justify-between'},Cm={class:'flex items-center gap-2'},Mm={class:'text-dungeon-paper font-ui text-sm w-14 text-center'},wm={class:'flex items-center justify-between'},Dm=['disabled'],Sm={key:0,value:''},Am=['value'],Vm={class:'flex items-center justify-between'},Tm={class:'flex items-center gap-2'},Bm={class:'text-dungeon-paper font-ui text-sm w-14 text-center'},$m={class:'flex items-center justify-between'},Om={class:'inline-flex items-center gap-2 cursor-pointer select-none'},Im={class:'text-dungeon-paper text-sm font-ui'},Lm={class:'grid grid-cols-2 gap-4'},Rm={class:'flex flex-col gap-4 w-full max-w-4xl'},Pm={class:'flex items-center justify-between'},Hm={class:'text-xs font-ui text-dungeon-paper/70'},Um={class:'rounded border border-dungeon-brown/60 bg-dungeon-dark/50 p-3'},zm={class:'mb-2 flex items-center justify-between'},Gm={class:'text-[11px] text-dungeon-gold/80'},Fm={class:'max-h-52 overflow-y-auto custom-scrollbar pr-1 space-y-1.5'},jm=['onClick'],Ym={class:'min-w-0 flex-1'},Wm={class:'flex items-center gap-1.5'},Xm={class:'text-xs font-heading text-dungeon-gold truncate'},qm={class:'text-[10px] px-1 rounded border border-white/15 text-dungeon-paper/60'},Km=['title'],Zm={key:0,class:'rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40'},Jm={class:'mt-2 grid grid-cols-9 gap-1'},Qm={class:'max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3 custom-scrollbar'},ep={class:'space-y-3'},tp={class:'flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar'},ap=['onClick'],np={class:'mb-2 flex items-center justify-between'},op={class:'font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90'},rp={class:'text-[10px] text-dungeon-paper/50'},lp={class:'grid grid-cols-2 md:grid-cols-3 gap-4'},ip=['disabled','onClick'],sp={key:0,class:'rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40'},cp={class:'flex justify-end gap-3'},dp=['disabled'],up={class:'flex items-center justify-between'},mp={class:'text-xs font-ui text-dungeon-paper/70'},pp={class:'max-h-[42vh] overflow-y-auto rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-2 custom-scrollbar'},fp={class:'grid grid-cols-2 md:grid-cols-3 gap-2'},gp=['onClick'],yp={class:'rounded border border-dungeon-brown/60 bg-dungeon-dark/40 p-3'},vp={class:'max-h-[28vh] overflow-y-auto custom-scrollbar pr-1'},hp={class:'space-y-2'},bp={class:'flex items-center gap-1 overflow-x-auto pb-1 custom-scrollbar'},xp=['onClick'],_p={class:'mb-2 flex items-center justify-between'},kp={class:'font-heading text-[11px] tracking-wider uppercase text-dungeon-gold/90'},Ep={class:'text-[10px] text-dungeon-paper/50'},Np={class:'grid grid-cols-1 md:grid-cols-2 gap-2'},Cp={class:'flex items-start justify-between gap-2'},Mp={class:'min-w-0'},wp={class:'text-xs font-heading text-dungeon-gold truncate'},Dp={class:'text-[10px] text-dungeon-paper/60'},Sp={class:'flex items-center gap-1 shrink-0'},Ap=['onClick'],Vp={class:'w-6 text-center text-xs text-dungeon-gold'},Tp=['onClick'],Bp={class:'mt-1 text-[10px] text-dungeon-paper/70 leading-relaxed'},$p={key:0,class:'rounded border border-dungeon-brown/40 bg-black/20 py-6 text-center text-xs text-dungeon-paper/40'},Op={class:'flex items-center gap-2 px-3 py-2 rounded border border-dungeon-brown/60 bg-dungeon-dark/40 text-sm text-dungeon-paper/80'},Ip={class:'flex justify-between gap-3'},Lp=['disabled'],Rp={key:0,class:'custom-scrollbar border-dungeon-brown/50 bg-dungeon-dark/60 max-h-[60vh] overflow-y-auto rounded border p-4'},Pp={class:'text-dungeon-paper/80 font-ui text-sm break-words whitespace-pre-wrap'},Hp={key:1,class:'text-dungeon-paper/60 font-ui py-8 text-center text-sm'},Up={key:0,class:'absolute inset-0 z-[94] bg-black'},zp=['src'],Gp=['src'],Fp={class:'shop-layout absolute inset-y-0 right-0 z-[96] flex items-center px-4 md:px-7'},jp={class:'shop-panel ml-auto w-full max-w-[48rem] h-[84vh] max-h-[860px]'},Yp={class:'shop-goods-grid custom-scrollbar'},Wp=['disabled','onClick','onMouseenter','onFocus','onTouchstartPassive'],Xp={class:'shop-item-icon-wrap'},qp={class:'shop-item-price'},Kp={key:0,class:'rounded border border-amber-200/15 bg-black/25 py-10 text-center text-sm text-amber-100/65'},Zp={class:'shop-panel-foot'},Jp=['disabled'],Qp=['disabled'],ef=['src'],tf={key:0,class:'pointer-events-none absolute inset-0'},af=['disabled','onClick','onMouseenter','onFocus','onTouchstartPassive'],nf={class:'pointer-events-auto chest-portals-anchor w-full'},of={class:'flex justify-center gap-4 flex-wrap'},rf=['disabled','onClick'],lf={class:'text-2xl mb-1 relative z-10 drop-shadow-lg'},sf=['disabled'],cf=['src'],df={class:'idol-layout absolute inset-0 z-[97]'},uf={class:'idol-slots-row'},mf={class:'idol-slot-wrap'},pf={class:'idol-slot-wrap'},ff={class:'idol-slot-wrap'},gf=['disabled'],yf={key:0,class:'absolute inset-0 z-[102] bg-black/90'},vf={class:'absolute inset-0 p-6 md:p-10 flex items-center justify-center'},hf={class:'w-full max-w-6xl rounded-xl border border-dungeon-gold/35 bg-[#0f0906]/95 p-5 md:p-7 shadow-[0_0_28px_rgba(212,175,55,0.2)]'},bf={class:'mb-4 flex items-center justify-between gap-3'},xf={class:'text-xs text-dungeon-paper/65 mt-1'},_f={class:'flex items-center gap-2'},kf=['disabled'],Ef=['disabled'],Nf={key:0,class:'grid grid-cols-1 md:grid-cols-3 gap-5'},Cf=['onClick'],Mf={class:'mb-2 text-center text-[11px] text-dungeon-paper/75'},wf={class:'flex justify-center'},Df={key:1,class:'w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col'},Sf={class:'flex items-center justify-between text-[11px] font-semibold'},Af={class:'mt-2 flex items-center gap-2 text-[11px] text-zinc-700'},Vf={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},Tf={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},Bf={class:'mt-3 text-xs leading-relaxed text-zinc-700 flex-1'},$f={class:'text-[11px] text-zinc-500'},Of={class:'mb-4 rounded border border-dungeon-gold/25 bg-black/20 p-3'},If={class:'text-xs text-dungeon-paper/70 mb-2'},Lf={class:'flex justify-center'},Rf={key:1,class:'w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col'},Pf={class:'flex items-center justify-between text-[11px] font-semibold'},Hf={class:'mt-2 flex items-center gap-2 text-[11px] text-zinc-700'},Uf={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},zf={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},Gf={class:'mt-3 text-xs leading-relaxed text-zinc-700 flex-1'},Ff={class:'text-[11px] text-zinc-500'},jf={key:0,class:'rounded border border-dungeon-brown/50 bg-black/20 p-4 text-center'},Yf=['disabled'],Wf={key:1,class:'grid grid-cols-1 md:grid-cols-3 gap-4 max-h-[52vh] overflow-y-auto custom-scrollbar pr-1'},Xf=['disabled','onClick'],qf={class:'text-[11px] text-dungeon-paper/65 mb-2'},Kf={class:'flex justify-center'},Zf={key:1,class:'w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55'},Jf={key:2,class:'grid grid-cols-1 md:grid-cols-2 gap-4'},Qf=['disabled','onClick'],eg={class:'text-[11px] text-dungeon-paper/65 mb-2'},tg={class:'flex justify-center'},ag={key:0,class:'w-[180px] h-[250px] rounded-xl border border-zinc-300/80 bg-white text-zinc-900 p-3 flex flex-col'},ng={class:'flex items-center justify-between text-[11px] font-semibold'},og={class:'mt-2 flex items-center gap-2 text-[11px] text-zinc-700'},rg={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},lg={class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},ig={class:'mt-3 text-xs leading-relaxed text-zinc-700 flex-1'},sg={class:'text-[11px] text-zinc-500'},cg={key:1,class:'w-[180px] h-[250px] rounded border border-dungeon-brown/45 flex items-center justify-center text-xs text-dungeon-paper/55'},dg={key:0,class:'absolute inset-0 z-[100] bg-black'},ug='dungeon.ui.overlay_state.v1',mg='https://img.vinsimage.org',pg='地牢/user',fg='地牢/魔物',gg='dungeon.bg_overlay_opacity',yg=62,vg=.14,hg='<user>未选择奖励直接离开。',bg=(0,o.defineComponent)({__name:'GameView',emits:['backToSplash'],setup(e){const t=(0,o.defineComponent)({props:{icon:{type:Object,required:!0},active:{type:Boolean,default:!1},label:{type:String,default:''},tooltipSide:{type:String,default:'right'},disabled:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1}},emits:['click'],setup:(e,{emit:t})=>()=>(0,o.h)('button',{disabled:e.disabled,class:['w-12 h-12 rounded-lg flex items-center justify-center transition-all duration-300 shadow-lg border relative group disabled:cursor-not-allowed',e.disabled?'bg-[#120d0a] text-dungeon-paper/35 border-dungeon-brown/70':e.active?e.highlight?'bg-dungeon-gold text-black border-dungeon-gold shadow-[0_0_20px_rgba(212,175,55,0.85)]':'bg-dungeon-gold text-black border-dungeon-paper shadow-[0_0_15px_#d4af37]':e.highlight?'bg-[#1a0f08] text-dungeon-gold border-dungeon-gold/75 shadow-[0_0_11px_rgba(212,175,55,0.45)] hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold':'bg-[#1a0f08] text-dungeon-gold-dim border-dungeon-brown hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50'],onClick:()=>{e.disabled||t('click')}},[(0,o.h)(e.icon,{class:'size-6'}),e.label?(0,o.h)('div',{class:['absolute bg-black/90 text-dungeon-paper text-xs px-2 py-1 rounded border border-dungeon-brown opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none','left'===e.tooltipSide?'right-14':'left-14']},e.label):null])}),a=(0,o.defineComponent)({setup:()=>()=>(0,o.h)('i',{class:'fa-solid fa-hat-wizard text-[20px]'})}),n=Dl(),r=(0,o.ref)(null),l=(0,o.ref)(''),i=(0,o.ref)(!1),s=(0,o.ref)(!0),c=(0,o.ref)(!1),d=(0,o.ref)(''),u=(0,o.ref)(!1),m=(0,o.ref)(!1),V=(0,o.ref)([]),T=(0,o.ref)(!1),O=(0,o.ref)(0),L=(0,o.ref)([]),R=(0,o.ref)(0),P=(0,o.ref)(!1),H=(0,o.ref)(null),U=(0,o.ref)(!1),G=(0,o.ref)('closed'),F=(0,o.ref)(!1),j=(0,o.ref)([]),Y=(0,o.ref)([]),W=(0,o.ref)(!1),X=(0,o.ref)(!1),q=(0,o.ref)(!1),K=(0,o.ref)([]),Z=(0,o.ref)(null),J=(0,o.ref)(0),Q=(0,o.ref)(!1),ee=(0,o.ref)(null),te=(0,o.ref)(1),ae=(0,o.ref)(!1),ne=(0,o.ref)(null),oe=(0,o.ref)(null),re=(0,o.ref)({x:0,y:0}),le=(0,o.ref)(null),ie=(0,o.ref)(null),se=(0,o.ref)(null),ce=(0,o.ref)(null),de=(0,o.ref)(null),ue=(0,o.ref)(null),me=(0,o.ref)({x:0,y:0}),pe=(0,o.ref)({x:0,y:0}),fe=(0,o.ref)('deck'),ge=(0,o.ref)([]),ye=(0,o.ref)(''),ve=(0,o.ref)({}),he=(0,o.ref)('全部'),be=(0,o.ref)('全部'),xe=(0,o.ref)('normal'),_e=(0,o.ref)(null),ke=new Set,Ee=(0,o.ref)(!1),Ne=(0,o.ref)('pick'),Ce=(0,o.ref)([]),Me=(0,o.ref)(null),we=(0,o.ref)(!1),De=(0,o.ref)(!1),Se=(0,o.ref)(!1),Ae=(0,o.ref)(null),Ve=(0,o.ref)(!1),Te=(0,o.ref)(!1);let Be=null,$e=null,Oe=null,Ie=null,Le=null,Re=null,Pe=null,He=null,Ue=0;const ze=(0,o.ref)(!1),Ge=new Set(['普莉姆','宁芙','温蒂尼','玛塔','罗丝','厄休拉','希尔薇','因克','阿卡夏','多萝西','维罗妮卡','伊丽莎白','尤斯蒂娅','克拉肯','布偶','赛琳娜','米拉','梦魔双子','贝希摩斯','佩恩','西格尔','摩尔','利维坦','奥赛罗','盖亚']),Fe=new Map,je=new Map,Ye=(0,o.ref)({}),We=(0,o.ref)({}),Xe=new Map,qe=(0,o.ref)(null);let Ke=!1;const Ze=e=>e.replace(/\\/g,'/').replace(/^\/+|\/+$/g,''),Je=e=>{return`${mg}/${t=e,Ze(t).split('/').map(e=>encodeURIComponent(e)).join('/')}`;var t},Qe=e=>e.length>0?e[Math.floor(Math.random()*e.length)]:null,et=async e=>{const t=Ze(e),a=Fe.get(t);if(a)return a;const n=je.get(t);if(n)return n;const o=(async()=>{const e=Er(t);return Fe.set(t,e),e})();je.set(t,o);try{return await o}finally{je.delete(t)}},tt=async(e,t)=>{const a=await et(e),n=Qe(a);return Je(n||t)},at=e=>{const t=Number(e);return Number.isFinite(t)?Math.max(-1e3,Math.min(1e3,Math.floor(t))):0},nt=(0,o.computed)(()=>{const e=n.statData.角色;return e&&'object'==typeof e?Object.entries(e).filter(([e])=>'string'==typeof e&&e.trim().length>0).map(([e,t])=>({name:e.trim(),affection:at(t?.好感度)})).sort((e,t)=>e.affection!==t.affection?t.affection-e.affection:e.name.localeCompare(t.name,'zh-Hans-CN')):[]}),ot=(0,o.computed)(()=>nt.value.map(e=>{return{...e,portraitUrl:(t=e.name,Ye.value[t]??Je(`${fg}/${t}.png`)),affectionAbsRatio:Math.min(1,Math.abs(e.affection)/1e3)};var t})),rt=async e=>{if(Ye.value[e])return;const t=Xe.get(e);if(t)return void await t;const a=(async()=>{const t=await(async e=>{const t=e.trim();if('苏菲'===t||'玩家'===t)return tt(pg,`${pg}/立绘.png`);const a=`${fg}/${t}`,n=`${fg}/${t}.png`;if(Ge.has(t))return tt(a,n);const o=await et(a),r=Qe(o);return Je(r||n)})(e);Ke||(Ye.value={...Ye.value,[e]:t},We.value={...We.value,[e]:!1})})();Xe.set(e,a);try{await a}finally{Xe.delete(e)}},lt=()=>{qe.value=null},it=(0,o.ref)(!1),st=(0,o.ref)(!1),ct=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF`,dt=(0,o.computed)(()=>n.statData._当前区域||''),ut=(0,o.computed)(()=>n.statData._当前房间类型||''),mt=(0,o.computed)(()=>{if(!dt.value||st.value)return'';const e='领主'===ut.value&&!it.value?`${dt.value}_领主`:dt.value;return`${ct}/${encodeURIComponent(e)}.png`});function pt(){'领主'!==ut.value||it.value?st.value=!0:it.value=!0}const ft=(0,o.ref)(parseFloat(localStorage.getItem(gg)??'0.5'));(0,o.watch)(ft,e=>localStorage.setItem(gg,String(e)));const gt=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B11.png`,yt=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B12.png`,vt=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%AE%9D%E7%AE%B13.png`,ht=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E7%A5%9E%E5%83%8F.png`,bt=`${mg}/%E5%9C%B0%E7%89%A2/%E8%83%8C%E6%99%AF/%E5%95%86%E5%BA%97.png`,xt=`${mg}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/%E6%B2%90%E8%8A%AF%E5%85%B0/%E6%B2%90%E8%8A%AF%E5%85%B04.png`,_t=(0,o.computed)(()=>'opened'===G.value?yt:'mimic'===G.value?vt:gt),kt={maxHp:{target:'maxHp',slotLabel:'生命上限',statueName:'生命神像',rewardText:e=>`生命上限+${e}`},mp:{target:'mp',slotLabel:'初始魔力',statueName:'魔力神像',rewardText:e=>`魔量+${e}`},gold:{target:'gold',slotLabel:'金币',statueName:'财富神像',rewardText:e=>'金币+'+2*e}},Et=(0,o.computed)(()=>Pa().filter(e=>'敌人'!==e.category)),Nt=(0,o.computed)(()=>{const e=new Map;for(const t of Pa())e.set(t.id,t);return e}),Ct=(0,o.computed)(()=>{const e=new Map;for(const t of br())e.set(t.id,t);return e}),Mt={基础:0,魔导:1,燃烧:2,严寒:3,血池:4},wt=(e,t)=>{const a=Mt[e]??999,n=Mt[t]??999;return a!==n?a-n:e.localeCompare(t,'zh-Hans-CN')},Dt={[S.PHYSICAL]:0,[S.MAGIC]:1,[S.FUNCTION]:2,[S.DODGE]:3,[S.ACTIVE]:4,[S.CURSE]:5},St=(0,o.computed)(()=>{const e=new Map;for(const t of Et.value)e.has(t.category)||e.set(t.category,[]),e.get(t.category).push(t);return Array.from(e.entries()).sort(([e],[t])=>wt(e,t)).map(([e,t])=>({category:e,cards:[...t].sort((e,t)=>{const a=Dt[e.type]??999,n=Dt[t.type]??999;return a!==n?a-n:e.name.localeCompare(t.name,'zh-Hans-CN')})}))}),At=(0,o.computed)(()=>['全部',...St.value.map(e=>e.category)]),Vt=(0,o.computed)(()=>'全部'===he.value?St.value:St.value.filter(e=>e.category===he.value)),Tt=`${mg}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E6%B3%95%E4%B9%A6%E5%B0%81%E9%9D%A2`,Bt=e=>`${Tt}/${encodeURIComponent(e)}.png`,$t=(0,o.computed)(()=>St.value.map(e=>e.category).filter(e=>'基础'!==e)),Ot=(0,o.computed)(()=>{const e=n.statData._携带的魔法书;return Array.isArray(e)?e.filter(e=>'string'==typeof e&&e.trim().length>0):[]}),It=(0,o.computed)(()=>{const e=new Set($t.value);return Ot.value.filter(t=>e.has(t))}),Lt=(0,o.computed)(()=>new Set(It.value)),Rt=(0,o.computed)(()=>{const e=new Set(['基础',...It.value]);let t=br().filter(t=>e.has(t.category));return 0===t.length&&(t=br().filter(e=>'基础'===e.category)),[...t]}),Pt=(0,o.computed)(()=>{const e=n.statData.角色??{},t=Number(e?.['沐芯兰']?.['好感度']??0),a=Number.isFinite(t)?t:0;return Math.max(-1e3,Math.min(1e3,a))}),Ht=(0,o.computed)(()=>2e-4*Math.max(0,Math.min(1e3,Pt.value))),Ut=(0,o.computed)(()=>(.32+.13*Math.min(5,R.value)).toFixed(2)),zt=e=>{if(!0===e||1===e)return!0;if('string'==typeof e){const t=e.trim().toLowerCase();return'true'===t||'1'===t}return!1},Gt=(0,o.computed)(()=>zt(n.statData._是否已击败商人)),Ft=(0,o.computed)(()=>'魔女的小窝'===(n.statData._当前区域||'')),jt=(0,o.computed)(()=>Ft.value?p:f),Yt=(0,o.computed)(()=>Ft.value?a:f),Wt=(0,o.ref)(!1),Xt=(0,o.ref)(!1),qt=(e,t)=>{const a=Number(e);return Number.isFinite(a)?Math.max(0,Math.floor(a)):t},Kt=(e,t,a,n)=>{const o=Math.floor((e-t)/a);return Math.max(0,Math.min(n,o))},Zt=(0,o.computed)(()=>qt(n.statData.$技能点,0)),Jt=(0,o.computed)(()=>{const e=Math.max(1,qt(n.statData.$初始血量上限,10)),t=Math.max(1,qt(n.statData.$初始魔量,1)),a=qt(n.statData.$初始金币,0),o=Kt(e,10,2,5),r=Kt(t,1,1,3),l=Kt(a,0,2,5),i=o>=5,s=r>=3,c=l>=5;return[{id:'hp',label:'初始生命上限',currentValue:e,currentLevel:o,maxLevel:5,nextValue:i?e:10+2*(o+1),nextCost:i?0:[1,3,6,10,15][o],isMax:i,progressPercent:o/5*100,barClass:'bg-gradient-to-r from-rose-500/85 to-red-400/85'},{id:'mp',label:'初始魔量',currentValue:t,currentLevel:r,maxLevel:3,nextValue:s?t:1+(r+1),nextCost:s?0:[5,10,15][r],isMax:s,progressPercent:r/3*100,barClass:'bg-gradient-to-r from-sky-500/85 to-blue-400/85'},{id:'gold',label:'初始金币',currentValue:a,currentLevel:l,maxLevel:5,nextValue:c?a:2*(l+1),nextCost:c?0:[2,4,6,8,10][l],isMax:c,progressPercent:l/5*100,barClass:'bg-gradient-to-r from-amber-500/85 to-yellow-300/85'}]}),Qt=()=>{Ft.value&&(r.value='magicBooks')},ea=()=>{Ft.value&&(r.value='magicHat')},ta=(0,o.computed)(()=>{const e=new Map;for(const t of Et.value)e.set(t.name,t);return e}),aa=(0,o.computed)(()=>B.map(e=>({...e}))),na=(0,o.computed)(()=>{const e=new Map;for(const t of aa.value)e.set(t.id,t);return e}),oa=(0,o.computed)(()=>{const e=new Map;for(const t of aa.value)e.set(t.name,t);return e}),ra=new Set(['basic_physical','basic_magic','basic_shield','basic_dodge']),la=(0,o.computed)(()=>{const e=new Set(['基础',...It.value]),t=Et.value.filter(t=>e.has(t.category)&&!ra.has(t.id));return t.length>0?t:Et.value.filter(e=>!ra.has(e.id))}),ia=(0,o.computed)(()=>{const e=new Set(['基础',...It.value]),t=aa.value.filter(t=>e.has(t.category));return t.length>0?t:aa.value.filter(e=>'基础'===e.category)}),sa=(0,o.computed)(()=>(Array.isArray(n.statData._技能)?n.statData._技能:[]).slice(0,9).map((e,t)=>({idx:t,name:e,card:ta.value.get(e)??null}))),ca=(0,o.computed)(()=>{const e=Array.isArray(n.statData.$主动)?[...n.statData.$主动].slice(0,2):[];for(;e.length<2;)e.push('');return e.map((e,t)=>({idx:t,name:e,skill:oa.value.get(e)??null}))}),da=(0,o.computed)(()=>ge.value.map((e,t)=>({idx:t,card:ta.value.get(e)})).filter(e=>void 0!==e.card)),ua=(0,o.computed)(()=>fr()),ma=(0,o.computed)(()=>[...br()].sort((e,t)=>{const a=wt(e.category,t.category);return 0!==a?a:e.name.localeCompare(t.name,'zh-Hans-CN')})),pa=(0,o.computed)(()=>{const e=new Map;for(const t of ma.value)e.has(t.category)||e.set(t.category,[]),e.get(t.category).push(t);return Array.from(e.entries()).map(([e,t])=>({category:e,relics:t}))}),fa=(0,o.computed)(()=>['全部',...pa.value.map(e=>e.category)]),ga=(0,o.computed)(()=>'全部'===be.value?pa.value:pa.value.filter(e=>e.category===be.value));(0,o.watch)(At,e=>{e.includes(he.value)||(he.value='全部')},{immediate:!0}),(0,o.watch)(fa,e=>{e.includes(be.value)||(be.value='全部')},{immediate:!0}),(0,o.watch)(nt,e=>{const t=e.map(e=>e.name),a=new Set(t),n={};for(const[e,t]of Object.entries(Ye.value))a.has(e)&&(n[e]=t);Object.keys(n).length!==Object.keys(Ye.value).length&&(Ye.value=n);const o={};for(const[e,t]of Object.entries(We.value))a.has(e)&&(o[e]=t);Object.keys(o).length!==Object.keys(We.value).length&&(We.value=o);for(const e of t)Ye.value[e]||rt(e)},{immediate:!0,deep:!0});const ya=e=>{switch(e){case S.PHYSICAL:return'border-red-500/50 text-red-300 bg-red-900/20';case S.MAGIC:return'border-blue-500/50 text-blue-300 bg-blue-900/20';case S.FUNCTION:return'border-yellow-500/50 text-yellow-300 bg-yellow-900/20';case S.DODGE:return'border-emerald-500/50 text-emerald-300 bg-emerald-900/20';case S.ACTIVE:return'border-zinc-300/70 text-zinc-100 bg-zinc-100/10';case S.CURSE:return'border-violet-500/50 text-violet-300 bg-violet-900/20';default:return'border-white/30 text-dungeon-paper/80 bg-white/5'}},va=e=>Boolean(e&&e.type===S.ACTIVE),ha=e=>{switch(e){case'基础':return'bg-dungeon-gold/80';case'魔导':return'bg-violet-400/85';case'燃烧':return'bg-orange-500/85';case'严寒':return'bg-sky-400/85';case'血池':return'bg-rose-500/85';default:return'bg-indigo-400/80'}},ba=(0,o.computed)(()=>{const e=n.statData._技能??[];return e.filter(e=>''!==e).map(e=>La.get(e)).filter(e=>void 0!==e)}),xa=(0,o.computed)(()=>{const e=Array.isArray(n.statData.$主动)?n.statData.$主动:[];return I(e.filter(e=>''!==e))}),_a=(0,o.computed)(()=>{const e=n.statData._圣遗物??{};return Object.entries(e).filter(([e,t])=>e&&t>0).map(([e,t])=>{const a=_r(e);return{name:e,count:t,rarity:a?.rarity??'普通',category:a?.category??'基础',effect:a?.effect??'',description:a?.description??a?.effect??''}}).sort((e,t)=>e.name.localeCompare(t.name,'zh-Hans-CN'))}),ka=e=>{const t=br().find(t=>t.id===e);if(!t)return 0;const a=n.statData._圣遗物??{},o=Number(a[t.name]??0),r=Number(a[e]??0),l=Number.isFinite(o)?o:0,i=Number.isFinite(r)?r:0;return Math.max(0,Math.floor(Math.max(l,i)))},Ea=[{id:'bloodpool_strawberry',bonus:5},{id:'bloodpool_pear',bonus:10},{id:'bloodpool_mango',bonus:15}],Na=(0,o.computed)(()=>Ea.reduce((e,t)=>e+ka(t.id)*t.bonus,0)),Ca=(0,o.computed)(()=>Ee.value&&'pick'===Ne.value&&Se.value&&!De.value&&ka('base_silver_card')>0),Ma=(0,o.computed)(()=>j.value.map(e=>({name:e.name,count:1,rarity:e.rarity,category:e.category,effect:e.effect,description:e.description??e.effect??''}))),wa=()=>{Pe&&(clearTimeout(Pe),Pe=null),He&&(clearTimeout(He),He=null)},Da=(e,t)=>{const a=e.getBoundingClientRect(),n=Math.max(8,Math.min(a.left+a.width/2,window.innerWidth-240-8)),o=Math.max(8,a.top-8);Ae.value={x:n,y:o,name:t.name,rarity:t.rarity,category:t.category,count:t.count,effect:t.effect,description:t.description}},Sa=(e,t)=>{const a=e.currentTarget;a&&(wa(),Da(a,t))},Aa=()=>{wa(),Ae.value=null},Va=(e,t)=>{const a=e.currentTarget;a&&(wa(),Pe=setTimeout(()=>{Da(a,t),He=setTimeout(()=>{Ae.value=null,He=null},1800)},320))},Ta=()=>{Pe&&(clearTimeout(Pe),Pe=null)},Ba=(e,t)=>{const a=Ma.value[t];a&&Sa(e,a)},$a=(0,o.computed)(()=>{const e=n.statData._圣遗物??{},t={};for(const[a,n]of Object.entries(e)){const e=Math.max(0,Math.floor(Number(n??0)));!a||e<=0||(t[a]=e)}return t});(0,o.watch)(ba,e=>{Array.isArray(e)&&0!==e.length&&sl(e.map(e=>e.id))},{immediate:!0}),(0,o.watch)(_a,e=>{if(!Array.isArray(e)||0===e.length)return;const t=e.map(e=>_r(e.name)?.id??'').filter(e=>Boolean(e));0!==t.length&&cl(t)},{immediate:!0}),(0,o.watch)(()=>j.value,e=>{Array.isArray(e)&&0!==e.length&&cl(e.map(e=>e.id))},{deep:!1}),(0,o.watch)(()=>V.value,e=>{Array.isArray(e)&&0!==e.length&&cl(e.map(e=>e.relic.id))},{deep:!1}),(0,o.watch)(()=>Ce.value,e=>{Array.isArray(e)&&0!==e.length&&sl(e.map(e=>e.id))},{deep:!1}),(0,o.watch)(r,e=>{'magicBooks'!==e&&'magicHat'!==e||n.loadStatData(),'map'===e&&(0,o.nextTick)(()=>on(!0)),'bonds'!==e&&lt(),'relics'!==e&&Aa()}),(0,o.watch)(Ft,e=>{e||'magicBooks'!==r.value&&'magicHat'!==r.value||(r.value=null)});const Oa=(0,o.computed)(()=>Object.values(ve.value).reduce((e,t)=>e+Math.max(0,Math.floor(t)),0)),Ia=(0,o.reactive)({fontSize:21,lineHeight:2,fontFamily:'\'Cinzel\', serif',containerWidth:1300}),Ra=(0,o.computed)({get:()=>n.useStreaming,set:e=>n.setUseStreaming(e)}),Ha=(0,o.computed)({get:()=>tl.value,set:e=>{var t;(t=e)&&(Tr.value=t,Yr(),Wr(),qr())}}),Ua=(0,o.computed)({get:()=>Math.round(100*el.value),set:e=>Jr(e/100)}),za=(0,o.computed)(()=>n.mainText||'未能检测到正文标签，推测为空回/截断，请查看控制台输出'),Ga={战斗:{icon:'⚔️',fill:'rgba(153,27,27,0.78)',border:'#ef4444',text:'#fecaca'},领主:{icon:'👑',fill:'rgba(127,29,29,0.84)',border:'#f87171',text:'#ffe4e6'},宝箱:{icon:'💎',fill:'rgba(133,77,14,0.78)',border:'#f59e0b',text:'#fef3c7'},商店:{icon:'🏪',fill:'rgba(20,83,45,0.78)',border:'#34d399',text:'#dcfce7'},温泉:{icon:'♨️',fill:'rgba(12,74,110,0.78)',border:'#38bdf8',text:'#e0f2fe'},神像:{icon:'🗿',fill:'rgba(88,28,135,0.78)',border:'#c084fc',text:'#f3e8ff'},事件:{icon:'❓',fill:'rgba(63,63,70,0.78)',border:'#a1a1aa',text:'#f4f4f5'},陷阱:{icon:'⚠️',fill:'rgba(124,45,18,0.78)',border:'#fb923c',text:'#ffedd5'}},Fa=(0,o.computed)(()=>{const e=Array.isArray(n.statData.$路径)?n.statData.$路径:n.statData.$统计?.$路径??null;return Array.isArray(e)?e.filter(e=>'string'==typeof e).map(e=>e.trim()).filter(e=>e.length>0):[]}),ja=(0,o.computed)(()=>{const e=Number(n.statData.$统计?.当前层已过房间??0);return Number.isFinite(e)?Math.max(0,Math.floor(e)):0}),Ya=(0,o.ref)(null),Wa=(0,o.ref)(1),Xa=(0,o.ref)(0),qa=(0,o.ref)(0),Ka=(0,o.ref)(null),Za=(0,o.ref)({x:0,y:0}),Ja=(0,o.ref)({x:0,y:0}),Qa=(0,o.computed)(()=>Fa.value.map((e,t)=>{const a=Math.floor(t/6),n=t%6,o=94*(a%2==0?n:5-n),r=94*a,l=Ga[e]??{icon:'◻',fill:'rgba(39,39,42,0.78)',border:'#a1a1aa',text:'#f4f4f5'};return{key:`node-${t}-${e}`,index:t,x:o,y:r,centerX:o+31,centerY:r+31,icon:l.icon,style:{left:`${o}px`,top:`${r}px`,background:l.fill,borderColor:l.border,color:l.text}}})),en=(0,o.computed)(()=>532),tn=(0,o.computed)(()=>{const e=Qa.value.length;return 94*((e>0?Math.floor((e-1)/6)+1:1)-1)+yg}),an=(0,o.computed)(()=>{const e=Qa.value;if(e.length<=1)return[];const t=[];for(let a=1;a<e.length;a+=1){const n=e[a-1],o=e[a];t.push({key:`line-${a-1}-${a}`,x1:n.centerX,y1:n.centerY,x2:o.centerX,y2:o.centerY})}return t}),nn=(0,o.computed)(()=>({width:`${en.value}px`,height:`${tn.value}px`,transform:`translate(${Xa.value}px, ${qa.value}px) scale(${Wa.value})`,transformOrigin:'0 0'})),on=(e=!1)=>{const t=Ya.value;if(!t)return;e&&(Wa.value=1);const a=Qa.value[Qa.value.length-1],n=a?a.centerX:en.value/2,o=a?a.centerY:tn.value/2;Xa.value=t.clientWidth/2-n*Wa.value,qa.value=t.clientHeight/2-o*Wa.value},rn=e=>{const t=Ya.value,a=(n=Wa.value+e,Math.max(.6,Math.min(2.6,n)));var n;if(a===Wa.value)return;if(!t)return void(Wa.value=a);const o=t.clientWidth/2,r=t.clientHeight/2,l=(o-Xa.value)/Wa.value,i=(r-qa.value)/Wa.value;Wa.value=a,Xa.value=o-l*a,qa.value=r-i*a},ln=()=>rn(vg),sn=()=>rn(-.14),cn=()=>on(!0),dn=e=>{rn(e.deltaY<0?vg:-.14)},un=e=>{if('mouse'===e.pointerType&&0!==e.button)return;const t=e.currentTarget;t&&(Ka.value=e.pointerId,Za.value={x:e.clientX,y:e.clientY},Ja.value={x:Xa.value,y:qa.value},t.setPointerCapture(e.pointerId))},mn=e=>{if(Ka.value!==e.pointerId)return;const t=e.clientX-Za.value.x,a=e.clientY-Za.value.y;Xa.value=Ja.value.x+t,qa.value=Ja.value.y+a},pn=e=>{if(Ka.value!==e.pointerId)return;const t=e.currentTarget;t&&t.releasePointerCapture(e.pointerId),Ka.value=null};(0,o.watch)(()=>Fa.value.length,()=>{'map'===r.value&&(0,o.nextTick)(()=>on(!1))});const fn=/(\*[^*\r\n]+\*|“[^”\r\n]+”|「[^」\r\n]+」|"[^"\r\n]+"|'[^'\r\n]+')/g,gn=/^(#{1,4})\s*(.*)$/,yn=/<\s*tucao(?:\s+[^>]*)?>/gi,vn=/<\s*\/\s*tucao\s*>/gi,hn=(0,o.ref)({});function bn(e){const t=e.trim();return!(t.length<2)&&(/^“[^”\r\n]+”$/.test(t)||/^「[^」\r\n]+」$/.test(t)||/^"[^"\r\n]+"$/.test(t)||/^'[^'\r\n]+'$/.test(t))}function xn(e,t){if(!e)return[];const a=[];let n,o=0,r=0;for(fn.lastIndex=0;null!==(n=fn.exec(e));){n.index>o&&(a.push({key:`${t}-seg-${r}`,type:'text',text:e.slice(o,n.index)}),r+=1);const l=n[0];if(l.startsWith('*')&&l.endsWith('*')){const e=l.slice(1,-1);bn(e)?a.push({key:`${t}-seg-${r}`,type:'quote',text:e}):a.push({key:`${t}-seg-${r}`,type:'muted',text:e})}else bn(l),a.push({key:`${t}-seg-${r}`,type:'quote',text:l});r+=1,o=fn.lastIndex}return o<e.length&&a.push({key:`${t}-seg-${r}`,type:'text',text:e.slice(o)}),a}function _n(e,t){return 0===e.length?[]:e.split('\n').map((e,a)=>function(e,t){const a=gn.exec(e);let n=0,o=e;return a&&(n=a[1].length,o=a[2]),{type:'line',key:t,level:n,segments:xn(o,t)}}(e,`${t}-line-${a}`))}const kn=(0,o.computed)(()=>function(e){const t=function(e){return e.replace(/&lt;\s*tucao(?:\s+[^&]*?)?&gt;/gi,'<tucao>').replace(/&lt;\s*\/\s*tucao\s*&gt;/gi,'</tucao>').replace(/\[\s*tucao\s*]/gi,'<tucao>').replace(/\[\s*\/\s*tucao\s*]/gi,'</tucao>').replace(/<\s*吐槽(?:\s+[^>]*)?>/gi,'<tucao>').replace(/<\s*\/\s*吐槽\s*>/gi,'</tucao>')}(e).replace(/\r\n/g,'\n'),a=[],n=[];let o,r=0,l=0;for(yn.lastIndex=0;null!==(o=yn.exec(t));){const e=o.index,i=yn.lastIndex,s=t.slice(r,e);a.push(..._n(s,`story-${l}-plain-${r}`)),vn.lastIndex=i;const c=vn.exec(t),d=c?c.index:t.length,u=c?vn.lastIndex:t.length,m=`story-tucao-${l}-${e}`,p=_n(t.slice(i,d).replace(/^\n+/,'').replace(/\n+$/,''),m);if(p.length>0&&n.push({key:m,lines:p}),r=u,yn.lastIndex=r,l+=1,!c)break}const i=t.slice(r);return a.push(..._n(i,`story-tail-${r}`)),{lines:a,tucaoSections:n}}(za.value)),En=(0,o.computed)(()=>kn.value.lines),Nn=(0,o.computed)(()=>kn.value.tucaoSections);(0,o.watch)(Nn,e=>{const t=new Set(e.map(e=>e.key)),a={};for(const[e,n]of Object.entries(hn.value))t.has(e)&&(a[e]=n);hn.value=a},{immediate:!0});const Cn=e=>Boolean(hn.value[e]),Mn=(0,o.computed)(()=>{const e=Hn(n.statData._血量,10),t=wn.value;return Math.min(e,t)}),wn=(0,o.computed)(()=>{const e=Hn(n.statData._血量上限,10);return Math.max(1,e+Na.value)}),Dn=(0,o.computed)(()=>n.statData._魔量??1),Sn=(0,o.computed)(()=>n.statData._金币??0),An=(0,o.computed)(()=>n.statData.$最小点数??0),Vn=(0,o.computed)(()=>n.statData.$最大点数??0),Tn=(0,o.computed)(()=>Math.max(1,Hn(An.value,1))),Bn=(0,o.computed)(()=>Math.max(Tn.value,Hn(Vn.value,6))),$n=(0,o.computed)(()=>{const e=wn.value;return e>0?Math.min(Mn.value/e*100,100):100}),On=(0,o.computed)(()=>{const e=Dn.value;return Math.min(e/20*100,100)}),In=(0,o.computed)(()=>{const e=ne.value;if(!e)return null;const t=kt[e],a=te.value,n='gold'===e?2*a:a;return{target:e,statueName:t.statueName,amount:n,rewardText:t.rewardText(a)}}),Ln=()=>{l.value.trim()&&!n.isGenerating&&(n.sendAction(l.value),l.value='')},Rn=['普通物理攻击','普通物理攻击','普通物理攻击','普通魔法攻击','普通魔法攻击','普通护盾','普通护盾','普通闪避','普通闪避'],Pn=['泉水洗去了你身上的污秽，灵魂重获纯净。','温热的泉水带走了不详的气息，你感到前所未有的轻松。','诅咒已随水波逝去，你的身心焕然一新。','尘垢尽落，灵台清明。'],Hn=(e,t)=>{const a=Number(e);return Number.isFinite(a)?Math.max(0,Math.floor(a)):t},Un=()=>{n.isGenerating||(c.value=!1,Ee.value=!1,po(),No(),Ao(),_e.value=null,n.setPendingCombatMvuChanges(null),n.setPendingStatDataChanges((()=>{const e=Math.max(1,Hn(n.statData.$初始血量上限,10)),t=Hn(n.statData.$初始魔量,1),a=Hn(n.statData.$初始金币,0),o=Hn(n.statData.$技能点,0),r=Math.max(1,Hn(n.statData._楼层数,1));return{_血量:e,_血量上限:e,_魔量:t,_金币:a,$技能点:o+Math.floor(r*(r+1)/2),_技能:[...Rn],_负面状态:[],$被动:'',$主动:['',''],_圣遗物:{},$最大点数:6,$最小点数:1,_楼层数:1,_当前区域:'魔女的小窝',_当前房间类型:'',_当前事件:'',_对手名称:'',_是否已击败商人:!1,$统计:{当前层已过房间:0,累计已过房间:0,累计经过战斗:0,累计经过温泉:0,累计经过宝箱:0,累计经过商店:0,累计经过神像:0,累计经过事件:0,累计经过陷阱:0},$路径:[]}})()),n.sendAction('<user>在死亡边缘触发了回溯，回到了魔女的小窝。当前状态已重置为初始值，请基于回溯后的状态继续剧情。'))},zn={战斗房:{label:'战斗',icon:'⚔',bgColor:'rgba(185,28,28,0.25)',borderColor:'#dc2626',textColor:'#fca5a5',glowColor:'#dc262680'},领主房:{label:'战斗',icon:'⚔',bgColor:'rgba(185,28,28,0.3)',borderColor:'#ef4444',textColor:'#fca5a5',glowColor:'#ef444480'},宝箱房:{label:'打开宝箱',icon:'📦',bgColor:'rgba(161,98,7,0.25)',borderColor:'#eab308',textColor:'#fde68a',glowColor:'#eab30880'},商店房:{label:'打开商店',icon:'🛒',bgColor:'rgba(21,128,61,0.25)',borderColor:'#22c55e',textColor:'#bbf7d0',glowColor:'#22c55e80'},温泉房:{label:'清除诅咒',icon:'💧',bgColor:'rgba(8,145,178,0.25)',borderColor:'#06b6d4',textColor:'#a5f3fc',glowColor:'#06b6d480'},神像房:{label:'膜拜',icon:'🙏',bgColor:'rgba(126,34,206,0.25)',borderColor:'#a855f7',textColor:'#e9d5ff',glowColor:'#a855f780'}},Gn=(0,o.computed)(()=>{if(!n.hasOptionE)return null;if(Fn.value)return zn['宝箱房'];if(jn.value)return zn['商店房'];const e=n.statData._当前房间类型;return e?'事件房'===e||'陷阱房'===e?null:zn[e]??null:null}),Fn=(0,o.computed)(()=>{const e=(n.statData._当前房间类型||'').trim(),t=(n.statData._当前区域||'').trim();return'宝箱房'===e||'宝箱'===t||'宝箱房'===t}),jn=(0,o.computed)(()=>{const e=(n.statData._当前房间类型||'').trim(),t=(n.statData._当前区域||'').trim();return'商店房'===e||'商店'===t}),Yn=(0,o.computed)(()=>'温泉房'===(n.statData._当前房间类型||'').trim()),Wn=(0,o.computed)(()=>'神像房'===(n.statData._当前房间类型||'').trim()),Xn=(0,o.computed)(()=>{const e=(n.statData._当前房间类型||'').trim();return'战斗房'===e||'领主房'===e}),qn=e=>e.replace(/<[^>]*>/g,'').replace(/&nbsp;/g,' ').replace(/\s+/g,' ').trim(),Kn=(e,t,a,n)=>`${e?`<user>战斗结果：[胜利]，<user>战胜了${t}。`:`<user>战斗结果：[败北]，<user>被${t}击败。`}\n${'shopRobbery'===a?'<user>本次战斗发生在抢夺商店的冲突中。':'chestMimic'===a?'<user>本次战斗发生在宝箱怪伏击中。':'combatTest'===a?'<user>本次战斗来自战斗测试。':'<user>本次战斗发生在地牢探索途中。'}\n${e?'<user>请根据以下完整战斗日志继续剧情，并体现胜利后的后续发展。':'<user>请根据以下完整战斗日志继续剧情，并体现战败后的后续发展。'}\n<user>战斗日志（时间顺序）：\n${(e=>{const t=[...e].reverse().map(qn).filter(e=>e.length>0);return 0===t.length?'（战斗日志为空）':t.join('\n')})(n)}`,Zn=(e,t)=>{ke.has(e.id)||n.isGenerating||(ke.add(e.id),n.sendAction(t))},Jn=()=>{for(const e of V.value)e.finalPrice=0},Qn=(e,t)=>{const a=e.filter(e=>!t.has(e.id));return 0===a.length?null:a[Math.floor(Math.random()*a.length)]??null},eo=()=>{const e=[...la.value,...ia.value],t=(n.statData._当前房间类型||'').trim(),a='领主房'===t,o='战斗房'===t;Se.value=o;const r=o&&ka('base_rainbow_card')>0,l=o&&ka('base_golden_card')>0,i=3+(r?1:0),s=a?1:l?.1:.05,c=e.filter(e=>'普通'===e.rarity),d=e.filter(e=>'稀有'===e.rarity),u=[],m=new Set;for(let t=0;t<i;t++){const t=a||Math.random()<s;let n=Qn(t?d:c,m);n||(n=Qn(e,m)),n&&(u.push(n),m.add(n.id))}return u},to=()=>{if(!Ca.value||we.value)return;const e=eo();0!==e.length&&(De.value=!0,Ce.value=e,Me.value=null,Ne.value='pick')},ao=e=>{const t=Boolean(e?.skipReward);Ee.value=!1,Ne.value='pick',Ce.value=[],Me.value=null,we.value=!1,De.value=!1,Se.value=!1;const a=_e.value;_e.value=null,t?a?Zn(a,hg):n.isGenerating||n.sendAction(hg):a&&'shopRobbery'!==a.context&&Zn(a,a.text)},no=()=>{ao({skipReward:!0})},oo=e=>{if(!Me.value||we.value||va(Me.value))return;const t=Array.isArray(n.statData._技能)?[...n.statData._技能].slice(0,9):[];if(0===t.length)t.push(Me.value.name);else{if(!(e>=0&&e<t.length))return;t[e]=Me.value.name}we.value=!0,n.mergePendingStatDataChanges({_技能:t}),ao()},ro=e=>'传奇'===e?15:'稀有'===e?10:5,lo=()=>{const e=Math.random();return e<.8?'普通':e<.95?'稀有':'传奇'},io=e=>({name:e.name,count:1,rarity:e.rarity,category:e.category,effect:e.effect,description:e.description??e.effect??''}),so=(e,t)=>{Sa(e,io(t.relic))},co=()=>{const e=(n.statData._当前区域||'').trim(),t=(n.statData._当前房间类型||'').trim();return`${Math.max(1,Hn(n.statData._楼层数,1))}|${e}|${t}|${Math.max(0,Hn(n.statData.$统计?.当前层已过房间,0))}`},uo=()=>{H.value=null,V.value=[],O.value=0,L.value=[],R.value=0,P.value=!1},mo=()=>{Aa(),vo(),T.value=!1;const e=co();(H.value!==e||0===V.value.length)&&(H.value=e,O.value=0,L.value=[],R.value=0,P.value=!1,(()=>{const e=[...Rt.value],t=Math.max(0,Pt.value),a=Math.max(0,3+Math.floor(t/200)),n=Math.min(a,e.length),o=new Set,r=Ht.value,l=[];for(let t=0;t<n;t++){const a=lo();let n=e.filter(e=>!o.has(e.name)&&e.rarity===a);if(0===n.length&&(n=e.filter(e=>!o.has(e.name))),0===n.length)break;const i=qo(n);if(!i)break;o.add(i.name);const s=ro(i.rarity),c=Gt.value?0:Math.max(1,Math.ceil(s*(1-r)));l.push({key:`${i.id}-${t}`,relic:i,basePrice:s,finalPrice:c,sold:!1})}V.value=l})()),Gt.value&&Jn(),u.value=!0},po=()=>{Aa(),vo(),T.value=!1,P.value=!1,u.value=!1},fo=(e,t)=>{const a=t??n.statData._圣遗物??{},o={};for(const[e,t]of Object.entries(a)){const a=Math.max(0,Math.floor(Number(t??0)));!e||a<=0||(o[e]=a)}return o[e.name]=(o[e.name]??0)+1,o},go=()=>{if(T.value||n.isGenerating||P.value)return;const e=[...L.value],t=O.value;if(e.length>0){const a=Math.max(0,Math.floor(Number(n.statData._金币??0))),o=Math.max(0,a-t);let r=n.statData._圣遗物??{};for(const t of e){const e=_r(t.name);if(e)r=fo(e,r);else{const e={};for(const[t,a]of Object.entries(r)){const n=Math.max(0,Math.floor(Number(a??0)));!t||n<=0||(e[t]=n)}e[t.name]=(e[t.name]??0)+1,r=e}}n.mergePendingStatDataChanges({_金币:o,_圣遗物:r})}const a=_e.value;if(po(),a&&'shopRobbery'===a.context&&a.win){const t=e.length>0?`<user>我在失守的货架上拿走了${e.map(e=>`${e.name}（${e.rarity}）`).join('，')}。`:'<user>我没有额外拿走商店货架上的物品。',n=`${a.text}\n${t}\n<user>我离开了商店，请基于战斗结果、战斗日志与离店行为继续后续剧情。`;return _e.value=null,void Zn(a,n)}if(0===e.length)return;const o=e.map(e=>`${e.name}（${e.rarity}）`).join('，');n.sendAction(`<user>从沐芯兰处购买了${o}，总共花费${t}枚金币。`)},yo=async()=>{if(T.value||n.isGenerating||P.value||Gt.value)return;if(R.value<5)return void(R.value+=1);P.value=!0;await n.updateStatDataFields({_对手名称:'沐芯兰'})?(vo(),Ie=setTimeout(()=>{po(),d.value='沐芯兰',xe.value='shopRobbery',c.value=!0,Ie=null},1e3)):P.value=!1},vo=()=>{Ie&&(clearTimeout(Ie),Ie=null)},ho=()=>{Be&&(clearTimeout(Be),Be=null)},bo=()=>{$e&&(clearTimeout($e),$e=null)},xo=()=>{Oe&&(clearTimeout(Oe),Oe=null)},_o=()=>{Le&&(clearTimeout(Le),Le=null)},ko=()=>{(()=>{const e=qo(Pn)??Pn[0],t=++Ue;ee.value={id:t,text:e},_o(),Le=setTimeout(()=>{ee.value?.id===t&&(ee.value=null),Le=null},2600)})(),n.setPendingStatDataChanges({_负面状态:[]}),n.sendAction('<user>浸泡在暖泉中，污秽正悄然消融。（负面效果已全部消除）')};(0,o.onUnmounted)(()=>{vo(),ho(),bo(),xo(),_o(),Co()});const Eo=()=>{if(!U.value)return;if('opened'!==G.value)return;if(_t.value!==yt)return;q.value=!0;j.value.some((_,e)=>!Y.value[e])&&(X.value=!0)},No=()=>{ho(),bo(),xo(),Aa(),U.value=!1,F.value=!1,X.value=!1,q.value=!1},Co=()=>{Re&&(clearTimeout(Re),Re=null)},Mo=(e,t,a)=>a<=t?t:Math.max(t,Math.min(a,e)),wo=e=>'maxHp'===e?se.value:'mp'===e?ce.value:de.value,Do=(e,t)=>{const a=le.value,n=ie.value;if(!a||!n)return null;const o=a.getBoundingClientRect(),r=n.getBoundingClientRect(),l=Math.max(0,o.width-r.width),i=Math.max(0,o.height-r.height),s=e+r.width/2,c=t+r.height/2;let d=null;const u=['maxHp','mp','gold'];for(const e of u){const t=wo(e);if(!t)continue;const a=t.getBoundingClientRect(),n=a.left-o.left+a.width/2,u=a.top-o.top+a.height/2,m=Math.hypot(n-s,u-c),p=Mo(n-r.width/2,0,l),f=Mo(u-r.height/2,0,i);(!d||m<d.distance)&&(d={target:e,distance:m,snapX:p,snapY:f})}return!d||d.distance>112?null:d},So=()=>{n.isGenerating||(Co(),ne.value=null,oe.value=null,ue.value=null,te.value=Tn.value,ae.value=!0,m.value=!0,Re=setTimeout(()=>{te.value=(()=>{const e=Tn.value,t=Bn.value;return t<=e?e:Math.floor(Math.random()*(t-e+1))+e})(),ae.value=!1,Re=null,requestAnimationFrame(()=>{(()=>{const e=le.value,t=ie.value;if(!e||!t)return;const a=e.getBoundingClientRect(),n=t.getBoundingClientRect(),o=Math.max(0,a.width-n.width),r=Math.max(0,a.height-n.height),l=Math.max(0,(a.width-n.width)/2),i=Mo(.72*a.height,0,r);re.value={x:Mo(l,0,o),y:i},oe.value=null})()})},520))},Ao=()=>{Co(),ue.value=null,m.value=!1},Vo=e=>{if(!m.value||ae.value)return;const t=ie.value;t&&(ne.value=null,ue.value=e.pointerId,me.value={x:e.clientX,y:e.clientY},pe.value={...re.value},t.setPointerCapture(e.pointerId))},To=e=>{if(!m.value)return;if(ue.value!==e.pointerId)return;const t=le.value,a=ie.value;if(!t||!a)return;const n=t.getBoundingClientRect(),o=a.getBoundingClientRect(),r=Math.max(0,n.width-o.width),l=Math.max(0,n.height-o.height),i=e.clientX-me.value.x,s=e.clientY-me.value.y,c=Mo(pe.value.x+i,0,r),d=Mo(pe.value.y+s,0,l);re.value={x:c,y:d};const u=Do(c,d);oe.value=u?.target??null},Bo=e=>{if(!m.value)return;if(ue.value!==e.pointerId)return;const t=ie.value;t&&t.releasePointerCapture(e.pointerId);const a=Do(re.value.x,re.value.y);a?(ne.value=a.target,oe.value=a.target,re.value={x:a.snapX,y:a.snapY}):(ne.value=null,oe.value=null),ue.value=null},$o=()=>{if(n.isGenerating)return;const e=In.value;if(Ao(),!e)return void n.sendAction('<user>没有膜拜任何一座神像，选择了直接离开。');const t=(()=>{const e=In.value;if(!e)return null;const t=Hn(n.statData._血量上限,10),a=Hn(n.statData._魔量,1),o=Hn(n.statData._金币,0);return'maxHp'===e.target?{_血量上限:t+e.amount}:'mp'===e.target?{_魔量:a+e.amount}:{_金币:o+e.amount}})();t&&n.setPendingStatDataChanges(t),n.sendAction(`<user>选择膜拜了${e.statueName}并获得了${e.rewardText}。`)},Oo=()=>{const e=Math.random();return e<.8?'普通':e<.95?'稀有':'传奇'},Io=()=>{ho(),Be=setTimeout(()=>{U.value=!1,F.value=!1,X.value=!1,d.value='宝箱怪',xe.value='chestMimic',c.value=!0,Be=null},1e3)},Lo=()=>{if('opened'!==G.value||F.value||W.value)return;Y.value.some(e=>e)?toastr.info('已领取过圣遗物，当前宝箱不能关闭刷新。'):(J.value+=1,J.value>=2&&(Q.value=!0),bo(),Aa(),G.value='closed',F.value=!1,W.value=!1,X.value=!1,q.value=!1,j.value=[],Y.value=[],K.value=[])},Ro=()=>{Lo()},Po=()=>{'opened'===G.value&&(xo(),Oe=setTimeout(()=>{Lo(),Oe=null},2e3))},Ho=()=>{xo()},Uo=async()=>{if(F.value||'closed'!==G.value)return;F.value=!0;if(!Q.value&&Math.random()<.9){G.value='opened',q.value=!1,X.value=!1;const e=Z.value??(Math.random()<.8?1:2);Z.value=e;const t=(e=>{const t=[...Rt.value];if(0===t.length||e<=0)return[];const a=[],n=new Set;for(let o=0;o<e;o+=1){const e=Oo();let o=t.filter(t=>t.rarity===e&&!n.has(t.id));0===o.length&&(o=t.filter(e=>!n.has(e.id))),0===o.length&&(o=t.filter(t=>t.rarity===e)),0===o.length&&(o=t);const r=qo(o);if(!r)break;n.add(r.id),a.push(r)}return a})(e);return 0===t.length||(j.value=t,Y.value=t.map(()=>!1),W.value=!1,K.value=function(){const e=cr();if(e.length>0)return e;const t=n.statData._当前区域||'',a=ar(t);if(0===a.length)return[];const o=ir();return sr(a,o).map(e=>({label:e,roomType:e,isFloorTransition:!1,...nr[e]}))}(),q.value&&(X.value=!0)),void(F.value=!1)}Q.value=!1,G.value='mimic',W.value=!1,X.value=!1,K.value=[],await n.updateStatDataFields({_对手名称:'宝箱怪'}),Io()},zo=async()=>{if(Fn.value)return ho(),bo(),xo(),G.value='closed',F.value=!1,j.value=[],Y.value=[],W.value=!1,X.value=!1,q.value=!1,K.value=[],Z.value=null,J.value=0,Q.value=!1,void(U.value=!0);jn.value?mo():Yn.value?ko():Wn.value?So():Xn.value?await(async()=>{const e=(n.statData._当前房间类型||'').trim(),t=(n.statData._当前区域||'').trim(),a=ka('bloodpool_blood_pool');if('领主房'===e&&a>0){const e=wn.value;if(Hn(n.statData._血量,e)<e&&!await n.updateStatDataFields({_血量:e}))return}let o=(n.statData._对手名称||'').trim();if(!o){if(o='领主房'===e?Zo(t)??'':Ko(t)??'',!o)return void toastr.warning('当前未找到可战斗的对手。');if(!await n.updateStatDataFields({_对手名称:o}))return}d.value=o,xe.value='normal',c.value=!0})():toastr.info('功能开发中...')},Go=()=>{if(ze.value)return;const e=U.value?{version:1,active:'chest',chest:{stage:G.value,rolling:F.value,rewardRelicIds:j.value.map(e=>e.id),rewardCollectedFlags:j.value.map((_,e)=>Boolean(Y.value[e])),collecting:W.value,rewardVisible:X.value,openedBgReady:q.value,portalChoices:K.value.map(e=>({...e})),rewardCountFixed:Z.value,closeCount:J.value,forceMimicNextOpen:Q.value}}:u.value?{version:1,active:'shop',shop:{products:V.value.map(e=>({key:e.key,relicId:e.relic.id,basePrice:e.basePrice,finalPrice:e.finalPrice,sold:e.sold})),spentGold:O.value,purchasedItems:L.value.map(e=>({...e})),robClickCount:R.value,robbing:P.value}}:m.value?{version:1,active:'idol',idol:{diceValue:te.value,diceRolling:ae.value,assignedTarget:ne.value,snapPreviewTarget:oe.value,dicePosition:{...re.value}}}:Ee.value?{version:1,active:'victoryReward',victory:{stage:Ne.value,optionRewardIds:Ce.value.map(e=>e.id),selectedRewardId:Me.value?.id??null,refreshUsed:De.value,isNormalEnemy:Se.value}}:null;if(e)try{localStorage.setItem(ug,JSON.stringify(e))}catch{}else localStorage.removeItem(ug)},Fo=()=>{const e=localStorage.getItem(ug);if(!e)return;let t=null;try{t=JSON.parse(e)}catch{return void localStorage.removeItem(ug)}if(t&&1===t.version){ze.value=!0;try{if('chest'===t.active&&t.chest){const e=t.chest.rewardRelicIds.map(e=>Ct.value.get(e)??xr(e)).filter(e=>Boolean(e));return U.value=!0,G.value=t.chest.stage,F.value=Boolean(t.chest.rolling),j.value=e,Y.value=e.map((_,e)=>Boolean(t.chest?.rewardCollectedFlags[e])),W.value=!1,X.value=Boolean(t.chest.rewardVisible),q.value=Boolean(t.chest.openedBgReady),K.value=(e=>{if(!Array.isArray(e))return[];const t=[];for(const a of e){if(!a||'object'!=typeof a)continue;const e=a;'string'==typeof e.label&&'string'==typeof e.roomType&&'string'==typeof e.icon&&'string'==typeof e.bgColor&&'string'==typeof e.borderColor&&'string'==typeof e.textColor&&'string'==typeof e.glowColor&&t.push({label:e.label,roomType:e.roomType,areaName:'string'==typeof e.areaName?e.areaName:void 0,floorName:'string'==typeof e.floorName?e.floorName:void 0,isFloorTransition:Boolean(e.isFloorTransition),icon:e.icon,bgColor:e.bgColor,borderColor:e.borderColor,textColor:e.textColor,glowColor:e.glowColor})}return t})(t.chest.portalChoices),Z.value=null===t.chest.rewardCountFixed?null:Math.max(1,Math.min(2,Hn(t.chest.rewardCountFixed,1))),J.value=Hn(t.chest.closeCount,0),Q.value=Boolean(t.chest.forceMimicNextOpen),void('mimic'===G.value&&Io())}if('shop'===t.active&&t.shop){const e=[];for(const[a,n]of t.shop.products.entries()){const t=Ct.value.get(n.relicId)??xr(n.relicId);t&&e.push({key:n.key||`${t.id}-${a}`,relic:t,basePrice:Math.max(0,Hn(n.basePrice,0)),finalPrice:Math.max(0,Hn(n.finalPrice,0)),sold:Boolean(n.sold)})}return u.value=!0,V.value=e,O.value=Math.max(0,Hn(t.shop.spentGold,0)),L.value=Array.isArray(t.shop.purchasedItems)?t.shop.purchasedItems.filter(e=>e&&'string'==typeof e.name).map(e=>({name:e.name,rarity:'string'==typeof e.rarity?e.rarity:'普通',price:Math.max(0,Hn(e.price,0))})):[],R.value=Math.max(0,Hn(t.shop.robClickCount,0)),P.value=Boolean(t.shop.robbing),H.value=co(),void(T.value=!1)}if('idol'===t.active&&t.idol)return m.value=!0,te.value=Mo(Hn(t.idol.diceValue,Tn.value),Tn.value,Bn.value),ae.value=!1,ne.value=t.idol.assignedTarget,oe.value=t.idol.snapPreviewTarget,re.value={x:Number.isFinite(t.idol.dicePosition?.x)?t.idol.dicePosition.x:0,y:Number.isFinite(t.idol.dicePosition?.y)?t.idol.dicePosition.y:0},void(ue.value=null);if('victoryReward'===t.active&&t.victory){const e=t.victory,a=(Array.isArray(e.optionRewardIds)?e.optionRewardIds:Array.isArray(e.optionCardIds)?e.optionCardIds:[]).map(e=>Nt.value.get(e)??na.value.get(e)).filter(e=>Boolean(e));if(0===a.length)return void localStorage.removeItem(ug);const n=e.selectedRewardId??e.selectedCardId??null,o='replaceActive'===e.stage?'replaceActive':'replaceDeck'===e.stage||'replace'===e.stage?'replaceDeck':'pick';return Ee.value=!0,Ne.value=o,Ce.value=a,Me.value=n?Nt.value.get(n)??na.value.get(n)??null:null,we.value=!1,De.value=Boolean(t.victory.refreshUsed),void(Se.value=Boolean(t.victory.isNormalEnemy))}localStorage.removeItem(ug)}finally{ze.value=!1}}else localStorage.removeItem(ug)};(0,o.watch)([U,u,m,Ee,G,F,j,Y,W,X,q,K,Z,J,Q,V,O,L,R,P,te,ae,ne,oe,re,Ne,Ce,Me,De,Se],()=>{Go()},{deep:!0}),(0,o.onMounted)(()=>{Fo()});const jo={第一层:{common:['游荡粘液球','荧光蛾','根须潜行者'],uniqueByArea:{粘液之沼:['沼泽潜伏者','拟态气泡怪'],发情迷雾森林:['迷雾精怪','藤蔓行者'],喷精泉眼:['泉水精魄','潜伏触手怪'],触手菌窟:['穴居触手'],肉欲食人花圃:['极乐蜜蜂','花粉喷射者']}},第二层:{common:['浮游书页','墨痕鼠','低语幽灵'],uniqueByArea:{禁忌图书馆:['书魔','墨水史莱姆'],呻吟阅览室:['椅子拟态怪','桌面触手'],催情墨染湖:['墨团怪','触手羽毛笔'],性癖记录馆:['窥视之眼','羞耻阴影'],淫乱教职工宿舍:['堕落学者','宿舍幽灵']}},第三层:{common:['巡逻铁蝠','荆棘匍匐者','影牢使魔'],uniqueByArea:{欲望监狱:['刺链蛇','惩戒傀儡','羞耻蛭'],吸血鬼古堡:['血蝙蝠','血仆','梦魇驹'],调教审判庭:['审判蛛','证词虫','刽子手偶'],触手水牢:['深渊水母','寄生水蛭'],人偶工坊:['缝合蜘蛛','丝线傀儡','测试者']}},第四层:{common:['虚空游光','面具侍从','空间裂隙虫'],uniqueByArea:{虚空宫殿:['肉壁蠕虫'],镜之舞厅:['镜像分身','碎镜蝠'],双子寝宫:['梦魇蛾','枕头精'],春梦回廊:['画框捕食者'],极乐宴会厅:['侍宴者']}},第五层:{common:['祈祷烛灵','圣痕蝶','忏悔天使'],uniqueByArea:{交媾祭坛:['祭司傀儡','神恩触手'],圣水之海:['圣水水母','深渊鱼群','圣水精灵'],苦修之路:['晶体刺猬','苦修幽灵'],神谕淫纹室:['符文精灵','光球守卫'],女神的产房:['胎儿魔物','脐带触手']}}},Yo=['普莉姆','宁芙','温蒂尼','玛塔','罗丝','厄休拉','希尔薇','因克','阿卡夏','多萝西','维罗妮卡','伊丽莎白','尤斯蒂娅','克拉肯','布偶','赛琳娜','米拉','梦魔双子','贝希摩斯','佩恩','西格尔','摩尔','利维坦','奥赛罗','盖亚'],Wo=(()=>{const e=[];for(const t of Object.values(jo))e.push(...Object.keys(t.uniqueByArea));const t={};for(let a=0;a<e.length;a+=1){const n=e[a],o=Yo[a];o&&(t[n]=o)}return t})(),Xo={第一层:.7,第二层:.7,第三层:.7,第四层:.7,第五层:.7};function qo(e){return e.length?e[Math.floor(Math.random()*e.length)]:null}function Ko(e){const t=fl(e)??'第一层',a=jo[t];if(!a)return null;const n=a.common,o=a.uniqueByArea[e]??[],r=Xo[t]??.7;let l=[];return 0===n.length&&0===o.length?null:(l=0===n.length?o:0===o.length||Math.random()<r?n:o,qo(l))}function Zo(e){const t=Wo[e];return t||null}const Jo=['战斗房','宝箱房','商店房','温泉房','神像房','事件房','陷阱房'],Qo={战斗房:50,宝箱房:20,商店房:5,温泉房:10,神像房:10,事件房:0,陷阱房:5},er={粘液之沼:['粘液深坑','史莱姆的温床'],发情迷雾森林:['迷雾漩涡','活体树洞','树精的共生茧'],喷精泉眼:['间歇性喷泉','深水陷阱','圣泉倒灌'],肉欲食人花圃:['诱惑陷阱','粘性花蜜池'],触手菌窟:['孢子爆炸','活体陷阱'],禁忌图书馆:['幻境之书','禁言束缚'],催情墨染湖:['强制纹身','墨汁洗礼','沉溺之爱'],性癖记录馆:['公开处刑'],淫乱教职工宿舍:['催眠广播','强制派对'],欲望监狱:['自动拘束床','审讯室陷阱','矫正项圈'],吸血鬼古堡:['魅惑血雾','血契房间'],调教审判庭:['真言之椅','雷霆忏悔席'],触手水牢:['伪装平台','嵌墙活体标本'],人偶工坊:['丝线操控','强制装配台'],虚空宫殿:['重力反转','维度分割展台'],镜之舞厅:['镜像置换','自我对峙','无尽回廊'],双子寝宫:['永恒春梦','梦境具现','双子的探访'],春梦回廊:['记忆囚笼','梦魇骑行'],极乐宴会厅:['欲望之酒','暴食者的终宴'],交媾祭坛:['神圣跪拜','献祭仪式'],圣水之海:['圣水灌注','溺亡的极乐','依赖成瘾'],苦修之路:['感官过载','镜中诱惑','跌倒的代价'],神谕淫纹室:['强制烙印','欲望显现','连锁反应'],女神的产房:['强制受孕','母性陷阱','子宫回归']},tr=Object.values(er).flat(),ar=e=>{if(zt(n.statData._是否已击败商人)){const t=Jo.filter(e=>'商店房'!==e);return'呻吟阅览室'===e?t.filter(e=>'陷阱房'!==e):t}return'呻吟阅览室'===e?Jo.filter(e=>'陷阱房'!==e):[...Jo]},nr={战斗房:{icon:'⚔️',bgColor:'rgba(127,29,29,0.5)',borderColor:'#991b1b',textColor:'#fca5a5',glowColor:'#dc2626'},宝箱房:{icon:'💎',bgColor:'rgba(113,63,18,0.5)',borderColor:'#a16207',textColor:'#fde68a',glowColor:'#eab308'},商店房:{icon:'🏪',bgColor:'rgba(20,83,45,0.5)',borderColor:'#166534',textColor:'#bbf7d0',glowColor:'#22c55e'},温泉房:{icon:'♨️',bgColor:'rgba(22,78,99,0.5)',borderColor:'#155e75',textColor:'#a5f3fc',glowColor:'#06b6d4'},神像房:{icon:'🗿',bgColor:'rgba(88,28,135,0.5)',borderColor:'#7e22ce',textColor:'#e9d5ff',glowColor:'#a855f7'},事件房:{icon:'❓',bgColor:'rgba(63,63,70,0.5)',borderColor:'#52525b',textColor:'#d4d4d8',glowColor:'#71717a'},陷阱房:{icon:'⚠️',bgColor:'rgba(124,45,18,0.5)',borderColor:'#9a3412',textColor:'#fed7aa',glowColor:'#ea580c'},领主房:{icon:'👑',bgColor:'rgba(127,29,29,0.6)',borderColor:'#dc2626',textColor:'#fca5a5',glowColor:'#ef4444'}},or={icon:'🌀',bgColor:'rgba(79,70,229,0.5)',borderColor:'#6366f1',textColor:'#c7d2fe',glowColor:'#818cf8'};let rr=[],lr='';function ir(){const e=Math.random();return e<.3?1:e<.8?2:3}function sr(e,t){const a=[];if(0===e.length||t<=0)return a;const n=e.map(e=>({type:e,weight:Math.max(0,Qo[e]??0)})),o=n.reduce((e,t)=>e+t.weight,0);for(;a.length<t;){let t;if(o<=0)t=qo(e)??e[0];else{let e=Math.random()*o;t=n[n.length-1].type;for(const a of n)if(e-=a.weight,e<=0){t=a.type;break}}a.push(t)}return a}function cr(){const e=n.statData._当前区域||'',t=n.statData._当前房间类型||'',a=(n.statData.$统计||{}).当前层已过房间??0,o='魔女的小窝'===e;if(o||'领主房'===t){let t=null;if(o)t='第一层';else{const a=fl(e);a&&(t=function(e){const t=ml.indexOf(e);return t<0||t>=ml.length-1?null:ml[t+1]}(a))}if(t&&ul[t]){return function(e){const t=[...e];for(let e=t.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}(ul[t].filter(t=>t!==e)).slice(0,3).map(e=>({label:e,roomType:'',areaName:e,floorName:t,isFloorTransition:!0,...or}))}}if(a>=7){const e=.3*(a-6);if(Math.random()<e){return[{label:'领主房',roomType:'领主房',isFloorTransition:!1,...nr['领主房']}]}}const r=ar(e);if(0===r.length)return[];return sr(r,ir()).map(e=>({label:e,roomType:e,isFloorTransition:!1,...nr[e]}))}const dr=(0,o.computed)(()=>{if(!n.hasLeave)return rr=[],lr='',[];const e=`${n.statData._当前区域||''}|${n.statData._当前房间类型||''}|${n.statData.$统计?.当前层已过房间??0}|${zt(n.statData._是否已击败商人)?1:0}`;return e!==lr&&(lr=e,rr=cr()),rr}),ur={战斗房:'累计经过战斗',宝箱房:'累计经过宝箱',商店房:'累计经过商店',温泉房:'累计经过温泉',神像房:'累计经过神像',事件房:'累计经过事件',陷阱房:'累计经过陷阱'},mr=e=>{if(e.isFloorTransition){n.setPendingPortalChanges({area:e.areaName,roomType:'宝箱房',resetRoomCounter:!0,resetPath:!0,incrementKeys:['当前层已过房间','累计已过房间','累计经过宝箱'],appendPathLabel:'宝箱',enemyName:''}),console.info(`[Portal] Floor transition queued → area: ${e.areaName}, first room: 宝箱房`);const t=`进入了${e.areaName}的宝箱房`;return{enterText:t,actionText:`<user>选择了继续前进，${t}`}}const t=['当前层已过房间','累计已过房间'],a=ur[e.roomType];a&&t.push(a);const o=n.statData._当前区域||'',r='领主房'===e.roomType?Zo(o):'战斗房'===e.roomType?Ko(o):null,l='陷阱房'===e.roomType?(e=>{const t=er[e]??[];return t.length>0?qo(t):tr.length>0?qo(tr):null})(o):null,i='陷阱房'===e.roomType?Math.max(1,Hn(n.statData._血量,1)-5):void 0;let s;if('陷阱房'===e.roomType)s={_当前事件:l??'',_血量:i};else if('温泉房'===e.roomType){s={_血量:Math.max(1,wn.value)}}var c;n.setPendingPortalChanges({roomType:e.roomType,incrementKeys:t,appendPathLabel:(c=e.roomType,c.endsWith('房')?c.slice(0,-1):c),enemyName:r??''}),console.info(`[Portal] Room transition queued → type: ${e.roomType}`);const d='战斗房'!==e.roomType&&'领主房'!==e.roomType||!r?'陷阱房'===e.roomType&&l?`进入了${e.roomType}的房间，当前陷阱房为${l}`:`进入了${e.roomType}的房间`:`进入了${e.roomType}并遭遇了${r}`;return{enterText:d,actionText:`<user>选择了继续前进，${d}`,pendingStatDataFields:s}};const gr=()=>{n.loadSaveEntries(),n.isSaveLoadOpen=!n.isSaveLoadOpen},yr=()=>{i.value=!i.value},vr=e=>Math.max(0,Math.floor(ve.value[e]??0)),hr=(e,t)=>{const a=Math.max(0,Math.floor(t));a<=0?delete ve.value[e]:ve.value[e]=a},kr=()=>{const e={};for(const t of ma.value){const a=vr(t.name);a>0&&(e[t.name]=a)}return e},Nr=()=>{n.loadStatData();const e=new Set(Et.value.map(e=>e.name)),t=new Set(ma.value.map(e=>e.name)),a=Array.isArray(n.statData._技能)?n.statData._技能.filter(t=>e.has(t)).slice(0,9):[],o=n.statData._圣遗物??{},l={};for(const[e,a]of Object.entries(o)){if(!t.has(e))continue;const n=Math.max(0,Math.floor(Number(a??0)));n<=0||(l[e]=n)}ge.value=[...a],ye.value='',ve.value=l,he.value='全部',be.value='全部',Ve.value=!1,fe.value='deck',r.value='combatTestBuilder'},Cr=async()=>{if(9!==ge.value.length)return void(n.error='请先组满9张测试卡组。');await n.updateStatDataFields({_技能:[...ge.value]})&&(0!==ua.value.length?fe.value='enemy':n.error='当前没有可用魔物，请先在 enemyRegistry 注册敌人。')},Mr=async()=>{if(!ye.value)return void(n.error='请先选择一个魔物。');if(!pr(ye.value))return void(n.error=`未在敌人库中找到「${ye.value}」`);await n.updateStatDataFields({_对手名称:ye.value,_圣遗物:kr()})&&(r.value=null,d.value=ye.value,xe.value='combatTest',Te.value=Ve.value,c.value=!0)},wr=async(e,t,a,o)=>{const r=xe.value,l=d.value||n.statData._对手名称||'未知敌人';if(_e.value={id:`${Date.now()}-${Math.random().toString(36).slice(2,10)}`,context:r,win:e,enemyName:l,text:Kn(e,l,r,a??[])},((e,t,a)=>{const o=Number(t?.hp),r=Number.isFinite(o),l=Number(t?.maxHp),i=Number.isFinite(l),s=Number(n.statData._楼层数??1),c=3+2*(Number.isFinite(s)?Math.max(1,Math.floor(s)):1),d=ka('bloodpool_blood_pool'),u=ka('bloodpool_stomach_mark'),m=Hn(n.statData._血量上限,10),p=Math.max(0,2*u),f=Na.value,g=a.filter(e=>'string'==typeof e).map(e=>e.trim()).filter(e=>e.length>0);let y=r?Math.max(0,Math.floor(o)):void 0;if(e&&void 0!==y&&d>0){const e=i?Math.max(1,Math.floor(l)):Math.max(1,m+f);if(y<=Math.floor(.5*e)){const e=Math.max(1,m+p+f);y=Math.min(e,y+12*d)}}p>0&&n.mergePendingStatDataChanges({_血量上限:Math.max(1,m+p)}),n.setPendingCombatMvuChanges({hp:y,addDefeatMark:!e,goldDelta:e?c:void 0,negativeStatusesAdd:g})})(e,t,o??[]),c.value=!1,Ee.value=!1,Te.value=!1,xe.value='normal',!e){po();const e=_e.value;return _e.value=null,e&&Zn(e,e.text),void console.log('[Combat] Result:','LOSE')}if('shopRobbery'===r&&'沐芯兰'===l){await n.updateStatDataFields({_是否已击败商人:!0})?(P.value=!1,u.value=!0,Jn()):_e.value&&(_e.value.context='normal')}(()=>{const e=eo();return 0!==e.length&&(De.value=!1,Ce.value=e,Me.value=null,Ne.value='pick',Ee.value=!0,!0)})()||ao(),console.log('[Combat] Result:','WIN')};return(0,o.onBeforeUnmount)(()=>{Ke=!0,vo(),ho(),bo(),xo(),_o(),Co()}),(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',pd,[(0,o.createCommentVNode)(' Dynamic Background '),(0,o.createElementVNode)('div',fd,[(0,o.unref)(mt)?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:(0,o.unref)(mt),class:'absolute inset-0 w-full h-full object-cover',alt:'',onError:pt},null,40,gd)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',{class:'absolute inset-0',style:(0,o.normalizeStyle)({backgroundColor:`rgba(0,0,0,${(0,o.unref)(ft)})`})},null,4)]),(0,o.createCommentVNode)(' Sidebar: Individual Icons Top-Left (no back button, settings already has exit) '),(0,o.createElementVNode)('div',yd,[(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(g),label:'设置','tooltip-side':'right',active:'settings'===(0,o.unref)(r),onClick:a[0]||(a[0]=e=>r.value='settings')},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(y),label:'卡组','tooltip-side':'right',active:'deck'===(0,o.unref)(r),onClick:a[1]||(a[1]=e=>r.value='deck')},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(v),label:'物品','tooltip-side':'right',active:'relics'===(0,o.unref)(r),onClick:a[2]||(a[2]=e=>r.value='relics')},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(h),label:'羁绊','tooltip-side':'right',active:'bonds'===(0,o.unref)(r),onClick:a[3]||(a[3]=e=>r.value='bonds')},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(b),label:'地图','tooltip-side':'right',active:'map'===(0,o.unref)(r),onClick:a[4]||(a[4]=e=>r.value='map')},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(jt),label:(0,o.unref)(Ft)?'魔法书':'魔法书（锁定）','tooltip-side':'right',active:(0,o.unref)(Ft)&&'magicBooks'===(0,o.unref)(r),highlight:(0,o.unref)(Ft),disabled:!(0,o.unref)(Ft),onClick:Qt},null,8,['icon','label','active','highlight','disabled']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(Yt),label:(0,o.unref)(Ft)?'魔法帽':'魔法帽（锁定）','tooltip-side':'right',active:(0,o.unref)(Ft)&&'magicHat'===(0,o.unref)(r),highlight:(0,o.unref)(Ft),disabled:!(0,o.unref)(Ft),onClick:ea},null,8,['icon','label','active','highlight','disabled'])]),(0,o.createCommentVNode)(' Right sidebar: save/load only (reroll & edit moved into panel) '),(0,o.createElementVNode)('div',vd,[(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(x),label:'全屏模式','tooltip-side':'left',onClick:(0,o.unref)(yl)},null,8,['icon','onClick']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(k),label:'读档','tooltip-side':'left',active:(0,o.unref)(n).isSaveLoadOpen,onClick:gr},null,8,['icon','active']),(0,o.createVNode)((0,o.unref)(t),{icon:(0,o.unref)(E),label:'变量更新','tooltip-side':'left',active:(0,o.unref)(i),onClick:yr},null,8,['icon','active'])]),(0,o.createCommentVNode)(' Main Content Area '),(0,o.createElementVNode)('div',hd,[(0,o.createElementVNode)('div',{class:'w-full flex flex-col pt-2 pb-2 px-4 md:px-12 md:pl-24 transition-all duration-300 h-full',style:(0,o.normalizeStyle)({maxWidth:(0,o.unref)(Ia).containerWidth+'px'})},[(0,o.createCommentVNode)(' Story Text Area '),(0,o.createElementVNode)('div',bd,[(0,o.createCommentVNode)(' Decorative Corners '),a[45]||(a[45]=(0,o.createElementVNode)('div',{class:'absolute top-2 left-2 w-4 h-4 border-t border-l border-dungeon-gold/30'},null,-1)),a[46]||(a[46]=(0,o.createElementVNode)('div',{class:'absolute top-2 right-2 w-4 h-4 border-t border-r border-dungeon-gold/30'},null,-1)),(0,o.createCommentVNode)(' Loading Indicator '),(0,o.unref)(n).isGenerating?((0,o.openBlock)(),(0,o.createElementBlock)('div',xd,[...a[40]||(a[40]=[(0,o.createStaticVNode)('<div class="flex gap-1" data-v-c84f2af0><span class="w-2 h-2 bg-dungeon-gold rounded-full animate-bounce" style="animation-delay:0s;" data-v-c84f2af0></span><span class="w-2 h-2 bg-dungeon-gold rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-c84f2af0></span><span class="w-2 h-2 bg-dungeon-gold rounded-full animate-bounce" style="animation-delay:0.4s;" data-v-c84f2af0></span></div><span class="text-dungeon-gold/60 font-ui text-sm" data-v-c84f2af0>正在生成...</span>',2)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Edit Mode '),(0,o.unref)(n).isEditing?((0,o.openBlock)(),(0,o.createElementBlock)('div',_d,[(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':a[5]||(a[5]=e=>(0,o.unref)(n).editingText=e),class:'flex-1 w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper rounded p-4 resize-none focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui custom-scrollbar',style:(0,o.normalizeStyle)({fontSize:(0,o.unref)(Ia).fontSize+'px',lineHeight:(0,o.unref)(Ia).lineHeight,fontFamily:(0,o.unref)(Ia).fontFamily})},null,4),[[o.vModelText,(0,o.unref)(n).editingText]]),(0,o.createCommentVNode)(' Edit Actions '),(0,o.createElementVNode)('div',kd,[(0,o.createElementVNode)('button',{class:'px-5 py-2 text-sm font-ui text-gray-400 border border-gray-700 rounded hover:bg-gray-800 transition-colors',onClick:a[6]||(a[6]=e=>(0,o.unref)(n).cancelEdit())},' 取消 '),(0,o.createElementVNode)('button',{class:'px-5 py-2 text-sm font-ui text-dungeon-gold border border-dungeon-gold/40 rounded hover:bg-dungeon-gold/10 transition-colors shadow-[0_0_8px_rgba(212,175,55,0.15)]',onClick:a[7]||(a[7]=e=>(0,o.unref)(n).saveEdit())},' 确认更改 ')])])):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[(0,o.createCommentVNode)(' Normal View (not editing) '),(0,o.createCommentVNode)(' Story Content '),(0,o.createElementVNode)('div',{class:'prose prose-invert max-w-none prose-p:text-dungeon-paper tracking-wide',style:(0,o.normalizeStyle)({fontSize:(0,o.unref)(Ia).fontSize+'px',lineHeight:(0,o.unref)(Ia).lineHeight,fontFamily:(0,o.unref)(Ia).fontFamily})},[(0,o.createCommentVNode)(' Streaming text (during generation) '),(0,o.unref)(Ra)&&(0,o.unref)(n).isGenerating&&(0,o.unref)(n).streamingText?((0,o.openBlock)(),(0,o.createElementBlock)('p',Ed,(0,o.toDisplayString)((0,o.unref)(n).streamingText),1)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createCommentVNode)(' Final main text '),(0,o.createElementVNode)('div',Nd,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(En),e=>((0,o.openBlock)(),(0,o.createElementBlock)('p',{key:e.key,class:(0,o.normalizeClass)(['story-line',`story-line-level-${e.level}`])},[e.segments.length>0?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(e.segments,e=>((0,o.openBlock)(),(0,o.createElementBlock)('span',{key:e.key,class:(0,o.normalizeClass)({'story-segment-muted':'muted'===e.type,'story-segment-quote':'quote'===e.type})},(0,o.toDisplayString)(e.text),3))),128)):((0,o.openBlock)(),(0,o.createElementBlock)('span',Cd,' '))],2))),128)),(0,o.unref)(Nn).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Md,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Nn),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.key,class:'story-tucao-wrap'},[(0,o.createElementVNode)('button',{class:'story-tucao-toggle',type:'button',onClick:t=>{return a=e.key,void(hn.value[a]=!Cn(a));var a}},(0,o.toDisplayString)(Cn(e.key)?`收起脑内剧场 ${t+1}`:`🎮 此方的脑内剧场 ${t+1}`),9,wd),(0,o.createVNode)(o.Transition,{name:'tucao-expand'},{default:(0,o.withCtx)(()=>[Cn(e.key)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Dd,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.lines,e=>((0,o.openBlock)(),(0,o.createElementBlock)('p',{key:e.key,class:(0,o.normalizeClass)(['story-line',`story-line-level-${e.level}`])},[e.segments.length>0?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(e.segments,e=>((0,o.openBlock)(),(0,o.createElementBlock)('span',{key:e.key,class:(0,o.normalizeClass)({'story-segment-muted':'muted'===e.type,'story-segment-quote':'quote'===e.type})},(0,o.toDisplayString)(e.text),3))),128)):((0,o.openBlock)(),(0,o.createElementBlock)('span',Sd,' '))],2))),128))])):(0,o.createCommentVNode)('v-if',!0)]),_:2},1024)]))),128))])):(0,o.createCommentVNode)('v-if',!0)])],2112))],4),(0,o.createCommentVNode)(' Options Section '),!(0,o.unref)(n).isGenerating&&((0,o.unref)(n).options.length>0||(0,o.unref)(n).hasOptionE||(0,o.unref)(n).hasLeave||(0,o.unref)(n).hasRebirth)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ad,[a[44]||(a[44]=(0,o.createElementVNode)('div',{class:'h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent mb-2'},null,-1)),(0,o.createCommentVNode)(' A-D Normal Options '),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n).options,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:'opt-'+t,class:'w-full text-left px-5 py-3 bg-dungeon-dark/60 hover:bg-dungeon-brown/40 text-dungeon-paper/80 hover:text-dungeon-paper rounded border border-dungeon-brown/50 hover:border-dungeon-gold/40 font-ui text-sm tracking-wide transition-all duration-300 hover:shadow-[0_0_12px_rgba(212,175,55,0.08)] hover:translate-x-1',onClick:t=>(e=>{if(n.isGenerating)return;const t=e.replace(/^[A-D]\.\s*/i,'');l.value=t})(e)},(0,o.toDisplayString)(e),9,Vd))),128)),(0,o.createCommentVNode)(' E Option: Special Room Action Button '),(0,o.unref)(n).hasOptionE&&(0,o.unref)(Gn)?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:0,class:'w-full text-center px-6 py-4 rounded-lg border-2 font-heading text-base tracking-wider transition-all duration-400 hover:scale-[1.02] active:scale-[0.98]',style:(0,o.normalizeStyle)({backgroundColor:(0,o.unref)(Gn).bgColor,borderColor:(0,o.unref)(Gn).borderColor,color:(0,o.unref)(Gn).textColor,boxShadow:`0 0 20px ${(0,o.unref)(Gn).glowColor}, inset 0 1px 0 rgba(255,255,255,0.1)`}),onClick:zo},[(0,o.createElementVNode)('span',Td,(0,o.toDisplayString)((0,o.unref)(Gn).icon),1),(0,o.createTextVNode)(' '+(0,o.toDisplayString)((0,o.unref)(Gn).label),1)],4)):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' [Leave] Portal System '),(0,o.unref)(n).hasLeave&&(0,o.unref)(dr).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Bd,[a[41]||(a[41]=(0,o.createElementVNode)('div',{class:'text-center text-dungeon-gold/40 text-xs font-ui tracking-widest uppercase mb-3'},' ─── 传送门 ─── ',-1)),(0,o.createElementVNode)('div',$d,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(dr),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:'portal-'+t,class:'portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95',style:(0,o.normalizeStyle)({backgroundColor:e.bgColor,borderColor:e.borderColor,boxShadow:`0 0 15px ${e.glowColor}, 0 0 30px ${e.glowColor}40`}),onClick:t=>(async e=>{if(n.isGenerating)return;uo();const{actionText:t,pendingStatDataFields:a}=mr(e);n.setPendingStatDataChanges(a??null),n.sendAction(t)})(e)},[(0,o.createCommentVNode)(' Portal glow ring '),(0,o.createElementVNode)('div',{class:'absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500',style:(0,o.normalizeStyle)({boxShadow:`inset 0 0 20px ${e.glowColor}60`})},null,4),(0,o.createCommentVNode)(' Portal icon '),(0,o.createElementVNode)('span',Id,(0,o.toDisplayString)(e.icon),1),(0,o.createCommentVNode)(' Portal label '),(0,o.createElementVNode)('span',{class:'text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight',style:(0,o.normalizeStyle)({color:e.textColor})},(0,o.toDisplayString)(e.label),5),(0,o.createCommentVNode)(' Animated ring '),(0,o.createElementVNode)('div',{class:'absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity',style:(0,o.normalizeStyle)({borderColor:e.borderColor})},null,4)],12,Od))),128))])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' [Rebirth] Reset Button '),(0,o.unref)(n).hasRebirth?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ld,[a[43]||(a[43]=(0,o.createElementVNode)('div',{class:'text-center text-red-300/70 text-xs font-ui tracking-widest uppercase mb-3'},' ─── 回溯 ─── ',-1)),(0,o.createElementVNode)('div',Rd,[(0,o.createElementVNode)('button',{class:'group relative px-7 py-3 rounded-lg border-2 font-heading text-sm tracking-wider transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] bg-red-950/45 border-red-500/60 text-red-100 shadow-[0_0_14px_rgba(239,68,68,0.35)] hover:shadow-[0_0_20px_rgba(248,113,113,0.5)]',disabled:(0,o.unref)(n).isGenerating,onClick:Un},[...a[42]||(a[42]=[(0,o.createElementVNode)('span',{class:'text-base mr-2'},'⟲',-1),(0,o.createTextVNode)(' 回溯重生 ',-1)])],8,Pd)])])):(0,o.createCommentVNode)('v-if',!0)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(ee)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`spring-cleanse-${(0,o.unref)(ee).id}`,class:'spring-cleanse-float'},(0,o.toDisplayString)((0,o.unref)(ee).text),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Error Display '),(0,o.unref)(n).error?((0,o.openBlock)(),(0,o.createElementBlock)('div',Hd,(0,o.toDisplayString)((0,o.unref)(n).error),1)):(0,o.createCommentVNode)('v-if',!0)],64))]),(0,o.createCommentVNode)(' Input Area '),(0,o.createElementVNode)('div',Ud,[(0,o.createElementVNode)('div',zd,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[8]||(a[8]=e=>(0,o.isRef)(l)?l.value=e:null),type:'text',disabled:(0,o.unref)(n).isGenerating,placeholder:(0,o.unref)(n).isGenerating?'等待回复中...':'输入你的行动...',class:'w-full bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper px-4 py-3 pr-14 rounded focus:outline-none focus:border-dungeon-gold focus:ring-1 focus:ring-dungeon-gold/50 font-ui placeholder-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed',onKeydown:(0,o.withKeys)(Ln,['enter'])},null,40,Gd),[[o.vModelText,(0,o.unref)(l)]]),(0,o.createElementVNode)('button',{class:'absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#1a0f08] border border-dungeon-gold/30 hover:bg-dungeon-brown hover:border-dungeon-gold text-dungeon-gold rounded transition-all disabled:opacity-30 disabled:cursor-not-allowed',disabled:(0,o.unref)(n).isGenerating,onClick:Ln},[(0,o.createVNode)((0,o.unref)(N),{class:'size-5'})],8,Fd)])])],4)]),(0,o.createCommentVNode)(' Player Status HUD (Bottom Left) - Collapsible '),(0,o.createElementVNode)('div',jd,[(0,o.createCommentVNode)(' Toggle Button '),(0,o.createElementVNode)('button',{class:'w-10 h-10 rounded-lg flex items-center justify-center bg-dungeon-dark/90 border border-dungeon-gold/30 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300 shadow-lg backdrop-blur-md',title:(0,o.unref)(s)?'收起状态栏':'展开状态栏',onClick:a[9]||(a[9]=e=>s.value=!(0,o.unref)(s))},[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(s)?(0,o.unref)(C):(0,o.unref)(M)),{class:'size-5'}))],8,Yd),(0,o.createCommentVNode)(' Expandable Status Panel '),(0,o.createVNode)(o.Transition,{name:'status-slide'},{default:(0,o.withCtx)(()=>[(0,o.unref)(s)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Wd,[(0,o.createCommentVNode)(' Decorative Elements '),a[56]||(a[56]=(0,o.createElementVNode)('div',{class:'absolute -top-1 -left-1 size-2 bg-dungeon-gold rotate-45 border border-black'},null,-1)),a[57]||(a[57]=(0,o.createElementVNode)('div',{class:'absolute -bottom-1 -right-1 size-2 bg-dungeon-gold rotate-45 border border-black'},null,-1)),a[58]||(a[58]=(0,o.createElementVNode)('div',{class:'absolute top-0 inset-x-0 h-[1px] bg-gradient-to-r from-transparent via-dungeon-gold/50 to-transparent'},null,-1)),(0,o.createCommentVNode)(' HP & MP: Container-fill style '),(0,o.createElementVNode)('div',Xd,[(0,o.createCommentVNode)(' HP Heart Container '),(0,o.createElementVNode)('div',qd,[(0,o.createElementVNode)('div',{class:'stat-container-heart',title:`HP: ${(0,o.unref)(Mn)}/${(0,o.unref)(wn)}`},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',Zd,[a[47]||(a[47]=(0,o.createElementVNode)('defs',null,[(0,o.createElementVNode)('clipPath',{id:'heartClip'},[(0,o.createElementVNode)('path',{d:'M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z'})]),(0,o.createElementVNode)('filter',{id:'hpGlow'},[(0,o.createElementVNode)('feGaussianBlur',{stdDeviation:'2',result:'glow'}),(0,o.createElementVNode)('feMerge',null,[(0,o.createElementVNode)('feMergeNode',{in:'glow'}),(0,o.createElementVNode)('feMergeNode',{in:'SourceGraphic'})])]),(0,o.createElementVNode)('linearGradient',{id:'hpGradient',x1:'0',y1:'1',x2:'0',y2:'0'},[(0,o.createElementVNode)('stop',{offset:'0%','stop-color':'#8a0e0e'}),(0,o.createElementVNode)('stop',{offset:'50%','stop-color':'#cc2222'}),(0,o.createElementVNode)('stop',{offset:'100%','stop-color':'#ee4444'})])],-1)),(0,o.createCommentVNode)(' Heart outline (dark) '),a[48]||(a[48]=(0,o.createElementVNode)('path',{d:'M32 56 C32 56, 6 40, 6 22 C6 12, 14 4, 24 4 C28 4, 31 6, 32 9 C33 6, 36 4, 40 4 C50 4, 58 12, 58 22 C58 40, 32 56, 32 56Z',fill:'#1a0808',stroke:'#5c1a1a','stroke-width':'1.5'},null,-1)),(0,o.createCommentVNode)(' Fill level (clipped to heart) '),(0,o.createElementVNode)('g',Jd,[(0,o.createElementVNode)('rect',{x:'0',y:64-(0,o.unref)($n)/100*60,width:'64',height:(0,o.unref)($n)/100*60,fill:'url(#hpGradient)',filter:'url(#hpGlow)',class:'transition-all duration-700 ease-out'},null,8,Qd)]),(0,o.createCommentVNode)(' Highlight '),a[49]||(a[49]=(0,o.createElementVNode)('ellipse',{cx:'22',cy:'18',rx:'5',ry:'4',fill:'rgba(255,255,255,0.12)',transform:'rotate(-20,22,18)'},null,-1))]))],8,Kd),(0,o.createElementVNode)('span',eu,[(0,o.createElementVNode)('span',tu,(0,o.toDisplayString)((0,o.unref)(Mn)),1),(0,o.createElementVNode)('span',au,'/'+(0,o.toDisplayString)((0,o.unref)(wn)),1)])]),(0,o.createCommentVNode)(' MP Crystal Container '),(0,o.createElementVNode)('div',nu,[(0,o.createElementVNode)('div',{class:'stat-container-mana',title:`MP: ${(0,o.unref)(Dn)}`},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',ru,[a[50]||(a[50]=(0,o.createElementVNode)('defs',null,[(0,o.createElementVNode)('clipPath',{id:'manaClip'},[(0,o.createElementVNode)('path',{d:'M32 4 L54 24 L32 60 L10 24 Z'})]),(0,o.createElementVNode)('filter',{id:'mpGlow'},[(0,o.createElementVNode)('feGaussianBlur',{stdDeviation:'2',result:'glow'}),(0,o.createElementVNode)('feMerge',null,[(0,o.createElementVNode)('feMergeNode',{in:'glow'}),(0,o.createElementVNode)('feMergeNode',{in:'SourceGraphic'})])]),(0,o.createElementVNode)('linearGradient',{id:'mpGradient',x1:'0',y1:'1',x2:'0',y2:'0'},[(0,o.createElementVNode)('stop',{offset:'0%','stop-color':'#1a1a8a'}),(0,o.createElementVNode)('stop',{offset:'50%','stop-color':'#3344cc'}),(0,o.createElementVNode)('stop',{offset:'100%','stop-color':'#5566ee'})])],-1)),(0,o.createCommentVNode)(' Crystal outline '),a[51]||(a[51]=(0,o.createElementVNode)('path',{d:'M32 4 L54 24 L32 60 L10 24 Z',fill:'#080818',stroke:'#1a1a5c','stroke-width':'1.5'},null,-1)),(0,o.createCommentVNode)(' Fill level '),(0,o.createElementVNode)('g',lu,[(0,o.createElementVNode)('rect',{x:'0',y:64-(0,o.unref)(On)/100*60,width:'64',height:(0,o.unref)(On)/100*60,fill:'url(#mpGradient)',filter:'url(#mpGlow)',class:'transition-all duration-700 ease-out'},null,8,iu)]),(0,o.createCommentVNode)(' Highlight '),a[52]||(a[52]=(0,o.createElementVNode)('polygon',{points:'26,14 32,8 38,14 32,20',fill:'rgba(255,255,255,0.1)'},null,-1))]))],8,ou),(0,o.createElementVNode)('span',su,[(0,o.createElementVNode)('span',cu,(0,o.toDisplayString)((0,o.unref)(Dn)),1)])])]),(0,o.createCommentVNode)(' Divider '),a[59]||(a[59]=(0,o.createElementVNode)('div',{class:'my-2 h-[1px] w-full bg-gradient-to-r from-transparent via-dungeon-gold/20 to-transparent'},null,-1)),(0,o.createCommentVNode)(' Dice Range Row '),(0,o.createElementVNode)('div',du,[(0,o.createElementVNode)('div',uu,[(0,o.createVNode)((0,o.unref)(w),{class:'size-4 text-dungeon-gold-dim drop-shadow-sm'}),(0,o.createElementVNode)('span',mu,[(0,o.createElementVNode)('span',pu,(0,o.toDisplayString)((0,o.unref)(An)),1),a[53]||(a[53]=(0,o.createElementVNode)('span',{class:'text-gray-500'},'~',-1)),(0,o.createElementVNode)('span',fu,(0,o.toDisplayString)((0,o.unref)(Vn)),1)])]),a[54]||(a[54]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold'},'Dice',-1))]),(0,o.createCommentVNode)(' Gold Row '),(0,o.createElementVNode)('div',gu,[(0,o.createElementVNode)('div',yu,[(0,o.createVNode)((0,o.unref)(D),{class:'size-4 drop-shadow-sm'}),(0,o.createElementVNode)('span',vu,(0,o.toDisplayString)((0,o.unref)(Sn)),1)]),a[55]||(a[55]=(0,o.createElementVNode)('span',{class:'text-[10px] text-[#5c3a21] uppercase tracking-widest font-bold'},'Gold',-1))])])):(0,o.createCommentVNode)('v-if',!0)]),_:1})]),(0,o.createCommentVNode)(' Modals '),(0,o.createVNode)(zc,{title:'地牢地图','is-open':'map'===(0,o.unref)(r),'panel-class':'max-w-5xl',onClose:a[10]||(a[10]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',hu,[(0,o.createElementVNode)('div',bu,[(0,o.createElementVNode)('div',xu,[a[60]||(a[60]=(0,o.createTextVNode)(' 本层路径：',-1)),(0,o.createElementVNode)('span',_u,(0,o.toDisplayString)((0,o.unref)(Fa).length),1),a[61]||(a[61]=(0,o.createTextVNode)(' 房 ',-1)),a[62]||(a[62]=(0,o.createElementVNode)('span',{class:'map-summary-divider'},'|',-1)),a[63]||(a[63]=(0,o.createTextVNode)(' 统计计数：',-1)),(0,o.createElementVNode)('span',ku,(0,o.toDisplayString)((0,o.unref)(ja)),1),a[64]||(a[64]=(0,o.createTextVNode)(' 房 ',-1))]),(0,o.createElementVNode)('div',{class:'map-controls'},[(0,o.createElementVNode)('button',{type:'button',class:'map-control-btn',onClick:sn},'-'),(0,o.createElementVNode)('button',{type:'button',class:'map-control-btn',onClick:ln},'+'),(0,o.createElementVNode)('button',{type:'button',class:'map-control-btn map-control-btn--wide',onClick:cn},'重置视图')])]),0===(0,o.unref)(Fa).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Eu,' 本层暂无路径记录 ')):((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,ref_key:'mapViewportRef',ref:Ya,class:'map-viewport',onWheel:(0,o.withModifiers)(dn,['prevent']),onPointerdown:un,onPointermove:mn,onPointerup:pn,onPointercancel:pn},[(0,o.createElementVNode)('div',{class:'map-canvas',style:(0,o.normalizeStyle)((0,o.unref)(nn))},[((0,o.openBlock)(),(0,o.createElementBlock)('svg',{class:'map-links',width:(0,o.unref)(en),height:(0,o.unref)(tn),viewBox:`0 0 ${(0,o.unref)(en)} ${(0,o.unref)(tn)}`},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(an),e=>((0,o.openBlock)(),(0,o.createElementBlock)('line',{key:e.key,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:'rgba(0,0,0,0.9)','stroke-width':'4','stroke-linecap':'round'},null,8,Cu))),128))],8,Nu)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Qa),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`path-node-${e.index}`,class:'map-room-cell',style:(0,o.normalizeStyle)(e.style)},[(0,o.createElementVNode)('span',Mu,(0,o.toDisplayString)(e.icon),1),(0,o.createElementVNode)('span',wu,(0,o.toDisplayString)(e.index+1),1)],4))),128))],4)],544))])]),_:1},8,['is-open']),(0,o.createVNode)(zc,{title:'羁绊','is-open':'bonds'===(0,o.unref)(r),'panel-class':'max-w-4xl',onClose:a[11]||(a[11]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.unref)(ot).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Du,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ot),e=>{return(0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`bond-${e.name}`,class:'bond-row'},[(0,o.createElementVNode)('button',{type:'button',class:'bond-portrait-frame bond-portrait-frame--clickable',onClick:t=>(e=>{We.value[e.name]||(qe.value={name:e.name,url:e.portraitUrl})})(e)},[(0,o.unref)(We)[e.name]?((0,o.openBlock)(),(0,o.createElementBlock)('div',Vu,(0,o.toDisplayString)(e.name.slice(0,1)),1)):((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:e.portraitUrl,alt:`${e.name} 立绘`,class:'bond-portrait-image',loading:'lazy',onError:t=>{return a=e.name,void(We.value={...We.value,[a]:!0});var a}},null,40,Au))],8,Su),(0,o.createElementVNode)('div',Tu,[(0,o.createElementVNode)('div',Bu,[(0,o.createElementVNode)('span',$u,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['bond-affection-value',e.affection>=0?'bond-affection-value--positive':'bond-affection-value--negative'])},(0,o.toDisplayString)((t=e.affection,t>0?`+${t}`:String(t)))+' / 1000',3)]),(0,o.createElementVNode)('div',Ou,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['bond-affection-fill',e.affection>=0?'bond-affection-fill--positive':'bond-affection-fill--negative']),style:(0,o.normalizeStyle)({width:`${Math.round(100*e.affectionAbsRatio)}%`})},null,6)])])]);var t}),128))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Iu,[(0,o.createVNode)((0,o.unref)(h),{class:'size-12 text-dungeon-gold/20'}),a[65]||(a[65]=(0,o.createElementVNode)('span',{class:'font-ui text-sm text-dungeon-paper/50'},'暂无可显示的羁绊角色',-1))]))]),_:1},8,['is-open']),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(qe)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'fixed inset-0 z-[230] flex items-center justify-center bg-black/85 p-6 backdrop-blur-sm',onClick:lt},[(0,o.createElementVNode)('div',{class:'bond-preview-panel',onClick:a[12]||(a[12]=(0,o.withModifiers)(()=>{},['stop']))},[(0,o.createElementVNode)('img',{src:(0,o.unref)(qe).url,alt:`${(0,o.unref)(qe).name} 立绘大图`,class:'bond-preview-image'},null,8,Lu),(0,o.createElementVNode)('div',Ru,[(0,o.createElementVNode)('span',Pu,(0,o.toDisplayString)((0,o.unref)(qe).name),1),(0,o.createElementVNode)('button',{type:'button',class:'bond-preview-close-btn',onClick:lt},'关闭')])])])):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createVNode)(zc,{title:'符文卡组','is-open':'deck'===(0,o.unref)(r),onClose:a[13]||(a[13]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.unref)(ba).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Hu,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ba),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'hover:scale-105 transition-transform flex justify-center'},[(0,o.createVNode)(hi,{card:e,disabled:''},null,8,['card'])]))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Uu,[(0,o.createVNode)((0,o.unref)(y),{class:'size-12 text-dungeon-gold/20'}),a[66]||(a[66]=(0,o.createElementVNode)('span',{class:'font-ui text-dungeon-paper/40 text-sm'},'卡组为空 — 尚未装备技能卡',-1))]))]),_:1},8,['is-open']),(0,o.createVNode)(zc,{title:'魔法书','is-open':'magicBooks'===(0,o.unref)(r),'panel-class':'max-w-[92rem] max-h-[94%]',onClose:a[14]||(a[14]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',zu,[(0,o.unref)($t).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Gu,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)($t),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`magic-book-${e}`,type:'button',class:(0,o.normalizeClass)(['relative rounded-lg border p-3 text-left transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed bg-[#130c08]/80',(0,o.unref)(Lt).has(e)?'border-dungeon-gold/80 shadow-[0_0_20px_rgba(212,175,55,0.45)] ring-1 ring-dungeon-gold/70':'border-dungeon-brown/70 hover:border-dungeon-gold/45']),disabled:(0,o.unref)(Wt),onClick:t=>(async e=>{if(Wt.value)return;const t=Ot.value,a=t.includes(e)?t.filter(t=>t!==e):[...t,e];Wt.value=!0,await n.updateStatDataFields({_携带的魔法书:Array.from(new Set(a))}),Wt.value=!1})(e)},[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['relative w-full overflow-hidden rounded-md border',(0,o.unref)(Lt).has(e)?'border-dungeon-gold/60':'border-dungeon-brown/60'])},[(0,o.createElementVNode)('img',{src:Bt(e),alt:`${e} 魔法书封面`,class:(0,o.normalizeClass)(['w-full [aspect-ratio:832/1216] object-cover transition-all duration-300',(0,o.unref)(Lt).has(e)?'brightness-100 saturate-110':'brightness-50 saturate-60']),loading:'lazy'},null,10,ju),a[67]||(a[67]=(0,o.createElementVNode)('div',{class:'absolute inset-0 bg-gradient-to-t from-black/55 via-black/10 to-black/38'},null,-1)),(0,o.createElementVNode)('div',Yu,[(0,o.createElementVNode)('div',Wu,(0,o.toDisplayString)(e)+'之书',1)])],2)],10,Fu))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Xu,' 当前没有可选的附加魔法书。 '))])]),_:1},8,['is-open']),(0,o.createVNode)(zc,{title:'魔法帽','is-open':'magicHat'===(0,o.unref)(r),'panel-class':'max-w-3xl',onClose:a[15]||(a[15]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',qu,[(0,o.createElementVNode)('div',Ku,[a[68]||(a[68]=(0,o.createElementVNode)('span',{class:'font-ui text-dungeon-paper/75 text-sm'},'可用技能点',-1)),(0,o.createElementVNode)('span',Zu,(0,o.toDisplayString)((0,o.unref)(Zt)),1)]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Jt),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`magic-hat-${e.id}`,class:'rounded border border-dungeon-brown/60 bg-[#160d08]/65 p-4'},[(0,o.createElementVNode)('div',Ju,[(0,o.createElementVNode)('div',null,[(0,o.createElementVNode)('div',Qu,(0,o.toDisplayString)(e.label),1),(0,o.createElementVNode)('div',em,' 当前 '+(0,o.toDisplayString)(e.currentValue)+' · 等级 '+(0,o.toDisplayString)(e.currentLevel)+'/'+(0,o.toDisplayString)(e.maxLevel),1)]),(0,o.createElementVNode)('button',{type:'button',class:(0,o.normalizeClass)(['px-3 py-1.5 rounded border text-xs font-ui transition-colors disabled:opacity-50 disabled:cursor-not-allowed',e.isMax?'border-dungeon-brown/60 text-dungeon-paper/45':'border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10']),disabled:(0,o.unref)(Xt)||e.isMax,onClick:t=>(async e=>{if(!Ft.value)return;if(Xt.value)return;const t=Jt.value.find(t=>t.id===e);if(!t||t.isMax)return;if(Zt.value<t.nextCost)return void toastr.warning('技能点不足，无法升级。');const a={$技能点:Zt.value-t.nextCost};'hp'===e?(a['$初始血量上限']=t.nextValue,a._血量上限=t.nextValue,a._血量=t.nextValue):'mp'===e?(a['$初始魔量']=t.nextValue,a._魔量=Math.max(qt(n.statData._魔量,0),t.nextValue)):(a['$初始金币']=t.nextValue,a._金币=Math.max(qt(n.statData._金币,0),t.nextValue)),Xt.value=!0;const o=await n.updateStatDataFields(a);Xt.value=!1,o?toastr.info(`${t.label} 已升级至 ${t.nextValue}。`):toastr.warning('升级失败，请稍后重试。')})(e.id)},(0,o.toDisplayString)(e.isMax?'已满级':`升级（-${e.nextCost} 技能点）`),11,tm)]),(0,o.createElementVNode)('div',am,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['h-full transition-all duration-300',e.barClass]),style:(0,o.normalizeStyle)({width:`${e.progressPercent}%`})},null,6)]),(0,o.createElementVNode)('div',nm,(0,o.toDisplayString)(e.isMax?'已达到可升级上限':`下一级提升至 ${e.nextValue}`),1)]))),128))])]),_:1},8,['is-open']),(0,o.createVNode)(zc,{title:'圣遗物','is-open':'relics'===(0,o.unref)(r),onClose:a[16]||(a[16]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.unref)(_a).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',om,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(_a),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:e.name,type:'button',class:'relative flex flex-col items-center p-1.5 rounded border border-dungeon-brown/30 bg-[#1a0f08]/35 hover:border-dungeon-gold/40 transition-colors focus:outline-none focus:border-dungeon-gold/60',onMouseenter:t=>Sa(t,e),onMouseleave:Aa,onFocus:t=>Sa(t,e),onBlur:Aa,onTouchstartPassive:t=>Va(t,e),onTouchend:Ta,onTouchcancel:Ta},[(0,o.createElementVNode)('div',lm,[(0,o.createVNode)((0,o.unref)(v),{class:'size-9 text-dungeon-gold/75'}),(0,o.createElementVNode)('span',im,'x'+(0,o.toDisplayString)(e.count),1)]),(0,o.createElementVNode)('span',sm,(0,o.toDisplayString)(e.name),1)],40,rm))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',cm,[(0,o.createVNode)((0,o.unref)(v),{class:'size-12 text-dungeon-gold/20'}),a[69]||(a[69]=(0,o.createElementVNode)('span',{class:'font-ui text-dungeon-paper/40 text-sm'},'尚未获得圣遗物',-1))]))]),_:1},8,['is-open']),(0,o.unref)(Ae)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'fixed z-[220] pointer-events-none relic-tooltip',style:(0,o.normalizeStyle)({left:`${(0,o.unref)(Ae).x}px`,top:`${(0,o.unref)(Ae).y}px`})},[(0,o.createElementVNode)('div',dm,(0,o.toDisplayString)((0,o.unref)(Ae).name),1),(0,o.createElementVNode)('div',um,(0,o.toDisplayString)((0,o.unref)(Ae).description),1)],4)):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Settings Modal '),(0,o.createVNode)(zc,{title:'系统设置','is-open':'settings'===(0,o.unref)(r),onClose:a[29]||(a[29]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',mm,[(0,o.createCommentVNode)(' Text Display Settings Section '),(0,o.createElementVNode)('div',null,[a[79]||(a[79]=(0,o.createElementVNode)('h3',{class:'font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase'},'正文显示',-1)),(0,o.createElementVNode)('div',pm,[(0,o.createCommentVNode)(' Font Size '),(0,o.createElementVNode)('div',fm,[a[70]||(a[70]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'字体大小',-1)),(0,o.createElementVNode)('div',gm,[(0,o.createElementVNode)('button',{class:'w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm',onClick:a[17]||(a[17]=e=>(0,o.unref)(Ia).fontSize=Math.max(12,(0,o.unref)(Ia).fontSize-1))},'−'),(0,o.createElementVNode)('span',ym,(0,o.toDisplayString)((0,o.unref)(Ia).fontSize)+'px',1),(0,o.createElementVNode)('button',{class:'w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm',onClick:a[18]||(a[18]=e=>(0,o.unref)(Ia).fontSize=Math.min(28,(0,o.unref)(Ia).fontSize+1))},'+')])]),(0,o.createCommentVNode)(' Line Height '),(0,o.createElementVNode)('div',vm,[a[71]||(a[71]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'行间距',-1)),(0,o.createElementVNode)('div',hm,[(0,o.createElementVNode)('button',{class:'w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm',onClick:a[19]||(a[19]=e=>(0,o.unref)(Ia).lineHeight=Math.max(1.2,+((0,o.unref)(Ia).lineHeight-.1).toFixed(1)))},'−'),(0,o.createElementVNode)('span',bm,(0,o.toDisplayString)((0,o.unref)(Ia).lineHeight),1),(0,o.createElementVNode)('button',{class:'w-7 h-7 rounded border border-dungeon-brown text-dungeon-gold-dim hover:border-dungeon-gold hover:text-dungeon-gold text-sm',onClick:a[20]||(a[20]=e=>(0,o.unref)(Ia).lineHeight=Math.min(3,+((0,o.unref)(Ia).lineHeight+.1).toFixed(1)))},'+')])]),(0,o.createCommentVNode)(' Font Family '),(0,o.createElementVNode)('div',xm,[a[73]||(a[73]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'字体样式',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':a[21]||(a[21]=e=>(0,o.unref)(Ia).fontFamily=e),class:'bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui'},[...a[72]||(a[72]=[(0,o.createElementVNode)('option',{value:'\'Cinzel\', serif'},'Cinzel (默认)',-1),(0,o.createElementVNode)('option',{value:'\'Inter\', sans-serif'},'Inter',-1),(0,o.createElementVNode)('option',{value:'\'MedievalSharp\', cursive'},'MedievalSharp',-1),(0,o.createElementVNode)('option',{value:'\'MaShanZheng\', \'KaiTi\', serif'},'马善政体',-1),(0,o.createElementVNode)('option',{value:'\'MagicBookTitle\', \'KaiTi\', serif'},'江湖琅琊体',-1),(0,o.createElementVNode)('option',{value:'serif'},'Serif',-1),(0,o.createElementVNode)('option',{value:'sans-serif'},'Sans-serif',-1),(0,o.createElementVNode)('option',{value:'\'Microsoft YaHei\', sans-serif'},'微软雅黑',-1),(0,o.createElementVNode)('option',{value:'\'SimSun\', serif'},'宋体',-1),(0,o.createElementVNode)('option',{value:'\'KaiTi\', serif'},'楷体',-1)])],512),[[o.vModelSelect,(0,o.unref)(Ia).fontFamily]])]),(0,o.createCommentVNode)(' Container Width '),(0,o.createElementVNode)('div',_m,[a[74]||(a[74]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'正文框宽度',-1)),(0,o.createElementVNode)('div',km,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[22]||(a[22]=e=>(0,o.unref)(Ia).containerWidth=e),type:'range',min:'600',max:'1600',step:'50',class:'w-28 accent-dungeon-gold'},null,512),[[o.vModelText,(0,o.unref)(Ia).containerWidth,void 0,{number:!0}]]),(0,o.createElementVNode)('span',Em,(0,o.toDisplayString)((0,o.unref)(Ia).containerWidth)+'px',1)])]),(0,o.createCommentVNode)(' Background Clarity '),(0,o.createElementVNode)('div',Nm,[a[75]||(a[75]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'背景清晰度',-1)),(0,o.createElementVNode)('div',Cm,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[23]||(a[23]=e=>(0,o.isRef)(ft)?ft.value=e:null),type:'range',min:'0',max:'0.8',step:'0.05',class:'w-28 accent-dungeon-gold'},null,512),[[o.vModelText,(0,o.unref)(ft),void 0,{number:!0}]]),(0,o.createElementVNode)('span',Mm,(0,o.toDisplayString)(Math.round(100*(1-(0,o.unref)(ft))))+'%',1)])]),(0,o.createElementVNode)('div',wm,[a[76]||(a[76]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'背景音乐',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':a[24]||(a[24]=e=>(0,o.isRef)(Ha)?Ha.value=e:null),disabled:0===(0,o.unref)(Qr).length,class:'bg-[#1a0f08] border border-dungeon-brown text-dungeon-paper text-sm px-3 py-1.5 rounded focus:outline-none focus:border-dungeon-gold font-ui disabled:opacity-50 disabled:cursor-not-allowed'},[0===(0,o.unref)(Qr).length?((0,o.openBlock)(),(0,o.createElementBlock)('option',Sm,'暂无可用曲目')):(0,o.createCommentVNode)('v-if',!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Qr),e=>((0,o.openBlock)(),(0,o.createElementBlock)('option',{key:e.id,value:e.id},(0,o.toDisplayString)(e.name),9,Am))),128))],8,Dm),[[o.vModelSelect,(0,o.unref)(Ha)]])]),(0,o.createElementVNode)('div',Vm,[a[77]||(a[77]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'背景音乐音量',-1)),(0,o.createElementVNode)('div',Tm,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[25]||(a[25]=e=>(0,o.isRef)(Ua)?Ua.value=e:null),type:'range',min:'0',max:'100',step:'1',class:'w-28 accent-dungeon-gold'},null,512),[[o.vModelText,(0,o.unref)(Ua),void 0,{number:!0}]]),(0,o.createElementVNode)('span',Bm,(0,o.toDisplayString)((0,o.unref)(Ua))+'%',1)])]),(0,o.createElementVNode)('div',$m,[a[78]||(a[78]=(0,o.createElementVNode)('label',{class:'text-dungeon-paper/70 text-sm font-ui'},'启用流式传输',-1)),(0,o.createElementVNode)('label',Om,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[26]||(a[26]=e=>(0,o.isRef)(Ra)?Ra.value=e:null),type:'checkbox',class:'h-4 w-4 accent-dungeon-gold'},null,512),[[o.vModelCheckbox,(0,o.unref)(Ra)]]),(0,o.createElementVNode)('span',Im,(0,o.toDisplayString)((0,o.unref)(Ra)?'开启':'关闭'),1)])])])]),a[81]||(a[81]=(0,o.createElementVNode)('div',{class:'h-[1px] w-full bg-dungeon-gold/20'},null,-1)),(0,o.createCommentVNode)(' System Section '),(0,o.createElementVNode)('div',null,[a[80]||(a[80]=(0,o.createElementVNode)('h3',{class:'font-heading text-dungeon-gold text-sm tracking-widest mb-4 uppercase'},'系统',-1)),(0,o.createElementVNode)('div',Lm,[(0,o.createElementVNode)('button',{class:'p-3 border border-dungeon-gold/30 hover:bg-dungeon-brown text-dungeon-gold text-sm rounded',onClick:a[27]||(a[27]=(...e)=>(0,o.unref)(yl)&&(0,o.unref)(yl)(...e))},' 切换全屏模式 '),(0,o.createElementVNode)('button',{class:'p-3 border border-red-900/50 hover:bg-red-950/30 text-red-500 text-sm rounded',onClick:a[28]||(a[28]=t=>e.$emit('backToSplash'))},' 退出到标题 '),(0,o.createElementVNode)('button',{class:'p-3 border border-amber-600/40 hover:bg-amber-900/20 text-amber-400 text-sm rounded col-span-2',onClick:Nr},' ⚔ 进入战斗测试 ')])])])]),_:1},8,['is-open']),(0,o.createCommentVNode)(' Combat Test Builder Modal '),(0,o.createVNode)(zc,{title:'战斗测试配置','is-open':'combatTestBuilder'===(0,o.unref)(r),onClose:a[33]||(a[33]=e=>r.value=null)},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',Rm,['deck'===(0,o.unref)(fe)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)('div',Pm,[a[82]||(a[82]=(0,o.createElementVNode)('h3',{class:'font-heading text-dungeon-gold text-sm tracking-widest uppercase'},'步骤1：组建卡组（9张）',-1)),(0,o.createElementVNode)('span',Hm,(0,o.toDisplayString)((0,o.unref)(ge).length)+'/9',1)]),(0,o.createElementVNode)('div',Um,[(0,o.createElementVNode)('div',zm,[a[83]||(a[83]=(0,o.createElementVNode)('span',{class:'text-[11px] text-dungeon-paper/70'},'已选卡牌（点击移除）',-1)),(0,o.createElementVNode)('span',Gm,(0,o.toDisplayString)((0,o.unref)(ge).length)+'/9',1)]),(0,o.createElementVNode)('div',Fm,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(da),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`selected-card-${e.idx}`,class:'w-full text-left flex items-stretch gap-2 rounded border border-dungeon-gold/20 bg-[#1a0f08]/70 px-2 py-2 hover:border-dungeon-gold/50 transition-colors',onClick:t=>{var a;(a=e.idx)<0||a>=ge.value.length||ge.value.splice(a,1)}},[(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['w-1.5 rounded',ha(e.card.category)])},null,2),(0,o.createElementVNode)('div',Ym,[(0,o.createElementVNode)('div',Wm,[(0,o.createElementVNode)('span',Xm,(0,o.toDisplayString)(e.card.name),1),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['text-[10px] px-1 rounded border',ya(e.card.type)])},(0,o.toDisplayString)(e.card.type),3),(0,o.createElementVNode)('span',qm,(0,o.toDisplayString)(e.card.category),1)]),(0,o.createElementVNode)('div',{class:'mt-1 text-[10px] text-dungeon-paper/70 truncate',title:e.card.description},(0,o.toDisplayString)(e.card.description),9,Km)]),a[84]||(a[84]=(0,o.createElementVNode)('span',{class:'text-[10px] text-red-300/85 shrink-0 self-center'},'移除',-1))],8,jm))),128)),0===(0,o.unref)(da).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Zm,' 尚未选择卡牌 ')):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('div',Jm,[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(9,e=>(0,o.createElementVNode)('div',{key:`deck-slot-${e}`,class:(0,o.normalizeClass)(['h-2 rounded border',e<=(0,o.unref)(ge).length?'bg-dungeon-gold/70 border-dungeon-gold/60':'bg-black/20 border-dungeon-brown/40'])},null,2)),64))])]),(0,o.createElementVNode)('div',Qm,[(0,o.createElementVNode)('div',ep,[(0,o.createElementVNode)('div',tp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(At),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`card-tab-${e}`,class:(0,o.normalizeClass)(['h-7 px-3 rounded border text-xs shrink-0 transition-colors',(0,o.unref)(he)===e?'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold':'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),onClick:t=>he.value=e},(0,o.toDisplayString)(e),11,ap))),128))]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Vt),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`card-category-${e.category}`,class:'rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2'},[(0,o.createElementVNode)('div',np,[(0,o.createElementVNode)('h4',op,(0,o.toDisplayString)(e.category),1),(0,o.createElementVNode)('span',rp,(0,o.toDisplayString)(e.cards.length)+' 张',1)]),(0,o.createElementVNode)('div',lp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.cards,t=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`all-card-${e.category}-${t.id}`,class:'hover:scale-105 transition-transform flex flex-col items-center rounded border border-dungeon-brown/40 bg-[#1a0f08]/50 p-2 disabled:opacity-40 disabled:cursor-not-allowed',disabled:(0,o.unref)(ge).length>=9,onClick:e=>{return a=t.name,void(ge.value.length>=9||ge.value.push(a));var a}},[(0,o.createVNode)(hi,{card:t,disabled:''},null,8,['card']),a[85]||(a[85]=(0,o.createElementVNode)('span',{class:'mt-1 text-[10px] text-dungeon-gold/80'},'点击加入',-1))],8,ip))),128))])]))),128)),0===(0,o.unref)(Vt).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',sp,' 当前分类暂无可选卡牌 ')):(0,o.createCommentVNode)('v-if',!0)])]),(0,o.createElementVNode)('div',cp,[(0,o.createElementVNode)('button',{class:'px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50',onClick:a[30]||(a[30]=e=>r.value=null)},' 取消 '),(0,o.createElementVNode)('button',{class:'px-4 py-2 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown disabled:opacity-40 disabled:cursor-not-allowed',disabled:9!==(0,o.unref)(ge).length,onClick:Cr},' 下一步：选择魔物 ',8,dp)])],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)('div',up,[a[86]||(a[86]=(0,o.createElementVNode)('h3',{class:'font-heading text-dungeon-gold text-sm tracking-widest uppercase'},'步骤2：选择魔物',-1)),(0,o.createElementVNode)('span',mp,'已选卡组: 9张｜圣遗物: '+(0,o.toDisplayString)((0,o.unref)(Oa))+' 件',1)]),(0,o.createElementVNode)('div',pp,[(0,o.createElementVNode)('div',fp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ua),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`enemy-${e}`,class:(0,o.normalizeClass)(['text-left px-3 py-2 rounded border text-xs transition-colors',(0,o.unref)(ye)===e?'border-dungeon-gold bg-dungeon-brown/60 text-dungeon-gold':'border-dungeon-brown/60 bg-[#1a0f08] text-dungeon-paper hover:border-dungeon-gold/60']),onClick:t=>ye.value=e},(0,o.toDisplayString)(e),11,gp))),128))])]),(0,o.createElementVNode)('div',yp,[a[87]||(a[87]=(0,o.createElementVNode)('div',{class:'mb-2 flex items-center justify-between'},[(0,o.createElementVNode)('h4',{class:'font-heading text-dungeon-gold text-xs tracking-wider uppercase'},'圣遗物自选'),(0,o.createElementVNode)('span',{class:'text-[11px] text-dungeon-paper/60'},'将同步写入 MVU `_圣遗物`')],-1)),(0,o.createElementVNode)('div',vp,[(0,o.createElementVNode)('div',hp,[(0,o.createElementVNode)('div',bp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(fa),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`relic-tab-${e}`,class:(0,o.normalizeClass)(['h-7 px-3 rounded border text-xs shrink-0 transition-colors',(0,o.unref)(be)===e?'bg-dungeon-gold/20 border-dungeon-gold/70 text-dungeon-gold':'bg-[#1a0f08]/80 border-dungeon-brown/70 text-dungeon-paper/70 hover:border-dungeon-gold/50 hover:text-dungeon-gold/90']),onClick:t=>be.value=e},(0,o.toDisplayString)(e),11,xp))),128))]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ga),e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`relic-category-${e.category}`,class:'rounded border border-dungeon-brown/40 bg-[#110a06]/40 p-2'},[(0,o.createElementVNode)('div',_p,[(0,o.createElementVNode)('h5',kp,(0,o.toDisplayString)(e.category),1),(0,o.createElementVNode)('span',Ep,(0,o.toDisplayString)(e.relics.length)+' 件',1)]),(0,o.createElementVNode)('div',Np,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.relics,t=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:`test-relic-${e.category}-${t.id}`,class:'rounded border border-dungeon-brown/50 bg-[#1a0f08]/70 p-2'},[(0,o.createElementVNode)('div',Cp,[(0,o.createElementVNode)('div',Mp,[(0,o.createElementVNode)('div',wp,(0,o.toDisplayString)(t.name),1),(0,o.createElementVNode)('div',Dp,(0,o.toDisplayString)(t.rarity),1)]),(0,o.createElementVNode)('div',Sp,[(0,o.createElementVNode)('button',{class:'h-6 w-6 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold',onClick:e=>{return a=t.name,void hr(a,vr(a)-1);var a}},' - ',8,Ap),(0,o.createElementVNode)('span',Vp,(0,o.toDisplayString)(vr(t.name)),1),(0,o.createElementVNode)('button',{class:'h-6 w-6 rounded border border-dungeon-gold/40 text-dungeon-gold hover:bg-dungeon-brown',onClick:e=>{return a=t.name,void hr(a,vr(a)+1);var a}},' + ',8,Tp)])]),(0,o.createElementVNode)('div',Bp,(0,o.toDisplayString)(t.effect),1)]))),128))])]))),128)),0===(0,o.unref)(ga).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',$p,' 当前分类暂无可选圣遗物 ')):(0,o.createCommentVNode)('v-if',!0)])])]),(0,o.createElementVNode)('label',Op,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':a[31]||(a[31]=e=>(0,o.isRef)(Ve)?Ve.value=e:null),type:'checkbox',class:'accent-amber-500'},null,512),[[o.vModelCheckbox,(0,o.unref)(Ve)]]),a[88]||(a[88]=(0,o.createElementVNode)('span',null,'本场测试启用 999 开局（敌我双方 HP/MP=999）',-1))]),(0,o.createElementVNode)('div',Ip,[(0,o.createElementVNode)('button',{class:'px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/70 hover:border-dungeon-gold/50',onClick:a[32]||(a[32]=e=>fe.value='deck')},' 返回改卡组 '),(0,o.createElementVNode)('button',{class:'px-4 py-2 rounded border border-amber-600/40 text-amber-400 hover:bg-amber-900/20 disabled:opacity-40 disabled:cursor-not-allowed',disabled:!(0,o.unref)(ye),onClick:Mr},' 开始战斗测试 ',8,Lp)])],64))])]),_:1},8,['is-open']),(0,o.createCommentVNode)(' Save/Load Panel '),(0,o.createVNode)(md,{'is-open':(0,o.unref)(n).isSaveLoadOpen,entries:(0,o.unref)(n).saveEntries,onClose:a[34]||(a[34]=e=>(0,o.unref)(n).isSaveLoadOpen=!1)},null,8,['is-open','entries']),(0,o.createCommentVNode)(' Variable Update Viewer '),(0,o.createVNode)(zc,{title:'变量更新','is-open':(0,o.unref)(i),onClose:a[35]||(a[35]=e=>i.value=!1)},{default:(0,o.withCtx)(()=>[(0,o.unref)(n).variableUpdateText?((0,o.openBlock)(),(0,o.createElementBlock)('div',Rp,[(0,o.createElementVNode)('pre',Pp,(0,o.toDisplayString)((0,o.unref)(n).variableUpdateText),1)])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Hp,' 当前楼层没有检测到变量更新标签（<UpdateVariable> 或 <update>）。 '))]),_:1},8,['is-open']),(0,o.createCommentVNode)(' Shop Overlay '),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Up,[(0,o.createElementVNode)('img',{src:(0,o.unref)(bt),class:'absolute inset-0 h-full w-full object-cover',alt:'商店背景'},null,8,zp),a[90]||(a[90]=(0,o.createElementVNode)('div',{class:'absolute inset-0 bg-black/22'},null,-1)),(0,o.unref)(Gt)?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:(0,o.unref)(xt),class:'pointer-events-none absolute left-0 bottom-0 z-[99] h-[92vh] max-h-[1216px] w-auto object-contain',alt:'沐芯兰'},null,8,Gp)),(0,o.createElementVNode)('div',Fp,[(0,o.createElementVNode)('div',jp,[a[89]||(a[89]=(0,o.createElementVNode)('div',{class:'shop-panel-head'},[(0,o.createElementVNode)('div',{class:'font-heading text-xl text-amber-100'},'沐芯兰的商店')],-1)),(0,o.createElementVNode)('div',Yp,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(V),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:e.key,type:'button',class:(0,o.normalizeClass)(['shop-item-card',{'is-sold':e.sold}]),disabled:e.sold||(0,o.unref)(T),onClick:t=>(e=>{if(T.value||e.sold)return;const t=Math.max(0,Math.floor(Number(n.statData._金币??0)));var a;Math.max(0,t-O.value)<e.finalPrice||(T.value=!0,e.sold=!0,O.value+=e.finalPrice,L.value.push({name:e.relic.name,rarity:(a=e.relic.rarity,'传奇'===a?'传说':a),price:e.finalPrice}),Aa(),T.value=!1)})(e),onMouseenter:t=>so(t,e),onMouseleave:Aa,onFocus:t=>so(t,e),onBlur:Aa,onTouchstartPassive:t=>((e,t)=>{Va(e,io(t.relic))})(t,e),onTouchend:Ta,onTouchcancel:Ta},[(0,o.createElementVNode)('div',Xp,[(0,o.createVNode)((0,o.unref)(v),{class:'shop-item-icon'})]),(0,o.createElementVNode)('div',qp,[(0,o.createVNode)((0,o.unref)(D),{class:'size-3.5'}),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.finalPrice),1)])],42,Wp))),128)),0===(0,o.unref)(V).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Kp,' 暂无可售商品 ')):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createElementVNode)('div',Zp,[(0,o.createElementVNode)('button',{class:'shop-rob-btn px-5 py-2 font-ui text-xs tracking-wider text-amber-50',disabled:(0,o.unref)(T)||(0,o.unref)(n).isGenerating||(0,o.unref)(P)||(0,o.unref)(Gt),style:(0,o.normalizeStyle)({opacity:(0,o.unref)(Ut)}),onClick:yo},' 抢夺 ',12,Jp),(0,o.createElementVNode)('button',{class:'shop-exit-btn px-7 py-3 font-ui text-sm tracking-wider text-amber-50',disabled:(0,o.unref)(T)||(0,o.unref)(n).isGenerating||(0,o.unref)(P),onClick:go},' 退出商店 ',8,Qp)])])])])):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createCommentVNode)(' Treasure Chest Overlay '),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(U)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'absolute inset-0 z-[95] bg-black',onContextmenu:(0,o.withModifiers)(Ro,['prevent']),onTouchstartPassive:Po,onTouchend:Ho,onTouchcancel:Ho},[(0,o.createElementVNode)('img',{src:(0,o.unref)(_t),class:'absolute inset-0 h-full w-full object-cover',alt:'宝箱界面背景',onLoad:Eo},null,40,ef),'opened'===(0,o.unref)(G)?((0,o.openBlock)(),(0,o.createElementBlock)('div',tf,[(0,o.unref)(X)&&(0,o.unref)(j).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['chest-reward-anchor',{'is-multi':(0,o.unref)(j).length>1}])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(j),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`chest-reward-${e.id}-${t}`,type:'button',class:(0,o.normalizeClass)(['pointer-events-auto chest-reward-btn',{'is-collected':(0,o.unref)(Y)[t]}]),disabled:(0,o.unref)(W)||(0,o.unref)(Y)[t],onClick:e=>(e=>{if(W.value)return;if(e<0||e>=j.value.length)return;if(Y.value[e])return;W.value=!0,Y.value[e]=!0,W.value=!1,Y.value.length>0&&Y.value.every(e=>e)&&(bo(),$e=setTimeout(()=>{X.value=!1,Aa(),$e=null},260))})(t),onMouseenter:e=>Ba(e,t),onMouseleave:Aa,onFocus:e=>Ba(e,t),onBlur:Aa,onTouchstartPassive:e=>((e,t)=>{const a=Ma.value[t];a&&Va(e,a)})(e,t),onTouchend:Ta,onTouchcancel:Ta},[(0,o.createVNode)((0,o.unref)(v),{class:'chest-reward-icon'})],42,af))),128))],2)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',nf,[(0,o.createElementVNode)('div',of,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(K),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`chest-portal-${t}`,class:'portal-btn group relative flex flex-col items-center justify-center w-24 h-24 rounded-lg border-2 backdrop-blur-sm transition-all duration-500 hover:scale-110 active:scale-95 disabled:opacity-40 disabled:cursor-not-allowed',style:(0,o.normalizeStyle)({backgroundColor:e.bgColor,borderColor:e.borderColor,boxShadow:`0 0 15px ${e.glowColor}, 0 0 30px ${e.glowColor}40`}),disabled:(0,o.unref)(W),onClick:t=>(async e=>{if(n.isGenerating||W.value||'opened'!==G.value)return;uo();const{actionText:t,enterText:a,pendingStatDataFields:o}=mr(e),r=j.value.filter((_,e)=>Y.value[e]),l={...o??{}};if(r.length>0){let e=n.statData._圣遗物??{};for(const t of r)e=fo(t,e);l._圣遗物=e}n.setPendingStatDataChanges(Object.keys(l).length>0?l:null);const i=r.map(e=>e.name).join('、');No(),i?n.sendAction(`<user>打开了箱子并从中获取了圣遗物${i}，随后离开了当前房间并进入了下一个房间，<user>${a}`):n.sendAction(t)})(e)},[(0,o.createElementVNode)('div',{class:'absolute inset-0 rounded-lg opacity-50 group-hover:opacity-100 transition-opacity duration-500',style:(0,o.normalizeStyle)({boxShadow:`inset 0 0 20px ${e.glowColor}60`})},null,4),(0,o.createElementVNode)('span',lf,(0,o.toDisplayString)(e.icon),1),(0,o.createElementVNode)('span',{class:'text-[10px] font-ui tracking-wide relative z-10 text-center leading-tight',style:(0,o.normalizeStyle)({color:e.textColor})},(0,o.toDisplayString)(e.label),5),(0,o.createElementVNode)('div',{class:'absolute inset-1 rounded-md border border-dashed opacity-30 group-hover:opacity-70 animate-[spin_8s_linear_infinite] transition-opacity',style:(0,o.normalizeStyle)({borderColor:e.borderColor})},null,4)],12,rf))),128))])])])):(0,o.createCommentVNode)('v-if',!0),'closed'===(0,o.unref)(G)?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:1,type:'button','aria-label':'开启宝箱',class:'absolute left-1/2 top-1/2 h-[42vh] max-h-[360px] min-h-[220px] w-[36vw] max-w-[540px] min-w-[260px] -translate-x-1/2 -translate-y-1/2 cursor-pointer rounded-2xl border-0 bg-transparent p-0 opacity-0',disabled:(0,o.unref)(F),onClick:Uo},null,8,sf)):(0,o.createCommentVNode)('v-if',!0)],32)):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createCommentVNode)(' Idol Overlay '),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:'absolute inset-0 z-[96] bg-black overflow-hidden',onPointermove:To,onPointerup:Bo,onPointercancel:Bo},[(0,o.createElementVNode)('img',{src:(0,o.unref)(ht),class:'absolute inset-0 h-full w-full object-cover',alt:'神像界面背景'},null,8,cf),(0,o.createElementVNode)('div',df,[(0,o.createElementVNode)('div',uf,[(0,o.createElementVNode)('div',mf,[a[91]||(a[91]=(0,o.createElementVNode)('div',{class:'idol-slot-hint'},'增加1倍点数的生命上限',-1)),(0,o.createElementVNode)('div',{ref_key:'idolSlotMaxHpRef',ref:se,class:(0,o.normalizeClass)(['idol-slot',{'is-preview':'maxHp'===(0,o.unref)(oe),'is-selected':'maxHp'===(0,o.unref)(ne)}])},null,2)]),(0,o.createElementVNode)('div',pf,[a[92]||(a[92]=(0,o.createElementVNode)('div',{class:'idol-slot-hint'},'增加1倍点数的初始魔力',-1)),(0,o.createElementVNode)('div',{ref_key:'idolSlotMpRef',ref:ce,class:(0,o.normalizeClass)(['idol-slot',{'is-preview':'mp'===(0,o.unref)(oe),'is-selected':'mp'===(0,o.unref)(ne)}])},null,2)]),(0,o.createElementVNode)('div',ff,[a[93]||(a[93]=(0,o.createElementVNode)('div',{class:'idol-slot-hint'},'增加2倍点数的金币',-1)),(0,o.createElementVNode)('div',{ref_key:'idolSlotGoldRef',ref:de,class:(0,o.normalizeClass)(['idol-slot',{'is-preview':'gold'===(0,o.unref)(oe),'is-selected':'gold'===(0,o.unref)(ne)}])},null,2)])]),(0,o.createElementVNode)('div',{ref_key:'idolDiceStageRef',ref:le,class:'idol-dice-stage'},[(0,o.createElementVNode)('div',{ref_key:'idolDiceRef',ref:ie,class:(0,o.normalizeClass)(['idol-dice-draggable',{'is-locked':(0,o.unref)(ae)}]),style:(0,o.normalizeStyle)({transform:`translate(${(0,o.unref)(re).x}px, ${(0,o.unref)(re).y}px)`}),onPointerdown:Vo},[(0,o.createVNode)(Ni,{value:(0,o.unref)(te),rolling:(0,o.unref)(ae),color:'gold',size:'lg','rolling-min':(0,o.unref)(Tn),'rolling-max':(0,o.unref)(Bn)},null,8,['value','rolling','rolling-min','rolling-max'])],38)],512)]),(0,o.createElementVNode)('button',{class:'idol-exit-btn absolute right-5 bottom-5 z-[98] px-6 py-3 font-ui text-sm tracking-wider text-amber-50',disabled:(0,o.unref)(n).isGenerating,onClick:$o},' 退出 ',8,gf)],32)):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createCommentVNode)(' Victory Card Reward Overlay '),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(Ee)?((0,o.openBlock)(),(0,o.createElementBlock)('div',yf,[(0,o.createElementVNode)('div',vf,[(0,o.createElementVNode)('div',hf,[(0,o.createElementVNode)('div',bf,[(0,o.createElementVNode)('div',null,[a[94]||(a[94]=(0,o.createElementVNode)('div',{class:'font-heading text-xl text-dungeon-gold'},'战胜奖励',-1)),(0,o.createElementVNode)('div',xf,(0,o.toDisplayString)('pick'===(0,o.unref)(Ne)?'请选择 1 张奖励（卡牌或主动技能）':'replaceActive'===(0,o.unref)(Ne)?'选择要替换的主动技能槽位（共2槽）':'选择要替换的卡组槽位（共9槽）'),1)]),(0,o.createElementVNode)('div',_f,[(0,o.unref)(Ca)?((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:0,class:'px-4 py-2 rounded border border-sky-500/50 text-sky-200 hover:bg-sky-500/10 disabled:opacity-50',disabled:(0,o.unref)(we),onClick:to},' 刷新奖励 ',8,kf)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('button',{class:'px-4 py-2 rounded border border-dungeon-brown text-dungeon-paper/75 hover:border-dungeon-gold/50',disabled:(0,o.unref)(we),onClick:no},' 退出 ',8,Ef)])]),'pick'===(0,o.unref)(Ne)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Nf,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Ce),e=>{return(0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`reward-option-${e.id}`,type:'button',class:'rounded-lg border border-dungeon-brown/50 bg-[#160d08]/75 p-3 transition-all hover:border-dungeon-gold/60 hover:scale-[1.01]',onClick:t=>{return a=e,Me.value=a,void(Ne.value=va(a)?'replaceActive':'replaceDeck');var a}},[(0,o.createElementVNode)('div',Mf,(0,o.toDisplayString)((t=e,va(t)?'主动技能':'卡牌')),1),(0,o.createElementVNode)('div',wf,[va(e)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Df,[(0,o.createElementVNode)('div',Sf,[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.name),1),a[95]||(a[95]=(0,o.createElementVNode)('span',{class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},'主动',-1))]),(0,o.createElementVNode)('div',Af,[(0,o.createElementVNode)('span',Vf,'MP '+(0,o.toDisplayString)(e.manaCost),1),(0,o.createElementVNode)('span',Tf,'CD '+(0,o.toDisplayString)(e.Cooldown),1)]),(0,o.createElementVNode)('div',Bf,(0,o.toDisplayString)(e.description),1),(0,o.createElementVNode)('div',$f,'类别：'+(0,o.toDisplayString)(e.category)+' · '+(0,o.toDisplayString)(e.rarity),1)])):((0,o.openBlock)(),(0,o.createBlock)(hi,{key:0,card:e,disabled:''},null,8,['card']))]),a[96]||(a[96]=(0,o.createElementVNode)('div',{class:'mt-2 text-center text-xs text-dungeon-gold/90'},'选择此卡',-1))],8,Cf);var t}),128))])):'replaceDeck'===(0,o.unref)(Ne)||'replaceActive'===(0,o.unref)(Ne)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createElementVNode)('div',Of,[(0,o.createElementVNode)('div',If,' 已选择奖励'+(0,o.toDisplayString)((0,o.unref)(Me)&&va((0,o.unref)(Me))?'主动技能':'卡牌')+'： ',1),(0,o.createElementVNode)('div',Lf,[(0,o.unref)(Me)&&!va((0,o.unref)(Me))?((0,o.openBlock)(),(0,o.createBlock)(hi,{key:0,card:(0,o.unref)(Me),disabled:''},null,8,['card'])):(0,o.unref)(Me)&&va((0,o.unref)(Me))?((0,o.openBlock)(),(0,o.createElementBlock)('div',Rf,[(0,o.createElementVNode)('div',Pf,[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)((0,o.unref)(Me).name),1),a[97]||(a[97]=(0,o.createElementVNode)('span',{class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},'主动',-1))]),(0,o.createElementVNode)('div',Hf,[(0,o.createElementVNode)('span',Uf,'MP '+(0,o.toDisplayString)((0,o.unref)(Me).manaCost),1),(0,o.createElementVNode)('span',zf,'CD '+(0,o.toDisplayString)((0,o.unref)(Me).Cooldown),1)]),(0,o.createElementVNode)('div',Gf,(0,o.toDisplayString)((0,o.unref)(Me).description),1),(0,o.createElementVNode)('div',Ff,'类别：'+(0,o.toDisplayString)((0,o.unref)(Me).category)+' · '+(0,o.toDisplayString)((0,o.unref)(Me).rarity),1)])):(0,o.createCommentVNode)('v-if',!0)])]),'replaceDeck'===(0,o.unref)(Ne)&&0===(0,o.unref)(sa).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',jf,[a[98]||(a[98]=(0,o.createElementVNode)('div',{class:'text-sm text-dungeon-paper/70'},'当前卡组为空，将奖励卡加入卡组。',-1)),(0,o.createElementVNode)('button',{type:'button',class:'mt-3 px-4 py-2 rounded border border-dungeon-gold/45 text-dungeon-gold hover:bg-dungeon-gold/10 disabled:opacity-50',disabled:(0,o.unref)(we),onClick:a[36]||(a[36]=e=>oo(0))},' 加入卡组 ',8,Yf)])):(0,o.createCommentVNode)('v-if',!0),'replaceDeck'===(0,o.unref)(Ne)&&(0,o.unref)(sa).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',Wf,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(sa),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`reward-replace-${e.idx}`,type:'button',class:'rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed',disabled:(0,o.unref)(we),onClick:t=>oo(e.idx)},[(0,o.createElementVNode)('div',qf,'槽位 '+(0,o.toDisplayString)(e.idx+1),1),(0,o.createElementVNode)('div',Kf,[e.card?((0,o.openBlock)(),(0,o.createBlock)(hi,{key:0,card:e.card,disabled:''},null,8,['card'])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Zf,(0,o.toDisplayString)(e.name||'空槽位'),1))])],8,Xf))),128))])):(0,o.createCommentVNode)('v-if',!0),'replaceActive'===(0,o.unref)(Ne)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Jf,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(ca),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`reward-active-replace-${e.idx}`,type:'button',class:'rounded border border-dungeon-brown/50 bg-[#160d08]/65 p-3 text-left transition-colors hover:border-dungeon-gold/60 disabled:opacity-50 disabled:cursor-not-allowed',disabled:(0,o.unref)(we),onClick:t=>(e=>{if(!Me.value||we.value||!va(Me.value))return;if(e<0||e>1)return;const t=Array.isArray(n.statData.$主动)?[...n.statData.$主动].slice(0,2):[];for(;t.length<2;)t.push('');t[e]=Me.value.name,we.value=!0,n.mergePendingStatDataChanges({$主动:t}),ao()})(e.idx)},[(0,o.createElementVNode)('div',eg,'主动槽位 '+(0,o.toDisplayString)(e.idx+1),1),(0,o.createElementVNode)('div',tg,[e.skill?((0,o.openBlock)(),(0,o.createElementBlock)('div',ag,[(0,o.createElementVNode)('div',ng,[(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.skill.name),1),a[99]||(a[99]=(0,o.createElementVNode)('span',{class:'rounded border border-zinc-300 bg-zinc-100 px-1.5 py-0.5'},'主动',-1))]),(0,o.createElementVNode)('div',og,[(0,o.createElementVNode)('span',rg,'MP '+(0,o.toDisplayString)(e.skill.manaCost),1),(0,o.createElementVNode)('span',lg,'CD '+(0,o.toDisplayString)(e.skill.Cooldown),1)]),(0,o.createElementVNode)('div',ig,(0,o.toDisplayString)(e.skill.description),1),(0,o.createElementVNode)('div',sg,'类别：'+(0,o.toDisplayString)(e.skill.category)+' · '+(0,o.toDisplayString)(e.skill.rarity),1)])):((0,o.openBlock)(),(0,o.createElementBlock)('div',cg,(0,o.toDisplayString)(e.name||'空主动槽位'),1))])],8,Qf))),128))])):(0,o.createCommentVNode)('v-if',!0)],64)):(0,o.createCommentVNode)('v-if',!0)])])])):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createCommentVNode)(' Combat Overlay '),(0,o.createVNode)(o.Transition,{name:'combat-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(c)?((0,o.openBlock)(),(0,o.createElementBlock)('div',dg,[(0,o.createVNode)(Ic,{class:'w-full h-full','enemy-name':(0,o.unref)(d),'player-deck':(0,o.unref)(ba),'player-active-skills':(0,o.unref)(xa),'player-relics':(0,o.unref)($a),'test-start-at-999':(0,o.unref)(Te),'track-discovery':'combatTest'!==(0,o.unref)(xe),'ui-font-family':(0,o.unref)(Ia).fontFamily,'initial-player-stats':{hp:(0,o.unref)(Mn),maxHp:(0,o.unref)(wn),mp:(0,o.unref)(Dn),minDice:(0,o.unref)(An)||1,maxDice:(0,o.unref)(Vn)||6,effects:[{type:(0,o.unref)(A).MANA_SPRING,stacks:1,polarity:'buff'}]},onEndCombat:wr,onOpenDeck:a[37]||(a[37]=e=>r.value='deck'),onOpenRelics:a[38]||(a[38]=e=>r.value='relics')},null,8,['enemy-name','player-deck','player-active-skills','player-relics','test-start-at-999','track-discovery','ui-font-family','initial-player-stats']),(0,o.createCommentVNode)(' Exit combat button '),(0,o.createElementVNode)('button',{class:'absolute top-4 right-4 z-[110] px-4 py-2 bg-red-950/80 border border-red-700/50 text-red-300 text-sm rounded-lg hover:bg-red-900/80 hover:border-red-600 transition-all backdrop-blur-sm',onClick:a[39]||(a[39]=e=>c.value=!1)},' ✕ 退出战斗 ')])):(0,o.createCommentVNode)('v-if',!0)]),_:1})]))}}),xg=(0,yi.A)(bg,[['__scopeId','data-v-c84f2af0']]),_g=m('play',[['path',{d:'M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z',key:'10ikf1'}]]),kg=m('star',[['path',{d:'M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z',key:'r04s7s'}]]),Eg={class:'z-10 flex flex-col items-center space-y-12'},Ng={class:'flex flex-col space-y-4 w-64'},Cg='https://img.vinsimage.org',Mg=(0,o.defineComponent)({__name:'SplashScreen',emits:['start','toggleFullscreen','openCollection'],setup(e){const t=(0,o.ref)(!1),a=[`${Cg}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF1.png`,`${Cg}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF2.png`,`${Cg}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF3.png`,`${Cg}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF4.png`,`${Cg}/%E5%9C%B0%E7%89%A2/%E4%B8%BB%E9%A1%B5%E8%83%8C%E6%99%AF/%E8%83%8C%E6%99%AF5.png`],n=(0,o.ref)(a[0]),r=(0,o.ref)(null),l=(0,o.ref)(null),i=(0,o.ref)(!1),s=(0,o.ref)(!0),c=(0,o.ref)(!1);let d=null,u=0;const m=e=>{const t=e?a.filter(t=>t!==e):a;return t[Math.floor(Math.random()*t.length)]??a[0]},p=async()=>{if(c.value)return;const e=m(n.value);if(e===n.value)return;const t=++u;var a;d&&(clearTimeout(d),d=null),await(a=e,new Promise(e=>{let t=!1;const n=()=>{t||(t=!0,e())},o=new Image;o.onload=n,o.onerror=n,o.src=a,setTimeout(n,1200)})),t===u&&(c.value=!0,l.value=n.value,r.value=e,s.value=!0,i.value=!1,await(0,o.nextTick)(),await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(()=>e()))),t===u&&(i.value=!0,s.value=!1,d=setTimeout(()=>{t===u&&(n.value=e,r.value=null,l.value=null,c.value=!1,d=null)},700)))};return(0,o.onMounted)(()=>{n.value=m(),t.value=!0}),(0,o.onBeforeUnmount)(()=>{u+=1,d&&(clearTimeout(d),d=null)}),(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['relative w-full flex flex-col items-center justify-center bg-[#050505] text-dungeon-paper overflow-hidden transition-opacity duration-1000',(0,o.unref)(t)?'opacity-100':'opacity-0']),style:{aspectRatio:'16/9'}},[(0,o.createElementVNode)('div',{class:'absolute inset-0 z-0 bg-cover bg-center bg-no-repeat',style:(0,o.normalizeStyle)({backgroundImage:`url('${(0,o.unref)(n)}')`})},null,4),(0,o.unref)(r)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out',(0,o.unref)(i)?'opacity-100':'opacity-0']),style:(0,o.normalizeStyle)({backgroundImage:`url('${(0,o.unref)(r)}')`})},null,6)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(l)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,class:(0,o.normalizeClass)(['absolute inset-0 z-0 bg-cover bg-center bg-no-repeat transition-opacity duration-700 ease-in-out',(0,o.unref)(s)?'opacity-100':'opacity-0']),style:(0,o.normalizeStyle)({backgroundImage:`url('${(0,o.unref)(l)}')`})},null,6)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('button',{type:'button',class:'absolute inset-0 z-[1] bg-transparent cursor-pointer focus:outline-none','aria-label':'点击切换背景',onClick:p}),(0,o.createCommentVNode)(' Dynamic Background '),a[7]||(a[7]=(0,o.createElementVNode)('div',{class:'absolute inset-0 bg-[radial-gradient(circle_at_50%_30%,_rgba(60,40,30,0.3),_#000000_90%)] z-0'},null,-1)),a[8]||(a[8]=(0,o.createElementVNode)('div',{class:'absolute inset-0 opacity-30 z-0 mix-blend-overlay animate-pulse-slow bg-[length:200px] bg-repeat',style:{'background-image':'url(\'https://www.transparenttextures.com/patterns/dark-matter.png\')'}},null,-1)),(0,o.createCommentVNode)(' Ornamental Frame '),a[9]||(a[9]=(0,o.createElementVNode)('div',{class:'absolute top-8 left-8 w-64 h-64 border-t-2 border-l-2 border-dungeon-brown opacity-50'},null,-1)),a[10]||(a[10]=(0,o.createElementVNode)('div',{class:'absolute bottom-8 right-8 w-64 h-64 border-b-2 border-r-2 border-dungeon-brown opacity-50'},null,-1)),(0,o.createCommentVNode)(' Fullscreen Button (Top Right, Small) '),(0,o.createElementVNode)('button',{class:'absolute top-4 right-4 z-50 w-8 h-8 rounded flex items-center justify-center bg-dungeon-dark/60 border border-dungeon-brown/50 text-dungeon-gold-dim hover:bg-dungeon-brown hover:text-dungeon-gold hover:border-dungeon-gold/50 transition-all duration-300',onClick:a[0]||(a[0]=t=>e.$emit('toggleFullscreen'))},[(0,o.createVNode)((0,o.unref)(x),{class:'size-4'})]),(0,o.createCommentVNode)(' Main Content '),(0,o.createElementVNode)('div',Eg,[(0,o.createCommentVNode)(' Title Section '),a[6]||(a[6]=(0,o.createStaticVNode)('<div class="text-center space-y-4 relative"><div class="w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -left-12 top-0 opacity-50"></div><div class="w-1 h-24 bg-gradient-to-b from-transparent via-dungeon-gold to-transparent absolute -right-12 top-0 opacity-50"></div><h1 class="text-6xl md:text-8xl font-heading text-transparent bg-clip-text bg-gradient-to-b from-[#f9e6a0] to-dungeon-gold-dim drop-shadow-[0_4px_10px_rgba(0,0,0,0.8)] tracking-wide"> 欲望地牢 </h1><h2 class="text-xl md:text-2xl font-body text-[#f9e6a0] tracking-[0.35em] uppercase border-t border-dungeon-brown pt-4 mt-2"> Created by Vin </h2></div>',1)),(0,o.createCommentVNode)(' Menu Actions '),(0,o.createElementVNode)('div',Ng,[(0,o.createElementVNode)('button',{class:'group relative px-8 py-4 bg-[#1a0f08] hover:bg-dungeon-brown border border-dungeon-gold/30 hover:border-dungeon-gold transition-all duration-300 flex items-center justify-center space-x-3 overflow-hidden',onClick:a[1]||(a[1]=t=>e.$emit('start'))},[a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'absolute inset-0 w-0 bg-dungeon-gold/10 transition-all duration-300 group-hover:w-full'},null,-1)),(0,o.createVNode)((0,o.unref)(_g),{class:'size-5 text-dungeon-gold group-hover:scale-110 transition-transform'}),a[4]||(a[4]=(0,o.createElementVNode)('span',{class:'font-heading text-lg tracking-widest text-dungeon-paper group-hover:text-dungeon-gold'},' 进入深渊 ',-1))]),(0,o.createElementVNode)('button',{class:'group relative px-8 py-3 bg-[#120b08] hover:bg-dungeon-brown/80 border border-dungeon-brown/80 hover:border-dungeon-gold/60 text-dungeon-paper/85 font-heading tracking-widest flex items-center justify-center space-x-2 transition-all duration-300',onClick:a[2]||(a[2]=t=>e.$emit('openCollection'))},[(0,o.createVNode)((0,o.unref)(kg),{class:'size-4'}),a[5]||(a[5]=(0,o.createElementVNode)('span',null,'魔女的收藏',-1))])])])],2))}}),wg={class:'codex-root'},Dg={class:'top-nav'},Sg=['onClick'],Ag={class:'top-nav-btn-text'},Vg={class:'book-layout'},Tg={class:'side-nav'},Bg={class:'side-title'},$g=['onClick'],Og={class:'book-shell'},Ig={key:0,class:'card-grid'},Lg={key:1,class:'entry-grid'},Rg={class:'entry-title'},Pg={class:'entry-meta'},Hg={class:'entry-desc'},Ug={key:2,class:'entry-grid'},zg={class:'effect-row'},Gg={class:'effect-icon'},Fg={key:1},jg={class:'entry-title'},Yg={class:'entry-meta'},Wg={class:'entry-desc'},Xg={key:3,class:'enemy-grid'},qg={class:'enemy-head'},Kg={class:'portrait'},Zg=['src','alt','onError'],Jg={key:1,class:'portrait-fallback'},Qg={class:'enemy-head-text'},ey={class:'entry-title'},ty={class:'entry-meta'},ay={class:'entry-meta'},ny={class:'entry-desc'},oy={class:'page-foot'},ry=['disabled'],ly={class:'page-indicator'},iy=['disabled'],sy='https://img.vinsimage.org',cy=(0,o.defineComponent)({__name:'WitchCollectionModal',props:{isOpen:{type:Boolean}},emits:['close'],setup(e){const t=e,a=[{id:'cards',label:'卡牌'},{id:'relics',label:'圣遗物'},{id:'enemies',label:'敌人'},{id:'status',label:'状态'}],n={[S.PHYSICAL]:0,[S.MAGIC]:1,[S.FUNCTION]:2,[S.DODGE]:3,[S.CURSE]:4},r={普通:0,稀有:1,传奇:2},l={cards:9,relics:20,enemies:8,status:20},i=(0,o.ref)('cards'),s=(0,o.ref)(1),c=(0,o.ref)('flip-next'),d=(0,o.ref)(ll()),u=(0,o.ref)('全部'),m=(0,o.ref)('全部'),p=(0,o.ref)('全部'),f=(0,o.ref)('全部'),g=(0,o.computed)(()=>new Set(d.value.cards)),y=(0,o.computed)(()=>new Set(d.value.relics)),v=(0,o.computed)(()=>new Set(d.value.effects)),h=(0,o.computed)(()=>new Set(d.value.enemies.map(e=>e.name))),b=(0,o.computed)(()=>Pa().slice().sort((e,t)=>{const a=e.category.localeCompare(t.category,'zh-Hans-CN');if(0!==a)return a;const o=(n[e.type]??99)-(n[t.type]??99);return 0!==o?o:e.name.localeCompare(t.name,'zh-Hans-CN')})),x=(0,o.computed)(()=>Array.from(new Set(b.value.map(e=>e.category))).sort((e,t)=>e.localeCompare(t,'zh-Hans-CN'))),k=(0,o.computed)(()=>'全部'===u.value?b.value:b.value.filter(e=>e.category===u.value)),E=(0,o.computed)(()=>br().slice().sort((e,t)=>{const a=(r[e.rarity]??99)-(r[t.rarity]??99);if(0!==a)return a;const n=e.category.localeCompare(t.category,'zh-Hans-CN');return 0!==n?n:e.name.localeCompare(t.name,'zh-Hans-CN')})),N=(0,o.computed)(()=>Array.from(new Set(E.value.map(e=>e.category))).sort((e,t)=>e.localeCompare(t,'zh-Hans-CN'))),C=(0,o.computed)(()=>'全部'===m.value?E.value:E.value.filter(e=>e.category===m.value)),M={[A.BARRIER]:'fa-brands fa-fediverse',[A.ARMOR]:'fa-solid fa-shield-halved',[A.BIND]:'fa-solid fa-link',[A.DEVOUR]:'fa-brands fa-optin-monster',[A.POISON]:'fa-solid fa-virus',[A.POISON_AMOUNT]:'fa-solid fa-bacterium',[A.CORROSION]:'fa-brands fa-cloudscale',[A.BURN]:'fa-solid fa-fire',[A.BLEED]:'fa-solid fa-droplet',[A.VULNERABLE]:'fa-brands fa-linode',[A.DAMAGE_BOOST]:'fa-brands fa-superpowers',[A.REGEN]:'fa-brands fa-medrt',[A.WHITE_TURBID]:'fa-solid fa-droplet',[A.IGNITE_AURA]:'fa-solid fa-fire-flame-simple',[A.STUN]:'fa-solid fa-ban',[A.CHARGE]:'fa-solid fa-exclamation',[A.FATIGUE]:'fa-solid fa-bed',[A.COLD]:'fa-regular fa-snowflake',[A.TEMPERATURE_DIFF]:'fa-brands fa-empire',[A.NON_LIVING]:'fa-solid fa-skull',[A.NON_ENTITY]:'fa-solid fa-ghost',[A.ILLUSORY_BODY]:'fa-solid fa-ghost',[A.TEMP_MAX_HP]:'fa-solid fa-heart',[A.MAX_HP_REDUCTION]:'fa-solid fa-heart-pulse',[A.POINT_GROWTH_BIG]:'fa-solid fa-dice fa-lg',[A.POINT_GROWTH_SMALL]:'fa-solid fa-dice fa-sm',[A.MANA_DRAIN]:'fa-solid fa-battery-empty',[A.MANA_SPRING]:'fa-brands fa-drupal',[A.SWARM]:'fa-solid fa-bugs',[A.BLOOD_COCOON]:'fa-brands fa-battle-net',[A.INDOMITABLE]:'fa-solid fa-shield',[A.PEEP_FORBIDDEN]:'fa-solid fa-eye',[A.BLIND_ASH]:'fa-regular fa-eye-slash',[A.COGNITIVE_INTERFERENCE]:'fa-solid fa-hamsa',[A.MEMORY_FOG]:'fa-brands fa-phabricator',[A.SILENCE]:'fa-solid fa-circle-xmark',[A.STURDY]:'fa-solid fa-user-shield',[A.SHOCK]:'fa-solid fa-bolt',[A.FLAME_ATTACH]:'fa-solid fa-flask-vial',[A.POISON_ATTACH]:'fa-solid fa-flask-vial',[A.TOXIN_SPREAD]:'fa-brands fa-hornbill',[A.AMBUSH]:'fa-solid fa-user-secret',[A.FROST_ATTACH]:'fa-solid fa-flask-vial',[A.BLOODBLADE_ATTACH]:'fa-solid fa-flask-vial',[A.LIGHTNING_ATTACH]:'fa-solid fa-flask-vial',[A.THORNS]:'fa-solid fa-leaf'},w={[A.FLAME_ATTACH]:{color:'rgb(255, 64, 64)'},[A.POISON_ATTACH]:{color:'rgb(81, 255, 116)'},[A.FROST_ATTACH]:{color:'rgb(108, 230, 255)'},[A.BLOODBLADE_ATTACH]:{color:'rgb(176, 0, 0)'},[A.LIGHTNING_ATTACH]:{color:'rgb(201, 69, 255)'},[A.TEMP_MAX_HP]:{color:'rgb(255, 120, 150)'},[A.ILLUSORY_BODY]:{'--fa-primary-color':'rgb(255, 255, 255)','--fa-secondary-color':'rgb(255, 255, 255)'}},D=e=>M[e]??null,V=e=>w[e],T=(0,o.computed)(()=>Object.entries(Ha).map(([e,t])=>{return{type:e,name:t.name,description:t.description??'',kind:(a=t.polarity,'buff'===a?'正面':'debuff'===a?'负面':'被动'),faClass:D(e),faStyle:V(e)};var a}).sort((e,t)=>{const a={正面:0,负面:1,被动:2},n=(a[e.kind]??99)-(a[t.kind]??99);return 0!==n?n:e.name.localeCompare(t.name,'zh-Hans-CN')})),B=(0,o.computed)(()=>'全部'===f.value?T.value:T.value.filter(e=>e.kind===f.value)),O={沐芯兰:1,宝箱怪:1,游荡粘液球:1,荧光蛾:1,根须潜行者:1,沼泽潜伏者:1,拟态气泡怪:1,迷雾精怪:1,藤蔓行者:1,泉水精魄:1,潜伏触手怪:1,穴居触手:1,极乐蜜蜂:1,花粉喷射者:1,普莉姆:1,宁芙:1,温蒂尼:1,玛塔:1,罗丝:1},I=(0,o.computed)(()=>fr().map(e=>{const t=d.value.enemies.filter(t=>t.name===e),a=O[e]??t[0]?.floor??0,n=t[0]?.area??'未知区域',o=pr(e,Math.max(1,a))??pr(e,1),r=o?.stats??{hp:0,maxHp:0,mp:0,minDice:0,maxDice:0};return{name:e,floor:a,floorLabel:a>0?String(a):'未知',areaLabel:n,fallbackPortraitUrl:`${sy}/%E5%9C%B0%E7%89%A2/%E9%AD%94%E7%89%A9/${encodeURIComponent(e)}.png`,stats:{hp:r.hp,maxHp:r.maxHp,mp:r.mp,minDice:r.minDice,maxDice:r.maxDice},deckCardNames:o?.deck?.map(e=>e.name)??[]}}).sort((e,t)=>e.floor!==t.floor?e.floor-t.floor:e.name.localeCompare(t.name,'zh-Hans-CN'))),L=(0,o.computed)(()=>[{key:'全部',label:'全部'},...Array.from(new Set(I.value.map(e=>e.floorLabel))).sort((e,t)=>'未知'===e?1:'未知'===t?-1:Number(e)-Number(t)).map(e=>({key:e,label:'未知'===e?'未知':`第${e}层`}))]),R=(0,o.computed)(()=>'全部'===p.value?I.value:I.value.filter(e=>e.floorLabel===p.value)),P=(0,o.computed)(()=>'cards'===i.value||'relics'===i.value?'体系':'enemies'===i.value?'楼层':'状态'),H=(0,o.computed)(()=>'cards'===i.value?[{key:'全部',label:'全部'},...x.value.map(e=>({key:e,label:e}))]:'relics'===i.value?[{key:'全部',label:'全部'},...N.value.map(e=>({key:e,label:e}))]:'enemies'===i.value?L.value:[{key:'全部',label:'全部'},{key:'正面',label:'正面'},{key:'负面',label:'负面'},{key:'被动',label:'被动'}]),U=(0,o.computed)(()=>'cards'===i.value?u.value:'relics'===i.value?m.value:'enemies'===i.value?p.value:f.value),G=(0,o.computed)(()=>'cards'===i.value?k.value.length:'relics'===i.value?C.value.length:'enemies'===i.value?R.value.length:B.value.length),F=(0,o.computed)(()=>Math.max(1,Math.ceil(G.value/l[i.value]))),j=(0,o.computed)(()=>`${i.value}-${U.value}-${s.value}`),Y=(0,o.computed)(()=>(s.value-1)*l[i.value]),W=(0,o.computed)(()=>Y.value+l[i.value]),X=(0,o.computed)(()=>k.value.slice(Y.value,W.value)),q=(0,o.computed)(()=>C.value.slice(Y.value,W.value)),K=(0,o.computed)(()=>B.value.slice(Y.value,W.value)),Z=(0,o.computed)(()=>R.value.slice(Y.value,W.value)),J=()=>{s.value<=1||(c.value='flip-prev',s.value-=1)},Q=()=>{s.value>=F.value||(c.value='flip-next',s.value+=1)};(0,o.watch)(F,e=>{s.value=Math.min(Math.max(1,s.value),e)});const ee=(0,o.ref)({}),te=(0,o.ref)({}),ae=new Map,ne=new Map,oe=async()=>{if('enemies'!==i.value)return;const e=Z.value.filter(e=>h.value.has(e.name));await Promise.all(e.map(async e=>{if(ee.value[e.name])return;const t=await(async e=>{if(ae.has(e))return ae.get(e);if(ne.has(e))return ne.get(e);const t=(async()=>{const t=Er(e);return ae.set(e,t),t})();ne.set(e,t);try{return await t}finally{ne.delete(e)}})(`地牢/魔物/${e.name}`),a=t.length>0?t[Math.floor(Math.random()*t.length)]:null;ee.value[e.name]=a?`${sy}/${encodeURIComponent(a).replace(/%2F/g,'/')}`:e.fallbackPortraitUrl}))};return(0,o.watch)(()=>t.isOpen,e=>{e&&(d.value=ll(),s.value=1,oe())},{immediate:!0}),(0,o.watch)([i,s,p],()=>{t.isOpen&&oe()}),(t,n)=>((0,o.openBlock)(),(0,o.createBlock)(zc,{title:'魔女的收藏','is-open':e.isOpen,'panel-class':'codex-single-modal !max-w-[min(96vw,1500px)] !max-h-[94%]',onClose:n[0]||(n[0]=e=>t.$emit('close'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',wg,[(0,o.createCommentVNode)(' Decorative top glow line '),n[2]||(n[2]=(0,o.createElementVNode)('div',{class:'codex-top-glow'},null,-1)),(0,o.createElementVNode)('header',Dg,[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a,e=>(0,o.createElementVNode)('button',{key:e.id,type:'button',class:(0,o.normalizeClass)(['top-nav-btn',{active:(0,o.unref)(i)===e.id}]),onClick:t=>(e=>{i.value!==e&&(i.value=e,c.value='flip-next',s.value=1)})(e.id)},[(0,o.createElementVNode)('span',Ag,(0,o.toDisplayString)(e.label),1)],10,Sg)),64))]),(0,o.createElementVNode)('div',Vg,[(0,o.createElementVNode)('aside',Tg,[(0,o.createElementVNode)('div',Bg,(0,o.toDisplayString)((0,o.unref)(P)),1),n[1]||(n[1]=(0,o.createElementVNode)('div',{class:'side-divider'},null,-1)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(H),e=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:`${(0,o.unref)(i)}-${e.key}`,type:'button',class:(0,o.normalizeClass)(['side-btn',{active:(0,o.unref)(U)===e.key}]),onClick:t=>{return a=e.key,'cards'===i.value&&(u.value=a),'relics'===i.value&&(m.value=a),'enemies'===i.value&&(p.value=a),'status'===i.value&&(f.value=a),c.value='flip-next',void(s.value=1);var a}},(0,o.toDisplayString)(e.label),11,$g))),128))]),(0,o.createElementVNode)('section',Og,[(0,o.createVNode)(o.Transition,{name:(0,o.unref)(c),mode:'out-in'},{default:(0,o.withCtx)(()=>[((0,o.openBlock)(),(0,o.createElementBlock)('article',{key:(0,o.unref)(j),class:'book-page'},['cards'===(0,o.unref)(i)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ig,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(X),e=>((0,o.openBlock)(),(0,o.createBlock)(hi,{key:`card-${e.id}`,card:e,disabled:!0,'mask-level':(0,o.unref)(g).has(e.id)?'none':'full'},null,8,['card','mask-level']))),128))])):'relics'===(0,o.unref)(i)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Lg,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(q),e=>((0,o.openBlock)(),(0,o.createElementBlock)('article',{key:`relic-${e.id}`,class:'entry-card'},[(0,o.createElementVNode)('div',Rg,(0,o.toDisplayString)((0,o.unref)(y).has(e.id)?e.name:'???'),1),(0,o.createElementVNode)('div',Pg,(0,o.toDisplayString)((0,o.unref)(y).has(e.id)?`${e.category} · ${e.rarity}`:'??? · ???'),1),(0,o.createElementVNode)('p',Hg,(0,o.toDisplayString)((0,o.unref)(y).has(e.id)?e.effect:'???'),1)]))),128))])):'status'===(0,o.unref)(i)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ug,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(K),e=>((0,o.openBlock)(),(0,o.createElementBlock)('article',{key:`effect-${e.type}`,class:'entry-card'},[(0,o.createElementVNode)('div',zg,[(0,o.createElementVNode)('span',Gg,[(0,o.unref)(v).has(e.type)&&e.faClass?((0,o.openBlock)(),(0,o.createElementBlock)('i',{key:0,class:(0,o.normalizeClass)([e.faClass,'text-[14px] leading-none']),style:(0,o.normalizeStyle)(e.faStyle),'aria-hidden':'true'},null,6)):((0,o.openBlock)(),(0,o.createElementBlock)('span',Fg,'?'))]),(0,o.createElementVNode)('div',jg,(0,o.toDisplayString)((0,o.unref)(v).has(e.type)?e.name:'???'),1)]),(0,o.createElementVNode)('div',Yg,(0,o.toDisplayString)((0,o.unref)(v).has(e.type)?e.kind:'???'),1),(0,o.createElementVNode)('p',Wg,(0,o.toDisplayString)((0,o.unref)(v).has(e.type)?e.description||'暂无说明':'???'),1)]))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Xg,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(Z),e=>((0,o.openBlock)(),(0,o.createElementBlock)('article',{key:e.name,class:'entry-card enemy-card'},[(0,o.createElementVNode)('div',qg,[(0,o.createElementVNode)('div',Kg,[(0,o.unref)(h).has(e.name)&&!(0,o.unref)(te)[e.name]?((0,o.openBlock)(),(0,o.createElementBlock)('img',{key:0,src:(0,o.unref)(ee)[e.name]||e.fallbackPortraitUrl,alt:`${e.name}立绘`,class:'portrait-img',loading:'lazy',onError:t=>{return a=e.name,void(te.value[a]=!0);var a}},null,40,Zg)):((0,o.openBlock)(),(0,o.createElementBlock)('div',Jg,'?'))]),(0,o.createElementVNode)('div',Qg,[(0,o.createElementVNode)('div',ey,(0,o.toDisplayString)((0,o.unref)(h).has(e.name)?e.name:'???'),1),(0,o.createElementVNode)('div',ty,(0,o.toDisplayString)((0,o.unref)(h).has(e.name)?`第${e.floorLabel}层 · ${e.areaLabel}`:`第${e.floorLabel}层 · ???`),1)])]),(0,o.createElementVNode)('div',ay,(0,o.toDisplayString)((0,o.unref)(h).has(e.name)?`HP ${e.stats.hp}/${e.stats.maxHp} · MP ${e.stats.mp} · 骰子 ${e.stats.minDice}~${e.stats.maxDice}`:'HP ??? · MP ??? · 骰子 ???'),1),(0,o.createElementVNode)('p',ny,(0,o.toDisplayString)((0,o.unref)(h).has(e.name)?`卡牌：${e.deckCardNames.join('、')||'无'}`:'卡牌：???'),1)]))),128))])),(0,o.createElementVNode)('div',oy,[(0,o.createElementVNode)('button',{type:'button',class:'bookmark bookmark-prev',disabled:(0,o.unref)(s)<=1,onClick:J},' ◀ ',8,ry),(0,o.createElementVNode)('span',ly,'第 '+(0,o.toDisplayString)((0,o.unref)(s))+' / '+(0,o.toDisplayString)((0,o.unref)(F))+' 页',1),(0,o.createElementVNode)('button',{type:'button',class:'bookmark bookmark-next',disabled:(0,o.unref)(s)>=(0,o.unref)(F),onClick:Q},' 下一页 ',8,iy)])]))]),_:1},8,['name'])])])])]),_:1},8,['is-open']))}}),dy=(0,yi.A)(cy,[['__scopeId','data-v-63b6b248']]),uy={class:'w-full relative'},my=(0,o.defineComponent)({__name:'App',setup(e){const t=(0,o.ref)('SPLASH'),a=(0,o.ref)(!1),n=Dl();async function r(){t.value='GAME',await(0,o.nextTick)(),await n.initialize()}return(0,o.onMounted)(()=>{Zr()}),(0,o.onUnmounted)(()=>{$r&&($r.pause(),$r.src='',$r=null,Or=null,Br=!1)}),(e,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',uy,[(0,o.createCommentVNode)(' Splash Screen '),(0,o.createVNode)(o.Transition,{name:'scene-fade',mode:'out-in'},{default:(0,o.withCtx)(()=>['SPLASH'===(0,o.unref)(t)?((0,o.openBlock)(),(0,o.createBlock)(Mg,{key:'splash',onStart:r,onToggleFullscreen:(0,o.unref)(yl),onOpenCollection:n[0]||(n[0]=e=>a.value=!0)},null,8,['onToggleFullscreen'])):((0,o.openBlock)(),(0,o.createBlock)(xg,{key:'game',onBackToSplash:n[1]||(n[1]=e=>t.value='SPLASH')}))]),_:1}),(0,o.createVNode)(dy,{'is-open':(0,o.unref)(a),onClose:n[2]||(n[2]=e=>a.value=!1)},null,8,['is-open'])]))}}),py=(0,yi.A)(my,[['__scopeId','data-v-3673323e']]);$(()=>{const t=(0,o.createApp)(py).use(e());t.mount('#app'),$(window).on('pagehide',()=>t.unmount())});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&family=MedievalSharp&display=swap);
.rare-card-glow[data-v-0b124fb2]{position:relative}.rare-card-glow[data-v-0b124fb2]::after{content:'';position:absolute;inset:-1px;border-radius:inherit;border:1px solid rgba(250,204,21,0.48);box-shadow:0 0 8px rgba(250,204,21,0.4),0 0 16px rgba(245,158,11,0.24);pointer-events:none}

.combat-float-number[data-v-14815368]{animation-name:combat-float-up-14815368;animation-timing-function:ease-out;animation-fill-mode:forwards;line-height:1}.combat-float-number--heal[data-v-14815368]{color:#4ade80 !important;text-shadow:0 0 10px rgba(74,222,128,0.95),0 0 22px rgba(34,197,94,0.6);-webkit-text-stroke:0.45px rgba(6,78,59,0.9)}.player-played-card[data-v-14815368]{width:10rem;z-index:56;will-change:left,top,transform,opacity}.player-played-card-bob[data-v-14815368]{animation:player-played-card-bob-14815368 calc(1.2s / var(--combat-speed-multiplier)) ease-in-out infinite}@keyframes player-played-card-bob-14815368{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}.resolved-card-visual[data-v-14815368]{position:absolute;width:10rem;transform:translate(-50%,-50%);z-index:58;pointer-events:none}.resolved-card-visual--player[data-v-14815368]{left:29%;top:23%}.resolved-card-visual--enemy[data-v-14815368]{left:63%;top:23%}.resolved-card-visual-inner[data-v-14815368]{opacity:0.96;transform:scale(1);will-change:transform,opacity,filter;filter:drop-shadow(0 0 18px rgba(0,0,0,0.45))}.resolved-card-visual-inner--player.resolved-card-visual-inner--attack[data-v-14815368]{animation:card-attack-player-14815368 calc(0.93s / var(--combat-speed-multiplier)) cubic-bezier(0.18,0.9,0.2,1) forwards}.resolved-card-visual-inner--enemy.resolved-card-visual-inner--attack[data-v-14815368]{animation:card-attack-enemy-14815368 calc(0.93s / var(--combat-speed-multiplier)) cubic-bezier(0.18,0.9,0.2,1) forwards}.resolved-card-visual-inner--player.resolved-card-visual-inner--self[data-v-14815368]{animation:card-self-player-14815368 calc(0.57s / var(--combat-speed-multiplier)) ease-out forwards}.resolved-card-visual-inner--enemy.resolved-card-visual-inner--self[data-v-14815368]{animation:card-self-enemy-14815368 calc(0.57s / var(--combat-speed-multiplier)) ease-out forwards}.resolved-card-visual-inner--player.resolved-card-visual-inner--fade[data-v-14815368],.resolved-card-visual-inner--enemy.resolved-card-visual-inner--fade[data-v-14815368]{animation:card-fade-only-14815368 calc(0.57s / var(--combat-speed-multiplier)) ease-out forwards}@keyframes card-attack-player-14815368{0%{opacity:0.96;transform:translate3d(0,0,0) scale(1)}38%{opacity:1;transform:translate3d(-90px,40px,0) scale(1.03)}78%{opacity:1;transform:translate3d(56vw,15vh,0) scale(0.79)}100%{opacity:0;transform:translate3d(58vw,16vh,0) scale(0.74)}}@keyframes card-attack-enemy-14815368{0%{opacity:0.96;transform:translate3d(0,0,0) scale(1)}38%{opacity:1;transform:translate3d(90px,-40px,0) scale(1.03)}78%{opacity:1;transform:translate3d(-50vw,33vh,0) scale(0.79)}100%{opacity:0;transform:translate3d(-52vw,34vh,0) scale(0.74)}}@keyframes card-self-player-14815368{0%{opacity:0.96;transform:translate3d(0,0,0) scale(1)}35%{opacity:1;transform:translate3d(24px,-10px,0) scale(1.02)}76%{opacity:1;transform:translate3d(-170px,300px,0) scale(0.78)}100%{opacity:0;transform:translate3d(-178px,308px,0) scale(0.74)}}@keyframes card-self-enemy-14815368{0%{opacity:0.96;transform:translate3d(0,0,0) scale(1)}35%{opacity:1;transform:translate3d(-24px,10px,0) scale(1.02)}76%{opacity:1;transform:translate3d(180px,120px,0) scale(0.78)}100%{opacity:0;transform:translate3d(188px,126px,0) scale(0.74)}}@keyframes card-fade-only-14815368{0%{opacity:0.96;transform:scale(1)}100%{opacity:0;transform:scale(0.96)}}@keyframes combat-float-up-14815368{0%{opacity:0;transform:translate(-50%,0) scale(0.85)}15%{opacity:1}100%{opacity:0;transform:translate(-50%,-42px) scale(1.05)}}.combat-root[data-v-14815368] .animate-float{animation-duration:calc(6s / var(--combat-speed-multiplier))}.combat-root[data-v-14815368] .animate-clash-left,.combat-root[data-v-14815368] .animate-clash-right,.combat-root[data-v-14815368] .animate-shatter{animation-duration:calc(0.6s / var(--combat-speed-multiplier))}.combat-root[data-v-14815368] .animate-shake{animation-duration:calc(0.5s / var(--combat-speed-multiplier))}.combat-root[data-v-14815368] .animate-impact-shake{animation:impact-nudge-14815368 calc(0.2s / var(--combat-speed-multiplier)) ease-out}@keyframes impact-nudge-14815368{0%{transform:translate3d(0,0,0)}25%{transform:translate3d(-3px,2px,0)}50%{transform:translate3d(3px,-2px,0)}75%{transform:translate3d(-2px,1px,0)}100%{transform:translate3d(0,0,0)}}.effect-icon-btn[data-v-14815368]{position:relative;width:1.75rem;height:1.75rem;border-radius:0.35rem;border-width:1px;display:inline-flex;align-items:center;justify-content:center;transition:transform calc(0.14s / var(--combat-speed-multiplier)) ease,filter calc(0.14s / var(--combat-speed-multiplier)) ease}.effect-icon-btn[data-v-14815368]:hover,.effect-icon-btn[data-v-14815368]:focus-visible{transform:translateY(-1px);filter:brightness(1.12);outline:none}.status-effect-value-btn[data-v-14815368]{background:transparent;border:none;padding:0;margin:0;border-radius:0.25rem;cursor:help;transition:filter calc(0.12s / var(--combat-speed-multiplier)) ease}.status-effect-value-btn[data-v-14815368]:hover,.status-effect-value-btn[data-v-14815368]:focus-visible{filter:brightness(1.08);outline:none}.effect-stack-badge[data-v-14815368]{position:absolute;right:-0.28rem;bottom:-0.28rem;min-width:0.9rem;height:0.9rem;border-radius:999px;background:rgba(8,12,24,0.95);border:1px solid rgba(255,255,255,0.24);color:rgba(255,255,255,0.9);font-size:9px;line-height:1;font-weight:700;display:inline-flex;align-items:center;justify-content:center;padding:0 2px}.effect-tooltip[data-v-14815368]{max-width:16rem;background:rgba(8,10,16,0.96);border:1px solid rgba(255,255,255,0.16);border-radius:0.5rem;box-shadow:0 8px 24px rgba(0,0,0,0.42);padding:0.5rem 0.6rem}.effect-tooltip--center[data-v-14815368]{transform:translate(-50%,calc(-100% - 8px))}.effect-tooltip--right[data-v-14815368]{transform:translate(0,calc(-100% - 8px))}.effect-tooltip-name[data-v-14815368]{color:rgba(255,255,255,0.95);font-size:11px;font-weight:700;line-height:1.2}.effect-tooltip-desc[data-v-14815368]{margin-top:0.25rem;color:rgba(229,231,235,0.92);font-size:10px;line-height:1.4}.effect-tooltip-stacks[data-v-14815368]{margin-top:0.25rem;color:rgba(250,204,21,0.92);font-size:10px;line-height:1.2;font-weight:700}.poison-wave-bar[data-v-14815368]{background-image:linear-gradient(180deg,rgba(16,185,129,0.28),rgba(22,163,74,0.8)),repeating-linear-gradient(-25deg,rgba(255,255,255,0.18) 0px,rgba(255,255,255,0.18) 10px,rgba(255,255,255,0) 10px,rgba(255,255,255,0) 20px);background-size:100% 100%,220% 100%;background-position:0 0,0 0;animation:poison-wave-slide-14815368 calc(2.1s / var(--combat-speed-multiplier)) linear infinite}@keyframes poison-wave-slide-14815368{from{background-position:0 0,0 0}to{background-position:0 0,220% 0}}.invalid-card-shake[data-v-14815368]{position:relative;animation:invalid-card-shake-14815368 calc(0.32s / var(--combat-speed-multiplier)) ease}@keyframes invalid-card-shake-14815368{0%{left:0}18%{left:-8px}36%{left:7px}54%{left:-5px}72%{left:4px}100%{left:0}}

@font-face {font-family:'MaShanZheng';src:url('../font/MaShanZheng-Regular.ttf') format('truetype');font-display:swap}@font-face {font-family:'MagicBookTitle';src:url('../font/平方赖江湖琅琊体.ttf') format('truetype');font-display:swap}.magic-book-title[data-v-c84f2af0]{font-family:'MaShanZheng','KaiTi',serif;color:rgba(253,230,138,0.95);letter-spacing:0.04em;text-shadow:0 1px 1px rgba(0,0,0,0.9),0 0 10px rgba(212,175,55,0.35)}.story-rich-text[data-v-c84f2af0]{display:flex;flex-direction:column;gap:0.34em}.story-line[data-v-c84f2af0]{margin:0;white-space:pre-wrap}.story-line-empty[data-v-c84f2af0]{display:inline-block;min-height:1em}.story-line-level-1[data-v-c84f2af0]{font-size:1.55em;line-height:1.45;font-weight:700;color:rgba(245,222,179,0.96)}.story-line-level-2[data-v-c84f2af0]{font-size:1.34em;line-height:1.5;font-weight:700;color:rgba(245,222,179,0.9)}.story-line-level-3[data-v-c84f2af0]{font-size:1.2em;line-height:1.58;font-weight:600;color:rgba(245,222,179,0.86)}.story-line-level-4[data-v-c84f2af0]{font-size:1.12em;line-height:1.64;font-weight:600;color:rgba(245,222,179,0.8)}.story-segment-muted[data-v-c84f2af0]{color:rgba(156,163,175,0.95)}.story-segment-quote[data-v-c84f2af0]{color:#1d4ed8}.story-tucao-section-list[data-v-c84f2af0]{margin-top:0.66rem}.story-tucao-wrap[data-v-c84f2af0]{margin:0.26rem 0 0.34rem}.story-tucao-toggle[data-v-c84f2af0]{display:inline-flex;align-items:center;gap:0.4rem;border-radius:9999px;border:1px solid rgba(251,191,36,0.45);background:rgba(48,31,20,0.84);color:rgba(252,211,77,0.96);font-size:0.72em;letter-spacing:0.02em;padding:0.22rem 0.64rem;transition:all 0.2s ease}.story-tucao-toggle[data-v-c84f2af0]:hover{color:rgba(254,240,138,0.98);border-color:rgba(252,211,77,0.78);box-shadow:0 0 10px rgba(251,191,36,0.32)}.story-tucao-panel[data-v-c84f2af0]{margin-top:0.6rem;border-radius:0.92rem;border:1px solid rgba(244,114,182,0.42);background:linear-gradient(160deg,rgba(255,249,252,0.9),rgba(255,243,250,0.82)),radial-gradient(circle at 6% 3%,rgba(244,114,182,0.24),transparent 52%);color:rgba(126,60,138,0.95);padding:0.95rem 1.05rem;box-shadow:0 0 14px rgba(244,114,182,0.18),inset 0 1px 0 rgba(255,255,255,0.5)}.story-tucao-panel .story-line[data-v-c84f2af0]{color:rgba(126,60,138,0.95)}.story-tucao-panel .story-segment-muted[data-v-c84f2af0]{color:rgba(154,126,168,0.9)}.story-tucao-panel .story-segment-quote[data-v-c84f2af0]{color:rgba(30,58,138,0.92)}.tucao-expand-enter-active[data-v-c84f2af0],.tucao-expand-leave-active[data-v-c84f2af0]{transition:all 0.22s ease}.tucao-expand-enter-from[data-v-c84f2af0],.tucao-expand-leave-to[data-v-c84f2af0]{opacity:0;transform:translateY(-6px)}.status-slide-enter-active[data-v-c84f2af0],.status-slide-leave-active[data-v-c84f2af0]{transition:all 0.3s ease}.status-slide-enter-from[data-v-c84f2af0],.status-slide-leave-to[data-v-c84f2af0]{opacity:0;transform:translateY(10px)}.stat-container-heart[data-v-c84f2af0]{filter:drop-shadow(0 0 6px rgba(180,20,20,0.4));transition:filter 0.3s ease}.stat-container-heart[data-v-c84f2af0]:hover{filter:drop-shadow(0 0 12px rgba(200,30,30,0.7))}.stat-container-mana[data-v-c84f2af0]{filter:drop-shadow(0 0 6px rgba(50,50,200,0.4));transition:filter 0.3s ease}.stat-container-mana[data-v-c84f2af0]:hover{filter:drop-shadow(0 0 12px rgba(60,60,230,0.7))}.combat-fade-enter-active[data-v-c84f2af0],.combat-fade-leave-active[data-v-c84f2af0]{transition:opacity 0.4s ease}.combat-fade-enter-from[data-v-c84f2af0],.combat-fade-leave-to[data-v-c84f2af0]{opacity:0}.relic-tooltip[data-v-c84f2af0]{width:15rem;transform:translate(-50%,calc(-100% - 8px));background:rgba(8,10,16,0.96);border:1px solid rgba(255,255,255,0.16);border-radius:0.5rem;box-shadow:0 8px 24px rgba(0,0,0,0.42);padding:0.5rem 0.6rem}.relic-tooltip-name[data-v-c84f2af0]{color:rgba(255,255,255,0.95);font-size:11px;font-weight:700;line-height:1.2}.relic-tooltip-desc[data-v-c84f2af0]{margin-top:0.28rem;color:rgba(209,213,219,0.9);font-size:10px;line-height:1.35}.map-modal[data-v-c84f2af0]{display:flex;flex-direction:column;gap:0.65rem}.map-toolbar[data-v-c84f2af0]{display:flex;align-items:center;justify-content:space-between;gap:0.8rem}.map-summary[data-v-c84f2af0]{color:rgba(245,222,179,0.78);font-size:12px;letter-spacing:0.04em}.map-summary-highlight[data-v-c84f2af0]{color:rgba(251,191,36,0.95);font-weight:700}.map-summary-divider[data-v-c84f2af0]{margin:0 0.4rem;color:rgba(245,222,179,0.4)}.map-controls[data-v-c84f2af0]{display:flex;align-items:center;gap:0.45rem}.map-control-btn[data-v-c84f2af0]{height:1.9rem;min-width:1.9rem;border-radius:0.45rem;border:1px solid rgba(217,119,6,0.42);background:rgba(24,13,8,0.82);color:rgba(253,230,138,0.92);font-size:12px;padding:0 0.55rem;transition:all 0.18s ease}.map-control-btn[data-v-c84f2af0]:hover{border-color:rgba(251,191,36,0.72);color:rgba(254,243,199,0.98);background:rgba(58,32,18,0.82)}.map-control-btn--wide[data-v-c84f2af0]{min-width:4.4rem}.map-empty[data-v-c84f2af0]{height:17rem;border-radius:0.6rem;border:1px dashed rgba(217,119,6,0.4);background:rgba(18,10,7,0.7);color:rgba(245,222,179,0.55);display:flex;align-items:center;justify-content:center;font-size:13px}.map-viewport[data-v-c84f2af0]{position:relative;height:17rem;border-radius:0.65rem;border:1px solid rgba(217,119,6,0.35);background:radial-gradient(circle at 18% 16%,rgba(120,53,15,0.24),transparent 54%),radial-gradient(circle at 86% 84%,rgba(30,41,59,0.34),transparent 58%),rgba(16,10,8,0.86);overflow:hidden;touch-action:none;cursor:grab}.map-viewport[data-v-c84f2af0]:active{cursor:grabbing}.map-canvas[data-v-c84f2af0]{position:absolute;left:0;top:0}.map-links[data-v-c84f2af0]{position:absolute;left:0;top:0;pointer-events:none}.map-room-cell[data-v-c84f2af0]{position:absolute;width:62px;height:62px;border-radius:0.55rem;border:2px solid rgba(255,255,255,0.25);display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 0 1px rgba(255,255,255,0.12),0 6px 16px rgba(0,0,0,0.35)}.map-room-icon[data-v-c84f2af0]{font-size:1.3rem;line-height:1;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.55))}.map-room-step[data-v-c84f2af0]{position:absolute;right:4px;bottom:3px;font-size:10px;line-height:1;font-weight:700;color:rgba(255,255,255,0.9);text-shadow:0 1px 2px rgba(0,0,0,0.7)}.bond-list[data-v-c84f2af0]{display:flex;flex-direction:column;gap:0.85rem}.bond-row[data-v-c84f2af0]{display:flex;align-items:stretch;gap:0.9rem;border-radius:0.9rem;border:1px solid rgba(212,175,55,0.22);background:linear-gradient(140deg,rgba(20,12,8,0.95),rgba(30,19,12,0.9)),radial-gradient(circle at 85% 0%,rgba(212,175,55,0.12),transparent 48%);padding:0.72rem;box-shadow:inset 0 1px 0 rgba(255,255,255,0.05),0 10px 22px rgba(0,0,0,0.34)}.bond-portrait-frame[data-v-c84f2af0]{width:clamp(4.9rem,16vw,6.3rem);min-width:clamp(4.9rem,16vw,6.3rem);height:clamp(4.9rem,15vw,6.3rem);border-radius:0.7rem;overflow:hidden;border:1px solid rgba(212,175,55,0.45);background:rgba(11,8,6,0.9);box-shadow:0 0 0 1px rgba(255,255,255,0.06),0 10px 20px rgba(0,0,0,0.45)}.bond-portrait-frame--clickable[data-v-c84f2af0]{cursor:zoom-in;transition:transform 0.2s ease,box-shadow 0.2s ease,border-color 0.2s ease}.bond-portrait-frame--clickable[data-v-c84f2af0]:hover{transform:translateY(-1px) scale(1.02);border-color:rgba(251,191,36,0.66);box-shadow:0 0 0 1px rgba(255,255,255,0.1),0 14px 24px rgba(0,0,0,0.5),0 0 20px rgba(251,191,36,0.28)}.bond-portrait-image[data-v-c84f2af0]{width:100%;height:100%;object-fit:cover}.bond-portrait-fallback[data-v-c84f2af0]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:rgba(212,175,55,0.88);font-size:1.3rem;font-family:'MagicBookTitle','KaiTi',serif;background:radial-gradient(circle at 50% 35%,rgba(212,175,55,0.24),rgba(21,13,9,0.94))}.bond-affection-wrap[data-v-c84f2af0]{flex:1;display:flex;flex-direction:column;justify-content:center;gap:0.44rem;min-width:0}.bond-affection-head[data-v-c84f2af0]{display:flex;align-items:center;justify-content:space-between;gap:0.8rem}.bond-role-name[data-v-c84f2af0]{color:rgba(255,243,214,0.95);font-size:1rem;letter-spacing:0.03em;font-family:'MagicBookTitle','KaiTi',serif}.bond-affection-value[data-v-c84f2af0]{font-size:0.9rem;font-weight:700;font-family:'Cinzel','Microsoft YaHei',sans-serif}.bond-affection-value--positive[data-v-c84f2af0]{color:rgba(253,186,116,0.95)}.bond-affection-value--negative[data-v-c84f2af0]{color:rgba(125,211,252,0.96)}.bond-affection-track[data-v-c84f2af0]{position:relative;height:0.72rem;border-radius:9999px;overflow:hidden;border:1px solid rgba(255,255,255,0.14);background:linear-gradient(90deg,rgba(26,42,58,0.72),rgba(26,18,14,0.72)),rgba(7,7,10,0.72)}.bond-affection-fill[data-v-c84f2af0]{height:100%;border-radius:inherit;transition:width 0.25s ease}.bond-affection-fill--positive[data-v-c84f2af0]{background:linear-gradient(90deg,rgba(245,158,11,0.92),rgba(251,191,36,0.95)),rgba(245,158,11,0.9);box-shadow:0 0 16px rgba(251,191,36,0.4)}.bond-affection-fill--negative[data-v-c84f2af0]{background:linear-gradient(90deg,rgba(14,165,233,0.9),rgba(56,189,248,0.96)),rgba(14,165,233,0.9);box-shadow:0 0 16px rgba(56,189,248,0.34)}.bond-preview-panel[data-v-c84f2af0]{width:min(86vw,1100px);max-height:90vh;border-radius:0.95rem;overflow:hidden;border:1px solid rgba(212,175,55,0.42);background:rgba(10,8,7,0.95);box-shadow:0 20px 56px rgba(0,0,0,0.62),0 0 36px rgba(251,191,36,0.22)}.bond-preview-image[data-v-c84f2af0]{display:block;width:100%;max-height:calc(90vh - 3.2rem);object-fit:contain;background:radial-gradient(circle at 50% 0%,rgba(251,191,36,0.08),rgba(8,7,6,0.95) 62%)}.bond-preview-footer[data-v-c84f2af0]{display:flex;align-items:center;justify-content:space-between;gap:0.8rem;border-top:1px solid rgba(212,175,55,0.28);padding:0.52rem 0.72rem;background:rgba(21,13,9,0.94)}.bond-preview-name[data-v-c84f2af0]{color:rgba(255,243,214,0.94);font-size:0.96rem;font-family:'MagicBookTitle','KaiTi',serif;letter-spacing:0.03em}.bond-preview-close-btn[data-v-c84f2af0]{border-radius:9999px;border:1px solid rgba(212,175,55,0.5);background:rgba(17,11,8,0.8);color:rgba(251,191,36,0.95);padding:0.18rem 0.72rem;font-size:0.78rem;transition:border-color 0.2s ease,transform 0.2s ease,color 0.2s ease}.bond-preview-close-btn[data-v-c84f2af0]:hover{border-color:rgba(251,191,36,0.82);color:rgba(254,240,138,0.98);transform:translateY(-1px)}.chest-reward-anchor[data-v-c84f2af0]{position:absolute;left:51%;top:56.5%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;gap:0.72rem}.chest-reward-anchor.is-multi[data-v-c84f2af0]{gap:1.2rem}.chest-portals-anchor[data-v-c84f2af0]{position:absolute;left:50%;bottom:1.75rem;transform:translateX(-50%)}.chest-reward-icon[data-v-c84f2af0]{width:6.5rem;height:6.5rem;color:rgba(252,211,77,0.98);transition:transform 0.2s ease,opacity 0.2s ease,filter 0.2s ease;filter:drop-shadow(0 0 14px rgba(251,191,36,0.8)) drop-shadow(0 0 28px rgba(245,158,11,0.55)) drop-shadow(0 8px 24px rgba(0,0,0,0.65))}.chest-reward-btn[data-v-c84f2af0]{border:0;border-radius:9999px;background:transparent;padding:0.25rem;transition:transform 0.2s ease,opacity 0.2s ease}.chest-reward-btn:hover .chest-reward-icon[data-v-c84f2af0]{transform:scale(1.05)}.chest-reward-btn.is-collected[data-v-c84f2af0]{opacity:1}.chest-reward-btn.is-collected .chest-reward-icon[data-v-c84f2af0]{opacity:0;transform:scale(0.82);filter:drop-shadow(0 0 8px rgba(251,191,36,0.45)) drop-shadow(0 0 16px rgba(245,158,11,0.25)) drop-shadow(0 6px 14px rgba(0,0,0,0.5))}.shop-panel[data-v-c84f2af0]{border:1px solid rgba(217,119,6,0.4);border-radius:0.9rem;background:linear-gradient(145deg,rgba(23,14,8,0.92),rgba(35,21,11,0.9)),radial-gradient(circle at 70% 10%,rgba(180,83,9,0.2),transparent 52%);box-shadow:0 0 28px rgba(180,83,9,0.25),inset 0 1px 0 rgba(255,255,255,0.08);padding:1.1rem 1.2rem 1.2rem;display:flex;flex-direction:column;gap:0.85rem}.shop-layout[data-v-c84f2af0]{left:30%}.shop-panel-head[data-v-c84f2af0]{display:flex;align-items:flex-start;justify-content:space-between;gap:0.8rem;border-bottom:1px solid rgba(245,158,11,0.25);padding-bottom:0.55rem}.shop-goods-grid[data-v-c84f2af0]{flex:1;overflow-y:auto;display:grid;grid-template-columns:repeat(4,minmax(0,1fr));-moz-column-gap:1rem;column-gap:1rem;row-gap:1.28rem;margin-top:1.44rem;padding-right:0.15rem;align-content:start}.shop-item-card[data-v-c84f2af0]{border:0;border-radius:0.55rem;background:transparent;width:100%;min-height:132px;padding:0.28rem 0.2rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:0.28rem;transition:transform 0.2s ease,opacity 0.25s ease,filter 0.2s ease}.shop-item-card[data-v-c84f2af0]:hover{transform:translateY(-1px) scale(1.02);filter:brightness(1.04)}.shop-item-card.is-sold[data-v-c84f2af0]{opacity:0.18;pointer-events:none}.shop-item-icon-wrap[data-v-c84f2af0]{margin-top:0}.shop-item-icon[data-v-c84f2af0]{width:3.4rem;height:3.4rem;color:rgba(251,191,36,0.98);filter:drop-shadow(0 0 11px rgba(245,158,11,0.65))}.shop-item-price[data-v-c84f2af0]{display:inline-flex;align-items:center;gap:0.3rem;border:1px solid rgba(245,158,11,0.55);border-radius:9999px;padding:0.14rem 0.5rem;color:rgba(255,237,213,0.96);background:rgba(38,22,11,0.82);font-size:10px}.shop-panel-foot[data-v-c84f2af0]{margin-top:0.35rem;display:flex;justify-content:space-between;align-items:center}.shop-rob-btn[data-v-c84f2af0]{border-radius:9999px;border:1px solid rgba(251,191,36,0.5);background:radial-gradient(circle at 22% 20%,rgba(255,237,213,0.16),transparent 45%),linear-gradient(120deg,rgba(41,24,12,0.8),rgba(92,47,14,0.75) 50%,rgba(34,19,9,0.82));box-shadow:0 0 10px rgba(245,158,11,0.25),inset 0 1px 0 rgba(255,237,213,0.15);transition:transform 0.2s ease,box-shadow 0.2s ease,opacity 0.2s ease}.shop-rob-btn[data-v-c84f2af0]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 0 14px rgba(245,158,11,0.42),inset 0 1px 0 rgba(255,237,213,0.2)}.shop-rob-btn[data-v-c84f2af0]:disabled{cursor:not-allowed}.shop-exit-btn[data-v-c84f2af0]{border-radius:9999px;border:1px solid rgba(251,191,36,0.72);background:radial-gradient(circle at 22% 20%,rgba(255,237,213,0.22),transparent 45%),linear-gradient(120deg,rgba(41,24,12,0.94),rgba(92,47,14,0.92) 50%,rgba(34,19,9,0.95));box-shadow:0 0 14px rgba(245,158,11,0.45),0 0 30px rgba(180,83,9,0.35),inset 0 1px 0 rgba(255,237,213,0.2);transition:transform 0.2s ease,box-shadow 0.2s ease}.shop-exit-btn[data-v-c84f2af0]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 0 18px rgba(251,191,36,0.62),0 0 36px rgba(217,119,6,0.42),inset 0 1px 0 rgba(255,237,213,0.24)}.shop-exit-btn[data-v-c84f2af0]:disabled{opacity:0.48;cursor:not-allowed}.spring-cleanse-float[data-v-c84f2af0]{position:absolute;left:50%;bottom:1.25rem;max-width:min(90%,860px);transform:translateX(-50%);color:rgba(255,255,255,0.96);font-family:'MagicBookTitle','KaiTi',serif;font-size:clamp(1rem,1.9vw,1.35rem);line-height:1.45;text-align:center;pointer-events:none;z-index:28;text-shadow:0 1px 2px rgba(0,0,0,0.75),0 0 14px rgba(255,255,255,0.22);animation:spring-cleanse-float-up-c84f2af0 2.6s ease-out forwards}@keyframes spring-cleanse-float-up-c84f2af0{0%{opacity:0;transform:translate(-50%,10px)}14%{opacity:1;transform:translate(-50%,0)}100%{opacity:0;transform:translate(-50%,-50px)}}.idol-layout[data-v-c84f2af0]{pointer-events:none}.idol-slots-row[data-v-c84f2af0]{position:absolute;left:50%;bottom:28vh;transform:translateX(-50%);width:min(920px,calc(100vw - 48px));display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:clamp(0.9rem,2.8vw,2.2rem);align-items:center;justify-items:center;pointer-events:none}.idol-slot[data-v-c84f2af0]{width:clamp(4.8rem,7.2vw,6.9rem);height:clamp(4.2rem,6.6vw,6.1rem);clip-path:polygon(50% 0%,94% 25%,94% 75%,50% 100%,6% 75%,6% 25%);border:2px solid rgba(255,255,255,0.95);background:rgba(255,255,255,0.9);display:flex;align-items:center;justify-content:center;text-align:center;box-shadow:0 0 12px rgba(255,255,255,0.35),0 0 26px rgba(255,255,255,0.2);transition:all 0.2s ease;position:relative}.idol-slot-wrap[data-v-c84f2af0]{display:flex;flex-direction:column;align-items:center;gap:0.52rem;pointer-events:none}.idol-slot.is-preview[data-v-c84f2af0]{border-color:rgba(253,224,71,1);background:rgba(255,255,255,0.98);box-shadow:0 0 20px rgba(253,224,71,0.5),0 0 36px rgba(253,224,71,0.35)}.idol-slot.is-selected[data-v-c84f2af0]{border-color:rgba(255,255,255,1);background:rgba(255,255,255,1);box-shadow:0 0 24px rgba(255,255,255,0.55),0 0 40px rgba(253,224,71,0.35)}.idol-slot-hint[data-v-c84f2af0]{position:relative;color:rgba(240,249,255,0.95);font-size:clamp(0.95rem,1.6vw,1.28rem);font-weight:700;white-space:nowrap;text-shadow:0 1px 2px rgba(0,0,0,0.7),0 0 8px rgba(148,163,184,0.35);animation:idolHintFloat-c84f2af0 3.4s ease-in-out infinite;z-index:3}.idol-dice-stage[data-v-c84f2af0]{position:absolute;inset:0;width:100%;height:100%;overflow:hidden;pointer-events:none}.idol-dice-draggable[data-v-c84f2af0]{position:absolute;left:0;top:0;cursor:grab;touch-action:none;-webkit-user-select:none;user-select:none;transition:transform 0.08s linear;pointer-events:auto}.idol-dice-draggable[data-v-c84f2af0]:active{cursor:grabbing}.idol-dice-draggable.is-locked[data-v-c84f2af0]{cursor:default;opacity:0.88}@keyframes idolHintFloat-c84f2af0{0%,100%{transform:translateY(0px);opacity:0.9}50%{transform:translateY(-6px);opacity:1}}.idol-exit-btn[data-v-c84f2af0]{border-radius:9999px;border:1px solid rgba(196,136,255,0.72);background:radial-gradient(circle at 20% 10%,rgba(255,255,255,0.18),transparent 48%),linear-gradient(120deg,rgba(44,20,74,0.94),rgba(86,38,138,0.9) 50%,rgba(27,12,48,0.95));box-shadow:0 0 14px rgba(168,85,247,0.45),0 0 28px rgba(109,40,217,0.34),inset 0 1px 0 rgba(255,255,255,0.2);transition:transform 0.2s ease,box-shadow 0.2s ease,opacity 0.2s ease}.idol-exit-btn[data-v-c84f2af0]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 0 18px rgba(196,136,255,0.58),0 0 34px rgba(147,51,234,0.4),inset 0 1px 0 rgba(255,255,255,0.24)}.idol-exit-btn[data-v-c84f2af0]:disabled{opacity:0.48;cursor:not-allowed}@media (max-width:768px){.shop-layout[data-v-c84f2af0]{left:2%;right:2%}.shop-panel[data-v-c84f2af0]{height:82vh;max-height:none;padding:0.9rem}.shop-goods-grid[data-v-c84f2af0]{grid-template-columns:repeat(3,minmax(0,1fr));-moz-column-gap:0.7rem;column-gap:0.7rem;row-gap:0.95rem;margin-top:1.2rem}.chest-reward-anchor[data-v-c84f2af0]{left:46%;top:57.5%}.chest-portals-anchor[data-v-c84f2af0]{bottom:1.1rem}.idol-slots-row[data-v-c84f2af0]{width:calc(100vw - 24px);bottom:31vh;gap:0.4rem}.idol-slot[data-v-c84f2af0]{width:4.4rem;height:3.9rem}.idol-slot-hint[data-v-c84f2af0]{font-size:0.72rem}.idol-exit-btn[data-v-c84f2af0]{right:0.9rem;bottom:0.8rem;padding:0.55rem 1rem}}

.codex-root[data-v-63b6b248]{display:flex;flex-direction:column;gap:0.85rem;position:relative}.codex-top-glow[data-v-63b6b248]{height:1px;background:linear-gradient(90deg,transparent 5%,rgba(212,175,55,0.5) 30%,rgba(160,50,50,0.4) 50%,rgba(212,175,55,0.5) 70%,transparent 95%);margin-bottom:0.2rem;border-radius:1px;box-shadow:0 0 12px rgba(160,50,50,0.2),0 0 6px rgba(212,175,55,0.25)}.top-nav[data-v-63b6b248]{display:flex;flex-wrap:wrap;gap:0.6rem;justify-content:center}.top-nav-btn[data-v-63b6b248]{position:relative;border:1px solid rgba(180,83,9,0.4);background:linear-gradient(135deg,rgba(22,12,10,0.85),rgba(14,8,6,0.9));color:rgba(240,220,190,0.85);border-radius:0.6rem;font-size:0.82rem;padding:0.4rem 1.1rem;letter-spacing:0.15em;transition:all 0.3s ease;cursor:pointer;overflow:hidden}.top-nav-btn[data-v-63b6b248]::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent 40%,rgba(212,175,55,0.06));opacity:0;transition:opacity 0.3s}.top-nav-btn[data-v-63b6b248]:hover::before{opacity:1}.top-nav-btn[data-v-63b6b248]:hover{border-color:rgba(212,175,55,0.55);color:rgba(255,248,220,0.95);box-shadow:0 0 14px rgba(212,175,55,0.15)}.top-nav-btn.active[data-v-63b6b248]{border-color:rgba(212,175,55,0.75);background:linear-gradient(135deg,rgba(60,20,18,0.85),rgba(40,14,12,0.9));color:rgba(255,248,220,0.98);box-shadow:0 0 18px rgba(212,175,55,0.3),0 0 6px rgba(160,50,50,0.15),inset 0 1px 0 rgba(255,255,255,0.06)}.top-nav-btn-text[data-v-63b6b248]{position:relative;z-index:1}.side-btn[data-v-63b6b248],.bookmark[data-v-63b6b248]{border:1px solid rgba(180,83,9,0.3);background:rgba(14,8,6,0.5);color:rgba(240,220,190,0.8);border-radius:0.5rem;transition:all 0.25s ease;cursor:pointer}.side-btn[data-v-63b6b248]:hover,.bookmark[data-v-63b6b248]:hover:not(:disabled){border-color:rgba(212,175,55,0.5);color:rgba(255,248,220,0.95);background:rgba(60,20,18,0.4)}.side-btn.active[data-v-63b6b248]{border-color:rgba(212,175,55,0.75);background:linear-gradient(135deg,rgba(100,30,25,0.35),rgba(60,20,18,0.5));color:rgba(255,248,220,0.98);box-shadow:0 0 10px rgba(212,175,55,0.2),inset 0 0 8px rgba(160,50,50,0.08)}.book-layout[data-v-63b6b248]{display:grid;grid-template-columns:200px 1fr;gap:0.85rem;min-height:68vh}.side-nav[data-v-63b6b248]{border:1px solid rgba(180,83,9,0.28);border-radius:1rem;background:linear-gradient(170deg,rgba(30,16,14,0.88),rgba(16,8,7,0.92));padding:0.75rem;display:flex;flex-direction:column;gap:0.35rem;position:relative;overflow-y:auto;max-height:72vh}.side-nav[data-v-63b6b248]::before{content:'';position:absolute;top:0;left:0;right:0;height:60%;background:radial-gradient(ellipse at 50% -20%,rgba(212,175,55,0.06),transparent 70%);pointer-events:none;border-radius:1rem 1rem 0 0}.side-title[data-v-63b6b248]{color:rgba(212,175,55,0.95);font-size:0.72rem;letter-spacing:0.18em;text-transform:uppercase;font-weight:600;padding:0.15rem 0.3rem;position:relative;z-index:1}.side-divider[data-v-63b6b248]{height:1px;background:linear-gradient(90deg,transparent,rgba(180,83,9,0.35),rgba(212,175,55,0.2),transparent);margin:0.15rem 0}.side-btn[data-v-63b6b248]{font-size:0.82rem;text-align:left;padding:0.42rem 0.65rem;position:relative;z-index:1}.side-btn-area[data-v-63b6b248]{font-size:0.72rem;padding-left:0.8rem}.book-shell[data-v-63b6b248]{border:1px solid rgba(180,83,9,0.28);border-radius:1rem;background:linear-gradient(170deg,rgba(26,14,12,0.7),rgba(14,8,6,0.85));padding:0.75rem;position:relative}.book-shell[data-v-63b6b248]::before{content:'';position:absolute;top:0;left:0;right:0;height:45%;background:radial-gradient(ellipse at 30% -10%,rgba(212,175,55,0.05),transparent 60%);pointer-events:none;border-radius:1rem 1rem 0 0}.book-page[data-v-63b6b248]{border:1px solid rgba(180,83,9,0.2);border-radius:0.85rem;background:radial-gradient(circle at 15% 5%,rgba(160,50,50,0.08),transparent 35%),radial-gradient(circle at 85% 95%,rgba(212,175,55,0.05),transparent 35%),rgba(12,7,6,0.75);padding:0.85rem 0.85rem 3.6rem;min-height:62vh;position:relative;display:flex;flex-direction:column}.card-grid[data-v-63b6b248]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem;justify-items:center;flex:1;align-content:start}.entry-grid[data-v-63b6b248]{display:grid;grid-template-columns:repeat(auto-fill,minmax(265px,1fr));gap:0.65rem;flex:1;align-content:start}.enemy-grid[data-v-63b6b248]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:0.7rem;flex:1;align-content:start}.entry-card[data-v-63b6b248]{border:1px solid rgba(180,83,9,0.28);border-left:2px solid rgba(212,175,55,0.4);border-radius:0.6rem;background:linear-gradient(135deg,rgba(24,12,10,0.65),rgba(14,8,6,0.75));padding:0.6rem 0.65rem;backdrop-filter:blur(4px);transition:all 0.3s ease}.entry-card[data-v-63b6b248]:hover{border-color:rgba(212,175,55,0.4);border-left-color:rgba(212,175,55,0.65);box-shadow:0 0 16px rgba(160,50,50,0.08),0 2px 8px rgba(0,0,0,0.3);transform:translateY(-1px)}.entry-title[data-v-63b6b248]{color:rgba(255,248,220,0.95);font-size:0.88rem;line-height:1.15rem;font-weight:500}.entry-meta[data-v-63b6b248]{margin-top:0.18rem;color:rgba(212,175,55,0.8);font-size:0.72rem;line-height:1rem;letter-spacing:0.04em}.entry-desc[data-v-63b6b248]{margin-top:0.25rem;color:rgba(240,220,190,0.68);font-size:0.75rem;line-height:1.05rem}.effect-row[data-v-63b6b248]{display:flex;align-items:center;gap:0.42rem}.effect-icon[data-v-63b6b248]{width:1.3rem;display:inline-flex;justify-content:center;font-size:1rem}.enemy-head[data-v-63b6b248]{display:flex;align-items:center;gap:0.55rem;margin-bottom:0.2rem}.portrait[data-v-63b6b248]{width:3.2rem;height:3.2rem;border-radius:0.55rem;border:1px solid rgba(212,175,55,0.4);overflow:hidden;background:rgba(12,7,6,0.6);flex-shrink:0;box-shadow:0 0 8px rgba(160,50,50,0.12);transition:all 0.3s ease}.enemy-card:hover .portrait[data-v-63b6b248]{border-color:rgba(212,175,55,0.7);box-shadow:0 0 14px rgba(212,175,55,0.25)}.portrait-img[data-v-63b6b248]{width:100%;height:100%;object-fit:cover;object-position:top}.portrait-fallback[data-v-63b6b248]{width:100%;height:100%;display:inline-flex;align-items:center;justify-content:center;color:rgba(212,175,55,0.7);font-size:1.1rem;font-weight:bold}.enemy-head-text[data-v-63b6b248]{min-width:0}.page-foot[data-v-63b6b248]{position:absolute;left:0.85rem;right:0.85rem;bottom:0.7rem;display:flex;align-items:flex-end;justify-content:space-between}.bookmark[data-v-63b6b248]{padding:0.4rem 0.8rem;border-radius:0.5rem 0.5rem 0.2rem 0.2rem;font-size:0.76rem;letter-spacing:0.05em}.bookmark[data-v-63b6b248]:disabled{opacity:0.3;cursor:not-allowed}.bookmark-next[data-v-63b6b248]{background:linear-gradient(180deg,rgba(120,40,35,0.4),rgba(80,25,20,0.6));border-color:rgba(180,83,9,0.4)}.bookmark-next[data-v-63b6b248]:hover:not(:disabled){background:linear-gradient(180deg,rgba(140,50,40,0.5),rgba(100,35,28,0.7));box-shadow:0 0 12px rgba(212,175,55,0.2)}.page-indicator[data-v-63b6b248]{color:rgba(212,175,55,0.88);font-size:0.78rem;letter-spacing:0.08em}.flip-next-enter-active[data-v-63b6b248],.flip-next-leave-active[data-v-63b6b248],.flip-prev-enter-active[data-v-63b6b248],.flip-prev-leave-active[data-v-63b6b248]{transition:transform 0.35s ease,opacity 0.35s ease}.flip-next-enter-from[data-v-63b6b248]{opacity:0;transform:perspective(1200px) rotateY(-10deg) translateX(14px)}.flip-next-leave-to[data-v-63b6b248]{opacity:0;transform:perspective(1200px) rotateY(8deg) translateX(-12px)}.flip-prev-enter-from[data-v-63b6b248]{opacity:0;transform:perspective(1200px) rotateY(10deg) translateX(-14px)}.flip-prev-leave-to[data-v-63b6b248]{opacity:0;transform:perspective(1200px) rotateY(-8deg) translateX(12px)}@media (max-width:980px){.book-layout[data-v-63b6b248]{grid-template-columns:1fr}.side-nav[data-v-63b6b248]{flex-direction:row;flex-wrap:wrap;align-items:center;max-height:none}.side-title[data-v-63b6b248]{width:100%}.side-divider[data-v-63b6b248]{width:100%;margin:0.1rem 0}.card-grid[data-v-63b6b248]{grid-template-columns:repeat(2,minmax(0,1fr))}}

.scene-fade-enter-active[data-v-3673323e]{transition:opacity 0.8s ease,transform 0.8s ease}.scene-fade-leave-active[data-v-3673323e]{transition:opacity 0.5s ease,transform 0.5s ease}.scene-fade-enter-from[data-v-3673323e]{opacity:0;transform:scale(1.02)}.scene-fade-leave-to[data-v-3673323e]{opacity:0;transform:scale(0.98)}

/*! tailwindcss v4.2.1 | MIT License | https://tailwindcss.com */@layer properties;@layer theme,base,components,utilities;@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% 0.032 17.717);--color-red-200:oklch(88.5% 0.062 18.334);--color-red-300:oklch(80.8% 0.114 19.571);--color-red-400:oklch(70.4% 0.191 22.216);--color-red-500:oklch(63.7% 0.237 25.331);--color-red-600:oklch(57.7% 0.245 27.325);--color-red-700:oklch(50.5% 0.213 27.518);--color-red-800:oklch(44.4% 0.177 26.899);--color-red-900:oklch(39.6% 0.141 25.723);--color-red-950:oklch(25.8% 0.092 26.042);--color-orange-300:oklch(83.7% 0.128 66.29);--color-orange-400:oklch(75% 0.183 55.934);--color-orange-500:oklch(70.5% 0.213 47.604);--color-amber-50:oklch(98.7% 0.022 95.277);--color-amber-100:oklch(96.2% 0.059 95.617);--color-amber-200:oklch(92.4% 0.12 95.746);--color-amber-300:oklch(87.9% 0.169 91.605);--color-amber-400:oklch(82.8% 0.189 84.429);--color-amber-500:oklch(76.9% 0.188 70.08);--color-amber-600:oklch(66.6% 0.179 58.318);--color-amber-900:oklch(41.4% 0.112 45.904);--color-yellow-300:oklch(90.5% 0.182 98.111);--color-yellow-400:oklch(85.2% 0.199 91.936);--color-yellow-500:oklch(79.5% 0.184 86.047);--color-yellow-800:oklch(47.6% 0.114 61.907);--color-yellow-900:oklch(42.1% 0.095 57.708);--color-yellow-950:oklch(28.6% 0.066 53.813);--color-lime-300:oklch(89.7% 0.196 126.665);--color-green-300:oklch(87.1% 0.15 154.449);--color-green-400:oklch(79.2% 0.209 151.711);--color-green-600:oklch(62.7% 0.194 149.214);--color-emerald-200:oklch(90.5% 0.093 164.15);--color-emerald-300:oklch(84.5% 0.143 164.978);--color-emerald-400:oklch(76.5% 0.177 163.223);--color-emerald-500:oklch(69.6% 0.17 162.48);--color-emerald-900:oklch(37.8% 0.077 168.94);--color-emerald-950:oklch(26.2% 0.051 172.552);--color-teal-300:oklch(85.5% 0.138 181.071);--color-cyan-300:oklch(86.5% 0.127 207.078);--color-sky-200:oklch(90.1% 0.058 230.902);--color-sky-300:oklch(82.8% 0.111 230.318);--color-sky-400:oklch(74.6% 0.16 232.661);--color-sky-500:oklch(68.5% 0.169 237.323);--color-blue-300:oklch(80.9% 0.105 251.813);--color-blue-400:oklch(70.7% 0.165 254.624);--color-blue-500:oklch(62.3% 0.214 259.815);--color-blue-900:oklch(37.9% 0.146 265.522);--color-indigo-200:oklch(87% 0.065 274.039);--color-indigo-300:oklch(78.5% 0.115 274.713);--color-indigo-400:oklch(67.3% 0.182 276.935);--color-indigo-900:oklch(35.9% 0.144 278.697);--color-violet-300:oklch(81.1% 0.111 293.571);--color-violet-400:oklch(70.2% 0.183 293.541);--color-violet-500:oklch(60.6% 0.25 292.717);--color-violet-900:oklch(38% 0.189 293.745);--color-purple-400:oklch(71.4% 0.203 305.504);--color-purple-700:oklch(49.6% 0.265 301.924);--color-purple-900:oklch(38.1% 0.176 304.987);--color-purple-950:oklch(29.1% 0.149 302.717);--color-fuchsia-300:oklch(83.3% 0.145 321.434);--color-rose-300:oklch(81% 0.117 11.638);--color-rose-400:oklch(71.2% 0.194 13.428);--color-rose-500:oklch(64.5% 0.246 16.439);--color-slate-200:oklch(92.9% 0.013 255.508);--color-slate-300:oklch(86.9% 0.022 252.894);--color-slate-400:oklch(70.4% 0.04 256.788);--color-slate-800:oklch(27.9% 0.041 260.031);--color-gray-300:oklch(87.2% 0.01 258.338);--color-gray-400:oklch(70.7% 0.022 261.325);--color-gray-500:oklch(55.1% 0.027 264.364);--color-gray-600:oklch(44.6% 0.03 256.802);--color-gray-700:oklch(37.3% 0.034 259.733);--color-gray-800:oklch(27.8% 0.033 256.848);--color-gray-900:oklch(21% 0.034 264.665);--color-zinc-100:oklch(96.7% 0.001 286.375);--color-zinc-200:oklch(92% 0.004 286.32);--color-zinc-300:oklch(87.1% 0.006 286.286);--color-zinc-500:oklch(55.2% 0.016 285.938);--color-zinc-600:oklch(44.2% 0.017 285.786);--color-zinc-700:oklch(37% 0.013 285.805);--color-zinc-900:oklch(21% 0.006 285.885);--color-black:#000;--color-white:#fff;--spacing:0.25rem;--container-sm:24rem;--container-lg:32rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-5xl:64rem;--container-6xl:72rem;--text-xs:0.75rem;--text-xs--line-height:calc(1 / 0.75);--text-sm:0.875rem;--text-sm--line-height:calc(1.25 / 0.875);--text-base:1rem;--text-base--line-height:calc(1.5 / 1);--text-lg:1.125rem;--text-lg--line-height:calc(1.75 / 1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75 / 1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2 / 1.5);--text-3xl:1.875rem;--text-3xl--line-height:calc(2.25 / 1.875);--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5 / 2.25);--text-5xl:3rem;--text-5xl--line-height:1;--text-6xl:3.75rem;--text-6xl--line-height:1;--text-8xl:6rem;--text-8xl--line-height:1;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-extrabold:800;--tracking-wide:0.025em;--tracking-wider:0.05em;--tracking-widest:0.1em;--leading-tight:1.25;--leading-relaxed:1.625;--radius-md:0.375rem;--radius-lg:0.5rem;--radius-xl:0.75rem;--radius-2xl:1rem;--drop-shadow-sm:0 1px 2px rgb(0 0 0/0.15);--drop-shadow-md:0 3px 3px rgb(0 0 0/0.12);--drop-shadow-lg:0 4px 4px rgb(0 0 0/0.15);--drop-shadow-xl:0 9px 7px rgb(0 0 0/0.1);--ease-out:cubic-bezier(0,0,0.2,1);--ease-in-out:cubic-bezier(0.4,0,0.2,1);--animate-pulse:pulse 2s cubic-bezier(0.4,0,0.6,1) infinite;--animate-bounce:bounce 1s infinite;--blur-sm:8px;--blur-md:12px;--blur-2xl:40px;--default-transition-duration:150ms;--default-transition-timing-function:cubic-bezier(0.4,0,0.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-dungeon-dark:#0a0a0c;--color-dungeon-brown:#2c1a0e;--color-dungeon-gold:#d4af37;--color-dungeon-gold-dim:#8a7122;--color-dungeon-paper:#eaddcf;--font-heading:'MedievalSharp',cursive;--font-body:'Cinzel',serif;--font-ui:'Inter',sans-serif;--animate-float:float 6s ease-in-out infinite;--animate-pulse-slow:pulse 4s cubic-bezier(0.4,0,0.6,1) infinite;--animate-clash-left:clashLeft 0.6s ease-in forwards;--animate-clash-right:clashRight 0.6s ease-in forwards;--animate-shatter:shatter 0.6s ease-out forwards;--animate-shake:shake 0.5s cubic-bezier(0.36,0.07,0.19,0.97) both}}@layer base{*,::after,::before,::backdrop,::file-selector-button{box-sizing:border-box;margin:0;padding:0;border:0 solid}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea,::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;border-radius:0;background-color:transparent;opacity:1}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not (-webkit-appearance:-apple-pay-button)) or (contain-intrinsic-size:1px){::placeholder{color:currentcolor;@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type="button"],[type="reset"],[type="submit"]),::file-selector-button{-webkit-appearance:button;appearance:button}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden="until-found"])){display:none !important}}@layer utilities{.pointer-events-auto{pointer-events:auto}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip-path:inset(50%);white-space:nowrap;border-width:0}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing) * 0)}.inset-1{inset:calc(var(--spacing) * 1)}.inset-2{inset:calc(var(--spacing) * 2)}.inset-\[1px\]{inset:1px}.inset-x-0{inset-inline:calc(var(--spacing) * 0)}.inset-x-2{inset-inline:calc(var(--spacing) * 2)}.inset-y-0{inset-block:calc(var(--spacing) * 0)}.-start{inset-inline-start:calc(var(--spacing) * -1)}.start{inset-inline-start:var(--spacing)}.end{inset-inline-end:var(--spacing)}.-top-1{top:calc(var(--spacing) * -1)}.-top-5{top:calc(var(--spacing) * -5)}.-top-8{top:calc(var(--spacing) * -8)}.-top-\[1rem\]{top:calc(1rem * -1)}.top-0{top:calc(var(--spacing) * 0)}.top-1\/2{top:calc(1 / 2 * 100%)}.top-2{top:calc(var(--spacing) * 2)}.top-4{top:calc(var(--spacing) * 4)}.top-6{top:calc(var(--spacing) * 6)}.top-8{top:calc(var(--spacing) * 8)}.top-14{top:calc(var(--spacing) * 14)}.top-\[3\%\]{top:3%}.top-\[5\.9rem\]{top:5.9rem}.top-full{top:100%}.-right-1{right:calc(var(--spacing) * -1)}.-right-3{right:calc(var(--spacing) * -3)}.-right-12{right:calc(var(--spacing) * -12)}.right-0{right:calc(var(--spacing) * 0)}.right-1\/2{right:calc(1 / 2 * 100%)}.right-2{right:calc(var(--spacing) * 2)}.right-4{right:calc(var(--spacing) * 4)}.right-5{right:calc(var(--spacing) * 5)}.right-6{right:calc(var(--spacing) * 6)}.right-8{right:calc(var(--spacing) * 8)}.right-14{right:calc(var(--spacing) * 14)}.right-\[2\%\]{right:2%}.-bottom-1{bottom:calc(var(--spacing) * -1)}.bottom-0{bottom:calc(var(--spacing) * 0)}.bottom-4{bottom:calc(var(--spacing) * 4)}.bottom-5{bottom:calc(var(--spacing) * 5)}.bottom-6{bottom:calc(var(--spacing) * 6)}.bottom-8{bottom:calc(var(--spacing) * 8)}.bottom-20{bottom:calc(var(--spacing) * 20)}.bottom-\[18\%\]{bottom:18%}.-left-1{left:calc(var(--spacing) * -1)}.-left-12{left:calc(var(--spacing) * -12)}.-left-24{left:calc(var(--spacing) * -24)}.-left-48{left:calc(var(--spacing) * -48)}.left-0{left:calc(var(--spacing) * 0)}.left-1\/2{left:calc(1 / 2 * 100%)}.left-2{left:calc(var(--spacing) * 2)}.left-4{left:calc(var(--spacing) * 4)}.left-6{left:calc(var(--spacing) * 6)}.left-8{left:calc(var(--spacing) * 8)}.left-14{left:calc(var(--spacing) * 14)}.left-\[3\%\]{left:3%}.left-\[140\%\]{left:140%}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.z-\[1\]{z-index:1}.z-\[45\]{z-index:45}.z-\[70\]{z-index:70}.z-\[72\]{z-index:72}.z-\[94\]{z-index:94}.z-\[95\]{z-index:95}.z-\[96\]{z-index:96}.z-\[97\]{z-index:97}.z-\[98\]{z-index:98}.z-\[99\]{z-index:99}.z-\[100\]{z-index:100}.z-\[102\]{z-index:102}.z-\[110\]{z-index:110}.z-\[200\]{z-index:200}.z-\[220\]{z-index:220}.z-\[230\]{z-index:230}.col-span-2{grid-column:span 2/span 2}.container{width:100%;@media (width >= 40rem){max-width:40rem}@media (width >= 48rem){max-width:48rem}@media (width >= 64rem){max-width:64rem}@media (width >= 80rem){max-width:80rem}@media (width >= 96rem){max-width:96rem}}.mx-4{margin-inline:calc(var(--spacing) * 4)}.mx-auto{margin-inline:auto}.my-2{margin-block:calc(var(--spacing) * 2)}.mt-0{margin-top:calc(var(--spacing) * 0)}.mt-0\.5{margin-top:calc(var(--spacing) * 0.5)}.mt-1{margin-top:calc(var(--spacing) * 1)}.mt-1\.5{margin-top:calc(var(--spacing) * 1.5)}.mt-2{margin-top:calc(var(--spacing) * 2)}.mt-3{margin-top:calc(var(--spacing) * 3)}.mt-4{margin-top:calc(var(--spacing) * 4)}.mt-6{margin-top:calc(var(--spacing) * 6)}.mt-8{margin-top:calc(var(--spacing) * 8)}.mr-2{margin-right:calc(var(--spacing) * 2)}.mr-\[-0\.5rem\]{margin-right:-0.5rem}.mb-1{margin-bottom:calc(var(--spacing) * 1)}.mb-1\.5{margin-bottom:calc(var(--spacing) * 1.5)}.mb-2{margin-bottom:calc(var(--spacing) * 2)}.mb-3{margin-bottom:calc(var(--spacing) * 3)}.mb-4{margin-bottom:calc(var(--spacing) * 4)}.mb-6{margin-bottom:calc(var(--spacing) * 6)}.ml-\[-0\.5rem\]{margin-left:-0.5rem}.ml-auto{margin-left:auto}.line-clamp-2{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.hidden\!{display:none !important}.inline{display:inline}.inline-flex{display:inline-flex}.table{display:table}.\[aspect-ratio\:832\/1216\]{aspect-ratio:832/1216}.size-2{width:calc(var(--spacing) * 2);height:calc(var(--spacing) * 2)}.size-3\.5{width:calc(var(--spacing) * 3.5);height:calc(var(--spacing) * 3.5)}.size-4{width:calc(var(--spacing) * 4);height:calc(var(--spacing) * 4)}.size-5{width:calc(var(--spacing) * 5);height:calc(var(--spacing) * 5)}.size-6{width:calc(var(--spacing) * 6);height:calc(var(--spacing) * 6)}.size-9{width:calc(var(--spacing) * 9);height:calc(var(--spacing) * 9)}.size-12{width:calc(var(--spacing) * 12);height:calc(var(--spacing) * 12)}.size-16{width:calc(var(--spacing) * 16);height:calc(var(--spacing) * 16)}.size-20{width:calc(var(--spacing) * 20);height:calc(var(--spacing) * 20)}.size-full{width:100%;height:100%}.h-1\.5{height:calc(var(--spacing) * 1.5)}.h-2{height:calc(var(--spacing) * 2)}.h-2\.5{height:calc(var(--spacing) * 2.5)}.h-4{height:calc(var(--spacing) * 4)}.h-5{height:calc(var(--spacing) * 5)}.h-6{height:calc(var(--spacing) * 6)}.h-7{height:calc(var(--spacing) * 7)}.h-8{height:calc(var(--spacing) * 8)}.h-10{height:calc(var(--spacing) * 10)}.h-12{height:calc(var(--spacing) * 12)}.h-14{height:calc(var(--spacing) * 14)}.h-20{height:calc(var(--spacing) * 20)}.h-24{height:calc(var(--spacing) * 24)}.h-28{height:calc(var(--spacing) * 28)}.h-32{height:calc(var(--spacing) * 32)}.h-48{height:calc(var(--spacing) * 48)}.h-60{height:calc(var(--spacing) * 60)}.h-64{height:calc(var(--spacing) * 64)}.h-80{height:calc(var(--spacing) * 80)}.h-\[1px\]{height:1px}.h-\[32rem\]{height:32rem}.h-\[42vh\]{height:42vh}.h-\[84vh\]{height:84vh}.h-\[92vh\]{height:92vh}.h-\[250px\]{height:250px}.h-full{height:100%}.h-screen{height:100vh}.\!max-h-\[94\%\]{max-height:94% !important}.max-h-44{max-height:calc(var(--spacing) * 44)}.max-h-52{max-height:calc(var(--spacing) * 52)}.max-h-\[28vh\]{max-height:28vh}.max-h-\[42vh\]{max-height:42vh}.max-h-\[52vh\]{max-height:52vh}.max-h-\[60\%\]{max-height:60%}.max-h-\[60vh\]{max-height:60vh}.max-h-\[64vh\]{max-height:64vh}.max-h-\[72vh\]{max-height:72vh}.max-h-\[80\%\]{max-height:80%}.max-h-\[90\%\]{max-height:90%}.max-h-\[94\%\]{max-height:94%}.max-h-\[360px\]{max-height:360px}.max-h-\[860px\]{max-height:860px}.max-h-\[1216px\]{max-height:1216px}.min-h-0{min-height:calc(var(--spacing) * 0)}.min-h-\[1rem\]{min-height:1rem}.min-h-\[50px\]{min-height:50px}.min-h-\[200px\]{min-height:200px}.min-h-\[220px\]{min-height:220px}.w-0{width:calc(var(--spacing) * 0)}.w-1{width:calc(var(--spacing) * 1)}.w-1\.5{width:calc(var(--spacing) * 1.5)}.w-2{width:calc(var(--spacing) * 2)}.w-4{width:calc(var(--spacing) * 4)}.w-5{width:calc(var(--spacing) * 5)}.w-6{width:calc(var(--spacing) * 6)}.w-7{width:calc(var(--spacing) * 7)}.w-8{width:calc(var(--spacing) * 8)}.w-10{width:calc(var(--spacing) * 10)}.w-12{width:calc(var(--spacing) * 12)}.w-14{width:calc(var(--spacing) * 14)}.w-20{width:calc(var(--spacing) * 20)}.w-24{width:calc(var(--spacing) * 24)}.w-28{width:calc(var(--spacing) * 28)}.w-32{width:calc(var(--spacing) * 32)}.w-40{width:calc(var(--spacing) * 40)}.w-44{width:calc(var(--spacing) * 44)}.w-48{width:calc(var(--spacing) * 48)}.w-52{width:calc(var(--spacing) * 52)}.w-60{width:calc(var(--spacing) * 60)}.w-64{width:calc(var(--spacing) * 64)}.w-72{width:calc(var(--spacing) * 72)}.w-80{width:calc(var(--spacing) * 80)}.w-96{width:calc(var(--spacing) * 96)}.w-\[36vw\]{width:36vw}.w-\[180px\]{width:180px}.w-auto{width:auto}.w-full{width:100%}.\!max-w-\[min\(96vw\,1500px\)\]{max-width:min(96vw,1500px) !important}.max-w-2xl{max-width:var(--container-2xl)}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-5xl{max-width:var(--container-5xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-\[48rem\]{max-width:48rem}.max-w-\[90rem\]{max-width:90rem}.max-w-\[92rem\]{max-width:92rem}.max-w-\[540px\]{max-width:540px}.max-w-lg{max-width:var(--container-lg)}.max-w-none{max-width:none}.max-w-sm{max-width:var(--container-sm)}.min-w-0{min-width:calc(var(--spacing) * 0)}.min-w-\[260px\]{min-width:260px}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.origin-bottom{transform-origin:bottom}.origin-bottom-left{transform-origin:0 100%}.origin-bottom-right{transform-origin:100% 100%}.origin-top{transform-origin:top}.origin-top-left{transform-origin:0 0}.origin-top-right{transform-origin:100% 0}.-translate-x-1\/2{--tw-translate-x:calc(calc(1 / 2 * 100%) * -1);translate:var(--tw-translate-x) var(--tw-translate-y)}.-translate-y-1\/2{--tw-translate-y:calc(calc(1 / 2 * 100%) * -1);translate:var(--tw-translate-x) var(--tw-translate-y)}.-translate-y-6{--tw-translate-y:calc(var(--spacing) * -6);translate:var(--tw-translate-x) var(--tw-translate-y)}.-translate-y-12{--tw-translate-y:calc(var(--spacing) * -12);translate:var(--tw-translate-x) var(--tw-translate-y)}.translate-y-8{--tw-translate-y:calc(var(--spacing) * 8);translate:var(--tw-translate-x) var(--tw-translate-y)}.translate-y-28{--tw-translate-y:calc(var(--spacing) * 28);translate:var(--tw-translate-x) var(--tw-translate-y)}.scale-75{--tw-scale-x:75%;--tw-scale-y:75%;--tw-scale-z:75%;scale:var(--tw-scale-x) var(--tw-scale-y)}.scale-90{--tw-scale-x:90%;--tw-scale-y:90%;--tw-scale-z:90%;scale:var(--tw-scale-x) var(--tw-scale-y)}.scale-105{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x) var(--tw-scale-y)}.scale-110{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x) var(--tw-scale-y)}.scale-\[1\.1\]{scale:1.1}.scale-\[1\.2\]{scale:1.2}.rotate-45{rotate:45deg}.rotate-\[-3deg\]{rotate:-3deg}.transform{transform:var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,)}.animate-\[spin_8s_linear_infinite\]{animation:spin 8s linear infinite}.animate-bounce{animation:var(--animate-bounce)}.animate-clash-left{animation:var(--animate-clash-left)}.animate-clash-right{animation:var(--animate-clash-right)}.animate-float{animation:var(--animate-float)}.animate-pulse{animation:var(--animate-pulse)}.animate-pulse-slow{animation:var(--animate-pulse-slow)}.animate-shake{animation:var(--animate-shake)}.animate-shatter{animation:var(--animate-shatter)}.\!cursor-default{cursor:default !important}.cursor-default{cursor:default}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-none{resize:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-9{grid-template-columns:repeat(9,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.items-stretch{align-items:stretch}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-1{gap:calc(var(--spacing) * 1)}.gap-1\.5{gap:calc(var(--spacing) * 1.5)}.gap-2{gap:calc(var(--spacing) * 2)}.gap-2\.5{gap:calc(var(--spacing) * 2.5)}.gap-3{gap:calc(var(--spacing) * 3)}.gap-4{gap:calc(var(--spacing) * 4)}.gap-5{gap:calc(var(--spacing) * 5)}.gap-6{gap:calc(var(--spacing) * 6)}.gap-8{gap:calc(var(--spacing) * 8)}.space-y-0\.5{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 0.5) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 0.5) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-1{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-1\.5{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 1.5) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 1.5) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-2{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-3{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-4{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-6{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)))}}.space-y-12{:where(&>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing) * 12) * var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing) * 12) * calc(1 - var(--tw-space-y-reverse)))}}.gap-x-6{-moz-column-gap:calc(var(--spacing) * 6);column-gap:calc(var(--spacing) * 6)}.space-x-2{:where(&>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)))}}.space-x-3{:where(&>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)))}}.space-x-4{:where(&>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing) * 4) * var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-x-reverse)))}}.gap-y-6{row-gap:calc(var(--spacing) * 6)}.self-center{align-self:center}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-\[15px\]{border-radius:15px}.rounded-full{border-radius:calc(infinity * 1px)}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-2xl{border-top-left-radius:var(--radius-2xl);border-top-right-radius:var(--radius-2xl)}.rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.rounded-l-lg{border-top-left-radius:var(--radius-lg);border-bottom-left-radius:var(--radius-lg)}.rounded-b-lg{border-bottom-right-radius:var(--radius-lg);border-bottom-left-radius:var(--radius-lg)}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-x{border-inline-style:var(--tw-border-style);border-inline-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-t-2{border-top-style:var(--tw-border-style);border-top-width:2px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-r-0{border-right-style:var(--tw-border-style);border-right-width:0px}.border-r-2{border-right-style:var(--tw-border-style);border-right-width:2px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-\[\#3a3040\]{border-color:#3a3040}.border-\[\#4a2e1a\]{border-color:#4a2e1a}.border-\[\#5c3a21\]{border-color:#5c3a21}.border-amber-200\/15{border-color:color-mix(in srgb,oklch(92.4% 0.12 95.746) 15%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-200) 15%,transparent)}}.border-amber-300\/25{border-color:color-mix(in srgb,oklch(87.9% 0.169 91.605) 25%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-300) 25%,transparent)}}.border-amber-300\/30{border-color:color-mix(in srgb,oklch(87.9% 0.169 91.605) 30%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-300) 30%,transparent)}}.border-amber-300\/35{border-color:color-mix(in srgb,oklch(87.9% 0.169 91.605) 35%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-300) 35%,transparent)}}.border-amber-300\/75{border-color:color-mix(in srgb,oklch(87.9% 0.169 91.605) 75%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-300) 75%,transparent)}}.border-amber-400\/35{border-color:color-mix(in srgb,oklch(82.8% 0.189 84.429) 35%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-400) 35%,transparent)}}.border-amber-400\/55{border-color:color-mix(in srgb,oklch(82.8% 0.189 84.429) 55%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-400) 55%,transparent)}}.border-amber-600\/40{border-color:color-mix(in srgb,oklch(66.6% 0.179 58.318) 40%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-amber-600) 40%,transparent)}}.border-black{border-color:var(--color-black)}.border-blue-500\/50{border-color:color-mix(in srgb,oklch(62.3% 0.214 259.815) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-blue-500) 50%,transparent)}}.border-blue-900\/20{border-color:color-mix(in srgb,oklch(37.9% 0.146 265.522) 20%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-blue-900) 20%,transparent)}}.border-dungeon-brown{border-color:var(--color-dungeon-brown)}.border-dungeon-brown\/30{border-color:color-mix(in srgb,#2c1a0e 30%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 30%,transparent)}}.border-dungeon-brown\/40{border-color:color-mix(in srgb,#2c1a0e 40%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 40%,transparent)}}.border-dungeon-brown\/45{border-color:color-mix(in srgb,#2c1a0e 45%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 45%,transparent)}}.border-dungeon-brown\/50{border-color:color-mix(in srgb,#2c1a0e 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 50%,transparent)}}.border-dungeon-brown\/60{border-color:color-mix(in srgb,#2c1a0e 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 60%,transparent)}}.border-dungeon-brown\/70{border-color:color-mix(in srgb,#2c1a0e 70%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 70%,transparent)}}.border-dungeon-brown\/80{border-color:color-mix(in srgb,#2c1a0e 80%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-brown) 80%,transparent)}}.border-dungeon-gold{border-color:var(--color-dungeon-gold)}.border-dungeon-gold\/15{border-color:color-mix(in srgb,#d4af37 15%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 15%,transparent)}}.border-dungeon-gold\/20{border-color:color-mix(in srgb,#d4af37 20%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 20%,transparent)}}.border-dungeon-gold\/25{border-color:color-mix(in srgb,#d4af37 25%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 25%,transparent)}}.border-dungeon-gold\/30{border-color:color-mix(in srgb,#d4af37 30%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 30%,transparent)}}.border-dungeon-gold\/35{border-color:color-mix(in srgb,#d4af37 35%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 35%,transparent)}}.border-dungeon-gold\/40{border-color:color-mix(in srgb,#d4af37 40%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 40%,transparent)}}.border-dungeon-gold\/45{border-color:color-mix(in srgb,#d4af37 45%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 45%,transparent)}}.border-dungeon-gold\/50{border-color:color-mix(in srgb,#d4af37 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 50%,transparent)}}.border-dungeon-gold\/60{border-color:color-mix(in srgb,#d4af37 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 60%,transparent)}}.border-dungeon-gold\/70{border-color:color-mix(in srgb,#d4af37 70%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 70%,transparent)}}.border-dungeon-gold\/75{border-color:color-mix(in srgb,#d4af37 75%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 75%,transparent)}}.border-dungeon-gold\/80{border-color:color-mix(in srgb,#d4af37 80%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 80%,transparent)}}.border-dungeon-paper{border-color:var(--color-dungeon-paper)}.border-emerald-400\/50{border-color:color-mix(in srgb,oklch(76.5% 0.177 163.223) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-emerald-400) 50%,transparent)}}.border-emerald-400\/60{border-color:color-mix(in srgb,oklch(76.5% 0.177 163.223) 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-emerald-400) 60%,transparent)}}.border-emerald-500\/50{border-color:color-mix(in srgb,oklch(69.6% 0.17 162.48) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-emerald-500) 50%,transparent)}}.border-emerald-900{border-color:var(--color-emerald-900)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-indigo-400\/55{border-color:color-mix(in srgb,oklch(67.3% 0.182 276.935) 55%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-indigo-400) 55%,transparent)}}.border-purple-400\/40{border-color:color-mix(in srgb,oklch(71.4% 0.203 305.504) 40%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-purple-400) 40%,transparent)}}.border-purple-900{border-color:var(--color-purple-900)}.border-red-400\/55{border-color:color-mix(in srgb,oklch(70.4% 0.191 22.216) 55%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-400) 55%,transparent)}}.border-red-500\/50{border-color:color-mix(in srgb,oklch(63.7% 0.237 25.331) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-500) 50%,transparent)}}.border-red-500\/60{border-color:color-mix(in srgb,oklch(63.7% 0.237 25.331) 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-500) 60%,transparent)}}.border-red-700\/50{border-color:color-mix(in srgb,oklch(50.5% 0.213 27.518) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-700) 50%,transparent)}}.border-red-900{border-color:var(--color-red-900)}.border-red-900\/20{border-color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 20%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-900) 20%,transparent)}}.border-red-900\/50{border-color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-red-900) 50%,transparent)}}.border-sky-500\/50{border-color:color-mix(in srgb,oklch(68.5% 0.169 237.323) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-sky-500) 50%,transparent)}}.border-slate-400\/45{border-color:color-mix(in srgb,oklch(70.4% 0.04 256.788) 45%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-slate-400) 45%,transparent)}}.border-violet-500\/50{border-color:color-mix(in srgb,oklch(60.6% 0.25 292.717) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-violet-500) 50%,transparent)}}.border-white\/5{border-color:color-mix(in srgb,#fff 5%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 5%,transparent)}}.border-white\/6{border-color:color-mix(in srgb,#fff 6%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 6%,transparent)}}.border-white\/8{border-color:color-mix(in srgb,#fff 8%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 8%,transparent)}}.border-white\/10{border-color:color-mix(in srgb,#fff 10%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 10%,transparent)}}.border-white\/15{border-color:color-mix(in srgb,#fff 15%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 15%,transparent)}}.border-white\/20{border-color:color-mix(in srgb,#fff 20%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 20%,transparent)}}.border-white\/30{border-color:color-mix(in srgb,#fff 30%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 30%,transparent)}}.border-yellow-500\/50{border-color:color-mix(in srgb,oklch(79.5% 0.184 86.047) 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-yellow-500) 50%,transparent)}}.border-yellow-800{border-color:var(--color-yellow-800)}.border-zinc-200\/80{border-color:color-mix(in srgb,oklch(92% 0.004 286.32) 80%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-zinc-200) 80%,transparent)}}.border-zinc-300{border-color:var(--color-zinc-300)}.border-zinc-300\/70{border-color:color-mix(in srgb,oklch(87.1% 0.006 286.286) 70%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-zinc-300) 70%,transparent)}}.border-zinc-300\/80{border-color:color-mix(in srgb,oklch(87.1% 0.006 286.286) 80%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-zinc-300) 80%,transparent)}}.bg-\[\#0a0a1a\]{background-color:#0a0a1a}.bg-\[\#0d0d10\]\/85{background-color:color-mix(in oklab,#0d0d10 85%,transparent)}.bg-\[\#0f0f0f\]{background-color:#0f0f0f}.bg-\[\#0f0906\]\/95{background-color:color-mix(in oklab,#0f0906 95%,transparent)}.bg-\[\#1a0a0a\]{background-color:#1a0a0a}.bg-\[\#1a0f08\]{background-color:#1a0f08}.bg-\[\#1a0f08\]\/35{background-color:color-mix(in oklab,#1a0f08 35%,transparent)}.bg-\[\#1a0f08\]\/50{background-color:color-mix(in oklab,#1a0f08 50%,transparent)}.bg-\[\#1a0f08\]\/70{background-color:color-mix(in oklab,#1a0f08 70%,transparent)}.bg-\[\#1a0f08\]\/80{background-color:color-mix(in oklab,#1a0f08 80%,transparent)}.bg-\[\#1a1a22\]{background-color:#1a1a22}.bg-\[\#1a1520\]\/95{background-color:color-mix(in oklab,#1a1520 95%,transparent)}.bg-\[\#1b1b24\]\/90{background-color:color-mix(in oklab,#1b1b24 90%,transparent)}.bg-\[\#100b09\]\/95{background-color:color-mix(in oklab,#100b09 95%,transparent)}.bg-\[\#110a06\]\/40{background-color:color-mix(in oklab,#110a06 40%,transparent)}.bg-\[\#120b08\]{background-color:#120b08}.bg-\[\#120d0a\]{background-color:#120d0a}.bg-\[\#130c08\]\/80{background-color:color-mix(in oklab,#130c08 80%,transparent)}.bg-\[\#140d08\]\/70{background-color:color-mix(in oklab,#140d08 70%,transparent)}.bg-\[\#160d08\]\/65{background-color:color-mix(in oklab,#160d08 65%,transparent)}.bg-\[\#160d08\]\/75{background-color:color-mix(in oklab,#160d08 75%,transparent)}.bg-\[\#16121e\]{background-color:#16121e}.bg-\[\#18141e\]{background-color:#18141e}.bg-\[\#18141e\]\/90{background-color:color-mix(in oklab,#18141e 90%,transparent)}.bg-\[\#050505\]{background-color:#050505}.bg-\[\#252030\]{background-color:#252030}.bg-\[\#252030\]\/80{background-color:color-mix(in oklab,#252030 80%,transparent)}.bg-\[\#252030\]\/90{background-color:color-mix(in oklab,#252030 90%,transparent)}.bg-amber-900\/70{background-color:color-mix(in srgb,oklch(41.4% 0.112 45.904) 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-amber-900) 70%,transparent)}}.bg-black{background-color:var(--color-black)}.bg-black\/20{background-color:color-mix(in srgb,#000 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 20%,transparent)}}.bg-black\/22{background-color:color-mix(in srgb,#000 22%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 22%,transparent)}}.bg-black\/25{background-color:color-mix(in srgb,#000 25%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 25%,transparent)}}.bg-black\/40{background-color:color-mix(in srgb,#000 40%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 40%,transparent)}}.bg-black\/45{background-color:color-mix(in srgb,#000 45%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 45%,transparent)}}.bg-black\/50{background-color:color-mix(in srgb,#000 50%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 50%,transparent)}}.bg-black\/60{background-color:color-mix(in srgb,#000 60%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 60%,transparent)}}.bg-black\/70{background-color:color-mix(in srgb,#000 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 70%,transparent)}}.bg-black\/80{background-color:color-mix(in srgb,#000 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 80%,transparent)}}.bg-black\/85{background-color:color-mix(in srgb,#000 85%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 85%,transparent)}}.bg-black\/90{background-color:color-mix(in srgb,#000 90%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-black) 90%,transparent)}}.bg-blue-900\/20{background-color:color-mix(in srgb,oklch(37.9% 0.146 265.522) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-blue-900) 20%,transparent)}}.bg-dungeon-brown\/20{background-color:color-mix(in srgb,#2c1a0e 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-brown) 20%,transparent)}}.bg-dungeon-brown\/60{background-color:color-mix(in srgb,#2c1a0e 60%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-brown) 60%,transparent)}}.bg-dungeon-dark\/40{background-color:color-mix(in srgb,#0a0a0c 40%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 40%,transparent)}}.bg-dungeon-dark\/50{background-color:color-mix(in srgb,#0a0a0c 50%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 50%,transparent)}}.bg-dungeon-dark\/60{background-color:color-mix(in srgb,#0a0a0c 60%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 60%,transparent)}}.bg-dungeon-dark\/70{background-color:color-mix(in srgb,#0a0a0c 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 70%,transparent)}}.bg-dungeon-dark\/80{background-color:color-mix(in srgb,#0a0a0c 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 80%,transparent)}}.bg-dungeon-dark\/90{background-color:color-mix(in srgb,#0a0a0c 90%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-dark) 90%,transparent)}}.bg-dungeon-gold{background-color:var(--color-dungeon-gold)}.bg-dungeon-gold\/10{background-color:color-mix(in srgb,#d4af37 10%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 10%,transparent)}}.bg-dungeon-gold\/15{background-color:color-mix(in srgb,#d4af37 15%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 15%,transparent)}}.bg-dungeon-gold\/20{background-color:color-mix(in srgb,#d4af37 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 20%,transparent)}}.bg-dungeon-gold\/70{background-color:color-mix(in srgb,#d4af37 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 70%,transparent)}}.bg-dungeon-gold\/80{background-color:color-mix(in srgb,#d4af37 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 80%,transparent)}}.bg-emerald-900\/20{background-color:color-mix(in srgb,oklch(37.8% 0.077 168.94) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-emerald-900) 20%,transparent)}}.bg-emerald-900\/65{background-color:color-mix(in srgb,oklch(37.8% 0.077 168.94) 65%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-emerald-900) 65%,transparent)}}.bg-emerald-950\/30{background-color:color-mix(in srgb,oklch(26.2% 0.051 172.552) 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-emerald-950) 30%,transparent)}}.bg-emerald-950\/70{background-color:color-mix(in srgb,oklch(26.2% 0.051 172.552) 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-emerald-950) 70%,transparent)}}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900\/40{background-color:color-mix(in srgb,oklch(21% 0.034 264.665) 40%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-gray-900) 40%,transparent)}}.bg-green-600\/75{background-color:color-mix(in srgb,oklch(62.7% 0.194 149.214) 75%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-green-600) 75%,transparent)}}.bg-indigo-400\/80{background-color:color-mix(in srgb,oklch(67.3% 0.182 276.935) 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-indigo-400) 80%,transparent)}}.bg-indigo-900\/70{background-color:color-mix(in srgb,oklch(35.9% 0.144 278.697) 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-indigo-900) 70%,transparent)}}.bg-orange-500\/85{background-color:color-mix(in srgb,oklch(70.5% 0.213 47.604) 85%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-orange-500) 85%,transparent)}}.bg-purple-700\/80{background-color:color-mix(in srgb,oklch(49.6% 0.265 301.924) 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-purple-700) 80%,transparent)}}.bg-purple-950\/30{background-color:color-mix(in srgb,oklch(29.1% 0.149 302.717) 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-purple-950) 30%,transparent)}}.bg-red-900\/20{background-color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-900) 20%,transparent)}}.bg-red-900\/65{background-color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 65%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-900) 65%,transparent)}}.bg-red-950\/30{background-color:color-mix(in srgb,oklch(25.8% 0.092 26.042) 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-950) 30%,transparent)}}.bg-red-950\/45{background-color:color-mix(in srgb,oklch(25.8% 0.092 26.042) 45%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-950) 45%,transparent)}}.bg-red-950\/70{background-color:color-mix(in srgb,oklch(25.8% 0.092 26.042) 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-950) 70%,transparent)}}.bg-red-950\/80{background-color:color-mix(in srgb,oklch(25.8% 0.092 26.042) 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-950) 80%,transparent)}}.bg-rose-500\/85{background-color:color-mix(in srgb,oklch(64.5% 0.246 16.439) 85%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-rose-500) 85%,transparent)}}.bg-sky-400\/85{background-color:color-mix(in srgb,oklch(74.6% 0.16 232.661) 85%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-sky-400) 85%,transparent)}}.bg-slate-800\/70{background-color:color-mix(in srgb,oklch(27.9% 0.041 260.031) 70%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-slate-800) 70%,transparent)}}.bg-transparent{background-color:transparent}.bg-violet-400\/85{background-color:color-mix(in srgb,oklch(70.2% 0.183 293.541) 85%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-violet-400) 85%,transparent)}}.bg-violet-900\/20{background-color:color-mix(in srgb,oklch(38% 0.189 293.745) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-violet-900) 20%,transparent)}}.bg-white{background-color:var(--color-white)}.bg-white\/5{background-color:color-mix(in srgb,#fff 5%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-white) 5%,transparent)}}.bg-yellow-900\/20{background-color:color-mix(in srgb,oklch(42.1% 0.095 57.708) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-yellow-900) 20%,transparent)}}.bg-yellow-950\/30{background-color:color-mix(in srgb,oklch(28.6% 0.066 53.813) 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-yellow-950) 30%,transparent)}}.bg-zinc-100{background-color:var(--color-zinc-100)}.bg-zinc-100\/10{background-color:color-mix(in srgb,oklch(96.7% 0.001 286.375) 10%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-zinc-100) 10%,transparent)}}.bg-zinc-100\/15{background-color:color-mix(in srgb,oklch(96.7% 0.001 286.375) 15%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-zinc-100) 15%,transparent)}}.bg-gradient-to-b{--tw-gradient-position:to bottom in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-t{--tw-gradient-position:to top in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-tr{--tw-gradient-position:to top right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-\[linear-gradient\(90deg\,transparent\,rgba\(255\,255\,255\,0\.08\)\,transparent\)\]{background-image:linear-gradient(90deg,transparent,rgba(255,255,255,0.08),transparent)}.bg-\[linear-gradient\(120deg\,rgba\(34\,21\,14\,0\.96\)\,rgba\(59\,35\,20\,0\.92\)_46\%\,rgba\(33\,20\,13\,0\.96\)\)\]{background-image:linear-gradient(120deg,rgba(34,21,14,0.96),rgba(59,35,20,0.92) 46%,rgba(33,20,13,0.96))}.bg-\[linear-gradient\(160deg\,rgba\(20\,13\,9\,0\.92\)\,rgba\(30\,19\,12\,0\.9\)\)\]{background-image:linear-gradient(160deg,rgba(20,13,9,0.92),rgba(30,19,12,0.9))}.bg-\[radial-gradient\(circle_at_18\%_-10\%\,rgba\(251\,191\,36\,0\.2\)\,transparent_45\%\)\,radial-gradient\(circle_at_84\%_0\%\,rgba\(251\,191\,36\,0\.12\)\,transparent_36\%\)\]{background-image:radial-gradient(circle at 18% -10%,rgba(251,191,36,0.2),transparent 45%),radial-gradient(circle at 84% 0%,rgba(251,191,36,0.12),transparent 36%)}.bg-\[radial-gradient\(circle_at_50\%_30\%\,_rgba\(40\,35\,50\,0\.5\)\,_\#0e0e14_90\%\)\]{background-image:radial-gradient(circle at 50% 30%,rgba(40,35,50,0.5),#0e0e14 90%)}.bg-\[radial-gradient\(circle_at_50\%_30\%\,_rgba\(60\,40\,30\,0\.3\)\,_\#000000_90\%\)\]{background-image:radial-gradient(circle at 50% 30%,rgba(60,40,30,0.3),#000000 90%)}.from-\[\#0066cc\]{--tw-gradient-from:#0066cc;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-\[\#cc2200\]{--tw-gradient-from:#cc2200;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-\[\#f9e6a0\]{--tw-gradient-from:#f9e6a0;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-amber-500\/85{--tw-gradient-from:color-mix(in srgb,oklch(76.9% 0.188 70.08) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-from:color-mix(in oklab,var(--color-amber-500) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-black\/55{--tw-gradient-from:color-mix(in srgb,#000 55%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-from:color-mix(in oklab,var(--color-black) 55%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-emerald-900{--tw-gradient-from:var(--color-emerald-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-gray-700{--tw-gradient-from:var(--color-gray-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-gray-800{--tw-gradient-from:var(--color-gray-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-purple-900{--tw-gradient-from:var(--color-purple-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-red-900{--tw-gradient-from:var(--color-red-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-rose-500\/85{--tw-gradient-from:color-mix(in srgb,oklch(64.5% 0.246 16.439) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-from:color-mix(in oklab,var(--color-rose-500) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-sky-500\/85{--tw-gradient-from:color-mix(in srgb,oklch(68.5% 0.169 237.323) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-from:color-mix(in oklab,var(--color-sky-500) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-transparent{--tw-gradient-from:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-yellow-900{--tw-gradient-from:var(--color-yellow-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-zinc-300\/70{--tw-gradient-from:color-mix(in srgb,oklch(87.1% 0.006 286.286) 70%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-from:color-mix(in oklab,var(--color-zinc-300) 70%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.from-zinc-900{--tw-gradient-from:var(--color-zinc-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.via-black\/10{--tw-gradient-via:color-mix(in srgb,#000 10%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-via:color-mix(in oklab,var(--color-black) 10%,transparent)}--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-via) var(--tw-gradient-via-position),var(--tw-gradient-to) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-dungeon-gold{--tw-gradient-via:var(--color-dungeon-gold);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-via) var(--tw-gradient-via-position),var(--tw-gradient-to) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-dungeon-gold\/20{--tw-gradient-via:color-mix(in srgb,#d4af37 20%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-via:color-mix(in oklab,var(--color-dungeon-gold) 20%,transparent)}--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-via) var(--tw-gradient-via-position),var(--tw-gradient-to) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-dungeon-gold\/50{--tw-gradient-via:color-mix(in srgb,#d4af37 50%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-via:color-mix(in oklab,var(--color-dungeon-gold) 50%,transparent)}--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-via) var(--tw-gradient-via-position),var(--tw-gradient-to) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-orange-400{--tw-gradient-via:var(--color-orange-400);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-via) var(--tw-gradient-via-position),var(--tw-gradient-to) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-\[\#0088ee\]{--tw-gradient-to:#0088ee;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-\[\#ee3311\]{--tw-gradient-to:#ee3311;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-black{--tw-gradient-to:var(--color-black);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-black\/38{--tw-gradient-to:color-mix(in srgb,#000 38%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-to:color-mix(in oklab,var(--color-black) 38%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-blue-400\/85{--tw-gradient-to:color-mix(in srgb,oklch(70.7% 0.165 254.624) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-to:color-mix(in oklab,var(--color-blue-400) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-dungeon-gold-dim{--tw-gradient-to:var(--color-dungeon-gold-dim);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-red-400\/85{--tw-gradient-to:color-mix(in srgb,oklch(70.4% 0.191 22.216) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-to:color-mix(in oklab,var(--color-red-400) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-red-500{--tw-gradient-to:var(--color-red-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-transparent{--tw-gradient-to:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-yellow-300\/85{--tw-gradient-to:color-mix(in srgb,oklch(90.5% 0.182 98.111) 85%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-gradient-to:color-mix(in oklab,var(--color-yellow-300) 85%,transparent)}--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.to-zinc-900{--tw-gradient-to:var(--color-zinc-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from) var(--tw-gradient-from-position),var(--tw-gradient-to) var(--tw-gradient-to-position))}.bg-\[length\:200px\]{background-size:200px}.bg-cover{background-size:cover}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.bg-center{background-position:center}.bg-no-repeat{background-repeat:no-repeat}.bg-repeat{background-repeat:repeat}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.object-bottom{object-position:bottom}.p-0{padding:calc(var(--spacing) * 0)}.p-1{padding:calc(var(--spacing) * 1)}.p-1\.5{padding:calc(var(--spacing) * 1.5)}.p-2{padding:calc(var(--spacing) * 2)}.p-2\.5{padding:calc(var(--spacing) * 2.5)}.p-3{padding:calc(var(--spacing) * 3)}.p-4{padding:calc(var(--spacing) * 4)}.p-5{padding:calc(var(--spacing) * 5)}.p-6{padding:calc(var(--spacing) * 6)}.p-8{padding:calc(var(--spacing) * 8)}.px-0\.5{padding-inline:calc(var(--spacing) * 0.5)}.px-1{padding-inline:calc(var(--spacing) * 1)}.px-1\.5{padding-inline:calc(var(--spacing) * 1.5)}.px-2{padding-inline:calc(var(--spacing) * 2)}.px-3{padding-inline:calc(var(--spacing) * 3)}.px-4{padding-inline:calc(var(--spacing) * 4)}.px-5{padding-inline:calc(var(--spacing) * 5)}.px-6{padding-inline:calc(var(--spacing) * 6)}.px-7{padding-inline:calc(var(--spacing) * 7)}.px-8{padding-inline:calc(var(--spacing) * 8)}.px-12{padding-inline:calc(var(--spacing) * 12)}.py-0\.5{padding-block:calc(var(--spacing) * 0.5)}.py-1{padding-block:calc(var(--spacing) * 1)}.py-1\.5{padding-block:calc(var(--spacing) * 1.5)}.py-2{padding-block:calc(var(--spacing) * 2)}.py-2\.5{padding-block:calc(var(--spacing) * 2.5)}.py-3{padding-block:calc(var(--spacing) * 3)}.py-4{padding-block:calc(var(--spacing) * 4)}.py-5{padding-block:calc(var(--spacing) * 5)}.py-6{padding-block:calc(var(--spacing) * 6)}.py-8{padding-block:calc(var(--spacing) * 8)}.py-10{padding-block:calc(var(--spacing) * 10)}.py-12{padding-block:calc(var(--spacing) * 12)}.pt-2{padding-top:calc(var(--spacing) * 2)}.pt-4{padding-top:calc(var(--spacing) * 4)}.pr-1{padding-right:calc(var(--spacing) * 1)}.pr-2{padding-right:calc(var(--spacing) * 2)}.pr-14{padding-right:calc(var(--spacing) * 14)}.pb-1{padding-bottom:calc(var(--spacing) * 1)}.pb-2{padding-bottom:calc(var(--spacing) * 2)}.pb-6{padding-bottom:calc(var(--spacing) * 6)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-body{font-family:var(--font-body)}.font-heading{font-family:var(--font-heading)}.font-mono{font-family:var(--font-mono)}.font-ui{font-family:var(--font-ui)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-6xl{font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[9px\]{font-size:9px}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[14px\]{font-size:14px}.text-\[20px\]{font-size:20px}.text-\[22px\]{font-size:22px}.leading-none{--tw-leading:1;line-height:1}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-extrabold{--tw-font-weight:var(--font-weight-extrabold);font-weight:var(--font-weight-extrabold)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-\[0\.2em\]{--tw-tracking:0.2em;letter-spacing:0.2em}.tracking-\[0\.35em\]{--tw-tracking:0.35em;letter-spacing:0.35em}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.tracking-widest{--tw-tracking:var(--tracking-widest);letter-spacing:var(--tracking-widest)}.break-words{overflow-wrap:break-word}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-\[\#2c0e0e\]{color:#2c0e0e}.text-\[\#2c1a0e\]{color:#2c1a0e}.text-\[\#5c3a21\]{color:#5c3a21}.text-\[\#55aaff\]{color:#55aaff}.text-\[\#b08a2e\]{color:#b08a2e}.text-\[\#cc3333\]{color:#cc3333}.text-\[\#f9e6a0\]{color:#f9e6a0}.text-\[\#ff6666\]{color:#ff6666}.text-amber-50{color:var(--color-amber-50)}.text-amber-100{color:var(--color-amber-100)}.text-amber-100\/65{color:color-mix(in srgb,oklch(96.2% 0.059 95.617) 65%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-amber-100) 65%,transparent)}}.text-amber-200{color:var(--color-amber-200)}.text-amber-200\/70{color:color-mix(in srgb,oklch(92.4% 0.12 95.746) 70%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-amber-200) 70%,transparent)}}.text-amber-200\/80{color:color-mix(in srgb,oklch(92.4% 0.12 95.746) 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-amber-200) 80%,transparent)}}.text-amber-300{color:var(--color-amber-300)}.text-amber-400{color:var(--color-amber-400)}.text-black{color:var(--color-black)}.text-blue-300{color:var(--color-blue-300)}.text-blue-400{color:var(--color-blue-400)}.text-cyan-300{color:var(--color-cyan-300)}.text-dungeon-gold{color:var(--color-dungeon-gold)}.text-dungeon-gold-dim{color:var(--color-dungeon-gold-dim)}.text-dungeon-gold\/20{color:color-mix(in srgb,#d4af37 20%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 20%,transparent)}}.text-dungeon-gold\/30{color:color-mix(in srgb,#d4af37 30%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 30%,transparent)}}.text-dungeon-gold\/40{color:color-mix(in srgb,#d4af37 40%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 40%,transparent)}}.text-dungeon-gold\/60{color:color-mix(in srgb,#d4af37 60%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 60%,transparent)}}.text-dungeon-gold\/75{color:color-mix(in srgb,#d4af37 75%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 75%,transparent)}}.text-dungeon-gold\/80{color:color-mix(in srgb,#d4af37 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 80%,transparent)}}.text-dungeon-gold\/90{color:color-mix(in srgb,#d4af37 90%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 90%,transparent)}}.text-dungeon-paper{color:var(--color-dungeon-paper)}.text-dungeon-paper\/35{color:color-mix(in srgb,#eaddcf 35%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 35%,transparent)}}.text-dungeon-paper\/40{color:color-mix(in srgb,#eaddcf 40%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 40%,transparent)}}.text-dungeon-paper\/45{color:color-mix(in srgb,#eaddcf 45%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 45%,transparent)}}.text-dungeon-paper\/50{color:color-mix(in srgb,#eaddcf 50%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 50%,transparent)}}.text-dungeon-paper\/55{color:color-mix(in srgb,#eaddcf 55%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 55%,transparent)}}.text-dungeon-paper\/60{color:color-mix(in srgb,#eaddcf 60%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 60%,transparent)}}.text-dungeon-paper\/65{color:color-mix(in srgb,#eaddcf 65%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 65%,transparent)}}.text-dungeon-paper\/70{color:color-mix(in srgb,#eaddcf 70%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 70%,transparent)}}.text-dungeon-paper\/75{color:color-mix(in srgb,#eaddcf 75%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 75%,transparent)}}.text-dungeon-paper\/80{color:color-mix(in srgb,#eaddcf 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 80%,transparent)}}.text-dungeon-paper\/85{color:color-mix(in srgb,#eaddcf 85%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-paper) 85%,transparent)}}.text-emerald-200{color:var(--color-emerald-200)}.text-emerald-300{color:var(--color-emerald-300)}.text-emerald-400{color:var(--color-emerald-400)}.text-fuchsia-300{color:var(--color-fuchsia-300)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-green-300{color:var(--color-green-300)}.text-green-400{color:var(--color-green-400)}.text-indigo-200{color:var(--color-indigo-200)}.text-indigo-300{color:var(--color-indigo-300)}.text-lime-300{color:var(--color-lime-300)}.text-orange-300{color:var(--color-orange-300)}.text-purple-400{color:var(--color-purple-400)}.text-red-100{color:var(--color-red-100)}.text-red-200{color:var(--color-red-200)}.text-red-300{color:var(--color-red-300)}.text-red-300\/70{color:color-mix(in srgb,oklch(80.8% 0.114 19.571) 70%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-red-300) 70%,transparent)}}.text-red-300\/85{color:color-mix(in srgb,oklch(80.8% 0.114 19.571) 85%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-red-300) 85%,transparent)}}.text-red-400{color:var(--color-red-400)}.text-red-400\/80{color:color-mix(in srgb,oklch(70.4% 0.191 22.216) 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-red-400) 80%,transparent)}}.text-red-500{color:var(--color-red-500)}.text-red-800{color:var(--color-red-800)}.text-red-900\/20{color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 20%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-red-900) 20%,transparent)}}.text-rose-300{color:var(--color-rose-300)}.text-rose-400{color:var(--color-rose-400)}.text-sky-200{color:var(--color-sky-200)}.text-sky-300{color:var(--color-sky-300)}.text-slate-200{color:var(--color-slate-200)}.text-slate-300{color:var(--color-slate-300)}.text-teal-300{color:var(--color-teal-300)}.text-transparent{color:transparent}.text-violet-300{color:var(--color-violet-300)}.text-violet-400{color:var(--color-violet-400)}.text-white{color:var(--color-white)}.text-white\/20{color:color-mix(in srgb,#fff 20%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 20%,transparent)}}.text-white\/40{color:color-mix(in srgb,#fff 40%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 40%,transparent)}}.text-white\/45{color:color-mix(in srgb,#fff 45%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 45%,transparent)}}.text-white\/50{color:color-mix(in srgb,#fff 50%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 50%,transparent)}}.text-white\/60{color:color-mix(in srgb,#fff 60%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 60%,transparent)}}.text-white\/70{color:color-mix(in srgb,#fff 70%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 70%,transparent)}}.text-white\/80{color:color-mix(in srgb,#fff 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 80%,transparent)}}.text-white\/90{color:color-mix(in srgb,#fff 90%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 90%,transparent)}}.text-yellow-300{color:var(--color-yellow-300)}.text-yellow-400{color:var(--color-yellow-400)}.text-zinc-100{color:var(--color-zinc-100)}.text-zinc-200{color:var(--color-zinc-200)}.text-zinc-300{color:var(--color-zinc-300)}.text-zinc-500{color:var(--color-zinc-500)}.text-zinc-600{color:var(--color-zinc-600)}.text-zinc-700{color:var(--color-zinc-700)}.text-zinc-900{color:var(--color-zinc-900)}.capitalize{text-transform:capitalize}.lowercase{text-transform:lowercase}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.placeholder-gray-700{&::placeholder{color:var(--color-gray-700)}}.accent-amber-500{accent-color:var(--color-amber-500)}.accent-dungeon-gold{accent-color:var(--color-dungeon-gold)}.opacity-0{opacity:0%}.opacity-20{opacity:20%}.opacity-30{opacity:30%}.opacity-40{opacity:40%}.opacity-50{opacity:50%}.opacity-60{opacity:60%}.opacity-80{opacity:80%}.opacity-100{opacity:100%}.mix-blend-overlay{mix-blend-mode:overlay}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,rgb(0 0 0/0.1)),0 1px 2px -1px var(--tw-shadow-color,rgb(0 0 0/0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,rgb(0 0 0/0.25));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_8px_rgba\(212\,175\,55\,0\.15\)\]{--tw-shadow:0 0 8px var(--tw-shadow-color,rgba(212,175,55,0.15));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_11px_rgba\(212\,175\,55\,0\.45\)\]{--tw-shadow:0 0 11px var(--tw-shadow-color,rgba(212,175,55,0.45));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_14px_rgba\(239\,68\,68\,0\.35\)\]{--tw-shadow:0 0 14px var(--tw-shadow-color,rgba(239,68,68,0.35));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_15px_\#d4af37\]{--tw-shadow:0 0 15px var(--tw-shadow-color,#d4af37);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_20px_rgba\(200\,120\,0\,0\.15\)\]{--tw-shadow:0 0 20px var(--tw-shadow-color,rgba(200,120,0,0.15));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_20px_rgba\(212\,175\,55\,0\.45\)\]{--tw-shadow:0 0 20px var(--tw-shadow-color,rgba(212,175,55,0.45));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_20px_rgba\(212\,175\,55\,0\.85\)\]{--tw-shadow:0 0 20px var(--tw-shadow-color,rgba(212,175,55,0.85));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_28px_rgba\(212\,175\,55\,0\.2\)\]{--tw-shadow:0 0 28px var(--tw-shadow-color,rgba(212,175,55,0.2));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_30px_\#d4af37\]{--tw-shadow:0 0 30px var(--tw-shadow-color,#d4af37);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_0_30px_rgba\(0\,0\,0\,0\.8\)\]{--tw-shadow:0 0 30px var(--tw-shadow-color,rgba(0,0,0,0.8));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_24px_60px_rgba\(0\,0\,0\,0\.65\)\,0_0_50px_rgba\(217\,119\,6\,0\.22\)\]{--tw-shadow:0 24px 60px var(--tw-shadow-color,rgba(0,0,0,0.65)),0 0 50px var(--tw-shadow-color,rgba(217,119,6,0.22));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 var(--tw-shadow-color,rgb(0 0 0/0.05));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,rgb(0 0 0/0.1)),0 4px 6px -4px var(--tw-shadow-color,rgb(0 0 0/0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,rgb(0 0 0/0.1)),0 2px 4px -2px var(--tw-shadow-color,rgb(0 0 0/0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,rgb(0 0 0/0.1)),0 8px 10px -6px var(--tw-shadow-color,rgb(0 0 0/0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-4{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-dungeon-gold{--tw-ring-color:var(--color-dungeon-gold)}.ring-dungeon-gold\/70{--tw-ring-color:color-mix(in srgb,#d4af37 70%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-ring-color:color-mix(in oklab,var(--color-dungeon-gold) 70%,transparent)}}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.blur-2xl{--tw-blur:blur(var(--blur-2xl));filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.brightness-50{--tw-brightness:brightness(50%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.brightness-100{--tw-brightness:brightness(100%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_8px_rgba\(39\,39\,42\,0\.9\)\]{--tw-drop-shadow-size:drop-shadow(0 0 8px var(--tw-drop-shadow-color,rgba(39,39,42,0.9)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_8px_rgba\(74\,222\,128\,0\.85\)\]{--tw-drop-shadow-size:drop-shadow(0 0 8px var(--tw-drop-shadow-color,rgba(74,222,128,0.85)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_8px_rgba\(96\,165\,250\,0\.85\)\]{--tw-drop-shadow-size:drop-shadow(0 0 8px var(--tw-drop-shadow-color,rgba(96,165,250,0.85)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_8px_rgba\(209\,213\,219\,0\.85\)\]{--tw-drop-shadow-size:drop-shadow(0 0 8px var(--tw-drop-shadow-color,rgba(209,213,219,0.85)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_8px_rgba\(248\,113\,113\,0\.85\)\]{--tw-drop-shadow-size:drop-shadow(0 0 8px var(--tw-drop-shadow-color,rgba(248,113,113,0.85)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_10px_rgba\(251\,191\,36\,0\.35\)\]{--tw-drop-shadow-size:drop-shadow(0 0 10px var(--tw-drop-shadow-color,rgba(251,191,36,0.35)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_0_30px_rgba\(0\,0\,0\,0\.9\)\]{--tw-drop-shadow-size:drop-shadow(0 0 30px var(--tw-drop-shadow-color,rgba(0,0,0,0.9)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-\[0_4px_10px_rgba\(0\,0\,0\,0\.8\)\]{--tw-drop-shadow-size:drop-shadow(0 4px 10px var(--tw-drop-shadow-color,rgba(0,0,0,0.8)));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-lg{--tw-drop-shadow-size:drop-shadow(0 4px 4px var(--tw-drop-shadow-color,rgb(0 0 0/0.15)));--tw-drop-shadow:drop-shadow(var(--drop-shadow-lg));filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-md{--tw-drop-shadow-size:drop-shadow(0 3px 3px var(--tw-drop-shadow-color,rgb(0 0 0/0.12)));--tw-drop-shadow:drop-shadow(var(--drop-shadow-md));filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-sm{--tw-drop-shadow-size:drop-shadow(0 1px 2px var(--tw-drop-shadow-color,rgb(0 0 0/0.15)));--tw-drop-shadow:drop-shadow(var(--drop-shadow-sm));filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.drop-shadow-xl{--tw-drop-shadow-size:drop-shadow(0 9px 7px var(--tw-drop-shadow-color,rgb(0 0 0/0.1)));--tw-drop-shadow:drop-shadow(var(--drop-shadow-xl));filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.grayscale{--tw-grayscale:grayscale(100%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.invert{--tw-invert:invert(100%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.saturate-60{--tw-saturate:saturate(60%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.saturate-110{--tw-saturate:saturate(110%);filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,)}.backdrop-blur-md{--tw-backdrop-blur:blur(var(--blur-md));backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,)}.backdrop-filter{backdrop-filter:var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:300ms;transition-duration:300ms}.duration-400{--tw-duration:400ms;transition-duration:400ms}.duration-500{--tw-duration:500ms;transition-duration:500ms}.duration-700{--tw-duration:700ms;transition-duration:700ms}.duration-1000{--tw-duration:1000ms;transition-duration:1000ms}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.select-none{-webkit-user-select:none;user-select:none}.\[text-shadow\:0_1px_2px_rgba\(0\,0\,0\,0\.9\)\]{text-shadow:0 1px 2px rgba(0,0,0,0.9)}.group-hover\:w-full{&:is(:where(.group):hover *){@media (hover:hover){width:100%}}}.group-hover\:scale-110{&:is(:where(.group):hover *){@media (hover:hover){--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x) var(--tw-scale-y)}}}.group-hover\:border-dungeon-gold\/50{&:is(:where(.group):hover *){@media (hover:hover){border-color:color-mix(in srgb,#d4af37 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 50%,transparent)}}}}.group-hover\:text-dungeon-gold{&:is(:where(.group):hover *){@media (hover:hover){color:var(--color-dungeon-gold)}}}.group-hover\:text-dungeon-paper{&:is(:where(.group):hover *){@media (hover:hover){color:var(--color-dungeon-paper)}}}.group-hover\:opacity-70{&:is(:where(.group):hover *){@media (hover:hover){opacity:70%}}}.group-hover\:opacity-100{&:is(:where(.group):hover *){@media (hover:hover){opacity:100%}}}.hover\:z-10{&:hover{@media (hover:hover){z-index:10}}}.hover\:z-50{&:hover{@media (hover:hover){z-index:50}}}.hover\:translate-x-1{&:hover{@media (hover:hover){--tw-translate-x:calc(var(--spacing) * 1);translate:var(--tw-translate-x) var(--tw-translate-y)}}}.hover\:-translate-y-0\.5{&:hover{@media (hover:hover){--tw-translate-y:calc(var(--spacing) * -0.5);translate:var(--tw-translate-x) var(--tw-translate-y)}}}.hover\:-translate-y-2{&:hover{@media (hover:hover){--tw-translate-y:calc(var(--spacing) * -2);translate:var(--tw-translate-x) var(--tw-translate-y)}}}.hover\:-translate-y-4{&:hover{@media (hover:hover){--tw-translate-y:calc(var(--spacing) * -4);translate:var(--tw-translate-x) var(--tw-translate-y)}}}.hover\:scale-105{&:hover{@media (hover:hover){--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x) var(--tw-scale-y)}}}.hover\:scale-110{&:hover{@media (hover:hover){--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x) var(--tw-scale-y)}}}.hover\:scale-\[1\.01\]{&:hover{@media (hover:hover){scale:1.01}}}.hover\:scale-\[1\.02\]{&:hover{@media (hover:hover){scale:1.02}}}.hover\:border-amber-400{&:hover{@media (hover:hover){border-color:var(--color-amber-400)}}}.hover\:border-dungeon-gold{&:hover{@media (hover:hover){border-color:var(--color-dungeon-gold)}}}.hover\:border-dungeon-gold\/40{&:hover{@media (hover:hover){border-color:color-mix(in srgb,#d4af37 40%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 40%,transparent)}}}}.hover\:border-dungeon-gold\/45{&:hover{@media (hover:hover){border-color:color-mix(in srgb,#d4af37 45%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 45%,transparent)}}}}.hover\:border-dungeon-gold\/50{&:hover{@media (hover:hover){border-color:color-mix(in srgb,#d4af37 50%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 50%,transparent)}}}}.hover\:border-dungeon-gold\/60{&:hover{@media (hover:hover){border-color:color-mix(in srgb,#d4af37 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 60%,transparent)}}}}.hover\:border-gray-400{&:hover{@media (hover:hover){border-color:var(--color-gray-400)}}}.hover\:border-red-600{&:hover{@media (hover:hover){border-color:var(--color-red-600)}}}.hover\:border-white\/20{&:hover{@media (hover:hover){border-color:color-mix(in srgb,#fff 20%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-white) 20%,transparent)}}}}.hover\:border-zinc-300{&:hover{@media (hover:hover){border-color:var(--color-zinc-300)}}}.hover\:bg-\[\#352a40\]{&:hover{@media (hover:hover){background-color:#352a40}}}.hover\:bg-amber-900\/20{&:hover{@media (hover:hover){background-color:color-mix(in srgb,oklch(41.4% 0.112 45.904) 20%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-amber-900) 20%,transparent)}}}}.hover\:bg-dungeon-brown{&:hover{@media (hover:hover){background-color:var(--color-dungeon-brown)}}}.hover\:bg-dungeon-brown\/30{&:hover{@media (hover:hover){background-color:color-mix(in srgb,#2c1a0e 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-brown) 30%,transparent)}}}}.hover\:bg-dungeon-brown\/40{&:hover{@media (hover:hover){background-color:color-mix(in srgb,#2c1a0e 40%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-brown) 40%,transparent)}}}}.hover\:bg-dungeon-brown\/80{&:hover{@media (hover:hover){background-color:color-mix(in srgb,#2c1a0e 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-brown) 80%,transparent)}}}}.hover\:bg-dungeon-gold\/10{&:hover{@media (hover:hover){background-color:color-mix(in srgb,#d4af37 10%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-dungeon-gold) 10%,transparent)}}}}.hover\:bg-gray-800{&:hover{@media (hover:hover){background-color:var(--color-gray-800)}}}.hover\:bg-red-900\/80{&:hover{@media (hover:hover){background-color:color-mix(in srgb,oklch(39.6% 0.141 25.723) 80%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-900) 80%,transparent)}}}}.hover\:bg-red-950\/30{&:hover{@media (hover:hover){background-color:color-mix(in srgb,oklch(25.8% 0.092 26.042) 30%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-red-950) 30%,transparent)}}}}.hover\:bg-sky-500\/10{&:hover{@media (hover:hover){background-color:color-mix(in srgb,oklch(68.5% 0.169 237.323) 10%,transparent);@supports (color:color-mix(in lab,red,red)){background-color:color-mix(in oklab,var(--color-sky-500) 10%,transparent)}}}}.hover\:text-amber-100{&:hover{@media (hover:hover){color:var(--color-amber-100)}}}.hover\:text-amber-200{&:hover{@media (hover:hover){color:var(--color-amber-200)}}}.hover\:text-dungeon-gold{&:hover{@media (hover:hover){color:var(--color-dungeon-gold)}}}.hover\:text-dungeon-gold\/90{&:hover{@media (hover:hover){color:color-mix(in srgb,#d4af37 90%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-dungeon-gold) 90%,transparent)}}}}.hover\:text-dungeon-paper{&:hover{@media (hover:hover){color:var(--color-dungeon-paper)}}}.hover\:text-red-500{&:hover{@media (hover:hover){color:var(--color-red-500)}}}.hover\:text-white\/80{&:hover{@media (hover:hover){color:color-mix(in srgb,#fff 80%,transparent);@supports (color:color-mix(in lab,red,red)){color:color-mix(in oklab,var(--color-white) 80%,transparent)}}}}.hover\:shadow-\[0_0_12px_rgba\(212\,175\,55\,0\.08\)\]{&:hover{@media (hover:hover){--tw-shadow:0 0 12px var(--tw-shadow-color,rgba(212,175,55,0.08));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}}.hover\:shadow-\[0_0_15px_rgba\(212\,175\,55\,0\.1\)\]{&:hover{@media (hover:hover){--tw-shadow:0 0 15px var(--tw-shadow-color,rgba(212,175,55,0.1));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}}.hover\:shadow-\[0_0_20px_rgba\(248\,113\,113\,0\.5\)\]{&:hover{@media (hover:hover){--tw-shadow:0 0 20px var(--tw-shadow-color,rgba(248,113,113,0.5));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}}.focus\:border-dungeon-gold{&:focus{border-color:var(--color-dungeon-gold)}}.focus\:border-dungeon-gold\/60{&:focus{border-color:color-mix(in srgb,#d4af37 60%,transparent);@supports (color:color-mix(in lab,red,red)){border-color:color-mix(in oklab,var(--color-dungeon-gold) 60%,transparent)}}}.focus\:ring-1{&:focus{--tw-ring-shadow:var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\:ring-dungeon-gold\/50{&:focus{--tw-ring-color:color-mix(in srgb,#d4af37 50%,transparent);@supports (color:color-mix(in lab,red,red)){--tw-ring-color:color-mix(in oklab,var(--color-dungeon-gold) 50%,transparent)}}}.focus\:outline-none{&:focus{--tw-outline-style:none;outline-style:none}}.active\:scale-95{&:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x) var(--tw-scale-y)}}.active\:scale-\[0\.98\]{&:active{scale:0.98}}.disabled\:cursor-not-allowed{&:disabled{cursor:not-allowed}}.disabled\:opacity-30{&:disabled{opacity:30%}}.disabled\:opacity-40{&:disabled{opacity:40%}}.disabled\:opacity-50{&:disabled{opacity:50%}}.sm\:grid-cols-2{@media (width >= 40rem){grid-template-columns:repeat(2,minmax(0,1fr))}}.sm\:grid-cols-4{@media (width >= 40rem){grid-template-columns:repeat(4,minmax(0,1fr))}}.md\:top-\[5\%\]{@media (width >= 48rem){top:5%}}.md\:right-\[3\%\]{@media (width >= 48rem){right:3%}}.md\:bottom-\[22\%\]{@media (width >= 48rem){bottom:22%}}.md\:left-\[6\%\]{@media (width >= 48rem){left:6%}}.md\:translate-y-32{@media (width >= 48rem){--tw-translate-y:calc(var(--spacing) * 32);translate:var(--tw-translate-x) var(--tw-translate-y)}}.md\:grid-cols-2{@media (width >= 48rem){grid-template-columns:repeat(2,minmax(0,1fr))}}.md\:grid-cols-3{@media (width >= 48rem){grid-template-columns:repeat(3,minmax(0,1fr))}}.md\:grid-cols-5{@media (width >= 48rem){grid-template-columns:repeat(5,minmax(0,1fr))}}.md\:p-7{@media (width >= 48rem){padding:calc(var(--spacing) * 7)}}.md\:p-10{@media (width >= 48rem){padding:calc(var(--spacing) * 10)}}.md\:px-7{@media (width >= 48rem){padding-inline:calc(var(--spacing) * 7)}}.md\:px-12{@media (width >= 48rem){padding-inline:calc(var(--spacing) * 12)}}.md\:pl-24{@media (width >= 48rem){padding-left:calc(var(--spacing) * 24)}}.md\:text-2xl{@media (width >= 48rem){font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}}.md\:text-6xl{@media (width >= 48rem){font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}}.md\:text-8xl{@media (width >= 48rem){font-size:var(--text-8xl);line-height:var(--tw-leading,var(--text-8xl--line-height))}}}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes shimmer{0%{background-position:-1000px 0}100%{background-position:1000px 0}}@keyframes deal{0%{transform:translateY(100px) scale(0.5);opacity:0}100%{transform:translateY(0) scale(1);opacity:1}}@keyframes clashLeft{0%{transform:translateX(-200px) scale(0.8);opacity:0}40%{transform:translateX(-250px) scale(0.9);opacity:1}100%{transform:translateX(0) scale(1);opacity:1}}@keyframes clashRight{0%{transform:translateX(200px) scale(0.8);opacity:0}40%{transform:translateX(250px) scale(0.9);opacity:1}100%{transform:translateX(0) scale(1);opacity:1}}@keyframes shatter{0%{transform:scale(1);filter:brightness(2)}30%{transform:scale(1.2) rotate(15deg);filter:brightness(3) sepia(1) hue-rotate(-50deg);opacity:0.8}100%{transform:scale(1.5) rotate(45deg);opacity:0;filter:brightness(0)}}@keyframes shake{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(4px,0,0)}30%,50%,70%{transform:translate3d(-6px,0,0)}40%,60%{transform:translate3d(6px,0,0)}}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#14111a}::-webkit-scrollbar-thumb{background:#2a2535;border-radius:4px;border:1px solid #3a3545}::-webkit-scrollbar-thumb:hover{background:#3a3545}.custom-scrollbar::-webkit-scrollbar{width:6px}.custom-scrollbar::-webkit-scrollbar-track{background:#0a0a0c}.glass-panel{background:rgba(18,14,24,0.8);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,0.08);box-shadow:0 4px 30px rgba(0,0,0,0.6)}.scanlines{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to bottom,rgba(255,255,255,0),rgba(255,255,255,0) 50%,rgba(0,0,0,0.1) 50%,rgba(0,0,0,0.1));background-size:100% 4px;pointer-events:none;z-index:9999;opacity:0.15}body{background-color:#0a0a10;color:#eaddcf;margin:0;padding:0;overflow:hidden}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0px}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:0.5}}@keyframes bounce{0%,100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}@layer properties{@supports ((-webkit-hyphens:none) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,::before,::after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}


/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>